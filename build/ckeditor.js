!function(t){const e=t.en=t.en||{};e.dictionary=Object.assign(e.dictionary||{},{"%0 of %1":"%0 of %1","Align cell text to the bottom":"Align cell text to the bottom","Align cell text to the center":"Align cell text to the center","Align cell text to the left":"Align cell text to the left","Align cell text to the middle":"Align cell text to the middle","Align cell text to the right":"Align cell text to the right","Align cell text to the top":"Align cell text to the top","Align center":"Align center","Align left":"Align left","Align right":"Align right","Align table to the left":"Align table to the left","Align table to the right":"Align table to the right",Alignment:"Alignment","Almost equal to":"Almost equal to",Angle:"Angle","Approximately equal to":"Approximately equal to",Aquamarine:"Aquamarine","Asterisk operator":"Asterisk operator","Austral sign":"Austral sign","back with leftwards arrow above":"back with leftwards arrow above",Background:"Background",Big:"Big","Bitcoin sign":"Bitcoin sign",Black:"Black","Block quote":"Block quote","Block styles":"Block styles",Blue:"Blue","Blue marker":"Blue marker",Bold:"Bold",Border:"Border","Break text":"Break text","Bulleted List":"Bulleted List","Bulleted list styles toolbar":"Bulleted list styles toolbar",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Caption for image: %0":"Caption for image: %0","Caption for the image":"Caption for the image","Cedi sign":"Cedi sign","Cell properties":"Cell properties","Cent sign":"Cent sign","Center table":"Center table","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Character categories":"Character categories","Characters: %0":"Characters: %0","Choose heading":"Choose heading","Choose language":"Choose language",Circle:"Circle",Code:"Code","Colon sign":"Colon sign",Color:"Color","Color picker":"Color picker",Column:"Column","Contains as member":"Contains as member","Copyright sign":"Copyright sign","Cruzeiro sign":"Cruzeiro sign","Currency sign":"Currency sign",Dashed:"Dashed",Decimal:"Decimal","Decimal with leading zero":"Decimal with leading zero","Decrease indent":"Decrease indent",Default:"Default","Degree sign":"Degree sign","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Dimensions:"Dimensions","Disable editing":"Disable editing",Disc:"Disc","Division sign":"Division sign","Document colors":"Document colors","Dollar sign":"Dollar sign","Dong sign":"Dong sign",Dotted:"Dotted",Double:"Double","Double dagger":"Double dagger","Double exclamation mark":"Double exclamation mark","Double low-9 quotation mark":"Double low-9 quotation mark","Double question mark":"Double question mark",Downloadable:"Downloadable","downwards arrow to bar":"downwards arrow to bar","downwards dashed arrow":"downwards dashed arrow","downwards double arrow":"downwards double arrow","downwards simple arrow":"downwards simple arrow","Drachma sign":"Drachma sign","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor block content toolbar":"Editor block content toolbar","Editor contextual toolbar":"Editor contextual toolbar","Editor editing area: %0":"Editor editing area: %0","Editor toolbar":"Editor toolbar","Element of":"Element of","Em dash":"Em dash","Empty set":"Empty set","En dash":"En dash","Enable editing":"Enable editing","end with leftwards arrow above":"end with leftwards arrow above","Enter image caption":"Enter image caption","Enter table caption":"Enter table caption","Euro sign":"Euro sign","Euro-currency sign":"Euro-currency sign","Exclamation question mark":"Exclamation question mark",Find:"Find","Find and replace":"Find and replace","Find in text…":"Find in text…","Font Background Color":"Font Background Color","Font Color":"Font Color","Font Family":"Font Family","Font Size":"Font Size","For all":"For all","Fraction slash":"Fraction slash","French franc sign":"French franc sign","Full size image":"Full size image","German penny sign":"German penny sign","Greater-than or equal to":"Greater-than or equal to","Greater-than sign":"Greater-than sign",Green:"Green","Green marker":"Green marker","Green pen":"Green pen",Grey:"Grey",Groove:"Groove","Guarani sign":"Guarani sign","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Height:"Height",Highlight:"Highlight","Horizontal ellipsis":"Horizontal ellipsis","Horizontal line":"Horizontal line","Horizontal text alignment toolbar":"Horizontal text alignment toolbar","Hryvnia sign":"Hryvnia sign","HTML object":"HTML object",Huge:"Huge","Identical to":"Identical to","Image resize list":"Image resize list","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent","Indian rupee sign":"Indian rupee sign",Infinity:"Infinity",Insert:"Insert","Insert code block":"Insert code block","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image via URL":"Insert image via URL","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table",Inset:"Inset",Integral:"Integral",Intersection:"Intersection","Inverted exclamation mark":"Inverted exclamation mark","Inverted question mark":"Inverted question mark",Italic:"Italic",Justify:"Justify","Justify cell text":"Justify cell text","Kip sign":"Kip sign",Language:"Language","Latin capital letter a with breve":"Latin capital letter a with breve","Latin capital letter a with macron":"Latin capital letter a with macron","Latin capital letter a with ogonek":"Latin capital letter a with ogonek","Latin capital letter c with acute":"Latin capital letter c with acute","Latin capital letter c with caron":"Latin capital letter c with caron","Latin capital letter c with circumflex":"Latin capital letter c with circumflex","Latin capital letter c with dot above":"Latin capital letter c with dot above","Latin capital letter d with caron":"Latin capital letter d with caron","Latin capital letter d with stroke":"Latin capital letter d with stroke","Latin capital letter e with breve":"Latin capital letter e with breve","Latin capital letter e with caron":"Latin capital letter e with caron","Latin capital letter e with dot above":"Latin capital letter e with dot above","Latin capital letter e with macron":"Latin capital letter e with macron","Latin capital letter e with ogonek":"Latin capital letter e with ogonek","Latin capital letter eng":"Latin capital letter eng","Latin capital letter g with breve":"Latin capital letter g with breve","Latin capital letter g with cedilla":"Latin capital letter g with cedilla","Latin capital letter g with circumflex":"Latin capital letter g with circumflex","Latin capital letter g with dot above":"Latin capital letter g with dot above","Latin capital letter h with circumflex":"Latin capital letter h with circumflex","Latin capital letter h with stroke":"Latin capital letter h with stroke","Latin capital letter i with breve":"Latin capital letter i with breve","Latin capital letter i with dot above":"Latin capital letter i with dot above","Latin capital letter i with macron":"Latin capital letter i with macron","Latin capital letter i with ogonek":"Latin capital letter i with ogonek","Latin capital letter i with tilde":"Latin capital letter i with tilde","Latin capital letter j with circumflex":"Latin capital letter j with circumflex","Latin capital letter k with cedilla":"Latin capital letter k with cedilla","Latin capital letter l with acute":"Latin capital letter l with acute","Latin capital letter l with caron":"Latin capital letter l with caron","Latin capital letter l with cedilla":"Latin capital letter l with cedilla","Latin capital letter l with middle dot":"Latin capital letter l with middle dot","Latin capital letter l with stroke":"Latin capital letter l with stroke","Latin capital letter n with acute":"Latin capital letter n with acute","Latin capital letter n with caron":"Latin capital letter n with caron","Latin capital letter n with cedilla":"Latin capital letter n with cedilla","Latin capital letter o with breve":"Latin capital letter o with breve","Latin capital letter o with double acute":"Latin capital letter o with double acute","Latin capital letter o with macron":"Latin capital letter o with macron","Latin capital letter r with acute":"Latin capital letter r with acute","Latin capital letter r with caron":"Latin capital letter r with caron","Latin capital letter r with cedilla":"Latin capital letter r with cedilla","Latin capital letter s with acute":"Latin capital letter s with acute","Latin capital letter s with caron":"Latin capital letter s with caron","Latin capital letter s with cedilla":"Latin capital letter s with cedilla","Latin capital letter s with circumflex":"Latin capital letter s with circumflex","Latin capital letter t with caron":"Latin capital letter t with caron","Latin capital letter t with cedilla":"Latin capital letter t with cedilla","Latin capital letter t with stroke":"Latin capital letter t with stroke","Latin capital letter u with breve":"Latin capital letter u with breve","Latin capital letter u with double acute":"Latin capital letter u with double acute","Latin capital letter u with macron":"Latin capital letter u with macron","Latin capital letter u with ogonek":"Latin capital letter u with ogonek","Latin capital letter u with ring above":"Latin capital letter u with ring above","Latin capital letter u with tilde":"Latin capital letter u with tilde","Latin capital letter w with circumflex":"Latin capital letter w with circumflex","Latin capital letter y with circumflex":"Latin capital letter y with circumflex","Latin capital letter y with diaeresis":"Latin capital letter y with diaeresis","Latin capital letter z with acute":"Latin capital letter z with acute","Latin capital letter z with caron":"Latin capital letter z with caron","Latin capital letter z with dot above":"Latin capital letter z with dot above","Latin capital ligature ij":"Latin capital ligature ij","Latin capital ligature oe":"Latin capital ligature oe","Latin small letter a with breve":"Latin small letter a with breve","Latin small letter a with macron":"Latin small letter a with macron","Latin small letter a with ogonek":"Latin small letter a with ogonek","Latin small letter c with acute":"Latin small letter c with acute","Latin small letter c with caron":"Latin small letter c with caron","Latin small letter c with circumflex":"Latin small letter c with circumflex","Latin small letter c with dot above":"Latin small letter c with dot above","Latin small letter d with caron":"Latin small letter d with caron","Latin small letter d with stroke":"Latin small letter d with stroke","Latin small letter dotless i":"Latin small letter dotless i","Latin small letter e with breve":"Latin small letter e with breve","Latin small letter e with caron":"Latin small letter e with caron","Latin small letter e with dot above":"Latin small letter e with dot above","Latin small letter e with macron":"Latin small letter e with macron","Latin small letter e with ogonek":"Latin small letter e with ogonek","Latin small letter eng":"Latin small letter eng","Latin small letter f with hook":"Latin small letter f with hook","Latin small letter g with breve":"Latin small letter g with breve","Latin small letter g with cedilla":"Latin small letter g with cedilla","Latin small letter g with circumflex":"Latin small letter g with circumflex","Latin small letter g with dot above":"Latin small letter g with dot above","Latin small letter h with circumflex":"Latin small letter h with circumflex","Latin small letter h with stroke":"Latin small letter h with stroke","Latin small letter i with breve":"Latin small letter i with breve","Latin small letter i with macron":"Latin small letter i with macron","Latin small letter i with ogonek":"Latin small letter i with ogonek","Latin small letter i with tilde":"Latin small letter i with tilde","Latin small letter j with circumflex":"Latin small letter j with circumflex","Latin small letter k with cedilla":"Latin small letter k with cedilla","Latin small letter kra":"Latin small letter kra","Latin small letter l with acute":"Latin small letter l with acute","Latin small letter l with caron":"Latin small letter l with caron","Latin small letter l with cedilla":"Latin small letter l with cedilla","Latin small letter l with middle dot":"Latin small letter l with middle dot","Latin small letter l with stroke":"Latin small letter l with stroke","Latin small letter long s":"Latin small letter long s","Latin small letter n preceded by apostrophe":"Latin small letter n preceded by apostrophe","Latin small letter n with acute":"Latin small letter n with acute","Latin small letter n with caron":"Latin small letter n with caron","Latin small letter n with cedilla":"Latin small letter n with cedilla","Latin small letter o with breve":"Latin small letter o with breve","Latin small letter o with double acute":"Latin small letter o with double acute","Latin small letter o with macron":"Latin small letter o with macron","Latin small letter r with acute":"Latin small letter r with acute","Latin small letter r with caron":"Latin small letter r with caron","Latin small letter r with cedilla":"Latin small letter r with cedilla","Latin small letter s with acute":"Latin small letter s with acute","Latin small letter s with caron":"Latin small letter s with caron","Latin small letter s with cedilla":"Latin small letter s with cedilla","Latin small letter s with circumflex":"Latin small letter s with circumflex","Latin small letter t with caron":"Latin small letter t with caron","Latin small letter t with cedilla":"Latin small letter t with cedilla","Latin small letter t with stroke":"Latin small letter t with stroke","Latin small letter u with breve":"Latin small letter u with breve","Latin small letter u with double acute":"Latin small letter u with double acute","Latin small letter u with macron":"Latin small letter u with macron","Latin small letter u with ogonek":"Latin small letter u with ogonek","Latin small letter u with ring above":"Latin small letter u with ring above","Latin small letter u with tilde":"Latin small letter u with tilde","Latin small letter w with circumflex":"Latin small letter w with circumflex","Latin small letter y with circumflex":"Latin small letter y with circumflex","Latin small letter z with acute":"Latin small letter z with acute","Latin small letter z with caron":"Latin small letter z with caron","Latin small letter z with dot above":"Latin small letter z with dot above","Latin small ligature ij":"Latin small ligature ij","Latin small ligature oe":"Latin small ligature oe","Left aligned image":"Left aligned image","Left double quotation mark":"Left double quotation mark","Left single quotation mark":"Left single quotation mark","Left-pointing double angle quotation mark":"Left-pointing double angle quotation mark","leftwards arrow to bar":"leftwards arrow to bar","leftwards dashed arrow":"leftwards dashed arrow","leftwards double arrow":"leftwards double arrow","leftwards simple arrow":"leftwards simple arrow","Less-than or equal to":"Less-than or equal to","Less-than sign":"Less-than sign","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link image":"Link image","Link URL":"Link URL","Lira sign":"Lira sign","List properties":"List properties","Livre tournois sign":"Livre tournois sign","Logical and":"Logical and","Logical or":"Logical or","Lower-latin":"Lower-latin","Lower–roman":"Lower–roman",Macron:"Macron","Manat sign":"Manat sign","Match case":"Match case","Media toolbar":"Media toolbar","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells","Mill sign":"Mill sign","Minus sign":"Minus sign","Multiple styles":"Multiple styles","Multiplication sign":"Multiplication sign","N-ary product":"N-ary product","N-ary summation":"N-ary summation",Nabla:"Nabla","Naira sign":"Naira sign","New sheqel sign":"New sheqel sign",Next:"Next","Next result":"Next result",None:"None","Nordic mark sign":"Nordic mark sign","Not an element of":"Not an element of","Not equal to":"Not equal to","Not sign":"Not sign","Numbered List":"Numbered List","Numbered list styles toolbar":"Numbered list styles toolbar","on with exclamation mark with left right arrow above":"on with exclamation mark with left right arrow above","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab","Open media in new tab":"Open media in new tab",Orange:"Orange",Original:"Original",Outset:"Outset",Overline:"Overline",Padding:"Padding","Page break":"Page break",Paragraph:"Paragraph","Paragraph sign":"Paragraph sign","Partial differential":"Partial differential","Paste the media URL in the input.":"Paste the media URL in the input.","Per mille sign":"Per mille sign","Per ten thousand sign":"Per ten thousand sign","Peseta sign":"Peseta sign","Peso sign":"Peso sign","Pink marker":"Pink marker","Plain text":"Plain text","Plus-minus sign":"Plus-minus sign","Pound sign":"Pound sign",Previous:"Previous","Previous result":"Previous result","Proportional to":"Proportional to",Purple:"Purple","Question exclamation mark":"Question exclamation mark",Red:"Red","Red pen":"Red pen",Redo:"Redo","Registered sign":"Registered sign","Remove color":"Remove color","Remove Format":"Remove Format","Remove highlight":"Remove highlight","Remove language":"Remove language",Replace:"Replace","Replace all":"Replace all","Replace with…":"Replace with…","Resize image":"Resize image","Resize image to %0":"Resize image to %0","Resize image to the original size":"Resize image to the original size","Restore default":"Restore default","Reversed order":"Reversed order","Reversed paragraph sign":"Reversed paragraph sign","Rich Text Editor":"Rich Text Editor",Ridge:"Ridge","Right aligned image":"Right aligned image","Right double quotation mark":"Right double quotation mark","Right single quotation mark":"Right single quotation mark","Right-pointing double angle quotation mark":"Right-pointing double angle quotation mark","rightwards arrow to bar":"rightwards arrow to bar","rightwards dashed arrow":"rightwards dashed arrow","rightwards double arrow":"rightwards double arrow","rightwards simple arrow":"rightwards simple arrow",Row:"Row","Ruble sign":"Ruble sign","Rupee sign":"Rupee sign",Save:"Save","Saving changes":"Saving changes","Section sign":"Section sign","Select all":"Select all","Select column":"Select column","Select row":"Select row","Show more items":"Show more items","Show options":"Show options","Side image":"Side image","Single left-pointing angle quotation mark":"Single left-pointing angle quotation mark","Single low-9 quotation mark":"Single low-9 quotation mark","Single right-pointing angle quotation mark":"Single right-pointing angle quotation mark",Small:"Small",Solid:"Solid","soon with rightwards arrow above":"soon with rightwards arrow above",Source:"Source","Special characters":"Special characters","Spesmilo sign":"Spesmilo sign","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically",Square:"Square","Square root":"Square root","Start at":"Start at","Start index must be greater than 0.":"Start index must be greater than 0.",Strikethrough:"Strikethrough",Style:"Style",Styles:"Styles",Subscript:"Subscript",Superscript:"Superscript","Table alignment toolbar":"Table alignment toolbar","Table cell text alignment":"Table cell text alignment","Table properties":"Table properties","Table toolbar":"Table toolbar","Tenge sign":"Tenge sign","Text alignment":"Text alignment","Text alignment toolbar":"Text alignment toolbar","Text alternative":"Text alternative","Text highlight toolbar":"Text highlight toolbar","Text styles":"Text styles","Text to find must not be empty.":"Text to find must not be empty.",'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".':'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',"The URL must not be empty.":"The URL must not be empty.",'The value is invalid. Try "10px" or "2em" or simply "2".':'The value is invalid. Try "10px" or "2em" or simply "2".',"There exists":"There exists","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.","Tilde operator":"Tilde operator",Tiny:"Tiny","Tip: Find some text first in order to replace it.":"Tip: Find some text first in order to replace it.","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","To-do List":"To-do List","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on","Toggle the circle list style":"Toggle the circle list style","Toggle the decimal list style":"Toggle the decimal list style","Toggle the decimal with leading zero list style":"Toggle the decimal with leading zero list style","Toggle the disc list style":"Toggle the disc list style","Toggle the lower–latin list style":"Toggle the lower–latin list style","Toggle the lower–roman list style":"Toggle the lower–roman list style","Toggle the square list style":"Toggle the square list style","Toggle the upper–latin list style":"Toggle the upper–latin list style","Toggle the upper–roman list style":"Toggle the upper–roman list style","top with upwards arrow above":"top with upwards arrow above","Trade mark sign":"Trade mark sign","Tugrik sign":"Tugrik sign","Turkish lira sign":"Turkish lira sign",Turquoise:"Turquoise","Two dot leader":"Two dot leader",Underline:"Underline",Undo:"Undo",Union:"Union",Unlink:"Unlink","up down arrow with base":"up down arrow with base",Update:"Update","Update image URL":"Update image URL","Upload failed":"Upload failed","Upload in progress":"Upload in progress","Upper-latin":"Upper-latin","Upper-roman":"Upper-roman","upwards arrow to bar":"upwards arrow to bar","upwards dashed arrow":"upwards dashed arrow","upwards double arrow":"upwards double arrow","upwards simple arrow":"upwards simple arrow","Vertical text alignment toolbar":"Vertical text alignment toolbar","Vulgar fraction one half":"Vulgar fraction one half","Vulgar fraction one quarter":"Vulgar fraction one quarter","Vulgar fraction three quarters":"Vulgar fraction three quarters",White:"White","Whole words only":"Whole words only","Widget toolbar":"Widget toolbar",Width:"Width","Won sign":"Won sign","Words: %0":"Words: %0","Wrap text":"Wrap text",Yellow:"Yellow","Yellow marker":"Yellow marker","Yen sign":"Yen sign"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),
/*!
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JoyEditor=e():t.JoyEditor=e()}(self,(()=>(()=>{var t={8603:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}","",{version:3,sources:["webpack://./../ckeditor5-basic-styles/theme/code.css"],names:[],mappings:"AAKA,iBACC,kCAAuC,CAEvC,iBAAkB,CADlB,aAED,CAEA,0CACC,kCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content code {\r\n\tbackground-color: hsla(0, 0%, 78%, 0.3);\r\n\tpadding: .15em;\r\n\tborder-radius: 2px;\r\n}\r\n\r\n.ck.ck-editor__editable .ck-code_selected  {\r\n\tbackground-color: hsla(0, 0%, 78%, 0.5);\r\n}\r\n"],sourceRoot:""}]);const a=s},3062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content blockquote{border-left:5px solid #ccc;font-style:italic;margin-left:0;margin-right:0;overflow:hidden;padding-left:1.5em;padding-right:1.5em}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}","",{version:3,sources:["webpack://./../ckeditor5-block-quote/theme/blockquote.css"],names:[],mappings:"AAKA,uBAWC,0BAAsC,CADtC,iBAAkB,CAFlB,aAAc,CACd,cAAe,CAPf,eAAgB,CAIhB,kBAAmB,CADnB,mBAOD,CAEA,gCACC,aAAc,CACd,2BACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content blockquote {\r\n\t/* See #12 */\r\n\toverflow: hidden;\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-block-quote/issues/15 */\r\n\tpadding-right: 1.5em;\r\n\tpadding-left: 1.5em;\r\n\r\n\tmargin-left: 0;\r\n\tmargin-right: 0;\r\n\tfont-style: italic;\r\n\tborder-left: solid 5px hsl(0, 0%, 80%);\r\n}\r\n\r\n.ck-content[dir="rtl"] blockquote {\r\n\tborder-left: 0;\r\n\tborder-right: solid 5px hsl(0, 0%, 80%);\r\n}\r\n'],sourceRoot:""}]);const a=s},903:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}',"",{version:3,sources:["webpack://./../ckeditor5-clipboard/theme/clipboard.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-clipboard/clipboard.css"],names:[],mappings:"AASC,8DACC,cAAe,CAEf,mBAAoB,CADpB,iBAOD,CAJC,mEACC,iBAAkB,CAClB,OACD,CAWA,qJACC,YACD,CCzBF,MACC,yCAA0C,CAC1C,yCAA0C,CAC1C,6DACD,CAOE,mEAIC,gDAAiD,CADjD,sDAAuD,CAFvD,2DAA8D,CAI9D,gBAAiB,CAHjB,wDAqBD,CAfC,yEAWC,sFAAuF,CAEvF,kBAAmB,CADnB,qKAA0K,CAX1K,UAAW,CAIX,aAAc,CAFd,QAAS,CAIT,QAAS,CADT,iBAAkB,CAElB,wDAA2D,CAE3D,0BAA2B,CAR3B,OAYD,CA2DF,kEACC,gGACD,CAKA,gDACC,OAAS,CACT,sBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-editor__editable {\r\n\t/*\r\n\t * Vertical drop target (in text).\r\n\t */\r\n\t& .ck.ck-clipboard-drop-target-position {\r\n\t\tdisplay: inline;\r\n\t\tposition: relative;\r\n\t\tpointer-events: none;\r\n\r\n\t\t& span {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Styles of the widget being dragged (its preview).\r\n\t */\r\n\t& .ck-widget:-webkit-drag {\r\n\t\t& > .ck-widget__selection-handle {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t& > .ck-widget__type-around {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-clipboard-drop-target-dot-width: 12px;\r\n\t--ck-clipboard-drop-target-dot-height: 8px;\r\n\t--ck-clipboard-drop-target-color: var(--ck-color-focus-border)\r\n}\r\n\r\n.ck.ck-editor__editable {\r\n\t/*\r\n\t * Vertical drop target (in text).\r\n\t */\r\n\t& .ck.ck-clipboard-drop-target-position {\r\n\t\t& span {\r\n\t\t\tbottom: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\r\n\t\t\ttop: calc(-.5 * var(--ck-clipboard-drop-target-dot-height));\r\n\t\t\tborder: 1px solid var(--ck-clipboard-drop-target-color);\r\n\t\t\tbackground: var(--ck-clipboard-drop-target-color);\r\n\t\t\tmargin-left: -1px;\r\n\r\n\t\t\t/* The triangle above the marker */\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: "";\r\n\t\t\t\twidth: 0;\r\n\t\t\t\theight: 0;\r\n\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttop: calc(var(--ck-clipboard-drop-target-dot-height) * -.5);\r\n\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\tborder-color: var(--ck-clipboard-drop-target-color) transparent transparent transparent;\r\n\t\t\t\tborder-width: calc(var(--ck-clipboard-drop-target-dot-height)) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width));\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t// Horizontal drop target (between blocks).\r\n\t& .ck.ck-clipboard-drop-target-position {\r\n\t\tdisplay: block;\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 0;\r\n\t\tmargin: 0;\r\n\t\ttext-align: initial;\r\n\r\n\t\t& .ck-clipboard-drop-target__line {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 0;\r\n\t\t\tborder: 1px solid var(--ck-clipboard-drop-target-color);\r\n\t\t\tmargin-top: -1px;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: "";\r\n\t\t\t\twidth: 0;\r\n\t\t\t\theight: 0;\r\n\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: calc(-1 * var(--ck-clipboard-drop-target-dot-size));\r\n\t\t\t\ttop: 0;\r\n\r\n\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\tborder-color: transparent transparent transparent var(--ck-clipboard-drop-target-color);\r\n\t\t\t\tborder-width: var(--ck-clipboard-drop-target-dot-size) 0 var(--ck-clipboard-drop-target-dot-size) calc(2 * var(--ck-clipboard-drop-target-dot-size));\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t}\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: "";\r\n\t\t\t\twidth: 0;\r\n\t\t\t\theight: 0;\r\n\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: calc(-1 * var(--ck-clipboard-drop-target-dot-size));\r\n\t\t\t\ttop: 0;\r\n\r\n\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\tborder-color: transparent var(--ck-clipboard-drop-target-color) transparent transparent;\r\n\t\t\t\tborder-width: var(--ck-clipboard-drop-target-dot-size) calc(2 * var(--ck-clipboard-drop-target-dot-size)) var(--ck-clipboard-drop-target-dot-size) 0;\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\t * Styles of the widget that it a drop target.\r\n\t */\r\n\t& .ck-widget.ck-clipboard-drop-target-range {\r\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color) !important;\r\n\t}\r\n\r\n\t/*\r\n\t * Styles of the widget being dragged (its preview).\r\n\t */\r\n\t& .ck-widget:-webkit-drag {\r\n\t\tzoom: 0.6;\r\n\t\toutline: none !important;\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},8343:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-codeblock__wrapper{display:flex;justify-content:center}.ck-codeblock__wrapper .ck-codeblock__editing-view{background-color:hsla(0,0%,78%,.3);border:0;font-size:12px;min-height:200px;outline:0;padding:16px;resize:vertical;tab-size:2;white-space:pre-wrap}.ck-content pre{background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;color:#353535;direction:ltr;display:flex;font-style:normal;min-width:200px;padding:1em;tab-size:2;text-align:left;white-space:pre-wrap}.ck-content pre code{background:unset;border-radius:0;padding:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{background:var(--ck-color-code-block-label-background);color:#fff;font-family:var(--ck-font-face);font-size:10px;line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);right:10px;top:-1px;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}","",{version:3,sources:["webpack://./../ckeditor5-code-block/theme/codeblock.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-code-block/codeblock.css"],names:[],mappings:"AAMA,uBACC,YAAa,CACb,sBACD,CAKA,mDAGC,kCAAuC,CAGvC,QAAS,CAET,cAAe,CAHf,gBAAiB,CAKjB,SAAU,CATV,YAAa,CAMb,eAAgB,CAMhB,UAAW,CACX,oBACD,CAEA,gBAIC,4BAAiC,CACjC,wBAAiC,CACjC,iBAAkB,CAHlB,aAAwB,CAOxB,aAAc,CATd,YAAa,CAeb,iBAAkB,CAGlB,eAAgB,CAjBhB,WAAY,CAUZ,UAAW,CAHX,eAAgB,CAIhB,oBAaD,CALC,qBACC,gBAAiB,CAEjB,eAAgB,CADhB,SAED,CAGD,4BACC,iBAMD,CAJC,iDACC,2BAA4B,CAC5B,iBACD,CC5DD,MACC,8CACD,CAEA,iDAGC,sDAAuD,CAMvD,UAAuB,CAHvB,+BAAgC,CADhC,cAAe,CAEf,gBAAiB,CACjB,uDAAwD,CANxD,UAAW,CADX,QAAS,CAST,kBACD,CAEA,+CAEC,gBAAiB,CAEjB,iBAAkB,CADlB,eAED",sourcesContent:["/*\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/* CodeBlock wrapper */\n.ck-codeblock__wrapper {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n/* Editing\n Assigned to textarea\n */\n.ck-codeblock__wrapper .ck-codeblock__editing-view {\n\tpadding: 16px;\n\t/* just like pre element */\n\tbackground-color: hsla(0, 0%, 78%, 0.3);\n\t/* just like pre element */\n\tmin-height: 200px;\n\tborder: 0;\n\tresize: vertical;\n\tfont-size: 12px;\n\t/* just like pre element */\n\toutline: 0;\n\t/* just like pre element */\n\n\ttab-size: 2;\n\twhite-space: pre-wrap;\n}\n\n.ck-content pre {\n\tdisplay: flex;\n\tpadding: 1em;\n\tcolor: hsl(0, 0%, 20.8%);\n\tbackground: hsla(0, 0%, 78%, 0.3);\n\tborder: 1px solid hsl(0, 0%, 77%);\n\tborder-radius: 2px;\n\n\t/* Code block are language direction–agnostic. */\n\ttext-align: left;\n\tdirection: ltr;\n\n\ttab-size: 2;\n\twhite-space: pre-wrap;\n\n\t/* Don't inherit the style, e.g. when in a block quote. */\n\tfont-style: normal;\n\n\t/* Don't let the code be squashed e.g. when in a table cell. */\n\tmin-width: 200px;\n\n\t& code {\n\t\tbackground: unset;\n\t\tpadding: 0;\n\t\tborder-radius: 0;\n\t}\n}\n\n.ck.ck-editor__editable pre {\n\tposition: relative;\n\n\t&[data-language]::after {\n\t\tcontent: attr(data-language);\n\t\tposition: absolute;\n\t}\n}\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-code-block-label-background: hsl(0, 0%, 46%);\r\n}\r\n\r\n.ck.ck-editor__editable pre[data-language]::after {\r\n\ttop: -1px;\r\n\tright: 10px;\r\n\tbackground: var(--ck-color-code-block-label-background);\r\n\r\n\tfont-size: 10px;\r\n\tfont-family: var(--ck-font-face);\r\n\tline-height: 16px;\r\n\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-medium);\r\n\tcolor: hsl(0, 0%, 100%);\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.ck.ck-code-block-dropdown .ck-dropdown__panel {\r\n\t/* There could be dozens of languages available. Use scroll to prevent a 10e6px dropdown. */\r\n\tmax-height: 250px;\r\n\toverflow-y: auto;\r\n\toverflow-x: hidden;\r\n}\r\n"],sourceRoot:""}]);const a=s},6370:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-codewidget__wrapper{display:flex;justify-content:center}.ck-codewidget__wrapper .ck-codewidget__editing-view{background-color:hsla(0,0%,78%,.3);border:0;font-size:12px;min-height:200px;outline:0;padding:16px;resize:vertical}.ck-codewidget__preview,[id^=dcodewidget-]{display:flex;justify-content:center}[id^=dcodewidget-]{align-items:center;height:100%}[id^=dcodewidget-] svg{display:block;height:auto;width:60%}.ck-codewidget__source-mode .ck-codewidget__editing-view{width:100%}.ck-codewidget__source-mode .ck-codewidget__preview{display:none}.ck-codewidget__split-mode .ck-codewidget__editing-view,.ck-codewidget__split-mode .ck-codewidget__preview{width:50%}.ck-codewidget__preview-mode .ck-codewidget__editing-view{display:none}","",{version:3,sources:["webpack://./../ckeditor5-codewidget/theme/codewidget.css"],names:[],mappings:"AACA,wBACC,YAAa,CACb,sBACD,CAKA,qDAGC,kCAAuC,CAGvC,QAAS,CAET,cAAe,CAHf,gBAAiB,CAKjB,SAAU,CATV,YAAa,CAMb,eAKD,CASA,2CALC,YAAa,CACb,sBASD,CALA,mBAEC,kBAAmB,CACnB,WAED,CAEA,uBACC,aAAc,CAEd,WAAY,CADZ,SAED,CAGA,yDACC,UACD,CAEA,oDACC,YACD,CAOA,2GACC,SACD,CAGA,0DACC,YACD",sourcesContent:['/* CodeWidget wrapper */\n.ck-codewidget__wrapper {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n/* Editing\n Assigned to textarea\n */\n.ck-codewidget__wrapper .ck-codewidget__editing-view {\n\tpadding: 16px;\n\t/* just like pre element */\n\tbackground-color: hsla(0, 0%, 78%, 0.3);\n\t/* just like pre element */\n\tmin-height: 200px;\n\tborder: 0;\n\tresize: vertical;\n\tfont-size: 12px;\n\t/* just like pre element */\n\toutline: 0;\n\t/* just like pre element */\n}\n\n/* Preview */\n.ck-codewidget__preview {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n/* Preview error state */\n[id^="dcodewidget-"] {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 100%;\n\tjustify-content: center;\n}\n\n[id^="dcodewidget-"] svg {\n\tdisplay: block;\n\twidth: 60%;\n\theight: auto;\n}\n\n/* Source mode */\n.ck-codewidget__source-mode .ck-codewidget__editing-view {\n\twidth: 100%;\n}\n\n.ck-codewidget__source-mode .ck-codewidget__preview {\n\tdisplay: none;\n}\n\n/* Split mode */\n.ck-codewidget__split-mode .ck-codewidget__editing-view {\n\twidth: 50%;\n}\n\n.ck-codewidget__split-mode .ck-codewidget__preview {\n\twidth: 50%;\n}\n\n/* Preview mode */\n.ck-codewidget__preview-mode .ck-codewidget__editing-view {\n\tdisplay: none;\n}\n'],sourceRoot:""}]);const a=s},3143:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}","",{version:3,sources:["webpack://./../ckeditor5-editor-classic/theme/classiceditor.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-editor-classic/classiceditor.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,cAIC,iBAMD,CAJC,2DAEC,yBACD,CCLC,gDCED,eDKC,CAPA,uICMA,qCAAsC,CDJpC,2BAA4B,CAC5B,4BAIF,CAPA,gDAMC,qBACD,CAEA,iFACC,uBAAwB,CCR1B,eDaC,CANA,yMCHA,qCAAsC,CDOpC,eAEF,CAKF,yCAEC,0CAA2C,CCpB3C,eD8BD,CAZA,yHCdE,qCAAsC,CDmBtC,wBAAyB,CACzB,yBAMF,CAHC,0DACC,wCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-editor {\r\n\t/* All the elements within `.ck-editor` are positioned relatively to it.\r\n\t If any element needs to be positioned with respect to the <body>, etc.,\r\n\t it must land outside of the `.ck-editor` in DOM. */\r\n\tposition: relative;\r\n\r\n\t& .ck-editor__top .ck-sticky-panel .ck-toolbar {\r\n\t\t/* https://github.com/ckeditor/ckeditor5-editor-classic/issues/62 */\r\n\t\tz-index: var(--ck-z-modal);\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../mixins/_rounded.css";\r\n\r\n.ck.ck-editor__top {\r\n\t& .ck-sticky-panel {\r\n\t\t& .ck-toolbar {\r\n\t\t\t@mixin ck-rounded-corners {\r\n\t\t\t\tborder-bottom-left-radius: 0;\r\n\t\t\t\tborder-bottom-right-radius: 0;\r\n\t\t\t}\r\n\r\n\t\t\tborder-bottom-width: 0;\r\n\t\t}\r\n\r\n\t\t& .ck-sticky-panel__content_sticky .ck-toolbar {\r\n\t\t\tborder-bottom-width: 1px;\r\n\r\n\t\t\t@mixin ck-rounded-corners {\r\n\t\t\t\tborder-radius: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* Note: Use ck-editor__main to make sure these styles don\'t apply to other editor types */\r\n.ck.ck-editor__main > .ck-editor__editable {\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/113 */\r\n\tbackground: var(--ck-color-base-background);\r\n\r\n\t@mixin ck-rounded-corners {\r\n\t\tborder-top-left-radius: 0;\r\n\t\tborder-top-right-radius: 0;\r\n\t}\r\n\r\n\t&:not(.ck-focused) {\r\n\t\tborder-color: var(--ck-color-base-border);\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4717:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text);cursor:text}","",{version:3,sources:["webpack://./../ckeditor5-engine/theme/placeholder.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-engine/placeholder.css"],names:[],mappings:"AAMA,uCAEC,iBAWD,CATC,qDAIC,8BAA+B,CAF/B,MAAO,CAKP,mBAAoB,CANpB,iBAAkB,CAElB,OAKD,CAKA,wCACC,YACD,CAQD,iCACC,iBACD,CC5BC,qDAEC,6CAA8C,CAD9C,WAED",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* See ckeditor/ckeditor5#936. */\r\n.ck.ck-placeholder,\r\n.ck .ck-placeholder {\r\n\tposition: relative;\r\n\r\n\t&::before {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tcontent: attr(data-placeholder);\r\n\r\n\t\t/* See ckeditor/ckeditor5#469. */\r\n\t\tpointer-events: none;\r\n\t}\r\n}\r\n\r\n/* See ckeditor/ckeditor5#1987. */\r\n.ck.ck-read-only .ck-placeholder {\r\n\t&::before {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n\r\n/*\r\n * Rules for the `ck-placeholder` are loaded before the rules for `ck-reset_all` in the base CKEditor 5 DLL build.\r\n * This fix overwrites the incorrectly set `position: static` from `ck-reset_all`.\r\n * See https://github.com/ckeditor/ckeditor5/issues/11418.\r\n */\r\n.ck.ck-reset_all .ck-placeholder {\r\n\tposition: relative;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* See ckeditor/ckeditor5#936. */\r\n.ck.ck-placeholder, .ck .ck-placeholder {\r\n\t&::before {\r\n\t\tcursor: text;\r\n\t\tcolor: var(--ck-color-engine-placeholder-text);\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},9315:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}","",{version:3,sources:["webpack://./../ckeditor5-engine/theme/renderer.css"],names:[],mappings:"AAMA,qDACC,YACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* Elements marked by the Renderer as hidden should be invisible in the editor. */\r\n.ck.ck-editor__editable span[data-ck-unsafe-element] {\r\n\tdisplay: none;\r\n}\r\n"],sourceRoot:""}]);const a=s},8470:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}","",{version:3,sources:["webpack://./../ckeditor5-find-and-replace/theme/findandreplace.css"],names:[],mappings:"AAKA,gBACC,+CAAgD,CAChD,0BACD,CAEA,yBACC,kBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-find-result {\r\n\tbackground: var(--ck-color-highlight-background);\r\n\tcolor: var(--ck-color-text);\r\n}\r\n\r\n.ck-find-result_selected {\r\n\tbackground: hsl(29, 100%, 60%);\r\n}\r\n"],sourceRoot:""}]);const a=s},9096:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form fieldset{display:flex}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{position:absolute}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form fieldset{align-content:stretch;align-items:center;border:0;flex-direction:row;flex-wrap:nowrap;margin:0;padding:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view .ck-input{min-width:50px;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find{align-items:flex-start}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{color:var(--ck-color-base-border)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(var(--ck-spacing-large)*-1)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view{margin-bottom:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-options-dropdown{margin-left:0;margin-right:auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view,.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view .ck-input{width:100%}@media screen and (max-width:600px){.ck.ck-find-and-replace-form{width:300px}.ck.ck-find-and-replace-form fieldset{flex-wrap:wrap}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-labeled-field-view{flex:1 0 auto;margin-bottom:var(--ck-spacing-standard);width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button{text-align:center}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type .ck-button__label{text-align:center;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>:not(.ck-labeled-field-view){flex:1 1 auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-dropdown:not(.ck-labeled-field-view){flex-grow:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-button:not(.ck-labeled-field-view)>.ck-button__label{text-align:center;width:100%}}","",{version:3,sources:["webpack://./../ckeditor5-find-and-replace/theme/findandreplaceform.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-find-and-replace/findandreplaceform.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAKA,6BACC,cAUD,CARC,sCACC,YAMD,CAHC,yFACC,iBACD,CCNF,6BACC,WAyGD,CAnGC,mCACC,YACD,CAEA,sCAIC,qBAAsB,CADtB,kBAAmB,CAInB,QAAS,CANT,kBAAmB,CACnB,gBAAiB,CAMjB,QAAS,CAFT,+BAwFD,CApFC,iDACC,aACD,CAGC,oDACC,sCACD,CAIA,oDACC,uCACD,CAGD,6DACC,aAMD,CAJC,uEAEC,cAAe,CADf,UAED,CAID,qEAEC,sBAkCD,CAhCC,qFACC,eAOD,CAJC,uGACC,oCAAqC,CACrC,qCACD,CAGD,8FACC,uBACD,CAEA,8FACC,wBACD,CAEA,yFACC,OAAQ,CACR,0BAWD,CAbA,mGAKE,gCAQF,CAbA,mGASE,+BAIF,CAbA,yFAYC,iCACD,CAID,wEACC,cAAe,CACf,wBAAyB,CACzB,2CAeD,CAbC,+FACC,qCACD,CAEA,6FAEC,aAAc,CADd,iBAED,CAEA,wMAEC,UACD,CCzGF,oCD+GA,6BACC,WAiDD,CA/CC,sCACC,cA6CD,CAzCE,4FACC,aAAc,CAEd,wCAAyC,CADzC,UAED,CAEA,gFACC,iBAkBD,CAhBC,8FACC,aAcD,CAfA,wGAIE,aAWF,CAfA,wGAQE,cAOF,CAJC,gHAEC,iBAAkB,CADlB,UAED,CAMH,qGACC,aAUD,CARC,iHACC,WACD,CAEA,iIAEC,iBAAkB,CADlB,UAED,CC5JH",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-find-and-replace-form {\r\n\tmax-width: 100%;\r\n\r\n\t& fieldset {\r\n\t\tdisplay: flex;\r\n\r\n\t\t/* The find fieldset */\r\n\t\t&.ck-find-and-replace-form__find .ck-results-counter {\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck.ck-find-and-replace-form {\r\n\twidth: 400px;\r\n\r\n\t/*\r\n\t * The <form> needs tabindex="-1" for proper Esc handling after being clicked\r\n\t * but the side effect is that this creates a nasty focus outline in some browsers.\r\n\t */\r\n\t&:focus {\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t& fieldset {\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: nowrap;\r\n\t\talign-items: center;\r\n\t\talign-content: stretch;\r\n\r\n\t\tpadding: var(--ck-spacing-large);\r\n\t\tborder: 0;\r\n\t\tmargin: 0;\r\n\r\n\t\t& > .ck-button {\r\n\t\t\tflex: 0 0 auto;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\t& > * + * {\r\n\t\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\t& > * + * {\r\n\t\t\t\tmargin-right: var(--ck-spacing-standard);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t& .ck-labeled-field-view {\r\n\t\t\tflex: 1 1 auto;\r\n\r\n\t\t\t& .ck-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmin-width: 50px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* The find fieldset */\r\n\t\t&.ck-find-and-replace-form__find {\r\n\t\t\t/* To display all controls in line when there\'s an error under the input */\r\n\t\t\talign-items: flex-start;\r\n\r\n\t\t\t& > .ck-button-find {\r\n\t\t\t\tfont-weight: bold;\r\n\r\n\t\t\t\t/* Beef the find button up a little. It\'s the main action button in the form */\r\n\t\t\t\t& .ck-button__label {\r\n\t\t\t\t\tpadding-left: var(--ck-spacing-large);\r\n\t\t\t\t\tpadding-right: var(--ck-spacing-large);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck-button-prev > .ck-icon {\r\n\t\t\t\ttransform: rotate(90deg);\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck-button-next > .ck-icon {\r\n\t\t\t\ttransform: rotate(-90deg);\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-results-counter {\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translateY(-50%);\r\n\r\n\t\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\t\tright: var(--ck-spacing-standard);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\t\tleft: var(--ck-spacing-standard);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolor: var(--ck-color-base-border);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* The replace fieldset */\r\n\t\t&.ck-find-and-replace-form__replace {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\tmargin-top: calc( -1 * var(--ck-spacing-large) );\r\n\r\n\t\t\t& > .ck-labeled-field-view {\r\n\t\t\t\tmargin-bottom: var(--ck-spacing-large);\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck-options-dropdown {\r\n\t\t\t\tmargin-right: auto;\r\n\t\t\t\tmargin-left: 0;\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck-labeled-field-view,\r\n\t\t\t& > .ck-labeled-field-view .ck-input {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n@mixin ck-media-phone {\r\n\t.ck.ck-find-and-replace-form {\r\n\t\twidth: 300px;\r\n\r\n\t\t& fieldset {\r\n\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t/* The find fieldset */\r\n\t\t\t&.ck-find-and-replace-form__find {\r\n\t\t\t\t& .ck-labeled-field-view {\r\n\t\t\t\t\tflex: 1 0 auto;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tmargin-bottom: var(--ck-spacing-standard);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t& > .ck-button {\r\n\t\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t\t&:first-of-type {\r\n\t\t\t\t\t\tflex: 1 1 auto;\r\n\r\n\t\t\t\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\t\t\t\tmargin-left: 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\t\t\t\tmargin-right: 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t& .ck-button__label {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* The replace fieldset */\r\n\t\t\t&.ck-find-and-replace-form__replace > :not(.ck-labeled-field-view) {\r\n\t\t\t\tflex: 1 1 auto;\r\n\r\n\t\t\t\t&.ck-dropdown {\r\n\t\t\t\t\tflex-grow: 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.ck-button > .ck-button__label {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},1896:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-button.ck-color-table__remove-color{align-items:center;display:flex;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}","",{version:3,sources:["webpack://./../ckeditor5-font/theme/fontcolor.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-font/fontcolor.css"],names:[],mappings:"AAKA,4CAEC,kBAAmB,CADnB,YAAa,CAEb,UACD,CAEA,8BACC,iBACD,CCNA,4CAEC,2BAA4B,CAC5B,4BAA6B,CAF7B,qEAiBD,CAbC,wDACC,mDACD,CAEA,kEAEE,uCAMF,CARA,kEAME,sCAEF",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-button.ck-color-table__remove-color {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: 100%;\r\n}\r\n\r\nlabel.ck.ck-color-grid__label {\r\n\tfont-weight: unset;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck .ck-button.ck-color-table__remove-color {\r\n\tpadding: calc(var(--ck-spacing-standard) / 2 ) var(--ck-spacing-standard);\r\n\tborder-bottom-left-radius: 0;\r\n\tborder-bottom-right-radius: 0;\r\n\r\n\t&:not(:focus) {\r\n\t\tborder-bottom: 1px solid var(--ck-color-base-border);\r\n\t}\r\n\r\n\t& .ck.ck-icon {\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\tmargin-right: var(--ck-spacing-standard);\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n'],sourceRoot:""}]);const a=s},6007:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}","",{version:3,sources:["webpack://./../ckeditor5-font/theme/fontsize.css"],names:[],mappings:"AAUC,uBACC,cACD,CAEA,wBACC,eACD,CAEA,sBACC,eACD,CAEA,uBACC,eACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* The values should be synchronized with the "FONT_SIZE_PRESET_UNITS" object in the "/src/fontsize/utils.js" file. */\r\n\r\n/* Styles should be prefixed with the `.ck-content` class.\r\nSee https://github.com/ckeditor/ckeditor5/issues/6636 */\r\n.ck-content {\r\n\t& .text-tiny {\r\n\t\tfont-size: .7em;\r\n\t}\r\n\r\n\t& .text-small {\r\n\t\tfont-size: .85em;\r\n\t}\r\n\r\n\t& .text-big {\r\n\t\tfont-size: 1.4em;\r\n\t}\r\n\r\n\t& .text-huge {\r\n\t\tfont-size: 1.8em;\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},8733:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}","",{version:3,sources:["webpack://./../ckeditor5-heading/theme/heading.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-heading/heading.css"],names:[],mappings:"AAKA,wBACC,cACD,CAEA,wBACC,cACD,CAEA,wBACC,cACD,CAEA,+BACC,eACD,CCZC,2EACC,SACD,CAEA,uEACC,cACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-heading_heading1 {\r\n\tfont-size: 20px;\r\n}\r\n\r\n.ck.ck-heading_heading2 {\r\n\tfont-size: 17px;\r\n}\r\n\r\n.ck.ck-heading_heading3 {\r\n\tfont-size: 14px;\r\n}\r\n\r\n.ck[class*="ck-heading_heading"] {\r\n\tfont-weight: bold;\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* Resize dropdown's button label. */\r\n.ck.ck-dropdown.ck-heading-dropdown {\r\n\t& .ck-dropdown__button .ck-button__label {\r\n\t\twidth: 8em;\r\n\t}\r\n\r\n\t& .ck-dropdown__panel .ck-list__item {\r\n\t\tmin-width: 18em;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},8234:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#62f962;--ck-highlight-marker-pink:#fc7899;--ck-highlight-marker-blue:#72ccfd;--ck-highlight-pen-red:#e71313;--ck-highlight-pen-green:#128a00}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{background-color:transparent;color:var(--ck-highlight-pen-red)}.ck-content .pen-green{background-color:transparent;color:var(--ck-highlight-pen-green)}","",{version:3,sources:["webpack://./../ckeditor5-highlight/theme/highlight.css"],names:[],mappings:"AAKA,MACC,oCAA+C,CAC/C,mCAA+C,CAC/C,kCAA8C,CAC9C,kCAA8C,CAC9C,8BAAwC,CACxC,gCACD,CAGC,2BACC,kDACD,CAFA,0BACC,iDACD,CAFA,yBACC,gDACD,CAFA,yBACC,gDACD,CAIA,qBAIC,4BAA6B,CAH7B,iCAID,CALA,uBAIC,4BAA6B,CAH7B,mCAID",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-highlight-marker-yellow: hsl(60, 97%, 73%);\r\n\t--ck-highlight-marker-green: hsl(120, 93%, 68%);\r\n\t--ck-highlight-marker-pink: hsl(345, 96%, 73%);\r\n\t--ck-highlight-marker-blue: hsl(201, 97%, 72%);\r\n\t--ck-highlight-pen-red: hsl(0, 85%, 49%);\r\n\t--ck-highlight-pen-green: hsl(112, 100%, 27%);\r\n}\r\n\r\n@define-mixin highlight-marker-color $color {\r\n\t.ck-content .marker-$color {\r\n\t\tbackground-color: var(--ck-highlight-marker-$color);\r\n\t}\r\n}\r\n\r\n@define-mixin highlight-pen-color $color {\r\n\t.ck-content .pen-$color {\r\n\t\tcolor: var(--ck-highlight-pen-$color);\r\n\r\n\t\t/* Override default yellow background of `<mark>` from user agent stylesheet */\r\n\t\tbackground-color: transparent;\r\n\t}\r\n}\r\n\r\n@mixin highlight-marker-color yellow;\r\n@mixin highlight-marker-color green;\r\n@mixin highlight-marker-color pink;\r\n@mixin highlight-marker-color blue;\r\n\r\n@mixin highlight-pen-color red;\r\n@mixin highlight-pen-color green;\r\n"],sourceRoot:""}]);const a=s},2974:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{background:#dedede;border:0;height:4px;margin:15px 0}","",{version:3,sources:["webpack://./../ckeditor5-horizontal-line/theme/horizontalline.css"],names:[],mappings:"AAMA,yCAEC,iBACD,CAEA,eAGC,kBAA2B,CAC3B,QAAS,CAFT,UAAW,CADX,aAID",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n\r\n.ck-editor__editable .ck-horizontal-line {\r\n\t/* Necessary to render properly next to floated objects, e.g. side image case. */\r\n\tdisplay: flow-root;\r\n}\r\n\r\n.ck-content hr {\r\n\tmargin: 15px 0;\r\n\theight: 4px;\r\n\tbackground: hsl(0, 0%, 87%);\r\n\tborder: 0;\r\n}\r\n"],sourceRoot:""}]);const a=s},5049:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-html-object-embed-unfocused-outline-width:1px}.ck-widget.html-object-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base);min-width:calc(76px + var(--ck-spacing-standard));padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-object-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);font-style:normal;font-weight:400;left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);position:absolute;top:0;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}","",{version:3,sources:["webpack://./../ckeditor5-html-support/theme/datafilter.css"],names:[],mappings:"AAKA,MACC,kDACD,CAEA,6BAEC,gDAAiD,CADjD,kCAAmC,CAKnC,iDAAkD,CAHlD,+BAAgC,CAEhC,oEAgCD,CA7BC,kEACC,wGACD,CAEA,oCAOC,eAA4B,CAG5B,iEAAkE,CAClE,qCAAsC,CAPtC,0CAA2C,CAS3C,+BAAgC,CADhC,kCAAmC,CAVnC,iBAAkB,CADlB,eAAmB,CAKnB,+BAAgC,CAGhC,yIAA0I,CAN1I,iBAAkB,CAElB,KAAM,CAGN,0GAMD,CAGA,2HACC,gBACD,CAEA,yDAEC,mBACD,CAGD,gCACC,eACD,CAEA,iCACC,oBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-html-object-embed-unfocused-outline-width: 1px;\r\n}\r\n\r\n.ck-widget.html-object-embed {\r\n\tfont-size: var(--ck-font-size-base);\r\n\tbackground-color: var(--ck-color-base-foreground);\r\n\tpadding: var(--ck-spacing-small);\r\n\t/* Leave space for label */\r\n\tpadding-top: calc(var(--ck-font-size-tiny) + var(--ck-spacing-large));\r\n\tmin-width: calc(76px + var(--ck-spacing-standard));\r\n\r\n\t&:not(.ck-widget_selected):not(:hover) {\r\n\t\toutline: var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border);\r\n\t}\r\n\r\n\t&::before {\r\n\t\tfont-weight: normal;\r\n\t\tfont-style: normal;\r\n\t\tposition: absolute;\r\n\t\tcontent: attr(data-html-object-embed-label);\r\n\t\ttop: 0;\r\n\t\tleft: var(--ck-spacing-standard);\r\n\t\tbackground: hsl(0deg 0% 60%);\r\n\t\ttransition: background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\r\n\t\tpadding: calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);\r\n\t\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\r\n\t\tcolor: var(--ck-color-base-background);\r\n\t\tfont-size: var(--ck-font-size-tiny);\r\n\t\tfont-family: var(--ck-font-face);\r\n\t}\r\n\r\n\t/* Make space for label. */\r\n\t& .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before {\r\n\t\tmargin-left: 50px;\r\n\t}\r\n\r\n\t& .html-object-embed__content {\r\n\t\t/* Disable user interaction with embed content */\r\n\t\tpointer-events: none;\r\n\t}\r\n}\r\n\r\ndiv.ck-widget.html-object-embed {\r\n\tmargin: 1em auto;\r\n}\r\n\r\nspan.ck-widget.html-object-embed {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n"],sourceRoot:""}]);const a=s},3508:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content .image{clear:both;display:table;margin:.9em auto;min-width:50px;text-align:center}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{align-items:flex-start;display:inline-flex;max-width:100%}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/image.css"],names:[],mappings:"AAMC,mBAEC,UAAW,CADX,aAAc,CAOd,gBAAkB,CAGlB,cAAe,CARf,iBAuBD,CAbC,uBAEC,aAAc,CAGd,aAAc,CAGd,cAAe,CAGf,cACD,CAGD,0BAYC,sBAAuB,CANvB,mBAAoB,CAGpB,cAoBD,CAdC,kCACC,YACD,CAGA,gEAGC,WAAY,CACZ,aAAc,CAGd,cACD,CAUD,gEASC,eAAgB,CARhB,oBAAqB,CACrB,qBAAsB,CAQtB,sBAAuB,CAFvB,kBAGD,CAWA,2GACC,SAUD,CAHC,qEACC,YACD,CAOA,0FACC,cACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content {\r\n\t& .image {\r\n\t\tdisplay: table;\r\n\t\tclear: both;\r\n\t\ttext-align: center;\r\n\r\n\t\t/* Make sure there is some space between the content and the image. Center image by default. */\r\n\t\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\r\n\t \tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\r\n\t\tmargin: 0.9em auto;\r\n\r\n\t\t/* Make sure the caption will be displayed properly (See: https://github.com/ckeditor/ckeditor5/issues/1870). */\r\n\t\tmin-width: 50px;\r\n\r\n\t\t& img {\r\n\t\t\t/* Prevent unnecessary margins caused by line-height (see #44). */\r\n\t\t\tdisplay: block;\r\n\r\n\t\t\t/* Center the image if its width is smaller than the content\'s width. */\r\n\t\t\tmargin: 0 auto;\r\n\r\n\t\t\t/* Make sure the image never exceeds the size of the parent container (ckeditor/ckeditor5-ui#67). */\r\n\t\t\tmax-width: 100%;\r\n\r\n\t\t\t/* Make sure the image is never smaller than the parent container (See: https://github.com/ckeditor/ckeditor5/issues/9300). */\r\n\t\t\tmin-width: 100%\r\n\t\t}\r\n\t}\r\n\r\n\t& .image-inline {\r\n\t\t/*\r\n\t\t * Normally, the .image-inline would have "display: inline-block" and "img { width: 100% }" (to follow the wrapper while resizing).\r\n\t\t * Unfortunately, together with "srcset", it gets automatically stretched up to the width of the editing root.\r\n\t\t * This strange behavior does not happen with inline-flex.\r\n\t\t */\r\n\t\tdisplay: inline-flex;\r\n\r\n\t\t/* While being resized, don\'t allow the image to exceed the width of the editing root. */\r\n\t\tmax-width: 100%;\r\n\r\n\t\t/* This is required by Safari to resize images in a sensible way. Without this, the browser breaks the ratio. */\r\n\t\talign-items: flex-start;\r\n\r\n\t\t/* When the picture is present it must act as a flex container to let the img resize properly */\r\n\t\t& picture {\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\r\n\t\t/* When the picture is present, it must act like a resizable img. */\r\n\t\t& picture,\r\n\t\t& img {\r\n\t\t\t/* This is necessary for the img to span the entire .image-inline wrapper and to resize properly. */\r\n\t\t\tflex-grow: 1;\r\n\t\t\tflex-shrink: 1;\r\n\r\n\t\t\t/* Prevents overflowing the editing root boundaries when an inline image is very wide. */\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck.ck-editor__editable {\r\n\t/*\r\n\t * Inhertit the content styles padding of the <figcaption> in case the integration overrides `text-align: center`\r\n\t * of `.image` (e.g. to the left/right). This ensures the placeholder stays at the padding just like the native\r\n\t * caret does, and not at the edge of <figcaption>.\r\n\t */\r\n\t& .image > figcaption.ck-placeholder::before {\r\n\t\tpadding-left: inherit;\r\n\t\tpadding-right: inherit;\r\n\r\n\t\t/*\r\n\t\t * Make sure the image caption placeholder doesn\'t overflow the placeholder area.\r\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\r\n\t\t */\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\r\n\t/*\r\n\t * Make sure the selected inline image always stays on top of its siblings.\r\n\t * See https://github.com/ckeditor/ckeditor5/issues/9108.\r\n\t */\r\n\t& .image.ck-widget_selected {\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t& .image-inline.ck-widget_selected {\r\n\t\tz-index: 1;\r\n\r\n\t\t/*\r\n\t\t * Make sure the native browser selection style is not displayed.\r\n\t\t * Inline image widgets have their own styles for the selected state and\r\n\t\t * leaving this up to the browser is asking for a visual collision.\r\n\t\t */\r\n\t\t& ::selection {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\r\n\t/* The inline image nested in the table should have its original size if not resized.\r\n\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\r\n\t& td,\r\n\t& th {\r\n\t\t& .image-inline img {\r\n\t\t\tmax-width: none;\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},2640:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{background-color:var(--ck-color-image-caption-background);caption-side:bottom;color:var(--ck-color-image-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;word-break:break-word}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imagecaption.css"],names:[],mappings:"AAKA,MACC,2CAAoD,CACpD,kCAA8C,CAC9C,mDACD,CAGA,8BAKC,yDAA0D,CAH1D,mBAAoB,CAEpB,wCAAyC,CAHzC,qBAAsB,CAMtB,eAAgB,CAChB,mBAAoB,CAFpB,YAAa,CAHb,qBAMD,CAGA,qEACC,iDACD,CAEA,sCACC,GACC,oEACD,CAEA,GACC,yDACD,CACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-image-caption-background: hsl(0, 0%, 97%);\r\n\t--ck-color-image-caption-text: hsl(0, 0%, 20%);\r\n\t--ck-color-image-caption-highligted-background: hsl(52deg 100% 50%);\r\n}\r\n\r\n/* Content styles */\r\n.ck-content .image > figcaption {\r\n\tdisplay: table-caption;\r\n\tcaption-side: bottom;\r\n\tword-break: break-word;\r\n\tcolor: var(--ck-color-image-caption-text);\r\n\tbackground-color: var(--ck-color-image-caption-background);\r\n\tpadding: .6em;\r\n\tfont-size: .75em;\r\n\toutline-offset: -1px;\r\n}\r\n\r\n/* Editing styles */\r\n.ck.ck-editor__editable .image > figcaption.image__caption_highlighted {\r\n\tanimation: ck-image-caption-highlight .6s ease-out;\r\n}\r\n\r\n@keyframes ck-image-caption-highlight {\r\n\t0% {\r\n\t\tbackground-color: var(--ck-color-image-caption-highligted-background);\r\n\t}\r\n\r\n\t100% {\r\n\t\tbackground-color: var(--ck-color-image-caption-background);\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},3535:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-image-insert__panel{padding:var(--ck-spacing-large)}.ck.ck-image-insert__ck-finder-button{border:1px solid #ccc;border-radius:var(--ck-border-radius);display:block;margin:var(--ck-spacing-standard) auto;width:100%}.ck.ck-splitbutton>.ck-file-dialog-button.ck-button{border:none;margin:0;padding:0}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageinsert.css"],names:[],mappings:"AAKA,2BACC,+BACD,CAEA,sCAIC,qBAAiC,CACjC,qCAAsC,CAJtC,aAAc,CAEd,sCAAuC,CADvC,UAID,CAGA,oDAGC,WAAY,CADZ,QAAS,CADT,SAGD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-image-insert__panel {\r\n\tpadding: var(--ck-spacing-large);\r\n}\r\n\r\n.ck.ck-image-insert__ck-finder-button {\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tmargin: var(--ck-spacing-standard) auto;\r\n\tborder: 1px solid hsl(0, 0%, 80%);\r\n\tborder-radius: var(--ck-border-radius);\r\n}\r\n\r\n/* https://github.com/ckeditor/ckeditor5/issues/7986 */\r\n.ck.ck-splitbutton > .ck-file-dialog-button.ck-button {\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n\tborder: none;\r\n}\r\n"],sourceRoot:""}]);const a=s},1568:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-image-insert-form:focus{outline:none}.ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-image-insert-form__action-row{margin-top:var(--ck-spacing-standard)}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageinsertformrowview.css"],names:[],mappings:"AAMC,+BAEC,YACD,CAGD,iBACC,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,6BAmBD,CAhBC,iCACC,WACD,CAEA,kDACC,qCAUD,CARC,sIAEC,sBACD,CAEA,+EACC,0BACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-image-insert-form {\r\n\t&:focus {\r\n\t\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\r\n\t\toutline: none;\r\n\t}\r\n}\r\n\r\n.ck.ck-form__row {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\tjustify-content: space-between;\r\n\r\n\t/* Ignore labels that work as fieldset legends */\r\n\t& > *:not(.ck-label) {\r\n\t\tflex-grow: 1;\r\n\t}\r\n\r\n\t&.ck-image-insert-form__action-row {\r\n\t\tmargin-top: var(--ck-spacing-standard);\r\n\r\n\t\t& .ck-button-save,\r\n\t\t& .ck-button-cancel {\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\r\n\t\t& .ck-button .ck-button__label {\r\n\t\t\tcolor: var(--ck-color-text);\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},6270:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content .image.image_resized{box-sizing:border-box;display:block;max-width:100%}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageresize.css"],names:[],mappings:"AAKA,iCAQC,qBAAsB,CADtB,aAAc,CANd,cAkBD,CATC,qCAEC,UACD,CAEA,4CAEC,aACD,CAQC,sHACC,cACD,CAIF,oFACC,uCACD,CAEA,oFACC,sCACD,CAEA,oEACC,SACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content .image.image_resized {\r\n\tmax-width: 100%;\r\n\t/*\r\n\tThe `<figure>` element for resized images must not use `display:table` as browsers do not support `max-width` for it well.\r\n\tSee https://stackoverflow.com/questions/4019604/chrome-safari-ignoring-max-width-in-table/14420691#14420691 for more.\r\n\tFortunately, since we control the width, there is no risk that the image will look bad.\r\n\t*/\r\n\tdisplay: block;\r\n\tbox-sizing: border-box;\r\n\r\n\t& img {\r\n\t\t/* For resized images it is the `<figure>` element that determines the image width. */\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t& > figcaption {\r\n\t\t/* The `<figure>` element uses `display:block`, so `<figcaption>` also has to. */\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n\r\n.ck.ck-editor__editable {\r\n\t/* The resized inline image nested in the table should respect its parent size.\r\n\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\r\n\t& td,\r\n\t& th {\r\n\t\t& .image-inline.image_resized img {\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n[dir="ltr"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\r\n\tmargin-right: var(--ck-spacing-standard);\r\n}\r\n\r\n[dir="rtl"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\r\n\tmargin-left: var(--ck-spacing-standard);\r\n}\r\n\r\n.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label {\r\n\twidth: 4em;\r\n}\r\n'],sourceRoot:""}]);const a=s},5083:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-left:auto;margin-right:0}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-bottom:var(--ck-inline-image-style-spacing);margin-top:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imagestyle.css"],names:[],mappings:"AAKA,MACC,8BAA+B,CAC/B,qEACD,CAMC,qFAEC,oDACD,CAIA,yEAEC,UACD,CAEA,8BACC,WAAY,CACZ,yCAA0C,CAC1C,aACD,CAEA,oCACC,UAAW,CACX,0CACD,CAEA,sCACC,gBAAiB,CACjB,iBACD,CAEA,qCACC,WAAY,CACZ,yCACD,CAEA,2CAEC,gBAAiB,CADjB,cAED,CAEA,0CACC,aAAc,CACd,iBACD,CAGA,6GAGC,YACD,CAGC,mGAGC,kDAAmD,CADnD,+CAED,CAEA,iDACC,iDACD,CAEA,kDACC,gDACD,CAUC,0lBAGC,qDAKD,CAHC,8nBACC,YACD,CAKD,oVAGC,2DACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-image-style-spacing: 1.5em;\r\n\t--ck-inline-image-style-spacing: calc(var(--ck-image-style-spacing) / 2);\r\n}\r\n\r\n.ck-content {\r\n\t/* Provides a minimal side margin for the left and right aligned images, so that the user has a visual feedback\r\n\tconfirming successful application of the style if image width exceeds the editor's size.\r\n\tSee https://github.com/ckeditor/ckeditor5/issues/9342 */\r\n\t& .image-style-block-align-left,\r\n\t& .image-style-block-align-right {\r\n\t\tmax-width: calc(100% - var(--ck-image-style-spacing));\r\n\t}\r\n\r\n\t/* Allows displaying multiple floating images in the same line.\r\n\tSee https://github.com/ckeditor/ckeditor5/issues/9183#issuecomment-804988132 */\r\n\t& .image-style-align-left,\r\n\t& .image-style-align-right {\r\n\t\tclear: none;\r\n\t}\r\n\r\n\t& .image-style-side {\r\n\t\tfloat: right;\r\n\t\tmargin-left: var(--ck-image-style-spacing);\r\n\t\tmax-width: 50%;\r\n\t}\r\n\r\n\t& .image-style-align-left {\r\n\t\tfloat: left;\r\n\t\tmargin-right: var(--ck-image-style-spacing);\r\n\t}\r\n\r\n\t& .image-style-align-center {\r\n\t\tmargin-left: auto;\r\n\t\tmargin-right: auto;\r\n\t}\r\n\r\n\t& .image-style-align-right {\r\n\t\tfloat: right;\r\n\t\tmargin-left: var(--ck-image-style-spacing);\r\n\t}\r\n\r\n\t& .image-style-block-align-right {\r\n\t\tmargin-right: 0;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t& .image-style-block-align-left {\r\n\t\tmargin-left: 0;\r\n\t\tmargin-right: auto;\r\n\t}\r\n\r\n\t/* Simulates margin collapsing with the preceding paragraph, which does not work for the floating elements. */\r\n\t& p + .image-style-align-left,\r\n\t& p + .image-style-align-right,\r\n\t& p + .image-style-side {\r\n\t\tmargin-top: 0;\r\n\t}\r\n\r\n\t& .image-inline {\r\n\t\t&.image-style-align-left,\r\n\t\t&.image-style-align-right {\r\n\t\t\tmargin-top: var(--ck-inline-image-style-spacing);\r\n\t\t\tmargin-bottom: var(--ck-inline-image-style-spacing);\r\n\t\t}\r\n\r\n\t\t&.image-style-align-left {\r\n\t\t\tmargin-right: var(--ck-inline-image-style-spacing);\r\n\t\t}\r\n\r\n\t\t&.image-style-align-right {\r\n\t\t\tmargin-left: var(--ck-inline-image-style-spacing);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck.ck-splitbutton {\r\n\t/* The button should display as a regular drop-down if the action button\r\n\tis forced to fire the same action as the arrow button. */\r\n\t&.ck-splitbutton_flatten {\r\n\t\t&:hover,\r\n\t\t&.ck-splitbutton_open {\r\n\t\t\t& > .ck-splitbutton__action:not(.ck-disabled),\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled),\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\r\n\t\t\t\tbackground-color: var(--ck-color-button-on-background);\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&.ck-splitbutton_open:hover {\r\n\t\t\t& > .ck-splitbutton__action:not(.ck-disabled),\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled),\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\r\n\t\t\t\tbackground-color: var(--ck-color-button-on-hover-background);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4036:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck-image-upload-complete-icon{border-radius:50%;display:block;position:absolute;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{animation-delay:0ms,3s;animation-duration:.5s,.5s;animation-fill-mode:forwards,forwards;animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;background:var(--ck-color-image-upload-icon-background);font-size:calc(1px*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));opacity:0;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{animation-delay:.5s;animation-duration:.5s;animation-fill-mode:forwards;animation-name:ck-upload-complete-icon-check;border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);box-sizing:border-box;height:0;left:25%;opacity:0;top:50%;transform:scaleX(-1) rotate(135deg);transform-origin:left top;width:0}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{height:0;opacity:1;width:0}33%{height:0;width:.3em}to{height:.45em;opacity:1;width:.3em}}',"",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageuploadicon.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadicon.css"],names:[],mappings:"AAKA,+BAUC,iBAAkB,CATlB,aAAc,CACd,iBAAkB,CAOlB,sCAAwC,CADxC,oCAAsC,CAGtC,SAMD,CAJC,qCACC,UAAW,CACX,iBACD,CChBD,MACC,iCAA8C,CAC9C,+CAA4D,CAG5D,8BAA+B,CAC/B,gCAAiC,CACjC,4DACD,CAEA,+BAWC,sBAA4B,CAN5B,0BAAgC,CADhC,qCAAuC,CADvC,wEAA0E,CAD1E,uDAAwD,CAMxD,oDAAuD,CAWvD,oFAAuF,CAlBvF,SAAU,CAgBV,eAAgB,CAChB,mFA0BD,CAtBC,qCAgBC,mBAAsB,CADtB,sBAAyB,CAEzB,4BAA6B,CAH7B,4CAA6C,CAF7C,sFAAuF,CADvF,oFAAqF,CASrF,qBAAsB,CAdtB,QAAS,CAJT,QAAS,CAGT,SAAU,CADV,OAAQ,CAKR,mCAAoC,CACpC,yBAA0B,CAH1B,OAcD,CAGD,wCACC,GACC,SACD,CAEA,GACC,SACD,CACD,CAEA,wCACC,GACC,SACD,CAEA,GACC,SACD,CACD,CAEA,yCACC,GAGC,QAAS,CAFT,SAAU,CACV,OAED,CACA,IAEC,QAAS,CADT,UAED,CACA,GAGC,YAAc,CAFd,SAAU,CACV,UAED,CACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-image-upload-complete-icon {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\r\n\t/*\r\n\t * Smaller images should have the icon closer to the border.\r\n\t * Match the icon position with the linked image indicator brought by the link image feature.\r\n\t */\r\n\ttop: min(var(--ck-spacing-medium), 6%);\r\n\tright: min(var(--ck-spacing-medium), 6%);\r\n\tborder-radius: 50%;\r\n\tz-index: 1;\r\n\r\n\t&::after {\r\n\t\tcontent: "";\r\n\t\tposition: absolute;\r\n\t}\r\n}\r\n','/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-image-upload-icon: hsl(0, 0%, 100%);\r\n\t--ck-color-image-upload-icon-background: hsl(120, 100%, 27%);\r\n\r\n\t/* Match the icon size with the linked image indicator brought by the link image feature. */\r\n\t--ck-image-upload-icon-size: 20;\r\n\t--ck-image-upload-icon-width: 2px;\r\n\t--ck-image-upload-icon-is-visible: clamp(0px, 100% - 50px, 1px);\r\n}\r\n\r\n.ck-image-upload-complete-icon {\r\n\topacity: 0;\r\n\tbackground: var(--ck-color-image-upload-icon-background);\r\n\tanimation-name: ck-upload-complete-icon-show, ck-upload-complete-icon-hide;\r\n\tanimation-fill-mode: forwards, forwards;\r\n\tanimation-duration: 500ms, 500ms;\r\n\r\n\t/* To make animation scalable. */\r\n\tfont-size: calc(1px * var(--ck-image-upload-icon-size));\r\n\r\n\t/* Hide completed upload icon after 3 seconds. */\r\n\tanimation-delay: 0ms, 3000ms;\r\n\r\n\t/*\r\n\t * Use CSS math to simulate container queries.\r\n\t * https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\r\n\t */\r\n\toverflow: hidden;\r\n\twidth: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\r\n\theight: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\r\n\r\n\t/* This is check icon element made from border-width mixed with animations. */\r\n\t&::after {\r\n\t\t/* Because of border transformation we need to "hard code" left position. */\r\n\t\tleft: 25%;\r\n\r\n\t\ttop: 50%;\r\n\t\topacity: 0;\r\n\t\theight: 0;\r\n\t\twidth: 0;\r\n\r\n\t\ttransform: scaleX(-1) rotate(135deg);\r\n\t\ttransform-origin: left top;\r\n\t\tborder-top: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\r\n\t\tborder-right: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\r\n\r\n\t\tanimation-name: ck-upload-complete-icon-check;\r\n\t\tanimation-duration: 500ms;\r\n\t\tanimation-delay: 500ms;\r\n\t\tanimation-fill-mode: forwards;\r\n\r\n\t\t/* #1095. While reset is not providing proper box-sizing for pseudoelements, we need to handle it. */\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n}\r\n\r\n@keyframes ck-upload-complete-icon-show {\r\n\tfrom {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\tto {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n\r\n@keyframes ck-upload-complete-icon-hide {\r\n\tfrom {\r\n\t\topacity: 1;\r\n\t}\r\n\r\n\tto {\r\n\t\topacity: 0;\r\n\t}\r\n}\r\n\r\n@keyframes ck-upload-complete-icon-check {\r\n\t0% {\r\n\t\topacity: 1;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t}\r\n\t33% {\r\n\t\twidth: 0.3em;\r\n\t\theight: 0;\r\n\t}\r\n\t100% {\r\n\t\topacity: 1;\r\n\t\twidth: 0.3em;\r\n\t\theight: 0.45em;\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},3773:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck .ck-upload-placeholder-loader{align-items:center;display:flex;justify-content:center;left:0;position:absolute;top:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px;--ck-upload-placeholder-image-aspect-ratio:2.8}.ck .ck-image-upload-placeholder{margin:0;width:100%}.ck .ck-image-upload-placeholder.image-inline{width:calc(var(--ck-upload-placeholder-loader-size)*2*var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{height:100%;width:100%}.ck .ck-upload-placeholder-loader:before{animation:ck-upload-placeholder-loader 1s linear infinite;border-radius:50%;border-right:2px solid transparent;border-top:3px solid var(--ck-color-upload-placeholder-loader);height:var(--ck-upload-placeholder-loader-size);width:var(--ck-upload-placeholder-loader-size)}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}',"",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageuploadloader.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadloader.css"],names:[],mappings:"AAKA,kCAGC,kBAAmB,CADnB,YAAa,CAEb,sBAAuB,CAEvB,MAAO,CALP,iBAAkB,CAIlB,KAOD,CAJC,yCACC,UAAW,CACX,iBACD,CCXD,MACC,4CAAqD,CACrD,wCAAyC,CACzC,8CACD,CAEA,iCAGC,QAAS,CADT,UAgBD,CAbC,8CACC,sGACD,CAEA,qCAOC,4DACD,CAGD,kCAEC,WAAY,CADZ,UAWD,CARC,yCAMC,yDAA0D,CAH1D,iBAAkB,CAElB,kCAAmC,CADnC,8DAA+D,CAF/D,+CAAgD,CADhD,8CAMD,CAGD,wCACC,GACC,uBACD,CACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-upload-placeholder-loader {\r\n\tposition: absolute;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\r\n\t&::before {\r\n\t\tcontent: '';\r\n\t\tposition: relative;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-upload-placeholder-loader: hsl(0, 0%, 70%);\r\n\t--ck-upload-placeholder-loader-size: 32px;\r\n\t--ck-upload-placeholder-image-aspect-ratio: 2.8;\r\n}\r\n\r\n.ck .ck-image-upload-placeholder {\r\n\t/* We need to control the full width of the SVG gray background. */\r\n\twidth: 100%;\r\n\tmargin: 0;\r\n\r\n\t&.image-inline {\r\n\t\twidth: calc( 2 * var(--ck-upload-placeholder-loader-size) * var(--ck-upload-placeholder-image-aspect-ratio) );\r\n\t}\r\n\r\n\t& img {\r\n\t\t/*\r\n\t\t * This is an arbitrary aspect for a 1x1 px GIF to display to the user. Not too tall, not too short.\r\n\t\t * There's nothing special about this number except that it should make the image placeholder look like\r\n\t\t * a real image during this short period after the upload started and before the image was read from the\r\n\t\t * file system (and a rich preview was loaded).\r\n\t\t */\r\n\t\taspect-ratio: var(--ck-upload-placeholder-image-aspect-ratio);\r\n\t}\r\n}\r\n\r\n.ck .ck-upload-placeholder-loader {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\r\n\t&::before {\r\n\t\twidth: var(--ck-upload-placeholder-loader-size);\r\n\t\theight: var(--ck-upload-placeholder-loader-size);\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 3px solid var(--ck-color-upload-placeholder-loader);\r\n\t\tborder-right: 2px solid transparent;\r\n\t\tanimation: ck-upload-placeholder-loader 1s linear infinite;\r\n\t}\r\n}\r\n\r\n@keyframes ck-upload-placeholder-loader {\r\n\tto {\r\n\t\ttransform: rotate( 360deg );\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},3689:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{left:0;position:absolute;top:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{background:var(--ck-color-upload-bar-background);height:2px;transition:width .1s;width:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/imageuploadprogress.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadprogress.css"],names:[],mappings:"AAMC,qEAEC,iBACD,CAGA,uGAIC,MAAO,CAFP,iBAAkB,CAClB,KAED,CCRC,yFACC,oBACD,CAID,uGAIC,gDAAiD,CAFjD,UAAW,CAGX,oBAAuB,CAFvB,OAGD,CAGD,kBACC,GAAO,SAAY,CACnB,GAAO,SAAY,CACpB",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-editor__editable {\r\n\t& .image,\r\n\t& .image-inline {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t/* Upload progress bar. */\r\n\t& .image .ck-progress-bar,\r\n\t& .image-inline .ck-progress-bar {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-editor__editable {\r\n\t& .image,\r\n\t& .image-inline {\r\n\t\t/* Showing animation. */\r\n\t\t&.ck-appear {\r\n\t\t\tanimation: fadeIn 700ms;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Upload progress bar. */\r\n\t& .image .ck-progress-bar,\r\n\t& .image-inline .ck-progress-bar {\r\n\t\theight: 2px;\r\n\t\twidth: 0;\r\n\t\tbackground: var(--ck-color-upload-bar-background);\r\n\t\ttransition: width 100ms;\r\n\t}\r\n}\r\n\r\n@keyframes fadeIn {\r\n\tfrom { opacity: 0; }\r\n\tto   { opacity: 1; }\r\n}\r\n"],sourceRoot:""}]);const a=s},1905:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}","",{version:3,sources:["webpack://./../ckeditor5-image/theme/textalternativeform.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAOA,6BACC,YAAa,CACb,kBAAmB,CACnB,gBAqBD,CAnBC,oDACC,oBACD,CAEA,uCACC,YACD,CCZA,oCDCD,6BAcE,cAUF,CARE,oDACC,eACD,CAEA,wCACC,cACD,CCrBD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-text-alternative-form {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\r\n\t& .ck-labeled-field-view {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t& .ck-label {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t& .ck-labeled-field-view {\r\n\t\t\tflex-basis: 100%;\r\n\t\t}\r\n\r\n\t\t& .ck-button {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4471:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content span[lang]{font-style:italic}","",{version:3,sources:["webpack://./../ckeditor5-language/theme/language.css"],names:[],mappings:"AAKA,uBACC,iBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content span[lang] {\r\n\tfont-style: italic;\r\n}\r\n"],sourceRoot:""}]);const a=s},9773:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-link/link.css"],names:[],mappings:"AAMA,sBACC,mDAMD,CAHC,wCACC,yFACD,CAOD,4BACC,8CACD,CAGA,sCAEC,gDAAiD,CADjD,WAAY,CAEZ,iBAAkB,CAClB,oCACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/* Class added to span element surrounding currently selected link. */\r\n.ck .ck-link_selected {\r\n\tbackground: var(--ck-color-link-selected-background);\r\n\r\n\t/* Give linked inline images some outline to let the user know they are also part of the link. */\r\n\t& span.image-inline {\r\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background);\r\n\t}\r\n}\r\n\r\n/*\r\n * Classes used by the "fake visual selection" displayed in the content when an input\r\n * in the link UI has focus (the browser does not render the native selection in this state).\r\n */\r\n.ck .ck-fake-link-selection {\r\n\tbackground: var(--ck-color-link-fake-selection);\r\n}\r\n\r\n/* A collapsed fake visual selection. */\r\n.ck .ck-fake-link-selection_collapsed {\r\n\theight: 100%;\r\n\tborder-right: 1px solid var(--ck-color-base-text);\r\n\tmargin-right: -1px;\r\n\toutline: solid 1px hsla(0, 0%, 100%, .5);\r\n}\r\n'],sourceRoot:""}]);const a=s},2347:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{color:var(--ck-color-link-default);cursor:pointer;max-width:var(--ck-input-width);min-width:3em;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{max-width:100%;min-width:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}","",{version:3,sources:["webpack://./../ckeditor5-link/theme/linkactions.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-link/linkactions.css"],names:[],mappings:"AAOA,oBACC,YAAa,CACb,kBAAmB,CACnB,gBAqBD,CAnBC,8CACC,oBAKD,CAHC,gEACC,eACD,CCXD,oCDCD,oBAcE,cAUF,CARE,8CACC,eACD,CAEA,8DACC,cACD,CCrBD,CCIA,wDACC,cAAe,CACf,eAmCD,CAjCC,0EAEC,kCAAmC,CAEnC,cAAe,CAIf,+BAAgC,CAChC,aAAc,CARd,kCAAmC,CASnC,iBAAkB,CAPlB,sBAYD,CAHC,gFACC,yBACD,CAGD,mPAIC,eACD,CAEA,+DACC,eACD,CAGC,gFACC,yBACD,CAWD,qHACC,sCACD,CDtDD,oCC0DC,wDACC,8DAMD,CAJC,0EAEC,cAAe,CADf,WAED,CAGD,gJAME,aAEF,CDzED",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-link-actions {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\r\n\t& .ck-link-actions__preview {\r\n\t\tdisplay: inline-block;\r\n\r\n\t\t& .ck-button__label {\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t& .ck-link-actions__preview {\r\n\t\t\tflex-basis: 100%;\r\n\t\t}\r\n\r\n\t\t& .ck-button:not(.ck-link-actions__preview) {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_unselectable.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n@import "../mixins/_focus.css";\r\n@import "../mixins/_shadow.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-link-actions {\r\n\t& .ck-button.ck-link-actions__preview {\r\n\t\tpadding-left: 0;\r\n\t\tpadding-right: 0;\r\n\r\n\t\t& .ck-button__label {\r\n\t\t\tpadding: 0 var(--ck-spacing-medium);\r\n\t\t\tcolor: var(--ck-color-link-default);\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tcursor: pointer;\r\n\r\n\t\t\t/* Match the box model of the link editor form\'s input so the balloon\r\n\t\t\tdoes not change width when moving between actions and the form. */\r\n\t\t\tmax-width: var(--ck-input-width);\r\n\t\t\tmin-width: 3em;\r\n\t\t\ttext-align: center;\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&,\r\n\t\t&:hover,\r\n\t\t&:focus,\r\n\t\t&:active {\r\n\t\t\tbackground: none;\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tbox-shadow: none;\r\n\t\t}\r\n\r\n\t\t&:focus {\r\n\t\t\t& .ck-button__label {\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-dir ltr {\r\n\t\t& .ck-button:not(:first-child) {\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-dir rtl {\r\n\t\t& .ck-button:not(:last-child) {\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\t& .ck-button.ck-link-actions__preview {\r\n\t\t\tmargin: var(--ck-spacing-standard) var(--ck-spacing-standard) 0;\r\n\r\n\t\t\t& .ck-button__label {\r\n\t\t\t\tmin-width: 0;\r\n\t\t\t\tmax-width: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t& .ck-button:not(.ck-link-actions__preview) {\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tmargin-left: 0;\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tmargin-left: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},7754:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{min-width:var(--ck-input-width);padding:0}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{border-radius:0;margin:0;padding:var(--ck-spacing-standard);width:50%}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}","",{version:3,sources:["webpack://./../ckeditor5-link/theme/linkform.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-link/linkform.css"],names:[],mappings:"AAOA,iBACC,YAiBD,CAfC,2BACC,YACD,CCNA,oCDCD,iBAQE,cAUF,CARE,wCACC,eACD,CAEA,4BACC,cACD,CCfD,CDuBD,iCACC,aAYD,CALE,wHAEC,mCACD,CE/BF,iCAEC,+BAAgC,CADhC,SAgDD,CA7CC,wDACC,8EAMD,CAJC,uEACC,WAAY,CACZ,UACD,CAGD,4CAIC,eAAgB,CAFhB,QAAS,CADT,kCAAmC,CAEnC,SAkBD,CAfC,wDACC,gDACD,CARD,4GAeE,aAMF,CAJE,mEACC,kDACD,CAKF,6CACC,yDAUD,CARC,wEACC,SAAU,CACV,UAKD,CAHC,8EACC,eACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-link-form {\r\n\tdisplay: flex;\r\n\r\n\t& .ck-label {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t& .ck-labeled-field-view {\r\n\t\t\tflex-basis: 100%;\r\n\t\t}\r\n\r\n\t\t& .ck-button {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*\r\n * Style link form differently when manual decorators are available.\r\n * See: https://github.com/ckeditor/ckeditor5-link/issues/186.\r\n */\r\n.ck.ck-link-form_layout-vertical {\r\n\tdisplay: block;\r\n\r\n\t/*\r\n\t * Whether the form is in the responsive mode or not, if there are decorator buttons\r\n\t * keep the top margin of action buttons medium.\r\n\t */\r\n\t& .ck-button {\r\n\t\t&.ck-button-save,\r\n\t\t&.ck-button-cancel {\r\n\t\t\tmargin-top: var(--ck-spacing-medium);\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n/*\r\n * Style link form differently when manual decorators are available.\r\n * See: https://github.com/ckeditor/ckeditor5-link/issues/186.\r\n */\r\n.ck.ck-link-form_layout-vertical {\r\n\tpadding: 0;\r\n\tmin-width: var(--ck-input-width);\r\n\r\n\t& .ck-labeled-field-view {\r\n\t\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small);\r\n\r\n\t\t& .ck-input-text {\r\n\t\t\tmin-width: 0;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck-button {\r\n\t\tpadding: var(--ck-spacing-standard);\r\n\t\tmargin: 0;\r\n\t\twidth: 50%;\r\n\t\tborder-radius: 0;\r\n\r\n\t\t&:not(:focus) {\r\n\t\t\tborder-top: 1px solid var(--ck-color-base-border);\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\tmargin-left: 0;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\tmargin-left: 0;\r\n\r\n\t\t\t&:last-of-type {\r\n\t\t\t\tborder-right: 1px solid var(--ck-color-base-border);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* Using additional `.ck` class for stronger CSS specificity than `.ck.ck-link-form > :not(:first-child)`. */\r\n\t& .ck.ck-list {\r\n\t\tmargin: var(--ck-spacing-standard) var(--ck-spacing-large);\r\n\r\n\t\t& .ck-button.ck-switchbutton {\r\n\t\t\tpadding: 0;\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tbackground: none;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},111:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:"";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}',"",{version:3,sources:["webpack://./../ckeditor5-link/theme/linkimage.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-link/linkimage.css"],names:[],mappings:"AASE,+FACC,aAAc,CACd,iBACD,CCPF,MAEC,sCAAuC,CACvC,oEACD,CAME,+FAUC,+BAAqC,CACrC,83BAA+3B,CAG/3B,uBAA2B,CAD3B,2BAA4B,CAD5B,oBAAqB,CAGrB,kBAAmB,CAdnB,UAAW,CAsBX,oGAAuG,CAFvG,eAAgB,CAbhB,sCAAwC,CADxC,oCAAsC,CAetC,mGAED",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-editor__editable {\r\n\t/* Linked image indicator */\r\n\t& figure.image > a,\r\n\t& a span.image-inline {\r\n\t\t&::after {\r\n\t\t\tdisplay: block;\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/* Match the icon size with the upload indicator brought by the image upload feature. */\r\n\t--ck-link-image-indicator-icon-size: 20;\r\n\t--ck-link-image-indicator-icon-is-visible: clamp(0px, 100% - 50px, 1px);\r\n}\r\n\r\n.ck.ck-editor__editable {\r\n\t/* Linked image indicator */\r\n\t& figure.image > a,\r\n\t& a span.image-inline {\r\n\t\t&::after {\r\n\t\t\tcontent: "";\r\n\r\n\t\t\t/*\r\n\t\t\t * Smaller images should have the icon closer to the border.\r\n\t\t\t * Match the icon position with the upload indicator brought by the image upload feature.\r\n\t\t\t */\r\n\t\t\ttop: min(var(--ck-spacing-medium), 6%);\r\n\t\t\tright: min(var(--ck-spacing-medium), 6%);\r\n\r\n\t\t\tbackground-color: hsla(0, 0%, 0%, .4);\r\n\t\t\tbackground-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+");\r\n\t\t\tbackground-size: 14px;\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t\tbackground-position: center;\r\n\t\t\tborder-radius: 100%;\r\n\r\n\t\t\t/*\r\n\t\t\t* Use CSS math to simulate container queries.\r\n\t\t\t* https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\r\n\t\t\t*/\r\n\t\t\toverflow: hidden;\r\n\t\t\twidth: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\r\n\t\t\theight: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\r\n\t\t}\r\n\t}\r\n}\r\n\r\n'],sourceRoot:""}]);const a=s},4721:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:0 var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}","",{version:3,sources:["webpack://./../ckeditor5-list/theme/collapsible.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-list/collapsible.css"],names:[],mappings:"AAMC,sEACC,YACD,CCHD,MACC,yDACD,CAGC,iCAIC,eAAgB,CAChB,aAAc,CAHd,eAAiB,CACjB,wDAAyD,CAFzD,UAoBD,CAdC,uCACC,sBACD,CAEA,wIACC,sBAAuB,CACvB,wBAAyB,CACzB,eACD,CAEA,0CACC,qCAAsC,CACtC,sCACD,CAGD,6CACC,yDACD,CAGC,mEACC,wBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-collapsible.ck-collapsible_collapsed {\r\n\t& > .ck-collapsible__children {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-collapsible-arrow-size: calc(0.5 * var(--ck-icon-size));\r\n}\r\n\r\n.ck.ck-collapsible {\r\n\t& > .ck.ck-button {\r\n\t\twidth: 100%;\r\n\t\tfont-weight: bold;\r\n\t\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large);\r\n\t\tborder-radius: 0;\r\n\t\tcolor: inherit;\r\n\r\n\t\t&:focus {\r\n\t\t\tbackground: transparent;\r\n\t\t}\r\n\r\n\t\t&:active, &:not(:focus), &:hover:not(:focus) {\r\n\t\t\tbackground: transparent;\r\n\t\t\tborder-color: transparent;\r\n\t\t\tbox-shadow: none;\r\n\t\t}\r\n\r\n\t\t& > .ck-icon {\r\n\t\t\tmargin-right: var(--ck-spacing-medium);\r\n\t\t\twidth: var(--ck-collapsible-arrow-size);\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck-collapsible__children {\r\n\t\tpadding: 0 var(--ck-spacing-large) var(--ck-spacing-large);\r\n\t}\r\n\r\n\t&.ck-collapsible_collapsed {\r\n\t\t& > .ck.ck-button .ck-icon {\r\n\t\t\ttransform: rotate(-90deg);\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},6082:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;margin-bottom:calc(var(--ck-spacing-tiny)*-1);padding-left:0;padding-right:0}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{background:none;border-color:transparent;box-shadow:none}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-list/listproperties.css"],names:[],mappings:"AAOC,yDACC,+BASD,CAPC,2DACC,cAKD,CAHC,6DACC,qCACD,CASD,wFACC,oCACD,CAGA,mFACC,gDAWD,CARE,+GACC,UAKD,CAHC,iHACC,qCACD,CAMJ,8EACC,cAAe,CACf,UACD,CAEA,uEACC,sBAAuB,CAGvB,6CAAgD,CAFhD,cAAe,CACf,eAQD,CALC,2JAGC,eAAgB,CADhB,wBAAyB,CADzB,eAGD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-list-properties {\r\n\t/* When there are no list styles and there is no collapsible. */\r\n\t&.ck-list-properties_without-styles {\r\n\t\tpadding: var(--ck-spacing-large);\r\n\r\n\t\t& > * {\r\n\t\t\tmin-width: 14em;\r\n\r\n\t\t\t& + * {\r\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * When the numbered list property fields (start at, reversed) should be displayed,\r\n\t * more horizontal space is needed. Reconfigure the style grid to create that space.\r\n\t */\r\n\t&.ck-list-properties_with-numbered-properties {\r\n\t\t& > .ck-list-styles-list {\r\n\t\t\tgrid-template-columns: repeat( 4, auto );\r\n\t\t}\r\n\r\n\t\t/* When list styles are rendered and property fields are in a collapsible. */\r\n\t\t& > .ck-collapsible {\r\n\t\t\tborder-top: 1px solid var(--ck-color-base-border);\r\n\r\n\t\t\t& > .ck-collapsible__children {\r\n\t\t\t\t& > * {\r\n\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\t& + * {\r\n\t\t\t\t\t\tmargin-top: var(--ck-spacing-standard);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck.ck-numbered-list-properties__start-index .ck-input {\r\n\t\tmin-width: auto;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t& .ck.ck-numbered-list-properties__reversed-order {\r\n\t\tbackground: transparent;\r\n\t\tpadding-left: 0;\r\n\t\tpadding-right: 0;\r\n\t\tmargin-bottom: calc(-1 * var(--ck-spacing-tiny));\r\n\r\n\t\t&:active, &:hover {\r\n\t\t\tbox-shadow: none;\r\n\t\t\tborder-color: transparent;\r\n\t\t\tbackground: none;\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},2417:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-list-styles-list{display:grid}.ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:circle}.ck-content ul ul{list-style-type:disc}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-list{column-gap:var(--ck-spacing-medium);grid-template-columns:repeat(3,auto);padding:var(--ck-spacing-large);row-gap:var(--ck-spacing-medium)}.ck.ck-list-styles-list .ck-button{box-sizing:content-box;margin:0;padding:0}.ck.ck-list-styles-list .ck-button,.ck.ck-list-styles-list .ck-button .ck-icon{height:var(--ck-list-style-button-size);width:var(--ck-list-style-button-size)}","",{version:3,sources:["webpack://./../ckeditor5-list/theme/liststyles.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-list/liststyles.css"],names:[],mappings:"AAKA,wBACC,YACD,CAEA,eACC,uBAiBD,CAfC,kBACC,2BAaD,CAXC,qBACC,2BASD,CAPC,wBACC,2BAKD,CAHC,2BACC,2BACD,CAMJ,eACC,sBAaD,CAXC,kBACC,oBASD,CAJE,6CACC,sBACD,CCnCH,MACC,gCACD,CAEA,wBAGC,mCAAoC,CAFpC,oCAAwC,CAGxC,+BAAgC,CAFhC,gCA4BD,CAxBC,mCAiBC,sBAAuB,CAPvB,QAAS,CANT,SAmBD,CAJC,+EAhBA,uCAAwC,CADxC,sCAoBA",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-list-styles-list {\r\n\tdisplay: grid;\r\n}\r\n\r\n.ck-content ol {\r\n\tlist-style-type: decimal;\r\n\r\n\t& ol {\r\n\t\tlist-style-type: lower-latin;\r\n\r\n\t\t& ol {\r\n\t\t\tlist-style-type: lower-roman;\r\n\r\n\t\t\t& ol {\r\n\t\t\t\tlist-style-type: upper-latin;\r\n\r\n\t\t\t\t& ol {\r\n\t\t\t\t\tlist-style-type: upper-roman;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck-content ul {\r\n\tlist-style-type: circle;\r\n\r\n\t& ul {\r\n\t\tlist-style-type: disc;\r\n\r\n\t\t& ul {\r\n\t\t\tlist-style-type: square;\r\n\r\n\t\t\t& ul {\r\n\t\t\t\tlist-style-type: square;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-list-style-button-size: 44px;\r\n}\r\n\r\n.ck.ck-list-styles-list {\r\n\tgrid-template-columns: repeat( 3, auto );\r\n\trow-gap: var(--ck-spacing-medium);\r\n\tcolumn-gap: var(--ck-spacing-medium);\r\n\tpadding: var(--ck-spacing-large);\r\n\r\n\t& .ck-button {\r\n\t\t/* Make the button look like a thumbnail (the icon "takes it all"). */\r\n\t\twidth: var(--ck-list-style-button-size);\r\n\t\theight: var(--ck-list-style-button-size);\r\n\t\tpadding: 0;\r\n\r\n\t\t/*\r\n\t\t * Buttons are aligned by the grid so disable default button margins to not collide with the\r\n\t\t * gaps in the grid.\r\n\t\t */\r\n\t\tmargin: 0;\r\n\r\n\t\t/*\r\n\t\t * Make sure the button border (which is displayed on focus, BTW) does not steal pixels\r\n\t\t * from the button dimensions and, as a result, decrease the size of the icon\r\n\t\t * (which becomes blurry as it scales down).\r\n\t\t */\r\n\t\tbox-sizing: content-box;\r\n\r\n\t\t& .ck-icon {\r\n\t\t\twidth: var(--ck-list-style-button-size);\r\n\t\t\theight: var(--ck-list-style-button-size);\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},1199:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,':root{--ck-todo-list-checkmark-size:16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{margin-bottom:5px}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-content .todo-list .todo-list__label>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:"";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out,background .25s ease-in-out,border .25s ease-in-out;width:100%}.ck-content .todo-list .todo-list__label>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:"";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-editor__editable .todo-list .todo-list__label>input{cursor:pointer}.ck-editor__editable .todo-list .todo-list__label>input:hover:before{box-shadow:0 0 0 5px rgba(0,0,0,.1)}',"",{version:3,sources:["webpack://./../ckeditor5-list/theme/todolist.css"],names:[],mappings:"AAKA,MACC,kCACD,CAEA,uBACC,eA0ED,CAxEC,0BACC,iBAKD,CAHC,qCACC,cACD,CAIA,+CACC,uBAAwB,CAQxB,QAAS,CAPT,oBAAqB,CAGrB,yCAA0C,CAO1C,UAAW,CAGX,aAAc,CAFd,kBAAmB,CAVnB,iBAAkB,CAWlB,OAAQ,CARR,qBAAsB,CAFtB,wCAqDD,CAxCC,sDAOC,qBAAiC,CACjC,iBAAkB,CALlB,qBAAsB,CACtB,UAAW,CAHX,aAAc,CAKd,WAAY,CAJZ,iBAAkB,CAOlB,0FAAgG,CAJhG,UAKD,CAEA,qDAaC,wBAAyB,CADzB,kBAAmB,CAEnB,sGAA+G,CAX/G,sBAAuB,CAEvB,UAAW,CAJX,aAAc,CAUd,mDAAwD,CAHxD,+CAAoD,CAJpD,mBAAoB,CAFpB,iBAAkB,CAOlB,gDAAqD,CAMrD,uBAAwB,CALxB,kDAMD,CAGC,+DACC,kBAA8B,CAC9B,oBACD,CAEA,8DACC,iBACD,CAIF,wEACC,qBACD,CAKF,6CACC,MAAO,CAGP,iBAAkB,CAFlB,cAAe,CACf,WAED,CAMA,wDACC,cAKD,CAHC,qEACC,mCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-todo-list-checkmark-size: 16px;\r\n}\r\n\r\n.ck-content .todo-list {\r\n\tlist-style: none;\r\n\r\n\t& li {\r\n\t\tmargin-bottom: 5px;\r\n\r\n\t\t& .todo-list {\r\n\t\t\tmargin-top: 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t& .todo-list__label {\r\n\t\t& > input {\r\n\t\t\t-webkit-appearance: none;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tposition: relative;\r\n\t\t\twidth: var(--ck-todo-list-checkmark-size);\r\n\t\t\theight: var(--ck-todo-list-checkmark-size);\r\n\t\t\tvertical-align: middle;\r\n\r\n\t\t\t/* Needed on iOS */\r\n\t\t\tborder: 0;\r\n\r\n\t\t\t/* LTR styles */\r\n\t\t\tleft: -25px;\r\n\t\t\tmargin-right: -15px;\r\n\t\t\tright: 0;\r\n\t\t\tmargin-left: 0;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tborder: 1px solid hsl(0, 0%, 20%);\r\n\t\t\t\tborder-radius: 2px;\r\n\t\t\t\ttransition: 250ms ease-in-out box-shadow, 250ms ease-in-out background, 250ms ease-in-out border;\r\n\t\t\t}\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbox-sizing: content-box;\r\n\t\t\t\tpointer-events: none;\r\n\t\t\t\tcontent: '';\r\n\r\n\t\t\t\t/* Calculate tick position, size and border-width proportional to the checkmark size. */\r\n\t\t\t\tleft: calc( var(--ck-todo-list-checkmark-size) / 3 );\r\n\t\t\t\ttop: calc( var(--ck-todo-list-checkmark-size) / 5.3 );\r\n\t\t\t\twidth: calc( var(--ck-todo-list-checkmark-size) / 5.3 );\r\n\t\t\t\theight: calc( var(--ck-todo-list-checkmark-size) / 2.6 );\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t\tborder-color: transparent;\r\n\t\t\t\tborder-width: 0 calc( var(--ck-todo-list-checkmark-size) / 8 ) calc( var(--ck-todo-list-checkmark-size) / 8 ) 0;\r\n\t\t\t\ttransform: rotate(45deg);\r\n\t\t\t}\r\n\r\n\t\t\t&[checked] {\r\n\t\t\t\t&::before {\r\n\t\t\t\t\tbackground: hsl(126, 64%, 41%);\r\n\t\t\t\t\tborder-color: hsl(126, 64%, 41%);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tborder-color: hsl(0, 0%, 100%);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t& .todo-list__label__description {\r\n\t\t\tvertical-align: middle;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* RTL styles */\r\n[dir=\"rtl\"] .todo-list .todo-list__label > input {\r\n\tleft: 0;\r\n\tmargin-right: 0;\r\n\tright: -25px;\r\n\tmargin-left: -15px;\r\n}\r\n\r\n/*\r\n * To-do list should be interactive only during the editing\r\n * (https://github.com/ckeditor/ckeditor5/issues/2090).\r\n */\r\n.ck-editor__editable .todo-list .todo-list__label > input {\r\n\tcursor: pointer;\r\n\r\n\t&:hover::before {\r\n\t\tbox-shadow: 0 0 0 5px hsla(0, 0%, 0%, 0.1);\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},8989:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-mathwidget__wrapper{display:flex;justify-content:center}.ck-mathwidget__wrapper .ck-mathwidget__editing-view{background-color:hsla(0,0%,78%,.3)}.ck-mathwidget__preview,.ck-mathwidget__wrapper .ck-mathwidget__editing-view{border:0;font-size:14px;min-height:100px;outline:0;padding:16px;resize:vertical}.ck-mathwidget__preview{background-color:rgba(231,171,19,.227)}[id^=dmath-]{align-items:center;display:flex;height:100%;justify-content:center}[id^=dmath-] svg{display:block;height:auto;width:60%}.ck-mathwidget__source-mode .ck-mathwidget__editing-view{width:100%}.ck-mathwidget__source-mode .ck-mathwidget__preview{display:none}.ck-mathwidget__split-mode .ck-mathwidget__editing-view,.ck-mathwidget__split-mode .ck-mathwidget__preview{width:50%}.ck-mathwidget__preview-mode .ck-mathwidget__editing-view{display:none}.ck-mathwidget__preview-mode .ck-mathwidget__preview{width:100%}","",{version:3,sources:["webpack://./../ckeditor5-mathwidget/theme/math.css"],names:[],mappings:"AACA,wBACC,YAAa,CACb,sBACD,CAKA,qDAGC,kCAMD,CAGA,6EAPC,QAAS,CAET,cAAe,CAHf,gBAAiB,CAIjB,SAAU,CAPV,YAAa,CAKb,eAcD,CARA,wBAEC,sCAMD,CAGA,aAEC,kBAAmB,CADnB,YAAa,CAEb,WAAY,CACZ,sBACD,CAEA,iBACC,aAAc,CAEd,WAAY,CADZ,SAED,CAGA,yDACC,UACD,CAEA,oDACC,YACD,CAOA,2GACC,SACD,CAGA,0DACC,YACD,CAEA,qDACC,UACD",sourcesContent:['/* mathwidget wrapper by joygram 2022/12/06 */\n.ck-mathwidget__wrapper {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n/* Editing\n Assigned to textarea\n */\n.ck-mathwidget__wrapper .ck-mathwidget__editing-view {\n\tpadding: 16px;\n\t/* just like pre element */\n\tbackground-color: hsla(0, 0%, 78%, 0.3);\n\tmin-height: 100px;\n\tborder: 0;\n\tresize: vertical;\n\tfont-size: 14px;\n\toutline: 0;\n}\n\n/* Preview */\n.ck-mathwidget__preview {\n\tpadding: 16px;\n\tbackground-color: hsla(43, 85%, 49%, 0.227);\n\tmin-height: 100px;\n\tborder: 0;\n\tresize: vertical;\n\tfont-size: 14px;\n\toutline: 0;\n}\n\n/* Preview error state */\n[id^="dmath-"] {\n\tdisplay: flex;\n\talign-items: center;\n\theight: 100%;\n\tjustify-content: center;\n}\n\n[id^="dmath-"] svg {\n\tdisplay: block;\n\twidth: 60%;\n\theight: auto;\n}\n\n/* Source mode */\n.ck-mathwidget__source-mode .ck-mathwidget__editing-view {\n\twidth: 100%;\n}\n\n.ck-mathwidget__source-mode .ck-mathwidget__preview {\n\tdisplay: none;\n}\n\n/* Split mode */\n.ck-mathwidget__split-mode .ck-mathwidget__editing-view {\n\twidth: 50%;\n}\n\n.ck-mathwidget__split-mode .ck-mathwidget__preview {\n\twidth: 50%;\n}\n\n/* Preview mode */\n.ck-mathwidget__preview-mode .ck-mathwidget__editing-view {\n\tdisplay: none;\n}\n\n.ck-mathwidget__preview-mode .ck-mathwidget__preview {\n\twidth: 100%;\n}\n'],sourceRoot:""}]);const a=s},4652:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content .media{clear:both;display:block;margin:.9em 0;min-width:15em}","",{version:3,sources:["webpack://./../ckeditor5-media-embed/theme/mediaembed.css"],names:[],mappings:"AAKA,mBAGC,UAAW,CASX,aAAc,CAJd,aAAe,CAQf,cACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content .media {\r\n\t/* Don\'t allow floated content overlap the media.\r\n\thttps://github.com/ckeditor/ckeditor5-media-embed/issues/53 */\r\n\tclear: both;\r\n\r\n\t/* Make sure there is some space between the content and the media. */\r\n\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\r\n\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\r\n\tmargin: 0.9em 0;\r\n\r\n\t/* Make sure media is not overriden with Bootstrap default `flex` value.\r\n\tSee: https://github.com/ckeditor/ckeditor5/issues/1373. */\r\n\tdisplay: block;\r\n\r\n\t/* Give the media some minimal width in the content to prevent them\r\n\tfrom being "squashed" in tight spaces, e.g. in table cells (#44) */\r\n\tmin-width: 15em;\r\n}\r\n'],sourceRoot:""}]);const a=s},7442:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck-media__wrapper .ck-media__placeholder{align-items:center;display:flex;flex-direction:column}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{display:block;overflow:hidden}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{background:var(--ck-color-base-foreground);padding:calc(var(--ck-spacing-standard)*3)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{background-position:50%;background-size:cover;height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);min-width:var(--ck-media-embed-placeholder-icon-size)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{height:100%;width:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);font-style:italic;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-height:380px;max-width:300px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Im0yMDYuNDc3IDI2MC45LTI4Ljk4NyAyOC45ODdhNS4yMTggNS4yMTggMCAwIDAgMy43OCAxLjYxaDQ5LjYyMWMxLjY5NCAwIDMuMTktLjc5OCA0LjE0Ni0yLjAzN3oiIGZpbGw9IiM1Yzg4YzUiLz48cGF0aCBkPSJNMjI2Ljc0MiAyMjIuOTg4Yy05LjI2NiAwLTE2Ljc3NyA3LjE3LTE2Ljc3NyAxNi4wMTQuMDA3IDIuNzYyLjY2MyA1LjQ3NCAyLjA5MyA3Ljg3NS40My43MDMuODMgMS40MDggMS4xOSAyLjEwNy4zMzMuNTAyLjY1IDEuMDA1Ljk1IDEuNTA4LjM0My40NzcuNjczLjk1Ny45ODggMS40NCAxLjMxIDEuNzY5IDIuNSAzLjUwMiAzLjYzNyA1LjE2OC43OTMgMS4yNzUgMS42ODMgMi42NCAyLjQ2NiAzLjk5IDIuMzYzIDQuMDk0IDQuMDA3IDguMDkyIDQuNiAxMy45MTR2LjAxMmMuMTgyLjQxMi41MTYuNjY2Ljg3OS42NjcuNDAzLS4wMDEuNzY4LS4zMTQuOTMtLjc5OS42MDMtNS43NTYgMi4yMzgtOS43MjkgNC41ODUtMTMuNzk0Ljc4Mi0xLjM1IDEuNjczLTIuNzE1IDIuNDY1LTMuOTkgMS4xMzctMS42NjYgMi4zMjgtMy40IDMuNjM4LTUuMTY5LjMxNS0uNDgyLjY0NS0uOTYyLjk4OC0xLjQzOS4zLS41MDMuNjE3LTEuMDA2Ljk1LTEuNTA4LjM1OS0uNy43Ni0xLjQwNCAxLjE5LTIuMTA3IDEuNDI2LTIuNDAyIDItNS4xMTQgMi4wMDQtNy44NzUgMC04Ljg0NC03LjUxMS0xNi4wMTQtMTYuNzc2LTE2LjAxNHoiIGZpbGw9IiNkZDRiM2UiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PGVsbGlwc2Ugcnk9IjUuNTY0IiByeD0iNS44MjgiIGN5PSIyMzkuMDAyIiBjeD0iMjI2Ljc0MiIgZmlsbD0iIzgwMmQyNyIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMTkwLjMwMSAyMzcuMjgzYy00LjY3IDAtOC40NTcgMy44NTMtOC40NTcgOC42MDZzMy43ODYgOC42MDcgOC40NTcgOC42MDdjMy4wNDMgMCA0LjgwNi0uOTU4IDYuMzM3LTIuNTE2IDEuNTMtMS41NTcgMi4wODctMy45MTMgMi4wODctNi4yOSAwLS4zNjItLjAyMy0uNzIyLS4wNjQtMS4wNzloLTguMjU3djMuMDQzaDQuODVjLS4xOTcuNzU5LS41MzEgMS40NS0xLjA1OCAxLjk4Ni0uOTQyLjk1OC0yLjAyOCAxLjU0OC0zLjkwMSAxLjU0OC0yLjg3NiAwLTUuMjA4LTIuMzcyLTUuMjA4LTUuMjk5IDAtMi45MjYgMi4zMzItNS4yOTkgNS4yMDgtNS4yOTkgMS4zOTkgMCAyLjYxOC40MDcgMy41ODQgMS4yOTNsMi4zODEtMi4zOGMwLS4wMDItLjAwMy0uMDA0LS4wMDQtLjAwNS0xLjU4OC0xLjUyNC0zLjYyLTIuMjE1LTUuOTU1LTIuMjE1em00LjQzIDUuNjYuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0ibTIxNS4xODQgMjUxLjkyOS03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVhNS4yMzMgNS4yMzMgMCAwIDAgLjQ0OS0yLjEyM3YtMzEuMTY1Yy0uNDY5LjY3NS0uOTM0IDEuMzQ5LTEuMzgyIDIuMDA1LS43OTIgMS4yNzUtMS42ODIgMi42NC0yLjQ2NSAzLjk5LTIuMzQ3IDQuMDY1LTMuOTgyIDguMDM4LTQuNTg1IDEzLjc5NC0uMTYyLjQ4NS0uNTI3Ljc5OC0uOTMuNzk5LS4zNjMtLjAwMS0uNjk3LS4yNTUtLjg3OS0uNjY3di0uMDEyYy0uNTkzLTUuODIyLTIuMjM3LTkuODItNC42LTEzLjkxNC0uNzgzLTEuMzUtMS42NzMtMi43MTUtMi40NjYtMy45OS0xLjEzNy0xLjY2Ni0yLjMyNy0zLjQtMy42MzctNS4xNjlsLS4wMDItLjAwM3oiIGZpbGw9IiNjM2MzYzMiLz48cGF0aCBkPSJtMjEyLjk4MyAyNDguNDk1LTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOCA1LjIzOGgxLjAxNWwzNS42NjYtMzUuNjY2YTEzNi4yNzUgMTM2LjI3NSAwIDAgMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAgMC0uOTg5LTEuNDQgMzUuMTI3IDM1LjEyNyAwIDAgMC0uOTUtMS41MDhjLS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJtMjExLjk5OCAyNjEuMDgzLTYuMTUyIDYuMTUxIDI0LjI2NCAyNC4yNjRoLjc4MWE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OVptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OVoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzNabTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1Wk00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}',"",{version:3,sources:["webpack://./../ckeditor5-media-embed/theme/mediaembedediting.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-media-embed/mediaembedediting.css"],names:[],mappings:"AAMC,0CAGC,kBAAmB,CAFnB,YAAa,CACb,qBAcD,CAXC,sEAEC,cAAe,CAEf,iBAMD,CAJC,wGAEC,aAAc,CADd,eAED,CAWD,6kBACC,YACD,CAYF,2LACC,mBACD,CC1CA,MACC,0CAA2C,CAE3C,mDAA4D,CAC5D,2EACD,CAEA,mBACC,aA+FD,CA7FC,0CAEC,0CAA2C,CAD3C,0CA6BD,CA1BC,uEAIC,uBAA2B,CAC3B,qBAAsB,CAHtB,kDAAmD,CACnD,qCAAsC,CAFtC,qDAUD,CAJC,gFAEC,WAAY,CADZ,UAED,CAGD,4EACC,sDAAuD,CAGvD,iBAAkB,CADlB,iBAAkB,CAElB,sBAAuB,CAHvB,kBAUD,CALC,kFACC,4DAA6D,CAC7D,cAAe,CACf,yBACD,CAIF,wDAEC,gBAAiB,CADjB,eAED,CAEA,4UAIC,wvGACD,CAEA,2EACC,kBAaD,CAXC,wGACC,orBACD,CAEA,6GACC,UAKD,CAHC,mHACC,UACD,CAIF,4EACC,2DAcD,CAZC,yGACC,4jHACD,CAGA,8GACC,aAKD,CAHC,oHACC,UACD,CAIF,6EAEC,iDAaD,CAXC,0GACC,wiCACD,CAEA,+GACC,aAKD,CAHC,qHACC,UACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-media__wrapper {\r\n\t& .ck-media__placeholder {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\r\n\t\t& .ck-media__placeholder__url {\r\n\t\t\t/* Otherwise the URL will overflow when the content is very narrow. */\r\n\t\t\tmax-width: 100%;\r\n\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t& .ck-media__placeholder__url__text {\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&[data-oembed-url*="twitter.com"],\r\n\t&[data-oembed-url*="google.com/maps"],\r\n\t&[data-oembed-url*="goo.gl/maps"],\r\n\t&[data-oembed-url*="maps.google.com"],\r\n\t&[data-oembed-url*="maps.app.goo.gl"],\r\n\t&[data-oembed-url*="facebook.com"],\r\n\t&[data-oembed-url*="instagram.com"] {\r\n\t\t& .ck-media__placeholder__icon * {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* Disable all mouse interaction as long as the editor is not read–only.\r\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/58 */\r\n.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper > *:not(.ck-media__placeholder) {\r\n\tpointer-events: none;\r\n}\r\n\r\n/* Disable all mouse interaction when the widget is not selected (e.g. to avoid opening links by accident).\r\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/18 */\r\n.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder {\r\n\tpointer-events: none;\r\n}\r\n','/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-media-embed-placeholder-icon-size: 3em;\r\n\r\n\t--ck-color-media-embed-placeholder-url-text: hsl(0, 0%, 46%);\r\n\t--ck-color-media-embed-placeholder-url-text-hover: var(--ck-color-base-text);\r\n}\r\n\r\n.ck-media__wrapper {\r\n\tmargin: 0 auto;\r\n\r\n\t& .ck-media__placeholder {\r\n\t\tpadding: calc( 3 * var(--ck-spacing-standard) );\r\n\t\tbackground: var(--ck-color-base-foreground);\r\n\r\n\t\t& .ck-media__placeholder__icon {\r\n\t\t\tmin-width: var(--ck-media-embed-placeholder-icon-size);\r\n\t\t\theight: var(--ck-media-embed-placeholder-icon-size);\r\n\t\t\tmargin-bottom: var(--ck-spacing-large);\r\n\t\t\tbackground-position: center;\r\n\t\t\tbackground-size: cover;\r\n\r\n\t\t\t& .ck-icon {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t& .ck-media__placeholder__url__text {\r\n\t\t\tcolor: var(--ck-color-media-embed-placeholder-url-text);\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-style: italic;\r\n\t\t\ttext-overflow: ellipsis;\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: var(--ck-color-media-embed-placeholder-url-text-hover);\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&[data-oembed-url*="open.spotify.com"] {\r\n\t\tmax-width: 300px;\r\n\t\tmax-height: 380px;\r\n\t}\r\n\r\n\t&[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,\r\n\t&[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,\r\n\t&[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon,\r\n\t&[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon {\r\n\t\tbackground-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMCAwIDMuNzggMS42MWg0OS42MjFjMS42OTQgMCAzLjE5LS43OTggNC4xNDYtMi4wMzd6IiBmaWxsPSIjNWM4OGM1Ii8+PHBhdGggZD0iTTIyNi43NDIgMjIyLjk4OGMtOS4yNjYgMC0xNi43NzcgNy4xNy0xNi43NzcgMTYuMDE0LjAwNyAyLjc2Mi42NjMgNS40NzQgMi4wOTMgNy44NzUuNDMuNzAzLjgzIDEuNDA4IDEuMTkgMi4xMDcuMzMzLjUwMi42NSAxLjAwNS45NSAxLjUwOC4zNDMuNDc3LjY3My45NTcuOTg4IDEuNDQgMS4zMSAxLjc2OSAyLjUgMy41MDIgMy42MzcgNS4xNjguNzkzIDEuMjc1IDEuNjgzIDIuNjQgMi40NjYgMy45OSAyLjM2MyA0LjA5NCA0LjAwNyA4LjA5MiA0LjYgMTMuOTE0di4wMTJjLjE4Mi40MTIuNTE2LjY2Ni44NzkuNjY3LjQwMy0uMDAxLjc2OC0uMzE0LjkzLS43OTkuNjAzLTUuNzU2IDIuMjM4LTkuNzI5IDQuNTg1LTEzLjc5NC43ODItMS4zNSAxLjY3My0yLjcxNSAyLjQ2NS0zLjk5IDEuMTM3LTEuNjY2IDIuMzI4LTMuNCAzLjYzOC01LjE2OS4zMTUtLjQ4Mi42NDUtLjk2Mi45ODgtMS40MzkuMy0uNTAzLjYxNy0xLjAwNi45NS0xLjUwOC4zNTktLjcuNzYtMS40MDQgMS4xOS0yLjEwNyAxLjQyNi0yLjQwMiAyLTUuMTE0IDIuMDA0LTcuODc1IDAtOC44NDQtNy41MTEtMTYuMDE0LTE2Ljc3Ni0xNi4wMTR6IiBmaWxsPSIjZGQ0YjNlIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxlbGxpcHNlIHJ5PSI1LjU2NCIgcng9IjUuODI4IiBjeT0iMjM5LjAwMiIgY3g9IjIyNi43NDIiIGZpbGw9IiM4MDJkMjciIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTE5MC4zMDEgMjM3LjI4M2MtNC42NyAwLTguNDU3IDMuODUzLTguNDU3IDguNjA2czMuNzg2IDguNjA3IDguNDU3IDguNjA3YzMuMDQzIDAgNC44MDYtLjk1OCA2LjMzNy0yLjUxNiAxLjUzLTEuNTU3IDIuMDg3LTMuOTEzIDIuMDg3LTYuMjkgMC0uMzYyLS4wMjMtLjcyMi0uMDY0LTEuMDc5aC04LjI1N3YzLjA0M2g0Ljg1Yy0uMTk3Ljc1OS0uNTMxIDEuNDUtMS4wNTggMS45ODYtLjk0Mi45NTgtMi4wMjggMS41NDgtMy45MDEgMS41NDgtMi44NzYgMC01LjIwOC0yLjM3Mi01LjIwOC01LjI5OSAwLTIuOTI2IDIuMzMyLTUuMjk5IDUuMjA4LTUuMjk5IDEuMzk5IDAgMi42MTguNDA3IDMuNTg0IDEuMjkzbDIuMzgxLTIuMzhjMC0uMDAyLS4wMDMtLjAwNC0uMDA0LS4wMDUtMS41ODgtMS41MjQtMy42Mi0yLjIxNS01Ljk1NS0yLjIxNXptNC40MyA1LjY2bC4wMDMuMDA2di0uMDAzeiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjE1LjE4NCAyNTEuOTI5bC03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVjLjI4Ny0uNjQ5LjQ0OS0xLjM2Ni40NDktMi4xMjN2LTMxLjE2NWMtLjQ2OS42NzUtLjkzNCAxLjM0OS0xLjM4MiAyLjAwNS0uNzkyIDEuMjc1LTEuNjgyIDIuNjQtMi40NjUgMy45OS0yLjM0NyA0LjA2NS0zLjk4MiA4LjAzOC00LjU4NSAxMy43OTQtLjE2Mi40ODUtLjUyNy43OTgtLjkzLjc5OS0uMzYzLS4wMDEtLjY5Ny0uMjU1LS44NzktLjY2N3YtLjAxMmMtLjU5My01LjgyMi0yLjIzNy05LjgyLTQuNi0xMy45MTQtLjc4My0xLjM1LTEuNjczLTIuNzE1LTIuNDY2LTMuOTktMS4xMzctMS42NjYtMi4zMjctMy40LTMuNjM3LTUuMTY5bC0uMDAyLS4wMDN6IiBmaWxsPSIjYzNjM2MzIi8+PHBhdGggZD0iTTIxMi45ODMgMjQ4LjQ5NWwtMzYuOTUyIDM2Ljk1M3YuODEyYTUuMjI3IDUuMjI3IDAgMCAwIDUuMjM4IDUuMjM4aDEuMDE1bDM1LjY2Ni0zNS42NjZhMTM2LjI3NSAxMzYuMjc1IDAgMCAwLTIuNzY0LTMuOSAzNy41NzUgMzcuNTc1IDAgMCAwLS45ODktMS40NGMtLjI5OS0uNTAzLS42MTYtMS4wMDYtLjk1LTEuNTA4LS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjExLjk5OCAyNjEuMDgzbC02LjE1MiA2LjE1MSAyNC4yNjQgMjQuMjY0aC43ODFhNS4yMjcgNS4yMjcgMCAwIDAgNS4yMzktNS4yMzh2LTEuMDQ1eiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48L2c+PC9zdmc+);\r\n\t}\r\n\r\n\t&[data-oembed-url*="facebook.com"] .ck-media__placeholder {\r\n\t\tbackground: hsl(220, 46%, 48%);\r\n\r\n\t\t& .ck-media__placeholder__icon {\r\n\t\t\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9ImZMb2dvX1doaXRlIiBmaWxsPSIjRkZGRkZFIj4gICAgICAgICAgICA8cGF0aCBkPSJNOTY3LjQ4NCwwIEw1Ni41MTcsMCBDMjUuMzA0LDAgMCwyNS4zMDQgMCw1Ni41MTcgTDAsOTY3LjQ4MyBDMCw5OTguNjk0IDI1LjI5NywxMDI0IDU2LjUyMiwxMDI0IEw1NDcsMTAyNCBMNTQ3LDYyOCBMNDE0LDYyOCBMNDE0LDQ3MyBMNTQ3LDQ3MyBMNTQ3LDM1OS4wMjkgQzU0NywyMjYuNzY3IDYyNy43NzMsMTU0Ljc0NyA3NDUuNzU2LDE1NC43NDcgQzgwMi4yNjksMTU0Ljc0NyA4NTAuODQyLDE1OC45NTUgODY1LDE2MC44MzYgTDg2NSwyOTkgTDc4My4zODQsMjk5LjAzNyBDNzE5LjM5MSwyOTkuMDM3IDcwNywzMjkuNTI5IDcwNywzNzQuMjczIEw3MDcsNDczIEw4NjAuNDg3LDQ3MyBMODQwLjUwMSw2MjggTDcwNyw2MjggTDcwNywxMDI0IEw5NjcuNDg0LDEwMjQgQzk5OC42OTcsMTAyNCAxMDI0LDk5OC42OTcgMTAyNCw5NjcuNDg0IEwxMDI0LDU2LjUxNSBDMTAyNCwyNS4zMDMgOTk4LjY5NywwIDk2Ny40ODQsMCIgaWQ9IkZpbGwtMSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);\r\n\t\t}\r\n\r\n\t\t& .ck-media__placeholder__url__text {\r\n\t\t\tcolor: hsl(220, 100%, 90%);\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: hsl(0, 0%, 100%);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&[data-oembed-url*="instagram.com"] .ck-media__placeholder {\r\n\t\tbackground: linear-gradient(-135deg,hsl(246, 100%, 39%),hsl(302, 100%, 36%),hsl(0, 100%, 48%));\r\n\r\n\t\t& .ck-media__placeholder__icon {\r\n\t\t\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI1MDRweCIgaGVpZ2h0PSI1MDRweCIgdmlld0JveD0iMCAwIDUwNCA1MDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Z2x5cGgtbG9nb19NYXkyMDE2PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMSIgcG9pbnRzPSIwIDAuMTU5IDUwMy44NDEgMC4xNTkgNTAzLjg0MSA1MDMuOTQgMCA1MDMuOTQiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iZ2x5cGgtbG9nb19NYXkyMDE2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJHcm91cC0zIj4gICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4gICAgICAgICAgICA8cGF0aCBkPSJNMjUxLjkyMSwwLjE1OSBDMTgzLjUwMywwLjE1OSAxNzQuOTI0LDAuNDQ5IDE0OC4wNTQsMS42NzUgQzEyMS4yNCwyLjg5OCAxMDIuOTI3LDcuMTU3IDg2LjkwMywxMy4zODUgQzcwLjMzNywxOS44MjIgNTYuMjg4LDI4LjQzNiA0Mi4yODIsNDIuNDQxIEMyOC4yNzcsNTYuNDQ3IDE5LjY2Myw3MC40OTYgMTMuMjI2LDg3LjA2MiBDNi45OTgsMTAzLjA4NiAyLjczOSwxMjEuMzk5IDEuNTE2LDE0OC4yMTMgQzAuMjksMTc1LjA4MyAwLDE4My42NjIgMCwyNTIuMDggQzAsMzIwLjQ5NyAwLjI5LDMyOS4wNzYgMS41MTYsMzU1Ljk0NiBDMi43MzksMzgyLjc2IDYuOTk4LDQwMS4wNzMgMTMuMjI2LDQxNy4wOTcgQzE5LjY2Myw0MzMuNjYzIDI4LjI3Nyw0NDcuNzEyIDQyLjI4Miw0NjEuNzE4IEM1Ni4yODgsNDc1LjcyMyA3MC4zMzcsNDg0LjMzNyA4Ni45MDMsNDkwLjc3NSBDMTAyLjkyNyw0OTcuMDAyIDEyMS4yNCw1MDEuMjYxIDE0OC4wNTQsNTAyLjQ4NCBDMTc0LjkyNCw1MDMuNzEgMTgzLjUwMyw1MDQgMjUxLjkyMSw1MDQgQzMyMC4zMzgsNTA0IDMyOC45MTcsNTAzLjcxIDM1NS43ODcsNTAyLjQ4NCBDMzgyLjYwMSw1MDEuMjYxIDQwMC45MTQsNDk3LjAwMiA0MTYuOTM4LDQ5MC43NzUgQzQzMy41MDQsNDg0LjMzNyA0NDcuNTUzLDQ3NS43MjMgNDYxLjU1OSw0NjEuNzE4IEM0NzUuNTY0LDQ0Ny43MTIgNDg0LjE3OCw0MzMuNjYzIDQ5MC42MTYsNDE3LjA5NyBDNDk2Ljg0Myw0MDEuMDczIDUwMS4xMDIsMzgyLjc2IDUwMi4zMjUsMzU1Ljk0NiBDNTAzLjU1MSwzMjkuMDc2IDUwMy44NDEsMzIwLjQ5NyA1MDMuODQxLDI1Mi4wOCBDNTAzLjg0MSwxODMuNjYyIDUwMy41NTEsMTc1LjA4MyA1MDIuMzI1LDE0OC4yMTMgQzUwMS4xMDIsMTIxLjM5OSA0OTYuODQzLDEwMy4wODYgNDkwLjYxNiw4Ny4wNjIgQzQ4NC4xNzgsNzAuNDk2IDQ3NS41NjQsNTYuNDQ3IDQ2MS41NTksNDIuNDQxIEM0NDcuNTUzLDI4LjQzNiA0MzMuNTA0LDE5LjgyMiA0MTYuOTM4LDEzLjM4NSBDNDAwLjkxNCw3LjE1NyAzODIuNjAxLDIuODk4IDM1NS43ODcsMS42NzUgQzMyOC45MTcsMC40NDkgMzIwLjMzOCwwLjE1OSAyNTEuOTIxLDAuMTU5IFogTTI1MS45MjEsNDUuNTUgQzMxOS4xODYsNDUuNTUgMzI3LjE1NCw0NS44MDcgMzUzLjcxOCw0Ny4wMTkgQzM3OC4yOCw0OC4xMzkgMzkxLjYxOSw1Mi4yNDMgNDAwLjQ5Niw1NS42OTMgQzQxMi4yNTUsNjAuMjYzIDQyMC42NDcsNjUuNzIyIDQyOS40NjIsNzQuNTM4IEM0MzguMjc4LDgzLjM1MyA0NDMuNzM3LDkxLjc0NSA0NDguMzA3LDEwMy41MDQgQzQ1MS43NTcsMTEyLjM4MSA0NTUuODYxLDEyNS43MiA0NTYuOTgxLDE1MC4yODIgQzQ1OC4xOTMsMTc2Ljg0NiA0NTguNDUsMTg0LjgxNCA0NTguNDUsMjUyLjA4IEM0NTguNDUsMzE5LjM0NSA0NTguMTkzLDMyNy4zMTMgNDU2Ljk4MSwzNTMuODc3IEM0NTUuODYxLDM3OC40MzkgNDUxLjc1NywzOTEuNzc4IDQ0OC4zMDcsNDAwLjY1NSBDNDQzLjczNyw0MTIuNDE0IDQzOC4yNzgsNDIwLjgwNiA0MjkuNDYyLDQyOS42MjEgQzQyMC42NDcsNDM4LjQzNyA0MTIuMjU1LDQ0My44OTYgNDAwLjQ5Niw0NDguNDY2IEMzOTEuNjE5LDQ1MS45MTYgMzc4LjI4LDQ1Ni4wMiAzNTMuNzE4LDQ1Ny4xNCBDMzI3LjE1OCw0NTguMzUyIDMxOS4xOTEsNDU4LjYwOSAyNTEuOTIxLDQ1OC42MDkgQzE4NC42NSw0NTguNjA5IDE3Ni42ODQsNDU4LjM1MiAxNTAuMTIzLDQ1Ny4xNCBDMTI1LjU2MSw0NTYuMDIgMTEyLjIyMiw0NTEuOTE2IDEwMy4zNDUsNDQ4LjQ2NiBDOTEuNTg2LDQ0My44OTYgODMuMTk0LDQzOC40MzcgNzQuMzc5LDQyOS42MjEgQzY1LjU2NCw0MjAuODA2IDYwLjEwNCw0MTIuNDE0IDU1LjUzNCw0MDAuNjU1IEM1Mi4wODQsMzkxLjc3OCA0Ny45OCwzNzguNDM5IDQ2Ljg2LDM1My44NzcgQzQ1LjY0OCwzMjcuMzEzIDQ1LjM5MSwzMTkuMzQ1IDQ1LjM5MSwyNTIuMDggQzQ1LjM5MSwxODQuODE0IDQ1LjY0OCwxNzYuODQ2IDQ2Ljg2LDE1MC4yODIgQzQ3Ljk4LDEyNS43MiA1Mi4wODQsMTEyLjM4MSA1NS41MzQsMTAzLjUwNCBDNjAuMTA0LDkxLjc0NSA2NS41NjMsODMuMzUzIDc0LjM3OSw3NC41MzggQzgzLjE5NCw2NS43MjIgOTEuNTg2LDYwLjI2MyAxMDMuMzQ1LDU1LjY5MyBDMTEyLjIyMiw1Mi4yNDMgMTI1LjU2MSw0OC4xMzkgMTUwLjEyMyw0Ny4wMTkgQzE3Ni42ODcsNDUuODA3IDE4NC42NTUsNDUuNTUgMjUxLjkyMSw0NS41NSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgICAgIDxwYXRoIGQ9Ik0yNTEuOTIxLDMzNi4wNTMgQzIwNS41NDMsMzM2LjA1MyAxNjcuOTQ3LDI5OC40NTcgMTY3Ljk0NywyNTIuMDggQzE2Ny45NDcsMjA1LjcwMiAyMDUuNTQzLDE2OC4xMDYgMjUxLjkyMSwxNjguMTA2IEMyOTguMjk4LDE2OC4xMDYgMzM1Ljg5NCwyMDUuNzAyIDMzNS44OTQsMjUyLjA4IEMzMzUuODk0LDI5OC40NTcgMjk4LjI5OCwzMzYuMDUzIDI1MS45MjEsMzM2LjA1MyBaIE0yNTEuOTIxLDEyMi43MTUgQzE4MC40NzQsMTIyLjcxNSAxMjIuNTU2LDE4MC42MzMgMTIyLjU1NiwyNTIuMDggQzEyMi41NTYsMzIzLjUyNiAxODAuNDc0LDM4MS40NDQgMjUxLjkyMSwzODEuNDQ0IEMzMjMuMzY3LDM4MS40NDQgMzgxLjI4NSwzMjMuNTI2IDM4MS4yODUsMjUyLjA4IEMzODEuMjg1LDE4MC42MzMgMzIzLjM2NywxMjIuNzE1IDI1MS45MjEsMTIyLjcxNSBaIiBpZD0iRmlsbC00IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgICAgICA8cGF0aCBkPSJNNDE2LjYyNywxMTcuNjA0IEM0MTYuNjI3LDEzNC4zIDQwMy4wOTIsMTQ3LjgzNCAzODYuMzk2LDE0Ny44MzQgQzM2OS43MDEsMTQ3LjgzNCAzNTYuMTY2LDEzNC4zIDM1Ni4xNjYsMTE3LjYwNCBDMzU2LjE2NiwxMDAuOTA4IDM2OS43MDEsODcuMzczIDM4Ni4zOTYsODcuMzczIEM0MDMuMDkyLDg3LjM3MyA0MTYuNjI3LDEwMC45MDggNDE2LjYyNywxMTcuNjA0IiBpZD0iRmlsbC01IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgIDwvZz48L3N2Zz4=);\r\n\t\t}\r\n\r\n\t\t/* stylelint-disable-next-line no-descending-specificity */\r\n\t\t& .ck-media__placeholder__url__text {\r\n\t\t\tcolor: hsl(302, 100%, 94%);\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: hsl(0, 0%, 100%);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder {\r\n\t\t/* Use gradient to contrast with focused widget (ckeditor/ckeditor5-media-embed#22). */\r\n\t\tbackground: linear-gradient( to right, hsl(201, 85%, 70%), hsl(201, 85%, 35%) );\r\n\r\n\t\t& .ck-media__placeholder__icon {\r\n\t\t\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IldoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwMCA0MDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMjAwYzAsMTEwLjUtODkuNSwyMDAtMjAwLDIwMFMwLDMxMC41LDAsMjAwUzg5LjUsMCwyMDAsMFM0MDAsODkuNSw0MDAsMjAweiBNMTYzLjQsMzA1LjVjODguNywwLDEzNy4yLTczLjUsMTM3LjItMTM3LjJjMC0yLjEsMC00LjItMC4xLTYuMmM5LjQtNi44LDE3LjYtMTUuMywyNC4xLTI1Yy04LjYsMy44LTE3LjksNi40LTI3LjcsNy42YzEwLTYsMTcuNi0xNS40LDIxLjItMjYuN2MtOS4zLDUuNS0xOS42LDkuNS0zMC42LDExLjdjLTguOC05LjQtMjEuMy0xNS4yLTM1LjItMTUuMmMtMjYuNiwwLTQ4LjIsMjEuNi00OC4yLDQ4LjJjMCwzLjgsMC40LDcuNSwxLjMsMTFjLTQwLjEtMi03NS42LTIxLjItOTkuNC01MC40Yy00LjEsNy4xLTYuNSwxNS40LTYuNSwyNC4yYzAsMTYuNyw4LjUsMzEuNSwyMS41LDQwLjFjLTcuOS0wLjItMTUuMy0yLjQtMjEuOC02YzAsMC4yLDAsMC40LDAsMC42YzAsMjMuNCwxNi42LDQyLjgsMzguNyw0Ny4zYy00LDEuMS04LjMsMS43LTEyLjcsMS43Yy0zLjEsMC02LjEtMC4zLTkuMS0wLjljNi4xLDE5LjIsMjMuOSwzMy4xLDQ1LDMzLjVjLTE2LjUsMTIuOS0zNy4zLDIwLjYtNTkuOSwyMC42Yy0zLjksMC03LjctMC4yLTExLjUtMC43QzExMC44LDI5Ny41LDEzNi4yLDMwNS41LDE2My40LDMwNS41Ii8+PC9zdmc+);\r\n\t\t}\r\n\r\n\t\t& .ck-media__placeholder__url__text {\r\n\t\t\tcolor: hsl(201, 100%, 86%);\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: hsl(0, 0%, 100%);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},9292:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-media-form{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}","",{version:3,sources:["webpack://./../ckeditor5-media-embed/theme/mediaform.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAOA,kBAEC,sBAAuB,CADvB,YAAa,CAEb,kBAAmB,CACnB,gBAqBD,CAnBC,yCACC,oBACD,CAEA,4BACC,YACD,CCbA,oCDCD,kBAeE,cAUF,CARE,yCACC,eACD,CAEA,6BACC,cACD,CCtBD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-media-form {\r\n\tdisplay: flex;\r\n\talign-items: flex-start;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\r\n\t& .ck-labeled-field-view {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n\r\n\t& .ck-label {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t& .ck-labeled-field-view {\r\n\t\t\tflex-basis: 100%;\r\n\t\t}\r\n\r\n\t\t& .ck-button {\r\n\t\t\tflex-basis: 50%;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},1706:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-mention-background:rgba(153,0,48,.1);--ck-color-mention-text:#990030}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-mention/mention.css"],names:[],mappings:"AAKA,MACC,+CAAwD,CACxD,+BACD,CAEA,qBACC,6CAA8C,CAC9C,kCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-mention-background: hsla(341, 100%, 30%, 0.1);\r\n\t--ck-color-mention-text: hsl(341, 100%, 30%);\r\n}\r\n\r\n.ck-content .mention {\r\n\tbackground: var(--ck-color-mention-background);\r\n\tcolor: var(--ck-color-mention-text);\r\n}\r\n"],sourceRoot:""}]);const a=s},4303:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-mention-list-max-height:300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{flex-shrink:0;overflow:hidden}","",{version:3,sources:["webpack://./../ckeditor5-mention/theme/mentionui.css"],names:[],mappings:"AAKA,MACC,kCACD,CAEA,gBACC,4CAA6C,CAM7C,iBAAkB,CAJlB,eAAgB,CAMhB,2BAQD,CAJC,+BAEC,aAAc,CADd,eAED",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-mention-list-max-height: 300px;\r\n}\r\n\r\n.ck.ck-mentions {\r\n\tmax-height: var(--ck-mention-list-max-height);\r\n\r\n\toverflow-y: auto;\r\n\r\n\t/* Prevent unnecessary horizontal scrollbar in Safari\r\n\thttps://github.com/ckeditor/ckeditor5-mention/issues/41 */\r\n\toverflow-x: hidden;\r\n\r\n\toverscroll-behavior: contain;\r\n\r\n\t/* Prevent unnecessary vertical scrollbar in Safari\r\n\thttps://github.com/ckeditor/ckeditor5-mention/issues/41 */\r\n\t& > .ck-list__item {\r\n\t\toverflow: hidden;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},9537:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-mermaid__wrapper{display:flex;justify-content:center}.ck-mermaid__wrapper .ck-mermaid__editing-view{background-color:hsla(0,0%,78%,.3);border:0;font-size:12px;min-height:200px;outline:0;padding:16px;resize:vertical}.ck-mermaid__preview,[id^=dmermaid-]{display:flex;justify-content:center}[id^=dmermaid-]{align-items:center;height:100%}[id^=dmermaid-] svg{display:block;height:auto;width:60%}.ck-mermaid__source-mode .ck-mermaid__editing-view{width:100%}.ck-mermaid__source-mode .ck-mermaid__preview{display:none}.ck-mermaid__split-mode .ck-mermaid__editing-view,.ck-mermaid__split-mode .ck-mermaid__preview{width:50%}.ck-mermaid__preview-mode .ck-mermaid__editing-view{display:none}","",{version:3,sources:["webpack://./../ckeditor5-mermaid/theme/mermaid.css"],names:[],mappings:"AACA,qBACC,YAAa,CACb,sBACD,CAKA,+CAEC,kCAAuC,CAEvC,QAAS,CAET,cAAe,CAHf,gBAAiB,CAIjB,SAAU,CANV,YAAa,CAIb,eAGD,CASA,qCALC,YAAa,CACb,sBASD,CALA,gBAEC,kBAAmB,CACnB,WAED,CAEA,oBACC,aAAc,CAEd,WAAY,CADZ,SAED,CAGA,mDACC,UACD,CAEA,8CACC,YACD,CAOA,+FACC,SACD,CAGA,oDACC,YACD",sourcesContent:['/* Mermaid wrapper */\r\n.ck-mermaid__wrapper {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n}\r\n\r\n/* Editing\r\n Assigned to textarea\r\n */\r\n.ck-mermaid__wrapper .ck-mermaid__editing-view {\r\n\tpadding: 16px; /* just like pre element */\r\n\tbackground-color: hsla(0, 0%, 78%, 0.3); /* just like pre element */\r\n\tmin-height: 200px;\r\n\tborder: 0;\r\n\tresize: vertical;\r\n\tfont-size: 12px; /* just like pre element */\r\n\toutline: 0; /* just like pre element */\r\n}\r\n\r\n/* Preview */\r\n.ck-mermaid__preview {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n}\r\n\r\n/* Preview error state */\r\n[id^="dmermaid-"] {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\theight: 100%;\r\n\tjustify-content: center;\r\n}\r\n\r\n[id^="dmermaid-"] svg {\r\n\tdisplay: block;\r\n\twidth: 60%;\r\n\theight: auto;\r\n}\r\n\r\n/* Source mode */\r\n.ck-mermaid__source-mode .ck-mermaid__editing-view {\r\n\twidth: 100%;\r\n}\r\n\r\n.ck-mermaid__source-mode .ck-mermaid__preview {\r\n\tdisplay: none;\r\n}\r\n\r\n/* Split mode */\r\n.ck-mermaid__split-mode .ck-mermaid__editing-view {\r\n\twidth: 50%;\r\n}\r\n\r\n.ck-mermaid__split-mode .ck-mermaid__preview {\r\n\twidth: 50%;\r\n}\r\n\r\n/* Preview mode */\r\n.ck-mermaid__preview-mode .ck-mermaid__editing-view {\r\n\tdisplay: none;\r\n}'],sourceRoot:""}]);const a=s},2403:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck-content .page-break{align-items:center;clear:both;display:flex;justify-content:center;padding:5px 0;position:relative}.ck-content .page-break:after{border-bottom:2px dashed #c4c4c4;content:"";position:absolute;width:100%}.ck-content .page-break__label{background:#fff;border:1px solid #c4c4c4;border-radius:2px;box-shadow:2px 2px 1px rgba(0,0,0,.15);color:#333;display:block;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;padding:.3em .6em;position:relative;text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}}',"",{version:3,sources:["webpack://./../ckeditor5-page-break/theme/pagebreak.css"],names:[],mappings:"AAKA,wBAKC,kBAAmB,CAHnB,UAAW,CAEX,YAAa,CAEb,sBAAuB,CAHvB,aAAc,CAFd,iBAaD,CANC,8BAGC,gCAAyC,CAFzC,UAAW,CACX,iBAAkB,CAElB,UACD,CAGD,+BAYC,eAA4B,CAN5B,wBAAiC,CACjC,iBAAkB,CAMlB,sCAA6C,CAF7C,UAAsB,CAPtB,aAAc,CAId,qDAA0D,CAC1D,eAAiB,CACjB,eAAiB,CAPjB,iBAAkB,CAFlB,iBAAkB,CAIlB,wBAAyB,CAWzB,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CAjBjB,SAkBD,CAGA,aACC,wBACC,SAKD,CAHC,8BACC,YACD,CAEF",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content .page-break {\r\n\tposition: relative;\r\n\tclear: both;\r\n\tpadding: 5px 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\r\n\t&::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tborder-bottom: 2px dashed hsl(0, 0%, 77%);\r\n\t\twidth: 100%;\r\n\t}\r\n}\r\n\r\n.ck-content .page-break__label {\r\n\tposition: relative;\r\n\tz-index: 1;\r\n\tpadding: .3em .6em;\r\n\tdisplay: block;\r\n\ttext-transform: uppercase;\r\n\tborder: 1px solid hsl(0, 0%, 77%);\r\n\tborder-radius: 2px;\r\n\tfont-family: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\r\n\tfont-size: 0.75em;\r\n\tfont-weight: bold;\r\n\tcolor: hsl(0, 0%, 20%);\r\n\tbackground: hsl(0, 0%, 100%);\r\n\tbox-shadow: 2px 2px 1px hsla(0, 0%, 0%, 0.15);\r\n\r\n\t/* Disable the possibility to select the label text by the user. */\r\n\t-webkit-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n}\r\n\r\n/* Do not show the page break element inside the print preview window. */\r\n@media print {\r\n\t.ck-content .page-break {\r\n\t\tpadding: 0;\r\n\r\n\t\t&::after {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4044:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-restricted-editing-exception-background:rgba(255,169,77,.2);--ck-color-restricted-editing-exception-hover-background:rgba(255,169,77,.35);--ck-color-restricted-editing-exception-brackets:rgba(204,105,0,.4);--ck-color-restricted-editing-selected-exception-background:rgba(255,169,77,.5);--ck-color-restricted-editing-selected-exception-brackets:rgba(204,105,0,.6)}.ck-editor__editable .restricted-editing-exception{background-color:var(--ck-color-restricted-editing-exception-background);border:1px solid;border-image:linear-gradient(to right,var(--ck-color-restricted-editing-exception-brackets) 0,var(--ck-color-restricted-editing-exception-brackets) 5px,transparent 6px,transparent calc(100% - 6px),var(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-exception-brackets) 100%) 1;transition:background .2s ease-in-out}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected{background-color:var(--ck-color-restricted-editing-selected-exception-background);border-image:linear-gradient(to right,var(--ck-color-restricted-editing-selected-exception-brackets) 0,var(--ck-color-restricted-editing-selected-exception-brackets) 5px,var(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-selected-exception-brackets) 100%) 1}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed{padding-left:1ch}.ck-restricted-editing_mode_restricted,.ck-restricted-editing_mode_restricted *{cursor:default}.ck-restricted-editing_mode_restricted .restricted-editing-exception,.ck-restricted-editing_mode_restricted .restricted-editing-exception *{cursor:text}.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover{background:var(--ck-color-restricted-editing-exception-hover-background)}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-restricted-editing/restrictedediting.css"],names:[],mappings:"AAKA,MACC,sEAA2E,CAC3E,6EAAkF,CAClF,mEAAyE,CACzE,+EAAoF,CACpF,4EACD,CAEA,mDAEC,wEAAyE,CACzE,gBAAiB,CACjB,yUAQG,CAXH,qCA4BD,CAfC,yFACC,iFAAkF,CAClF,gUAOD,CAEA,0FAEC,gBACD,CAQA,gFACC,cACD,CAKC,4IACC,WACD,CAEA,2EACC,wEACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-restricted-editing-exception-background: hsla(31, 100%, 65%, .2);\r\n\t--ck-color-restricted-editing-exception-hover-background: hsla(31, 100%, 65%, .35);\r\n\t--ck-color-restricted-editing-exception-brackets: hsla(31, 100%, 40%, .4);\r\n\t--ck-color-restricted-editing-selected-exception-background: hsla(31, 100%, 65%, .5);\r\n\t--ck-color-restricted-editing-selected-exception-brackets: hsla(31, 100%, 40%, .6);\r\n}\r\n\r\n.ck-editor__editable .restricted-editing-exception {\r\n\ttransition: .2s ease-in-out background;\r\n\tbackground-color: var(--ck-color-restricted-editing-exception-background);\r\n\tborder: 1px solid;\r\n\tborder-image: linear-gradient(\r\n\t\tto right,\r\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 0%,\r\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 5px,\r\n\t\thsla(0, 0%, 0%, 0) 6px,\r\n\t\thsla(0, 0%, 0%, 0) calc(100% - 6px),\r\n\t\tvar(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),\r\n\t\tvar(--ck-color-restricted-editing-exception-brackets) 100%\r\n\t) 1;\r\n\r\n\t&.restricted-editing-exception_selected {\r\n\t\tbackground-color: var(--ck-color-restricted-editing-selected-exception-background);\r\n\t\tborder-image: linear-gradient(\r\n\t\t\tto right,\r\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 0%,\r\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 5px,\r\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),\r\n\t\t\tvar(--ck-color-restricted-editing-selected-exception-brackets) 100%\r\n\t\t) 1;\r\n\t}\r\n\r\n\t&.restricted-editing-exception_collapsed {\r\n\t\t/* Empty exception should have the same width as exception with at least 1 char */\r\n\t\tpadding-left: 1ch;\r\n\t}\r\n}\r\n\r\n.ck-restricted-editing_mode_restricted {\r\n\tcursor: default;\r\n\r\n\t/* We also have to override all elements inside the restricted editable to prevent cursor switching between default and text\r\n\tduring the pointer movement. */\r\n\t& * {\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t& .restricted-editing-exception {\r\n\t\tcursor: text;\r\n\r\n\t\t& * {\r\n\t\t\tcursor: text;\r\n\t\t}\r\n\r\n\t\t&:hover {\r\n\t\t\tbackground: var(--ck-color-restricted-editing-exception-hover-background);\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},2896:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck-source-editing-area{overflow:hidden;position:relative}.ck-source-editing-area textarea,.ck-source-editing-area:after{border:1px solid transparent;font-family:monospace;font-size:var(--ck-font-size-normal);line-height:var(--ck-line-height-base);margin:0;padding:var(--ck-spacing-large);white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) " ";display:block;visibility:hidden}.ck-source-editing-area textarea{border-color:var(--ck-color-base-border);border-radius:0;box-sizing:border-box;height:100%;outline:none;overflow:hidden;position:absolute;resize:none;width:100%}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}',"",{version:3,sources:["webpack://./../ckeditor5-source-editing/theme/sourceediting.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AASA,wBAEC,eAAgB,CADhB,iBAED,CAEA,+DAIC,4BAA6B,CAG7B,qBAAsB,CADtB,oCAAqC,CADrC,sCAAuC,CAFvC,QAAS,CADT,+BAAgC,CAMhC,oBACD,CAEA,8BACC,4BAA6B,CAE7B,aAAc,CADd,iBAED,CAEA,iCASC,wCAAyC,CC7BzC,eAAgB,CD2BhB,qBAAsB,CAJtB,WAAY,CAEZ,YAAa,CACb,eAAgB,CALhB,iBAAkB,CAGlB,WAAY,CAFZ,UAkBD,CApBA,yGChBE,qCAAsC,CD4BtC,wBAAyB,CACzB,yBAOF,CAJC,uDEpCA,2BAA2B,CCF3B,qCAA8B,CDC9B,YFwCA",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css";\r\n@import "@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css";\r\n@import "@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css";\r\n\r\n.ck-source-editing-area {\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n}\r\n\r\n.ck-source-editing-area::after,\r\n.ck-source-editing-area textarea {\r\n\tpadding: var(--ck-spacing-large);\r\n\tmargin: 0;\r\n\tborder: 1px solid transparent;\r\n\tline-height: var(--ck-line-height-base);\r\n\tfont-size: var(--ck-font-size-normal);\r\n\tfont-family: monospace;\r\n\twhite-space: pre-wrap;\r\n}\r\n\r\n.ck-source-editing-area::after {\r\n\tcontent: attr(data-value) " ";\r\n\tvisibility: hidden;\r\n\tdisplay: block;\r\n}\r\n\r\n.ck-source-editing-area textarea {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tresize: none;\r\n\toutline: none;\r\n\toverflow: hidden;\r\n\tbox-sizing: border-box;\r\n\r\n\tborder-color: var(--ck-color-base-border);\r\n\r\n\t@mixin ck-rounded-corners {\r\n\t\tborder-top-left-radius: 0;\r\n\t\tborder-top-right-radius: 0;\r\n\t}\r\n\r\n\t&:not([readonly]):focus {\r\n\t\t@mixin ck-focus-ring;\r\n\t\t@mixin ck-box-shadow var(--ck-inner-shadow);\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A visual style of focused element's border.\r\n */\r\n@define-mixin ck-focus-ring {\r\n\t/* Disable native outline. */\r\n\toutline: none;\r\n\tborder: var(--ck-focus-ring)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},5600:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}:root{--ck-character-grid-tile-size:24px}.ck.ck-character-grid{max-height:200px;overflow-x:hidden;overflow-y:auto;width:350px}@media screen and (max-width:600px){.ck.ck-character-grid{width:190px}}.ck.ck-character-grid .ck-character-grid__tiles{grid-gap:var(--ck-spacing-standard);grid-template-columns:repeat(10,1fr);margin:var(--ck-spacing-standard) var(--ck-spacing-large)}@media screen and (max-width:600px){.ck.ck-character-grid .ck-character-grid__tiles{grid-template-columns:repeat(5,1fr)}}.ck.ck-character-grid .ck-character-grid__tile{border:0;font-size:1.2em;height:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-character-grid-tile-size)}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);text-align:center;width:100%}","",{version:3,sources:["webpack://./../ckeditor5-special-characters/theme/charactergrid.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-special-characters/charactergrid.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAKA,sBACC,cAKD,CAHC,gDACC,YACD,CCFD,MACC,kCACD,CAEA,sBAIC,gBAAiB,CAFjB,iBAAkB,CADlB,eAAgB,CAEhB,WAyCD,CClDC,oCDMD,sBAOE,WAqCF,CChDC,CDcA,gDAGC,mCAAoC,CAFpC,oCAAsC,CACtC,yDAMD,CCxBA,oCDgBA,gDAME,mCAEF,CCtBA,CDwBA,+CAQC,QAAS,CAHT,eAAgB,CAHhB,yCAA0C,CAE1C,6CAA8C,CAD9C,4CAA6C,CAG7C,SAAU,CACV,8BAA+B,CAN/B,wCAsBD,CAbC,8IAGC,QAAS,CACT,iGACD,CAGA,iEACC,8CAA+C,CAE/C,iBAAkB,CADlB,UAED",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-character-grid {\r\n\tmax-width: 100%;\r\n\t\r\n\t& .ck-character-grid__tiles {\r\n\t\tdisplay: grid;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n@import "../mixins/_rounded.css";\r\n\r\n:root {\r\n\t--ck-character-grid-tile-size: 24px;\r\n}\r\n\r\n.ck.ck-character-grid {\r\n\toverflow-y: auto;\r\n\toverflow-x: hidden;\r\n\twidth: 350px;\r\n\tmax-height: 200px;\r\n\r\n\t@mixin ck-media-phone {\r\n\t\twidth: 190px;\r\n\t}\r\n\r\n\t& .ck-character-grid__tiles {\r\n\t\tgrid-template-columns: repeat(10, 1fr);\r\n\t\tmargin: var(--ck-spacing-standard) var(--ck-spacing-large);\r\n\t\tgrid-gap: var(--ck-spacing-standard);\r\n\r\n\t\t@mixin ck-media-phone {\r\n\t\t\tgrid-template-columns: repeat(5, 1fr);\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-character-grid__tile {\r\n\t\twidth: var(--ck-character-grid-tile-size);\r\n\t\theight: var(--ck-character-grid-tile-size);\r\n\t\tmin-width: var(--ck-character-grid-tile-size);\r\n\t\tmin-height: var(--ck-character-grid-tile-size);\r\n\t\tfont-size: 1.2em;\r\n\t\tpadding: 0;\r\n\t\ttransition: .2s ease box-shadow;\r\n\t\tborder: 0;\r\n\r\n\t\t&:focus:not( .ck-disabled ),\r\n\t\t&:hover:not( .ck-disabled ) {\r\n\t\t\t/* Disable the default .ck-button\'s border ring. */\r\n\t\t\tborder: 0;\r\n\t\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\r\n\t\t}\r\n\r\n\t\t/* Make sure the glyph is rendered in the center of the button */\r\n\t\t& .ck-button__label {\r\n\t\t\tline-height: var(--ck-character-grid-tile-size);\r\n\t\t\twidth: 100%;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},9062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-character-info{border-top:1px solid var(--ck-color-base-border);display:flex;justify-content:space-between;padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-character-info>*{font-size:var(--ck-font-size-small);text-transform:uppercase}.ck.ck-character-info .ck-character-info__name{max-width:280px;overflow:hidden;text-overflow:ellipsis}.ck.ck-character-info .ck-character-info__code{opacity:.6}@media screen and (max-width:600px){.ck.ck-character-info{max-width:190px}}","",{version:3,sources:["webpack://./../ckeditor5-special-characters/theme/characterinfo.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-special-characters/characterinfo.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAKA,sBCIC,gDAAiD,CDHjD,YAAa,CACb,6BAA8B,CCC9B,uDDAD,CCGC,wBAEC,mCAAoC,CADpC,wBAED,CAEA,+CACC,eAAgB,CAEhB,eAAgB,CADhB,sBAED,CAEA,+CACC,UACD,CClBA,oCDCD,sBAoBE,eAEF,CCrBC",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-character-info {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-character-info {\r\n\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\r\n\tborder-top: 1px solid var(--ck-color-base-border);\r\n\r\n\t& > * {\r\n\t\ttext-transform: uppercase;\r\n\t\tfont-size: var(--ck-font-size-small);\r\n\t}\r\n\r\n\t& .ck-character-info__name {\r\n\t\tmax-width: 280px;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t& .ck-character-info__code {\r\n\t\topacity: .6;\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tmax-width: 190px;\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},2117:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-special-characters-navigation>.ck-label{max-width:160px;overflow:hidden;text-overflow:ellipsis}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}@media screen and (max-width:600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{overflow:hidden;text-overflow:ellipsis}}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-special-characters/specialcharacters.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css"],names:[],mappings:"AAUC,+CACC,eAAgB,CAEhB,eAAgB,CADhB,sBAED,CAEA,sEAEC,gBAAiB,CAEjB,iBAAkB,CADlB,eAED,CCfA,oCDED,qCAgBE,eAOF,CALE,6DAEC,eAAgB,CADhB,sBAED,CCrBD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck.ck-special-characters-navigation {\r\n\r\n\t& > .ck-label {\r\n\t\tmax-width: 160px;\r\n\t\ttext-overflow: ellipsis;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t& > .ck-dropdown .ck-dropdown__panel {\r\n\t\t/* There could be dozens of categories available. Use scroll to prevent a 10e6px dropdown. */\r\n\t\tmax-height: 250px;\r\n\t\toverflow-y: auto;\r\n\t\toverflow-x: hidden;\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tmax-width: 190px;\r\n\r\n\t\t& > .ck-form__header__label {\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},8920:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-style/style.css"],names:[],mappings:"AAKA,iGACC,iBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active > .ck-button > .ck-button__label {\r\n\tfont-style: italic;\r\n}\r\n"],sourceRoot:""}]);const a=s},9758:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-style-panel-columns:3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;flex-direction:column;justify-content:space-between}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{align-content:center;align-items:center;display:flex;flex-basis:100%;flex-grow:1;justify-content:flex-start}:root{--ck-style-panel-button-width:120px;--ck-style-panel-button-height:80px;--ck-style-panel-button-label-background:#f0f0f0;--ck-style-panel-button-hover-label-background:#ebebeb;--ck-style-panel-button-hover-border-color:#b3b3b3}.ck.ck-style-panel .ck-style-grid{column-gap:var(--ck-spacing-large);row-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background:var(--ck-color-base-background);--ck-color-button-default-active-background:var(--ck-color-base-background);height:var(--ck-style-panel-button-height);padding:0;width:var(--ck-style-panel-button-width)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{flex-shrink:0;height:22px;line-height:22px;overflow:hidden;padding:0 var(--ck-spacing-medium);text-overflow:ellipsis;width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background);opacity:.9;overflow:hidden;padding:var(--ck-spacing-medium);width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background:var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{border-color:var(--ck-color-base-foreground);filter:saturate(.3);opacity:.4}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}","",{version:3,sources:["webpack://./../ckeditor5-style/theme/stylegrid.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-style/stylegrid.css"],names:[],mappings:"AAKA,MACC,0BACD,CAEA,kCACC,YAAa,CACb,gEAAiE,CACjE,qBAgBD,CAdC,yDACC,YAAa,CAEb,qBAAsB,CADtB,6BAWD,CARC,yFAEC,oBAAqB,CAErB,kBAAmB,CAHnB,YAAa,CAKb,eAAgB,CADhB,WAAY,CAFZ,0BAID,CCrBF,MACC,mCAAoC,CACpC,mCAAoC,CACpC,gDAA2D,CAC3D,sDAAiE,CACjE,kDACD,CAEA,kCAEC,kCAAmC,CADnC,+BAmFD,CAhFC,yDACC,0EAA2E,CAC3E,2EAA4E,CAI5E,0CAA2C,CAF3C,SAAU,CACV,wCA0ED,CAtEC,qEACC,4CACD,CAEA,2EAOC,aAAc,CANd,WAAY,CACZ,gBAAiB,CAGjB,eAAgB,CADhB,kCAAmC,CAEnC,sBAAuB,CAHvB,UAKD,CAEA,yFAMC,0CAA2C,CAC3C,gDAAiD,CAJjD,UAAW,CADX,eAAgB,CAGhB,gCAAiC,CAJjC,UAOD,CAEA,qEACC,6EAaD,CAVC,iFACC,0DACD,CAEA,qGAGC,4CAA6C,CAC7C,mBAAoB,CAHpB,UAID,CAGD,+DACC,wCAUD,CARC,iFACC,+CAAgD,CAChD,SACD,CAEA,qEACC,8CACD,CAIA,uFACC,wDACD,CAEA,6FACC,8DACD,CAGD,6FACC,4DAKD,CAHC,6HACC,SACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-style-panel-columns: 3;\r\n}\r\n\r\n.ck.ck-style-panel .ck-style-grid {\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(var(--ck-style-panel-columns),auto);\r\n\tjustify-content: start;\r\n\r\n\t& .ck-style-grid__button {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tflex-direction: column;\r\n\r\n\t\t& .ck-style-grid__button__preview {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-content: center;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\talign-items: center;\r\n\t\t\tflex-grow: 1;\r\n\t\t\tflex-basis: 100%;\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-style-panel-button-width: 120px;\r\n\t--ck-style-panel-button-height: 80px;\r\n\t--ck-style-panel-button-label-background: hsl(0, 0%, 94.1%);\r\n\t--ck-style-panel-button-hover-label-background: hsl(0, 0%, 92.1%);\r\n\t--ck-style-panel-button-hover-border-color: hsl(0, 0%, 70%);\r\n}\r\n\r\n.ck.ck-style-panel .ck-style-grid {\r\n\trow-gap: var(--ck-spacing-large);\r\n\tcolumn-gap: var(--ck-spacing-large);\r\n\r\n\t& .ck-style-grid__button {\r\n\t\t--ck-color-button-default-hover-background: var(--ck-color-base-background);\r\n\t\t--ck-color-button-default-active-background: var(--ck-color-base-background);\r\n\r\n\t\tpadding: 0;\r\n\t\twidth: var(--ck-style-panel-button-width);\r\n\t\theight: var(--ck-style-panel-button-height);\r\n\r\n\t\t/* Let default .ck-button :focus styles apply */\r\n\t\t&:not(:focus) {\r\n\t\t\tborder: 1px solid var(--ck-color-base-border);\r\n\t\t}\r\n\r\n\t\t& .ck-button__label {\r\n\t\t\theight: 22px;\r\n\t\t\tline-height: 22px;\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 0 var(--ck-spacing-medium);\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tflex-shrink: 0;\r\n\t\t}\r\n\r\n\t\t& .ck-style-grid__button__preview {\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow: hidden;\r\n\t\t\topacity: .9;\r\n\r\n\t\t\tpadding: var(--ck-spacing-medium);\r\n\t\t\tbackground: var(--ck-color-base-background);\r\n\t\t\tborder: 2px solid var(--ck-color-base-background);\r\n\t\t}\r\n\r\n\t\t&.ck-disabled {\r\n\t\t\t--ck-color-button-default-disabled-background: var(--ck-color-base-foreground);\r\n\r\n\t\t\t/* Let default .ck-button :focus styles apply */\r\n\t\t\t&:not(:focus) {\r\n\t\t\t\tborder-color: var(--ck-style-panel-button-label-background);\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-style-grid__button__preview {\r\n\t\t\t\topacity: .4;\r\n\r\n\t\t\t\tborder-color: var(--ck-color-base-foreground);\r\n\t\t\t\tfilter: saturate(.3);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&.ck-on {\r\n\t\t\tborder-color: var(--ck-color-base-active);\r\n\r\n\t\t\t& .ck-button__label {\r\n\t\t\t\tbox-shadow: 0 -1px 0 var(--ck-color-base-active);\r\n\t\t\t\tz-index: 1; /* Stay on top of the preview with the shadow. */\r\n\t\t\t}\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tborder-color: var(--ck-color-base-active-focus);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:not(.ck-on) {\r\n\t\t\t& .ck-button__label {\r\n\t\t\t\tbackground: var(--ck-style-panel-button-label-background);\r\n\t\t\t}\r\n\r\n\t\t\t&:hover .ck-button__label {\r\n\t\t\t\tbackground: var(--ck-style-panel-button-hover-label-background);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:hover:not(.ck-disabled):not(.ck-on) {\r\n\t\t\tborder-color: var(--ck-style-panel-button-hover-border-color);\r\n\r\n\t\t\t& .ck-style-grid__button__preview {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},306:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-style/stylegroup.css"],names:[],mappings:"AAMC,0DACC,gCACD,CAGC,sEACC,YACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-style-panel .ck-style-panel__style-group {\r\n\t& > .ck-label {\r\n\t\tmargin: var(--ck-spacing-large) 0;\r\n\t}\r\n\r\n\t&:first-child {\r\n\t\t& > .ck-label {\r\n\t\t\tmargin-top: 0;\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},9458:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-style-panel-max-height:470px}.ck.ck-style-panel{max-height:var(--ck-style-panel-max-height);overflow-y:auto;padding:var(--ck-spacing-large)}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-style/stylepanel.css"],names:[],mappings:"AAKA,MACC,iCACD,CAEA,mBAGC,2CAA4C,CAD5C,eAAgB,CADhB,+BAGD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-style-panel-max-height: 470px;\r\n}\r\n\r\n.ck.ck-style-panel {\r\n\tpadding: var(--ck-spacing-large);\r\n\toverflow-y: auto;\r\n\tmax-height: var(--ck-style-panel-max-height);\r\n}\r\n"],sourceRoot:""}]);const a=s},7368:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);height:20px;width:20px}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/colorinput.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/colorinput.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,mBAEC,YAAa,CACb,0BAA2B,CAF3B,UAgCD,CA5BC,0CAEC,WAAY,CADZ,cAED,CAEA,sCACC,cAMD,CAHC,kFACC,YACD,CAGD,8CAEC,YAWD,CATC,kFAEC,eAAgB,CADhB,iBAOD,CAJC,0IAEC,aAAc,CADd,iBAED,CC1BF,+CAGE,4BAA6B,CAD7B,yBAcF,CAhBA,+CAQE,2BAA4B,CAD5B,wBASF,CAHC,2CACC,SACD,CAIA,wEACC,SA0CD,CA3CA,kFAKE,2BAA4B,CAD5B,wBAuCF,CApCE,8FACC,iCACD,CATF,kFAcE,4BAA6B,CAD7B,yBA8BF,CA3BE,8FACC,kCACD,CAGD,oFACC,oDACD,CAEA,4GC1CF,eD2DE,CAjBA,+PCtCD,qCDuDC,CAjBA,4GAKC,6CAA8C,CAD9C,WAAY,CADZ,UAcD,CAVC,oKAKC,cAA6B,CAC7B,iBAAkB,CAHlB,WAAY,CADZ,QAAS,CADT,QAAS,CAMT,uBAAwB,CACxB,oBAAqB,CAJrB,QAKD,CAKH,oDAIC,2BAA4B,CAC5B,4BAA6B,CAH7B,qEAAwE,CADxE,UA0BD,CApBC,gEACC,oDACD,CATD,8DAYE,yBAeF,CA3BA,8DAgBE,wBAWF,CARC,gEACC,uCAMD,CAPA,0EAKE,sCAAuC,CADvC,cAGF",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-input-color {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: row-reverse;\r\n\r\n\t& > input.ck.ck-input-text {\r\n\t\tmin-width: auto;\r\n\t\tflex-grow: 1;\r\n\t}\r\n\r\n\t& > div.ck.ck-dropdown {\r\n\t\tmin-width: auto;\r\n\r\n\t\t/* This dropdown has no arrow but a color preview instead. */\r\n\t\t& > .ck-input-color__button .ck-dropdown__arrow {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck.ck-input-color__button {\r\n\t\t/* Resolving issue with misaligned buttons on Safari (see #10589) */\r\n\t\tdisplay: flex;\r\n\r\n\t\t& .ck.ck-input-color__button__preview {\r\n\t\t\tposition: relative;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t& > .ck.ck-input-color__button__preview__no-color-indicator {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n@import "../mixins/_rounded.css";\r\n\r\n.ck.ck-input-color {\r\n\t& > .ck.ck-input-text {\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\tborder-top-right-radius: 0;\r\n\t\t\tborder-bottom-right-radius: 0;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\tborder-top-left-radius: 0;\r\n\t\t\tborder-bottom-left-radius: 0;\r\n\t\t}\r\n\r\n\t\t/* Make sure the focused input is always on top of the dropdown button so its\r\n\t\t   outline and border are never cropped (also when the input is read-only). */\r\n\t\t&:focus {\r\n\t\t\tz-index: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck.ck-dropdown {\r\n\t\t& > .ck.ck-button.ck-input-color__button {\r\n\t\t\tpadding: 0;\r\n\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tborder-top-left-radius: 0;\r\n\t\t\t\tborder-bottom-left-radius: 0;\r\n\r\n\t\t\t\t&:not(:focus) {\r\n\t\t\t\t\tborder-left: 1px solid transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tborder-top-right-radius: 0;\r\n\t\t\t\tborder-bottom-right-radius: 0;\r\n\r\n\t\t\t\t&:not(:focus) {\r\n\t\t\t\t\tborder-right: 1px solid transparent;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&.ck-disabled {\r\n\t\t\t\tbackground: var(--ck-color-input-disabled-background);\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck.ck-input-color__button__preview {\r\n\t\t\t\t@mixin ck-rounded-corners;\r\n\r\n\t\t\t\twidth: 20px;\r\n\t\t\t\theight: 20px;\r\n\t\t\t\tborder: 1px solid var(--ck-color-input-border);\r\n\r\n\t\t\t\t& > .ck.ck-input-color__button__preview__no-color-indicator {\r\n\t\t\t\t\ttop: -30%;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\theight: 150%;\r\n\t\t\t\t\twidth: 8%;\r\n\t\t\t\t\tbackground: hsl(0, 100%, 50%);\r\n\t\t\t\t\tborder-radius: 2px;\r\n\t\t\t\t\ttransform: rotate(45deg);\r\n\t\t\t\t\ttransform-origin: 50%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck.ck-input-color__remove-color {\r\n\t\twidth: 100%;\r\n\t\tpadding: calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);\r\n\r\n\t\tborder-bottom-left-radius: 0;\r\n\t\tborder-bottom-right-radius: 0;\r\n\r\n\t\t&:not(:focus) {\r\n\t\t\tborder-bottom: 1px solid var(--ck-color-input-border);\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\tborder-top-right-radius: 0;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\tborder-top-left-radius: 0;\r\n\t\t}\r\n\r\n\t\t& .ck.ck-icon {\r\n\t\t\tmargin-right: var(--ck-spacing-standard);\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tmargin-right: 0;\r\n\t\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4070:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/form.css"],names:[],mappings:"AAKA,YACC,mCAyBD,CAvBC,kBAEC,YACD,CAEA,8BACC,cAAe,CACf,OACD,CAEA,4BACC,cAWD,CARE,6DACC,4CACD,CAEA,mEACC,UACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-form {\r\n\tpadding: 0 0 var(--ck-spacing-large);\r\n\r\n\t&:focus {\r\n\t\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t& .ck.ck-input-text {\r\n\t\tmin-width: 100%;\r\n\t\twidth: 0;\r\n\t}\r\n\r\n\t& .ck.ck-dropdown {\r\n\t\tmin-width: 100%;\r\n\r\n\t\t& .ck-dropdown__button {\r\n\t\t\t&:not(:focus) {\r\n\t\t\t\tborder: 1px solid var(--ck-color-base-border);\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-button__label {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},9247:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/formrow.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/formrow.css"],names:[],mappings:"AAKA,iBACC,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,6BAaD,CAVC,iCACC,WACD,CAGC,wHAEC,sBACD,CCbF,iBACC,4DA2BD,CAvBE,6CAEE,mCAMF,CARA,6CAME,oCAEF,CAGD,2BAEC,cAAe,CADf,UAED,CAEA,2CACC,kCAKD,CAHC,wEACC,0BACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-form__row {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\tjustify-content: space-between;\r\n\r\n\t/* Ignore labels that work as fieldset legends */\r\n\t& > *:not(.ck-label) {\r\n\t\tflex-grow: 1;\r\n\t}\r\n\r\n\t&.ck-table-form__action-row {\r\n\t\t& .ck-button-save,\r\n\t\t& .ck-button-cancel {\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck.ck-form__row {\r\n\tpadding: var(--ck-spacing-standard) var(--ck-spacing-large) 0;\r\n\r\n\t/* Ignore labels that work as fieldset legends */\r\n\t& > *:not(.ck-label) {\r\n\t\t& + * {\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tmargin-left: var(--ck-spacing-large);\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tmargin-right: var(--ck-spacing-large);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck-label {\r\n\t\twidth: 100%;\r\n\t\tmin-width: 100%;\r\n\t}\r\n\r\n\t&.ck-table-form__action-row {\r\n\t\tmargin-top: var(--ck-spacing-large);\r\n\r\n\t\t& .ck-button .ck-button__label {\r\n\t\t\tcolor: var(--ck-color-text);\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},1613:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/inserttable.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/inserttable.css"],names:[],mappings:"AAKA,oCACC,YAAa,CACb,kBAAmB,CACnB,cACD,CCJA,MACC,uCAAwC,CACxC,0CAA2C,CAC3C,yCAA0C,CAC1C,yCACD,CAEA,oCAGC,yFAA0F,CAD1F,oJAED,CAEA,mFAEC,iBACD,CAEA,uCAIC,4CAA6C,CAC7C,iBAAkB,CAFlB,iDAAkD,CADlD,qDAAsD,CADtD,mDAAoD,CAKpD,YAAa,CACb,eAUD,CARC,6CACC,eACD,CAEA,6CAEC,6CAA8C,CAD9C,yCAED",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-insert-table-dropdown__grid {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: wrap;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-insert-table-dropdown-padding: 10px;\r\n\t--ck-insert-table-dropdown-box-height: 11px;\r\n\t--ck-insert-table-dropdown-box-width: 12px;\r\n\t--ck-insert-table-dropdown-box-margin: 1px;\r\n}\r\n\r\n.ck .ck-insert-table-dropdown__grid {\r\n\t/* The width of a container should match 10 items in a row so there will be a 10x10 grid. */\r\n\twidth: calc(var(--ck-insert-table-dropdown-box-width) * 10 + var(--ck-insert-table-dropdown-box-margin) * 20 + var(--ck-insert-table-dropdown-padding) * 2);\r\n\tpadding: var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;\r\n}\r\n\r\n.ck .ck-insert-table-dropdown__label,\r\n.ck[dir=rtl] .ck-insert-table-dropdown__label {\r\n\ttext-align: center;\r\n}\r\n\r\n.ck .ck-insert-table-dropdown-grid-box {\r\n\tmin-width: var(--ck-insert-table-dropdown-box-width);\r\n\tmin-height: var(--ck-insert-table-dropdown-box-height);\r\n\tmargin: var(--ck-insert-table-dropdown-box-margin);\r\n\tborder: 1px solid var(--ck-color-base-border);\r\n\tborder-radius: 1px;\r\n\toutline: none;\r\n\ttransition: none;\r\n\r\n\t&:focus {\r\n\t\tbox-shadow: none;\r\n\t}\r\n\r\n\t&.ck-on {\r\n\t\tborder-color: var(--ck-color-focus-border);\r\n\t\tbackground: var(--ck-color-focus-outer-shadow);\r\n\t}\r\n}\r\n\r\n"],sourceRoot:""}]);const a=s},6306:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-content .table{display:table;margin:.9em auto}.ck-content .table table{border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0;height:100%;width:100%}.ck-content .table table td,.ck-content .table table th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}.ck-content .table table th{background:rgba(0,0,0,.05);font-weight:700}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/table.css"],names:[],mappings:"AAKA,mBAKC,aAAc,CADd,gBAiCD,CA9BC,yBAYC,yBAAkC,CAVlC,wBAAyB,CACzB,gBAAiB,CAKjB,WAAY,CADZ,UAsBD,CAfC,wDAQC,wBAAiC,CANjC,aAAc,CACd,YAMD,CAEA,4BAEC,0BAA+B,CAD/B,eAED,CAMF,+BACC,gBACD,CAEA,+BACC,eACD,CAEA,+CAKC,oBAAqB,CAMrB,UACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck-content .table {\r\n\t/* Give the table widget some air and center it horizontally */\r\n\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\r\n\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\r\n\tmargin: 0.9em auto;\r\n\tdisplay: table;\r\n\r\n\t& table {\r\n\t\t/* The table cells should have slight borders */\r\n\t\tborder-collapse: collapse;\r\n\t\tborder-spacing: 0;\r\n\r\n\t\t/* Table width and height are set on the parent <figure>. Make sure the table inside stretches\r\n\t\tto the full dimensions of the container (https://github.com/ckeditor/ckeditor5/issues/6186). */\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\r\n\t\t/* The outer border of the table should be slightly darker than the inner lines.\r\n\t\tAlso see https://github.com/ckeditor/ckeditor5-table/issues/50. */\r\n\t\tborder: 1px double hsl(0, 0%, 70%);\r\n\r\n\t\t& td,\r\n\t\t& th {\r\n\t\t\tmin-width: 2em;\r\n\t\t\tpadding: .4em;\r\n\r\n\t\t\t/* The border is inherited from .ck-editor__nested-editable styles, so theoretically it\'s not necessary here.\r\n\t\t\tHowever, the border is a content style, so it should use .ck-content (so it works outside the editor).\r\n\t\t\tHence, the duplication. See https://github.com/ckeditor/ckeditor5/issues/6314 */\r\n\t\t\tborder: 1px solid hsl(0, 0%, 75%);\r\n\t\t}\r\n\r\n\t\t& th {\r\n\t\t\tfont-weight: bold;\r\n\t\t\tbackground: hsla(0, 0%, 0%, 5%);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* Text alignment of the table header should match the editor settings and override the native browser styling,\r\nwhen content is available outside the editor. See https://github.com/ckeditor/ckeditor5/issues/6638 */\r\n.ck-content[dir="rtl"] .table th {\r\n\ttext-align: right;\r\n}\r\n\r\n.ck-content[dir="ltr"] .table th {\r\n\ttext-align: left;\r\n}\r\n\r\n.ck-editor__editable .ck-table-bogus-paragraph {\r\n\t/*\r\n\t * Use display:inline-block to force Chrome/Safari to limit text mutations to this element.\r\n\t * See https://github.com/ckeditor/ckeditor5/issues/6062.\r\n\t */\r\n\tdisplay: inline-block;\r\n\r\n\t/*\r\n\t * Inline HTML elements nested in the span should always be dimensioned in relation to the whole cell width.\r\n\t * See https://github.com/ckeditor/ckeditor5/issues/9117.\r\n\t */\r\n\twidth: 100%;\r\n}\r\n'],sourceRoot:""}]);const a=s},2128:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-table-caption-background:#f7f7f7;--ck-color-table-caption-text:#333;--ck-color-table-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-table-caption-background);caption-side:top;color:var(--ck-color-table-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-table-caption-highlighted-background)}to{background-color:var(--ck-color-table-caption-background)}}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/tablecaption.css"],names:[],mappings:"AAKA,MACC,2CAAoD,CACpD,kCAA8C,CAC9C,oDACD,CAGA,8BAMC,yDAA0D,CAJ1D,gBAAiB,CAGjB,wCAAyC,CAJzC,qBAAsB,CAOtB,eAAgB,CAChB,mBAAoB,CAFpB,YAAa,CAHb,iBAAkB,CADlB,qBAOD,CAIC,qEACC,iDACD,CAEA,gEASC,eAAgB,CARhB,oBAAqB,CACrB,qBAAsB,CAQtB,sBAAuB,CAFvB,kBAGD,CAGD,sCACC,GACC,qEACD,CAEA,GACC,yDACD,CACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-table-caption-background: hsl(0, 0%, 97%);\r\n\t--ck-color-table-caption-text: hsl(0, 0%, 20%);\r\n\t--ck-color-table-caption-highlighted-background: hsl(52deg 100% 50%);\r\n}\r\n\r\n/* Content styles */\r\n.ck-content .table > figcaption {\r\n\tdisplay: table-caption;\r\n\tcaption-side: top;\r\n\tword-break: break-word;\r\n\ttext-align: center;\r\n\tcolor: var(--ck-color-table-caption-text);\r\n\tbackground-color: var(--ck-color-table-caption-background);\r\n\tpadding: .6em;\r\n\tfont-size: .75em;\r\n\toutline-offset: -1px;\r\n}\r\n\r\n/* Editing styles */\r\n.ck.ck-editor__editable .table > figcaption {\r\n\t&.table__caption_highlighted {\r\n\t\tanimation: ck-table-caption-highlight .6s ease-out;\r\n\t}\r\n\r\n\t&.ck-placeholder::before {\r\n\t\tpadding-left: inherit;\r\n\t\tpadding-right: inherit;\r\n\r\n\t\t/*\r\n\t\t * Make sure the table caption placeholder doesn't overflow the placeholder area.\r\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\r\n\t\t */\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n}\r\n\r\n@keyframes ck-table-caption-highlight {\r\n\t0% {\r\n\t\tbackground-color: var(--ck-color-table-caption-highlighted-background);\r\n\t}\r\n\r\n\t100% {\r\n\t\tbackground-color: var(--ck-color-table-caption-background);\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},5087:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/tablecellproperties.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/tablecellproperties.css"],names:[],mappings:"AAOE,6FACC,cAiBD,CAdE,0HAEC,cACD,CAEA,yHAEC,cACD,CAEA,uHACC,WACD,CClBJ,kCACC,WAkBD,CAfE,2FACC,mBAAoB,CACpB,SAAU,CACV,SACD,CAGC,4GACC,eAAgB,CAGhB,qCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-table-cell-properties-form {\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-cell-properties-form__alignment-row {\r\n\t\t\tflex-wrap: wrap;\r\n\r\n\t\t\t& .ck.ck-toolbar {\r\n\t\t\t\t&:first-of-type {\r\n\t\t\t\t\t/* 4 buttons out of 7 (h-alignment + v-alignment) = 0.57 */\r\n\t\t\t\t\tflex-grow: 0.57;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:last-of-type {\r\n\t\t\t\t\t/* 3 buttons out of 7 (h-alignment + v-alignment) = 0.43 */\r\n\t\t\t\t\tflex-grow: 0.43;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t& .ck-button {\r\n\t\t\t\t\tflex-grow: 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-table-cell-properties-form {\r\n\twidth: 320px;\r\n\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-cell-properties-form__padding-row {\r\n\t\t\talign-self: flex-end;\r\n\t\t\tpadding: 0;\r\n\t\t\twidth: 25%;\r\n\t\t}\r\n\r\n\t\t&.ck-table-cell-properties-form__alignment-row {\r\n\t\t\t& .ck.ck-toolbar {\r\n\t\t\t\tbackground: none;\r\n\r\n\t\t\t\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\r\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4101:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-table-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table table{overflow:hidden}.ck-content .table td,.ck-content .table th{position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:-999999px;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:-999999px;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-table-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/tablecolumnresize.css"],names:[],mappings:"AAKA,MACC,iEAAkE,CAClE,mCAAoC,CAIpC,iGACD,CAEA,qCACC,kBACD,CAEA,yBACC,eACD,CAEA,4CAEC,iBACD,CAEA,wDAOC,gBAAiB,CAGjB,iBAAkB,CATlB,iBAAkB,CAOlB,oDAAqD,CAFrD,aAAc,CAKd,gBAAiB,CAFjB,0CAA2C,CAG3C,2BACD,CAQA,qJACC,YACD,CAEA,8HAEC,2DAA4D,CAC5D,WACD,CAEA,iEACC,mDAAoD,CACpD,WACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-table-column-resizer-hover: var(--ck-color-base-active);\r\n\t--ck-table-column-resizer-width: 7px;\r\n\r\n\t/* The offset used for absolute positioning of the resizer element, so that it is placed exactly above the cell border.\r\n\t   The value is: minus half the width of the resizer decreased additionaly by the half the width of the border (0.5px). */\r\n\t--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -0.5 - 0.5px);\r\n}\r\n\r\n.ck-content .table .ck-table-resized {\r\n\ttable-layout: fixed;\r\n}\r\n\r\n.ck-content .table table {\r\n\toverflow: hidden;\r\n}\r\n\r\n.ck-content .table td,\r\n.ck-content .table th {\r\n\tposition: relative;\r\n}\r\n\r\n.ck.ck-editor__editable .table .ck-table-column-resizer {\r\n\tposition: absolute;\r\n\t/* The resizer element resides in each cell so to occupy the entire height of the table, which is unknown from a CSS point of view,\r\n\t   it is extended to an extremely high height. Even for screens with a very high pixel density, the resizer will fulfill its role as\r\n\t   it should, i.e. for a screen of 476 ppi the total height of the resizer will take over 350 sheets of A4 format, which is totally\r\n\t   unrealistic height for a single table. */\r\n\ttop: -999999px;\r\n\tbottom: -999999px;\r\n\tright: var(--ck-table-column-resizer-position-offset);\r\n\twidth: var(--ck-table-column-resizer-width);\r\n\tcursor: col-resize;\r\n\tuser-select: none;\r\n\tz-index: var(--ck-z-default);\r\n}\r\n\r\n.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer {\r\n\tdisplay: none;\r\n}\r\n\r\n/* The resizer elements, which are extended to an extremely high height, break the drag & drop feature in Chrome. To make it work again,\r\n   all resizers must be hidden while the table is dragged. */\r\n.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer {\r\n\tdisplay: none;\r\n}\r\n\r\n.ck.ck-editor__editable .table .ck-table-column-resizer:hover,\r\n.ck.ck-editor__editable .table .ck-table-column-resizer__active {\r\n\tbackground-color: var(--ck-color-table-column-resizer-hover);\r\n\topacity: 0.25;\r\n}\r\n\r\n.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer {\r\n\tleft: var(--ck-table-column-resizer-position-offset);\r\n\tright: unset;\r\n}\r\n"],sourceRoot:""}]);const a=s},3881:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-table-focused-cell-background:rgba(158,201,250,.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/tableediting.css"],names:[],mappings:"AAKA,MACC,6DACD,CAKE,8QAGC,wDAAyD,CAKzD,iBAAkB,CAClB,8CAA+C,CAC/C,mBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-table-focused-cell-background: hsla(212, 90%, 80%, .3);\r\n}\r\n\r\n.ck-widget.table {\r\n\t& td,\r\n\t& th {\r\n\t\t&.ck-editor__nested-editable.ck-editor__nested-editable_focused,\r\n\t\t&.ck-editor__nested-editable:focus {\r\n\t\t\t/* A very slight background to highlight the focused cell */\r\n\t\t\tbackground: var(--ck-color-table-focused-cell-background);\r\n\r\n\t\t\t/* Fixes the problem where surrounding cells cover the focused cell's border.\r\n\t\t\tIt does not fix the problem in all places but the UX is improved.\r\n\t\t\tSee https://github.com/ckeditor/ckeditor5-table/issues/29. */\r\n\t\t\tborder-style: none;\r\n\t\t\toutline: 1px solid var(--ck-color-focus-border);\r\n\t\t\toutline-offset: -1px; /* progressive enhancement - no IE support */\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},6237:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{border-radius:0}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}',"",{version:3,sources:["webpack://./../ckeditor5-table/theme/tableform.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/tableform.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAWE,wHACC,cACD,CAEA,8DAEC,kBAAmB,CADnB,cAgBD,CAbC,qFAGC,kBAAmB,CAFnB,YAAa,CACb,6BAMD,CAEA,sMACC,WACD,CAIF,4CAEC,iBAoBD,CAlBC,8EAGC,2DAAgE,CADhE,QAAS,CADT,iBAAkB,CAGlB,8BAA+B,CAG/B,SAUD,CAPC,oFACC,UAAW,CAGX,QAAS,CAFT,iBAAkB,CAClB,wDAA6D,CAE7D,0BACD,CChDH,MACC,0CAA2C,CAC3C,2CACD,CAMI,2FACC,kCAAmC,CACnC,iBACD,CAGD,8KAIC,cAAe,CADf,cAAe,CADf,UAGD,CAGD,8DACC,SAcD,CAZC,yMAEC,QACD,CAEA,iGACC,mBAAoB,CACpB,oBAAqB,CACrB,wCAAyC,CACzC,6CAA8C,CAC9C,gCACD,CAIF,4CACC,sCAyBD,CAvBC,8ECxCD,eDyDC,CAjBA,mMCpCA,qCDqDA,CAjBA,8EAGC,qCAAsC,CACtC,qCAAsC,CAEtC,oDAAqD,CADrD,wDAAyD,CAEzD,iBAUD,CAPC,oFACC,2EAA4E,CAE5E,kBAAmB,CADnB,kJAED,CAdD,8EAgBC,iEACD,CAGA,6GACC,YACD,CAIF,oDACC,GACC,SACD,CAEA,GACC,SACD,CACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-table-form {\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-form__border-row {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t}\r\n\r\n\t\t&.ck-table-form__background-row {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t}\r\n\r\n\t\t&.ck-table-form__dimensions-row {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t& .ck-labeled-field-view {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column-reverse;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t& .ck.ck-dropdown {\r\n\t\t\t\t\tflex-grow: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-table-form__dimension-operator {\r\n\t\t\t\tflex-grow: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck.ck-labeled-field-view {\r\n\t\t/* Allow absolute positioning of the status (error) balloons. */\r\n\t\tposition: relative;\r\n\r\n\t\t& .ck.ck-labeled-field-view__status {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\tbottom: calc( -1 * var(--ck-table-properties-error-arrow-size) );\r\n\t\t\ttransform: translate(-50%,100%);\r\n\r\n\t\t\t/* Make sure the balloon status stays on top of other form elements. */\r\n\t\t\tz-index: 1;\r\n\r\n\t\t\t/* The arrow pointing towards the field. */\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: "";\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: calc( -1 * var(--ck-table-properties-error-arrow-size) );\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translateX( -50% );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n','/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../mixins/_rounded.css";\r\n\r\n:root {\r\n\t--ck-table-properties-error-arrow-size: 6px;\r\n\t--ck-table-properties-min-error-width: 150px;\r\n}\r\n\r\n.ck.ck-table-form {\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-form__border-row {\r\n\t\t\t& .ck-labeled-field-view {\r\n\t\t\t\t& > .ck-label {\r\n\t\t\t\t\tfont-size: var(--ck-font-size-tiny);\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-table-form__border-style,\r\n\t\t\t& .ck-table-form__border-width {\r\n\t\t\t\twidth: 80px;\r\n\t\t\t\tmin-width: 80px;\r\n\t\t\t\tmax-width: 80px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&.ck-table-form__dimensions-row {\r\n\t\t\tpadding: 0;\r\n\r\n\t\t\t& .ck-table-form__dimensions-row__width,\r\n\t\t\t& .ck-table-form__dimensions-row__height {\r\n\t\t\t\tmargin: 0\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-table-form__dimension-operator {\r\n\t\t\t\talign-self: flex-end;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\theight: var(--ck-ui-component-min-height);\r\n\t\t\t\tline-height: var(--ck-ui-component-min-height);\r\n\t\t\t\tmargin: 0 var(--ck-spacing-small);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck.ck-labeled-field-view {\r\n\t\tpadding-top: var(--ck-spacing-standard);\r\n\r\n\t\t& .ck.ck-labeled-field-view__status {\r\n\t\t\t@mixin ck-rounded-corners;\r\n\r\n\t\t\tbackground: var(--ck-color-base-error);\r\n\t\t\tcolor: var(--ck-color-base-background);\r\n\t\t\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\r\n\t\t\tmin-width: var(--ck-table-properties-min-error-width);\r\n\t\t\ttext-align: center;\r\n\r\n\t\t\t/* The arrow pointing towards the field. */\r\n\t\t\t&::after {\r\n\t\t\t\tborder-color: transparent transparent var(--ck-color-base-error) transparent;\r\n\t\t\t\tborder-width: 0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t}\r\n\r\n\t\t\tanimation: ck-table-form-labeled-view-status-appear .15s ease both;\r\n\t\t}\r\n\r\n\t\t/* Hide the error balloon when the field is blurred. Makes the experience much more clear. */\r\n\t\t& .ck-input.ck-error:not(:focus) + .ck.ck-labeled-field-view__status {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n@keyframes ck-table-form-labeled-view-status-appear {\r\n\t0% {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t100% {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},7341:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}","",{version:3,sources:["webpack://./../ckeditor5-table/theme/tableproperties.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/tableproperties.css"],names:[],mappings:"AAOE,mFAGC,sBAAuB,CADvB,YAAa,CADb,cAOD,CAHC,qHACC,gBACD,CCTH,6BACC,WAmBD,CAhBE,mFACC,mBAAoB,CACpB,SAYD,CAVC,kGACC,eAAgB,CAGhB,qCAKD,CAHC,uHACC,UACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-table-properties-form {\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-properties-form__alignment-row {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tflex-basis: 0;\r\n\t\t\talign-content: baseline;\r\n\r\n\t\t\t& .ck.ck-toolbar .ck-toolbar__items {\r\n\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-table-properties-form {\r\n\twidth: 320px;\r\n\r\n\t& .ck-form__row {\r\n\t\t&.ck-table-properties-form__alignment-row {\r\n\t\t\talign-self: flex-end;\r\n\t\t\tpadding: 0;\r\n\r\n\t\t\t& .ck.ck-toolbar {\r\n\t\t\t\tbackground: none;\r\n\r\n\t\t\t\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\r\n\t\t\t\tmargin-top: var(--ck-spacing-standard);\r\n\r\n\t\t\t\t& .ck-toolbar__items > * {\r\n\t\t\t\t\twidth: 40px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},6945:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,':root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;outline:unset;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}',"",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-table/tableselection.css"],names:[],mappings:"AAKA,MACC,wDACD,CAGC,0IAKC,gBAAiB,CAFjB,uBAAwB,CACxB,aAAc,CAFd,iBAiCD,CA3BC,sJAGC,yDAA0D,CAK1D,QAAS,CAPT,UAAW,CAKX,MAAO,CAJP,mBAAoB,CAEpB,iBAAkB,CAGlB,OAAQ,CAFR,KAID,CAEA,wTAEC,4BACD,CAMA,gKACC,aAKD,CAHC,0NACC,YACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-table-selected-cell-background: hsla(208, 90%, 80%, .3);\r\n}\r\n\r\n.ck.ck-editor__editable .table table {\r\n\t& td.ck-editor__editable_selected,\r\n\t& th.ck-editor__editable_selected {\r\n\t\tposition: relative;\r\n\t\tcaret-color: transparent;\r\n\t\toutline: unset;\r\n\t\tbox-shadow: unset;\r\n\r\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/6446 */\r\n\t\t&:after {\r\n\t\t\tcontent: '';\r\n\t\t\tpointer-events: none;\r\n\t\t\tbackground-color: var(--ck-table-selected-cell-background);\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t}\r\n\r\n\t\t& ::selection,\r\n\t\t&:focus {\r\n\t\t\tbackground-color: transparent;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * To reduce the amount of noise, all widgets in the table selection have no outline and no selection handle.\r\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/9491.\r\n\t\t */\r\n\t\t& .ck-widget {\r\n\t\t\toutline: unset;\r\n\r\n\t\t\t& > .ck-widget__selection-handle {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4906:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;justify-content:left;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:calc(var(--ck-spacing-small)*-1)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{color:var(--ck-color-button-on-color)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/button/button.css","webpack://./../ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/button/button.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/mixins/_button.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_disabled.css"],names:[],mappings:"AAOA,6BAMC,kBAAmB,CADnB,mBAAoB,CAEpB,oBAAqB,CAHrB,iBAAkB,CCFlB,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBDkBD,CAdC,iEACC,YACD,CAGC,yGACC,oBACD,CAID,iFACC,sBACD,CEjBD,6BCAC,oDD4ID,CCzIE,6EACC,0DACD,CAEA,+EACC,2DACD,CAID,qDACC,6DACD,CDfD,6BEDC,eF6ID,CA5IA,wIEGE,qCFyIF,CA5IA,6BA6BC,uBAAwB,CANxB,4BAA6B,CAjB7B,cAAe,CAcf,iBAAkB,CAHlB,aAAc,CAJd,4CAA6C,CAD7C,2CAA4C,CAJ5C,8BAA+B,CAC/B,iBAAkB,CAiBlB,4DAA8D,CAnB9D,qBAAsB,CAFtB,kBAuID,CA7GC,oFGhCA,2BAA2B,CCF3B,2CAA8B,CDC9B,YHqCA,CAIC,kJAEC,aACD,CAGD,iEAIC,aAAc,CACd,cAAe,CAHf,iBAAkB,CAClB,mBAAoB,CAMpB,qBASD,CAlBA,qFAYE,eAMF,CAlBA,qFAgBE,gBAEF,CAEA,yEACC,aAYD,CAbA,6FAIE,mCASF,CAbA,6FAQE,oCAKF,CAbA,yEAWC,eAAiB,CACjB,UACD,CAIC,oIIrFD,oDJyFC,CAOA,gLKhGD,kCLkGC,CAEA,iGACC,UACD,CAGD,qEACC,yDAcD,CAXC,2HAEE,4CAA+C,CAC/C,oCAOF,CAVA,2HAQE,mCAAoC,CADpC,6CAGF,CAKA,mHACC,WACD,CAID,yCC/HA,+CDmIA,CChIC,yFACC,qDACD,CAEA,2FACC,sDACD,CAID,iEACC,wDACD,CDgHA,yCAGC,qCACD,CAEA,2DACC,iCACD,CAEA,+DACC,mCACD,CAID,2CC/IC,mDDoJD,CCjJE,2FACC,yDACD,CAEA,6FACC,0DACD,CAID,mEACC,4DACD,CDgID,2CAIC,wCACD,CAEA,uCAEC,eACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../mixins/_unselectable.css";\r\n\r\n.ck.ck-button,\r\na.ck.ck-button {\r\n\t@mixin ck-unselectable;\r\n\r\n\tposition: relative;\r\n\tdisplay: inline-flex;\r\n\talign-items: center;\r\n\tjustify-content: left;\r\n\r\n\t& .ck-button__label {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t&.ck-button_with-text {\r\n\t\t& .ck-button__label {\r\n\t\t\tdisplay: inline-block;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Center the icon horizontally in a button without text. */\r\n\t&:not(.ck-button_with-text)  {\r\n\t\tjustify-content: center;\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Makes element unselectable.\r\n */\r\n@define-mixin ck-unselectable {\r\n\t-moz-user-select: none;\r\n\t-webkit-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_focus.css";\r\n@import "../../../mixins/_shadow.css";\r\n@import "../../../mixins/_disabled.css";\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../mixins/_button.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck.ck-button,\r\na.ck.ck-button {\r\n\t@mixin ck-button-colors --ck-color-button-default;\r\n\t@mixin ck-rounded-corners;\r\n\r\n\twhite-space: nowrap;\r\n\tcursor: default;\r\n\tvertical-align: middle;\r\n\tpadding: var(--ck-spacing-tiny);\r\n\ttext-align: center;\r\n\r\n\t/* A very important piece of styling. Go to variable declaration to learn more. */\r\n\tmin-width: var(--ck-ui-component-min-height);\r\n\tmin-height: var(--ck-ui-component-min-height);\r\n\r\n\t/* Normalize the height of the line. Removing this will break consistent height\r\n\tamong text and text-less buttons (with icons). */\r\n\tline-height: 1;\r\n\r\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\r\n\tfont-size: inherit;\r\n\r\n\t/* Avoid flickering when the foucs border shows up. */\r\n\tborder: 1px solid transparent;\r\n\r\n\t/* Apply some smooth transition to the box-shadow and border. */\r\n\ttransition: box-shadow .2s ease-in-out, border .2s ease-in-out;\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/189 */\r\n\t-webkit-appearance: none;\r\n\r\n\t&:active,\r\n\t&:focus {\r\n\t\t@mixin ck-focus-ring;\r\n\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\r\n\t}\r\n\r\n\t/* Allow icon coloring using the text "color" property. */\r\n\t& .ck-button__icon {\r\n\t\t& use,\r\n\t\t& use * {\r\n\t\t\tcolor: inherit;\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-button__label {\r\n\t\t/* Enable font size inheritance, which allows fluid UI scaling. */\r\n\t\tfont-size: inherit;\r\n\t\tfont-weight: inherit;\r\n\t\tcolor: inherit;\r\n\t\tcursor: inherit;\r\n\r\n\t\t/* Must be consistent with .ck-icon\'s vertical align. Otherwise, buttons with and\r\n\t\twithout labels (but with icons) have different sizes in Chrome */\r\n\t\tvertical-align: middle;\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\ttext-align: left;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\ttext-align: right;\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-button__keystroke {\r\n\t\tcolor: inherit;\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\tmargin-left: var(--ck-spacing-large);\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\tmargin-right: var(--ck-spacing-large);\r\n\t\t}\r\n\r\n\t\tfont-weight: bold;\r\n\t\topacity: .7;\r\n\t}\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\r\n\t&.ck-disabled {\r\n\t\t&:active,\r\n\t\t&:focus {\r\n\t\t\t/* The disabled button should have a slightly less visible shadow when focused. */\r\n\t\t\t@mixin ck-box-shadow var(--ck-focus-disabled-outer-shadow);\r\n\t\t}\r\n\r\n\t\t& .ck-button__icon {\r\n\t\t\t@mixin ck-disabled;\r\n\t\t}\r\n\r\n\t\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\r\n\t\t& .ck-button__label {\r\n\t\t\t@mixin ck-disabled;\r\n\t\t}\r\n\r\n\t\t& .ck-button__keystroke {\r\n\t\t\topacity: .3;\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-button_with-text {\r\n\t\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-standard);\r\n\r\n\t\t/* stylelint-disable-next-line no-descending-specificity */\r\n\t\t& .ck-button__icon {\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tmargin-left: calc(-1 * var(--ck-spacing-small));\r\n\t\t\t\tmargin-right: var(--ck-spacing-small);\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tmargin-right: calc(-1 * var(--ck-spacing-small));\r\n\t\t\t\tmargin-left: var(--ck-spacing-small);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-button_with-keystroke {\r\n\t\t/* stylelint-disable-next-line no-descending-specificity */\r\n\t\t& .ck-button__label {\r\n\t\t\tflex-grow: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/* A style of the button which is currently on, e.g. its feature is active. */\r\n\t&.ck-on {\r\n\t\t@mixin ck-button-colors --ck-color-button-on;\r\n\r\n\t\tcolor: var(--ck-color-button-on-color);\r\n\t}\r\n\r\n\t&.ck-button-save {\r\n\t\tcolor: var(--ck-color-button-save);\r\n\t}\r\n\r\n\t&.ck-button-cancel {\r\n\t\tcolor: var(--ck-color-button-cancel);\r\n\t}\r\n}\r\n\r\n/* A style of the button which handles the primary action. */\r\n.ck.ck-button-action,\r\na.ck.ck-button-action {\r\n\t@mixin ck-button-colors --ck-color-button-action;\r\n\r\n\tcolor: var(--ck-color-button-action-text);\r\n}\r\n\r\n.ck.ck-button-bold,\r\na.ck.ck-button-bold {\r\n\tfont-weight: bold;\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements a button of given background color.\r\n *\r\n * @param {String} $background - Background color of the button.\r\n * @param {String} $border - Border color of the button.\r\n */\r\n@define-mixin ck-button-colors $prefix {\r\n\tbackground: var($(prefix)-background);\r\n\r\n\t&:not(.ck-disabled) {\r\n\t\t&:hover {\r\n\t\t\tbackground: var($(prefix)-hover-background);\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tbackground: var($(prefix)-active-background);\r\n\t\t}\r\n\t}\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/98 */\r\n\t&.ck-disabled {\r\n\t\tbackground: var($(prefix)-disabled-background);\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A visual style of focused element's border.\r\n */\r\n@define-mixin ck-focus-ring {\r\n\t/* Disable native outline. */\r\n\toutline: none;\r\n\tborder: var(--ck-focus-ring)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A class which indicates that an element holding it is disabled.\r\n */\r\n@define-mixin ck-disabled {\r\n\topacity: var(--ck-disabled-opacity);\r\n}\r\n"],sourceRoot:""}]);const a=s},5332:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/button/switchbutton.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/button/switchbutton.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_disabled.css"],names:[],mappings:"AASE,4HACC,aACD,CCCF,MAEC,8CAA+C,CAE/C,0DAAgE,CAChE,2HAIC,CACD,0FACD,CAOC,0QAEC,sBAAuB,CADvB,aAED,CAEA,0DAGE,4CAOF,CAVA,0DAQE,2CAEF,CAEA,iDCpCA,eD4EA,CAxCA,yIChCC,qCDwED,CAxCA,2DAKE,gBAmCF,CAxCA,2DAUE,iBA8BF,CAxCA,iDAkBC,uDAAwD,CAFxD,4BAA6B,CAD7B,iFAAsF,CAEtF,0CAuBD,CApBC,2ECxDD,eDmEC,CAXA,6LCpDA,qCAAsC,CDsDpC,8CASF,CAXA,2EAOC,yDAA0D,CAD1D,gDAAiD,CAIjD,uBAA0B,CAL1B,+CAMD,CAEA,uDACC,6DAKD,CAHC,iFACC,qDACD,CAIF,6DEhFA,kCFkFA,CAGA,oCACC,wBAAyB,CAEzB,eAAgB,CADhB,YAQD,CALC,uDACC,iGAAmG,CAEnG,4BAA6B,CAD7B,kBAED,CAKA,uDACC,sDAkBD,CAhBC,6DACC,4DACD,CAEA,2FAKE,2DAMF,CAXA,2FASE,oEAEF",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-button.ck-switchbutton {\r\n\t& .ck-button__toggle {\r\n\t\tdisplay: block;\r\n\r\n\t\t& .ck-button__toggle__inner {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_disabled.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n/* Note: To avoid rendering issues (aliasing) but to preserve the responsive nature\r\nof the component, floating–point numbers have been used which, for the default font size\r\n(see: --ck-font-size-base), will generate simple integers. */\r\n:root {\r\n\t/* 34px at 13px font-size */\r\n\t--ck-switch-button-toggle-width: 2.6153846154em;\r\n\t/* 14px at 13px font-size */\r\n\t--ck-switch-button-toggle-inner-size: calc(1.0769230769em + 1px);\r\n\t--ck-switch-button-translation: calc(\r\n\t\tvar(--ck-switch-button-toggle-width) -\r\n\t\tvar(--ck-switch-button-toggle-inner-size) -\r\n\t\t2px /* Border */\r\n\t);\r\n\t--ck-switch-button-inner-hover-shadow: 0 0 0 5px var(--ck-color-switch-button-inner-shadow);\r\n}\r\n\r\n.ck.ck-button.ck-switchbutton {\r\n\t/* Unlike a regular button, the switch button text color and background should never change.\r\n\t * Changing toggle switch (background, outline) is enough to carry the information about the\r\n\t * state of the entire component (https://github.com/ckeditor/ckeditor5/issues/12519)\r\n\t */\r\n\t&, &:hover, &:focus, &:active, &.ck-on:hover, &.ck-on:focus, &.ck-on:active {\r\n\t\tcolor: inherit;\r\n\t\tbackground: transparent;\r\n\t}\r\n\r\n\t& .ck-button__label {\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\t/* Separate the label from the switch */\r\n\t\t\tmargin-right: calc(2 * var(--ck-spacing-large));\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\t/* Separate the label from the switch */\r\n\t\t\tmargin-left: calc(2 * var(--ck-spacing-large));\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-button__toggle {\r\n\t\t@mixin ck-rounded-corners;\r\n\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\t/* Make sure the toggle is always to the right as far as possible. */\r\n\t\t\tmargin-left: auto;\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\t/* Make sure the toggle is always to the left as far as possible. */\r\n\t\t\tmargin-right: auto;\r\n\t\t}\r\n\r\n\t\t/* Apply some smooth transition to the box-shadow and border. */\r\n\t\t/* Gently animate the background color of the toggle switch */\r\n\t\ttransition: background 400ms ease, box-shadow .2s ease-in-out, outline .2s ease-in-out;\r\n\t\tborder: 1px solid transparent;\r\n\t\twidth: var(--ck-switch-button-toggle-width);\r\n\t\tbackground: var(--ck-color-switch-button-off-background);\r\n\r\n\t\t& .ck-button__toggle__inner {\r\n\t\t\t@mixin ck-rounded-corners {\r\n\t\t\t\tborder-radius: calc(.5 * var(--ck-border-radius));\r\n\t\t\t}\r\n\r\n\t\t\twidth: var(--ck-switch-button-toggle-inner-size);\r\n\t\t\theight: var(--ck-switch-button-toggle-inner-size);\r\n\t\t\tbackground: var(--ck-color-switch-button-inner-background);\r\n\r\n\t\t\t/* Gently animate the inner part of the toggle switch */\r\n\t\t\ttransition: all 300ms ease;\r\n\t\t}\r\n\r\n\t\t&:hover {\r\n\t\t\tbackground: var(--ck-color-switch-button-off-hover-background);\r\n\r\n\t\t\t& .ck-button__toggle__inner {\r\n\t\t\t\tbox-shadow: var(--ck-switch-button-inner-hover-shadow);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-disabled .ck-button__toggle {\r\n\t\t@mixin ck-disabled;\r\n\t}\r\n\r\n\t/* Overriding default .ck-button:focus styles + an outline around the toogle */\r\n\t&:focus {\r\n\t\tborder-color: transparent;\r\n\t\toutline: none;\r\n\t\tbox-shadow: none;\r\n\r\n\t\t& .ck-button__toggle {\r\n\t\t\tbox-shadow: 0 0 0 1px var(--ck-color-base-background), 0 0 0 5px var(--ck-color-focus-outer-shadow);\r\n\t\t\toutline-offset: 1px;\r\n\t\t\toutline: var(--ck-focus-ring);\r\n\t\t}\r\n\t}\r\n\r\n\t/* stylelint-disable-next-line no-descending-specificity */\r\n\t&.ck-on {\r\n\t\t& .ck-button__toggle {\r\n\t\t\tbackground: var(--ck-color-switch-button-on-background);\r\n\r\n\t\t\t&:hover {\r\n\t\t\t\tbackground: var(--ck-color-switch-button-on-hover-background);\r\n\t\t\t}\r\n\r\n\t\t\t& .ck-button__toggle__inner {\r\n\t\t\t\t/*\r\n\t\t\t\t* Move the toggle switch to the right. It will be animated.\r\n\t\t\t\t*/\r\n\t\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\t\ttransform: translateX( var( --ck-switch-button-translation ) );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\t\ttransform: translateX( calc( -1 * var( --ck-switch-button-translation ) ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A class which indicates that an element holding it is disabled.\r\n */\r\n@define-mixin ck-disabled {\r\n\topacity: var(--ck-disabled-opacity);\r\n}\r\n"],sourceRoot:""}]);const a=s},6781:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/colorgrid/colorgrid.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/colorgrid/colorgrid.css"],names:[],mappings:"AAKA,kBACC,YACD,CCAA,MACC,8BAA+B,CAK/B,wCACD,CAEA,kBACC,YAAa,CACb,WACD,CAEA,wBAOC,QAAS,CALT,qCAAsC,CAEtC,yCAA0C,CAD1C,wCAAyC,CAEzC,SAAU,CACV,8BAA+B,CAL/B,oCAyCD,CAjCC,oCACC,YAAa,CACb,gBACD,CAEA,4DACC,gDACD,CAEA,oCAEC,2CAA4C,CAD5C,YAED,CAEA,8BACC,8FAKD,CAHC,0CACC,aACD,CAGD,8HAIC,QACD,CAEA,gGAEC,iGACD,CAGD,yBACC,oCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-color-grid {\r\n\tdisplay: grid;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n\r\n:root {\r\n\t--ck-color-grid-tile-size: 24px;\r\n\r\n\t/* Not using global colors here because these may change but some colors in a pallette\r\n\t * require special treatment. For instance, this ensures no matter what the UI text color is,\r\n\t * the check icon will look good on the black color tile. */\r\n\t--ck-color-color-grid-check-icon: hsl(212, 81%, 46%);\r\n}\r\n\r\n.ck.ck-color-grid {\r\n\tgrid-gap: 5px;\r\n\tpadding: 8px;\r\n}\r\n\r\n.ck.ck-color-grid__tile {\r\n\twidth: var(--ck-color-grid-tile-size);\r\n\theight: var(--ck-color-grid-tile-size);\r\n\tmin-width: var(--ck-color-grid-tile-size);\r\n\tmin-height: var(--ck-color-grid-tile-size);\r\n\tpadding: 0;\r\n\ttransition: .2s ease box-shadow;\r\n\tborder: 0;\r\n\r\n\t&.ck-disabled {\r\n\t\tcursor: unset;\r\n\t\ttransition: unset;\r\n\t}\r\n\r\n\t&.ck-color-table__color-tile_bordered {\r\n\t\tbox-shadow: 0 0 0 1px var(--ck-color-base-border);\r\n\t}\r\n\r\n\t& .ck.ck-icon {\r\n\t\tdisplay: none;\r\n\t\tcolor: var(--ck-color-color-grid-check-icon);\r\n\t}\r\n\r\n\t&.ck-on {\r\n\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-base-text);\r\n\r\n\t\t& .ck.ck-icon {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-on,\r\n\t&:focus:not( .ck-disabled ),\r\n\t&:hover:not( .ck-disabled ) {\r\n\t\t/* Disable the default .ck-button\'s border ring. */\r\n\t\tborder: 0;\r\n\t}\r\n\r\n\t&:focus:not( .ck-disabled ),\r\n\t&:hover:not( .ck-disabled ) {\r\n\t\tbox-shadow: inset 0 0 0 1px var(--ck-color-base-background), 0 0 0 2px var(--ck-color-focus-border);\r\n\t}\r\n}\r\n\r\n.ck.ck-color-grid__label {\r\n\tpadding: 0 var(--ck-spacing-standard);\r\n}\r\n'],sourceRoot:""}]);const a=s},5485:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-modal)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/dropdown/dropdown.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/dropdown.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_disabled.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,MACC,4BACD,CAEA,gBACC,oBAAqB,CACrB,iBA2ED,CAzEC,oCACC,mBAAoB,CACpB,2BACD,CAGA,+CACC,UACD,CAEA,oCACC,YAAa,CAEb,sCAAuC,CAEvC,iBAAkB,CAHlB,yBA4DD,CAvDC,+DACC,oBACD,CAEA,mSAKC,WACD,CAEA,mSAUC,WAAY,CADZ,QAED,CAEA,oHAEC,MACD,CAEA,oHAEC,OACD,CAEA,kHAGC,QAAS,CACT,0BACD,CAEA,sHAGC,QAAS,CACT,0BACD,CAEA,sHAGC,QAAS,CACT,0BACD,CAQF,mCACC,mCACD,CCpFA,MACC,sDACD,CAEA,gBAEC,iBA2ED,CAzEC,oCACC,mCACD,CAGC,8CAIC,sCAAuC,CAHvC,gCAID,CAIA,8CACC,+BAAgC,CAGhC,oCACD,CAGD,gDC/BA,kCDiCA,CAIE,mFAEC,oCACD,CAIA,mFAEC,qCACD,CAID,iEAEC,eAAgB,CAChB,sBAAuB,CAFvB,SAGD,CAGA,6EC1DD,kCD4DC,CAGA,qDACC,2BAA4B,CAC5B,4BACD,CAEA,sGACC,UACD,CAGA,yHAEC,eAKD,CAHC,qIE7EF,2CF+EE,CAKH,uBGlFC,eH8GD,CA5BA,qFG9EE,qCH0GF,CA5BA,uBAIC,oDAAqD,CACrD,sDAAuD,CACvD,QAAS,CE1FT,oCAA8B,CF6F9B,cAmBD,CAfC,6CACC,wBACD,CAEA,6CACC,yBACD,CAEA,6CACC,2BACD,CAEA,6CACC,4BACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-dropdown-max-width: 75vw;\r\n}\r\n\r\n.ck.ck-dropdown {\r\n\tdisplay: inline-block;\r\n\tposition: relative;\r\n\r\n\t& .ck-dropdown__arrow {\r\n\t\tpointer-events: none;\r\n\t\tz-index: var(--ck-z-default);\r\n\t}\r\n\r\n\t/* Dropdown button should span horizontally, e.g. in vertical toolbars */\r\n\t& .ck-button.ck-dropdown__button {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t& .ck-dropdown__panel {\r\n\t\tdisplay: none;\r\n\t\tz-index: var(--ck-z-modal);\r\n\t\tmax-width: var(--ck-dropdown-max-width);\r\n\r\n\t\tposition: absolute;\r\n\r\n\t\t&.ck-dropdown__panel-visible {\r\n\t\t\tdisplay: inline-block;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_ne,\r\n\t\t&.ck-dropdown__panel_nw,\r\n\t\t&.ck-dropdown__panel_n,\r\n\t\t&.ck-dropdown__panel_nmw,\r\n\t\t&.ck-dropdown__panel_nme {\r\n\t\t\tbottom: 100%;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_se,\r\n\t\t&.ck-dropdown__panel_sw,\r\n\t\t&.ck-dropdown__panel_smw,\r\n\t\t&.ck-dropdown__panel_sme,\r\n\t\t&.ck-dropdown__panel_s {\r\n\t\t\t/*\r\n\t\t\t * Using transform: translate3d( 0, 100%, 0 ) causes blurry dropdown on Chrome 67-78+ on non-retina displays.\r\n\t\t\t * See https://github.com/ckeditor/ckeditor5/issues/1053.\r\n\t\t\t */\r\n\t\t\ttop: 100%;\r\n\t\t\tbottom: auto;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_ne,\r\n\t\t&.ck-dropdown__panel_se {\r\n\t\t\tleft: 0px;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_nw,\r\n\t\t&.ck-dropdown__panel_sw {\r\n\t\t\tright: 0px;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_s,\r\n\t\t&.ck-dropdown__panel_n {\r\n\t\t\t/* Positioning panels relative to the center of the button */\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_nmw,\r\n\t\t&.ck-dropdown__panel_smw {\r\n\t\t\t/* Positioning panels relative to the middle-west of the button */\r\n\t\t\tleft: 75%;\r\n\t\t\ttransform: translateX(-75%);\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__panel_nme,\r\n\t\t&.ck-dropdown__panel_sme {\r\n\t\t\t/* Positioning panels relative to the middle-east of the button */\r\n\t\t\tleft: 25%;\r\n\t\t\ttransform: translateX(-25%);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*\r\n * Toolbar dropdown panels should be always above the UI (eg. other dropdown panels) from the editor's content.\r\n * See https://github.com/ckeditor/ckeditor5/issues/7874\r\n */\r\n.ck.ck-toolbar .ck-dropdown__panel {\r\n\tz-index: calc( var(--ck-z-modal) + 1 );\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_disabled.css";\r\n@import "../../../mixins/_shadow.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n:root {\r\n\t--ck-dropdown-arrow-size: calc(0.5 * var(--ck-icon-size));\r\n}\r\n\r\n.ck.ck-dropdown {\r\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\r\n\tfont-size: inherit;\r\n\r\n\t& .ck-dropdown__arrow {\r\n\t\twidth: var(--ck-dropdown-arrow-size);\r\n\t}\r\n\r\n\t@mixin ck-dir ltr {\r\n\t\t& .ck-dropdown__arrow {\r\n\t\t\tright: var(--ck-spacing-standard);\r\n\r\n\t\t\t/* A space to accommodate the triangle. */\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-dir rtl {\r\n\t\t& .ck-dropdown__arrow {\r\n\t\t\tleft: var(--ck-spacing-standard);\r\n\r\n\t\t\t/* A space to accommodate the triangle. */\r\n\t\t\tmargin-right: var(--ck-spacing-small);\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-disabled .ck-dropdown__arrow {\r\n\t\t@mixin ck-disabled;\r\n\t}\r\n\r\n\t& .ck-button.ck-dropdown__button {\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\t&:not(.ck-button_with-text) {\r\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\r\n\t\t\t\tpadding-left: var(--ck-spacing-small);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\t&:not(.ck-button_with-text) {\r\n\t\t\t\t/* Make sure dropdowns with just an icon have the right inner spacing */\r\n\t\t\t\tpadding-right: var(--ck-spacing-small);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* #23 */\r\n\t\t& .ck-button__label {\r\n\t\t\twidth: 7em;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\r\n\t\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/70 */\r\n\t\t&.ck-disabled .ck-button__label {\r\n\t\t\t@mixin ck-disabled;\r\n\t\t}\r\n\r\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/816 */\r\n\t\t&.ck-on {\r\n\t\t\tborder-bottom-left-radius: 0;\r\n\t\t\tborder-bottom-right-radius: 0;\r\n\t\t}\r\n\r\n\t\t&.ck-dropdown__button_label-width_auto .ck-button__label {\r\n\t\t\twidth: auto;\r\n\t\t}\r\n\r\n\t\t/* https://github.com/ckeditor/ckeditor5/issues/8699 */\r\n\t\t&.ck-off:active,\r\n\t\t&.ck-on:active {\r\n\t\t\tbox-shadow: none;\r\n\t\t\t\r\n\t\t\t&:focus {\r\n\t\t\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck.ck-dropdown__panel {\r\n\t@mixin ck-rounded-corners;\r\n\t@mixin ck-drop-shadow;\r\n\r\n\tbackground: var(--ck-color-dropdown-panel-background);\r\n\tborder: 1px solid var(--ck-color-dropdown-panel-border);\r\n\tbottom: 0;\r\n\r\n\t/* Make sure the panel is at least as wide as the drop-down\'s button. */\r\n\tmin-width: 100%;\r\n\r\n\t/* Disabled corner border radius to be consistent with the .dropdown__button\r\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\r\n\t&.ck-dropdown__panel_se {\r\n\t\tborder-top-left-radius: 0;\r\n\t}\r\n\r\n\t&.ck-dropdown__panel_sw {\r\n\t\tborder-top-right-radius: 0;\r\n\t}\r\n\r\n\t&.ck-dropdown__panel_ne {\r\n\t\tborder-bottom-left-radius: 0;\r\n\t}\r\n\r\n\t&.ck-dropdown__panel_nw {\r\n\t\tborder-bottom-right-radius: 0;\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A class which indicates that an element holding it is disabled.\r\n */\r\n@define-mixin ck-disabled {\r\n\topacity: var(--ck-disabled-opacity);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},3949:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/listdropdown.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,6CCIC,eDqBD,CAzBA,iICQE,qCAAsC,CDJtC,wBAqBF,CAfE,mFCND,eDYC,CANA,6MCFA,qCAAsC,CDKpC,2BAA4B,CAC5B,4BAA6B,CAF7B,wBAIF,CAEA,kFCdD,eDmBC,CALA,2MCVA,qCAAsC,CDYpC,wBAAyB,CACzB,yBAEF",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n\r\n.ck.ck-dropdown .ck-dropdown__panel .ck-list {\r\n\t/* Disabled radius of top-left border to be consistent with .dropdown__button\r\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\r\n\t@mixin ck-rounded-corners {\r\n\t\tborder-top-left-radius: 0;\r\n\t}\r\n\r\n\t/* Make sure the button belonging to the first/last child of the list goes well with the\r\n\tborder radius of the entire panel. */\r\n\t& .ck-list__item {\r\n\t\t&:first-child .ck-button {\r\n\t\t\t@mixin ck-rounded-corners {\r\n\t\t\t\tborder-top-left-radius: 0;\r\n\t\t\t\tborder-bottom-left-radius: 0;\r\n\t\t\t\tborder-bottom-right-radius: 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:last-child .ck-button {\r\n\t\t\t@mixin ck-rounded-corners {\r\n\t\t\t\tborder-top-left-radius: 0;\r\n\t\t\t\tborder-top-right-radius: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},7686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}',"",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/dropdown/splitbutton.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/splitbutton.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAKA,mBAEC,iBAKD,CAHC,iDACC,qCACD,CCJD,MACC,gDAAyD,CACzD,4CACD,CAMC,oIAKE,gCAAiC,CADjC,6BASF,CAbA,oIAWE,+BAAgC,CADhC,4BAGF,CAEA,0CAGC,eAiBD,CApBA,oDAQE,+BAAgC,CADhC,4BAaF,CApBA,oDAcE,gCAAiC,CADjC,6BAOF,CAHC,8CACC,mCACD,CAKD,sDAEC,qBAAwB,CADxB,kBAED,CAQC,0KACC,wDACD,CAIA,8JAKC,0DAA2D,CAJ3D,UAAW,CAGX,WAAY,CAFZ,iBAAkB,CAClB,SAGD,CAGA,sIACC,iEACD,CAGC,kLACC,SACD,CAIA,kLACC,UACD,CAMF,uCCzFA,eDmGA,CAVA,qHCrFC,qCD+FD,CARE,qKACC,2BACD,CAEA,mKACC,4BACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-splitbutton {\r\n\t/* Enable font size inheritance, which allows fluid UI scaling. */\r\n\tfont-size: inherit;\r\n\r\n\t& .ck-splitbutton__action:focus {\r\n\t\tz-index: calc(var(--ck-z-default) + 1);\r\n\t}\r\n}\r\n\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n\r\n:root {\r\n\t--ck-color-split-button-hover-background: hsl(0, 0%, 92%);\r\n\t--ck-color-split-button-hover-border: hsl(0, 0%, 70%);\r\n}\r\n\r\n.ck.ck-splitbutton {\r\n\t/*\r\n\t * Note: ck-rounded and ck-dir mixins don\'t go together (because they both use @nest).\r\n\t */\r\n\t&:hover > .ck-splitbutton__action,\r\n\t&.ck-splitbutton_open > .ck-splitbutton__action {\r\n\t\t@nest [dir="ltr"] & {\r\n\t\t\t/* Don\'t round the action button on the right side */\r\n\t\t\tborder-top-right-radius: unset;\r\n\t\t\tborder-bottom-right-radius: unset;\r\n\t\t}\r\n\r\n\t\t@nest [dir="rtl"] & {\r\n\t\t\t/* Don\'t round the action button on the left side */\r\n\t\t\tborder-top-left-radius: unset;\r\n\t\t\tborder-bottom-left-radius: unset;\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck-splitbutton__arrow {\r\n\t\t/* It\'s a text-less button and since the icon is positioned absolutely in such situation,\r\n\t\tit must get some arbitrary min-width. */\r\n\t\tmin-width: unset;\r\n\r\n\t\t@nest [dir="ltr"] & {\r\n\t\t\t/* Don\'t round the arrow button on the left side */\r\n\t\t\tborder-top-left-radius: unset;\r\n\t\t\tborder-bottom-left-radius: unset;\r\n\t\t}\r\n\r\n\t\t@nest [dir="rtl"] & {\r\n\t\t\t/* Don\'t round the arrow button on the right side */\r\n\t\t\tborder-top-right-radius: unset;\r\n\t\t\tborder-bottom-right-radius: unset;\r\n\t\t}\r\n\r\n\t\t& svg {\r\n\t\t\twidth: var(--ck-dropdown-arrow-size);\r\n\t\t}\r\n\t}\r\n\r\n\t/* Make sure the divider stretches 100% height of the button\r\n\thttps://github.com/ckeditor/ckeditor5/issues/10936 */\r\n\t& > .ck-splitbutton__arrow:not(:focus) {\r\n\t\tborder-top-width: 0px;\r\n\t\tborder-bottom-width: 0px;\r\n\t}\r\n\r\n\t/* When the split button is "open" (the arrow is on) or being hovered, it should get some styling\r\n\tas a whole. The background of both buttons should stand out and there should be a visual\r\n\tseparation between both buttons. */\r\n\t&.ck-splitbutton_open,\r\n\t&:hover {\r\n\t\t/* When the split button hovered as a whole, not as individual buttons. */\r\n\t\t& > .ck-button:not(.ck-on):not(.ck-disabled):not(:hover) {\r\n\t\t\tbackground: var(--ck-color-split-button-hover-background);\r\n\t\t}\r\n\r\n\t\t/* Splitbutton separator needs to be set with the ::after pseudoselector\r\n\t\tto display properly the borders on focus */\r\n\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\r\n\t\t\tcontent: \'\';\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 1px;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground-color: var(--ck-color-split-button-hover-border);\r\n\t\t}\r\n\r\n\t\t/* Make sure the divider between the buttons looks fine when the button is focused */\r\n\t\t& > .ck-splitbutton__arrow:focus::after {\r\n\t\t\t--ck-color-split-button-hover-border: var(--ck-color-focus-border);\r\n\t\t}\r\n\r\n\t\t@nest [dir="ltr"] & {\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\r\n\t\t\t\tleft: -1px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@nest [dir="rtl"] & {\r\n\t\t\t& > .ck-splitbutton__arrow:not(.ck-disabled)::after {\r\n\t\t\t\tright: -1px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* Don\'t round the bottom left and right corners of the buttons when "open"\r\n\thttps://github.com/ckeditor/ckeditor5/issues/816 */\r\n\t&.ck-splitbutton_open {\r\n\t\t@mixin ck-rounded-corners {\r\n\t\t\t& > .ck-splitbutton__action {\r\n\t\t\t\tborder-bottom-left-radius: 0;\r\n\t\t\t}\r\n\r\n\t\t\t& > .ck-splitbutton__arrow {\r\n\t\t\t\tborder-bottom-right-radius: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},7339:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/dropdown/toolbardropdown.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/dropdown/toolbardropdown.css"],names:[],mappings:"AAKA,MACC,oCACD,CAEA,4CAGC,8CAA+C,CAD/C,iBAQD,CAJE,6DACC,qCACD,CCZF,oCACC,QACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-toolbar-dropdown-max-width: 60vw;\r\n}\r\n\r\n.ck.ck-toolbar-dropdown > .ck-dropdown__panel {\r\n\t/* https://github.com/ckeditor/ckeditor5/issues/5586 */\r\n\twidth: max-content;\r\n\tmax-width: var(--ck-toolbar-dropdown-max-width);\r\n\r\n\t& .ck-button {\r\n\t\t&:focus {\r\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\r\n\t\t}\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-toolbar-dropdown .ck-toolbar {\r\n\tborder: 0;\r\n}\r\n"],sourceRoot:""}]);const a=s},9688:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/editorui/editorui.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAWA,MACC,0CACD,CAEA,yDCJC,eDWD,CAPA,yJCAE,qCDOF,CAJC,oEEPA,2BAA2B,CCF3B,qCAA8B,CDC9B,YFWA,CAGD,+BAGC,4BAA6B,CAF7B,aAAc,CACd,oCA6BD,CA1BC,wCACC,eACD,CAEA,wCACC,gBACD,CAGA,4CACC,kCACD,CAGA,2CAKC,qCACD,CAGA,sDACC,kDACD,CAKA,gEACC,mDACD,CAIA,gEACC,gDACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_disabled.css";\r\n@import "../../../mixins/_shadow.css";\r\n@import "../../../mixins/_focus.css";\r\n@import "../../mixins/_button.css";\r\n\r\n:root {\r\n\t--ck-color-editable-blur-selection: hsl(0, 0%, 85%);\r\n}\r\n\r\n.ck.ck-editor__editable:not(.ck-editor__nested-editable) {\r\n\t@mixin ck-rounded-corners;\r\n\r\n\t&.ck-focused {\r\n\t\t@mixin ck-focus-ring;\r\n\t\t@mixin ck-box-shadow var(--ck-inner-shadow);\r\n\t}\r\n}\r\n\r\n.ck.ck-editor__editable_inline {\r\n\toverflow: auto;\r\n\tpadding: 0 var(--ck-spacing-standard);\r\n\tborder: 1px solid transparent;\r\n\r\n\t&[dir="ltr"] {\r\n\t\ttext-align: left;\r\n\t}\r\n\r\n\t&[dir="rtl"] {\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/116 */\r\n\t& > *:first-child {\r\n\t\tmargin-top: var(--ck-spacing-large);\r\n\t}\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5/issues/847 */\r\n\t& > *:last-child {\r\n\t\t/*\r\n\t\t * This value should match with the default margins of the block elements (like .media or .image)\r\n\t\t * to avoid a content jumping when the fake selection container shows up (See https://github.com/ckeditor/ckeditor5/issues/9825).\r\n\t\t */\r\n\t\tmargin-bottom: var(--ck-spacing-large);\r\n\t}\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5/issues/6517 */\r\n\t&.ck-blurred ::selection {\r\n\t\tbackground: var(--ck-color-editable-blur-selection);\r\n\t}\r\n}\r\n\r\n/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/111 */\r\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_n"] {\r\n\t&::after {\r\n\t\tborder-bottom-color: var(--ck-color-base-foreground);\r\n\t}\r\n}\r\n\r\n.ck.ck-balloon-panel.ck-toolbar-container[class*="arrow_s"] {\r\n\t&::after {\r\n\t\tborder-top-color: var(--ck-color-base-foreground);\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A visual style of focused element's border.\r\n */\r\n@define-mixin ck-focus-ring {\r\n\t/* Disable native outline. */\r\n\toutline: none;\r\n\tborder: var(--ck-focus-ring)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},8847:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}.ck.ck-form__header .ck-form__header__label{font-weight:700}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/formheader/formheader.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/formheader/formheader.css"],names:[],mappings:"AAKA,oBAIC,kBAAmB,CAHnB,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CAEjB,6BACD,CCNA,MACC,4BACD,CAEA,oBAIC,mDAAoD,CAFpD,mCAAoC,CACpC,wCAAyC,CAFzC,uDAQD,CAHC,4CACC,eACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-form__header {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: nowrap;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-form-header-height: 38px;\r\n}\r\n\r\n.ck.ck-form__header {\r\n\tpadding: var(--ck-spacing-small) var(--ck-spacing-large);\r\n\theight: var(--ck-form-header-height);\r\n\tline-height: var(--ck-form-header-height);\r\n\tborder-bottom: 1px solid var(--ck-color-base-border);\r\n\r\n\t& .ck-form__header__label {\r\n\t\tfont-weight: bold;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},6574:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{font-size:.8333350694em;height:var(--ck-icon-size);width:var(--ck-icon-size);will-change:transform}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/icon/icon.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/icon/icon.css"],names:[],mappings:"AAKA,YACC,qBACD,CCFA,MACC,0EACD,CAEA,YAKC,uBAAwB,CAHxB,0BAA2B,CAD3B,yBAA0B,CAU1B,qBAoBD,CAlBC,0BALA,cAQA,CAMC,sEACC,aAMD,CAJC,+CAEC,iBACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-icon {\r\n\tvertical-align: middle;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-icon-size: calc(var(--ck-line-height-base) * var(--ck-font-size-normal));\r\n}\r\n\r\n.ck.ck-icon {\r\n\twidth: var(--ck-icon-size);\r\n\theight: var(--ck-icon-size);\r\n\r\n\t/* Multiplied by the height of the line in "px" should give SVG "viewport" dimensions */\r\n\tfont-size: .8333350694em;\r\n\r\n\t/* Inherit cursor style (#5). */\r\n\tcursor: inherit;\r\n\r\n\t/* This will prevent blurry icons on Firefox. See #340. */\r\n\twill-change: transform;\r\n\r\n\t& * {\r\n\t\t/* Inherit cursor style (#5). */\r\n\t\tcursor: inherit;\r\n\t}\r\n\r\n\t/* Allows dynamic coloring of an icon by inheriting its color from the parent. */\r\n\t&.ck-icon_inherit-color {\r\n\t\tcolor: inherit;\r\n\r\n\t\t& * {\r\n\t\t\tcolor: inherit;\r\n\r\n\t\t\t&:not([fill]) {\r\n\t\t\t\t/* Needed by FF. */\r\n\t\t\t\tfill: currentColor;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},4879:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{border-radius:0}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}","",{version:3,sources:["webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/input/input.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AASA,MACC,qBAAsB,CAGtB,2CACD,CAEA,aCLC,eD2CD,CAtCA,iECDE,qCDuCF,CAtCA,aAGC,2CAA4C,CAC5C,6CAA8C,CAK9C,4CAA6C,CAH7C,+BAAgC,CADhC,6DAA8D,CAO9D,4DA0BD,CAxBC,mBEnBA,2BAA2B,CCF3B,2CAA8B,CDC9B,YFuBA,CAEA,uBAEC,oDAAqD,CADrD,sDAAuD,CAEvD,yCAMD,CAJC,6BG/BD,oDHkCC,CAGD,sBAEC,sCAAuC,CADvC,+CAMD,CAHC,4BGzCD,iDH2CC,CAIF,0BACC,IACC,0BACD,CAEA,IACC,yBACD,CAEA,IACC,0BACD,CAEA,IACC,yBACD,CACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_focus.css";\r\n@import "../../../mixins/_shadow.css";\r\n\r\n:root {\r\n\t--ck-input-width: 18em;\r\n\r\n\t/* Backward compatibility. */\r\n\t--ck-input-text-width: var(--ck-input-width);\r\n}\r\n\r\n.ck.ck-input {\r\n\t@mixin ck-rounded-corners;\r\n\r\n\tbackground: var(--ck-color-input-background);\r\n\tborder: 1px solid var(--ck-color-input-border);\r\n\tpadding: var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);\r\n\tmin-width: var(--ck-input-width);\r\n\r\n\t/* This is important to stay of the same height as surrounding buttons */\r\n\tmin-height: var(--ck-ui-component-min-height);\r\n\r\n\t/* Apply some smooth transition to the box-shadow and border. */\r\n\ttransition: box-shadow .1s ease-in-out, border .1s ease-in-out;\r\n\r\n\t&:focus {\r\n\t\t@mixin ck-focus-ring;\r\n\t\t@mixin ck-box-shadow var(--ck-focus-outer-shadow);\r\n\t}\r\n\r\n\t&[readonly] {\r\n\t\tborder: 1px solid var(--ck-color-input-disabled-border);\r\n\t\tbackground: var(--ck-color-input-disabled-background);\r\n\t\tcolor: var(--ck-color-input-disabled-text);\r\n\r\n\t\t&:focus {\r\n\t\t\t/* The read-only input should have a slightly less visible shadow when focused. */\r\n\t\t\t@mixin ck-box-shadow var(--ck-focus-disabled-outer-shadow);\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-error {\r\n\t\tborder-color: var(--ck-color-input-error-border);\r\n\t\tanimation: ck-input-shake .3s ease both;\r\n\r\n\t\t&:focus {\r\n\t\t\t@mixin ck-box-shadow var(--ck-focus-error-outer-shadow);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n@keyframes ck-input-shake {\r\n\t20% {\r\n\t\ttransform: translateX(-2px);\r\n\t}\r\n\r\n\t40% {\r\n\t\ttransform: translateX(2px);\r\n\t}\r\n\r\n\t60% {\r\n\t\ttransform: translateX(-1px);\r\n\t}\r\n\r\n\t80% {\r\n\t\ttransform: translateX(1px);\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A visual style of focused element's border.\r\n */\r\n@define-mixin ck-focus-ring {\r\n\t/* Disable native outline. */\r\n\toutline: none;\r\n\tborder: var(--ck-focus-ring)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},3662:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/label/label.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/label/label.css"],names:[],mappings:"AAKA,aACC,aACD,CAEA,mBACC,YACD,CCNA,aACC,eACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-label {\r\n\tdisplay: block;\r\n}\r\n\r\n.ck.ck-voice-label {\r\n\tdisplay: none;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-label {\r\n\tfont-weight: bold;\r\n}\r\n"],sourceRoot:""}]);const a=s},2577:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/labeledfield/labeledfieldview.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/labeledfield/labeledfieldview.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAMC,mEACC,YAAa,CACb,iBACD,CAEA,uCACC,aAAc,CACd,iBACD,CCND,MACC,kEAAsE,CACtE,gFAAiF,CACjF,oEAAqE,CACrE,8EAAiF,CACjF,yEACD,CAEA,0BCLC,eD8GD,CAzGA,2FCDE,qCD0GF,CAtGC,mEACC,UAmCD,CAjCC,gFACC,KA+BD,CAhCA,0FAIE,MA4BF,CAhCA,0FAQE,OAwBF,CAhCA,gFAiBC,yDAA0D,CAG1D,eAAmB,CADnB,kBAAoB,CAOpB,cAAe,CAFf,eAAgB,CANhB,2CAA8C,CAP9C,mBAAoB,CAYpB,sBAAuB,CARvB,6DAA+D,CAH/D,oBAAqB,CAgBrB,+JAID,CAQA,mKACC,gCACD,CAGD,yDACC,mCAAoC,CACpC,kCAAmC,CAInC,kBAKD,CAHC,6FACC,gCACD,CAID,4OAEC,yCACD,CAIA,oUAGE,+HAYF,CAfA,oUAOE,wIAQF,CAfA,gTAaC,sBAAuB,CAFvB,iEAAkE,CAGlE,SACD,CAKA,8FACC,sBACD,CAGA,yIACC,SACD,CAGA,kMACC,8HACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-labeled-field-view {\r\n\t& > .ck.ck-labeled-field-view__input-wrapper {\r\n\t\tdisplay: flex;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t& .ck.ck-label {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n@import "../../../mixins/_rounded.css";\r\n\r\n:root {\r\n\t--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, 0.24, 0.95);\r\n\t--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-spacing-medium);\r\n\t--ck-labeled-field-label-default-position-x: var(--ck-spacing-medium);\r\n\t--ck-labeled-field-label-default-position-y: calc(0.6 * var(--ck-font-size-base));\r\n\t--ck-color-labeled-field-label-background: var(--ck-color-base-background);\r\n}\r\n\r\n.ck.ck-labeled-field-view {\r\n\t@mixin ck-rounded-corners;\r\n\r\n\t& > .ck.ck-labeled-field-view__input-wrapper {\r\n\t\twidth: 100%;\r\n\r\n\t\t& > .ck.ck-label {\r\n\t\t\ttop: 0px;\r\n\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tleft: 0px;\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tright: 0px;\r\n\t\t\t}\r\n\r\n\t\t\tpointer-events: none;\r\n\t\t\ttransform-origin: 0 0;\r\n\r\n\t\t\t/* By default, display the label scaled down above the field. */\r\n\t\t\ttransform: translate(var(--ck-spacing-medium), -6px) scale(.75);\r\n\r\n\t\t\tbackground: var(--ck-color-labeled-field-label-background);\r\n\t\t\tpadding: 0 calc(.5 * var(--ck-font-size-tiny));\r\n\t\t\tline-height: initial;\r\n\t\t\tfont-weight: normal;\r\n\r\n\t\t\t/* Prevent overflow when the label is longer than the input */\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\tmax-width: 100%;\r\n\r\n\t\t\ttransition:\r\n\t\t\t\ttransform var(--ck-labeled-field-view-transition),\r\n\t\t\t\tpadding var(--ck-labeled-field-view-transition),\r\n\t\t\t\tbackground var(--ck-labeled-field-view-transition);\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-error {\r\n\t\t& > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\r\n\t\t\tcolor: var(--ck-color-base-error);\r\n\t\t}\r\n\r\n\t\t& .ck-input:not([readonly]) + .ck.ck-label {\r\n\t\t\tcolor: var(--ck-color-base-error);\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-labeled-field-view__status {\r\n\t\tfont-size: var(--ck-font-size-small);\r\n\t\tmargin-top: var(--ck-spacing-small);\r\n\r\n\t\t/* Let the info wrap to the next line to avoid stretching the layout horizontally.\r\n\t\tThe status could be very long. */\r\n\t\twhite-space: normal;\r\n\r\n\t\t&.ck-labeled-field-view__status_error {\r\n\t\t\tcolor: var(--ck-color-base-error);\r\n\t\t}\r\n\t}\r\n\r\n\t/* Disabled fields and fields that have no focus should fade out. */\r\n\t&.ck-disabled > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\r\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\r\n\t\tcolor: var(--ck-color-input-disabled-text);\r\n\t}\r\n\r\n\t/* Fields that are disabled or not focused and without a placeholder should have full-sized labels. */\r\n\t/* stylelint-disable-next-line no-descending-specificity */\r\n\t&.ck-disabled.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label,\r\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck.ck-label {\r\n\t\t@mixin ck-dir ltr {\r\n\t\t\ttransform: translate(var(--ck-labeled-field-label-default-position-x), var(--ck-labeled-field-label-default-position-y)) scale(1);\r\n\t\t}\r\n\r\n\t\t@mixin ck-dir rtl {\r\n\t\t\ttransform: translate(calc(-1 * var(--ck-labeled-field-label-default-position-x)), var(--ck-labeled-field-label-default-position-y)) scale(1);\r\n\t\t}\r\n\r\n\t\t/* Compensate for the default translate position. */\r\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width));\r\n\r\n\t\tbackground: transparent;\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t/*------ DropdownView integration ----------------------------------------------------------------------------------- */\r\n\r\n\t/* Make sure dropdown\' background color in any of dropdown\'s state does not collide with labeled field. */\r\n\t& > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck.ck-button {\r\n\t\tbackground: transparent;\r\n\t}\r\n\r\n\t/* When the dropdown is "empty", the labeled field label replaces its label. */\r\n\t&.ck-labeled-field-view_empty > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown > .ck-button > .ck-button__label {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t/* Make sure the label of the empty, unfocused input does not cover the dropdown arrow. */\r\n\t&.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder) > .ck.ck-labeled-field-view__input-wrapper > .ck-dropdown + .ck-label {\r\n\t\tmax-width: calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard));\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},1046:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{background:var(--ck-color-list-background);list-style-type:none}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{border-radius:0;min-height:unset;padding:calc(var(--ck-line-height-base)*.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*.4*var(--ck-font-size-base));text-align:left;width:100%}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-switchbutton):not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;width:100%}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/list/list.css","webpack://./../ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/list/list.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,YAGC,YAAa,CACb,qBAAsB,CCFtB,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBDaD,CAZC,2DAEC,aACD,CAKA,kCACC,iBAAkB,CAClB,2BACD,CEfD,YCEC,eDGD,CALA,+DCME,qCDDF,CALA,YAIC,0CAA2C,CAD3C,oBAED,CAEA,kBACC,cAAe,CACf,cA2DD,CAzDC,6BAIC,eAAgB,CAHhB,gBAAiB,CAQjB,iIAEiE,CARjE,eAAgB,CADhB,UAwCD,CA7BC,+CAEC,yEACD,CAEA,oCACC,eACD,CAEA,mCACC,oDAAqD,CACrD,yCAaD,CAXC,0CACC,eACD,CAEA,2DACC,0DACD,CAEA,iFACC,4CACD,CAGD,qDACC,uDACD,CAMA,yCACC,0CAA2C,CAC3C,aAMD,CAJC,iEACC,uDAAwD,CACxD,aACD,CAKH,uBAGC,sCAAuC,CAFvC,UAAW,CACX,UAED",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../mixins/_unselectable.css";\r\n\r\n.ck.ck-list {\r\n\t@mixin ck-unselectable;\r\n\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\r\n\t& .ck-list__item,\r\n\t& .ck-list__separator {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/* Make sure that whatever child of the list item gets focus, it remains on the\r\n\ttop. Thanks to that, styles like box-shadow, outline, etc. are not masked by\r\n\tadjacent list items. */\r\n\t& .ck-list__item > *:focus {\r\n\t\tposition: relative;\r\n\t\tz-index: var(--ck-z-default);\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Makes element unselectable.\r\n */\r\n@define-mixin ck-unselectable {\r\n\t-moz-user-select: none;\r\n\t-webkit-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_disabled.css";\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_shadow.css";\r\n\r\n.ck.ck-list {\r\n\t@mixin ck-rounded-corners;\r\n\r\n\tlist-style-type: none;\r\n\tbackground: var(--ck-color-list-background);\r\n}\r\n\r\n.ck.ck-list__item {\r\n\tcursor: default;\r\n\tmin-width: 12em;\r\n\r\n\t& .ck-button {\r\n\t\tmin-height: unset;\r\n\t\twidth: 100%;\r\n\t\ttext-align: left;\r\n\t\tborder-radius: 0;\r\n\r\n\t\t/* List items should have the same height. Use absolute units to make sure it is so\r\n\t\t   because e.g. different heading styles may have different height\r\n\t\t   https://github.com/ckeditor/ckeditor5-heading/issues/63 */\r\n\t\tpadding:\r\n\t\t\tcalc(.2 * var(--ck-line-height-base) * var(--ck-font-size-base))\r\n\t\t\tcalc(.4 * var(--ck-line-height-base) * var(--ck-font-size-base));\r\n\r\n\t\t& .ck-button__label {\r\n\t\t\t/* https://github.com/ckeditor/ckeditor5-heading/issues/63 */\r\n\t\t\tline-height: calc(1.2 * var(--ck-line-height-base) * var(--ck-font-size-base));\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\tbox-shadow: none;\r\n\t\t}\r\n\r\n\t\t&.ck-on {\r\n\t\t\tbackground: var(--ck-color-list-button-on-background);\r\n\t\t\tcolor: var(--ck-color-list-button-on-text);\r\n\r\n\t\t\t&:active {\r\n\t\t\t\tbox-shadow: none;\r\n\t\t\t}\r\n\r\n\t\t\t&:hover:not(.ck-disabled) {\r\n\t\t\t\tbackground: var(--ck-color-list-button-on-background-focus);\r\n\t\t\t}\r\n\r\n\t\t\t&:focus:not(.ck-switchbutton):not(.ck-disabled) {\r\n\t\t\t\tborder-color: var(--ck-color-base-background);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:hover:not(.ck-disabled) {\r\n\t\t\tbackground: var(--ck-color-list-button-hover-background);\r\n\t\t}\r\n\t}\r\n\r\n\t/* It\'s unnecessary to change the background/text of a switch toggle; it has different ways\r\n\tof conveying its state (like the switcher) */\r\n\t& .ck-switchbutton {\r\n\t\t&.ck-on {\r\n\t\t\tbackground: var(--ck-color-list-background);\r\n\t\t\tcolor: inherit;\r\n\r\n\t\t\t&:hover:not(.ck-disabled) {\r\n\t\t\t\tbackground: var(--ck-color-list-button-hover-background);\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck.ck-list__separator {\r\n\theight: 1px;\r\n\twidth: 100%;\r\n\tbackground: var(--ck-color-base-border);\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},8793:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);box-shadow:var(--ck-drop-shadow),0 0;min-height:15px}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}',"",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/panel/balloonpanel.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/balloonpanel.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,MAEC,8DACD,CAEA,qBACC,YAAa,CACb,iBAAkB,CAElB,yBAyCD,CAtCE,+GAEC,UAAW,CACX,iBACD,CAEA,wDACC,6CACD,CAEA,uDACC,uDACD,CAIA,4CACC,6CACD,CAEA,2CACC,uDACD,CAIA,4CACC,6CACD,CAEA,2CACC,uDACD,CAGD,8CACC,aACD,CC9CD,MACC,6BAA8B,CAC9B,6BAA8B,CAC9B,8BAA+B,CAC/B,iCAAkC,CAClC,oEACD,CAEA,qBCLC,eDmMD,CA9LA,iFCDE,qCD+LF,CA9LA,qBAMC,2CAA4C,CAC5C,wEAAyE,CEdzE,oCAA8B,CFW9B,eA0LD,CApLE,+GAIC,kBAAmB,CADnB,QAAS,CADT,OAGD,CAIA,uFAEC,mHACD,CAEA,4CACC,6EAA8E,CAC9E,kDACD,CAEA,2CACC,iFAAkF,CAClF,gFACD,CAIA,uFAEC,mHACD,CAEA,4CACC,iEAAkE,CAClE,uDAAwD,CACxD,qDACD,CAEA,2CACC,iFAAkF,CAClF,mFACD,CAIA,uFAEC,mHACD,CAEA,4CACC,6EAA8E,CAC9E,oDACD,CAEA,2CACC,iFAAkF,CAClF,kFACD,CAIA,uFAEC,mHACD,CAEA,4CACC,6EAA8E,CAC9E,mDACD,CAEA,2CACC,iFAAkF,CAClF,iFACD,CAIA,yGAEC,QAAS,CACT,uDAA0D,CAC1D,2CACD,CAIA,2GAEC,+CAAkD,CAClD,2CACD,CAIA,2GAEC,gDAAmD,CACnD,2CACD,CAIA,yGAIC,8CAAiD,CAFjD,QAAS,CACT,uDAED,CAIA,2GAGC,8CAAiD,CADjD,+CAED,CAIA,2GAGC,8CAAiD,CADjD,gDAED,CAIA,6GAIC,8CAAiD,CADjD,uDAA0D,CAD1D,SAGD,CAIA,6GAIC,8CAAiD,CAFjD,QAAS,CACT,sDAED,CAIA,6GAGC,uDAA0D,CAD1D,SAAU,CAEV,2CACD,CAIA,6GAEC,QAAS,CACT,sDAAyD,CACzD,2CACD,CAIA,yGAGC,sDAAyD,CADzD,6CAAgD,CAEhD,OACD,CAIA,yGAEC,4CAA+C,CAC/C,sDAAyD,CACzD,OACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/* Make sure the balloon arrow does not float over its children. */\r\n\t--ck-balloon-panel-arrow-z-index: calc(var(--ck-z-default) - 3);\r\n}\r\n\r\n.ck.ck-balloon-panel {\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\r\n\tz-index: var(--ck-z-modal);\r\n\r\n\t&.ck-balloon-panel_with-arrow {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tcontent: "";\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_n"] {\r\n\t\t&::before {\r\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_s"] {\r\n\t\t&::before {\r\n\t\t\tz-index: var(--ck-balloon-panel-arrow-z-index);\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tz-index: calc(var(--ck-balloon-panel-arrow-z-index) + 1);\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_visible {\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n','/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "../../../mixins/_shadow.css";\r\n\r\n:root {\r\n\t--ck-balloon-border-width: 1px;\r\n\t--ck-balloon-arrow-offset: 2px;\r\n\t--ck-balloon-arrow-height: 10px;\r\n\t--ck-balloon-arrow-half-width: 8px;\r\n\t--ck-balloon-arrow-drop-shadow: 0 2px 2px var(--ck-color-shadow-drop);\r\n}\r\n\r\n.ck.ck-balloon-panel {\r\n\t@mixin ck-rounded-corners;\r\n\t@mixin ck-drop-shadow;\r\n\r\n\tmin-height: 15px;\r\n\r\n\tbackground: var(--ck-color-panel-background);\r\n\tborder: var(--ck-balloon-border-width) solid var(--ck-color-panel-border);\r\n\r\n\t&.ck-balloon-panel_with-arrow {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\twidth: 0;\r\n\t\t\theight: 0;\r\n\t\t\tborder-style: solid;\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_n"] {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tborder-width: 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width);\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-border) transparent;\r\n\t\t\tmargin-top: calc( -1 * var(--ck-balloon-border-width) );\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tborder-color: transparent transparent var(--ck-color-panel-background) transparent;\r\n\t\t\tmargin-top: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_s"] {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tborder-width: var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width);\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tborder-color: var(--ck-color-panel-border) transparent transparent;\r\n\t\t\tfilter: drop-shadow(var(--ck-balloon-arrow-drop-shadow));\r\n\t\t\tmargin-bottom: calc( -1 * var(--ck-balloon-border-width) );\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tborder-color: var(--ck-color-panel-background) transparent transparent transparent;\r\n\t\t\tmargin-bottom: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_e"] {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tborder-width: var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height);\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tborder-color: transparent transparent transparent var(--ck-color-panel-border);\r\n\t\t\tmargin-right: calc( -1 * var(--ck-balloon-border-width) );\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tborder-color: transparent transparent transparent var(--ck-color-panel-background);\r\n\t\t\tmargin-right: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\r\n\t\t}\r\n\t}\r\n\r\n\t&[class*="arrow_w"] {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tborder-width: var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0;\r\n\t\t}\r\n\r\n\t\t&::before {\r\n\t\t\tborder-color: transparent var(--ck-color-panel-border) transparent transparent;\r\n\t\t\tmargin-left: calc( -1 * var(--ck-balloon-border-width) );\r\n\t\t}\r\n\r\n\t\t&::after {\r\n\t\t\tborder-color: transparent var(--ck-color-panel-background) transparent transparent;\r\n\t\t\tmargin-left: calc( var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width) );\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_n {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: 50%;\r\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_nw {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_ne {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_s {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: 50%;\r\n\t\t\tmargin-left: calc(-1 * var(--ck-balloon-arrow-half-width));\r\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_sw {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_se {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tright: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_sme {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tright: 25%;\r\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_smw {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: 25%;\r\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\tbottom: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_nme {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tright: 25%;\r\n\t\t\tmargin-right: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_nmw {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: 25%;\r\n\t\t\tmargin-left: calc(2 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_e {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tright: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t\tmargin-top: calc(-1 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: 50%;\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-balloon-panel_arrow_w {\r\n\t\t&::before,\r\n\t\t&::after {\r\n\t\t\tleft: calc(-1 * var(--ck-balloon-arrow-height));\r\n\t\t\tmargin-top: calc(-1 * var(--ck-balloon-arrow-half-width));\r\n\t\t\ttop: 50%;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},4650:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/panel/balloonrotator.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/balloonrotator.css"],names:[],mappings:"AAKA,oCAEC,kBAAmB,CADnB,YAAa,CAEb,sBACD,CAKA,6CACC,sBACD,CCXA,oCACC,6CAA8C,CAC9C,sDAAuD,CACvD,iCAgBD,CAbC,sCAGC,qCAAsC,CAFtC,oCAAqC,CACrC,kCAED,CAGA,iEAIC,mCAAoC,CAHpC,uCAID,CAMA,2DACC,eACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-balloon-rotator__navigation {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n/* Buttons inside a toolbar should be centered when rotator bar is wider.\r\n * See: https://github.com/ckeditor/ckeditor5-ui/issues/495\r\n */\r\n.ck .ck-balloon-rotator__content .ck-toolbar {\r\n\tjustify-content: center;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-balloon-rotator__navigation {\r\n\tbackground: var(--ck-color-toolbar-background);\r\n\tborder-bottom: 1px solid var(--ck-color-toolbar-border);\r\n\tpadding: 0 var(--ck-spacing-small);\r\n\r\n\t/* Let's keep similar appearance to `ck-toolbar`. */\r\n\t& > * {\r\n\t\tmargin-right: var(--ck-spacing-small);\r\n\t\tmargin-top: var(--ck-spacing-small);\r\n\t\tmargin-bottom: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t/* Gives counter more breath than buttons. */\r\n\t& .ck-balloon-rotator__counter {\r\n\t\tmargin-right: var(--ck-spacing-standard);\r\n\r\n\t\t/* We need to use smaller margin because of previous button's right margin. */\r\n\t\tmargin-left: var(--ck-spacing-small);\r\n\t}\r\n}\r\n\r\n.ck .ck-balloon-rotator__content {\r\n\r\n\t/* Disable default annotation shadow inside rotator with fake panels. */\r\n\t& .ck.ck-annotation-wrapper {\r\n\t\tbox-shadow: none;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},7676:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/panel/fakepanel.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/fakepanel.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,mBACC,iBAAkB,CAGlB,mCACD,CAEA,uBACC,iBACD,CAEA,mCACC,SACD,CAEA,oCACC,SACD,CCfA,MACC,6CAA8C,CAC9C,2CACD,CAGA,uBAKC,2CAA4C,CAC5C,6CAA8C,CAC9C,qCAAsC,CCXtC,oCAA8B,CDc9B,WAAY,CAPZ,eAAgB,CAMhB,UAED,CAEA,mCACC,0DAA2D,CAC3D,uDACD,CAEA,oCACC,kEAAqE,CACrE,+DACD,CACA,oCACC,kEAAqE,CACrE,+DACD,CAGA,yIAGC,4CACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-fake-panel {\r\n\tposition: absolute;\r\n\r\n\t/* Fake panels should be placed under main balloon content. */\r\n\tz-index: calc(var(--ck-z-modal) - 1);\r\n}\r\n\r\n.ck .ck-fake-panel div {\r\n\tposition: absolute;\r\n}\r\n\r\n.ck .ck-fake-panel div:nth-child( 1 ) {\r\n\tz-index: 2;\r\n}\r\n\r\n.ck .ck-fake-panel div:nth-child( 2 ) {\r\n\tz-index: 1;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_shadow.css";\r\n\r\n:root {\r\n\t--ck-balloon-fake-panel-offset-horizontal: 6px;\r\n\t--ck-balloon-fake-panel-offset-vertical: 6px;\r\n}\r\n\r\n/* Let\'s use `.ck-balloon-panel` appearance. See: balloonpanel.css. */\r\n.ck .ck-fake-panel div {\r\n\t@mixin ck-drop-shadow;\r\n\r\n\tmin-height: 15px;\r\n\r\n\tbackground: var(--ck-color-panel-background);\r\n\tborder: 1px solid var(--ck-color-panel-border);\r\n\tborder-radius: var(--ck-border-radius);\r\n\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\r\n.ck .ck-fake-panel div:nth-child( 1 ) {\r\n\tmargin-left: var(--ck-balloon-fake-panel-offset-horizontal);\r\n\tmargin-top: var(--ck-balloon-fake-panel-offset-vertical);\r\n}\r\n\r\n.ck .ck-fake-panel div:nth-child( 2 ) {\r\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 2);\r\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 2);\r\n}\r\n.ck .ck-fake-panel div:nth-child( 3 ) {\r\n\tmargin-left: calc(var(--ck-balloon-fake-panel-offset-horizontal) * 3);\r\n\tmargin-top: calc(var(--ck-balloon-fake-panel-offset-vertical) * 3);\r\n}\r\n\r\n/* If balloon is positioned above element, we need to move fake panel to the top. */\r\n.ck .ck-balloon-panel_arrow_s + .ck-fake-panel,\r\n.ck .ck-balloon-panel_arrow_se + .ck-fake-panel,\r\n.ck .ck-balloon-panel_arrow_sw + .ck-fake-panel {\r\n\t--ck-balloon-fake-panel-offset-vertical: -6px;\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},5868:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-modal)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/panel/stickypanel.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/panel/stickypanel.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAMC,qDAEC,cAAe,CACf,KAAM,CAFN,yBAGD,CAEA,kEAEC,iBAAkB,CADlB,QAED,CCPA,qDAIC,wBAAyB,CACzB,yBAA0B,CAF1B,sBAAuB,CCFxB,oCDKA",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-sticky-panel {\r\n\t& .ck-sticky-panel__content_sticky {\r\n\t\tz-index: var(--ck-z-modal); /* #315 */\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t& .ck-sticky-panel__content_sticky_bottom-limit {\r\n\t\ttop: auto;\r\n\t\tposition: absolute;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_shadow.css";\r\n\r\n.ck.ck-sticky-panel {\r\n\t& .ck-sticky-panel__content_sticky {\r\n\t\t@mixin ck-drop-shadow;\r\n\r\n\t\tborder-width: 0 1px 1px;\r\n\t\tborder-top-left-radius: 0;\r\n\t\tborder-top-right-radius: 0;\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},6764:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}',"",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/responsive-form/responsiveform.css","webpack://./../ckeditor5-ui/theme/mixins/_rwd.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/responsive-form/responsiveform.css"],names:[],mappings:"AAQC,mCAMC,WAAY,CALZ,UAAW,CAEX,iBAAkB,CAClB,UAAW,CACX,QAAS,CAHT,OAAQ,CAKR,SACD,CAEA,yCACC,YACD,CCdA,oCDoBE,wCAMC,WAAY,CALZ,UAAW,CAEX,iBAAkB,CAClB,UAAW,CACX,QAAS,CAHT,OAAQ,CAKR,SACD,CAEA,8CACC,YACD,CC9BF,CCAD,qDACC,kDACD,CAEA,uBACC,+BAmED,CAjEC,6BAEC,YACD,CASC,uGACC,sCACD,CDvBD,oCCMD,uBAqBE,SAAU,CACV,oCA8CF,CA5CE,8CACC,wDAWD,CATC,6DACC,WAAY,CACZ,UACD,CAGA,4EACC,kBACD,CAKA,0DACC,kDACD,CAGD,iGAIC,eAAgB,CADhB,kCAAmC,CADnC,kCAmBD,CAfC,yHACC,gDACD,CARD,0OAeE,aAMF,CAJE,+IACC,kDACD,CDpEH",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n\r\n.ck-vertical-form .ck-button {\r\n\t&::after {\r\n\t\tcontent: "";\r\n\t\twidth: 0;\r\n\t\tposition: absolute;\r\n\t\tright: -1px;\r\n\t\ttop: -1px;\r\n\t\tbottom: -1px;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t&:focus::after {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n\r\n.ck.ck-responsive-form {\r\n\t@mixin ck-media-phone {\r\n\t\t& .ck-button {\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: "";\r\n\t\t\t\twidth: 0;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: -1px;\r\n\t\t\t\ttop: -1px;\r\n\t\t\t\tbottom: -1px;\r\n\t\t\t\tz-index: 1;\r\n\t\t\t}\r\n\r\n\t\t\t&:focus::after {\r\n\t\t\t\tdisplay: none;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@define-mixin ck-media-phone {\r\n\t@media screen and (max-width: 600px) {\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck-vertical-form > .ck-button:nth-last-child(2)::after {\r\n\tborder-right: 1px solid var(--ck-color-base-border);\r\n}\r\n\r\n.ck.ck-responsive-form {\r\n\tpadding: var(--ck-spacing-large);\r\n\r\n\t&:focus {\r\n\t\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t@mixin ck-dir ltr {\r\n\t\t& > :not(:first-child) {\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-dir rtl {\r\n\t\t& > :not(:last-child) {\r\n\t\t\tmargin-left: var(--ck-spacing-standard);\r\n\t\t}\r\n\t}\r\n\r\n\t@mixin ck-media-phone {\r\n\t\tpadding: 0;\r\n\t\twidth: calc(.8 * var(--ck-input-width));\r\n\r\n\t\t& .ck-labeled-field-view {\r\n\t\t\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) 0;\r\n\r\n\t\t\t& .ck-input-text {\r\n\t\t\t\tmin-width: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t/* Let the long error messages wrap in the narrow form. */\r\n\t\t\t& .ck-labeled-field-view__error {\r\n\t\t\t\twhite-space: normal;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Styles for two last buttons in the form (save&cancel, edit&unlink, etc.). */\r\n\t\t& > .ck-button:nth-last-child(2) {\r\n\t\t\t&::after {\r\n\t\t\t\tborder-right: 1px solid var(--ck-color-base-border);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t& > .ck-button:nth-last-child(1),\r\n\t\t& > .ck-button:nth-last-child(2) {\r\n\t\t\tpadding: var(--ck-spacing-standard);\r\n\t\t\tmargin-top: var(--ck-spacing-large);\r\n\t\t\tborder-radius: 0;\r\n\r\n\t\t\t&:not(:focus) {\r\n\t\t\t\tborder-top: 1px solid var(--ck-color-base-border);\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir ltr {\r\n\t\t\t\tmargin-left: 0;\r\n\t\t\t}\r\n\r\n\t\t\t@mixin ck-dir rtl {\r\n\t\t\t\tmargin-left: 0;\r\n\r\n\t\t\t\t&:last-of-type {\r\n\t\t\t\t\tborder-right: 1px solid var(--ck-color-base-border);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},9695:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/toolbar/blocktoolbar.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/toolbar/blocktoolbar.css"],names:[],mappings:"AAKA,4BACC,iBAAkB,CAClB,2BACD,CCHA,MACC,oDAAqD,CACrD,yDACD,CAEA,4BACC,0CAA2C,CAC3C,sCACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-block-toolbar-button {\r\n\tposition: absolute;\r\n\tz-index: var(--ck-z-default);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-block-toolbar-button: var(--ck-color-text);\r\n\t--ck-block-toolbar-button-size: var(--ck-font-size-normal);\r\n}\r\n\r\n.ck.ck-block-toolbar-button {\r\n\tcolor: var(--ck-color-block-toolbar-button);\r\n\tfont-size: var(--ck-block-toolbar-size);\r\n}\r\n"],sourceRoot:""}]);const a=s},5542:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;background:var(--ck-color-toolbar-border);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/toolbar/toolbar.css","webpack://./../ckeditor5-ui/theme/mixins/_unselectable.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/toolbar/toolbar.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_rounded.css"],names:[],mappings:"AAOA,eAKC,kBAAmB,CAFnB,YAAa,CACb,oBAAqB,CCFrB,qBAAsB,CACtB,wBAAyB,CACzB,oBAAqB,CACrB,gBD6CD,CA3CC,kCAGC,kBAAmB,CAFnB,YAAa,CACb,kBAAmB,CAEnB,WAED,CAEA,yCACC,oBAWD,CAJC,yGAEC,YACD,CAGD,uCACC,eACD,CAEA,sDACC,gBACD,CAEA,sDACC,qBACD,CAEA,sDACC,gBACD,CAGC,yFACC,YACD,CE/CF,eCGC,eDoGD,CAvGA,qECOE,qCDgGF,CAvGA,eAGC,6CAA8C,CAE9C,+CAAgD,CADhD,iCAmGD,CAhGC,yCACC,kBAAmB,CAGnB,yCAA0C,CAO1C,qCAAsC,CADtC,kCAAmC,CAPnC,aAAc,CADd,SAUD,CAEA,uCACC,QACD,CAGC,gEAEC,oCACD,CAIA,kEACC,YACD,CAGD,gHAIC,qCAAsC,CADtC,kCAED,CAEA,mCAEC,SAaD,CAVC,0DAQC,eAAgB,CAHhB,QAAS,CAHT,UAOD,CAGD,kCAEC,SAWD,CATC,uDAEC,QAMD,CAHC,yFACC,eACD,CASD,kFACC,mCACD,CAMA,wEACC,cACD,CAEA,iFACC,aAAc,CACd,UACD,CAjGF,qCAqGE,QAEF,CAYC,+FACC,cACD,CAEA,iJAEC,mCACD,CAEA,qHACC,aACD,CAIC,6JAEC,2BAA4B,CAD5B,wBAED,CAGA,2JAEC,4BAA6B,CAD7B,yBAED,CASD,8RACC,mCACD,CAWA,qHACC,cACD,CAIC,6JAEC,4BAA6B,CAD7B,yBAED,CAGA,2JAEC,2BAA4B,CAD5B,wBAED,CASD,8RACC,oCACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../mixins/_unselectable.css";\r\n\r\n.ck.ck-toolbar {\r\n\t@mixin ck-unselectable;\r\n\r\n\tdisplay: flex;\r\n\tflex-flow: row nowrap;\r\n\talign-items: center;\r\n\r\n\t& > .ck-toolbar__items {\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: row wrap;\r\n\t\talign-items: center;\r\n\t\tflex-grow: 1;\r\n\r\n\t}\r\n\r\n\t& .ck.ck-toolbar__separator {\r\n\t\tdisplay: inline-block;\r\n\r\n\t\t/*\r\n\t\t * A leading or trailing separator makes no sense (separates from nothing on one side).\r\n\t\t * For instance, it can happen when toolbar items (also separators) are getting grouped one by one and\r\n\t\t * moved to another toolbar in the dropdown.\r\n\t\t */\r\n\t\t&:first-child,\r\n\t\t&:last-child {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\r\n\t& .ck-toolbar__line-break {\r\n\t\tflex-basis: 100%;\r\n\t}\r\n\r\n\t&.ck-toolbar_grouping > .ck-toolbar__items {\r\n\t\tflex-wrap: nowrap;\r\n\t}\r\n\r\n\t&.ck-toolbar_vertical > .ck-toolbar__items {\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t&.ck-toolbar_floating > .ck-toolbar__items {\r\n\t\tflex-wrap: nowrap;\r\n\t}\r\n\r\n\t& > .ck.ck-toolbar__grouped-dropdown {\r\n\t\t& > .ck-dropdown__button .ck-dropdown__arrow {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Makes element unselectable.\r\n */\r\n@define-mixin ck-unselectable {\r\n\t-moz-user-select: none;\r\n\t-webkit-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";\r\n\r\n.ck.ck-toolbar {\r\n\t@mixin ck-rounded-corners;\r\n\r\n\tbackground: var(--ck-color-toolbar-background);\r\n\tpadding: 0 var(--ck-spacing-small);\r\n\tborder: 1px solid var(--ck-color-toolbar-border);\r\n\r\n\t& .ck.ck-toolbar__separator {\r\n\t\talign-self: stretch;\r\n\t\twidth: 1px;\r\n\t\tmin-width: 1px;\r\n\t\tbackground: var(--ck-color-toolbar-border);\r\n\r\n\t\t/*\r\n\t\t * These margins make the separators look better in balloon toolbars (when aligned with the "tip").\r\n\t\t * See https://github.com/ckeditor/ckeditor5/issues/7493.\r\n\t\t */\r\n\t\tmargin-top: var(--ck-spacing-small);\r\n\t\tmargin-bottom: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t& .ck-toolbar__line-break {\r\n\t\theight: 0;\r\n\t}\r\n\r\n\t& > .ck-toolbar__items {\r\n\t\t& > *:not(.ck-toolbar__line-break) {\r\n\t\t\t/* (#11) Separate toolbar items. */\r\n\t\t\tmargin-right: var(--ck-spacing-small);\r\n\t\t}\r\n\r\n\t\t/* Don\'t display a separator after an empty items container, for instance,\r\n\t\twhen all items were grouped */\r\n\t\t&:empty + .ck.ck-toolbar__separator {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck-toolbar__items > *:not(.ck-toolbar__line-break),\r\n\t& > .ck.ck-toolbar__grouped-dropdown {\r\n\t\t/* Make sure items wrapped to the next line have v-spacing */\r\n\t\tmargin-top: var(--ck-spacing-small);\r\n\t\tmargin-bottom: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t&.ck-toolbar_vertical {\r\n\t\t/* Items in a vertical toolbar span the entire width. */\r\n\t\tpadding: 0;\r\n\r\n\t\t/* Specificity matters here. See https://github.com/ckeditor/ckeditor5-theme-lark/issues/168. */\r\n\t\t& > .ck-toolbar__items > .ck {\r\n\t\t\t/* Items in a vertical toolbar should span the horizontal space. */\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t/* Items in a vertical toolbar should have no margin. */\r\n\t\t\tmargin: 0;\r\n\r\n\t\t\t/* Items in a vertical toolbar span the entire width so rounded corners are pointless. */\r\n\t\t\tborder-radius: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-toolbar_compact {\r\n\t\t/* No spacing around items. */\r\n\t\tpadding: 0;\r\n\r\n\t\t& > .ck-toolbar__items > * {\r\n\t\t\t/* Compact toolbar items have no spacing between them. */\r\n\t\t\tmargin: 0;\r\n\r\n\t\t\t/* "Middle" children should have no rounded corners. */\r\n\t\t\t&:not(:first-child):not(:last-child) {\r\n\t\t\t\tborder-radius: 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t& > .ck.ck-toolbar__grouped-dropdown {\r\n\t\t/*\r\n\t\t * Dropdown button has asymmetric padding to fit the arrow.\r\n\t\t * This button has no arrow so let\'s revert that padding back to normal.\r\n\t\t */\r\n\t\t& > .ck.ck-button.ck-dropdown__button {\r\n\t\t\tpadding-left: var(--ck-spacing-tiny);\r\n\t\t}\r\n\t}\r\n\r\n\t/* A drop-down containing the nested toolbar with configured items. */\r\n\t& .ck-toolbar__nested-toolbar-dropdown {\r\n\t\t/* Prevent empty space in the panel when the dropdown label is visible and long but the toolbar has few items. */\r\n\t\t& > .ck-dropdown__panel {\r\n\t\t\tmin-width: auto;\r\n\t\t}\r\n\r\n\t\t& > .ck-button > .ck-button__label {\r\n\t\t\tmax-width: 7em;\r\n\t\t\twidth: auto;\r\n\t\t}\r\n\t}\r\n\r\n\t@nest .ck-toolbar-container & {\r\n\t\tborder: 0;\r\n\t}\r\n}\r\n\r\n/* stylelint-disable */\r\n\r\n/*\r\n * Styles for RTL toolbars.\r\n *\r\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\r\n * because its parent is not controlled by the editor framework.\r\n */\r\n[dir="rtl"] .ck.ck-toolbar,\r\n.ck.ck-toolbar[dir="rtl"] {\r\n\t& > .ck-toolbar__items > .ck {\r\n\t\tmargin-right: 0;\r\n\t}\r\n\r\n\t&:not(.ck-toolbar_compact) > .ck-toolbar__items > .ck {\r\n\t\t/* (#11) Separate toolbar items. */\r\n\t\tmargin-left: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t& > .ck-toolbar__items > .ck:last-child {\r\n\t\tmargin-left: 0;\r\n\t}\r\n\r\n\t&.ck-toolbar_compact > .ck-toolbar__items > .ck {\r\n\t\t/* No rounded corners on the right side of the first child. */\r\n\t\t&:first-child {\r\n\t\t\tborder-top-left-radius: 0;\r\n\t\t\tborder-bottom-left-radius: 0;\r\n\t\t}\r\n\r\n\t\t/* No rounded corners on the left side of the last child. */\r\n\t\t&:last-child {\r\n\t\t\tborder-top-right-radius: 0;\r\n\t\t\tborder-bottom-right-radius: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Separate the the separator form the grouping dropdown when some items are grouped. */\r\n\t& > .ck.ck-toolbar__separator {\r\n\t\tmargin-left: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t/* Some spacing between the items and the separator before the grouped items dropdown. */\r\n\t&.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child) {\r\n\t\tmargin-left: var(--ck-spacing-small);\r\n\t}\r\n}\r\n\r\n/*\r\n * Styles for LTR toolbars.\r\n *\r\n * Note: In some cases (e.g. a decoupled editor), the toolbar has its own "dir"\r\n * because its parent is not controlled by the editor framework.\r\n */\r\n[dir="ltr"] .ck.ck-toolbar,\r\n.ck.ck-toolbar[dir="ltr"] {\r\n\t& > .ck-toolbar__items > .ck:last-child {\r\n\t\tmargin-right: 0;\r\n\t}\r\n\r\n\t&.ck-toolbar_compact > .ck-toolbar__items > .ck {\r\n\t\t/* No rounded corners on the right side of the first child. */\r\n\t\t&:first-child {\r\n\t\t\tborder-top-right-radius: 0;\r\n\t\t\tborder-bottom-right-radius: 0;\r\n\t\t}\r\n\r\n\t\t/* No rounded corners on the left side of the last child. */\r\n\t\t&:last-child {\r\n\t\t\tborder-top-left-radius: 0;\r\n\t\t\tborder-bottom-left-radius: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Separate the the separator form the grouping dropdown when some items are grouped. */\r\n\t& > .ck.ck-toolbar__separator {\r\n\t\tmargin-right: var(--ck-spacing-small);\r\n\t}\r\n\r\n\t/* Some spacing between the items and the separator before the grouped items dropdown. */\r\n\t&.ck-toolbar_grouping > .ck-toolbar__items:not(:empty):not(:only-child) {\r\n\t\tmargin-right: var(--ck-spacing-small);\r\n\t}\r\n}\r\n\r\n/* stylelint-enable */\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Implements rounded corner interface for .ck-rounded-corners class.\r\n *\r\n * @see $ck-border-radius\r\n */\r\n@define-mixin ck-rounded-corners {\r\n\tborder-radius: 0;\r\n\r\n\t@nest .ck-rounded-corners &,\r\n\t&.ck-rounded-corners {\r\n\t\tborder-radius: var(--ck-border-radius);\r\n\t\t@mixin-content;\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},3332:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);pointer-events:none;z-index:calc(var(--ck-z-modal) + 100)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip{box-shadow:none}.ck.ck-balloon-panel.ck-tooltip:before{display:none}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/components/tooltip/tooltip.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/components/tooltip/tooltip.css"],names:[],mappings:"AAKA,gCCGC,6BAA8B,CAC9B,6BAA8B,CAC9B,iCAAkC,CAClC,6BAA8B,CAC9B,8DAA+D,CAE/D,kCAAmC,CDPnC,mBAAoB,CAEpB,qCACD,CCMC,kDAGC,kCAAmC,CAFnC,cAAe,CACf,eAED,CAbD,gCAgBC,eAMD,CAHC,uCACC,YACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-balloon-panel.ck-tooltip {\r\n\t/* Keep tooltips transparent for any interactions. */\r\n\tpointer-events: none;\r\n\r\n\tz-index: calc( var(--ck-z-modal) + 100 );\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../../../mixins/_rounded.css";\r\n\r\n.ck.ck-balloon-panel.ck-tooltip {\r\n\t--ck-balloon-border-width: 0px;\r\n\t--ck-balloon-arrow-offset: 0px;\r\n\t--ck-balloon-arrow-half-width: 4px;\r\n\t--ck-balloon-arrow-height: 4px;\r\n\t--ck-color-panel-background: var(--ck-color-tooltip-background);\r\n\r\n\tpadding: 0 var(--ck-spacing-medium);\r\n\r\n\t& .ck-tooltip__text {\r\n\t\tfont-size: .9em;\r\n\t\tline-height: 1.5;\r\n\t\tcolor: var(--ck-color-tooltip-text);\r\n\t}\r\n\r\n\t/* Reset balloon panel styles */\r\n\tbox-shadow: none;\r\n\r\n\t/* Hide the default shadow of the .ck-balloon-panel tip */\r\n\t&::before {\r\n\t\tdisplay: none;\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},4793:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck-hidden{display:none!important}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{box-sizing:border-box;height:auto;position:static;width:auto}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;margin:0;padding:0;text-decoration:none;transition:none;vertical-align:middle}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}","",{version:3,sources:["webpack://./../ckeditor5-ui/theme/globals/_hidden.css","webpack://./../ckeditor5-ui/theme/globals/_reset.css","webpack://./../ckeditor5-ui/theme/globals/_zindex.css","webpack://./../ckeditor5-ui/theme/globals/_transition.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_colors.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_disabled.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_focus.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_fonts.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_reset.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_rounded.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_shadow.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-ui/globals/_spacing.css"],names:[],mappings:"AAQA,WAGC,sBACD,CCPA,2EAGC,qBAAsB,CAEtB,WAAY,CACZ,eAAgB,CAFhB,UAGD,CCPA,MACC,gBAAiB,CACjB,4CACD,CCAA,oDAEC,yBACD,CCNA,MACC,kCAAmD,CACnD,+BAAoD,CACpD,8BAAkD,CAClD,8BAAuD,CACvD,6BAAmD,CACnD,yBAA+C,CAC/C,8BAAsD,CACtD,oCAA4D,CAC5D,6BAAkD,CAIlD,mDAA4D,CAC5D,qEAA+E,CAC/E,qCAA4D,CAC5D,qDAA8D,CAC9D,gDAAyD,CACzD,yCAAqD,CACrD,sCAAsD,CACtD,4CAA0D,CAC1D,sCAAsD,CAItD,gDAAuD,CACvD,kDAAiE,CACjE,mDAAkE,CAClE,yDAA8D,CAE9D,uCAA6D,CAC7D,6CAAoE,CACpE,8CAAoE,CACpE,gDAAiE,CACjE,kCAAyD,CAGzD,+DAAsE,CACtE,iDAAsE,CACtE,kDAAsE,CACtE,oDAAoE,CACpE,6DAAsE,CAEtE,8BAAoD,CACpD,gCAAqD,CAErD,+CAA8D,CAC9D,qDAAiE,CACjE,+EAAqF,CACrF,oDAAuE,CACvE,yEAA8E,CAC9E,oDAAgE,CAIhE,oEAA2E,CAC3E,4DAAoE,CAIpE,2DAAoE,CACpE,mDAA6D,CAC7D,wDAAgE,CAChE,+CAA0D,CAC1D,4CAA2D,CAC3D,4DAAoE,CACpE,sCAAsD,CAItD,0DAAmE,CACnE,uFAA6F,CAC7F,oEAA2E,CAC3E,0EAA+E,CAC/E,8DAAsE,CAItE,2DAAoE,CACpE,mDAA6D,CAI7D,6DAAsE,CACtE,qDAA+D,CAI/D,uDAAgE,CAChE,uDAAiE,CAIjE,0CAAyD,CAIzD,wCAA2D,CAI3D,+BAAoD,CACpD,uDAAmE,CACnE,kDAAgE,CAIhE,oCAAwD,CCvGxD,wBAAyB,CCAzB,0CAA2C,CAK3C,gGAAiG,CAKjG,4GAA6G,CAK7G,sGAAuG,CAKvG,sDAAuD,CCvBvD,wBAAyB,CACzB,6BAA8B,CAC9B,wDAA6D,CAE7D,yBAA0B,CAC1B,2BAA4B,CAC5B,yBAA0B,CAC1B,wBAAyB,CACzB,0BAA2B,CCJ3B,kCJuGD,CIjGA,2EAaC,oBAAqB,CANrB,sBAAuB,CADvB,QAAS,CAFT,QAAS,CACT,SAAU,CAGV,oBAAqB,CAErB,eAAgB,CADhB,qBAKD,CAKA,8DAGC,wBAAyB,CAEzB,0BAA2B,CAG3B,WAAY,CACZ,UAAW,CALX,iGAAkG,CAElG,eAAgB,CAChB,kBAGD,CAGC,qDACC,gBACD,CAEA,mDAEC,sBACD,CAEA,qDACC,oBACD,CAEA,mLAGC,WACD,CAEA,iNAGC,cACD,CAEA,qDAEC,yBAAoC,CADpC,YAED,CAEA,qEAGC,QAAQ,CADR,SAED,CAMD,8BAEC,gBACD,CCnFA,MACC,sBAAuB,CCAvB,gEAAiE,CAKjE,0DAA2D,CAK3D,wEAAyE,CCbzE,uBAA8B,CAC9B,mDAA2D,CAC3D,4CAAkD,CAClD,oDAA4D,CAC5D,mDAA2D,CAC3D,kDAA2D,CAC3D,yDFFD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A class which hides an element in DOM.\r\n */\r\n.ck-hidden {\r\n\t/* Override selector specificity. Otherwise, all elements with some display\r\n\tstyle defined will override this one, which is not a desired result. */\r\n\tdisplay: none !important;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck.ck-reset,\r\n.ck.ck-reset_all,\r\n.ck-reset_all *:not(.ck-reset_all-excluded *) {\r\n\tbox-sizing: border-box;\r\n\twidth: auto;\r\n\theight: auto;\r\n\tposition: static;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-z-default: 1;\r\n\t--ck-z-modal: calc( var(--ck-z-default) + 999 );\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A class that disables all transitions of the element and its children.\r\n */\r\n.ck-transitions-disabled,\r\n.ck-transitions-disabled * {\r\n\ttransition: none !important;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-base-foreground: \t\t\t\t\t\t\t\thsl(0, 0%, 98%);\r\n\t--ck-color-base-background: \t\t\t\t\t\t\t\thsl(0, 0%, 100%);\r\n\t--ck-color-base-border: \t\t\t\t\t\t\t\t\thsl(220, 6%, 81%);\r\n\t--ck-color-base-action: \t\t\t\t\t\t\t\t\thsl(104, 50.2%, 42.5%);\r\n\t--ck-color-base-focus: \t\t\t\t\t\t\t\t\t\thsl(209, 92%, 70%);\r\n\t--ck-color-base-text: \t\t\t\t\t\t\t\t\t\thsl(0, 0%, 20%);\r\n\t--ck-color-base-active: \t\t\t\t\t\t\t\t\thsl(218.1, 100%, 58%);\r\n\t--ck-color-base-active-focus:\t\t\t\t\t\t\t\thsl(218.2, 100%, 52.5%);\r\n\t--ck-color-base-error:\t\t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\r\n\r\n\t/* -- Generic colors ------------------------------------------------------------------------ */\r\n\r\n\t--ck-color-focus-border-coordinates: \t\t\t\t\t\t218, 81.8%, 56.9%;\r\n\t--ck-color-focus-border: \t\t\t\t\t\t\t\t\thsl(var(--ck-color-focus-border-coordinates));\r\n\t--ck-color-focus-outer-shadow:\t\t\t\t\t\t\t\thsl(212.4, 89.3%, 89%);\r\n\t--ck-color-focus-disabled-shadow:\t\t\t\t\t\t\thsla(209, 90%, 72%,.3);\r\n\t--ck-color-focus-error-shadow:\t\t\t\t\t\t\t\thsla(9,100%,56%,.3);\r\n\t--ck-color-text: \t\t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\r\n\t--ck-color-shadow-drop: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.15);\r\n\t--ck-color-shadow-drop-active:\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.2);\r\n\t--ck-color-shadow-inner: \t\t\t\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\r\n\r\n\t/* -- Buttons ------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-button-default-background: \t\t\t\t\t\ttransparent;\r\n\t--ck-color-button-default-hover-background: \t\t\t\thsl(0, 0%, 94.1%);\r\n\t--ck-color-button-default-active-background: \t\t\t\thsl(0, 0%, 94.1%);\r\n\t--ck-color-button-default-disabled-background: \t\t\t\ttransparent;\r\n\r\n\t--ck-color-button-on-background: \t\t\t\t\t\t\thsl(212, 100%, 97.1%);\r\n\t--ck-color-button-on-hover-background: \t\t\t\t\t\thsl(211.7, 100%, 92.9%);\r\n\t--ck-color-button-on-active-background: \t\t\t\t\thsl(211.7, 100%, 92.9%);\r\n\t--ck-color-button-on-disabled-background: \t\t\t\t\thsl(211, 15%, 95%);\r\n\t--ck-color-button-on-color:\t\t\t\t\t\t\t\t\thsl(218.1, 100%, 58%);\r\n\r\n\r\n\t--ck-color-button-action-background: \t\t\t\t\t\tvar(--ck-color-base-action);\r\n\t--ck-color-button-action-hover-background: \t\t\t\t\thsl(104, 53.2%, 40.2%);\r\n\t--ck-color-button-action-active-background: \t\t\t\thsl(104, 53.2%, 40.2%);\r\n\t--ck-color-button-action-disabled-background: \t\t\t\thsl(104, 44%, 58%);\r\n\t--ck-color-button-action-text: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\r\n\t--ck-color-button-save: \t\t\t\t\t\t\t\t\thsl(120, 100%, 27%);\r\n\t--ck-color-button-cancel: \t\t\t\t\t\t\t\t\thsl(15, 100%, 43%);\r\n\r\n\t--ck-color-switch-button-off-background:\t\t\t\t\thsl(0, 0%, 57.6%);\r\n\t--ck-color-switch-button-off-hover-background:\t\t\t\thsl(0, 0%, 49%);\r\n\t--ck-color-switch-button-on-background:\t\t\t\t\t\tvar(--ck-color-button-action-background);\r\n\t--ck-color-switch-button-on-hover-background:\t\t\t\thsl(104, 53.2%, 40.2%);\r\n\t--ck-color-switch-button-inner-background:\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-switch-button-inner-shadow:\t\t\t\t\t\thsla(0, 0%, 0%, 0.1);\r\n\r\n\t/* -- Dropdown ------------------------------------------------------------------------------ */\r\n\r\n\t--ck-color-dropdown-panel-background: \t\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-dropdown-panel-border: \t\t\t\t\t\t\tvar(--ck-color-base-border);\r\n\r\n\t/* -- Input --------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-input-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-input-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\r\n\t--ck-color-input-error-border:\t\t\t\t\t\t\t\tvar(--ck-color-base-error);\r\n\t--ck-color-input-text: \t\t\t\t\t\t\t\t\t\tvar(--ck-color-base-text);\r\n\t--ck-color-input-disabled-background: \t\t\t\t\t\thsl(0, 0%, 95%);\r\n\t--ck-color-input-disabled-border: \t\t\t\t\t\t\tvar(--ck-color-base-border);\r\n\t--ck-color-input-disabled-text: \t\t\t\t\t\t\thsl(0, 0%, 46%);\r\n\r\n\t/* -- List ---------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-list-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-list-button-hover-background: \t\t\t\t\tvar(--ck-color-button-default-hover-background);\r\n\t--ck-color-list-button-on-background: \t\t\t\t\t\tvar(--ck-color-button-on-color);\r\n\t--ck-color-list-button-on-background-focus: \t\t\t\tvar(--ck-color-button-on-color);\r\n\t--ck-color-list-button-on-text:\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\r\n\t/* -- Panel --------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-panel-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-panel-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\r\n\r\n\t/* -- Toolbar ------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-toolbar-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\t--ck-color-toolbar-border: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-border);\r\n\r\n\t/* -- Tooltip ------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-tooltip-background: \t\t\t\t\t\t\t\tvar(--ck-color-base-text);\r\n\t--ck-color-tooltip-text: \t\t\t\t\t\t\t\t\tvar(--ck-color-base-background);\r\n\r\n\t/* -- Engine -------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-engine-placeholder-text: \t\t\t\t\t\thsl(0, 0%, 44%);\r\n\r\n\t/* -- Upload -------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-upload-bar-background:\t\t \t\t\t\t\thsl(209, 92%, 70%);\r\n\r\n\t/* -- Link -------------------------------------------------------------------------------- */\r\n\r\n\t--ck-color-link-default:\t\t\t\t\t\t\t\t\thsl(240, 100%, 47%);\r\n\t--ck-color-link-selected-background:\t\t\t\t\t\thsla(201, 100%, 56%, 0.1);\r\n\t--ck-color-link-fake-selection:\t\t\t\t\t\t\t\thsla(201, 100%, 56%, 0.3);\r\n\r\n\t/* -- Search result highlight ---------------------------------------------------------------- */\r\n\r\n\t--ck-color-highlight-background:\t\t\t\t\t\t\thsl(60, 100%, 50%)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/**\r\n\t * An opacity value of disabled UI item.\r\n\t */\r\n\t--ck-disabled-opacity: .5;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/**\r\n\t * The geometry of the of focused element's outer shadow.\r\n\t */\r\n\t--ck-focus-outer-shadow-geometry: 0 0 0 3px;\r\n\r\n\t/**\r\n\t * A visual style of focused element's outer shadow.\r\n\t */\r\n\t--ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);\r\n\r\n\t/**\r\n\t * A visual style of focused element's outer shadow (when disabled).\r\n\t */\r\n\t--ck-focus-disabled-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);\r\n\r\n\t/**\r\n\t * A visual style of focused element's outer shadow (when has errors).\r\n\t */\r\n\t--ck-focus-error-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);\r\n\r\n\t/**\r\n\t * A visual style of focused element's border or outline.\r\n\t */\r\n\t--ck-focus-ring: 1px solid var(--ck-color-focus-border);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-font-size-base: 13px;\r\n\t--ck-line-height-base: 1.84615;\r\n\t--ck-font-face: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\r\n\r\n\t--ck-font-size-tiny: 0.7em;\r\n\t--ck-font-size-small: 0.75em;\r\n\t--ck-font-size-normal: 1em;\r\n\t--ck-font-size-big: 1.4em;\r\n\t--ck-font-size-large: 1.8em;\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/* This is super-important. This is **manually** adjusted so a button without an icon\r\n\tis never smaller than a button with icon, additionally making sure that text-less buttons\r\n\tare perfect squares. The value is also shared by other components which should stay "in-line"\r\n\twith buttons. */\r\n\t--ck-ui-component-min-height: 2.3em;\r\n}\r\n\r\n/**\r\n * Resets an element, ignoring its children.\r\n */\r\n.ck.ck-reset,\r\n.ck.ck-reset_all,\r\n.ck-reset_all *:not(.ck-reset_all-excluded *) {\r\n\t/* Do not include inheritable rules here. */\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tbackground: transparent;\r\n\ttext-decoration: none;\r\n\tvertical-align: middle;\r\n\ttransition: none;\r\n\r\n\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/105 */\r\n\tword-wrap: break-word;\r\n}\r\n\r\n/**\r\n * Resets an element AND its children.\r\n */\r\n.ck.ck-reset_all,\r\n.ck-reset_all *:not(.ck-reset_all-excluded *) {\r\n\t/* These are rule inherited by all children elements. */\r\n\tborder-collapse: collapse;\r\n\tfont: normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);\r\n\tcolor: var(--ck-color-text);\r\n\ttext-align: left;\r\n\twhite-space: nowrap;\r\n\tcursor: auto;\r\n\tfloat: none;\r\n}\r\n\r\n.ck-reset_all {\r\n\t& .ck-rtl *:not(.ck-reset_all-excluded *) {\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t& iframe:not(.ck-reset_all-excluded *) {\r\n\t\t/* For IE */\r\n\t\tvertical-align: inherit;\r\n\t}\r\n\r\n\t& textarea:not(.ck-reset_all-excluded *) {\r\n\t\twhite-space: pre-wrap;\r\n\t}\r\n\r\n\t& textarea:not(.ck-reset_all-excluded *),\r\n\t& input[type="text"]:not(.ck-reset_all-excluded *),\r\n\t& input[type="password"]:not(.ck-reset_all-excluded *) {\r\n\t\tcursor: text;\r\n\t}\r\n\r\n\t& textarea[disabled]:not(.ck-reset_all-excluded *),\r\n\t& input[type="text"][disabled]:not(.ck-reset_all-excluded *),\r\n\t& input[type="password"][disabled]:not(.ck-reset_all-excluded *) {\r\n\t\tcursor: default;\r\n\t}\r\n\r\n\t& fieldset:not(.ck-reset_all-excluded *) {\r\n\t\tpadding: 10px;\r\n\t\tborder: 2px groove hsl(255, 7%, 88%);\r\n\t}\r\n\r\n\t& button:not(.ck-reset_all-excluded *)::-moz-focus-inner {\r\n\t\t/* See http://stackoverflow.com/questions/5517744/remove-extra-button-spacing-padding-in-firefox */\r\n\t\tpadding: 0;\r\n\t\tborder: 0\r\n\t}\r\n}\r\n\r\n/**\r\n * Default UI rules for RTL languages.\r\n */\r\n.ck[dir="rtl"],\r\n.ck[dir="rtl"] .ck {\r\n\ttext-align: right;\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * Default border-radius value.\r\n */\r\n:root{\r\n\t--ck-border-radius: 2px;\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t/**\r\n\t * A visual style of element's inner shadow (i.e. input).\r\n\t */\r\n\t--ck-inner-shadow: 2px 2px 3px var(--ck-color-shadow-inner) inset;\r\n\r\n\t/**\r\n\t * A visual style of element's drop shadow (i.e. panel).\r\n\t */\r\n\t--ck-drop-shadow: 0 1px 2px 1px var(--ck-color-shadow-drop);\r\n\r\n\t/**\r\n\t * A visual style of element's active shadow (i.e. comment or suggestion).\r\n\t */\r\n\t--ck-drop-shadow-active: 0 3px 6px 1px var(--ck-color-shadow-drop-active);\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-spacing-unit: \t\t\t\t\t\t0.6em;\r\n\t--ck-spacing-large: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 1.5);\r\n\t--ck-spacing-standard: \t\t\t\t\tvar(--ck-spacing-unit);\r\n\t--ck-spacing-medium: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.8);\r\n\t--ck-spacing-small: \t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.5);\r\n\t--ck-spacing-tiny: \t\t\t\t\t\tcalc(var(--ck-spacing-unit) * 0.3);\r\n\t--ck-spacing-extra-tiny: \t\t\t\tcalc(var(--ck-spacing-unit) * 0.16);\r\n}\r\n"],sourceRoot:""}]);const a=s},3488:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background);border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}","",{version:3,sources:["webpack://./../ckeditor5-widget/theme/widget.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-widget/widget.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_focus.css","webpack://./../ckeditor5-theme-lark/theme/mixins/_shadow.css"],names:[],mappings:"AAKA,MACC,+CAAgD,CAChD,6CAAsD,CACtD,uCAAgD,CAEhD,kDAAmD,CACnD,gCAAiC,CACjC,kEACD,CAOA,8DAEC,iBAqBD,CAnBC,4EACC,iBAOD,CALC,qFAGC,aACD,CASD,iLACC,kBACD,CAGD,kBACC,qDAAsD,CAEtD,qDAAsD,CACtD,6CAA8C,CAF9C,0CAA2C,CAI3C,aAAc,CADd,kCAAmC,CAGnC,uCAAwC,CACxC,4CAA6C,CAF7C,iCAsCD,CAlCC,8NAKC,iBACD,CAEA,0CAEC,qCAAsC,CADtC,oCAED,CAEA,2CAEC,sCAAuC,CADvC,oCAED,CAEA,8CACC,uCAAwC,CACxC,sCACD,CAEA,6CACC,uCAAwC,CACxC,qCACD,CAGA,8CAEC,QAAS,CADT,6CAAgD,CAEhD,yBACD,CCjFD,MACC,iCAAkC,CAClC,kCAAmC,CACnC,4CAA6C,CAC7C,wCAAyC,CAEzC,wCAAiD,CACjD,sCAAkD,CAClD,2EAA4E,CAC5E,yEACD,CAEA,eAGC,yBAA0B,CAD1B,mBAAoB,CADpB,gDAAiD,CAGjD,6GAUD,CARC,0EAEC,6EACD,CAEA,qBACC,iDACD,CAGD,gCACC,4BAWD,CAPC,yGAKC,iEAAkE,CCnCnE,2BAA2B,CCF3B,qCAA8B,CDC9B,YDqCA,CAIA,4EAKC,4BAA6B,CAa7B,iEAAkE,CAhBlE,qBAAsB,CAoBtB,mDAAoD,CAhBpD,SAAU,CALV,WAAY,CAsBZ,KAAM,CAFN,2BAA4B,CAT5B,6SAgCD,CAnBC,qFAIC,oDAAqD,CADrD,yCAA0C,CAD1C,wCAWD,CANC,kHACC,SAAU,CAGV,+DACD,CAID,wHACC,SACD,CAID,kFAEC,oDAAqD,CADrD,SAED,CAKC,oMAEC,6CAA8C,CAD9C,SAOD,CAHC,gRACC,SACD,CAOH,qFACC,SAAU,CACV,oDACD,CAGA,gDAEC,eAkBD,CAhBC,yEAOC,iCACD,CAGC,gOAEC,gDACD,CAOD,wIAEC,mDAQD,CALE,ghBAEC,gDACD,CAKH,yKAOC,yDACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-color-resizer: var(--ck-color-focus-border);\r\n\t--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);\r\n\t--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);\r\n\r\n\t--ck-resizer-border-radius: var(--ck-border-radius);\r\n\t--ck-resizer-tooltip-offset: 10px;\r\n\t--ck-resizer-tooltip-height: calc(var(--ck-spacing-small) * 2 + 10px);\r\n}\r\n\r\n.ck .ck-widget {\r\n\t/* This is neccessary for type around UI to be positioned properly. */\r\n\tposition: relative;\r\n}\r\n\r\n.ck .ck-widget.ck-widget_with-selection-handle {\r\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\r\n\tposition: relative;\r\n\r\n\t& .ck-widget__selection-handle {\r\n\t\tposition: absolute;\r\n\r\n\t\t& .ck-icon {\r\n\t\t\t/* Make sure the icon in not a subject to font-size or line-height to avoid\r\n\t\t\tunnecessary spacing around it. */\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Show the selection handle on mouse hover over the widget, but not for nested widgets. */\r\n\t&:hover > .ck-widget__selection-handle {\r\n\t\tvisibility: visible;\r\n\t}\r\n\r\n\t/* Show the selection handle when the widget is selected, but not for nested widgets. */\r\n\t&.ck-widget_selected > .ck-widget__selection-handle {\r\n\t\tvisibility: visible;\r\n\t}\r\n}\r\n\r\n.ck .ck-size-view {\r\n\tbackground: var(--ck-color-resizer-tooltip-background);\r\n\tcolor: var(--ck-color-resizer-tooltip-text);\r\n\tborder: 1px solid var(--ck-color-resizer-tooltip-text);\r\n\tborder-radius: var(--ck-resizer-border-radius);\r\n\tfont-size: var(--ck-font-size-tiny);\r\n\tdisplay: block;\r\n\tpadding: 0 var(--ck-spacing-small);\r\n\theight: var(--ck-resizer-tooltip-height);\r\n\tline-height: var(--ck-resizer-tooltip-height);\r\n\r\n\t&.ck-orientation-top-left,\r\n\t&.ck-orientation-top-right,\r\n\t&.ck-orientation-bottom-right,\r\n\t&.ck-orientation-bottom-left,\r\n\t&.ck-orientation-above-center {\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n\t&.ck-orientation-top-left {\r\n\t\ttop: var(--ck-resizer-tooltip-offset);\r\n\t\tleft: var(--ck-resizer-tooltip-offset);\r\n\t}\r\n\r\n\t&.ck-orientation-top-right {\r\n\t\ttop: var(--ck-resizer-tooltip-offset);\r\n\t\tright: var(--ck-resizer-tooltip-offset);\r\n\t}\r\n\r\n\t&.ck-orientation-bottom-right {\r\n\t\tbottom: var(--ck-resizer-tooltip-offset);\r\n\t\tright: var(--ck-resizer-tooltip-offset);\r\n\t}\r\n\r\n\t&.ck-orientation-bottom-left {\r\n\t\tbottom: var(--ck-resizer-tooltip-offset);\r\n\t\tleft: var(--ck-resizer-tooltip-offset);\r\n\t}\r\n\r\n\t/* Class applied if the widget is too small to contain the size label */\r\n\t&.ck-orientation-above-center {\r\n\t\ttop: calc(var(--ck-resizer-tooltip-height) * -1);\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%);\r\n\t}\r\n}\r\n",'/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n@import "../mixins/_focus.css";\r\n@import "../mixins/_shadow.css";\r\n\r\n:root {\r\n\t--ck-widget-outline-thickness: 3px;\r\n\t--ck-widget-handler-icon-size: 16px;\r\n\t--ck-widget-handler-animation-duration: 200ms;\r\n\t--ck-widget-handler-animation-curve: ease;\r\n\r\n\t--ck-color-widget-blurred-border: hsl(0, 0%, 87%);\r\n\t--ck-color-widget-hover-border: hsl(43, 100%, 62%);\r\n\t--ck-color-widget-editable-focus-background: var(--ck-color-base-background);\r\n\t--ck-color-widget-drag-handler-icon-color: var(--ck-color-base-background);\r\n}\r\n\r\n.ck .ck-widget {\r\n\toutline-width: var(--ck-widget-outline-thickness);\r\n\toutline-style: solid;\r\n\toutline-color: transparent;\r\n\ttransition: outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\r\n\r\n\t&.ck-widget_selected,\r\n\t&.ck-widget_selected:hover {\r\n\t\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border);\r\n\t}\r\n\r\n\t&:hover {\r\n\t\toutline-color: var(--ck-color-widget-hover-border);\r\n\t}\r\n}\r\n\r\n.ck .ck-editor__nested-editable {\r\n\tborder: 1px solid transparent;\r\n\r\n\t/* The :focus style is applied before .ck-editor__nested-editable_focused class is rendered in the view.\r\n\tThese styles show a different border for a blink of an eye, so `:focus` need to have same styles applied. */\r\n\t&.ck-editor__nested-editable_focused,\r\n\t&:focus {\r\n\t\t@mixin ck-focus-ring;\r\n\t\t@mixin ck-box-shadow var(--ck-inner-shadow);\r\n\r\n\t\tbackground-color: var(--ck-color-widget-editable-focus-background);\r\n\t}\r\n}\r\n\r\n.ck .ck-widget.ck-widget_with-selection-handle {\r\n\t& .ck-widget__selection-handle {\r\n\t\tpadding: 4px;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t/* Background and opacity will be animated as the handler shows up or the widget gets selected. */\r\n\t\tbackground-color: transparent;\r\n\t\topacity: 0;\r\n\r\n\t\t/* Transition:\r\n\t\t   * background-color for the .ck-widget_selected state change,\r\n\t\t   * visibility for hiding the handler,\r\n\t\t   * opacity for the proper look of the icon when the handler disappears. */\r\n\t\ttransition:\r\n\t\t\tbackground-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\r\n\t\t\tvisibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),\r\n\t\t\topacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\r\n\r\n\t\t/* Make only top corners round. */\r\n\t\tborder-radius: var(--ck-border-radius) var(--ck-border-radius) 0 0;\r\n\r\n\t\t/* Place the drag handler outside the widget wrapper. */\r\n\t\ttransform: translateY(-100%);\r\n\t\tleft: calc(0px - var(--ck-widget-outline-thickness));\r\n\t\ttop: 0;\r\n\r\n\t\t& .ck-icon {\r\n\t\t\t/* Make sure the dimensions of the icon are independent of the fon-size of the content. */\r\n\t\t\twidth: var(--ck-widget-handler-icon-size);\r\n\t\t\theight: var(--ck-widget-handler-icon-size);\r\n\t\t\tcolor: var(--ck-color-widget-drag-handler-icon-color);\r\n\r\n\t\t\t/* The "selected" part of the icon is invisible by default */\r\n\t\t\t& .ck-icon__selected-indicator {\r\n\t\t\t\topacity: 0;\r\n\r\n\t\t\t\t/* Note: The animation is longer on purpose. Simply feels better. */\r\n\t\t\t\ttransition: opacity 300ms var(--ck-widget-handler-animation-curve);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* Advertise using the look of the icon that once clicked the handler, the widget will be selected. */\r\n\t\t&:hover .ck-icon .ck-icon__selected-indicator {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/* Show the selection handler on mouse hover over the widget, but not for nested widgets. */\r\n\t&:hover > .ck-widget__selection-handle {\r\n\t\topacity: 1;\r\n\t\tbackground-color: var(--ck-color-widget-hover-border);\r\n\t}\r\n\r\n\t/* Show the selection handler when the widget is selected, but not for nested widgets. */\r\n\t&.ck-widget_selected,\r\n\t&.ck-widget_selected:hover {\r\n\t\t& > .ck-widget__selection-handle {\r\n\t\t\topacity: 1;\r\n\t\t\tbackground-color: var(--ck-color-focus-border);\r\n\r\n\t\t\t/* When the widget is selected, notify the user using the proper look of the icon. */\r\n\t\t\t& .ck-icon .ck-icon__selected-indicator {\r\n\t\t\t\topacity: 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* In a RTL environment, align the selection handler to the right side of the widget */\r\n/* stylelint-disable-next-line no-descending-specificity */\r\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle {\r\n\tleft: auto;\r\n\tright: calc(0px - var(--ck-widget-outline-thickness));\r\n}\r\n\r\n/* https://github.com/ckeditor/ckeditor5/issues/6415 */\r\n.ck.ck-editor__editable.ck-read-only .ck-widget {\r\n\t/* Prevent the :hover outline from showing up because of the used outline-color transition. */\r\n\ttransition: none;\r\n\r\n\t&:not(.ck-widget_selected) {\r\n\t\t/* Disable visual effects of hover/active widget when CKEditor is in readOnly mode.\r\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/1261\r\n\t\t *\r\n\t\t * Leave the unit because this custom property is used in calc() by other features.\r\n\t\t * See: https://github.com/ckeditor/ckeditor5/issues/6775\r\n\t\t */\r\n\t\t--ck-widget-outline-thickness: 0px;\r\n\t}\r\n\r\n\t&.ck-widget_with-selection-handle {\r\n\t\t& .ck-widget__selection-handle,\r\n\t\t& .ck-widget__selection-handle:hover {\r\n\t\t\tbackground: var(--ck-color-widget-blurred-border);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* Style the widget when it\'s selected but the editable it belongs to lost focus. */\r\n/* stylelint-disable-next-line no-descending-specificity */\r\n.ck.ck-editor__editable.ck-blurred .ck-widget {\r\n\t&.ck-widget_selected,\r\n\t&.ck-widget_selected:hover {\r\n\t\toutline-color: var(--ck-color-widget-blurred-border);\r\n\r\n\t\t&.ck-widget_with-selection-handle {\r\n\t\t\t& > .ck-widget__selection-handle,\r\n\t\t\t& > .ck-widget__selection-handle:hover {\r\n\t\t\t\tbackground: var(--ck-color-widget-blurred-border);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.ck.ck-editor__editable > .ck-widget.ck-widget_with-selection-handle:first-child,\r\n.ck.ck-editor__editable blockquote > .ck-widget.ck-widget_with-selection-handle:first-child {\r\n\t/* Do not crop selection handler if a widget is a first-child in the blockquote or in the root editable.\r\n\tIn fact, anything with overflow: hidden.\r\n\thttps://github.com/ckeditor/ckeditor5-block-quote/issues/28\r\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/44\r\n\thttps://github.com/ckeditor/ckeditor5-widget/issues/66 */\r\n\tmargin-top: calc(1em + var(--ck-widget-handler-icon-size));\r\n}\r\n',"/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A visual style of focused element's border.\r\n */\r\n@define-mixin ck-focus-ring {\r\n\t/* Disable native outline. */\r\n\toutline: none;\r\n\tborder: var(--ck-focus-ring)\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n/**\r\n * A helper to combine multiple shadows.\r\n */\r\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\r\n\tbox-shadow: $shadowA, $shadowB;\r\n}\r\n\r\n/**\r\n * Gives an element a drop shadow so it looks like a floating panel.\r\n */\r\n@define-mixin ck-drop-shadow {\r\n\t@mixin ck-box-shadow var(--ck-drop-shadow);\r\n}\r\n"],sourceRoot:""}]);const a=s},8506:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}","",{version:3,sources:["webpack://./../ckeditor5-widget/theme/widgetresize.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-widget/widgetresize.css"],names:[],mappings:"AAKA,4BAEC,iBACD,CAEA,wBACC,YAAa,CAMb,MAAO,CAFP,mBAAoB,CAHpB,iBAAkB,CAMlB,KACD,CAGC,2EACC,aACD,CAGD,gCAIC,kBAAmB,CAHnB,iBAcD,CATC,4IAEC,kBACD,CAEA,4IAEC,kBACD,CCpCD,MACC,sBAAuB,CAGvB,yDAAiE,CACjE,6BACD,CAEA,wBACC,yCACD,CAEA,gCAGC,uCAAwC,CACxC,gDAA6D,CAC7D,6CAA8C,CAH9C,6BAA8B,CAD9B,4BAyBD,CAnBC,oEAEC,6BAA8B,CAD9B,4BAED,CAEA,qEAEC,8BAA+B,CAD/B,4BAED,CAEA,wEACC,+BAAgC,CAChC,8BACD,CAEA,uEACC,+BAAgC,CAChC,6BACD",sourcesContent:["/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-widget_with-resizer {\r\n\t/* Make the widget wrapper a relative positioning container for the drag handle. */\r\n\tposition: relative;\r\n}\r\n\r\n.ck .ck-widget__resizer {\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\r\n\t/* The wrapper itself should not interfere with the pointer device, only the handles should. */\r\n\tpointer-events: none;\r\n\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.ck-focused .ck-widget_with-resizer.ck-widget_selected {\r\n\t& > .ck-widget__resizer {\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n\r\n.ck .ck-widget__resizer__handle {\r\n\tposition: absolute;\r\n\r\n\t/* Resizers are the only UI elements that should interfere with a pointer device. */\r\n\tpointer-events: all;\r\n\r\n\t&.ck-widget__resizer__handle-top-left,\r\n\t&.ck-widget__resizer__handle-bottom-right {\r\n\t\tcursor: nwse-resize;\r\n\t}\r\n\r\n\t&.ck-widget__resizer__handle-top-right,\r\n\t&.ck-widget__resizer__handle-bottom-left {\r\n\t\tcursor: nesw-resize;\r\n\t}\r\n}\r\n","/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-resizer-size: 10px;\r\n\r\n\t/* Set the resizer with a 50% offset. */\r\n\t--ck-resizer-offset: calc( ( var(--ck-resizer-size) / -2 ) - 2px);\r\n\t--ck-resizer-border-width: 1px;\r\n}\r\n\r\n.ck .ck-widget__resizer {\r\n\toutline: 1px solid var(--ck-color-resizer);\r\n}\r\n\r\n.ck .ck-widget__resizer__handle {\r\n\twidth: var(--ck-resizer-size);\r\n\theight: var(--ck-resizer-size);\r\n\tbackground: var(--ck-color-focus-border);\r\n\tborder: var(--ck-resizer-border-width) solid hsl(0, 0%, 100%);\r\n\tborder-radius: var(--ck-resizer-border-radius);\r\n\r\n\t&.ck-widget__resizer__handle-top-left {\r\n\t\ttop: var(--ck-resizer-offset);\r\n\t\tleft: var(--ck-resizer-offset);\r\n\t}\r\n\r\n\t&.ck-widget__resizer__handle-top-right {\r\n\t\ttop: var(--ck-resizer-offset);\r\n\t\tright: var(--ck-resizer-offset);\r\n\t}\r\n\r\n\t&.ck-widget__resizer__handle-bottom-right {\r\n\t\tbottom: var(--ck-resizer-offset);\r\n\t\tright: var(--ck-resizer-offset);\r\n\t}\r\n\r\n\t&.ck-widget__resizer__handle-bottom-left {\r\n\t\tbottom: var(--ck-resizer-offset);\r\n\t\tleft: var(--ck-resizer-offset);\r\n\t}\r\n}\r\n"],sourceRoot:""}]);const a=s},4921:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(1799),i=n.n(r),o=n(2609),s=n.n(o)()(i());s.push([t.id,'.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}',"",{version:3,sources:["webpack://./../ckeditor5-widget/theme/widgettypearound.css","webpack://./../ckeditor5-theme-lark/theme/ckeditor5-widget/widgettypearound.css"],names:[],mappings:"AASC,+CACC,aAAc,CAEd,eAAgB,CADhB,iBAAkB,CAElB,2BAwBD,CAtBC,mDAGC,QAAS,CAFT,iBAAkB,CAClB,OAAQ,CAER,qCACD,CAEA,qFAGC,kBAAoB,CADpB,gDAAoD,CAGpD,0BACD,CAEA,oFAEC,mDAAuD,CACvD,mBAAqB,CAErB,yBACD,CAUA,mLACC,UAAW,CACX,aAAc,CAGd,QAAS,CAFT,iBAAkB,CAClB,OAAQ,CAER,qCACD,CAMD,2EACC,YAAa,CAEb,MAAO,CADP,iBAAkB,CAElB,OACD,CAOA,iFACC,gDAAqD,CACrD,iDACD,CAKA,wHAEC,aAAc,CADd,qDAED,CAKA,uHACC,wDAA6D,CAC7D,aACD,CAoBD,mOACC,YACD,CC3GA,MACC,wCAAyC,CACzC,wEAAyE,CACzE,8EAA+E,CAC/E,2FAA4F,CAC5F,wDAAyD,CACzD,uDAAwD,CACxD,yEACD,CAgBC,+CAGC,oDAAqD,CACrD,mBAAoB,CAFpB,+CAAgD,CAVjD,SAAU,CACV,mBAAoB,CAYnB,uMAAyM,CAJzM,8CAkDD,CA1CC,mDAEC,UAAW,CAGX,cAAe,CAFf,8BAA+B,CAC/B,6BAA8B,CAH9B,UAoBD,CAdC,qDACC,mBAAoB,CACpB,mBAAoB,CAEpB,SAAU,CACV,qDAAsD,CACtD,kBAAmB,CACnB,oBAAqB,CACrB,qBACD,CAEA,wDACC,kBACD,CAGD,qDAIC,6DAcD,CARE,kEACC,oDACD,CAEA,8DACC,wDACD,CAUF,uKAvED,SAAU,CACV,mBAwEC,CAOD,gGACC,0DACD,CAOA,uKAEC,2DAQD,CANC,mLAIC,uEAAkF,CADlF,mBAAoB,CADpB,2DAA4D,CAD5D,0DAID,CAOD,8GACC,gBACD,CAKA,mDAGC,mFAAoF,CAOpF,oCAAqC,CARrC,UAAW,CAOX,oCAAwC,CARxC,mBAUD,CAOC,6JAEC,yBACD,CAUA,yKACC,iDACD,CAMA,uOAlJD,SAAU,CACV,mBAmJC,CAoBA,6yBACC,SACD,CASF,uHACC,aAAc,CACd,iBACD,CAYG,iRAlMF,SAAU,CACV,mBAmME,CAQH,kIACC,qEAKD,CAHC,wIACC,WACD,CAGD,4CACC,GACC,oBACD,CACA,OACC,mBACD,CACD,CAEA,gDACC,OACC,mBACD,CACA,OACC,mBACD,CACD,CAEA,8CACC,GACC,6HACD,CACA,IACC,6HACD,CACA,GACC,+HACD,CACD,CAEA,kDACC,GACC,SACD,CACA,IACC,SACD,CACA,IACC,SACD,CACA,IACC,SACD,CACA,GACC,SACD,CACD",sourcesContent:['/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n.ck .ck-widget {\r\n\t/*\r\n\t * Styles of the type around buttons\r\n\t */\r\n\t& .ck-widget__type-around__button {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\toverflow: hidden;\r\n\t\tz-index: var(--ck-z-default);\r\n\r\n\t\t& svg {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 50%;\r\n\t\t\tleft: 50%;\r\n\t\t\tz-index: calc(var(--ck-z-default) + 2);\r\n\t\t}\r\n\r\n\t\t&.ck-widget__type-around__button_before {\r\n\t\t\t/* Place it in the middle of the outline */\r\n\t\t\ttop: calc(-0.5 * var(--ck-widget-outline-thickness));\r\n\t\t\tleft: min(10%, 30px);\r\n\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t}\r\n\r\n\t\t&.ck-widget__type-around__button_after {\r\n\t\t\t/* Place it in the middle of the outline */\r\n\t\t\tbottom: calc(-0.5 * var(--ck-widget-outline-thickness));\r\n\t\t\tright: min(10%, 30px);\r\n\r\n\t\t\ttransform: translateY(50%);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the buttons when:\r\n\t * - the widget is selected,\r\n\t * - or the button is being hovered (regardless of the widget state).\r\n\t */\r\n\t&.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\r\n\t& > .ck-widget__type-around > .ck-widget__type-around__button:hover {\r\n\t\t&::after {\r\n\t\t\tcontent: "";\r\n\t\t\tdisplay: block;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 1px;\r\n\t\t\tleft: 1px;\r\n\t\t\tz-index: calc(var(--ck-z-default) + 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\r\n\t */\r\n\t& > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\r\n\t\tdisplay: none;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t}\r\n\r\n\t/*\r\n\t * When the widget is hovered the "fake caret" would normally be narrower than the\r\n\t * extra outline displayed around the widget. Let\'s extend the "fake caret" to match\r\n\t * the full width of the widget.\r\n\t */\r\n\t&:hover > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\r\n\t\tleft: calc( -1 * var(--ck-widget-outline-thickness) );\r\n\t\tright: calc( -1 * var(--ck-widget-outline-thickness) );\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the horizontal "fake caret" when it should be displayed before the widget (backward keyboard navigation).\r\n\t */\r\n\t&.ck-widget_type-around_show-fake-caret_before > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\r\n\t\ttop: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the horizontal "fake caret" when it should be displayed after the widget (forward keyboard navigation).\r\n\t */\r\n\t&.ck-widget_type-around_show-fake-caret_after > .ck-widget__type-around > .ck-widget__type-around__fake-caret {\r\n\t\tbottom: calc( -1 * var(--ck-widget-outline-thickness) - 1px );\r\n\t\tdisplay: block;\r\n\t}\r\n}\r\n\r\n/*\r\n * Integration with the read-only mode of the editor.\r\n */\r\n.ck.ck-editor__editable.ck-read-only .ck-widget__type-around {\r\n\tdisplay: none;\r\n}\r\n\r\n/*\r\n * Integration with the restricted editing mode (feature) of the editor.\r\n */\r\n.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around {\r\n\tdisplay: none;\r\n}\r\n\r\n/*\r\n * Integration with the #isEnabled property of the WidgetTypeAround plugin.\r\n */\r\n.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around {\r\n\tdisplay: none;\r\n}\r\n','/*\r\n * Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n\r\n:root {\r\n\t--ck-widget-type-around-button-size: 20px;\r\n\t--ck-color-widget-type-around-button-active: var(--ck-color-focus-border);\r\n\t--ck-color-widget-type-around-button-hover: var(--ck-color-widget-hover-border);\r\n\t--ck-color-widget-type-around-button-blurred-editable: var(--ck-color-widget-blurred-border);\r\n\t--ck-color-widget-type-around-button-radar-start-alpha: 0;\r\n\t--ck-color-widget-type-around-button-radar-end-alpha: .3;\r\n\t--ck-color-widget-type-around-button-icon: var(--ck-color-base-background);\r\n}\r\n\r\n@define-mixin ck-widget-type-around-button-visible {\r\n\topacity: 1;\r\n\tpointer-events: auto;\r\n}\r\n\r\n@define-mixin ck-widget-type-around-button-hidden {\r\n\topacity: 0;\r\n\tpointer-events: none;\r\n}\r\n\r\n.ck .ck-widget {\r\n\t/*\r\n\t * Styles of the type around buttons\r\n\t */\r\n\t& .ck-widget__type-around__button {\r\n\t\twidth: var(--ck-widget-type-around-button-size);\r\n\t\theight: var(--ck-widget-type-around-button-size);\r\n\t\tbackground: var(--ck-color-widget-type-around-button);\r\n\t\tborder-radius: 100px;\r\n\t\ttransition: opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve), background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\r\n\r\n\t\t@mixin ck-widget-type-around-button-hidden;\r\n\r\n\t\t& svg {\r\n\t\t\twidth: 10px;\r\n\t\t\theight: 8px;\r\n\t\t\ttransform: translate(-50%,-50%);\r\n\t\t\ttransition: transform .5s ease;\r\n\t\t\tmargin-top: 1px;\r\n\r\n\t\t\t& * {\r\n\t\t\t\tstroke-dasharray: 10;\r\n\t\t\t\tstroke-dashoffset: 0;\r\n\r\n\t\t\t\tfill: none;\r\n\t\t\t\tstroke: var(--ck-color-widget-type-around-button-icon);\r\n\t\t\t\tstroke-width: 1.5px;\r\n\t\t\t\tstroke-linecap: round;\r\n\t\t\t\tstroke-linejoin: round;\r\n\t\t\t}\r\n\r\n\t\t\t& line {\r\n\t\t\t\tstroke-dasharray: 7;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&:hover {\r\n\t\t\t/*\r\n\t\t\t * Display the "sonar" around the button when hovered.\r\n\t\t\t */\r\n\t\t\tanimation: ck-widget-type-around-button-sonar 1s ease infinite;\r\n\r\n\t\t\t/*\r\n\t\t\t * Animate active button\'s icon.\r\n\t\t\t */\r\n\t\t\t& svg {\r\n\t\t\t\t& polyline {\r\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-dash 2s linear;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t& line {\r\n\t\t\t\t\tanimation: ck-widget-type-around-arrow-tip-dash 2s linear;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Show type around buttons when the widget gets selected or being hovered.\r\n\t */\r\n\t&.ck-widget_selected,\r\n\t&:hover {\r\n\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\r\n\t\t\t@mixin ck-widget-type-around-button-visible;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the buttons when the widget is NOT selected (but the buttons are visible\r\n\t * and still can be hovered).\r\n\t */\r\n\t&:not(.ck-widget_selected) > .ck-widget__type-around > .ck-widget__type-around__button {\r\n\t\tbackground: var(--ck-color-widget-type-around-button-hover);\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the buttons when:\r\n\t * - the widget is selected,\r\n\t * - or the button is being hovered (regardless of the widget state).\r\n\t */\r\n\t&.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button,\r\n\t& > .ck-widget__type-around > .ck-widget__type-around__button:hover {\r\n\t\tbackground: var(--ck-color-widget-type-around-button-active);\r\n\r\n\t\t&::after {\r\n\t\t\twidth: calc(var(--ck-widget-type-around-button-size) - 2px);\r\n\t\t\theight: calc(var(--ck-widget-type-around-button-size) - 2px);\r\n\t\t\tborder-radius: 100px;\r\n\t\t\tbackground: linear-gradient(135deg, hsla(0,0%,100%,0) 0%, hsla(0,0%,100%,.3) 100%);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the "before" button when the widget has a selection handle. Because some space\r\n\t * is consumed by the handle, the button must be moved slightly to the right to let it breathe.\r\n\t */\r\n\t&.ck-widget_with-selection-handle > .ck-widget__type-around > .ck-widget__type-around__button_before {\r\n\t\tmargin-left: 20px;\r\n\t}\r\n\r\n\t/*\r\n\t * Styles for the horizontal "fake caret" which is displayed when the user navigates using the keyboard.\r\n\t */\r\n\t& .ck-widget__type-around__fake-caret {\r\n\t\tpointer-events: none;\r\n\t\theight: 1px;\r\n\t\tanimation: ck-widget-type-around-fake-caret-pulse linear 1s infinite normal forwards;\r\n\r\n\t\t/*\r\n\t\t * The semi-transparent-outline+background combo improves the contrast\r\n\t\t * when the background underneath the fake caret is dark.\r\n\t\t */\r\n\t\toutline: solid 1px hsla(0, 0%, 100%, .5);\r\n\t\tbackground: var(--ck-color-base-text);\r\n\t}\r\n\r\n\t/*\r\n\t * Styles of the widget when the "fake caret" is blinking (e.g. upon keyboard navigation).\r\n\t * Despite the widget being physically selected in the model, its outline should disappear.\r\n\t */\r\n\t&.ck-widget_selected {\r\n\t\t&.ck-widget_type-around_show-fake-caret_before,\r\n\t\t&.ck-widget_type-around_show-fake-caret_after {\r\n\t\t\toutline-color: transparent;\r\n\t\t}\r\n\t}\r\n\r\n\t&.ck-widget_type-around_show-fake-caret_before,\r\n\t&.ck-widget_type-around_show-fake-caret_after {\r\n\t\t/*\r\n\t\t * When the "fake caret" is visible we simulate that the widget is not selected\r\n\t\t * (despite being physically selected), so the outline color should be for the\r\n\t\t * unselected widget.\r\n\t\t */\r\n\t\t&.ck-widget_selected:hover {\r\n\t\t\toutline-color: var(--ck-color-widget-hover-border);\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Styles of the type around buttons when the "fake caret" is blinking (e.g. upon keyboard navigation).\r\n\t\t * In this state, the type around buttons would collide with the fake carets so they should disappear.\r\n\t\t */\r\n\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\r\n\t\t\t@mixin ck-widget-type-around-button-hidden;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Fake horizontal caret integration with the selection handle. When the caret is visible, simply\r\n\t\t * hide the handle because it intersects with the caret (and does not make much sense anyway).\r\n\t\t */\r\n\t\t&.ck-widget_with-selection-handle {\r\n\t\t\t&.ck-widget_selected,\r\n\t\t\t&.ck-widget_selected:hover {\r\n\t\t\t\t& > .ck-widget__selection-handle {\r\n\t\t\t\t\topacity: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Fake horizontal caret integration with the resize UI. When the caret is visible, simply\r\n\t\t * hide the resize UI because it creates too much noise. It can be visible when the user\r\n\t\t * hovers the widget, though.\r\n\t\t */\r\n\t\t&.ck-widget_selected.ck-widget_with-resizer > .ck-widget__resizer {\r\n\t\t\topacity: 0\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*\r\n * Styles for the "before" button when the widget has a selection handle in an RTL environment.\r\n * The selection handler is aligned to the right side of the widget so there is no need to create\r\n * additional space for it next to the "before" button.\r\n */\r\n.ck[dir="rtl"] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around > .ck-widget__type-around__button_before {\r\n\tmargin-left: 0;\r\n\tmargin-right: 20px;\r\n}\r\n\r\n/*\r\n * Hide type around buttons when the widget is selected as a child of a selected\r\n * nested editable (e.g. mulit-cell table selection).\r\n *\r\n * See https://github.com/ckeditor/ckeditor5/issues/7263.\r\n */\r\n.ck-editor__nested-editable.ck-editor__editable_selected {\r\n\t& .ck-widget {\r\n\t\t&.ck-widget_selected,\r\n\t\t&:hover {\r\n\t\t\t& > .ck-widget__type-around > .ck-widget__type-around__button {\r\n\t\t\t\t@mixin ck-widget-type-around-button-hidden;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*\r\n * Styles for the buttons when the widget is selected but the user clicked outside of the editor (blurred the editor).\r\n */\r\n.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected > .ck-widget__type-around > .ck-widget__type-around__button:not(:hover) {\r\n\tbackground: var(--ck-color-widget-type-around-button-blurred-editable);\r\n\r\n\t& svg * {\r\n\t\tstroke: hsl(0,0%,60%);\r\n\t}\r\n}\r\n\r\n@keyframes ck-widget-type-around-arrow-dash {\r\n\t0% {\r\n\t\tstroke-dashoffset: 10;\r\n\t}\r\n\t20%, 100% {\r\n\t\tstroke-dashoffset: 0;\r\n\t}\r\n}\r\n\r\n@keyframes ck-widget-type-around-arrow-tip-dash {\r\n\t0%, 20% {\r\n\t\tstroke-dashoffset: 7;\r\n\t}\r\n\t40%, 100% {\r\n\t\tstroke-dashoffset: 0;\r\n\t}\r\n}\r\n\r\n@keyframes ck-widget-type-around-button-sonar {\r\n\t0% {\r\n\t\tbox-shadow: 0 0 0 0 hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\r\n\t}\r\n\t50% {\r\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-end-alpha));\r\n\t}\r\n\t100% {\r\n\t\tbox-shadow: 0 0 0 5px hsla(var(--ck-color-focus-border-coordinates), var(--ck-color-widget-type-around-button-radar-start-alpha));\r\n\t}\r\n}\r\n\r\n@keyframes ck-widget-type-around-fake-caret-pulse {\r\n\t0% {\r\n\t\topacity: 1;\r\n\t}\r\n\t49% {\r\n\t\topacity: 1;\r\n\t}\r\n\t50% {\r\n\t\topacity: 0;\r\n\t}\r\n\t99% {\r\n\t\topacity: 0;\r\n\t}\r\n\t100% {\r\n\t\topacity: 1;\r\n\t}\r\n}\r\n'],sourceRoot:""}]);const a=s},2609:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},1799:t=>{"use strict";function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){a=!0,i=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n=e(t,4),r=n[1],i=n[3];if(!i)return r;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),a="/*# ".concat(s," */"),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[r].concat(c).concat([a]).join("\n")}return[r].join("\n")}},6062:(t,e,n)=>{"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],c=e.base?o[0]+e.base:o[0],l=n[c]||0,d="".concat(c," ").concat(l);n[c]=l+1;var u=a(d),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:m(h,e),references:1}),r.push(d)}return r}function l(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function g(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,p=0;function m(t,e){var n,r,i;if(e.singleton){var o=p++;n=f||(f=l(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=l(e),r=g.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=c(t,e),l=0;l<n.length;l++){var d=a(n[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=o}}}},5915:()=>{},312:function(t,e,n){var r=Object.defineProperty,i=(t,e,n)=>(((t,e,n)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);t.exports=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function e(t){var e=t.default;if("function"==typeof e){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}function r(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var o,s,a={exports:{}};s=function(){var t;function e(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(var e in t)if(s(t,e))return;return 1}function c(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){for(var n=[],r=t.length,i=0;i<r;++i)n.push(e(t[i],i));return n}function h(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e,n,r){return Me(t,e,n,r,!0).utc()}function f(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var e=f(t),n=b.call(e.parsedDateParts,(function(t){return null!=t}));if(n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function m(t){var e=g(NaN);return null!=t?h(f(e),t):f(e).userInvalidated=!0,e}var b=Array.prototype.some||function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1},k=e.momentProperties=[],w=!1;function y(t,e){var n,r,i,o=k.length;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=f(e)),c(e._locale)||(t._locale=e._locale),0<o)for(n=0;n<o;n++)c(i=e[r=k[n]])||(t[r]=i);return t}function _(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,e.updateOffset(this),w=!1)}function v(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function A(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function C(t,n){var r=!0;return h((function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var i,o,a=[],c=arguments.length,l=0;l<c;l++){if(i="","object"==typeof arguments[l]){for(o in i+="\n["+l+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[l];a.push(i)}A(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)}),n)}var x={};function E(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),x[t]||(A(n),x[t]=!0)}function T(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function S(t,e){var n,r=h({},t);for(n in e)s(e,n)&&(i(t[n])&&i(e[n])?(r[n]={},h(r[n],t[n]),h(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)s(t,n)&&!s(e,n)&&i(t[n])&&(r[n]=h({},r[n]));return r}function D(t){null!=t&&this.set(t)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var M=Object.keys||function(t){var e,n=[];for(e in t)s(t,e)&&n.push(e);return n};function I(t,e,n){var r=""+Math.abs(t);return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,e-r.length)).toString().substr(1)+r}var B=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},O={};function P(t,e,n,r){var i="string"==typeof r?function(){return this[r]()}:r;t&&(O[t]=i),e&&(O[e[0]]=function(){return I(i.apply(this,arguments),e[1],e[2])}),n&&(O[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function R(t,e){return t.isValid()?(e=z(e,t.localeData()),N[e]=N[e]||function(t){for(var e,n=t.match(B),r=0,i=n.length;r<i;r++)O[n[r]]?n[r]=O[n[r]]:n[r]=(e=n[r]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var r="",o=0;o<i;o++)r+=T(n[o])?n[o].call(e,t):n[o];return r}}(e),N[e](t)):t.localeData().invalidDate()}function z(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(L.lastIndex=0;0<=n&&L.test(t);)t=t.replace(L,r),L.lastIndex=0,--n;return t}var F={};function j(t,e){var n=t.toLowerCase();F[n]=F[n+"s"]=F[e]=t}function V(t){return"string"==typeof t?F[t]||F[t.toLowerCase()]:void 0}function $(t){var e,n,r={};for(n in t)s(t,n)&&(e=V(n))&&(r[e]=t[n]);return r}var H={};function U(t,e){H[t]=e}function W(t){return t%4==0&&t%100!=0||t%400==0}function q(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Y(t){var e=0;return 0!=(t=+t)&&isFinite(t)?q(t):e}function G(t,n){return function(r){return null!=r?(K(this,t,r),e.updateOffset(this,n),this):Z(this,t)}}function Z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function K(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&W(t.year())&&1===t.month()&&29===t.date()?(n=Y(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Mt(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}var Q=/\d/,X=/\d\d/,J=/\d{3}/,tt=/\d{4}/,et=/[+-]?\d{6}/,nt=/\d\d?/,rt=/\d\d\d\d?/,it=/\d\d\d\d\d\d?/,ot=/\d{1,3}/,st=/\d{1,4}/,at=/[+-]?\d{1,6}/,ct=/\d+/,lt=/[+-]?\d+/,dt=/Z|[+-]\d\d:?\d\d/gi,ut=/Z|[+-]\d\d(?::?\d\d)?/gi,ht=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function gt(t,e,n){mt[t]=T(e)?e:function(t,r){return t&&n?n:e}}function ft(t,e){return s(mt,t)?mt[t](e._strict,e._locale):new RegExp(pt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function pt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var mt={},bt={};function kt(t,e){var n,r,i=e;for("string"==typeof t&&(t=[t]),l(e)&&(i=function(t,n){n[e]=Y(t)}),r=t.length,n=0;n<r;n++)bt[t[n]]=i}function wt(t,e){kt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}var yt,_t=0,vt=1,At=2,Ct=3,xt=4,Et=5,Tt=6,St=7,Dt=8;function Mt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%(n=12)+n)%n;return t+=(e-n)/12,1==n?W(t)?29:28:31-n%7%2}yt=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},P("M",["MM",2],"Mo",(function(){return this.month()+1})),P("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),P("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),j("month","M"),U("month",8),gt("M",nt),gt("MM",nt,X),gt("MMM",(function(t,e){return e.monthsShortRegex(t)})),gt("MMMM",(function(t,e){return e.monthsRegex(t)})),kt(["M","MM"],(function(t,e){e[vt]=Y(t)-1})),kt(["MMM","MMMM"],(function(t,e,n,r){null!=(r=n._locale.monthsParse(t,r,n._strict))?e[vt]=r:f(n).invalidMonth=t}));var It="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Bt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Lt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Nt=ht,Ot=ht;function Pt(t,e){var n;if(t.isValid()){if("string"==typeof e)if(/^\d+$/.test(e))e=Y(e);else if(!l(e=t.localeData().monthsParse(e)))return;n=Math.min(t.date(),Mt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n)}}function Rt(t){return null!=t?(Pt(this,t),e.updateOffset(this,!0),this):Z(this,"Month")}function zt(){function t(t,e){return e.length-t.length}for(var e,n=[],r=[],i=[],o=0;o<12;o++)e=g([2e3,o]),n.push(this.monthsShort(e,"")),r.push(this.months(e,"")),i.push(this.months(e,"")),i.push(this.monthsShort(e,""));for(n.sort(t),r.sort(t),i.sort(t),o=0;o<12;o++)n[o]=pt(n[o]),r[o]=pt(r[o]);for(o=0;o<24;o++)i[o]=pt(i[o]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ft(t){return W(t)?366:365}P("Y",0,0,(function(){var t=this.year();return t<=9999?I(t,4):"+"+t})),P(0,["YY",2],0,(function(){return this.year()%100})),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),j("year","y"),U("year",1),gt("Y",lt),gt("YY",nt,X),gt("YYYY",st,tt),gt("YYYYY",at,et),gt("YYYYYY",at,et),kt(["YYYYY","YYYYYY"],_t),kt("YYYY",(function(t,n){n[_t]=2===t.length?e.parseTwoDigitYear(t):Y(t)})),kt("YY",(function(t,n){n[_t]=e.parseTwoDigitYear(t)})),kt("Y",(function(t,e){e[_t]=parseInt(t,10)})),e.parseTwoDigitYear=function(t){return Y(t)+(68<Y(t)?1900:2e3)};var jt=G("FullYear",!0);function Vt(t,e,n,r,i,o,s){var a;return t<100&&0<=t?(a=new Date(t+400,e,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,o,s),a}function $t(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Ht(t,e,n){return(n=7+e-n)-(7+$t(t,0,n).getUTCDay()-e)%7-1}function Ut(t,e,n,r,i){var o;return n=(e=1+7*(e-1)+(7+n-r)%7+Ht(t,r,i))<=0?Ft(o=t-1)+e:e>Ft(t)?(o=t+1,e-Ft(t)):(o=t,e),{year:o,dayOfYear:n}}function Wt(t,e,n){var r,i,o=Ht(t.year(),e,n);return(o=Math.floor((t.dayOfYear()-o-1)/7)+1)<1?r=o+qt(i=t.year()-1,e,n):o>qt(t.year(),e,n)?(r=o-qt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function qt(t,e,n){var r=Ht(t,e,n);return e=Ht(t+1,e,n),(Ft(t)-r+e)/7}function Yt(t,e){return t.slice(e,7).concat(t.slice(0,e))}P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),U("week",5),U("isoWeek",5),gt("w",nt),gt("ww",nt,X),gt("W",nt),gt("WW",nt,X),wt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=Y(t)})),P("d",0,"do","day"),P("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),P("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),P("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),gt("d",nt),gt("e",nt),gt("E",nt),gt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),gt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),gt("dddd",(function(t,e){return e.weekdaysRegex(t)})),wt(["dd","ddd","dddd"],(function(t,e,n,r){null!=(r=n._locale.weekdaysParse(t,r,n._strict))?e.d=r:f(n).invalidWeekday=t})),wt(["d","e","E"],(function(t,e,n,r){e[r]=Y(t)}));var Gt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Kt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qt=ht,Xt=ht,Jt=ht;function te(){function t(t,e){return e.length-t.length}for(var e,n,r,i=[],o=[],s=[],a=[],c=0;c<7;c++)r=g([2e3,1]).day(c),e=pt(this.weekdaysMin(r,"")),n=pt(this.weekdaysShort(r,"")),r=pt(this.weekdays(r,"")),i.push(e),o.push(n),s.push(r),a.push(e),a.push(n),a.push(r);i.sort(t),o.sort(t),s.sort(t),a.sort(t),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ee(){return this.hours()%12||12}function ne(t,e){P(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function re(t,e){return e._meridiemParse}P("H",["HH",2],0,"hour"),P("h",["hh",2],0,ee),P("k",["kk",2],0,(function(){return this.hours()||24})),P("hmm",0,0,(function(){return""+ee.apply(this)+I(this.minutes(),2)})),P("hmmss",0,0,(function(){return""+ee.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),P("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),P("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),ne("a",!0),ne("A",!1),j("hour","h"),U("hour",13),gt("a",re),gt("A",re),gt("H",nt),gt("h",nt),gt("k",nt),gt("HH",nt,X),gt("hh",nt,X),gt("kk",nt,X),gt("hmm",rt),gt("hmmss",it),gt("Hmm",rt),gt("Hmmss",it),kt(["H","HH"],Ct),kt(["k","kk"],(function(t,e,n){t=Y(t),e[Ct]=24===t?0:t})),kt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),kt(["h","hh"],(function(t,e,n){e[Ct]=Y(t),f(n).bigHour=!0})),kt("hmm",(function(t,e,n){var r=t.length-2;e[Ct]=Y(t.substr(0,r)),e[xt]=Y(t.substr(r)),f(n).bigHour=!0})),kt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Ct]=Y(t.substr(0,r)),e[xt]=Y(t.substr(r,2)),e[Et]=Y(t.substr(i)),f(n).bigHour=!0})),kt("Hmm",(function(t,e,n){var r=t.length-2;e[Ct]=Y(t.substr(0,r)),e[xt]=Y(t.substr(r))})),kt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Ct]=Y(t.substr(0,r)),e[xt]=Y(t.substr(r,2)),e[Et]=Y(t.substr(i))})),ht=G("Hours",!0);var ie,oe={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:It,monthsShort:Bt,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:Kt,weekdaysShort:Zt,meridiemParse:/[ap]\.?m?\.?/i},se={},ae={};function ce(t){return t&&t.toLowerCase().replace("_","-")}function le(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ce(t[o]).split("-")).length,n=(n=ce(t[o+1]))?n.split("-"):null;0<e;){if(r=de(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r+=1)if(t[r]!==e[r])return r;return n}(i,n)>=e-1)break;e--}o++}return ie}function de(t){var e;if(void 0===se[t]&&o&&o.exports&&null!=t.match("^[^/\\\\]*$"))try{e=ie._abbr,r("./locale/"+t),ue(e)}catch(e){se[t]=null}return se[t]}function ue(t,e){return t&&((e=c(e)?ge(t):he(t,e))?ie=e:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ie._abbr}function he(t,e){if(null===e)return delete se[t],null;var n,r=oe;if(e.abbr=t,null!=se[t])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=se[t]._config;else if(null!=e.parentLocale)if(null!=se[e.parentLocale])r=se[e.parentLocale]._config;else{if(null==(n=de(e.parentLocale)))return ae[e.parentLocale]||(ae[e.parentLocale]=[]),ae[e.parentLocale].push({name:t,config:e}),null;r=n._config}return se[t]=new D(S(r,e)),ae[t]&&ae[t].forEach((function(t){he(t.name,t.config)})),ue(t),se[t]}function ge(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return ie;if(!n(t)){if(e=de(t))return e;t=[t]}return le(t)}function fe(t){var e=t._a;return e&&-2===f(t).overflow&&(e=e[vt]<0||11<e[vt]?vt:e[At]<1||e[At]>Mt(e[_t],e[vt])?At:e[Ct]<0||24<e[Ct]||24===e[Ct]&&(0!==e[xt]||0!==e[Et]||0!==e[Tt])?Ct:e[xt]<0||59<e[xt]?xt:e[Et]<0||59<e[Et]?Et:e[Tt]<0||999<e[Tt]?Tt:-1,f(t)._overflowDayOfYear&&(e<_t||At<e)&&(e=At),f(t)._overflowWeeks&&-1===e&&(e=St),f(t)._overflowWeekday&&-1===e&&(e=Dt),f(t).overflow=e),t}var pe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/Z|[+-]\d\d(?::?\d\d)?/,ke=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],we=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((-?\d+)/i,_e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ve={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ae(t){var e,n,r,i,o,s,a=t._i,c=pe.exec(a)||me.exec(a),l=(a=ke.length,we.length);if(c){for(f(t).iso=!0,e=0,n=a;e<n;e++)if(ke[e][1].exec(c[1])){i=ke[e][0],r=!1!==ke[e][2];break}if(null==i)t._isValid=!1;else{if(c[3]){for(e=0,n=l;e<n;e++)if(we[e][1].exec(c[3])){o=(c[2]||" ")+we[e][0];break}if(null==o)return void(t._isValid=!1)}if(r||null==o){if(c[4]){if(!be.exec(c[4]))return void(t._isValid=!1);s="Z"}t._f=i+(o||"")+(s||""),Se(t)}else t._isValid=!1}}else t._isValid=!1}function Ce(t,e,n,r,i,o){var s;return t=[(s=t,(s=parseInt(s,10))<=49?2e3+s:s<=999?1900+s:s),Bt.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)],o&&t.push(parseInt(o,10)),t}function xe(t){var e,n,r,i,o=_e.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));o?(r=e=Ce(o[4],o[3],o[2],o[5],o[6],o[7]),i=t,(n=o[1])&&Zt.indexOf(n)!==new Date(r[0],r[1],r[2]).getDay()?(f(i).weekdayMismatch=!0,i._isValid=!1):(t._a=e,t._tzm=(n=o[8],r=o[9],i=o[10],n?ve[n]:r?0:((n=parseInt(i,10))-(r=n%100))/100*60+r),t._d=$t.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0)):t._isValid=!1}function Ee(t,e,n){return null!=t?t:null!=e?e:n}function Te(t){var n,r,i,o,s,a,c,l,d,u,h,g=[];if(!t._d){for(i=t,o=new Date(e.now()),r=i._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],t._w&&null==t._a[At]&&null==t._a[vt]&&(null!=(o=(i=t)._w).GG||null!=o.W||null!=o.E?(l=1,d=4,s=Ee(o.GG,i._a[_t],Wt(Ie(),1,4).year),a=Ee(o.W,1),((c=Ee(o.E,1))<1||7<c)&&(u=!0)):(l=i._locale._week.dow,d=i._locale._week.doy,h=Wt(Ie(),l,d),s=Ee(o.gg,i._a[_t],h.year),a=Ee(o.w,h.week),null!=o.d?((c=o.d)<0||6<c)&&(u=!0):null!=o.e?(c=o.e+l,(o.e<0||6<o.e)&&(u=!0)):c=l),a<1||a>qt(s,l,d)?f(i)._overflowWeeks=!0:null!=u?f(i)._overflowWeekday=!0:(h=Ut(s,a,c,l,d),i._a[_t]=h.year,i._dayOfYear=h.dayOfYear)),null!=t._dayOfYear&&(o=Ee(t._a[_t],r[_t]),(t._dayOfYear>Ft(o)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),u=$t(o,0,t._dayOfYear),t._a[vt]=u.getUTCMonth(),t._a[At]=u.getUTCDate()),n=0;n<3&&null==t._a[n];++n)t._a[n]=g[n]=r[n];for(;n<7;n++)t._a[n]=g[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[Ct]&&0===t._a[xt]&&0===t._a[Et]&&0===t._a[Tt]&&(t._nextDay=!0,t._a[Ct]=0),t._d=(t._useUTC?$t:Vt).apply(null,g),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ct]=24),t._w&&void 0!==t._w.d&&t._w.d!==s&&(f(t).weekdayMismatch=!0)}}function Se(t){if(t._f===e.ISO_8601)Ae(t);else if(t._f===e.RFC_2822)xe(t);else{t._a=[],f(t).empty=!0;for(var n,r,i,o,a,c=""+t._i,l=c.length,d=0,u=z(t._f,t._locale).match(B)||[],h=u.length,g=0;g<h;g++)r=u[g],(n=(c.match(ft(r,t))||[])[0])&&(0<(i=c.substr(0,c.indexOf(n))).length&&f(t).unusedInput.push(i),c=c.slice(c.indexOf(n)+n.length),d+=n.length),O[r]?(n?f(t).empty=!1:f(t).unusedTokens.push(r),i=r,a=t,null!=(o=n)&&s(bt,i)&&bt[i](o,a._a,a,i)):t._strict&&!n&&f(t).unusedTokens.push(r);f(t).charsLeftOver=l-d,0<c.length&&f(t).unusedInput.push(c),t._a[Ct]<=12&&!0===f(t).bigHour&&0<t._a[Ct]&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[Ct]=(p=t._locale,m=t._a[Ct],null==(b=t._meridiem)?m:null!=p.meridiemHour?p.meridiemHour(m,b):null!=p.isPM?((p=p.isPM(b))&&m<12&&(m+=12),m=p||12!==m?m:0):m),null!==(l=f(t).era)&&(t._a[_t]=t._locale.erasConvertYear(l,t._a[_t])),Te(t),fe(t)}var p,m,b}function De(t){var r,o,s,a=t._i,g=t._f;return t._locale=t._locale||ge(t._l),null===a||void 0===g&&""===a?m({nullInput:!0}):("string"==typeof a&&(t._i=a=t._locale.preparse(a)),v(a)?new _(fe(a)):(d(a)?t._d=a:n(g)?function(t){var e,n,r,i,o,s,a=!1,c=t._f.length;if(0===c)return f(t).invalidFormat=!0,t._d=new Date(NaN);for(i=0;i<c;i++)o=0,s=!1,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Se(e),p(e)&&(s=!0),o=(o+=f(e).charsLeftOver)+10*f(e).unusedTokens.length,f(e).score=o,a?o<r&&(r=o,n=e):(null==r||o<r||s)&&(r=o,n=e,s&&(a=!0));h(t,n||e)}(t):g?Se(t):c(g=(a=t)._i)?a._d=new Date(e.now()):d(g)?a._d=new Date(g.valueOf()):"string"==typeof g?(o=a,null!==(r=ye.exec(o._i))?o._d=new Date(+r[1]):(Ae(o),!1===o._isValid&&(delete o._isValid,xe(o),!1===o._isValid&&(delete o._isValid,o._strict?o._isValid=!1:e.createFromInputFallback(o))))):n(g)?(a._a=u(g.slice(0),(function(t){return parseInt(t,10)})),Te(a)):i(g)?(r=a)._d||(s=void 0===(o=$(r._i)).day?o.date:o.day,r._a=u([o.year,o.month,s,o.hour,o.minute,o.second,o.millisecond],(function(t){return t&&parseInt(t,10)})),Te(r)):l(g)?a._d=new Date(g):e.createFromInputFallback(a),p(t)||(t._d=null),t))}function Me(t,e,r,o,s){var c={};return!0!==e&&!1!==e||(o=e,e=void 0),!0!==r&&!1!==r||(o=r,r=void 0),(i(t)&&a(t)||n(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=r,c._i=t,c._f=e,c._strict=o,(s=new _(fe(De(s=c))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Ie(t,e,n,r){return Me(t,e,n,r,!1)}function Be(t,e){var r,i;if(!(e=1===e.length&&n(e[0])?e[0]:e).length)return Ie();for(r=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](r)||(r=e[i]);return r}e.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),e.ISO_8601=function(){},e.RFC_2822=function(){},rt=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ie.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()})),it=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Ie.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:m()}));var Le=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ne(t){var e=(t=$(t)).year||0,n=t.quarter||0,r=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,c=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=function(t){var e,n,r=!1,i=Le.length;for(e in t)if(s(t,e)&&(-1===yt.call(Le,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<i;++n)if(t[Le[n]]){if(r)return!1;parseFloat(t[Le[n]])!==Y(t[Le[n]])&&(r=!0)}return!0}(t),this._milliseconds=+d+1e3*l+6e4*c+1e3*a*60*60,this._days=+o+7*i,this._months=+r+3*n+12*e,this._data={},this._locale=ge(),this._bubble()}function Oe(t){return t instanceof Ne}function Pe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Re(t,e){P(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)}))}Re("Z",":"),Re("ZZ",""),gt("Z",ut),gt("ZZ",ut),kt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Fe(ut,t)}));var ze=/([\+\-]|\d\d)/gi;function Fe(t,e){return null===(e=(e||"").match(t))?null:0===(e=60*(t=((e[e.length-1]||[])+"").match(ze)||["-",0,0])[1]+Y(t[2]))?0:"+"===t[0]?e:-e}function je(t,n){var r;return n._isUTC?(n=n.clone(),r=(v(t)||d(t)?t:Ie(t)).valueOf()-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):Ie(t).local()}function Ve(t){return-Math.round(t._d.getTimezoneOffset())}function $e(){return!!this.isValid()&&this._isUTC&&0===this._offset}e.updateOffset=function(){};var He=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ue=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function We(t,e){var n,r,i,o,a=t,c=null;return Oe(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(a={},e?a[e]=+t:a.milliseconds=+t):(c=He.exec(t))?(n="-"===c[1]?-1:1,a={y:0,d:Y(c[At])*n,h:Y(c[Ct])*n,m:Y(c[xt])*n,s:Y(c[Et])*n,ms:Y(Pe(1e3*c[Tt]))*n}):(c=Ue.exec(t))?(n="-"===c[1]?-1:1,a={y:qe(c[2],n),M:qe(c[3],n),w:qe(c[4],n),d:qe(c[5],n),h:qe(c[6],n),m:qe(c[7],n),s:qe(c[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=Ie(a.from),i=Ie(a.to),e=r.isValid()&&i.isValid()?(i=je(i,r),r.isBefore(i)?o=Ye(r,i):((o=Ye(i,r)).milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0},(a={}).ms=e.milliseconds,a.M=e.months),c=new Ne(a),Oe(t)&&s(t,"_locale")&&(c._locale=t._locale),Oe(t)&&s(t,"_isValid")&&(c._isValid=t._isValid),c}function qe(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function Ye(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ge(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(E(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Ze(this,We(n,r),t),this}}function Ze(t,n,r,i){var o=n._milliseconds,s=Pe(n._days);n=Pe(n._months),t.isValid()&&(i=null==i||i,n&&Pt(t,Z(t,"Month")+n*r),s&&K(t,"Date",Z(t,"Date")+s*r),o&&t._d.setTime(t._d.valueOf()+o*r),i&&e.updateOffset(t,s||n))}function Ke(t){return"string"==typeof t||t instanceof String}function Qe(t){return v(t)||d(t)||Ke(t)||l(t)||(r=n(e=t),o=!1,r&&(o=0===e.filter((function(t){return!l(t)&&Ke(e)})).length),r&&o)||function(t){var e,n,r=i(t)&&!a(t),o=!1,c=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=c.length;for(e=0;e<l;e+=1)n=c[e],o=o||s(t,n);return r&&o}(t)||null==t;var e,r,o}function Xe(t,e){if(t.date()<e.date())return-Xe(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e=e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(1+n,"months")-r)))||0}function Je(t){return void 0===t?this._locale._abbr:(null!=(t=ge(t))&&(this._locale=t),this)}function tn(){return this._locale}We.fn=Ne.prototype,We.invalid=function(){return We(NaN)},It=Ge(1,"add"),Gt=Ge(-1,"subtract"),e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]",Kt=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));var en,nn=126227808e5;function rn(t,e){return(t%e+e)%e}function on(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-nn:new Date(t,e,n).valueOf()}function sn(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-nn:Date.UTC(t,e,n)}function an(t,e){return e.erasAbbrRegex(t)}function cn(){for(var t=[],e=[],n=[],r=[],i=this.eras(),o=0,s=i.length;o<s;++o)e.push(pt(i[o].name)),t.push(pt(i[o].abbr)),n.push(pt(i[o].narrow)),r.push(pt(i[o].name)),r.push(pt(i[o].abbr)),r.push(pt(i[o].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function ln(t,e){P(0,[t,t.length],0,e)}function dn(t,e,n,r,i){var o;return null==t?Wt(this,r,i).year:(o=qt(t,r,i),function(t,e,n,r,i){return e=$t((t=Ut(t,e,n,r,i)).year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=o<e?o:e,n,r,i))}for(P("N",0,0,"eraAbbr"),P("NN",0,0,"eraAbbr"),P("NNN",0,0,"eraAbbr"),P("NNNN",0,0,"eraName"),P("NNNNN",0,0,"eraNarrow"),P("y",["y",1],"yo","eraYear"),P("y",["yy",2],0,"eraYear"),P("y",["yyy",3],0,"eraYear"),P("y",["yyyy",4],0,"eraYear"),gt("N",an),gt("NN",an),gt("NNN",an),gt("NNNN",(function(t,e){return e.erasNameRegex(t)})),gt("NNNNN",(function(t,e){return e.erasNarrowRegex(t)})),kt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){(r=n._locale.erasParse(t,r,n._strict))?f(n).era=r:f(n).invalidEra=t})),gt("y",ct),gt("yy",ct),gt("yyy",ct),gt("yyyy",ct),gt("yo",(function(t,e){return e._eraYearOrdinalRegex||ct})),kt(["y","yy","yyy","yyyy"],_t),kt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[_t]=n._locale.eraYearOrdinalParse(t,i):e[_t]=parseInt(t,10)})),P(0,["gg",2],0,(function(){return this.weekYear()%100})),P(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),ln("gggg","weekYear"),ln("ggggg","weekYear"),ln("GGGG","isoWeekYear"),ln("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),gt("G",lt),gt("g",lt),gt("GG",nt,X),gt("gg",nt,X),gt("GGGG",st,tt),gt("gggg",st,tt),gt("GGGGG",at,et),gt("ggggg",at,et),wt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=Y(t)})),wt(["gg","GG"],(function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)})),P("Q",0,"Qo","quarter"),j("quarter","Q"),U("quarter",7),gt("Q",Q),kt("Q",(function(t,e){e[vt]=3*(Y(t)-1)})),P("D",["DD",2],"Do","date"),j("date","D"),U("date",9),gt("D",nt),gt("DD",nt,X),gt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),kt(["D","DD"],At),kt("Do",(function(t,e){e[At]=Y(t.match(nt)[0])})),st=G("Date",!0),P("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),U("dayOfYear",4),gt("DDD",ot),gt("DDDD",J),kt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=Y(t)})),P("m",["mm",2],0,"minute"),j("minute","m"),U("minute",14),gt("m",nt),gt("mm",nt,X),kt(["m","mm"],xt),tt=G("Minutes",!1),P("s",["ss",2],0,"second"),j("second","s"),U("second",15),gt("s",nt),gt("ss",nt,X),kt(["s","ss"],Et),at=G("Seconds",!1),P("S",0,0,(function(){return~~(this.millisecond()/100)})),P(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),P(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),P(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),P(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),P(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),P(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),j("millisecond","ms"),U("millisecond",16),gt("S",ot,Q),gt("SS",ot,X),gt("SSS",ot,J),en="SSSS";en.length<=9;en+="S")gt(en,ct);function un(t,e){e[Tt]=Y(1e3*("0."+t))}for(en="S";en.length<=9;en+="S")kt(en,un);function hn(t){return t}function gn(t,e,n,r){var i=ge();return r=g().set(r,e),i[n](r,t)}function fn(t,e,n){if(l(t)&&(e=t,t=void 0),t=t||"",null!=e)return gn(t,e,n,"month");for(var r=[],i=0;i<12;i++)r[i]=gn(t,i,n,"month");return r}function pn(t,e,n,r){"boolean"==typeof t?l(e)&&(n=e,e=void 0):(e=t,t=!1,l(n=e)&&(n=e,e=void 0)),e=e||"";var i,o=ge(),s=t?o._week.dow:0,a=[];if(null!=n)return gn(e,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=gn(e,(i+s)%7,r,"day");return a}et=G("Milliseconds",!1),P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName"),(Q=_.prototype).add=It,Q.calendar=function(t,n){1===arguments.length&&(arguments[0]?Qe(arguments[0])?(t=arguments[0],n=void 0):function(t){for(var e=i(t)&&!a(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],o=0;o<r.length;o+=1)n=n||s(t,r[o]);return e&&n}(arguments[0])&&(n=arguments[0],t=void 0):n=t=void 0);var r=je(t=t||Ie(),this).startOf("day");return r=e.calendarFormat(this,r)||"sameElse",n=n&&(T(n[r])?n[r].call(this,t):n[r]),this.format(n||this.localeData().calendar(r,this,Ie(t)))},Q.clone=function(){return new _(this)},Q.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=je(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=V(e)){case"year":o=Xe(this,r)/12;break;case"month":o=Xe(this,r);break;case"quarter":o=Xe(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:q(o)},Q.endOf=function(t){var n,r;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?sn:on,t){case"year":n=r(this.year()+1,0,1)-1;break;case"quarter":n=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=r(this.year(),this.month()+1,1)-1;break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=36e5-rn(n+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":n=this._d.valueOf(),n+=6e4-rn(n,6e4)-1;break;case"second":n=this._d.valueOf(),n+=1e3-rn(n,1e3)-1}return this._d.setTime(n),e.updateOffset(this,!0),this},Q.format=function(t){return t=R(this,t=t||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat)),this.localeData().postformat(t)},Q.from=function(t,e){return this.isValid()&&(v(t)&&t.isValid()||Ie(t).isValid())?We({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Q.fromNow=function(t){return this.from(Ie(),t)},Q.to=function(t,e){return this.isValid()&&(v(t)&&t.isValid()||Ie(t).isValid())?We({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Q.toNow=function(t){return this.to(Ie(),t)},Q.get=function(t){return T(this[t=V(t)])?this[t]():this},Q.invalidAt=function(){return f(this).overflow},Q.isAfter=function(t,e){return t=v(t)?t:Ie(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},Q.isBefore=function(t,e){return t=v(t)?t:Ie(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},Q.isBetween=function(t,e,n,r){return t=v(t)?t:Ie(t),e=v(e)?e:Ie(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&("("===(r=r||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===r[1]?this.isBefore(e,n):!this.isAfter(e,n))},Q.isSame=function(t,e){return t=v(t)?t:Ie(t),!(!this.isValid()||!t.isValid())&&("millisecond"===(e=V(e)||"millisecond")?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},Q.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Q.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Q.isValid=function(){return p(this)},Q.lang=Kt,Q.locale=Je,Q.localeData=tn,Q.max=it,Q.min=rt,Q.parsingFlags=function(){return h({},f(this))},Q.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e,n=[];for(e in t)s(t,e)&&n.push({unit:e,priority:H[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}(t=$(t)),r=n.length,i=0;i<r;i++)this[n[i].unit](t[n[i].unit]);else if(T(this[t=V(t)]))return this[t](e);return this},Q.startOf=function(t){var n,r;if(void 0===(t=V(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?sn:on,t){case"year":n=r(this.year(),0,1);break;case"quarter":n=r(this.year(),this.month()-this.month()%3,1);break;case"month":n=r(this.year(),this.month(),1);break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=r(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=rn(n+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":n=this._d.valueOf(),n-=rn(n,6e4);break;case"second":n=this._d.valueOf(),n-=rn(n,1e3)}return this._d.setTime(n),e.updateOffset(this,!0),this},Q.subtract=Gt,Q.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Q.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Q.toDate=function(){return new Date(this.valueOf())},Q.toISOString=function(t){if(!this.isValid())return null;var e=(t=!0!==t)?this.clone().utc():this;return e.year()<0||9999<e.year()?R(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",R(e,"Z")):R(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Q.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",n="";return this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",n="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n+'[")]')},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Q.toJSON=function(){return this.isValid()?this.toISOString():null},Q.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Q.unix=function(){return Math.floor(this.valueOf()/1e3)},Q.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Q.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Q.eraName=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].name;if(e[n].until<=t&&t<=e[n].since)return e[n].name}return""},Q.eraNarrow=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].narrow;if(e[n].until<=t&&t<=e[n].since)return e[n].narrow}return""},Q.eraAbbr=function(){for(var t,e=this.localeData().eras(),n=0,r=e.length;n<r;++n){if(t=this.clone().startOf("day").valueOf(),e[n].since<=t&&t<=e[n].until)return e[n].abbr;if(e[n].until<=t&&t<=e[n].since)return e[n].abbr}return""},Q.eraYear=function(){for(var t,n,r=this.localeData().eras(),i=0,o=r.length;i<o;++i)if(t=r[i].since<=r[i].until?1:-1,n=this.clone().startOf("day").valueOf(),r[i].since<=n&&n<=r[i].until||r[i].until<=n&&n<=r[i].since)return(this.year()-e(r[i].since).year())*t+r[i].offset;return this.year()},Q.year=jt,Q.isLeapYear=function(){return W(this.year())},Q.weekYear=function(t){return dn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Q.isoWeekYear=function(t){return dn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Q.quarter=Q.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Q.month=Rt,Q.daysInMonth=function(){return Mt(this.year(),this.month())},Q.week=Q.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Q.isoWeek=Q.isoWeeks=function(t){var e=Wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Q.weeksInYear=function(){var t=this.localeData()._week;return qt(this.year(),t.dow,t.doy)},Q.weeksInWeekYear=function(){var t=this.localeData()._week;return qt(this.weekYear(),t.dow,t.doy)},Q.isoWeeksInYear=function(){return qt(this.year(),1,4)},Q.isoWeeksInISOWeekYear=function(){return qt(this.isoWeekYear(),1,4)},Q.date=st,Q.day=Q.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-r,"d")):r},Q.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Q.isoWeekday=function(t){return this.isValid()?null!=t?(e=t,n=this.localeData(),n="string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?n:n-7)):this.day()||7:null!=t?this:NaN;var e,n},Q.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Q.hour=Q.hours=ht,Q.minute=Q.minutes=tt,Q.second=Q.seconds=at,Q.millisecond=Q.milliseconds=et,Q.utcOffset=function(t,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:Ve(this);if("string"==typeof t){if(null===(t=Fe(ut,t)))return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&n&&(i=Ve(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!n||this._changeInProgress?Ze(this,We(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},Q.utc=function(t){return this.utcOffset(0,t)},Q.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ve(this),"m")),this},Q.parseZone=function(){var t;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(t=Fe(dt,this._i))?this.utcOffset(t):this.utcOffset(0,!0)),this},Q.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ie(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Q.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Q.isLocal=function(){return!!this.isValid()&&!this._isUTC},Q.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Q.isUtc=$e,Q.isUTC=$e,Q.zoneAbbr=function(){return this._isUTC?"UTC":""},Q.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Q.dates=C("dates accessor is deprecated. Use date instead.",st),Q.months=C("months accessor is deprecated. Use month instead",Rt),Q.years=C("years accessor is deprecated. Use year instead",jt),Q.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?(this.utcOffset(t="string"!=typeof t?-t:t,e),this):-this.utcOffset()})),Q.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return y(e,this),(e=De(e))._a?(t=(e._isUTC?g:Ie)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,n){for(var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0,s=0;s<r;s++)(n&&t[s]!==e[s]||!n&&Y(t[s])!==Y(e[s]))&&o++;return o+i}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted})),(X=D.prototype).calendar=function(t,e,n){return T(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,n):t},X.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(B).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])},X.invalidDate=function(){return this._invalidDate},X.ordinal=function(t){return this._ordinal.replace("%d",t)},X.preparse=hn,X.postformat=hn,X.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return T(i)?i(t,e,n,r):i.replace(/%d/i,t)},X.pastFuture=function(t,e){return T(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},X.set=function(t){var e,n;for(n in t)s(t,n)&&(T(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},X.eras=function(t,n){for(var r,i=this._eras||ge("en")._eras,o=0,s=i.length;o<s;++o)switch("string"==typeof i[o].since&&(r=e(i[o].since).startOf("day"),i[o].since=r.valueOf()),typeof i[o].until){case"undefined":i[o].until=1/0;break;case"string":r=e(i[o].until).startOf("day").valueOf(),i[o].until=r.valueOf()}return i},X.erasParse=function(t,e,n){var r,i,o,s,a,c=this.eras();for(t=t.toUpperCase(),r=0,i=c.length;r<i;++r)if(o=c[r].name.toUpperCase(),s=c[r].abbr.toUpperCase(),a=c[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return c[r];break;case"NNNN":if(o===t)return c[r];break;case"NNNNN":if(a===t)return c[r]}else if(0<=[o,s,a].indexOf(t))return c[r]},X.erasConvertYear=function(t,n){var r=t.since<=t.until?1:-1;return void 0===n?e(t.since).year():e(t.since).year()+(n-t.offset)*r},X.erasAbbrRegex=function(t){return s(this,"_erasAbbrRegex")||cn.call(this),t?this._erasAbbrRegex:this._erasRegex},X.erasNameRegex=function(t){return s(this,"_erasNameRegex")||cn.call(this),t?this._erasNameRegex:this._erasRegex},X.erasNarrowRegex=function(t){return s(this,"_erasNarrowRegex")||cn.call(this),t?this._erasNarrowRegex:this._erasRegex},X.months=function(t,e){return t?(n(this._months)?this._months:this._months[(this._months.isFormat||Lt).test(e)?"format":"standalone"])[t.month()]:n(this._months)?this._months:this._months.standalone},X.monthsShort=function(t,e){return t?(n(this._monthsShort)?this._monthsShort:this._monthsShort[Lt.test(e)?"format":"standalone"])[t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},X.monthsParse=function(t,e,n){var r,i;if(this._monthsParseExact)return function(t,e,n){var r,i,o;if(t=t.toLocaleLowerCase(),!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=g([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=yt.call(this._shortMonthsParse,t))?i:null:-1!==(i=yt.call(this._longMonthsParse,t))?i:null:"MMM"===e?-1!==(i=yt.call(this._shortMonthsParse,t))||-1!==(i=yt.call(this._longMonthsParse,t))?i:null:-1!==(i=yt.call(this._longMonthsParse,t))||-1!==(i=yt.call(this._shortMonthsParse,t))?i:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=g([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},X.monthsRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ot),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},X.monthsShortRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Nt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},X.week=function(t){return Wt(t,this._week.dow,this._week.doy).week},X.firstDayOfYear=function(){return this._week.doy},X.firstDayOfWeek=function(){return this._week.dow},X.weekdays=function(t,e){return e=n(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"],!0===t?Yt(e,this._week.dow):t?e[t.day()]:e},X.weekdaysMin=function(t){return!0===t?Yt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},X.weekdaysShort=function(t){return!0===t?Yt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},X.weekdaysParse=function(t,e,n){var r,i;if(this._weekdaysParseExact)return function(t,e,n){var r,i,o;if(t=t.toLocaleLowerCase(),!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=g([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=yt.call(this._weekdaysParse,t))?i:null:"ddd"===e?-1!==(i=yt.call(this._shortWeekdaysParse,t))?i:null:-1!==(i=yt.call(this._minWeekdaysParse,t))?i:null:"dddd"===e?-1!==(i=yt.call(this._weekdaysParse,t))||-1!==(i=yt.call(this._shortWeekdaysParse,t))||-1!==(i=yt.call(this._minWeekdaysParse,t))?i:null:"ddd"===e?-1!==(i=yt.call(this._shortWeekdaysParse,t))||-1!==(i=yt.call(this._weekdaysParse,t))||-1!==(i=yt.call(this._minWeekdaysParse,t))?i:null:-1!==(i=yt.call(this._minWeekdaysParse,t))||-1!==(i=yt.call(this._weekdaysParse,t))||-1!==(i=yt.call(this._shortWeekdaysParse,t))?i:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=g([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},X.weekdaysRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},X.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},X.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||te.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},X.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},X.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},ue("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===Y(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),e.lang=C("moment.lang is deprecated. Use moment.locale instead.",ue),e.langData=C("moment.langData is deprecated. Use moment.localeData instead.",ge);var mn=Math.abs;function bn(t,e,n,r){return e=We(e,n),t._milliseconds+=r*e._milliseconds,t._days+=r*e._days,t._months+=r*e._months,t._bubble()}function kn(t){return t<0?Math.floor(t):Math.ceil(t)}function wn(t){return 4800*t/146097}function yn(t){return 146097*t/4800}function _n(t){return function(){return this.as(t)}}function vn(t){return function(){return this.isValid()?this._data[t]:NaN}}ot=_n("ms"),J=_n("s"),It=_n("m"),it=_n("h"),rt=_n("d"),Gt=_n("w"),ht=_n("M"),tt=_n("Q"),at=_n("y"),et=vn("milliseconds"),st=vn("seconds"),jt=vn("minutes"),X=vn("hours");var An=vn("days"),Cn=vn("months"),xn=vn("years"),En=Math.round,Tn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Sn(t,e,n,r){var i=We(t).abs(),o=En(i.as("s")),s=En(i.as("m")),a=En(i.as("h")),c=En(i.as("d")),l=En(i.as("M")),d=En(i.as("w"));return i=En(i.as("y")),o=(o<=n.ss?["s",o]:o<n.s&&["ss",o])||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c],(o=(o=null!=n.w?o||d<=1&&["w"]||d<n.w&&["ww",d]:o)||l<=1&&["M"]||l<n.M&&["MM",l]||i<=1&&["y"]||["yy",i])[2]=e,o[3]=0<+t,o[4]=r,function(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}.apply(null,o)}var Dn=Math.abs;function Mn(t){return(0<t)-(t<0)||+t}function In(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,o,s,a=Dn(this._milliseconds)/1e3,c=Dn(this._days),l=Dn(this._months),d=this.asSeconds();return d?(t=q(a/60),e=q(t/60),a%=60,t%=60,n=q(l/12),l%=12,r=a?a.toFixed(3).replace(/\.?0+$/,""):"",i=Mn(this._months)!==Mn(d)?"-":"",o=Mn(this._days)!==Mn(d)?"-":"",s=Mn(this._milliseconds)!==Mn(d)?"-":"",(d<0?"-":"")+"P"+(n?i+n+"Y":"")+(l?i+l+"M":"")+(c?o+c+"D":"")+(e||t||a?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(a?s+r+"S":"")):"P0D"}var Bn=Ne.prototype;return Bn.isValid=function(){return this._isValid},Bn.abs=function(){var t=this._data;return this._milliseconds=mn(this._milliseconds),this._days=mn(this._days),this._months=mn(this._months),t.milliseconds=mn(t.milliseconds),t.seconds=mn(t.seconds),t.minutes=mn(t.minutes),t.hours=mn(t.hours),t.months=mn(t.months),t.years=mn(t.years),this},Bn.add=function(t,e){return bn(this,t,e,1)},Bn.subtract=function(t,e){return bn(this,t,e,-1)},Bn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=V(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+wn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(yn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Bn.asMilliseconds=ot,Bn.asSeconds=J,Bn.asMinutes=It,Bn.asHours=it,Bn.asDays=rt,Bn.asWeeks=Gt,Bn.asMonths=ht,Bn.asQuarters=tt,Bn.asYears=at,Bn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12):NaN},Bn._bubble=function(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data;return 0<=t&&0<=e&&0<=n||t<=0&&e<=0&&n<=0||(t+=864e5*kn(yn(n)+e),n=e=0),r.milliseconds=t%1e3,t=q(t/1e3),r.seconds=t%60,t=q(t/60),r.minutes=t%60,t=q(t/60),r.hours=t%24,e+=q(t/24),n+=t=q(wn(e)),e-=kn(yn(t)),t=q(n/12),n%=12,r.days=e,r.months=n,r.years=t,this},Bn.clone=function(){return We(this)},Bn.get=function(t){return t=V(t),this.isValid()?this[t+"s"]():NaN},Bn.milliseconds=et,Bn.seconds=st,Bn.minutes=jt,Bn.hours=X,Bn.days=An,Bn.weeks=function(){return q(this.days()/7)},Bn.months=Cn,Bn.years=xn,Bn.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Tn;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(n=t),"object"==typeof e&&(r=Object.assign({},Tn,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),e=Sn(this,!n,r,t=this.localeData()),n&&(e=t.pastFuture(+this,e)),t.postformat(e)},Bn.toISOString=In,Bn.toString=In,Bn.toJSON=In,Bn.locale=Je,Bn.localeData=tn,Bn.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",In),Bn.lang=Kt,P("X",0,0,"unix"),P("x",0,0,"valueOf"),gt("x",lt),gt("X",/[+-]?\d+(\.\d{1,3})?/),kt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),kt("x",(function(t,e,n){n._d=new Date(Y(t))})),e.version="2.29.4",t=Ie,e.fn=Q,e.min=function(){return Be("isBefore",[].slice.call(arguments,0))},e.max=function(){return Be("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=g,e.unix=function(t){return Ie(1e3*t)},e.months=function(t,e){return fn(t,e,"months")},e.isDate=d,e.locale=ue,e.invalid=m,e.duration=We,e.isMoment=v,e.weekdays=function(t,e,n){return pn(t,e,n,"weekdays")},e.parseZone=function(){return Ie.apply(null,arguments).parseZone()},e.localeData=ge,e.isDuration=Oe,e.monthsShort=function(t,e){return fn(t,e,"monthsShort")},e.weekdaysMin=function(t,e,n){return pn(t,e,n,"weekdaysMin")},e.defineLocale=he,e.updateLocale=function(t,e){var n,r;return null!=e?(r=oe,null!=se[t]&&null!=se[t].parentLocale?se[t].set(S(se[t]._config,e)):(e=S(r=null!=(n=de(t))?n._config:r,e),null==n&&(e.abbr=t),(r=new D(e)).parentLocale=se[t],se[t]=r),ue(t)):null!=se[t]&&(null!=se[t].parentLocale?(se[t]=se[t].parentLocale,t===ue()&&ue(t)):null!=se[t]&&delete se[t]),se[t]},e.locales=function(){return M(se)},e.weekdaysShort=function(t,e,n){return pn(t,e,n,"weekdaysShort")},e.normalizeUnits=V,e.relativeTimeRounding=function(t){return void 0===t?En:"function"==typeof t&&(En=t,!0)},e.relativeTimeThreshold=function(t,e){return void 0!==Tn[t]&&(void 0===e?Tn[t]:(Tn[t]=e,"s"===t&&(Tn.ss=e-1),!0))},e.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},e.prototype=Q,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e},(o=a).exports=s();const l=a.exports,d={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},u={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},h=function(t="fatal"){let e=d.fatal;"string"==typeof t?(t=t.toLowerCase())in d&&(e=d[t]):"number"==typeof t&&(e=t),u.trace=()=>{},u.debug=()=>{},u.info=()=>{},u.warn=()=>{},u.error=()=>{},u.fatal=()=>{},e<=d.fatal&&(u.fatal=console.error?console.error.bind(console,g("FATAL"),"color: orange"):console.log.bind(console,"[35m",g("FATAL"))),e<=d.error&&(u.error=console.error?console.error.bind(console,g("ERROR"),"color: orange"):console.log.bind(console,"[31m",g("ERROR"))),e<=d.warn&&(u.warn=console.warn?console.warn.bind(console,g("WARN"),"color: orange"):console.log.bind(console,"[33m",g("WARN"))),e<=d.info&&(u.info=console.info?console.info.bind(console,g("INFO"),"color: lightblue"):console.log.bind(console,"[34m",g("INFO"))),e<=d.debug&&(u.debug=console.debug?console.debug.bind(console,g("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",g("DEBUG"))),e<=d.trace&&(u.trace=console.debug?console.debug.bind(console,g("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",g("TRACE")))},g=t=>`%c${l().format("ss.SSS")} : ${t} : `;var f={};Object.defineProperty(f,"__esModule",{value:!0});var p=f.sanitizeUrl=void 0,m=/^([^\w]*)(javascript|data|vbscript)/im,b=/&#(\w+)(^\w|;)?/g,k=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,w=/^([^:]+):/gm,y=[".","/"];function _(t){return y.indexOf(t[0])>-1}function v(t){return t.replace(b,(function(t,e){return String.fromCharCode(e)}))}function A(t){var e=v(t||"").replace(k,"").trim();if(!e)return"about:blank";if(_(e))return e;var n=e.match(w);if(!n)return e;var r=n[0];return m.test(r)?"about:blank":e}function C(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function E(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}function o(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}function s(t,e,n=0,o=t.length){const s=i(t,e,n,o-1);return s>n&&r(t[s-1],e)>-r(t[s],e)?s-1:s}return 2!==t.length?(e=C,n=(e,n)=>C(t(e),n),r=(e,n)=>t(e)-n):(e=t===C||t===x?t:T,n=t,r=t),{left:i,center:s,right:o}}function T(){return 0}function S(t){return null===t?NaN:+t}function*D(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}p=f.sanitizeUrl=A;const M=E(C),I=M.right,B=M.left,L=E(S).center,N=I;function O(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=$(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const P=z($),R=z(V);function z(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:s}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((s=Math.floor(void 0!==s?s:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!s||!n&&!r)return e;const a=n&&t(n),c=r&&t(r),l=i.slice();return a&&c?(F(a,l,i,o,s),F(a,i,l,o,s),F(a,l,i,o,s),j(c,i,l,o,s),j(c,l,i,o,s),j(c,i,l,o,s)):a?(F(a,i,l,o,s),F(a,l,i,o,s),F(a,i,l,o,s)):c&&(j(c,i,l,o,s),j(c,l,i,o,s),j(c,i,l,o,s)),e}}function F(t,e,n,r,i){for(let o=0,s=r*i;o<s;)t(e,n,o,o+=r,1)}function j(t,e,n,r,i){for(let o=0,s=r*i;o<r;++o)t(e,n,o,o+s,r)}function V(t){const e=$(t);return(t,n,r,i,o)=>{e(t,n,0+(r<<=2),0+(i<<=2),o<<=2),e(t,n,r+1,i+1,o),e(t,n,r+2,i+2,o),e(t,n,r+3,i+3,o)}}function $(t){const e=Math.floor(t);if(e===t)return H(t);const n=t-e,r=2*t+1;return(t,i,o,s,a)=>{if(!((s-=a)>=o))return;let c=e*i[o];const l=a*e,d=l+a;for(let t=o,e=o+l;t<e;t+=a)c+=i[Math.min(s,t)];for(let e=o,u=s;e<=u;e+=a)c+=i[Math.min(s,e+l)],t[e]=(c+n*(i[Math.max(o,e-d)]+i[Math.min(s,e+d)]))/r,c-=i[Math.max(o,e-l)]}}function H(t){const e=2*t+1;return(n,r,i,o,s)=>{if(!((o-=s)>=i))return;let a=t*r[i];const c=s*t;for(let t=i,e=i+c;t<e;t+=s)a+=r[Math.min(o,t)];for(let t=i,l=o;t<=l;t+=s)a+=r[Math.min(o,t+c)],n[t]=a/e,a-=r[Math.max(i,t-c)]}}function U(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function W(t){return 0|t.length}function q(t){return!(t>0)}function Y(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function G(t){return e=>t(...e)}function Z(...t){const e="function"==typeof t[t.length-1]&&G(t.pop()),n=(t=t.map(Y)).map(W),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(q))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let s=r;for(;++i[s]===n[s];){if(0===s)return e?o.map(e):o;i[s--]=0}}}function K(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function Q(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let s=-1;for(let a of t)null!=(a=e(a,++s,t))&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i))}if(r>1)return o/(r-1)}function X(t,e){const n=Q(t,e);return n?Math.sqrt(n):n}function J(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class tt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,s=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);s&&(e[n++]=s),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function et(t,e){const n=new tt;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function nt(t,e){const n=new tt;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class rt extends Map{constructor(t,e=ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ot(this,t))}has(t){return super.has(ot(this,t))}set(t,e){return super.set(st(this,t),e)}delete(t){return super.delete(at(this,t))}}class it extends Set{constructor(t,e=ct){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(ot(this,t))}add(t){return super.add(st(this,t))}delete(t){return super.delete(at(this,t))}}function ot({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function st({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function at({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ct(t){return null!==t&&"object"==typeof t?t.valueOf():t}function lt(t){return t}function dt(t,...e){return yt(t,lt,lt,e)}function ut(t,...e){return yt(t,Array.from,lt,e)}function ht(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function gt(t,...e){return ht(ut(t,...e),e)}function ft(t,e,...n){return ht(mt(t,e,...n),n)}function pt(t,e,...n){return yt(t,lt,e,n)}function mt(t,e,...n){return yt(t,Array.from,e,n)}function bt(t,...e){return yt(t,lt,wt,e)}function kt(t,...e){return yt(t,Array.from,wt,e)}function wt(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function yt(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const s=new rt,a=r[o++];let c=-1;for(const t of i){const e=a(t,++c,i),n=s.get(e);n?n.push(t):s.set(e,[t])}for(const[e,n]of s)s.set(e,t(n,o));return e(s)}(t,0)}function _t(t,e){return Array.from(e,(e=>t[e]))}function vt(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=Ct(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>Ct(n[t],n[e])))),_t(t,r)}return t.sort(At(n))}function At(t=C){if(t===C)return Ct;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function Ct(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function xt(t,e,n){return(2!==e.length?vt(pt(t,e,n),(([t,e],[n,r])=>C(e,r)||C(t,n))):vt(dt(t,n),(([t,n],[r,i])=>e(n,i)||C(t,r)))).map((([t])=>t))}var Et=Array.prototype.slice;function Tt(t){return()=>t}var St=Math.sqrt(50),Dt=Math.sqrt(10),Mt=Math.sqrt(2);function It(t,e,n){var r,i,o,s,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=Bt(t,e,n))||!isFinite(s))return[];if(s>0){let n=Math.round(t/s),r=Math.round(e/s);for(n*s<t&&++n,r*s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)*s}else{s=-s;let n=Math.round(t*s),r=Math.round(e*s);for(n/s<t&&++n,r/s>e&&--r,o=new Array(i=r-n+1);++a<i;)o[a]=(n+a)/s}return r&&o.reverse(),o}function Bt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=St?10:o>=Dt?5:o>=Mt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=St?10:o>=Dt?5:o>=Mt?2:1)}function Lt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=St?i*=10:o>=Dt?i*=5:o>=Mt&&(i*=2),e<t?-i:i}function Nt(t,e,n){let r;for(;;){const i=Bt(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Ot(t){return Math.ceil(Math.log(U(t))/Math.LN2)+1}function Pt(){var t=lt,e=J,n=Ot;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,s,a=r.length,c=new Array(a);for(i=0;i<a;++i)c[i]=t(r[i],i,r);var l=e(c),d=l[0],u=l[1],h=n(c,d,u);if(!Array.isArray(h)){const t=u,n=+h;if(e===J&&([d,u]=Nt(d,u,n)),(h=It(d,u,n))[0]<=d&&(s=Bt(d,u,n)),h[h.length-1]>=u)if(t>=u&&e===J){const t=Bt(d,u,n);isFinite(t)&&(t>0?u=(Math.floor(u/t)+1)*t:t<0&&(u=(Math.ceil(u*-t)+1)/-t))}else h.pop()}for(var g=h.length;h[0]<=d;)h.shift(),--g;for(;h[g-1]>u;)h.pop(),--g;var f,p=new Array(g+1);for(i=0;i<=g;++i)(f=p[i]=[]).x0=i>0?h[i-1]:d,f.x1=i<g?h[i]:u;if(isFinite(s)){if(s>0)for(i=0;i<a;++i)null!=(o=c[i])&&d<=o&&o<=u&&p[Math.min(g,Math.floor((o-d)/s))].push(r[i]);else if(s<0)for(i=0;i<a;++i)if(null!=(o=c[i])&&d<=o&&o<=u){const t=Math.floor((d-o)*s);p[Math.min(g,t+(h[t]<=o))].push(r[i])}}else for(i=0;i<a;++i)null!=(o=c[i])&&d<=o&&o<=u&&p[N(h,o,0,g)].push(r[i]);return p}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:Tt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:Tt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Tt(Et.call(t)):Tt(t),r):n},r}function Rt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function zt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Ft(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function jt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Vt(t,e,n=0,r=t.length-1,i){for(i=void 0===i?Ct:At(i);r>n;){if(r-n>600){const o=r-n+1,s=e-n+1,a=Math.log(o),c=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*c*(o-c)/o)*(s-o/2<0?-1:1);Vt(t,e,Math.max(n,Math.floor(e-s*c/o+l)),Math.min(r,Math.floor(e+(o-s)*c/o+l)),i)}const o=t[e];let s=n,a=r;for($t(t,n,e),i(t[r],o)>0&&$t(t,n,r);s<a;){for($t(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}0===i(t[n],o)?$t(t,n,a):(++a,$t(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function $t(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ht(t,e=C){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?C(t,i)>0:0===C(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function Ut(t,e,n){if(r=(t=Float64Array.from(D(t,n))).length){if((e=+e)<=0||r<2)return Ft(t);if(e>=1)return Rt(t);var r,i=(r-1)*e,o=Math.floor(i),s=Rt(Vt(t,o).subarray(0,o+1));return s+(Ft(t.subarray(o+1))-s)*(i-o)}}function Wt(t,e,n=S){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(i-o)}}function qt(t,e,n){if(r=(t=Float64Array.from(D(t,n))).length){if((e=+e)<=0||r<2)return jt(t);if(e>=1)return zt(t);var r,i=Math.floor((r-1)*e),o=(e,n)=>Ct(t[e],t[n]);return Ht(Vt(Uint32Array.from(t,((t,e)=>e)),i,0,r-1,o).subarray(0,i+1),(e=>t[e]))}}function Yt(t,e,n){return Math.ceil((n-e)/(2*(Ut(t,.75)-Ut(t,.25))*Math.pow(U(t),-1/3)))}function Gt(t,e,n){return Math.ceil((n-e)*Math.cbrt(U(t))/(3.49*X(t)))}function Zt(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Kt(t,e){return Ut(t,.5,e)}function Qt(t,e){return qt(t,.5,e)}function*Xt(t){for(const e of t)yield*e}function Jt(t){return Array.from(Xt(t))}function te(t,e){const n=new rt;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function ee(t,e=ne){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function ne(t,e){return[t,e]}function re(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function ie(t,e=C){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=C);const i=(t,r)=>e(n[t],n[r]);let o,s;return Uint32Array.from(n,((t,e)=>e)).sort(e===C?(t,e)=>Ct(n[t],n[e]):At(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,s=e),r[t]=s):r[t]=NaN})),r}function oe(t,e=C){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?C(t,i)<0:0===C(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n}function se(t,e=C){if(1===e.length)return jt(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)<0)&&(n=o,r=i);return r}function ae(t,e=C){if(1===e.length)return zt(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)>0)&&(n=o,r=i);return r}function ce(t,e){const n=se(t,e);return n<0?void 0:n}const le=de(Math.random);function de(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function ue(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function he(t){if(!(i=t.length))return[];for(var e=-1,n=Ft(t,ge),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r}function ge(t){return t.length}function fe(){return he(arguments)}function pe(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function me(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function be(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function ke(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function we(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,s=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++s}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++s,t);return n}function ye(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function _e(t,...e){t=new it(t);for(const n of e)for(const e of n)t.delete(e);return t}function ve(t,e){const n=e[Symbol.iterator](),r=new it;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Ae(t,...e){t=new it(t),e=e.map(Ce);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function Ce(t){return t instanceof it?t:new it(t)}function xe(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=Ee(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=Ee(i);if(r.add(t),Object.is(e,t))break}}return!0}function Ee(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Te(t,e){return xe(e,t)}function Se(...t){const e=new it;for(const n of t)for(const t of n)e.add(t);return e}function De(t){return t}var Me=1,Ie=2,Be=3,Le=4,Ne=1e-6;function Oe(t){return"translate("+t+",0)"}function Pe(t){return"translate(0,"+t+")"}function Re(t){return e=>+t(e)}function ze(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Fe(){return!this.__axis}function je(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=t===Me||t===Le?-1:1,d=t===Le||t===Ie?"x":"y",u=t===Me||t===Be?Oe:Pe;function h(h){var g=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,f=null==i?e.tickFormat?e.tickFormat.apply(e,n):De:i,p=Math.max(o,0)+a,m=e.range(),b=+m[0]+c,k=+m[m.length-1]+c,w=(e.bandwidth?ze:Re)(e.copy(),c),y=h.selection?h.selection():h,_=y.selectAll(".domain").data([null]),v=y.selectAll(".tick").data(g,e).order(),A=v.exit(),C=v.enter().append("g").attr("class","tick"),x=v.select("line"),E=v.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(C),x=x.merge(C.append("line").attr("stroke","currentColor").attr(d+"2",l*o)),E=E.merge(C.append("text").attr("fill","currentColor").attr(d,l*p).attr("dy",t===Me?"0em":t===Be?"0.71em":"0.32em")),h!==y&&(_=_.transition(h),v=v.transition(h),x=x.transition(h),E=E.transition(h),A=A.transition(h).attr("opacity",Ne).attr("transform",(function(t){return isFinite(t=w(t))?u(t+c):this.getAttribute("transform")})),C.attr("opacity",Ne).attr("transform",(function(t){var e=this.parentNode.__axis;return u((e&&isFinite(e=e(t))?e:w(t))+c)}))),A.remove(),_.attr("d",t===Le||t===Ie?s?"M"+l*s+","+b+"H"+c+"V"+k+"H"+l*s:"M"+c+","+b+"V"+k:s?"M"+b+","+l*s+"V"+c+"H"+k+"V"+l*s:"M"+b+","+c+"H"+k),v.attr("opacity",1).attr("transform",(function(t){return u(w(t)+c)})),x.attr(d+"2",l*o),E.attr(d,l*p).text(f),y.filter(Fe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ie?"start":t===Le?"end":"middle"),y.each((function(){this.__axis=w}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=s=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(s=+t,h):s},h.tickPadding=function(t){return arguments.length?(a=+t,h):a},h.offset=function(t){return arguments.length?(c=+t,h):c},h}function Ve(t){return je(Me,t)}function $e(t){return je(Ie,t)}function He(t){return je(Be,t)}function Ue(t){return je(Le,t)}var We={value:()=>{}};function qe(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ye(r)}function Ye(t){this._=t}function Ge(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ze(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ke(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=We,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ye.prototype=qe.prototype={constructor:Ye,on:function(t,e){var n,r=this._,i=Ge(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=Ke(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ke(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=Ze(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ye(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Qe="http://www.w3.org/1999/xhtml";const Xe={svg:"http://www.w3.org/2000/svg",xhtml:Qe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Je(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Xe.hasOwnProperty(e)?{space:Xe[e],local:t}:t}function tn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qe&&e.documentElement.namespaceURI===Qe?e.createElement(t):e.createElementNS(n,t)}}function en(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nn(t){var e=Je(t);return(e.local?en:tn)(e)}function rn(){}function on(t){return null==t?rn:function(){return this.querySelector(t)}}function sn(t){"function"!=typeof t&&(t=on(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],c=a.length,l=r[i]=new Array(c),d=0;d<c;++d)(o=a[d])&&(s=t.call(o,o.__data__,d,a))&&("__data__"in o&&(s.__data__=o.__data__),l[d]=s);return new Gr(r,this._parents)}function an(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function cn(){return[]}function ln(t){return null==t?cn:function(){return this.querySelectorAll(t)}}function dn(t){return function(){return an(t.apply(this,arguments))}}function un(t){t="function"==typeof t?dn(t):ln(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],c=a.length,l=0;l<c;++l)(s=a[l])&&(r.push(t.call(s,s.__data__,l,a)),i.push(s));return new Gr(r,i)}function hn(t){return function(){return this.matches(t)}}function gn(t){return function(e){return e.matches(t)}}var fn=Array.prototype.find;function pn(t){return function(){return fn.call(this.children,t)}}function mn(){return this.firstElementChild}function bn(t){return this.select(null==t?mn:pn("function"==typeof t?t:gn(t)))}var kn=Array.prototype.filter;function wn(){return Array.from(this.children)}function yn(t){return function(){return kn.call(this.children,t)}}function _n(t){return this.selectAll(null==t?wn:yn("function"==typeof t?t:gn(t)))}function vn(t){"function"!=typeof t&&(t=hn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,c=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&c.push(o);return new Gr(r,this._parents)}function An(t){return new Array(t.length)}function Cn(){return new Gr(this._enter||this._groups.map(An),this._parents)}function xn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function En(t){return function(){return t}}function Tn(t,e,n,r,i,o){for(var s,a=0,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new xn(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function Sn(t,e,n,r,i,o,s){var a,c,l,d=new Map,u=e.length,h=o.length,g=new Array(u);for(a=0;a<u;++a)(c=e[a])&&(g[a]=l=s.call(c,c.__data__,a,e)+"",d.has(l)?i[a]=c:d.set(l,c));for(a=0;a<h;++a)l=s.call(t,o[a],a,o)+"",(c=d.get(l))?(r[a]=c,c.__data__=o[a],d.delete(l)):n[a]=new xn(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&d.get(g[a])===c&&(i[a]=c)}function Dn(t){return t.__data__}function Mn(t,e){if(!arguments.length)return Array.from(this,Dn);var n=e?Sn:Tn,r=this._parents,i=this._groups;"function"!=typeof t&&(t=En(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var d=r[l],u=i[l],h=u.length,g=In(t.call(d,d&&d.__data__,l,r)),f=g.length,p=a[l]=new Array(f),m=s[l]=new Array(f);n(d,u,p,m,c[l]=new Array(h),g,e);for(var b,k,w=0,y=0;w<f;++w)if(b=p[w]){for(w>=y&&(y=w+1);!(k=m[y])&&++y<f;);b._next=k||null}}return(s=new Gr(s,r))._enter=a,s._exit=c,s}function In(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Bn(){return new Gr(this._exit||this._groups.map(An),this._parents)}function Ln(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function Nn(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l,d=n[c],u=r[c],h=d.length,g=a[c]=new Array(h),f=0;f<h;++f)(l=d[f]||u[f])&&(g[f]=l);for(;c<i;++c)a[c]=n[c];return new Gr(a,this._parents)}function On(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this}function Pn(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Rn);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],c=a.length,l=i[o]=new Array(c),d=0;d<c;++d)(s=a[d])&&(l[d]=s);l.sort(e)}return new Gr(i,this._parents).order()}function Rn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zn(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Fn(){return Array.from(this)}function jn(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Vn(){let t=0;for(const e of this)++t;return t}function $n(){return!this.node()}function Hn(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this}function Un(t){return function(){this.removeAttribute(t)}}function Wn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qn(t,e){return function(){this.setAttribute(t,e)}}function Yn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Zn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kn(t,e){var n=Je(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Wn:Un:"function"==typeof e?n.local?Zn:Gn:n.local?Yn:qn)(n,e))}function Qn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xn(t){return function(){this.style.removeProperty(t)}}function Jn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function tr(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function er(t,e,n){return arguments.length>1?this.each((null==e?Xn:"function"==typeof e?tr:Jn)(t,e,null==n?"":n)):nr(this.node(),t)}function nr(t,e){return t.style.getPropertyValue(e)||Qn(t).getComputedStyle(t,null).getPropertyValue(e)}function rr(t){return function(){delete this[t]}}function ir(t,e){return function(){this[t]=e}}function or(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function sr(t,e){return arguments.length>1?this.each((null==e?rr:"function"==typeof e?or:ir)(t,e)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function cr(t){return t.classList||new lr(t)}function lr(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}function dr(t,e){for(var n=cr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ur(t,e){for(var n=cr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function hr(t){return function(){dr(this,t)}}function gr(t){return function(){ur(this,t)}}function fr(t,e){return function(){(e.apply(this,arguments)?dr:ur)(this,t)}}function pr(t,e){var n=ar(t+"");if(arguments.length<2){for(var r=cr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?fr:e?hr:gr)(n,e))}function mr(){this.textContent=""}function br(t){return function(){this.textContent=t}}function kr(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function wr(t){return arguments.length?this.each(null==t?mr:("function"==typeof t?kr:br)(t)):this.node().textContent}function yr(){this.innerHTML=""}function _r(t){return function(){this.innerHTML=t}}function vr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ar(t){return arguments.length?this.each(null==t?yr:("function"==typeof t?vr:_r)(t)):this.node().innerHTML}function Cr(){this.nextSibling&&this.parentNode.appendChild(this)}function xr(){return this.each(Cr)}function Er(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tr(){return this.each(Er)}function Sr(t){var e="function"==typeof t?t:nn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Dr(){return null}function Mr(t,e){var n="function"==typeof t?t:nn(t),r=null==e?Dr:"function"==typeof e?e:on(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function Ir(){var t=this.parentNode;t&&t.removeChild(this)}function Br(){return this.each(Ir)}function Lr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Or(t){return this.select(t?Nr:Lr)}function Pr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Rr(t){return function(e){t.call(this,e,this.__data__)}}function zr(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Fr(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function jr(t,e,n){return function(){var r,i=this.__on,o=Rr(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Vr(t,e,n){var r,i,o=zr(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?jr:Fr,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var c,l=0,d=a.length;l<d;++l)for(r=0,c=a[l];r<s;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}function $r(t,e,n){var r=Qn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Hr(t,e){return function(){return $r(this,t,e)}}function Ur(t,e){return function(){return $r(this,t,e.apply(this,arguments))}}function Wr(t,e){return this.each(("function"==typeof e?Ur:Hr)(t,e))}function*qr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}xn.prototype={constructor:xn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},lr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Yr=[null];function Gr(t,e){this._groups=t,this._parents=e}function Zr(){return new Gr([[document.documentElement]],Yr)}function Kr(){return this}function Qr(t){return"string"==typeof t?new Gr([[document.querySelector(t)]],[document.documentElement]):new Gr([[t]],Yr)}function Xr(t){return Qr(nn(t).call(document.documentElement))}Gr.prototype=Zr.prototype={constructor:Gr,select:sn,selectAll:un,selectChild:bn,selectChildren:_n,filter:vn,data:Mn,enter:Cn,exit:Bn,join:Ln,merge:Nn,selection:Kr,order:On,sort:Pn,call:zn,nodes:Fn,node:jn,size:Vn,empty:$n,each:Hn,attr:Kn,style:er,property:sr,classed:pr,text:wr,html:Ar,raise:xr,lower:Tr,append:Sr,insert:Mr,remove:Br,clone:Or,datum:Pr,on:Vr,dispatch:Wr,[Symbol.iterator]:qr};var Jr=0;function ti(){return new ei}function ei(){this._="@"+(++Jr).toString(36)}function ni(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ri(t,e){if(t=ni(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function ii(t,e){return t.target&&(t=ni(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>ri(t,e)))}function oi(t){return"string"==typeof t?new Gr([document.querySelectorAll(t)],[document.documentElement]):new Gr([an(t)],Yr)}ei.prototype=ti.prototype={constructor:ei,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const si={passive:!1},ai={capture:!0,passive:!1};function ci(t){t.stopImmediatePropagation()}function li(t){t.preventDefault(),t.stopImmediatePropagation()}function di(t){var e=t.document.documentElement,n=Qr(t).on("dragstart.drag",li,ai);"onselectstart"in e?n.on("selectstart.drag",li,ai):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ui(t,e){var n=t.document.documentElement,r=Qr(t).on("dragstart.drag",null);e&&(r.on("click.drag",li,ai),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hi=t=>()=>t;function gi(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:c,dy:l,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:d}})}function fi(t){return!t.ctrlKey&&!t.button}function pi(){return this.parentNode}function mi(t,e){return null==e?{x:t.x,y:t.y}:e}function bi(){return navigator.maxTouchPoints||"ontouchstart"in this}function ki(){var t,e,n,r,i=fi,o=pi,s=mi,a=bi,c={},l=qe("start","drag","end"),d=0,u=0;function h(t){t.on("mousedown.drag",g).filter(a).on("touchstart.drag",m).on("touchmove.drag",b,si).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(s,a){if(!r&&i.call(this,s,a)){var c=w(this,o.call(this,s,a),s,a,"mouse");c&&(Qr(s.view).on("mousemove.drag",f,ai).on("mouseup.drag",p,ai),di(s.view),ci(s),n=!1,t=s.clientX,e=s.clientY,c("start",s))}}function f(r){if(li(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>u}c.mouse("drag",r)}function p(t){Qr(t.view).on("mousemove.drag mouseup.drag",null),ui(t.view,n),li(t),c.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,r,s=t.changedTouches,a=o.call(this,t,e),c=s.length;for(n=0;n<c;++n)(r=w(this,a,t,e,s[n].identifier,s[n]))&&(ci(t),r("start",t,s[n]))}}function b(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=c[r[e].identifier])&&(li(t),n("drag",t,r[e]))}function k(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=c[i[e].identifier])&&(ci(t),n("end",t,i[e]))}function w(t,e,n,r,i,o){var a,u,g,f=l.copy(),p=ri(o||n,e);if(null!=(g=s.call(t,new gi("beforestart",{sourceEvent:n,target:h,identifier:i,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),r)))return a=g.x-p[0]||0,u=g.y-p[1]||0,function n(o,s,l){var m,b=p;switch(o){case"start":c[i]=n,m=d++;break;case"end":delete c[i],--d;case"drag":p=ri(l||s,e),m=d}f.call(o,t,new gi(o,{sourceEvent:s,subject:g,target:h,identifier:i,active:m,x:p[0]+a,y:p[1]+u,dx:p[0]-b[0],dy:p[1]-b[1],dispatch:f}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:hi(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:hi(t),h):o},h.subject=function(t){return arguments.length?(s="function"==typeof t?t:hi(t),h):s},h.touchable=function(t){return arguments.length?(a="function"==typeof t?t:hi(!!t),h):a},h.on=function(){var t=l.on.apply(l,arguments);return t===l?h:t},h.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,h):Math.sqrt(u)},h}function wi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _i(){}gi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var vi=.7,Ai=1/vi,Ci="\\s*([+-]?\\d+)\\s*",xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ti=/^#([0-9a-f]{3,8})$/,Si=new RegExp(`^rgb\\(${Ci},${Ci},${Ci}\\)$`),Di=new RegExp(`^rgb\\(${Ei},${Ei},${Ei}\\)$`),Mi=new RegExp(`^rgba\\(${Ci},${Ci},${Ci},${xi}\\)$`),Ii=new RegExp(`^rgba\\(${Ei},${Ei},${Ei},${xi}\\)$`),Bi=new RegExp(`^hsl\\(${xi},${Ei},${Ei}\\)$`),Li=new RegExp(`^hsla\\(${xi},${Ei},${Ei},${xi}\\)$`),Ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Oi(){return this.rgb().formatHex()}function Pi(){return this.rgb().formatHex8()}function Ri(){return Xi(this).formatHsl()}function zi(){return this.rgb().formatRgb()}function Fi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ti.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ji(e):3===n?new Ui(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Vi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Vi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Si.exec(t))?new Ui(e[1],e[2],e[3],1):(e=Di.exec(t))?new Ui(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Mi.exec(t))?Vi(e[1],e[2],e[3],e[4]):(e=Ii.exec(t))?Vi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Bi.exec(t))?Qi(e[1],e[2]/100,e[3]/100,1):(e=Li.exec(t))?Qi(e[1],e[2]/100,e[3]/100,e[4]):Ni.hasOwnProperty(t)?ji(Ni[t]):"transparent"===t?new Ui(NaN,NaN,NaN,0):null}function ji(t){return new Ui(t>>16&255,t>>8&255,255&t,1)}function Vi(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ui(t,e,n,r)}function $i(t){return t instanceof _i||(t=Fi(t)),t?new Ui((t=t.rgb()).r,t.g,t.b,t.opacity):new Ui}function Hi(t,e,n,r){return 1===arguments.length?$i(t):new Ui(t,e,n,null==r?1:r)}function Ui(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Wi(){return`#${Ki(this.r)}${Ki(this.g)}${Ki(this.b)}`}function qi(){return`#${Ki(this.r)}${Ki(this.g)}${Ki(this.b)}${Ki(255*(isNaN(this.opacity)?1:this.opacity))}`}function Yi(){const t=Gi(this.opacity);return`${1===t?"rgb(":"rgba("}${Zi(this.r)}, ${Zi(this.g)}, ${Zi(this.b)}${1===t?")":`, ${t})`}`}function Gi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ki(t){return((t=Zi(t))<16?"0":"")+t.toString(16)}function Qi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new to(t,e,n,r)}function Xi(t){if(t instanceof to)return new to(t.h,t.s,t.l,t.opacity);if(t instanceof _i||(t=Fi(t)),!t)return new to;if(t instanceof to)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new to(s,a,c,t.opacity)}function Ji(t,e,n,r){return 1===arguments.length?Xi(t):new to(t,e,n,null==r?1:r)}function to(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function eo(t){return(t=(t||0)%360)<0?t+360:t}function no(t){return Math.max(0,Math.min(1,t||0))}function ro(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}wi(_i,Fi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Oi,formatHex:Oi,formatHex8:Pi,formatHsl:Ri,formatRgb:zi,toString:zi}),wi(Ui,Hi,yi(_i,{brighter(t){return t=null==t?Ai:Math.pow(Ai,t),new Ui(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?vi:Math.pow(vi,t),new Ui(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ui(Zi(this.r),Zi(this.g),Zi(this.b),Gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wi,formatHex:Wi,formatHex8:qi,formatRgb:Yi,toString:Yi})),wi(to,Ji,yi(_i,{brighter(t){return t=null==t?Ai:Math.pow(Ai,t),new to(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?vi:Math.pow(vi,t),new to(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ui(ro(t>=240?t-240:t+120,i,r),ro(t,i,r),ro(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new to(eo(this.h),no(this.s),no(this.l),Gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gi(this.opacity);return`${1===t?"hsl(":"hsla("}${eo(this.h)}, ${100*no(this.s)}%, ${100*no(this.l)}%${1===t?")":`, ${t})`}`}}));const io=Math.PI/180,oo=180/Math.PI,so=18,ao=.96422,co=1,lo=.82521,uo=4/29,ho=6/29,go=3*ho*ho,fo=ho*ho*ho;function po(t){if(t instanceof ko)return new ko(t.l,t.a,t.b,t.opacity);if(t instanceof Eo)return To(t);t instanceof Ui||(t=$i(t));var e,n,r=vo(t.r),i=vo(t.g),o=vo(t.b),s=wo((.2225045*r+.7168786*i+.0606169*o)/co);return r===i&&i===o?e=n=s:(e=wo((.4360747*r+.3850649*i+.1430804*o)/ao),n=wo((.0139322*r+.0971045*i+.7141733*o)/lo)),new ko(116*s-16,500*(e-s),200*(s-n),t.opacity)}function mo(t,e){return new ko(t,0,0,null==e?1:e)}function bo(t,e,n,r){return 1===arguments.length?po(t):new ko(t,e,n,null==r?1:r)}function ko(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function wo(t){return t>fo?Math.pow(t,1/3):t/go+uo}function yo(t){return t>ho?t*t*t:go*(t-uo)}function _o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function vo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ao(t){if(t instanceof Eo)return new Eo(t.h,t.c,t.l,t.opacity);if(t instanceof ko||(t=po(t)),0===t.a&&0===t.b)return new Eo(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*oo;return new Eo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Co(t,e,n,r){return 1===arguments.length?Ao(t):new Eo(n,e,t,null==r?1:r)}function xo(t,e,n,r){return 1===arguments.length?Ao(t):new Eo(t,e,n,null==r?1:r)}function Eo(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function To(t){if(isNaN(t.h))return new ko(t.l,0,0,t.opacity);var e=t.h*io;return new ko(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}wi(ko,bo,yi(_i,{brighter(t){return new ko(this.l+so*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new ko(this.l-so*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ui(_o(3.1338561*(e=ao*yo(e))-1.6168667*(t=co*yo(t))-.4906146*(n=lo*yo(n))),_o(-.9787684*e+1.9161415*t+.033454*n),_o(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),wi(Eo,xo,yi(_i,{brighter(t){return new Eo(this.h,this.c,this.l+so*(null==t?1:t),this.opacity)},darker(t){return new Eo(this.h,this.c,this.l-so*(null==t?1:t),this.opacity)},rgb(){return To(this).rgb()}}));var So=-.14861,Do=1.78277,Mo=-.29227,Io=-.90649,Bo=1.97294,Lo=Bo*Io,No=Bo*Do,Oo=Do*Mo-Io*So;function Po(t){if(t instanceof zo)return new zo(t.h,t.s,t.l,t.opacity);t instanceof Ui||(t=$i(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Oo*r+Lo*e-No*n)/(Oo+Lo-No),o=r-i,s=(Bo*(n-i)-Mo*o)/Io,a=Math.sqrt(s*s+o*o)/(Bo*i*(1-i)),c=a?Math.atan2(s,o)*oo-120:NaN;return new zo(c<0?c+360:c,a,i,t.opacity)}function Ro(t,e,n,r){return 1===arguments.length?Po(t):new zo(t,e,n,null==r?1:r)}function zo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Fo(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}function jo(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return Fo((n-r/e)*e,s,i,o,a)}}function Vo(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return Fo((n-r/e)*e,i,o,s,a)}}wi(zo,Ro,yi(_i,{brighter(t){return t=null==t?Ai:Math.pow(Ai,t),new zo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?vi:Math.pow(vi,t),new zo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*io,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ui(255*(e+n*(So*r+Do*i)),255*(e+n*(Mo*r+Io*i)),255*(e+n*(Bo*r)),this.opacity)}}));const $o=t=>()=>t;function Ho(t,e){return function(n){return t+n*e}}function Uo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Wo(t,e){var n=e-t;return n?Ho(t,n>180||n<-180?n-360*Math.round(n/360):n):$o(isNaN(t)?e:t)}function qo(t){return 1==(t=+t)?Yo:function(e,n){return n-e?Uo(e,n,t):$o(isNaN(e)?n:e)}}function Yo(t,e){var n=e-t;return n?Ho(t,n):$o(isNaN(t)?e:t)}const Go=function t(e){var n=qo(e);function r(t,e){var r=n((t=Hi(t)).r,(e=Hi(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=Yo(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function Zo(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Hi(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}var Ko=Zo(jo),Qo=Zo(Vo);function Xo(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Jo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ts(t,e){return(Jo(e)?Xo:es)(t,e)}function es(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=ds(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}function ns(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function rs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function is(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ds(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var os=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ss=new RegExp(os.source,"g");function as(t){return function(){return t}}function cs(t){return function(e){return t(e)+""}}function ls(t,e){var n,r,i,o=os.lastIndex=ss.lastIndex=0,s=-1,a=[],c=[];for(t+="",e+="";(n=os.exec(t))&&(r=ss.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:rs(n,r)})),o=ss.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?cs(c[0].x):as(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)a[(n=c[r]).i]=n.x(t);return a.join("")})}function ds(t,e){var n,r=typeof e;return null==e||"boolean"===r?$o(e):("number"===r?rs:"string"===r?(n=Fi(e))?(e=n,Go):ls:e instanceof Fi?Go:e instanceof Date?ns:Jo(e)?Xo:Array.isArray(e)?es:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?is:rs)(t,e)}function us(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function hs(t,e){var n=Wo(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function gs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var fs,ps=180/Math.PI,ms={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bs(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ps,skewX:Math.atan(c)*ps,scaleX:s,scaleY:a}}function ks(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ms:bs(e.a,e.b,e.c,e.d,e.e,e.f)}function ws(t){return null==t?ms:(fs||(fs=document.createElementNS("http://www.w3.org/2000/svg","g")),fs.setAttribute("transform",t),(t=fs.transform.baseVal.consolidate())?bs((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ms)}function ys(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,s,a){if(t!==i||r!==o){var c=s.push("translate(",null,e,null,n);a.push({i:c-4,x:rs(t,i)},{i:c-2,x:rs(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}function s(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:rs(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function a(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:rs(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function c(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:rs(t,n)},{i:a-2,x:rs(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),s(e.rotate,n.rotate,r,i),a(e.skewX,n.skewX,r,i),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var _s=ys(ks,"px, ","px)","deg)"),vs=ys(ws,", ",")",")"),As=1e-12;function Cs(t){return((t=Math.exp(t))+1/t)/2}function xs(t){return((t=Math.exp(t))-1/t)/2}function Es(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ts=function t(e,n,r){function i(t,i){var o,s,a=t[0],c=t[1],l=t[2],d=i[0],u=i[1],h=i[2],g=d-a,f=u-c,p=g*g+f*f;if(p<As)s=Math.log(h/l)/e,o=function(t){return[a+t*g,c+t*f,l*Math.exp(e*t*s)]};else{var m=Math.sqrt(p),b=(h*h-l*l+r*p)/(2*l*n*m),k=(h*h-l*l-r*p)/(2*h*n*m),w=Math.log(Math.sqrt(b*b+1)-b),y=Math.log(Math.sqrt(k*k+1)-k);s=(y-w)/e,o=function(t){var r=t*s,i=Cs(w),o=l/(n*m)*(i*Es(e*r+w)-xs(w));return[a+o*g,c+o*f,l*i/Cs(e*r+w)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function Ss(t){return function(e,n){var r=t((e=Ji(e)).h,(n=Ji(n)).h),i=Yo(e.s,n.s),o=Yo(e.l,n.l),s=Yo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=s(t),e+""}}}const Ds=Ss(Wo);var Ms=Ss(Yo);function Is(t,e){var n=Yo((t=bo(t)).l,(e=bo(e)).l),r=Yo(t.a,e.a),i=Yo(t.b,e.b),o=Yo(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Bs(t){return function(e,n){var r=t((e=xo(e)).h,(n=xo(n)).h),i=Yo(e.c,n.c),o=Yo(e.l,n.l),s=Yo(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=s(t),e+""}}}const Ls=Bs(Wo);var Ns=Bs(Yo);function Os(t){return function e(n){function r(e,r){var i=t((e=Ro(e)).h,(r=Ro(r)).h),o=Yo(e.s,r.s),s=Yo(e.l,r.l),a=Yo(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,r.gamma=e,r}(1)}const Ps=Os(Wo);var Rs=Os(Yo);function zs(t,e){void 0===e&&(e=t,t=ds);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function Fs(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var js,Vs,$s=0,Hs=0,Us=0,Ws=1e3,qs=0,Ys=0,Gs=0,Zs="object"==typeof performance&&performance.now?performance:Date,Ks="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qs(){return Ys||(Ks(Xs),Ys=Zs.now()+Gs)}function Xs(){Ys=0}function Js(){this._call=this._time=this._next=null}function ta(t,e,n){var r=new Js;return r.restart(t,e,n),r}function ea(){Qs(),++$s;for(var t,e=js;e;)(t=Ys-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$s}function na(){Ys=(qs=Zs.now())+Gs,$s=Hs=0;try{ea()}finally{$s=0,ia(),Ys=0}}function ra(){var t=Zs.now(),e=t-qs;e>Ws&&(Gs-=e,qs=t)}function ia(){for(var t,e,n=js,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:js=e);Vs=t,oa(r)}function oa(t){$s||(Hs&&(Hs=clearTimeout(Hs)),t-Ys>24?(t<1/0&&(Hs=setTimeout(na,t-Zs.now()-Gs)),Us&&(Us=clearInterval(Us))):(Us||(qs=Zs.now(),Us=setInterval(ra,Ws)),$s=1,Ks(na)))}function sa(t,e,n){var r=new Js;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}function aa(t,e,n){var r=new Js,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Qs():+n,r._restart((function o(s){s+=i,r._restart(o,i+=e,n),t(s)}),e,n)},r.restart(t,e,n),r)}Js.prototype=ta.prototype={constructor:Js,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qs():+n)+(null==e?0:+e),this._next||Vs===this||(Vs?Vs._next=this:js=this,Vs=this),this._call=t,this._time=n,oa()},stop:function(){this._call&&(this._call=null,this._time=1/0,oa())}};var ca=qe("start","end","cancel","interrupt"),la=[],da=0,ua=1,ha=2,ga=3,fa=4,pa=5,ma=6;function ba(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};_a(t,n,{name:e,index:r,group:i,on:ca,tween:la,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:da})}function ka(t,e){var n=ya(t,e);if(n.state>da)throw new Error("too late; already scheduled");return n}function wa(t,e){var n=ya(t,e);if(n.state>ga)throw new Error("too late; already running");return n}function ya(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function _a(t,e,n){var r,i=t.__transition;function o(t){n.state=ua,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var l,d,u,h;if(n.state!==ua)return c();for(l in i)if((h=i[l]).name===n.name){if(h.state===ga)return sa(s);h.state===fa?(h.state=ma,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=ma,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(sa((function(){n.state===ga&&(n.state=fa,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=ha,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ha){for(n.state=ga,r=new Array(u=n.tween.length),l=0,d=-1;l<u;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=pa,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);n.state===pa&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var r in n.state=ma,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ta(o,0,n.time)}function va(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ha&&n.state<pa,n.state=ma,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}function Aa(t){return this.each((function(){va(this,t)}))}function Ca(t,e){var n,r;return function(){var i=wa(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function xa(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=wa(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function Ea(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ya(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Ca:xa)(n,t,e))}function Ta(t,e,n){var r=t._id;return t.each((function(){var t=wa(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return ya(t,r).value[e]}}function Sa(t,e){var n;return("number"==typeof e?rs:e instanceof Fi?Go:(n=Fi(e))?(e=n,Go):ls)(t,e)}function Da(t){return function(){this.removeAttribute(t)}}function Ma(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ia(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Ba(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function La(t,e,n){var r,i,o;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttribute(t))===(a=c+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,c));this.removeAttribute(t)}}function Na(t,e,n){var r,i,o;return function(){var s,a,c=n(this);if(null!=c)return(s=this.getAttributeNS(t.space,t.local))===(a=c+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,c));this.removeAttributeNS(t.space,t.local)}}function Oa(t,e){var n=Je(t),r="transform"===n?vs:Sa;return this.attrTween(t,"function"==typeof e?(n.local?Na:La)(n,r,Ta(this,"attr."+t,e)):null==e?(n.local?Ma:Da)(n):(n.local?Ba:Ia)(n,r,e))}function Pa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ra(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function za(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Ra(t,i)),n}return i._value=e,i}function Fa(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Pa(t,i)),n}return i._value=e,i}function ja(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Je(t);return this.tween(n,(r.local?za:Fa)(r,e))}function Va(t,e){return function(){ka(this,t).delay=+e.apply(this,arguments)}}function $a(t,e){return e=+e,function(){ka(this,t).delay=e}}function Ha(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Va:$a)(e,t)):ya(this.node(),e).delay}function Ua(t,e){return function(){wa(this,t).duration=+e.apply(this,arguments)}}function Wa(t,e){return e=+e,function(){wa(this,t).duration=e}}function qa(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ua:Wa)(e,t)):ya(this.node(),e).duration}function Ya(t,e){if("function"!=typeof e)throw new Error;return function(){wa(this,t).ease=e}}function Ga(t){var e=this._id;return arguments.length?this.each(Ya(e,t)):ya(this.node(),e).ease}function Za(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;wa(this,t).ease=n}}function Ka(t){if("function"!=typeof t)throw new Error;return this.each(Za(this._id,t))}function Qa(t){"function"!=typeof t&&(t=hn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,c=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&c.push(o);return new Ec(r,this._parents,this._name,this._id)}function Xa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c,l=e[a],d=n[a],u=l.length,h=s[a]=new Array(u),g=0;g<u;++g)(c=l[g]||d[g])&&(h[g]=c);for(;a<r;++a)s[a]=e[a];return new Ec(s,this._parents,this._name,this._id)}function Ja(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function tc(t,e,n){var r,i,o=Ja(e)?ka:wa;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function ec(t,e){var n=this._id;return arguments.length<2?ya(this.node(),n).on.on(t):this.each(tc(n,t,e))}function nc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rc(){return this.on("end.remove",nc(this._id))}function ic(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=on(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,c,l=r[s],d=l.length,u=o[s]=new Array(d),h=0;h<d;++h)(a=l[h])&&(c=t.call(a,a.__data__,h,l))&&("__data__"in a&&(c.__data__=a.__data__),u[h]=c,ba(u[h],e,n,h,u,ya(a,n)));return new Ec(o,this._parents,e,n)}function oc(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ln(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c,l=r[a],d=l.length,u=0;u<d;++u)if(c=l[u]){for(var h,g=t.call(c,c.__data__,u,l),f=ya(c,n),p=0,m=g.length;p<m;++p)(h=g[p])&&ba(h,e,n,p,g,f);o.push(g),s.push(c)}return new Ec(o,s,e,n)}var sc=Zr.prototype.constructor;function ac(){return new sc(this._groups,this._parents)}function cc(t,e){var n,r,i;return function(){var o=nr(this,t),s=(this.style.removeProperty(t),nr(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function lc(t){return function(){this.style.removeProperty(t)}}function dc(t,e,n){var r,i,o=n+"";return function(){var s=nr(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function uc(t,e,n){var r,i,o;return function(){var s=nr(this,t),a=n(this),c=a+"";return null==a&&(this.style.removeProperty(t),c=a=nr(this,t)),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function hc(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var c=wa(this,t),l=c.on,d=null==c.value[s]?o||(o=lc(e)):void 0;l===n&&i===d||(r=(n=l).copy()).on(a,i=d),c.on=r}}function gc(t,e,n){var r="transform"==(t+="")?_s:Sa;return null==e?this.styleTween(t,cc(t,r)).on("end.style."+t,lc(t)):"function"==typeof e?this.styleTween(t,uc(t,r,Ta(this,"style."+t,e))).each(hc(this._id,t)):this.styleTween(t,dc(t,r,e),n).on("end.style."+t,null)}function fc(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function pc(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&fc(t,o,n)),r}return o._value=e,o}function mc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,pc(t,e,null==n?"":n))}function bc(t){return function(){this.textContent=t}}function kc(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function wc(t){return this.tween("text","function"==typeof t?kc(Ta(this,"text",t)):bc(null==t?"":t+""))}function yc(t){return function(e){this.textContent=t.call(this,e)}}function _c(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&yc(r)),e}return r._value=t,r}function vc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,_c(t))}function Ac(){for(var t=this._name,e=this._id,n=Sc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],c=a.length,l=0;l<c;++l)if(s=a[l]){var d=ya(s,e);ba(s,t,n,l,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ec(r,this._parents,t,n)}function Cc(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},c={value:function(){0==--i&&o()}};n.each((function(){var n=wa(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),n.on=e})),0===i&&o()}))}var xc=0;function Ec(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Tc(t){return Zr().transition(t)}function Sc(){return++xc}var Dc=Zr.prototype;Ec.prototype=Tc.prototype={constructor:Ec,select:ic,selectAll:oc,selectChild:Dc.selectChild,selectChildren:Dc.selectChildren,filter:Qa,merge:Xa,selection:ac,transition:Ac,call:Dc.call,nodes:Dc.nodes,node:Dc.node,size:Dc.size,empty:Dc.empty,each:Dc.each,on:ec,attr:Oa,attrTween:ja,style:gc,styleTween:mc,text:wc,textTween:vc,remove:rc,tween:Ea,delay:Ha,duration:qa,ease:Ga,easeVarying:Ka,end:Cc,[Symbol.iterator]:Dc[Symbol.iterator]};const Mc=t=>+t;function Ic(t){return t*t}function Bc(t){return t*(2-t)}function Lc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Nc(t){return t*t*t}function Oc(t){return--t*t*t+1}function Pc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Rc=3,zc=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(Rc),Fc=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(Rc),jc=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(Rc),Vc=Math.PI,$c=Vc/2;function Hc(t){return 1==+t?1:1-Math.cos(t*$c)}function Uc(t){return Math.sin(t*$c)}function Wc(t){return(1-Math.cos(Vc*t))/2}function qc(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Yc(t){return qc(1-+t)}function Gc(t){return 1-qc(t)}function Zc(t){return((t*=2)<=1?qc(1-t):2-qc(t-1))/2}function Kc(t){return 1-Math.sqrt(1-t*t)}function Qc(t){return Math.sqrt(1- --t*t)}function Xc(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Jc=4/11,tl=6/11,el=8/11,nl=3/4,rl=9/11,il=10/11,ol=15/16,sl=21/22,al=63/64,cl=1/Jc/Jc;function ll(t){return 1-dl(1-t)}function dl(t){return(t=+t)<Jc?cl*t*t:t<el?cl*(t-=tl)*t+nl:t<il?cl*(t-=rl)*t+ol:cl*(t-=sl)*t+al}function ul(t){return((t*=2)<=1?1-dl(1-t):dl(t-1)+1)/2}var hl=1.70158,gl=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(hl),fl=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(hl),pl=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(hl),ml=2*Math.PI,bl=1,kl=.3,wl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ml);function i(t){return e*qc(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*ml)},i.period=function(n){return t(e,n)},i}(bl,kl),yl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ml);function i(t){return 1-e*qc(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*ml)},i.period=function(n){return t(e,n)},i}(bl,kl),_l=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=ml);function i(t){return((t=2*t-1)<0?e*qc(-t)*Math.sin((r-t)/n):2-e*qc(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*ml)},i.period=function(n){return t(e,n)},i}(bl,kl),vl={time:null,delay:0,duration:250,ease:Pc};function Al(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Cl(t){var e,n;t instanceof Ec?(e=t._id,t=t._name):(e=Sc(),(n=vl).time=Qs(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],c=a.length,l=0;l<c;++l)(s=a[l])&&ba(s,t,e,l,a,n||Al(s,e));return new Ec(r,this._parents,t,e)}Zr.prototype.interrupt=Aa,Zr.prototype.transition=Cl;var xl=[null];function El(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>ua&&n.name===e)return new Ec([[t]],xl,e,+r);return null}const Tl=t=>()=>t;function Sl(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Dl(t){t.stopImmediatePropagation()}function Ml(t){t.preventDefault(),t.stopImmediatePropagation()}var Il={name:"drag"},Bl={name:"space"},Ll={name:"handle"},Nl={name:"center"};const{abs:Ol,max:Pl,min:Rl}=Math;function zl(t){return[+t[0],+t[1]]}function Fl(t){return[zl(t[0]),zl(t[1])]}var jl={name:"x",handles:["w","e"].map(Gl),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Vl={name:"y",handles:["n","s"].map(Gl),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},$l={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Gl),input:function(t){return null==t?null:Fl(t)},output:function(t){return t}},Hl={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ql={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Yl={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Gl(t){return{type:t}}function Zl(t){return!t.ctrlKey&&!t.button}function Kl(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ql(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xl(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Jl(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function td(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function ed(){return id(jl)}function nd(){return id(Vl)}function rd(){return id($l)}function id(t){var e,n=Kl,r=Zl,i=Ql,o=!0,s=qe("start","brush","end"),a=6;function c(e){var n=e.property("__brush",p).selectAll(".overlay").data([Gl("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hl.overlay).merge(n).each((function(){var t=Xl(this).extent;Qr(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Gl("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hl.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Hl[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Qr(this),e=Xl(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new u(t,e,n):r}function u(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,s,a,c,u,h,g,f,p,m,b,k=this,w=n.target.__data__.type,y="selection"===(o&&n.metaKey?w="overlay":w)?Il:o&&n.altKey?Nl:Ll,_=t===Vl?null:ql[w],v=t===jl?null:Yl[w],A=Xl(k),C=A.extent,x=A.selection,E=C[0][0],T=C[0][1],S=C[1][0],D=C[1][1],M=0,I=0,B=_&&v&&o&&n.shiftKey,L=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=ri(t,k)).point0=t.slice(),t.identifier=e,t}));va(k);var N=d(k,arguments,!0).beforestart();if("overlay"===w){x&&(p=!0);const e=[L[0],L[1]||L[0]];A.selection=x=[[i=t===Vl?E:Rl(e[0][0],e[1][0]),a=t===jl?T:Rl(e[0][1],e[1][1])],[u=t===Vl?S:Pl(e[0][0],e[1][0]),g=t===jl?D:Pl(e[0][1],e[1][1])]],L.length>1&&F(n)}else i=x[0][0],a=x[0][1],u=x[1][0],g=x[1][1];s=i,c=a,h=u,f=g;var O=Qr(k).attr("pointer-events","none"),P=O.selectAll(".overlay").attr("cursor",Hl[w]);if(n.touches)N.moved=z,N.ended=j;else{var R=Qr(n.view).on("mousemove.brush",z,!0).on("mouseup.brush",j,!0);o&&R.on("keydown.brush",V,!0).on("keyup.brush",$,!0),di(n.view)}l.call(k),N.start(n,y.name)}function z(t){for(const e of t.changedTouches||[t])for(const t of L)t.identifier===e.identifier&&(t.cur=ri(e,k));if(B&&!m&&!b&&1===L.length){const t=L[0];Ol(t.cur[0]-t[0])>Ol(t.cur[1]-t[1])?b=!0:m=!0}for(const t of L)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);p=!0,Ml(t),F(t)}function F(t){const e=L[0],n=e.point0;var r;switch(M=e[0]-n[0],I=e[1]-n[1],y){case Bl:case Il:_&&(M=Pl(E-i,Rl(S-u,M)),s=i+M,h=u+M),v&&(I=Pl(T-a,Rl(D-g,I)),c=a+I,f=g+I);break;case Ll:L[1]?(_&&(s=Pl(E,Rl(S,L[0][0])),h=Pl(E,Rl(S,L[1][0])),_=1),v&&(c=Pl(T,Rl(D,L[0][1])),f=Pl(T,Rl(D,L[1][1])),v=1)):(_<0?(M=Pl(E-i,Rl(S-i,M)),s=i+M,h=u):_>0&&(M=Pl(E-u,Rl(S-u,M)),s=i,h=u+M),v<0?(I=Pl(T-a,Rl(D-a,I)),c=a+I,f=g):v>0&&(I=Pl(T-g,Rl(D-g,I)),c=a,f=g+I));break;case Nl:_&&(s=Pl(E,Rl(S,i-M*_)),h=Pl(E,Rl(S,u+M*_))),v&&(c=Pl(T,Rl(D,a-I*v)),f=Pl(T,Rl(D,g+I*v)))}h<s&&(_*=-1,r=i,i=u,u=r,r=s,s=h,h=r,w in Ul&&P.attr("cursor",Hl[w=Ul[w]])),f<c&&(v*=-1,r=a,a=g,g=r,r=c,c=f,f=r,w in Wl&&P.attr("cursor",Hl[w=Wl[w]])),A.selection&&(x=A.selection),m&&(s=x[0][0],h=x[1][0]),b&&(c=x[0][1],f=x[1][1]),x[0][0]===s&&x[0][1]===c&&x[1][0]===h&&x[1][1]===f||(A.selection=[[s,c],[h,f]],l.call(k),N.brush(t,y.name))}function j(t){if(Dl(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else ui(t.view,p),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),P.attr("cursor",Hl.overlay),A.selection&&(x=A.selection),Jl(x)&&(A.selection=null,l.call(k)),N.end(t,y.name)}function V(t){switch(t.keyCode){case 16:B=_&&v;break;case 18:y===Ll&&(_&&(u=h-M*_,i=s+M*_),v&&(g=f-I*v,a=c+I*v),y=Nl,F(t));break;case 32:y!==Ll&&y!==Nl||(_<0?u=h-M:_>0&&(i=s-M),v<0?g=f-I:v>0&&(a=c-I),y=Bl,P.attr("cursor",Hl.selection),F(t));break;default:return}Ml(t)}function $(t){switch(t.keyCode){case 16:B&&(m=b=B=!1,F(t));break;case 18:y===Nl&&(_<0?u=h:_>0&&(i=s),v<0?g=f:v>0&&(a=c),y=Ll,F(t));break;case 32:y===Bl&&(t.altKey?(_&&(u=h-M*_,i=s+M*_),v&&(g=f-I*v,a=c+I*v),y=Nl):(_<0?u=h:_>0&&(i=s),v<0?g=f:v>0&&(a=c),y=Ll),P.attr("cursor",Hl[w]),F(t));break;default:return}Ml(t)}}function g(t){d(this,arguments).moved(t)}function f(t){d(this,arguments).ended(t)}function p(){var e=this.__brush||{selection:null};return e.extent=Fl(n.apply(this,arguments)),e.dim=t,e}return c.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){d(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){d(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=d(e,arguments),o=r.selection,s=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),a=ds(o,s);function c(t){r.selection=1===t&&null===s?null:a(t),l.call(e),i.brush()}return null!==o&&null!==s?c:c(1)})):e.each((function(){var e=this,i=arguments,o=e.__brush,s=t.input("function"==typeof n?n.apply(e,i):n,o.extent),a=d(e,i).beforestart();va(e),o.selection=null===s?null:s,l.call(e),a.start(r).brush(r).end(r)}))},c.clear=function(t,e){c.move(t,null,e)},u.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Qr(this.that).datum();s.call(e,this.that,new Sl(e,{sourceEvent:n,target:c,selection:t.output(this.state.selection),mode:r,dispatch:s}),i)}},c.extent=function(t){return arguments.length?(n="function"==typeof t?t:Tl(Fl(t)),c):n},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:Tl(!!t),c):r},c.touchable=function(t){return arguments.length?(i="function"==typeof t?t:Tl(!!t),c):i},c.handleSize=function(t){return arguments.length?(a=+t,c):a},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=s.on.apply(s,arguments);return t===s?c:t},c}var od=Math.abs,sd=Math.cos,ad=Math.sin,cd=Math.PI,ld=cd/2,dd=2*cd,ud=Math.max,hd=1e-12;function gd(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function fd(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function pd(){return kd(!1,!1)}function md(){return kd(!1,!0)}function bd(){return kd(!0,!1)}function kd(t,e){var n=0,r=null,i=null,o=null;function s(s){var a,c=s.length,l=new Array(c),d=gd(0,c),u=new Array(c*c),h=new Array(c),g=0;s=Float64Array.from({length:c*c},e?(t,e)=>s[e%c][e/c|0]:(t,e)=>s[e/c|0][e%c]);for(let e=0;e<c;++e){let n=0;for(let r=0;r<c;++r)n+=s[e*c+r]+t*s[r*c+e];g+=l[e]=n}a=(g=ud(0,dd-n*c)/g)?n:dd/c;{let e=0;r&&d.sort(((t,e)=>r(l[t],l[e])));for(const n of d){const r=e;if(t){const t=gd(1+~c,c).filter((t=>t<0?s[~t*c+n]:s[n*c+t]));i&&t.sort(((t,e)=>i(t<0?-s[~t*c+n]:s[n*c+t],e<0?-s[~e*c+n]:s[n*c+e])));for(const r of t)r<0?(u[~r*c+n]||(u[~r*c+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=s[~r*c+n]*g,value:s[~r*c+n]}:(u[n*c+r]||(u[n*c+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=s[n*c+r]*g,value:s[n*c+r]};h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}else{const t=gd(0,c).filter((t=>s[n*c+t]||s[t*c+n]));i&&t.sort(((t,e)=>i(s[n*c+t],s[n*c+e])));for(const r of t){let t;if(n<r?(t=u[n*c+r]||(u[n*c+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=s[n*c+r]*g,value:s[n*c+r]}):(t=u[r*c+n]||(u[r*c+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=s[n*c+r]*g,value:s[n*c+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}e+=a}}return(u=Object.values(u)).groups=h,o?u.sort(o):u}return s.padAngle=function(t){return arguments.length?(n=ud(0,t),s):n},s.sortGroups=function(t){return arguments.length?(r=t,s):r},s.sortSubgroups=function(t){return arguments.length?(i=t,s):i},s.sortChords=function(t){return arguments.length?(null==t?o=null:(o=fd(t))._=t,s):o&&o._},s}const wd=Math.PI,yd=2*wd,_d=1e-6,vd=yd-_d;function Ad(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Cd(){return new Ad}Ad.prototype=Cd.prototype={constructor:Ad,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,c=r-e,l=o-t,d=s-e,u=l*l+d*d;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>_d)if(Math.abs(d*a-c*l)>_d&&i){var h=n-o,g=r-s,f=a*a+c*c,p=h*h+g*g,m=Math.sqrt(f),b=Math.sqrt(u),k=i*Math.tan((wd-Math.acos((f+u-p)/(2*m*b)))/2),w=k/b,y=k/m;Math.abs(w-1)>_d&&(this._+="L"+(t+w*l)+","+(e+w*d)),this._+="A"+i+","+i+",0,0,"+ +(d*h>l*g)+","+(this._x1=t+y*a)+","+(this._y1=e+y*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),c=t+s,l=e+a,d=1^o,u=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>_d||Math.abs(this._y1-l)>_d)&&(this._+="L"+c+","+l),n&&(u<0&&(u=u%yd+yd),u>vd?this._+="A"+n+","+n+",0,1,"+d+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=l):u>_d&&(this._+="A"+n+","+n+",0,"+ +(u>=wd)+","+d+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var xd=Array.prototype.slice;function Ed(t){return function(){return t}}function Td(t){return t.source}function Sd(t){return t.target}function Dd(t){return t.radius}function Md(t){return t.startAngle}function Id(t){return t.endAngle}function Bd(){return 0}function Ld(){return 10}function Nd(t){var e=Td,n=Sd,r=Dd,i=Dd,o=Md,s=Id,a=Bd,c=null;function l(){var l,d=e.apply(this,arguments),u=n.apply(this,arguments),h=a.apply(this,arguments)/2,g=xd.call(arguments),f=+r.apply(this,(g[0]=d,g)),p=o.apply(this,g)-ld,m=s.apply(this,g)-ld,b=+i.apply(this,(g[0]=u,g)),k=o.apply(this,g)-ld,w=s.apply(this,g)-ld;if(c||(c=l=Cd()),h>hd&&(od(m-p)>2*h+hd?m>p?(p+=h,m-=h):(p-=h,m+=h):p=m=(p+m)/2,od(w-k)>2*h+hd?w>k?(k+=h,w-=h):(k-=h,w+=h):k=w=(k+w)/2),c.moveTo(f*sd(p),f*ad(p)),c.arc(0,0,f,p,m),p!==k||m!==w)if(t){var y=b-+t.apply(this,arguments),_=(k+w)/2;c.quadraticCurveTo(0,0,y*sd(k),y*ad(k)),c.lineTo(b*sd(_),b*ad(_)),c.lineTo(y*sd(w),y*ad(w))}else c.quadraticCurveTo(0,0,b*sd(k),b*ad(k)),c.arc(0,0,b,k,w);if(c.quadraticCurveTo(0,0,f*sd(p),f*ad(p)),c.closePath(),l)return c=null,l+""||null}return t&&(l.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:Ed(+e),l):t}),l.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:Ed(+t),l):r},l.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ed(+t),l):r},l.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:Ed(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ed(+t),l):o},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Ed(+t),l):s},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ed(+t),l):a},l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.context=function(t){return arguments.length?(c=null==t?null:t,l):c},l}function Od(){return Nd()}function Pd(){return Nd(Ld)}var Rd=Array.prototype.slice;function zd(t,e){return t-e}function Fd(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const jd=t=>()=>t;function Vd(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=$d(t,e[r]))return n;return 0}function $d(t,e){for(var n=e[0],r=e[1],i=-1,o=0,s=t.length,a=s-1;o<s;a=o++){var c=t[o],l=c[0],d=c[1],u=t[a],h=u[0],g=u[1];if(Hd(c,u,e))return 0;d>r!=g>r&&n<(h-l)*(r-d)/(g-d)+l&&(i=-i)}return i}function Hd(t,e,n){var r;return Ud(t,e,n)&&Wd(t[r=+(t[0]===e[0])],n[r],e[r])}function Ud(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}function Wd(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function qd(){}var Yd=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Gd(){var t=1,e=1,n=Ot,r=c;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(zd);else{const n=J(t),r=Lt(n[0],n[1],e);e=It(Math.floor(n[0]/r)*r,Math.floor(n[1]/r-1)*r,e)}return e.map((e=>o(t,e)))}function o(t,e){var n=[],i=[];return s(t,e,(function(o){r(o,t,e),Fd(o)>0?n.push([o]):i.push(o)})),i.forEach((function(t){for(var e,r=0,i=n.length;r<i;++r)if(-1!==Vd((e=n[r])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:e,coordinates:n}}function s(n,r,i){var o,s,c,l,d,u,h=new Array,g=new Array;for(o=s=-1,l=n[0]>=r,Yd[l<<1].forEach(f);++o<t-1;)c=l,l=n[o+1]>=r,Yd[c|l<<1].forEach(f);for(Yd[l<<0].forEach(f);++s<e-1;){for(o=-1,l=n[s*t+t]>=r,d=n[s*t]>=r,Yd[l<<1|d<<2].forEach(f);++o<t-1;)c=l,l=n[s*t+t+o+1]>=r,u=d,d=n[s*t+o+1]>=r,Yd[c|l<<1|d<<2|u<<3].forEach(f);Yd[l|d<<3].forEach(f)}for(o=-1,d=n[s*t]>=r,Yd[d<<2].forEach(f);++o<t-1;)u=d,d=n[s*t+o+1]>=r,Yd[d<<2|u<<3].forEach(f);function f(t){var e,n,r=[t[0][0]+o,t[0][1]+s],c=[t[1][0]+o,t[1][1]+s],l=a(r),d=a(c);(e=g[l])?(n=h[d])?(delete g[e.end],delete h[n.start],e===n?(e.ring.push(c),i(e.ring)):h[e.start]=g[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete g[e.end],e.ring.push(c),g[e.end=d]=e):(e=h[d])?(n=g[l])?(delete h[e.start],delete g[n.end],e===n?(e.ring.push(c),i(e.ring)):h[n.start]=g[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=l]=e):h[l]=g[d]={start:l,end:d,ring:[r,c]}}Yd[d<<3].forEach(f)}function a(e){return 2*e[0]+e[1]*(t+1)*4}function c(n,r,i){n.forEach((function(n){var o,s=n[0],a=n[1],c=0|s,l=0|a,d=r[l*t+c];s>0&&s<t&&c===s&&(o=r[l*t+c-1],n[0]=s+(i-o)/(d-o)-.5),a>0&&a<e&&l===a&&(o=r[(l-1)*t+c],n[1]=a+(i-o)/(d-o)-.5)}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?jd(Rd.call(t)):jd(t),i):n},i.smooth=function(t){return arguments.length?(r=t?c:qd,i):r===c},i}function Zd(t){return t[0]}function Kd(t){return t[1]}function Qd(){return 1}function Xd(){var t=Zd,e=Kd,n=Qd,r=960,i=500,o=20,s=2,a=3*o,c=r+2*a>>s,l=i+2*a>>s,d=jd(20);function u(r){var i=new Float32Array(c*l),d=Math.pow(2,-s),u=-1;for(const o of r){var h=(t(o,++u,r)+a)*d,g=(e(o,u,r)+a)*d,f=+n(o,u,r);if(h>=0&&h<c&&g>=0&&g<l){var p=Math.floor(h),m=Math.floor(g),b=h-p-.5,k=g-m-.5;i[p+m*c]+=(1-b)*(1-k)*f,i[p+1+m*c]+=b*(1-k)*f,i[p+1+(m+1)*c]+=b*k*f,i[p+(m+1)*c]+=(1-b)*k*f}}return P({data:i,width:c,height:l},o*d),i}function h(t){var e=u(t),n=d(e),r=Math.pow(2,2*s);return Array.isArray(n)||(n=It(Number.MIN_VALUE,Rt(e)/r,n)),Gd().size([c,l]).thresholds(n.map((t=>t*r)))(e).map(((t,e)=>(t.value=+n[e],g(t))))}function g(t){return t.coordinates.forEach(f),t}function f(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,s)-a,t[1]=t[1]*Math.pow(2,s)-a}function b(){return c=r+2*(a=3*o)>>s,l=i+2*a>>s,h}return h.contours=function(t){var e=u(t),n=Gd().size([c,l]),r=Math.pow(2,2*s),i=t=>{t=+t;var i=g(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>Rt(e)/r}),i},h.x=function(e){return arguments.length?(t="function"==typeof e?e:jd(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:jd(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:jd(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,b()},h.cellSize=function(t){if(!arguments.length)return 1<<s;if(!((t=+t)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(t)/Math.LN2),b()},h.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?jd(Rd.call(t)):jd(t),h):d},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,b()},h}const Jd=11102230246251565e-32,tu=134217729,eu=(3+8*Jd)*Jd;function nu(t,e,n,r,i){let o,s,a,c,l=e[0],d=r[0],u=0,h=0;d>l==d>-l?(o=l,l=e[++u]):(o=d,d=r[++h]);let g=0;if(u<t&&h<n)for(d>l==d>-l?(s=l+o,a=o-(s-l),l=e[++u]):(s=d+o,a=o-(s-d),d=r[++h]),o=s,0!==a&&(i[g++]=a);u<t&&h<n;)d>l==d>-l?(s=o+l,c=s-o,a=o-(s-c)+(l-c),l=e[++u]):(s=o+d,c=s-o,a=o-(s-c)+(d-c),d=r[++h]),o=s,0!==a&&(i[g++]=a);for(;u<t;)s=o+l,c=s-o,a=o-(s-c)+(l-c),l=e[++u],o=s,0!==a&&(i[g++]=a);for(;h<n;)s=o+d,c=s-o,a=o-(s-c)+(d-c),d=r[++h],o=s,0!==a&&(i[g++]=a);return 0===o&&0!==g||(i[g++]=o),g}function ru(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function iu(t){return new Float64Array(t)}const ou=(3+16*Jd)*Jd,su=(2+12*Jd)*Jd,au=(9+64*Jd)*Jd*Jd,cu=iu(4),lu=iu(8),du=iu(12),uu=iu(16),hu=iu(4);function gu(t,e,n,r,i,o,s){let a,c,l,d,u,h,g,f,p,m,b,k,w,y,_,v,A,C;const x=t-i,E=n-i,T=e-o,S=r-o;y=x*S,h=tu*x,g=h-(h-x),f=x-g,h=tu*S,p=h-(h-S),m=S-p,_=f*m-(y-g*p-f*p-g*m),v=T*E,h=tu*T,g=h-(h-T),f=T-g,h=tu*E,p=h-(h-E),m=E-p,A=f*m-(v-g*p-f*p-g*m),b=_-A,u=_-b,cu[0]=_-(b+u)+(u-A),k=y+b,u=k-y,w=y-(k-u)+(b-u),b=w-v,u=w-b,cu[1]=w-(b+u)+(u-v),C=k+b,u=C-k,cu[2]=k-(C-u)+(b-u),cu[3]=C;let D=ru(4,cu),M=su*s;if(D>=M||-D>=M)return D;if(u=t-x,a=t-(x+u)+(u-i),u=n-E,l=n-(E+u)+(u-i),u=e-T,c=e-(T+u)+(u-o),u=r-S,d=r-(S+u)+(u-o),0===a&&0===c&&0===l&&0===d)return D;if(M=au*s+eu*Math.abs(D),D+=x*d+S*a-(T*l+E*c),D>=M||-D>=M)return D;y=a*S,h=tu*a,g=h-(h-a),f=a-g,h=tu*S,p=h-(h-S),m=S-p,_=f*m-(y-g*p-f*p-g*m),v=c*E,h=tu*c,g=h-(h-c),f=c-g,h=tu*E,p=h-(h-E),m=E-p,A=f*m-(v-g*p-f*p-g*m),b=_-A,u=_-b,hu[0]=_-(b+u)+(u-A),k=y+b,u=k-y,w=y-(k-u)+(b-u),b=w-v,u=w-b,hu[1]=w-(b+u)+(u-v),C=k+b,u=C-k,hu[2]=k-(C-u)+(b-u),hu[3]=C;const I=nu(4,cu,4,hu,lu);y=x*d,h=tu*x,g=h-(h-x),f=x-g,h=tu*d,p=h-(h-d),m=d-p,_=f*m-(y-g*p-f*p-g*m),v=T*l,h=tu*T,g=h-(h-T),f=T-g,h=tu*l,p=h-(h-l),m=l-p,A=f*m-(v-g*p-f*p-g*m),b=_-A,u=_-b,hu[0]=_-(b+u)+(u-A),k=y+b,u=k-y,w=y-(k-u)+(b-u),b=w-v,u=w-b,hu[1]=w-(b+u)+(u-v),C=k+b,u=C-k,hu[2]=k-(C-u)+(b-u),hu[3]=C;const B=nu(I,lu,4,hu,du);y=a*d,h=tu*a,g=h-(h-a),f=a-g,h=tu*d,p=h-(h-d),m=d-p,_=f*m-(y-g*p-f*p-g*m),v=c*l,h=tu*c,g=h-(h-c),f=c-g,h=tu*l,p=h-(h-l),m=l-p,A=f*m-(v-g*p-f*p-g*m),b=_-A,u=_-b,hu[0]=_-(b+u)+(u-A),k=y+b,u=k-y,w=y-(k-u)+(b-u),b=w-v,u=w-b,hu[1]=w-(b+u)+(u-v),C=k+b,u=C-k,hu[2]=k-(C-u)+(b-u),hu[3]=C;const L=nu(B,du,4,hu,uu);return uu[L-1]}function fu(t,e,n,r,i,o){const s=(e-o)*(n-i),a=(t-i)*(r-o),c=s-a;if(0===s||0===a||s>0!=a>0)return c;const l=Math.abs(s+a);return Math.abs(c)>=ou*l?c:-gu(t,e,n,r,i,o,l)}const pu=Math.pow(2,-52),mu=new Uint32Array(512);class bu{static from(t,e=xu,n=Eu){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new bu(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let s=1/0,a=1/0,c=-1/0,l=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<s&&(s=n),r<a&&(a=r),n>c&&(c=n),r>l&&(l=r),this._ids[e]=e}const d=(s+c)/2,u=(a+l)/2;let h,g,f,p=1/0;for(let e=0;e<o;e++){const n=wu(d,u,t[2*e],t[2*e+1]);n<p&&(h=e,p=n)}const m=t[2*h],b=t[2*h+1];p=1/0;for(let e=0;e<o;e++){if(e===h)continue;const n=wu(m,b,t[2*e],t[2*e+1]);n<p&&n>0&&(g=e,p=n)}let k=t[2*g],w=t[2*g+1],y=1/0;for(let e=0;e<o;e++){if(e===h||e===g)continue;const n=_u(m,b,k,w,t[2*e],t[2*e+1]);n<y&&(f=e,y=n)}let _=t[2*f],v=t[2*f+1];if(y===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Au(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(fu(m,b,k,w,_,v)<0){const t=g,e=k,n=w;g=f,k=_,w=v,f=t,_=e,v=n}const A=vu(m,b,k,w,_,v);this._cx=A.x,this._cy=A.y;for(let e=0;e<o;e++)this._dists[e]=wu(t[2*e],t[2*e+1],A.x,A.y);Au(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;n[h]=e[f]=g,n[g]=e[h]=f,n[f]=e[g]=h,r[h]=0,r[g]=1,r[f]=2,i.fill(-1),i[this._hashKey(m,b)]=h,i[this._hashKey(k,w)]=g,i[this._hashKey(_,v)]=f,this.trianglesLen=0,this._addTriangle(h,g,f,-1,-1,-1);for(let o,s,a=0;a<this._ids.length;a++){const c=this._ids[a],l=t[2*c],d=t[2*c+1];if(a>0&&Math.abs(l-o)<=pu&&Math.abs(d-s)<=pu)continue;if(o=l,s=d,c===h||c===g||c===f)continue;let u=0;for(let t=0,e=this._hashKey(l,d);t<this._hashSize&&(u=i[(e+t)%this._hashSize],-1===u||u===n[u]);t++);u=e[u];let p,m=u;for(;p=n[m],fu(l,d,t[2*m],t[2*m+1],t[2*p],t[2*p+1])>=0;)if(m=p,m===u){m=-1;break}if(-1===m)continue;let b=this._addTriangle(m,c,n[m],-1,-1,r[m]);r[c]=this._legalize(b+2),r[m]=b,C++;let k=n[m];for(;p=n[k],fu(l,d,t[2*k],t[2*k+1],t[2*p],t[2*p+1])<0;)b=this._addTriangle(k,c,p,r[c],-1,r[k]),r[c]=this._legalize(b+2),n[k]=k,C--,k=p;if(m===u)for(;p=e[m],fu(l,d,t[2*p],t[2*p+1],t[2*m],t[2*m+1])<0;)b=this._addTriangle(p,c,m,-1,r[m],r[p]),this._legalize(b+2),r[p]=b,n[m]=m,C--,m=p;this._hullStart=e[c]=m,n[m]=e[k]=c,n[c]=k,i[this._hashKey(l,d)]=c,i[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(C);for(let t=0,e=this._hullStart;t<C;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(ku(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const s=n[t],a=t-t%3;if(o=a+(t+2)%3,-1===s){if(0===i)break;t=mu[--i];continue}const c=s-s%3,l=a+(t+1)%3,d=c+(s+2)%3,u=e[o],h=e[t],g=e[l],f=e[d];if(yu(r[2*u],r[2*u+1],r[2*h],r[2*h+1],r[2*g],r[2*g+1],r[2*f],r[2*f+1])){e[t]=f,e[s]=u;const r=n[d];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===d){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(s,n[o]),this._link(o,d);const a=c+(s+1)%3;i<mu.length&&(mu[i++]=a)}else{if(0===i)break;t=mu[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=e,this._triangles[s+2]=n,this._link(s,r),this._link(s+1,i),this._link(s+2,o),this.trianglesLen+=3,s}}function ku(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function wu(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function yu(t,e,n,r,i,o,s,a){const c=t-s,l=e-a,d=n-s,u=r-a,h=i-s,g=o-a,f=d*d+u*u,p=h*h+g*g;return c*(u*p-f*g)-l*(d*p-f*h)+(c*c+l*l)*(d*g-u*h)<0}function _u(t,e,n,r,i,o){const s=n-t,a=r-e,c=i-t,l=o-e,d=s*s+a*a,u=c*c+l*l,h=.5/(s*l-a*c),g=(l*d-a*u)*h,f=(s*u-c*d)*h;return g*g+f*f}function vu(t,e,n,r,i,o){const s=n-t,a=r-e,c=i-t,l=o-e,d=s*s+a*a,u=c*c+l*l,h=.5/(s*l-a*c);return{x:t+(l*d-a*u)*h,y:e+(s*u-c*d)*h}}function Au(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let s=i-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=r}else{let i=n+1,o=r;Cu(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Cu(t,n,r),e[t[i]]>e[t[r]]&&Cu(t,i,r),e[t[n]]>e[t[i]]&&Cu(t,n,i);const s=t[i],a=e[s];for(;;){do{i++}while(e[t[i]]<a);do{o--}while(e[t[o]]>a);if(o<i)break;Cu(t,i,o)}t[n+1]=t[o],t[o]=s,r-i+1>=o-n?(Au(t,e,i,r),Au(t,e,n,o-1)):(Au(t,e,n,o-1),Au(t,e,i,r))}}function Cu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function xu(t){return t[0]}function Eu(t){return t[1]}const Tu=1e-6;class Su{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Tu||Math.abs(this._y1-i)>Tu)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Du{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Mu{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,r,o=0,s=0,a=n.length;o<a;o+=3,s+=2){const a=2*n[o],c=2*n[o+1],l=2*n[o+2],d=t[a],u=t[a+1],h=t[c],g=t[c+1],f=t[l],p=t[l+1],m=h-d,b=g-u,k=f-d,w=p-u,y=2*(m*w-b*k);if(Math.abs(y)<1e-9){let i=1e9;const o=2*n[0];i*=Math.sign((t[o]-d)*w-(t[o+1]-u)*k),e=(d+f)/2-i*w,r=(u+p)/2+i*k}else{const t=1/y,n=m*m+b*b,i=k*k+w*w;e=d+(w*n-b*i)*t,r=u+(m*i-k*n)*t}i[s]=e,i[s+1]=r}let o,s,a,c=e[e.length-1],l=4*c,d=t[2*c],u=t[2*c+1];r.fill(0);for(let n=0;n<e.length;++n)c=e[n],o=l,s=d,a=u,l=4*c,d=t[2*c],u=t[2*c+1],r[o+2]=r[l]=a-u,r[o+3]=r[l+1]=d-s}render(t){const e=null==t?t=new Su:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:s}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),s=2*Math.floor(r/3),a=o[i],c=o[i+1],l=o[s],d=o[s+1];this._renderSegment(a,c,l,d,t)}let a,c=i[i.length-1];for(let e=0;e<i.length;++e){a=c,c=i[e];const n=2*Math.floor(r[c]/3),l=o[n],d=o[n+1],u=4*a,h=this._project(l,d,s[u+2],s[u+3]);h&&this._renderSegment(l,d,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Su:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Su:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Du;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const s=this._regioncode(t,e),a=this._regioncode(n,r);0===s&&0===a?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,s,a))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,s=t.length;o<s;o+=2)if(e[r]==t[o]&&e[r+1]==t[o+1]&&e[(r+2)%i]==t[(o+s-2)%s]&&e[(r+3)%i]==t[(o+s-1)%s]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const s=[];let a=o;do{const n=Math.floor(a/3);if(s.push(e[2*n],e[2*n+1]),a=a%3==2?a-2:a+1,i[a]!==t)break;a=r[a]}while(a!==o&&-1!==a);return s}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,o,s,a=null,c=e[n-2],l=e[n-1],d=this._regioncode(c,l),u=0;for(let h=0;h<n;h+=2)if(r=c,i=l,c=e[h],l=e[h+1],o=d,d=this._regioncode(c,l),0===o&&0===d)s=u,u=0,a?a.push(c,l):a=[c,l];else{let e,n,h,g,f;if(0===o){if(null===(e=this._clipSegment(r,i,c,l,o,d)))continue;[n,h,g,f]=e}else{if(null===(e=this._clipSegment(c,l,r,i,d,o)))continue;[g,f,n,h]=e,s=u,u=this._edgecode(n,h),s&&u&&this._edge(t,s,u,a,a.length),a?a.push(n,h):a=[n,h]}s=u,u=this._edgecode(g,f),s&&u&&this._edge(t,s,u,a,a.length),a?a.push(g,f):a=[g,f]}if(a)s=u,u=this._edgecode(a[0],a[1]),s&&u&&this._edge(t,s,u,a,a.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return a}_clipSegment(t,e,n,r,i,o){for(;;){if(0===i&&0===o)return[t,e,n,r];if(i&o)return null;let s,a,c=i||o;8&c?(s=t+(n-t)*(this.ymax-e)/(r-e),a=this.ymax):4&c?(s=t+(n-t)*(this.ymin-e)/(r-e),a=this.ymin):2&c?(a=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(a=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=a,i=this._regioncode(t,e)):(n=s,r=a,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let s,a=Array.from(e);if((s=this._project(a[0],a[1],n,r))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(s[0],s[1]),a=this._clipFinite(t,a))for(let e,n=0,r=a.length,i=this._edgecode(a[r-2],a[r-1]);n<r;n+=2)e=i,i=this._edgecode(a[n],a[n+1]),e&&i&&(n=this._edge(t,e,i,a,n),r=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const e=(t+2)%r.length,n=(t+4)%r.length;(r[t]===r[e]&&r[e]===r[n]||r[t+1]===r[e+1]&&r[e+1]===r[n+1])&&(r.splice(e,2),t-=2)}return i}_project(t,e,n,r){let i,o,s,a=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<a&&(s=this.ymin,o=t+(a=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<a&&(s=this.ymax,o=t+(a=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<a&&(o=this.xmax,s=e+(a=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<a&&(o=this.xmin,s=e+(a=i)*r)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const Iu=2*Math.PI,Bu=Math.pow;function Lu(t){return t[0]}function Nu(t){return t[1]}function Ou(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Pu(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Ru{static from(t,e=Lu,n=Nu,r){return new Ru("length"in t?zu(t,e,n,r):Float64Array.from(Fu(t,e,n,r)))}constructor(t){this._delaunator=new bu(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&Ou(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Pu(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new bu(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)s[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Mu(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:s}=this;if(s){const e=s.indexOf(t);return e>0&&(yield s[e-1]),void(e<s.length-1&&(yield s[e+1]))}const a=e[t];if(-1===a)return;let c=a,l=-1;do{if(yield l=o[c],c=c%3==2?c-2:c+1,o[c]!==t)return;if(c=i[c],-1===c){const e=n[(r[t]+1)%n.length];return void(e!==l&&(yield e))}}while(c!==a)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:s,triangles:a,points:c}=this;if(-1===r[t]||!c.length)return(t+1)%(c.length>>1);let l=t,d=Bu(e-c[2*t],2)+Bu(n-c[2*t+1],2);const u=r[t];let h=u;do{let r=a[h];const u=Bu(e-c[2*r],2)+Bu(n-c[2*r+1],2);if(u<d&&(d=u,l=r),h=h%3==2?h-2:h+1,a[h]!==t)break;if(h=s[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Bu(e-c[2*h],2)+Bu(n-c[2*h+1],2)<d)return h;break}}while(h!==u);return l}render(t){const e=null==t?t=new Su:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const s=2*i[e],a=2*i[o];t.moveTo(n[s],n[s+1]),t.lineTo(n[a],n[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Su:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,Iu)}return n&&n.value()}renderHull(t){const e=null==t?t=new Su:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Du;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Su:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],s=2*i[t+1],a=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.lineTo(r[a],r[a+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Du;return this.renderTriangle(t,e),e.value()}}function zu(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let s=0;s<i;++s){const i=t[s];o[2*s]=e.call(r,i,s,t),o[2*s+1]=n.call(r,i,s,t)}return o}function*Fu(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}var ju={},Vu={},$u=34,Hu=10,Uu=13;function Wu(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function qu(t,e){var n=Wu(t);return function(r,i){return e(n(r),i,t)}}function Yu(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Gu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Zu(t){return t<0?"-"+Gu(-t,6):t>9999?"+"+Gu(t,6):Gu(t,4)}function Ku(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Zu(t.getUTCFullYear())+"-"+Gu(t.getUTCMonth()+1,2)+"-"+Gu(t.getUTCDate(),2)+(i?"T"+Gu(e,2)+":"+Gu(n,2)+":"+Gu(r,2)+"."+Gu(i,3)+"Z":r?"T"+Gu(e,2)+":"+Gu(n,2)+":"+Gu(r,2)+"Z":n||e?"T"+Gu(e,2)+":"+Gu(n,2)+"Z":"")}function Qu(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?qu(t,e):Wu(t)}));return o.columns=r||[],o}function i(t,e){var r,i=[],o=t.length,s=0,a=0,c=o<=0,l=!1;function d(){if(c)return Vu;if(l)return l=!1,ju;var e,r,i=s;if(t.charCodeAt(i)===$u){for(;s++<o&&t.charCodeAt(s)!==$u||t.charCodeAt(++s)===$u;);return(e=s)>=o?c=!0:(r=t.charCodeAt(s++))===Hu?l=!0:r===Uu&&(l=!0,t.charCodeAt(s)===Hu&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<o;){if((r=t.charCodeAt(e=s++))===Hu)l=!0;else if(r===Uu)l=!0,t.charCodeAt(s)===Hu&&++s;else if(r!==n)continue;return t.slice(i,e)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Hu&&--o,t.charCodeAt(o-1)===Uu&&--o;(r=d())!==Vu;){for(var u=[];r!==ju&&r!==Vu;)u.push(r),r=d();e&&null==(u=e(u,a++))||i.push(u)}return i}function o(e,n){return e.map((function(e){return n.map((function(t){return d(e[t])})).join(t)}))}function s(e,n){return null==n&&(n=Yu(e)),[n.map(d).join(t)].concat(o(e,n)).join("\n")}function a(t,e){return null==e&&(e=Yu(t)),o(t,e).join("\n")}function c(t){return t.map(l).join("\n")}function l(e){return e.map(d).join(t)}function d(t){return null==t?"":t instanceof Date?Ku(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:c,formatRow:l,formatValue:d}}var Xu=Qu(","),Ju=Xu.parse,th=Xu.parseRows,eh=Xu.format,nh=Xu.formatBody,rh=Xu.formatRows,ih=Xu.formatRow,oh=Xu.formatValue,sh=Qu("\t"),ah=sh.parse,ch=sh.parseRows,lh=sh.format,dh=sh.formatBody,uh=sh.formatRows,hh=sh.formatRow,gh=sh.formatValue;function fh(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ph&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const ph=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function mh(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function bh(t,e){return fetch(t,e).then(mh)}function kh(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function wh(t,e){return fetch(t,e).then(kh)}function yh(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function _h(t,e){return fetch(t,e).then(yh)}function vh(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),_h(e,n).then((function(e){return t(e,r)}))}}function Ah(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=Qu(t);return _h(e,n).then((function(t){return i.parse(t,r)}))}var Ch=vh(Ju),xh=vh(ah);function Eh(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function Th(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Sh(t,e){return fetch(t,e).then(Th)}function Dh(t){return(e,n)=>_h(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const Mh=Dh("application/xml");var Ih=Dh("text/html"),Bh=Dh("image/svg+xml");function Lh(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,c=0;for(i=0;i<s;++i)a+=(o=n[i]).x,c+=o.y;for(a=(a/s-t)*r,c=(c/s-e)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=c}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Nh(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Oh(this.cover(e,n),e,n,t)}function Oh(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,c,l,d,u,h,g=t._root,f={data:r},p=t._x0,m=t._y0,b=t._x1,k=t._y1;if(!g)return t._root=f,t;for(;g.length;)if((l=e>=(o=(p+b)/2))?p=o:b=o,(d=n>=(s=(m+k)/2))?m=s:k=s,i=g,!(g=g[u=d<<1|l]))return i[u]=f,t;if(a=+t._x.call(null,g.data),c=+t._y.call(null,g.data),e===a&&n===c)return f.next=g,i?i[u]=f:t._root=f,t;do{i=i?i[u]=new Array(4):t._root=new Array(4),(l=e>=(o=(p+b)/2))?p=o:b=o,(d=n>=(s=(m+k)/2))?m=s:k=s}while((u=d<<1|l)==(h=(c>=s)<<1|a>=o));return i[h]=g,i[u]=f,t}function Ph(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),c=1/0,l=1/0,d=-1/0,u=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<c&&(c=r),r>d&&(d=r),i<l&&(l=i),i>u&&(u=i));if(c>d||l>u)return this;for(this.cover(c,l).cover(d,u),n=0;n<o;++n)Oh(this,s[n],a[n],t[n]);return this}function Rh(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,c=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=l,l=s,c*=2,a){case 0:i=n+c,o=r+c;break;case 1:n=i-c,o=r+c;break;case 2:i=n+c,r=o-c;break;case 3:n=i-c,r=o-c}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function zh(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Fh(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function jh(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Vh(t,e,n){var r,i,o,s,a,c,l,d=this._x0,u=this._y0,h=this._x1,g=this._y1,f=[],p=this._root;for(p&&f.push(new jh(p,d,u,h,g)),null==n?n=1/0:(d=t-n,u=e-n,h=t+n,g=e+n,n*=n);c=f.pop();)if(!(!(p=c.node)||(i=c.x0)>h||(o=c.y0)>g||(s=c.x1)<d||(a=c.y1)<u))if(p.length){var m=(i+s)/2,b=(o+a)/2;f.push(new jh(p[3],m,b,s,a),new jh(p[2],i,b,m,a),new jh(p[1],m,o,s,b),new jh(p[0],i,o,m,b)),(l=(e>=b)<<1|t>=m)&&(c=f[f.length-1],f[f.length-1]=f[f.length-1-l],f[f.length-1-l]=c)}else{var k=t-+this._x.call(null,p.data),w=e-+this._y.call(null,p.data),y=k*k+w*w;if(y<n){var _=Math.sqrt(n=y);d=t-_,u=e-_,h=t+_,g=e+_,r=p.data}}return r}function $h(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,c,l,d,u,h,g=this._root,f=this._x0,p=this._y0,m=this._x1,b=this._y1;if(!g)return this;if(g.length)for(;;){if((l=o>=(a=(f+m)/2))?f=a:m=a,(d=s>=(c=(p+b)/2))?p=c:b=c,e=g,!(g=g[u=d<<1|l]))return this;if(!g.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,h=u)}for(;g.data!==t;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[u]=i:delete e[u],(g=e[0]||e[1]||e[2]||e[3])&&g===(e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[h]=g:this._root=g),this):(this._root=i,this)}function Hh(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Uh(){return this._root}function Wh(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function qh(t){var e,n,r,i,o,s,a=[],c=this._root;for(c&&a.push(new jh(c,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(c=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&c.length){var l=(r+o)/2,d=(i+s)/2;(n=c[3])&&a.push(new jh(n,l,d,o,s)),(n=c[2])&&a.push(new jh(n,r,d,l,s)),(n=c[1])&&a.push(new jh(n,l,i,o,d)),(n=c[0])&&a.push(new jh(n,r,i,l,d))}return this}function Yh(t){var e,n=[],r=[];for(this._root&&n.push(new jh(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,c=e.x1,l=e.y1,d=(s+c)/2,u=(a+l)/2;(o=i[0])&&n.push(new jh(o,s,a,d,u)),(o=i[1])&&n.push(new jh(o,d,a,c,u)),(o=i[2])&&n.push(new jh(o,s,u,d,l)),(o=i[3])&&n.push(new jh(o,d,u,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function Gh(t){return t[0]}function Zh(t){return arguments.length?(this._x=t,this):this._x}function Kh(t){return t[1]}function Qh(t){return arguments.length?(this._y=t,this):this._y}function Xh(t,e,n){var r=new Jh(null==e?Gh:e,null==n?Kh:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Jh(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function tg(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var eg=Xh.prototype=Jh.prototype;function ng(t){return function(){return t}}function rg(t){return 1e-6*(t()-.5)}function ig(t){return t.x+t.vx}function og(t){return t.y+t.vy}function sg(t){var e,n,r,i=1,o=1;function s(){for(var t,s,c,l,d,u,h,g=e.length,f=0;f<o;++f)for(s=Xh(e,ig,og).visitAfter(a),t=0;t<g;++t)c=e[t],u=n[c.index],h=u*u,l=c.x+c.vx,d=c.y+c.vy,s.visit(p);function p(t,e,n,o,s){var a=t.data,g=t.r,f=u+g;if(!a)return e>l+f||o<l-f||n>d+f||s<d-f;if(a.index>c.index){var p=l-a.x-a.vx,m=d-a.y-a.vy,b=p*p+m*m;b<f*f&&(0===p&&(b+=(p=rg(r))*p),0===m&&(b+=(m=rg(r))*m),b=(f-(b=Math.sqrt(b)))/b*i,c.vx+=(p*=b)*(f=(g*=g)/(h+g)),c.vy+=(m*=b)*f,a.vx-=p*(f=1-f),a.vy-=m*f)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=ng(null==t?1:+t)),s.initialize=function(t,n){e=t,r=n,c()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:ng(+e),c(),s):t},s}function ag(t){return t.index}function cg(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function lg(t){var e,n,r,i,o,s,a=ag,c=u,l=ng(30),d=1;function u(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function h(r){for(var i=0,a=t.length;i<d;++i)for(var c,l,u,h,g,f,p,m=0;m<a;++m)l=(c=t[m]).source,h=(u=c.target).x+u.vx-l.x-l.vx||rg(s),g=u.y+u.vy-l.y-l.vy||rg(s),h*=f=((f=Math.sqrt(h*h+g*g))-n[m])/f*r*e[m],g*=f,u.vx-=h*(p=o[m]),u.vy-=g*p,l.vx+=h*(p=1-p),l.vy+=g*p}function g(){if(r){var s,c,l=r.length,d=t.length,u=new Map(r.map(((t,e)=>[a(t,e,r),t])));for(s=0,i=new Array(l);s<d;++s)(c=t[s]).index=s,"object"!=typeof c.source&&(c.source=cg(u,c.source)),"object"!=typeof c.target&&(c.target=cg(u,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(s=0,o=new Array(d);s<d;++s)c=t[s],o[s]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);e=new Array(d),f(),n=new Array(d),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,s=e,g()},h.links=function(e){return arguments.length?(t=e,g(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(d=+t,h):d},h.strength=function(t){return arguments.length?(c="function"==typeof t?t:ng(+t),f(),h):c},h.distance=function(t){return arguments.length?(l="function"==typeof t?t:ng(+t),p(),h):l},h}eg.copy=function(){var t,e,n=new Jh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=tg(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=tg(e));return n},eg.add=Nh,eg.addAll=Ph,eg.cover=Rh,eg.data=zh,eg.extent=Fh,eg.find=Vh,eg.remove=$h,eg.removeAll=Hh,eg.root=Uh,eg.size=Wh,eg.visit=qh,eg.visitAfter=Yh,eg.x=Zh,eg.y=Qh;const dg=1664525,ug=1013904223,hg=4294967296;function gg(){let t=1;return()=>(t=(dg*t+ug)%hg)/hg}function fg(t){return t.x}function pg(t){return t.y}var mg=10,bg=Math.PI*(3-Math.sqrt(5));function kg(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,c=ta(u),l=qe("tick","end"),d=gg();function u(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(r){var c,l,d=t.length;void 0===r&&(r=1);for(var u=0;u<r;++u)for(n+=(o-n)*i,a.forEach((function(t){t(n)})),c=0;c<d;++c)null==(l=t[c]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return e}function g(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=mg*Math.sqrt(.5+n),o=n*bg;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t,d),e}return null==t&&(t=[]),g(),e={tick:h,restart:function(){return c.restart(u),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,g(),a.forEach(f),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(d=t,a.forEach(f),e):d},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,f(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,c,l=0,d=t.length;for(null==r?r=1/0:r*=r,l=0;l<d;++l)(s=(i=e-(a=t[l]).x)*i+(o=n-a.y)*o)<r&&(c=a,r=s);return c},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function wg(){var t,e,n,r,i,o=ng(-30),s=1,a=1/0,c=.81;function l(n){var i,o=t.length,s=Xh(t,fg,pg).visitAfter(u);for(r=n,i=0;i<o;++i)e=t[i],s.visit(h)}function d(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function u(t){var e,n,r,o,s,a=0,c=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,c+=n,r+=n*e.x,o+=n*e.y);t.x=r/c,t.y=o/c}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function h(t,o,l,d){if(!t.value)return!0;var u=t.x-e.x,h=t.y-e.y,g=d-o,f=u*u+h*h;if(g*g/c<f)return f<a&&(0===u&&(f+=(u=rg(n))*u),0===h&&(f+=(h=rg(n))*h),f<s&&(f=Math.sqrt(s*f)),e.vx+=u*t.value*r/f,e.vy+=h*t.value*r/f),!0;if(!(t.length||f>=a)){(t.data!==e||t.next)&&(0===u&&(f+=(u=rg(n))*u),0===h&&(f+=(h=rg(n))*h),f<s&&(f=Math.sqrt(s*f)));do{t.data!==e&&(g=i[t.data.index]*r/f,e.vx+=u*g,e.vy+=h*g)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,d()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:ng(+t),d(),l):o},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(c=t*t,l):Math.sqrt(c)},l}function yg(t,e,n){var r,i,o,s=ng(.1);function a(t){for(var s=0,a=r.length;s<a;++s){var c=r[s],l=c.x-e||1e-6,d=c.y-n||1e-6,u=Math.sqrt(l*l+d*d),h=(o[s]-u)*i[s]*t/u;c.vx+=l*h,c.vy+=d*h}}function c(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+s(r[e],e,r)}}return"function"!=typeof t&&(t=ng(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){r=t,c()},a.strength=function(t){return arguments.length?(s="function"==typeof t?t:ng(+t),c(),a):s},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ng(+e),c(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a}function _g(t){var e,n,r,i=ng(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ng(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ng(+t),s(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:ng(+e),s(),o):t},o}function vg(t){var e,n,r,i=ng(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=ng(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:ng(+t),s(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:ng(+e),s(),o):t},o}function Ag(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Cg(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xg(t){return(t=Cg(Math.abs(t)))?t[1]:NaN}function Eg(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Tg(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Sg,Dg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mg(t){if(!(e=Dg.exec(t)))throw new Error("invalid format: "+t);var e;return new Ig({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ig(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Bg(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}function Lg(t,e){var n=Cg(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Sg=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cg(t,Math.max(0,e+o-1))[0]}function Ng(t,e){var n=Cg(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Mg.prototype=Ig.prototype,Ig.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Og={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ag,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ng(100*t,e),r:Ng,s:Lg,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Pg(t){return t}var Rg,zg,Fg,jg=Array.prototype.map,Vg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $g(t){var e=void 0===t.grouping||void 0===t.thousands?Pg:Eg(jg.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Pg:Tg(jg.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var l=(t=Mg(t)).fill,d=t.align,u=t.sign,h=t.symbol,g=t.zero,f=t.width,p=t.comma,m=t.precision,b=t.trim,k=t.type;"n"===k?(p=!0,k="g"):Og[k]||(void 0===m&&(m=12),b=!0,k="g"),(g||"0"===l&&"="===d)&&(g=!0,l="0",d="=");var w="$"===h?n:"#"===h&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",y="$"===h?r:/[%p]/.test(k)?s:"",_=Og[k],v=/[defgprs%]/.test(k);function A(t){var n,r,s,h=w,A=y;if("c"===k)A=_(t)+A,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:_(Math.abs(t),m),b&&(t=Bg(t)),C&&0==+t&&"+"!==u&&(C=!1),h=(C?"("===u?u:a:"-"===u||"("===u?"":u)+h,A=("s"===k?Vg[8+Sg/3]:"")+A+(C&&"("===u?")":""),v)for(n=-1,r=t.length;++n<r;)if(48>(s=t.charCodeAt(n))||s>57){A=(46===s?i+t.slice(n+1):t.slice(n))+A,t=t.slice(0,n);break}}p&&!g&&(t=e(t,1/0));var x=h.length+t.length+A.length,E=x<f?new Array(f-x+1).join(l):"";switch(p&&g&&(t=e(E+t,E.length?f-A.length:1/0),E=""),d){case"<":t=h+t+A+E;break;case"=":t=h+E+t+A;break;case"^":t=E.slice(0,x=E.length>>1)+h+t+A+E.slice(x);break;default:t=E+h+t+A}return o(t)}return m=void 0===m?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),A.toString=function(){return t+""},A}function d(t,e){var n=l(((t=Mg(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(xg(e)/3))),i=Math.pow(10,-r),o=Vg[8+r/3];return function(t){return n(i*t)+o}}return{format:l,formatPrefix:d}}function Hg(t){return Rg=$g(t),zg=Rg.format,Fg=Rg.formatPrefix,Rg}function Ug(t){return Math.max(0,-xg(Math.abs(t)))}function Wg(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xg(e)/3)))-xg(Math.abs(t)))}function qg(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xg(e)-xg(t))+1}Hg({thousands:",",grouping:[3],currency:["$",""]});var Yg=1e-6,Gg=1e-12,Zg=Math.PI,Kg=Zg/2,Qg=Zg/4,Xg=2*Zg,Jg=180/Zg,tf=Zg/180,ef=Math.abs,nf=Math.atan,rf=Math.atan2,of=Math.cos,sf=Math.ceil,af=Math.exp,cf=Math.hypot,lf=Math.log,df=Math.pow,uf=Math.sin,hf=Math.sign||function(t){return t>0?1:t<0?-1:0},gf=Math.sqrt,ff=Math.tan;function pf(t){return t>1?0:t<-1?Zg:Math.acos(t)}function mf(t){return t>1?Kg:t<-1?-Kg:Math.asin(t)}function bf(t){return(t=uf(t/2))*t}function kf(){}function wf(t,e){t&&_f.hasOwnProperty(t.type)&&_f[t.type](t,e)}var yf={Feature:function(t,e){wf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)wf(n[r].geometry,e)}},_f={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){vf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)vf(n[r],e,0)},Polygon:function(t,e){Af(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Af(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)wf(n[r],e)}};function vf(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Af(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)vf(t[n],e,1);e.polygonEnd()}function Cf(t,e){t&&yf.hasOwnProperty(t.type)?yf[t.type](t,e):wf(t,e)}var xf,Ef,Tf,Sf,Df,Mf,If,Bf,Lf,Nf,Of,Pf,Rf,zf,Ff,jf,Vf=new tt,$f=new tt,Hf={point:kf,lineStart:kf,lineEnd:kf,polygonStart:function(){Vf=new tt,Hf.lineStart=Uf,Hf.lineEnd=Wf},polygonEnd:function(){var t=+Vf;$f.add(t<0?Xg+t:t),this.lineStart=this.lineEnd=this.point=kf},sphere:function(){$f.add(Xg)}};function Uf(){Hf.point=qf}function Wf(){Yf(xf,Ef)}function qf(t,e){Hf.point=Yf,xf=t,Ef=e,Tf=t*=tf,Sf=of(e=(e*=tf)/2+Qg),Df=uf(e)}function Yf(t,e){var n=(t*=tf)-Tf,r=n>=0?1:-1,i=r*n,o=of(e=(e*=tf)/2+Qg),s=uf(e),a=Df*s,c=Sf*o+a*of(i),l=a*r*uf(i);Vf.add(rf(l,c)),Tf=t,Sf=o,Df=s}function Gf(t){return $f=new tt,Cf(t,Hf),2*$f}function Zf(t){return[rf(t[1],t[0]),mf(t[2])]}function Kf(t){var e=t[0],n=t[1],r=of(n);return[r*of(e),r*uf(e),uf(n)]}function Qf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xf(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Jf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function tp(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ep(t){var e=gf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var np,rp,ip,op,sp,ap,cp,lp,dp,up,hp,gp,fp,pp,mp,bp,kp={point:wp,lineStart:_p,lineEnd:vp,polygonStart:function(){kp.point=Ap,kp.lineStart=Cp,kp.lineEnd=xp,zf=new tt,Hf.polygonStart()},polygonEnd:function(){Hf.polygonEnd(),kp.point=wp,kp.lineStart=_p,kp.lineEnd=vp,Vf<0?(Mf=-(Bf=180),If=-(Lf=90)):zf>Yg?Lf=90:zf<-Yg&&(If=-90),jf[0]=Mf,jf[1]=Bf},sphere:function(){Mf=-(Bf=180),If=-(Lf=90)}};function wp(t,e){Ff.push(jf=[Mf=t,Bf=t]),e<If&&(If=e),e>Lf&&(Lf=e)}function yp(t,e){var n=Kf([t*tf,e*tf]);if(Rf){var r=Xf(Rf,n),i=Xf([r[1],-r[0],0],r);ep(i),i=Zf(i);var o,s=t-Nf,a=s>0?1:-1,c=i[0]*Jg*a,l=ef(s)>180;l^(a*Nf<c&&c<a*t)?(o=i[1]*Jg)>Lf&&(Lf=o):l^(a*Nf<(c=(c+360)%360-180)&&c<a*t)?(o=-i[1]*Jg)<If&&(If=o):(e<If&&(If=e),e>Lf&&(Lf=e)),l?t<Nf?Ep(Mf,t)>Ep(Mf,Bf)&&(Bf=t):Ep(t,Bf)>Ep(Mf,Bf)&&(Mf=t):Bf>=Mf?(t<Mf&&(Mf=t),t>Bf&&(Bf=t)):t>Nf?Ep(Mf,t)>Ep(Mf,Bf)&&(Bf=t):Ep(t,Bf)>Ep(Mf,Bf)&&(Mf=t)}else Ff.push(jf=[Mf=t,Bf=t]);e<If&&(If=e),e>Lf&&(Lf=e),Rf=n,Nf=t}function _p(){kp.point=yp}function vp(){jf[0]=Mf,jf[1]=Bf,kp.point=wp,Rf=null}function Ap(t,e){if(Rf){var n=t-Nf;zf.add(ef(n)>180?n+(n>0?360:-360):n)}else Of=t,Pf=e;Hf.point(t,e),yp(t,e)}function Cp(){Hf.lineStart()}function xp(){Ap(Of,Pf),Hf.lineEnd(),ef(zf)>Yg&&(Mf=-(Bf=180)),jf[0]=Mf,jf[1]=Bf,Rf=null}function Ep(t,e){return(e-=t)<0?e+360:e}function Tp(t,e){return t[0]-e[0]}function Sp(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Dp(t){var e,n,r,i,o,s,a;if(Lf=Bf=-(Mf=If=1/0),Ff=[],Cf(t,kp),n=Ff.length){for(Ff.sort(Tp),e=1,o=[r=Ff[0]];e<n;++e)Sp(r,(i=Ff[e])[0])||Sp(r,i[1])?(Ep(r[0],i[1])>Ep(r[0],r[1])&&(r[1]=i[1]),Ep(i[0],r[1])>Ep(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(a=Ep(r[1],i[0]))>s&&(s=a,Mf=i[0],Bf=r[1])}return Ff=jf=null,Mf===1/0||If===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mf,If],[Bf,Lf]]}var Mp={sphere:kf,point:Ip,lineStart:Lp,lineEnd:Pp,polygonStart:function(){Mp.lineStart=Rp,Mp.lineEnd=zp},polygonEnd:function(){Mp.lineStart=Lp,Mp.lineEnd=Pp}};function Ip(t,e){t*=tf;var n=of(e*=tf);Bp(n*of(t),n*uf(t),uf(e))}function Bp(t,e,n){++np,ip+=(t-ip)/np,op+=(e-op)/np,sp+=(n-sp)/np}function Lp(){Mp.point=Np}function Np(t,e){t*=tf;var n=of(e*=tf);pp=n*of(t),mp=n*uf(t),bp=uf(e),Mp.point=Op,Bp(pp,mp,bp)}function Op(t,e){t*=tf;var n=of(e*=tf),r=n*of(t),i=n*uf(t),o=uf(e),s=rf(gf((s=mp*o-bp*i)*s+(s=bp*r-pp*o)*s+(s=pp*i-mp*r)*s),pp*r+mp*i+bp*o);rp+=s,ap+=s*(pp+(pp=r)),cp+=s*(mp+(mp=i)),lp+=s*(bp+(bp=o)),Bp(pp,mp,bp)}function Pp(){Mp.point=Ip}function Rp(){Mp.point=Fp}function zp(){jp(gp,fp),Mp.point=Ip}function Fp(t,e){gp=t,fp=e,t*=tf,e*=tf,Mp.point=jp;var n=of(e);pp=n*of(t),mp=n*uf(t),bp=uf(e),Bp(pp,mp,bp)}function jp(t,e){t*=tf;var n=of(e*=tf),r=n*of(t),i=n*uf(t),o=uf(e),s=mp*o-bp*i,a=bp*r-pp*o,c=pp*i-mp*r,l=cf(s,a,c),d=mf(l),u=l&&-d/l;dp.add(u*s),up.add(u*a),hp.add(u*c),rp+=d,ap+=d*(pp+(pp=r)),cp+=d*(mp+(mp=i)),lp+=d*(bp+(bp=o)),Bp(pp,mp,bp)}function Vp(t){np=rp=ip=op=sp=ap=cp=lp=0,dp=new tt,up=new tt,hp=new tt,Cf(t,Mp);var e=+dp,n=+up,r=+hp,i=cf(e,n,r);return i<Gg&&(e=ap,n=cp,r=lp,rp<Yg&&(e=ip,n=op,r=sp),(i=cf(e,n,r))<Gg)?[NaN,NaN]:[rf(n,e)*Jg,mf(r/i)*Jg]}function $p(t){return function(){return t}}function Hp(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Up(t,e){return[ef(t)>Zg?t+Math.round(-t/Xg)*Xg:t,e]}function Wp(t,e,n){return(t%=Xg)?e||n?Hp(Yp(t),Gp(e,n)):Yp(t):e||n?Gp(e,n):Up}function qp(t){return function(e,n){return[(e+=t)>Zg?e-Xg:e<-Zg?e+Xg:e,n]}}function Yp(t){var e=qp(t);return e.invert=qp(-t),e}function Gp(t,e){var n=of(t),r=uf(t),i=of(e),o=uf(e);function s(t,e){var s=of(e),a=of(t)*s,c=uf(t)*s,l=uf(e),d=l*n+a*r;return[rf(c*i-d*o,a*n-l*r),mf(d*i+c*o)]}return s.invert=function(t,e){var s=of(e),a=of(t)*s,c=uf(t)*s,l=uf(e),d=l*i-c*o;return[rf(c*i+l*o,a*n+d*r),mf(d*n-a*r)]},s}function Zp(t){function e(e){return(e=t(e[0]*tf,e[1]*tf))[0]*=Jg,e[1]*=Jg,e}return t=Wp(t[0]*tf,t[1]*tf,t.length>2?t[2]*tf:0),e.invert=function(e){return(e=t.invert(e[0]*tf,e[1]*tf))[0]*=Jg,e[1]*=Jg,e},e}function Kp(t,e,n,r,i,o){if(n){var s=of(e),a=uf(e),c=r*n;null==i?(i=e+r*Xg,o=e-c/2):(i=Qp(s,i),o=Qp(s,o),(r>0?i<o:i>o)&&(i+=r*Xg));for(var l,d=i;r>0?d>o:d<o;d-=c)l=Zf([s,-a*of(d),-a*uf(d)]),t.point(l[0],l[1])}}function Qp(t,e){(e=Kf(e))[0]-=t,ep(e);var n=pf(-e[1]);return((-e[2]<0?-n:n)+Xg-Yg)%Xg}function Xp(){var t,e,n=$p([0,0]),r=$p(90),i=$p(6),o={point:s};function s(n,r){t.push(n=e(n,r)),n[0]*=Jg,n[1]*=Jg}function a(){var s=n.apply(this,arguments),a=r.apply(this,arguments)*tf,c=i.apply(this,arguments)*tf;return t=[],e=Wp(-s[0]*tf,-s[1]*tf,0).invert,Kp(o,a,c,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:$p([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:$p(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:$p(+t),a):i},a}function Jp(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:kf,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tm(t,e){return ef(t[0]-e[0])<Yg&&ef(t[1]-e[1])<Yg}function em(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function nm(t,e,n,r,i){var o,s,a=[],c=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(tm(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s[0]+=2*Yg}a.push(n=new em(r,t,null,!0)),c.push(n.o=new em(r,null,n,!1)),a.push(n=new em(s,t,null,!1)),c.push(n.o=new em(s,null,n,!0))}})),a.length){for(c.sort(e),rm(a),rm(c),o=0,s=c.length;o<s;++o)c[o].e=n=!n;for(var l,d,u=a[0];;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(o=0,s=l.length;o<s;++o)i.point((d=l[o])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((d=l[o])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,g=!g}while(!h.v);i.lineEnd()}}}function rm(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function im(t){return ef(t[0])<=Zg?t[0]:hf(t[0])*((ef(t[0])+Zg)%Xg-Zg)}function om(t,e){var n=im(e),r=e[1],i=uf(r),o=[uf(n),-of(n),0],s=0,a=0,c=new tt;1===i?r=Kg+Yg:-1===i&&(r=-Kg-Yg);for(var l=0,d=t.length;l<d;++l)if(h=(u=t[l]).length)for(var u,h,g=u[h-1],f=im(g),p=g[1]/2+Qg,m=uf(p),b=of(p),k=0;k<h;++k,f=y,m=v,b=A,g=w){var w=u[k],y=im(w),_=w[1]/2+Qg,v=uf(_),A=of(_),C=y-f,x=C>=0?1:-1,E=x*C,T=E>Zg,S=m*v;if(c.add(rf(S*x*uf(E),b*A+S*of(E))),s+=T?C+x*Xg:C,T^f>=n^y>=n){var D=Xf(Kf(g),Kf(w));ep(D);var M=Xf(o,D);ep(M);var I=(T^C>=0?-1:1)*mf(M[2]);(r>I||r===I&&(D[0]||D[1]))&&(a+=T^C>=0?1:-1)}}return(s<-Yg||s<Yg&&c<-Gg)^1&a}function sm(t,e,n,r){return function(i){var o,s,a,c=e(i),l=Jp(),d=e(l),u=!1,h={point:g,lineStart:p,lineEnd:m,polygonStart:function(){h.point=b,h.lineStart=k,h.lineEnd=w,s=[],o=[]},polygonEnd:function(){h.point=g,h.lineStart=p,h.lineEnd=m,s=Jt(s);var t=om(o,r);s.length?(u||(i.polygonStart(),u=!0),nm(s,cm,t,n,i)):t&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(e,n){t(e,n)&&i.point(e,n)}function f(t,e){c.point(t,e)}function p(){h.point=f,c.lineStart()}function m(){h.point=g,c.lineEnd()}function b(t,e){a.push([t,e]),d.point(t,e)}function k(){d.lineStart(),a=[]}function w(){b(a[0][0],a[0][1]),d.lineEnd();var t,e,n,r,c=d.clean(),h=l.result(),g=h.length;if(a.pop(),o.push(a),a=null,g)if(1&c){if((e=(n=h[0]).length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else g>1&&2&c&&h.push(h.pop().concat(h.shift())),s.push(h.filter(am))}return h}}function am(t){return t.length>1}function cm(t,e){return((t=t.x)[0]<0?t[1]-Kg-Yg:Kg-t[1])-((e=e.x)[0]<0?e[1]-Kg-Yg:Kg-e[1])}Up.invert=Up;const lm=sm((function(){return!0}),dm,hm,[-Zg,-Kg]);function dm(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Zg:-Zg,c=ef(o-n);ef(c-Zg)<Yg?(t.point(n,r=(r+s)/2>0?Kg:-Kg),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&c>=Zg&&(ef(n-i)<Yg&&(n-=i*Yg),ef(o-a)<Yg&&(o-=a*Yg),r=um(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function um(t,e,n,r){var i,o,s=uf(t-n);return ef(s)>Yg?nf((uf(e)*(o=of(r))*uf(n)-uf(r)*(i=of(e))*uf(t))/(i*o*s)):(e+r)/2}function hm(t,e,n,r){var i;if(null==t)i=n*Kg,r.point(-Zg,i),r.point(0,i),r.point(Zg,i),r.point(Zg,0),r.point(Zg,-i),r.point(0,-i),r.point(-Zg,-i),r.point(-Zg,0),r.point(-Zg,i);else if(ef(t[0]-e[0])>Yg){var o=t[0]<e[0]?Zg:-Zg;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function gm(t){var e=of(t),n=6*tf,r=e>0,i=ef(e)>Yg;function o(e,r,i,o){Kp(o,t,n,i,e,r)}function s(t,n){return of(t)*of(n)>e}function a(t){var e,n,o,a,d;return{lineStart:function(){a=o=!1,d=1},point:function(u,h){var g,f=[u,h],p=s(u,h),m=r?p?0:l(u,h):p?l(u+(u<0?Zg:-Zg),h):0;if(!e&&(a=o=p)&&t.lineStart(),p!==o&&(!(g=c(e,f))||tm(e,g)||tm(f,g))&&(f[2]=1),p!==o)d=0,p?(t.lineStart(),g=c(f,e),t.point(g[0],g[1])):(g=c(e,f),t.point(g[0],g[1],2),t.lineEnd()),e=g;else if(i&&e&&r^p){var b;m&n||!(b=c(f,e,!0))||(d=0,r?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1],3)))}!p||e&&tm(e,f)||t.point(f[0],f[1]),e=f,o=p,n=m},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return d|(a&&o)<<1}}}function c(t,n,r){var i=[1,0,0],o=Xf(Kf(t),Kf(n)),s=Qf(o,o),a=o[0],c=s-a*a;if(!c)return!r&&t;var l=e*s/c,d=-e*a/c,u=Xf(i,o),h=tp(i,l);Jf(h,tp(o,d));var g=u,f=Qf(h,g),p=Qf(g,g),m=f*f-p*(Qf(h,h)-1);if(!(m<0)){var b=gf(m),k=tp(g,(-f-b)/p);if(Jf(k,h),k=Zf(k),!r)return k;var w,y=t[0],_=n[0],v=t[1],A=n[1];_<y&&(w=y,y=_,_=w);var C=_-y,x=ef(C-Zg)<Yg;if(!x&&A<v&&(w=v,v=A,A=w),x||C<Yg?x?v+A>0^k[1]<(ef(k[0]-y)<Yg?v:A):v<=k[1]&&k[1]<=A:C>Zg^(y<=k[0]&&k[0]<=_)){var E=tp(g,(-f+b)/p);return Jf(E,h),[k,Zf(E)]}}}function l(e,n){var i=r?t:Zg-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return sm(s,a,o,r?[0,-t]:[-Zg,t-Zg])}function fm(t,e,n,r,i,o){var s,a=t[0],c=t[1],l=0,d=1,u=e[0]-a,h=e[1]-c;if(s=n-a,u||!(s>0)){if(s/=u,u<0){if(s<l)return;s<d&&(d=s)}else if(u>0){if(s>d)return;s>l&&(l=s)}if(s=i-a,u||!(s<0)){if(s/=u,u<0){if(s>d)return;s>l&&(l=s)}else if(u>0){if(s<l)return;s<d&&(d=s)}if(s=r-c,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<d&&(d=s)}else if(h>0){if(s>d)return;s>l&&(l=s)}if(s=o-c,h||!(s<0)){if(s/=h,h<0){if(s>d)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<d&&(d=s)}return l>0&&(t[0]=a+l*u,t[1]=c+l*h),d<1&&(e[0]=a+d*u,e[1]=c+d*h),!0}}}}}var pm,mm,bm,km,wm=1e9,ym=-wm;function _m(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var d=0,u=0;if(null==i||(d=s(i,a))!==(u=s(o,a))||c(i,o)<0^a>0)do{l.point(0===d||3===d?t:n,d>1?r:e)}while((d=(d+a+4)%4)!==u);else l.point(o[0],o[1])}function s(r,i){return ef(r[0]-t)<Yg?i>0?0:3:ef(r[0]-n)<Yg?i>0?2:1:ef(r[1]-e)<Yg?i>0?1:0:i>0?3:2}function a(t,e){return c(t.x,e.x)}function c(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var c,l,d,u,h,g,f,p,m,b,k,w=s,y=Jp(),_={point:v,lineStart:E,lineEnd:T,polygonStart:C,polygonEnd:x};function v(t,e){i(t,e)&&w.point(t,e)}function A(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],c=1,d=a.length,u=a[0],h=u[0],g=u[1];c<d;++c)o=h,s=g,h=(u=a[c])[0],g=u[1],s<=r?g>r&&(h-o)*(r-s)>(g-s)*(t-o)&&++e:g<=r&&(h-o)*(r-s)<(g-s)*(t-o)&&--e;return e}function C(){w=y,c=[],l=[],k=!0}function x(){var t=A(),e=k&&t,n=(c=Jt(c)).length;(e||n)&&(s.polygonStart(),e&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),n&&nm(c,a,t,o,s),s.polygonEnd()),w=s,c=l=d=null}function E(){_.point=S,l&&l.push(d=[]),b=!0,m=!1,f=p=NaN}function T(){c&&(S(u,h),g&&m&&y.rejoin(),c.push(y.result())),_.point=v,m&&w.lineEnd()}function S(o,s){var a=i(o,s);if(l&&d.push([o,s]),b)u=o,h=s,g=a,b=!1,a&&(w.lineStart(),w.point(o,s));else if(a&&m)w.point(o,s);else{var c=[f=Math.max(ym,Math.min(wm,f)),p=Math.max(ym,Math.min(wm,p))],y=[o=Math.max(ym,Math.min(wm,o)),s=Math.max(ym,Math.min(wm,s))];fm(c,y,t,e,n,r)?(m||(w.lineStart(),w.point(c[0],c[1])),w.point(y[0],y[1]),a||w.lineEnd(),k=!1):a&&(w.lineStart(),w.point(o,s),k=!1)}f=o,p=s,m=a}return _}}function vm(){var t,e,n,r=0,i=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=_m(r,i,o,s)(e=n)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[r,i],[o,s]]}}}var Am={sphere:kf,point:kf,lineStart:Cm,lineEnd:kf,polygonStart:kf,polygonEnd:kf};function Cm(){Am.point=Em,Am.lineEnd=xm}function xm(){Am.point=Am.lineEnd=kf}function Em(t,e){mm=t*=tf,bm=uf(e*=tf),km=of(e),Am.point=Tm}function Tm(t,e){t*=tf;var n=uf(e*=tf),r=of(e),i=ef(t-mm),o=of(i),s=r*uf(i),a=km*n-bm*r*o,c=bm*n+km*r*o;pm.add(rf(gf(s*s+a*a),c)),mm=t,bm=n,km=r}function Sm(t){return pm=new tt,Cf(t,Am),+pm}var Dm=[null,null],Mm={type:"LineString",coordinates:Dm};function Im(t,e){return Dm[0]=t,Dm[1]=e,Sm(Mm)}var Bm={Feature:function(t,e){return Nm(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Nm(n[r].geometry,e))return!0;return!1}},Lm={Sphere:function(){return!0},Point:function(t,e){return Om(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Om(n[r],e))return!0;return!1},LineString:function(t,e){return Pm(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Pm(n[r],e))return!0;return!1},Polygon:function(t,e){return Rm(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Rm(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Nm(n[r],e))return!0;return!1}};function Nm(t,e){return!(!t||!Lm.hasOwnProperty(t.type))&&Lm[t.type](t,e)}function Om(t,e){return 0===Im(t,e)}function Pm(t,e){for(var n,r,i,o=0,s=t.length;o<s;o++){if(0===(r=Im(t[o],e)))return!0;if(o>0&&(i=Im(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Gg*i)return!0;n=r}return!1}function Rm(t,e){return!!om(t.map(zm),Fm(e))}function zm(t){return(t=t.map(Fm)).pop(),t}function Fm(t){return[t[0]*tf,t[1]*tf]}function jm(t,e){return(t&&Bm.hasOwnProperty(t.type)?Bm[t.type]:Nm)(t,e)}function Vm(t,e,n){var r=re(t,e-Yg,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function $m(t,e,n){var r=re(t,e-Yg,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Hm(){var t,e,n,r,i,o,s,a,c,l,d,u,h=10,g=h,f=90,p=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:k()}}function k(){return re(sf(r/f)*f,n,f).map(d).concat(re(sf(a/p)*p,s,p).map(u)).concat(re(sf(e/h)*h,t,h).filter((function(t){return ef(t%f)>Yg})).map(c)).concat(re(sf(o/g)*g,i,g).filter((function(t){return ef(t%p)>Yg})).map(l))}return b.lines=function(){return k().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(u(s).slice(1),d(n).reverse().slice(1),u(a).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],a=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),a>s&&(t=a,a=s,s=t),b.precision(m)):[[r,a],[n,s]]},b.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),b.precision(m)):[[e,o],[t,i]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(f=+t[0],p=+t[1],b):[f,p]},b.stepMinor=function(t){return arguments.length?(h=+t[0],g=+t[1],b):[h,g]},b.precision=function(h){return arguments.length?(m=+h,c=Vm(o,i,90),l=$m(e,t,m),d=Vm(a,s,90),u=$m(r,n,m),b):m},b.extentMajor([[-180,-90+Yg],[180,90-Yg]]).extentMinor([[-180,-80-Yg],[180,80+Yg]])}function Um(){return Hm()()}function Wm(t,e){var n=t[0]*tf,r=t[1]*tf,i=e[0]*tf,o=e[1]*tf,s=of(r),a=uf(r),c=of(o),l=uf(o),d=s*of(n),u=s*uf(n),h=c*of(i),g=c*uf(i),f=2*mf(gf(bf(o-r)+s*c*bf(i-n))),p=uf(f),m=f?function(t){var e=uf(t*=f)/p,n=uf(f-t)/p,r=n*d+e*h,i=n*u+e*g,o=n*a+e*l;return[rf(i,r)*Jg,rf(o,gf(r*r+i*i))*Jg]}:function(){return[n*Jg,r*Jg]};return m.distance=f,m}const qm=t=>t;var Ym,Gm,Zm,Km,Qm=new tt,Xm=new tt,Jm={point:kf,lineStart:kf,lineEnd:kf,polygonStart:function(){Jm.lineStart=tb,Jm.lineEnd=rb},polygonEnd:function(){Jm.lineStart=Jm.lineEnd=Jm.point=kf,Qm.add(ef(Xm)),Xm=new tt},result:function(){var t=Qm/2;return Qm=new tt,t}};function tb(){Jm.point=eb}function eb(t,e){Jm.point=nb,Ym=Zm=t,Gm=Km=e}function nb(t,e){Xm.add(Km*t-Zm*e),Zm=t,Km=e}function rb(){nb(Ym,Gm)}const ib=Jm;var ob=1/0,sb=ob,ab=-ob,cb=ab;function lb(t,e){t<ob&&(ob=t),t>ab&&(ab=t),e<sb&&(sb=e),e>cb&&(cb=e)}const db={point:lb,lineStart:kf,lineEnd:kf,polygonStart:kf,polygonEnd:kf,result:function(){var t=[[ob,sb],[ab,cb]];return ab=cb=-(sb=ob=1/0),t}};var ub,hb,gb,fb,pb=0,mb=0,bb=0,kb=0,wb=0,yb=0,_b=0,vb=0,Ab=0,Cb={point:xb,lineStart:Eb,lineEnd:Db,polygonStart:function(){Cb.lineStart=Mb,Cb.lineEnd=Ib},polygonEnd:function(){Cb.point=xb,Cb.lineStart=Eb,Cb.lineEnd=Db},result:function(){var t=Ab?[_b/Ab,vb/Ab]:yb?[kb/yb,wb/yb]:bb?[pb/bb,mb/bb]:[NaN,NaN];return pb=mb=bb=kb=wb=yb=_b=vb=Ab=0,t}};function xb(t,e){pb+=t,mb+=e,++bb}function Eb(){Cb.point=Tb}function Tb(t,e){Cb.point=Sb,xb(gb=t,fb=e)}function Sb(t,e){var n=t-gb,r=e-fb,i=gf(n*n+r*r);kb+=i*(gb+t)/2,wb+=i*(fb+e)/2,yb+=i,xb(gb=t,fb=e)}function Db(){Cb.point=xb}function Mb(){Cb.point=Bb}function Ib(){Lb(ub,hb)}function Bb(t,e){Cb.point=Lb,xb(ub=gb=t,hb=fb=e)}function Lb(t,e){var n=t-gb,r=e-fb,i=gf(n*n+r*r);kb+=i*(gb+t)/2,wb+=i*(fb+e)/2,yb+=i,_b+=(i=fb*t-gb*e)*(gb+t),vb+=i*(fb+e),Ab+=3*i,xb(gb=t,fb=e)}const Nb=Cb;function Ob(t){this._context=t}Ob.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Xg)}},result:kf};var Pb,Rb,zb,Fb,jb,Vb=new tt,$b={point:kf,lineStart:function(){$b.point=Hb},lineEnd:function(){Pb&&Ub(Rb,zb),$b.point=kf},polygonStart:function(){Pb=!0},polygonEnd:function(){Pb=null},result:function(){var t=+Vb;return Vb=new tt,t}};function Hb(t,e){$b.point=Ub,Rb=Fb=t,zb=jb=e}function Ub(t,e){Fb-=t,jb-=e,Vb.add(gf(Fb*Fb+jb*jb)),Fb=t,jb=e}const Wb=$b;function qb(){this._string=[]}function Yb(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Gb(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Cf(t,n(r))),r.result()}return o.area=function(t){return Cf(t,n(ib)),ib.result()},o.measure=function(t){return Cf(t,n(Wb)),Wb.result()},o.bounds=function(t){return Cf(t,n(db)),db.result()},o.centroid=function(t){return Cf(t,n(Nb)),Nb.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,qm):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new qb):new Ob(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}function Zb(t){return{stream:Kb(t)}}function Kb(t){return function(e){var n=new Qb;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Qb(){}function Xb(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Cf(n,t.stream(db)),e(db.result()),null!=r&&t.clipExtent(r),t}function Jb(t,e,n){return Xb(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])}),n)}function tk(t,e,n){return Jb(t,[[0,0],e],n)}function ek(t,e,n){return Xb(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];t.scale(150*i).translate([o,s])}),n)}function nk(t,e,n){return Xb(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,s])}),n)}qb.prototype={_radius:4.5,_circle:Yb(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Yb(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Qb.prototype={constructor:Qb,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var rk=16,ik=of(30*tf);function ok(t,e){return+e?ak(t,e):sk(t)}function sk(t){return Kb({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function ak(t,e){function n(r,i,o,s,a,c,l,d,u,h,g,f,p,m){var b=l-r,k=d-i,w=b*b+k*k;if(w>4*e&&p--){var y=s+h,_=a+g,v=c+f,A=gf(y*y+_*_+v*v),C=mf(v/=A),x=ef(ef(v)-1)<Yg||ef(o-u)<Yg?(o+u)/2:rf(_,y),E=t(x,C),T=E[0],S=E[1],D=T-r,M=S-i,I=k*D-b*M;(I*I/w>e||ef((b*D+k*M)/w-.5)>.3||s*h+a*g+c*f<ik)&&(n(r,i,o,s,a,c,T,S,x,y/=A,_/=A,v,p,m),m.point(T,S),n(T,S,x,y,_,v,l,d,u,h,g,f,p,m))}}return function(e){var r,i,o,s,a,c,l,d,u,h,g,f,p={point:m,lineStart:b,lineEnd:w,polygonStart:function(){e.polygonStart(),p.lineStart=y},polygonEnd:function(){e.polygonEnd(),p.lineStart=b}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function b(){d=NaN,p.point=k,e.lineStart()}function k(r,i){var o=Kf([r,i]),s=t(r,i);n(d,u,l,h,g,f,d=s[0],u=s[1],l=r,h=o[0],g=o[1],f=o[2],rk,e),e.point(d,u)}function w(){p.point=m,e.lineEnd()}function y(){b(),p.point=_,p.lineEnd=v}function _(t,e){k(r=t,e),i=d,o=u,s=h,a=g,c=f,p.point=k}function v(){n(d,u,l,h,g,f,i,o,r,s,a,c,rk,e),p.lineEnd=w,w()}return p}}var ck=Kb({point:function(t,e){this.stream.point(t*tf,e*tf)}});function lk(t){return Kb({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function dk(t,e,n,r,i){function o(o,s){return[e+t*(o*=r),n-t*(s*=i)]}return o.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},o}function uk(t,e,n,r,i,o){if(!o)return dk(t,e,n,r,i);var s=of(o),a=uf(o),c=s*t,l=a*t,d=s/t,u=a/t,h=(a*n-s*e)/t,g=(a*e+s*n)/t;function f(t,o){return[c*(t*=r)-l*(o*=i)+e,n-l*t-c*o]}return f.invert=function(t,e){return[r*(d*t-u*e+h),i*(g-u*t-d*e)]},f}function hk(t){return gk((function(){return t}))()}function gk(t){var e,n,r,i,o,s,a,c,l,d,u=150,h=480,g=250,f=0,p=0,m=0,b=0,k=0,w=0,y=1,_=1,v=null,A=lm,C=null,x=qm,E=.5;function T(t){return c(t[0]*tf,t[1]*tf)}function S(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Jg,t[1]*Jg]}function D(){var t=uk(u,0,0,y,_,w).apply(null,e(f,p)),r=uk(u,h-t[0],g-t[1],y,_,w);return n=Wp(m,b,k),a=Hp(e,r),c=Hp(n,a),s=ok(a,E),M()}function M(){return l=d=null,T}return T.stream=function(t){return l&&d===t?l:l=ck(lk(n)(A(s(x(d=t)))))},T.preclip=function(t){return arguments.length?(A=t,v=void 0,M()):A},T.postclip=function(t){return arguments.length?(x=t,C=r=i=o=null,M()):x},T.clipAngle=function(t){return arguments.length?(A=+t?gm(v=t*tf):(v=null,lm),M()):v*Jg},T.clipExtent=function(t){return arguments.length?(x=null==t?(C=r=i=o=null,qm):_m(C=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),M()):null==C?null:[[C,r],[i,o]]},T.scale=function(t){return arguments.length?(u=+t,D()):u},T.translate=function(t){return arguments.length?(h=+t[0],g=+t[1],D()):[h,g]},T.center=function(t){return arguments.length?(f=t[0]%360*tf,p=t[1]%360*tf,D()):[f*Jg,p*Jg]},T.rotate=function(t){return arguments.length?(m=t[0]%360*tf,b=t[1]%360*tf,k=t.length>2?t[2]%360*tf:0,D()):[m*Jg,b*Jg,k*Jg]},T.angle=function(t){return arguments.length?(w=t%360*tf,D()):w*Jg},T.reflectX=function(t){return arguments.length?(y=t?-1:1,D()):y<0},T.reflectY=function(t){return arguments.length?(_=t?-1:1,D()):_<0},T.precision=function(t){return arguments.length?(s=ok(a,E=t*t),M()):gf(E)},T.fitExtent=function(t,e){return Jb(T,t,e)},T.fitSize=function(t,e){return tk(T,t,e)},T.fitWidth=function(t,e){return ek(T,t,e)},T.fitHeight=function(t,e){return nk(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&S,D()}}function fk(t){var e=0,n=Zg/3,r=gk(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*tf,n=t[1]*tf):[e*Jg,n*Jg]},i}function pk(t){var e=of(t);function n(t,n){return[t*e,uf(n)/e]}return n.invert=function(t,n){return[t/e,mf(n*e)]},n}function mk(t,e){var n=uf(t),r=(n+uf(e))/2;if(ef(r)<Yg)return pk(t);var i=1+n*(2*r-n),o=gf(i)/r;function s(t,e){var n=gf(i-2*r*uf(e))/r;return[n*uf(t*=r),o-n*of(t)]}return s.invert=function(t,e){var n=o-e,s=rf(t,ef(n))*hf(n);return n*r<0&&(s-=Zg*hf(t)*hf(n)),[s/r,mf((i-(t*t+n*n)*r*r)/(2*r))]},s}function bk(){return fk(mk).scale(155.424).center([0,33.6442])}function kk(){return bk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wk(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function yk(){var t,e,n,r,i,o,s=kk(),a=bk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=bk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function d(t){var e=t[0],s=t[1];return o=null,n.point(e,s),o||(r.point(e,s),o)||(i.point(e,s),o)}function u(){return t=e=null,d}return d.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(t)},d.stream=function(n){return t&&e===n?t:t=wk([s.stream(e=n),a.stream(n),c.stream(n)])},d.precision=function(t){return arguments.length?(s.precision(t),a.precision(t),c.precision(t),u()):s.precision()},d.scale=function(t){return arguments.length?(s.scale(t),a.scale(.35*t),c.scale(t),d.translate(s.translate())):s.scale()},d.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),o=+t[0],d=+t[1];return n=s.translate(t).clipExtent([[o-.455*e,d-.238*e],[o+.455*e,d+.238*e]]).stream(l),r=a.translate([o-.307*e,d+.201*e]).clipExtent([[o-.425*e+Yg,d+.12*e+Yg],[o-.214*e-Yg,d+.234*e-Yg]]).stream(l),i=c.translate([o-.205*e,d+.212*e]).clipExtent([[o-.214*e+Yg,d+.166*e+Yg],[o-.115*e-Yg,d+.234*e-Yg]]).stream(l),u()},d.fitExtent=function(t,e){return Jb(d,t,e)},d.fitSize=function(t,e){return tk(d,t,e)},d.fitWidth=function(t,e){return ek(d,t,e)},d.fitHeight=function(t,e){return nk(d,t,e)},d.scale(1070)}function _k(t){return function(e,n){var r=of(e),i=of(n),o=t(r*i);return o===1/0?[2,0]:[o*i*uf(e),o*uf(n)]}}function vk(t){return function(e,n){var r=gf(e*e+n*n),i=t(r),o=uf(i),s=of(i);return[rf(e*o,r*s),mf(r&&n*o/r)]}}var Ak=_k((function(t){return gf(2/(1+t))}));function Ck(){return hk(Ak).scale(124.75).clipAngle(179.999)}Ak.invert=vk((function(t){return 2*mf(t/2)}));var xk=_k((function(t){return(t=pf(t))&&t/uf(t)}));function Ek(){return hk(xk).scale(79.4188).clipAngle(179.999)}function Tk(t,e){return[t,lf(ff((Kg+e)/2))]}function Sk(){return Dk(Tk).scale(961/Xg)}function Dk(t){var e,n,r,i=hk(t),o=i.center,s=i.scale,a=i.translate,c=i.clipExtent,l=null;function d(){var o=Zg*s(),a=i(Zp(i.rotate()).invert([0,0]));return c(null==l?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===Tk?[[Math.max(a[0]-o,l),e],[Math.min(a[0]+o,n),r]]:[[l,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,r)]])}return i.scale=function(t){return arguments.length?(s(t),d()):s()},i.translate=function(t){return arguments.length?(a(t),d()):a()},i.center=function(t){return arguments.length?(o(t),d()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),d()):null==l?null:[[l,e],[n,r]]},d()}function Mk(t){return ff((Kg+t)/2)}function Ik(t,e){var n=of(t),r=t===e?uf(t):lf(n/of(e))/lf(Mk(e)/Mk(t)),i=n*df(Mk(t),r)/r;if(!r)return Tk;function o(t,e){i>0?e<-Kg+Yg&&(e=-Kg+Yg):e>Kg-Yg&&(e=Kg-Yg);var n=i/df(Mk(e),r);return[n*uf(r*t),i-n*of(r*t)]}return o.invert=function(t,e){var n=i-e,o=hf(r)*gf(t*t+n*n),s=rf(t,ef(n))*hf(n);return n*r<0&&(s-=Zg*hf(t)*hf(n)),[s/r,2*nf(df(i/o,1/r))-Kg]},o}function Bk(){return fk(Ik).scale(109.5).parallels([30,30])}function Lk(t,e){return[t,e]}function Nk(){return hk(Lk).scale(152.63)}function Ok(t,e){var n=of(t),r=t===e?uf(t):(n-of(e))/(e-t),i=n/r+t;if(ef(r)<Yg)return Lk;function o(t,e){var n=i-e,o=r*t;return[n*uf(o),i-n*of(o)]}return o.invert=function(t,e){var n=i-e,o=rf(t,ef(n))*hf(n);return n*r<0&&(o-=Zg*hf(t)*hf(n)),[o/r,i-hf(r)*gf(t*t+n*n)]},o}function Pk(){return fk(Ok).scale(131.154).center([0,13.9389])}xk.invert=vk((function(t){return t})),Tk.invert=function(t,e){return[t,2*nf(af(e))-Kg]},Lk.invert=Lk;var Rk=1.340264,zk=-.081106,Fk=893e-6,jk=.003796,Vk=gf(3)/2,$k=12;function Hk(t,e){var n=mf(Vk*uf(e)),r=n*n,i=r*r*r;return[t*of(n)/(Vk*(Rk+3*zk*r+i*(7*Fk+9*jk*r))),n*(Rk+zk*r+i*(Fk+jk*r))]}function Uk(){return hk(Hk).scale(177.158)}function Wk(t,e){var n=of(e),r=of(t)*n;return[n*uf(t)/r,uf(e)/r]}function qk(){return hk(Wk).scale(144.049).clipAngle(60)}function Yk(){var t,e,n,r,i,o,s,a=1,c=0,l=0,d=1,u=1,h=0,g=null,f=1,p=1,m=Kb({point:function(t,e){var n=w([t,e]);this.stream.point(n[0],n[1])}}),b=qm;function k(){return f=a*d,p=a*u,o=s=null,w}function w(n){var r=n[0]*f,i=n[1]*p;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+c,i+l]}return w.invert=function(n){var r=n[0]-c,i=n[1]-l;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/f,i/p]},w.stream=function(t){return o&&s===t?o:o=m(b(s=t))},w.postclip=function(t){return arguments.length?(b=t,g=n=r=i=null,k()):b},w.clipExtent=function(t){return arguments.length?(b=null==t?(g=n=r=i=null,qm):_m(g=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),k()):null==g?null:[[g,n],[r,i]]},w.scale=function(t){return arguments.length?(a=+t,k()):a},w.translate=function(t){return arguments.length?(c=+t[0],l=+t[1],k()):[c,l]},w.angle=function(n){return arguments.length?(e=uf(h=n%360*tf),t=of(h),k()):h*Jg},w.reflectX=function(t){return arguments.length?(d=t?-1:1,k()):d<0},w.reflectY=function(t){return arguments.length?(u=t?-1:1,k()):u<0},w.fitExtent=function(t,e){return Jb(w,t,e)},w.fitSize=function(t,e){return tk(w,t,e)},w.fitWidth=function(t,e){return ek(w,t,e)},w.fitHeight=function(t,e){return nk(w,t,e)},w}function Gk(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Zk(){return hk(Gk).scale(175.295)}function Kk(t,e){return[of(e)*uf(t),uf(e)]}function Qk(){return hk(Kk).scale(249.5).clipAngle(90+Yg)}function Xk(t,e){var n=of(e),r=1+of(t)*n;return[n*uf(t)/r,uf(e)/r]}function Jk(){return hk(Xk).scale(250).clipAngle(142)}function tw(t,e){return[lf(ff((Kg+e)/2)),-t]}function ew(){var t=Dk(tw),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function nw(t,e){return t.parent===e.parent?1:2}function rw(t){return t.reduce(iw,0)/t.length}function iw(t,e){return t+e.x}function ow(t){return 1+t.reduce(sw,0)}function sw(t,e){return Math.max(t,e.y)}function aw(t){for(var e;e=t.children;)t=e[0];return t}function cw(t){for(var e;e=t.children;)t=e[e.length-1];return t}function lw(){var t=nw,e=1,n=1,r=!1;function i(i){var o,s=0;i.eachAfter((function(e){var n=e.children;n?(e.x=rw(n),e.y=ow(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)}));var a=aw(i),c=cw(i),l=a.x-t(a,c)/2,d=c.x+t(c,a)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(d-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function dw(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function uw(){return this.eachAfter(dw)}function hw(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function gw(t,e){for(var n,r,i=this,o=[i],s=-1;i=o.pop();)if(t.call(e,i,++s,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this}function fw(t,e){for(var n,r,i,o=this,s=[o],a=[],c=-1;o=s.pop();)if(a.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)s.push(n[r]);for(;o=a.pop();)t.call(e,o,++c,this);return this}function pw(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function mw(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))}function bw(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))}function kw(t){for(var e=this,n=ww(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function ww(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function yw(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function _w(){return Array.from(this)}function vw(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t}function Aw(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e}function*Cw(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}function xw(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Sw)):void 0===e&&(e=Tw);for(var n,r,i,o,s,a=new Iw(t),c=[a];n=c.pop();)if((i=e(n.data))&&(s=(i=Array.from(i)).length))for(n.children=i,o=s-1;o>=0;--o)c.push(r=i[o]=new Iw(i[o])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(Mw)}function Ew(){return xw(this).eachBefore(Dw)}function Tw(t){return t.children}function Sw(t){return Array.isArray(t)?t[1]:null}function Dw(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Mw(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Iw(t){this.data=t,this.depth=this.height=0,this.parent=null}function Bw(t){return null==t?null:Lw(t)}function Lw(t){if("function"!=typeof t)throw new Error;return t}function Nw(){return 0}function Ow(t){return function(){return t}}Hk.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,s=0;s<$k&&(o=(i=(r-=n=(r*(Rk+zk*i+o*(Fk+jk*i))-e)/(Rk+3*zk*i+o*(7*Fk+9*jk*i)))*r)*i*i,!(ef(n)<Gg));++s);return[Vk*t*(Rk+3*zk*i+o*(7*Fk+9*jk*i))/of(r),mf(uf(r)/Vk)]},Wk.invert=vk(nf),Gk.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(ef(n)>Yg&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Kk.invert=vk(mf),Xk.invert=vk((function(t){return 2*nf(t)})),tw.invert=function(t,e){return[-e,2*nf(af(t))-Kg]},Iw.prototype=xw.prototype={constructor:Iw,count:uw,each:hw,eachAfter:fw,eachBefore:gw,find:pw,sum:mw,sort:bw,path:kw,ancestors:yw,descendants:_w,leaves:vw,links:Aw,copy:Ew,[Symbol.iterator]:Cw};const Pw=1664525,Rw=1013904223,zw=4294967296;function Fw(){let t=1;return()=>(t=(Pw*t+Rw)%zw)/zw}function jw(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Vw(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}function $w(t){return Hw(t,Fw())}function Hw(t,e){for(var n,r,i=0,o=(t=Vw(Array.from(t),e)).length,s=[];i<o;)n=t[i],r&&qw(r,n)?++i:(r=Gw(s=Uw(s,n)),i=0);return r}function Uw(t,e){var n,r;if(Yw(e,t))return[e];for(n=0;n<t.length;++n)if(Ww(e,t[n])&&Yw(Kw(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Ww(Kw(t[n],t[r]),e)&&Ww(Kw(t[n],e),t[r])&&Ww(Kw(t[r],e),t[n])&&Yw(Qw(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Ww(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function qw(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Yw(t,e){for(var n=0;n<e.length;++n)if(!qw(t,e[n]))return!1;return!0}function Gw(t){switch(t.length){case 1:return Zw(t[0]);case 2:return Kw(t[0],t[1]);case 3:return Qw(t[0],t[1],t[2])}}function Zw(t){return{x:t.x,y:t.y,r:t.r}}function Kw(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,s=e.y,a=e.r,c=o-n,l=s-r,d=a-i,u=Math.sqrt(c*c+l*l);return{x:(n+o+c/u*d)/2,y:(r+s+l/u*d)/2,r:(u+i+a)/2}}function Qw(t,e,n){var r=t.x,i=t.y,o=t.r,s=e.x,a=e.y,c=e.r,l=n.x,d=n.y,u=n.r,h=r-s,g=r-l,f=i-a,p=i-d,m=c-o,b=u-o,k=r*r+i*i-o*o,w=k-s*s-a*a+c*c,y=k-l*l-d*d+u*u,_=g*f-h*p,v=(f*y-p*w)/(2*_)-r,A=(p*m-f*b)/_,C=(g*w-h*y)/(2*_)-i,x=(h*b-g*m)/_,E=A*A+x*x-1,T=2*(o+v*A+C*x),S=v*v+C*C-o*o,D=-(Math.abs(E)>1e-6?(T+Math.sqrt(T*T-4*E*S))/(2*E):S/T);return{x:r+v+A*D,y:i+C+x*D,r:D}}function Xw(t,e,n){var r,i,o,s,a=t.x-e.x,c=t.y-e.y,l=a*a+c*c;l?(i=e.r+n.r,i*=i,s=t.r+n.r,i>(s*=s)?(r=(l+s-i)/(2*l),o=Math.sqrt(Math.max(0,s/l-r*r)),n.x=t.x-r*a-o*c,n.y=t.y-r*c+o*a):(r=(l+i-s)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*a-o*c,n.y=e.y+r*c+o*a)):(n.x=e.x+n.r,n.y=e.y)}function Jw(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ty(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function ey(t){this._=t,this.next=null,this.previous=null}function ny(t,e){if(!(o=(t=jw(t)).length))return 0;var n,r,i,o,s,a,c,l,d,u,h;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Xw(r,n,i=t[2]),n=new ey(n),r=new ey(r),i=new ey(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(c=3;c<o;++c){Xw(n._,r._,i=t[c]),i=new ey(i),l=r.next,d=n.previous,u=r._.r,h=n._.r;do{if(u<=h){if(Jw(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue t}u+=l._.r,l=l.next}else{if(Jw(d._,i._)){(n=d).next=r,r.previous=n,--c;continue t}h+=d._.r,d=d.previous}}while(l!==d.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=ty(n);(i=i.next)!==r;)(a=ty(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Hw(n,e),c=0;c<o;++c)(n=t[c]).x-=i.x,n.y-=i.y;return i.r}function ry(t){return ny(t,Fw()),t}function iy(t){return Math.sqrt(t.value)}function oy(){var t=null,e=1,n=1,r=Nw;function i(i){const o=Fw();return i.x=e/2,i.y=n/2,t?i.eachBefore(sy(t)).eachAfter(ay(r,.5,o)).eachBefore(cy(1)):i.eachBefore(sy(iy)).eachAfter(ay(Nw,1,o)).eachAfter(ay(r,i.r/Math.min(e,n),o)).eachBefore(cy(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Bw(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Ow(+t),i):r},i}function sy(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function ay(t,e,n){return function(r){if(i=r.children){var i,o,s,a=i.length,c=t(r)*e||0;if(c)for(o=0;o<a;++o)i[o].r+=c;if(s=ny(i,n),c)for(o=0;o<a;++o)i[o].r-=c;r.r=s+c}}}function cy(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function ly(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function dy(t,e,n,r,i){for(var o,s=t.children,a=-1,c=s.length,l=t.value&&(r-e)/t.value;++a<c;)(o=s[a]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function uy(){var t=1,e=1,n=0,r=!1;function i(i){var s=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/s,i.eachBefore(o(e,s)),r&&i.eachBefore(ly),i}function o(t,e){return function(r){r.children&&dy(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,s=r.x1-n,a=r.y1-n;s<i&&(i=s=(i+s)/2),a<o&&(o=a=(o+a)/2),r.x0=i,r.y0=o,r.x1=s,r.y1=a}}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var hy={depth:-1},gy={},fy={};function py(t){return t.id}function my(t){return t.parentId}function by(){var t,e=py,n=my;function r(r){var i,o,s,a,c,l,d,u,h=Array.from(r),g=e,f=n,p=new Map;if(null!=t){const e=h.map(((e,n)=>ky(t(e,n,r)))),n=e.map(wy),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(wy(t)),h.push(fy));g=(t,n)=>e[n],f=(t,e)=>n[e]}for(s=0,i=h.length;s<i;++s)o=h[s],l=h[s]=new Iw(o),null!=(d=g(o,s,r))&&(d+="")&&(u=l.id=d,p.set(u,p.has(u)?gy:l)),null!=(d=f(o,s,r))&&(d+="")&&(l.parent=d);for(s=0;s<i;++s)if(d=(l=h[s]).parent){if(!(c=p.get(d)))throw new Error("missing: "+d);if(c===gy)throw new Error("ambiguous: "+d);c.children?c.children.push(l):c.children=[l],l.parent=c}else{if(a)throw new Error("multiple roots");a=l}if(!a)throw new Error("no root");if(null!=t){for(;a.data===fy&&1===a.children.length;)a=a.children[0],--i;for(let t=h.length-1;t>=0&&(l=h[t]).data===fy;--t)l.data=null}if(a.parent=hy,a.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Mw),a.parent=null,i>0)throw new Error("cycle");return a}return r.id=function(t){return arguments.length?(e=Bw(t),r):e},r.parentId=function(t){return arguments.length?(n=Bw(t),r):n},r.path=function(e){return arguments.length?(t=Bw(e),r):t},r}function ky(t){let e=(t=`${t}`).length;return yy(t,e-1)&&!yy(t,e-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:`/${t}`}function wy(t){let e=t.length;if(e<2)return"";for(;--e>1&&!yy(t,e););return t.slice(0,e)}function yy(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(0==(1&n))return!0}return!1}function _y(t,e){return t.parent===e.parent?1:2}function vy(t){var e=t.children;return e?e[0]:t.t}function Ay(t){var e=t.children;return e?e[e.length-1]:t.t}function Cy(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function xy(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Ey(t,e,n){return t.a.parent===e.parent?t.a:n}function Ty(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Sy(t){for(var e,n,r,i,o,s=new Ty(t,0),a=[s];e=a.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(n=e.children[i]=new Ty(r[i],i)),n.parent=e;return(s.parent=new Ty(null,0)).children=[s],s}function Dy(){var t=_y,e=1,n=1,r=null;function i(i){var a=Sy(i);if(a.eachAfter(o),a.parent.m=-a.z,a.eachBefore(s),r)i.eachBefore(c);else{var l=i,d=i,u=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>d.x&&(d=t),t.depth>u.depth&&(u=t)}));var h=l===d?1:t(l,d)/2,g=h-l.x,f=e/(d.x+h+g),p=n/(u.depth||1);i.eachBefore((function(t){t.x=(t.x+g)*f,t.y=t.depth*p}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){xy(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=a(e,i,e.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(e,n,r){if(n){for(var i,o=e,s=e,a=n,c=o.parent.children[0],l=o.m,d=s.m,u=a.m,h=c.m;a=Ay(a),o=vy(o),a&&o;)c=vy(c),(s=Ay(s)).a=e,(i=a.z+u-o.z-l+t(a._,o._))>0&&(Cy(Ey(a,e,r),e,i),l+=i,d+=i),u+=a.m,l+=o.m,h+=c.m,d+=s.m;a&&!Ay(s)&&(s.t=a,s.m+=u-d),o&&!vy(c)&&(c.t=o,c.m+=l-h,r=e)}return r}function c(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function My(t,e,n,r,i){for(var o,s=t.children,a=-1,c=s.length,l=t.value&&(i-n)/t.value;++a<c;)(o=s[a]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}Ty.prototype=Object.create(Iw.prototype);var Iy=(1+Math.sqrt(5))/2;function By(t,e,n,r,i,o){for(var s,a,c,l,d,u,h,g,f,p,m,b=[],k=e.children,w=0,y=0,_=k.length,v=e.value;w<_;){c=i-n,l=o-r;do{d=k[y++].value}while(!d&&y<_);for(u=h=d,m=d*d*(p=Math.max(l/c,c/l)/(v*t)),f=Math.max(h/m,m/u);y<_;++y){if(d+=a=k[y].value,a<u&&(u=a),a>h&&(h=a),m=d*d*p,(g=Math.max(h/m,m/u))>f){d-=a;break}f=g}b.push(s={value:d,dice:c<l,children:k.slice(w,y)}),s.dice?dy(s,n,r,i,v?r+=l*d/v:o):My(s,n,r,v?n+=c*d/v:i,o),v-=d,w=y}return b}const Ly=function t(e){function n(t,n,r,i,o){By(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Iy);function Ny(){var t=Ly,e=!1,n=1,r=1,i=[0],o=Nw,s=Nw,a=Nw,c=Nw,l=Nw;function d(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(u),i=[0],e&&t.eachBefore(ly),t}function u(e){var n=i[e.depth],r=e.x0+n,d=e.y0+n,u=e.x1-n,h=e.y1-n;u<r&&(r=u=(r+u)/2),h<d&&(d=h=(d+h)/2),e.x0=r,e.y0=d,e.x1=u,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=l(e)-n,d+=s(e)-n,(u-=a(e)-n)<r&&(r=u=(r+u)/2),(h-=c(e)-n)<d&&(d=h=(d+h)/2),t(e,r,d,u,h))}return d.round=function(t){return arguments.length?(e=!!t,d):e},d.size=function(t){return arguments.length?(n=+t[0],r=+t[1],d):[n,r]},d.tile=function(e){return arguments.length?(t=Lw(e),d):t},d.padding=function(t){return arguments.length?d.paddingInner(t).paddingOuter(t):d.paddingInner()},d.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Ow(+t),d):o},d.paddingOuter=function(t){return arguments.length?d.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):d.paddingTop()},d.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:Ow(+t),d):s},d.paddingRight=function(t){return arguments.length?(a="function"==typeof t?t:Ow(+t),d):a},d.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:Ow(+t),d):c},d.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Ow(+t),d):l},d}function Oy(t,e,n,r,i){var o,s,a=t.children,c=a.length,l=new Array(c+1);for(l[0]=s=o=0;o<c;++o)l[o+1]=s+=a[o].value;function d(t,e,n,r,i,o,s){if(t>=e-1){var c=a[t];return c.x0=r,c.y0=i,c.x1=o,void(c.y1=s)}for(var u=l[t],h=n/2+u,g=t+1,f=e-1;g<f;){var p=g+f>>>1;l[p]<h?g=p+1:f=p}h-l[g-1]<l[g]-h&&t+1<g&&--g;var m=l[g]-u,b=n-m;if(o-r>s-i){var k=n?(r*b+o*m)/n:o;d(t,g,m,r,i,k,s),d(g,e,b,k,i,o,s)}else{var w=n?(i*b+s*m)/n:s;d(t,g,m,r,i,o,w),d(g,e,b,r,w,o,s)}}d(0,c,t.value,e,n,r,i)}function Py(t,e,n,r,i){(1&t.depth?My:dy)(t,e,n,r,i)}const Ry=function t(e){function n(t,n,r,i,o){if((s=t._squarify)&&s.ratio===e)for(var s,a,c,l,d,u=-1,h=s.length,g=t.value;++u<h;){for(c=(a=s[u]).children,l=a.value=0,d=c.length;l<d;++l)a.value+=c[l].value;a.dice?dy(a,n,r,i,g?r+=(o-r)*a.value/g:o):My(a,n,r,g?n+=(i-n)*a.value/g:i,o),g-=a.value}else t._squarify=s=By(e,t,n,r,i,o),s.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Iy);function zy(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function Fy(t){for(var e,n,r=-1,i=t.length,o=0,s=0,a=t[i-1],c=0;++r<i;)e=a,a=t[r],c+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o/(c*=3),s/c]}function jy(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Vy(t,e){return t[0]-e[0]||t[1]-e[1]}function $y(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&jy(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Hy(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Vy),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=$y(r),s=$y(i),a=s[0]===o[0],c=s[s.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[r[o[e]][2]]);for(e=+a;e<s.length-c;++e)l.push(t[r[s[e]][2]]);return l}function Uy(t,e){for(var n,r,i=t.length,o=t[i-1],s=e[0],a=e[1],c=o[0],l=o[1],d=!1,u=0;u<i;++u)n=(o=t[u])[0],(r=o[1])>a!=l>a&&s<(c-n)*(a-r)/(l-r)+n&&(d=!d),c=n,l=r;return d}function Wy(t){for(var e,n,r=-1,i=t.length,o=t[i-1],s=o[0],a=o[1],c=0;++r<i;)e=s,n=a,e-=s=(o=t[r])[0],n-=a=o[1],c+=Math.hypot(e,n);return c}const qy=Math.random,Yy=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(qy),Gy=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(qy),Zy=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(qy),Ky=function t(e){var n=Zy.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(qy),Qy=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(qy),Xy=function t(e){var n=Qy.source(e);function r(t){if(0==(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(qy),Jy=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(qy),t_=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(qy),e_=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(qy),n_=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(qy),r_=function t(e){var n=Zy.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),s=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),a=1+o*t}while(a<=0);a*=a*a;var c=1-e()}while(c>=1-.0331*t*t*t*t&&Math.log(c)>=.5*t*t+i*(1-a+Math.log(a)));return i*a*s()*r}}return r.source=t,r}(qy),i_=function t(e){var n=r_.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(qy),o_=function t(e){var n=n_.source(e),r=i_.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,s=e;o*s>16&&o*(1-s)>16;){var a=Math.floor((o+1)*s),c=r(a,o-a+1)();c<=s?(i+=a,o-=a,s=(s-c)/(1-c)):(o=a-1,s/=c)}for(var l=s<.5,d=n(l?s:1-s),u=d(),h=0;u<=o;++h)u+=d();return i+(l?h:o-h)}}return i.source=t,i}(qy),s_=function t(e){function n(t,n,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(qy),a_=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(qy),c_=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(qy),l_=function t(e){var n=r_.source(e),r=o_.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var s=Math.floor(.875*o),a=n(s)();if(a>o)return i+r(s-1,o/a)();i+=s,o-=a}for(var c=-Math.log1p(-e()),l=0;c<=o;++l)c-=Math.log1p(-e());return i+l}}return i.source=t,i}(qy),d_=1664525,u_=1013904223,h_=1/4294967296;function g_(t=Math.random()){let e=0|(0<=t&&t<1?t/h_:Math.abs(t));return()=>(e=d_*e+u_|0,h_*(e>>>0))}function f_(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function p_(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const m_=Symbol("implicit");function b_(){var t=new rt,e=[],n=[],r=m_;function i(i){let o=t.get(i);if(void 0===o){if(r!==m_)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new rt;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return b_(e,n).unknown(r)},f_.apply(i,arguments),i}function k_(){var t,e,n=b_().unknown(void 0),r=n.domain,i=n.range,o=0,s=1,a=!1,c=0,l=0,d=.5;function u(){var n=r().length,u=s<o,h=u?s:o,g=u?o:s;t=(g-h)/Math.max(1,n-c+2*l),a&&(t=Math.floor(t)),h+=(g-h-t*(n-c))*d,e=t*(1-c),a&&(h=Math.round(h),e=Math.round(e));var f=re(n).map((function(e){return h+t*e}));return i(u?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),u()):r()},n.range=function(t){return arguments.length?([o,s]=t,o=+o,s=+s,u()):[o,s]},n.rangeRound=function(t){return[o,s]=t,o=+o,s=+s,a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),u()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),u()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,u()):l},n.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),u()):d},n.copy=function(){return k_(r(),[o,s]).round(a).paddingInner(c).paddingOuter(l).align(d)},f_.apply(u(),arguments)}function w_(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return w_(e())},t}function y_(){return w_(k_.apply(null,arguments).paddingInner(1))}function __(t){return function(){return t}}function v_(t){return+t}var A_=[0,1];function C_(t){return t}function x_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:__(isNaN(e)?NaN:.5)}function E_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function T_(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=x_(i,r),o=n(s,o)):(r=x_(r,i),o=n(o,s)),function(t){return o(r(t))}}function S_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=x_(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=N(t,e,1,r)-1;return o[n](i[n](e))}}function D_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function M_(){var t,e,n,r,i,o,s=A_,a=A_,c=ds,l=C_;function d(){var t=Math.min(s.length,a.length);return l!==C_&&(l=E_(s[0],s[t-1])),r=t>2?S_:T_,i=o=null,u}function u(e){return null==e||isNaN(e=+e)?n:(i||(i=r(s.map(t),a,c)))(t(l(e)))}return u.invert=function(n){return l(e((o||(o=r(a,s.map(t),rs)))(n)))},u.domain=function(t){return arguments.length?(s=Array.from(t,v_),d()):s.slice()},u.range=function(t){return arguments.length?(a=Array.from(t),d()):a.slice()},u.rangeRound=function(t){return a=Array.from(t),c=gs,d()},u.clamp=function(t){return arguments.length?(l=!!t||C_,d()):l!==C_},u.interpolate=function(t){return arguments.length?(c=t,d()):c},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,r){return t=n,e=r,d()}}function I_(){return M_()(C_,C_)}function B_(t,e,n,r){var i,o=Lt(t,e,n);switch((r=Mg(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Wg(o,s))||(r.precision=i),Fg(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=qg(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Ug(o))||(r.precision=i-2*("%"===r.type))}return zg(r)}function L_(t){var e=t.domain;return t.ticks=function(t){var n=e();return It(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return B_(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),s=0,a=o.length-1,c=o[s],l=o[a],d=10;for(l<c&&(i=c,c=l,l=i,i=s,s=a,a=i);d-- >0;){if((i=Bt(c,l,n))===r)return o[s]=c,o[a]=l,e(o);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function N_(){var t=I_();return t.copy=function(){return D_(t,N_())},f_.apply(t,arguments),L_(t)}function O_(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,v_),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return O_(t).unknown(e)},t=arguments.length?Array.from(t,v_):[0,1],L_(n)}function P_(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],s=t[i];return s<o&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function R_(t){return Math.log(t)}function z_(t){return Math.exp(t)}function F_(t){return-Math.log(-t)}function j_(t){return-Math.exp(-t)}function V_(t){return isFinite(t)?+("1e"+t):t<0?0:t}function $_(t){return 10===t?V_:t===Math.E?Math.exp:e=>Math.pow(t,e)}function H_(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function U_(t){return(e,n)=>-t(-e,n)}function W_(t){const e=t(R_,z_),n=e.domain;let r,i,o=10;function s(){return r=H_(o),i=$_(o),n()[0]<0?(r=U_(r),i=U_(i),t(F_,j_)):t(R_,z_),e}return e.base=function(t){return arguments.length?(o=+t,s()):o},e.domain=function(t){return arguments.length?(n(t),s()):n()},e.ticks=t=>{const e=n();let s=e[0],a=e[e.length-1];const c=a<s;c&&([s,a]=[a,s]);let l,d,u=r(s),h=r(a);const g=null==t?10:+t;let f=[];if(!(o%1)&&h-u<g){if(u=Math.floor(u),h=Math.ceil(h),s>0){for(;u<=h;++u)for(l=1;l<o;++l)if(d=u<0?l/i(-u):l*i(u),!(d<s)){if(d>a)break;f.push(d)}}else for(;u<=h;++u)for(l=o-1;l>=1;--l)if(d=u>0?l/i(-u):l*i(u),!(d<s)){if(d>a)break;f.push(d)}2*f.length<g&&(f=It(s,a,g))}else f=It(u,h,Math.min(h-u,g)).map(i);return c?f.reverse():f},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Mg(n)).precision||(n.trim=!0),n=zg(n)),t===1/0)return n;const s=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=s?n(t):""}},e.nice=()=>n(P_(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function q_(){const t=W_(M_()).domain([1,10]);return t.copy=()=>D_(t,q_()).base(t.base()),f_.apply(t,arguments),t}function Y_(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function G_(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Z_(t){var e=1,n=t(Y_(e),G_(e));return n.constant=function(n){return arguments.length?t(Y_(e=+n),G_(e)):e},L_(n)}function K_(){var t=Z_(M_());return t.copy=function(){return D_(t,K_()).constant(t.constant())},f_.apply(t,arguments)}function Q_(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function X_(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function J_(t){return t<0?-t*t:t*t}function tv(t){var e=t(C_,C_),n=1;function r(){return 1===n?t(C_,C_):.5===n?t(X_,J_):t(Q_(n),Q_(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},L_(e)}function ev(){var t=tv(M_());return t.copy=function(){return D_(t,ev()).exponent(t.exponent())},f_.apply(t,arguments),t}function nv(){return ev.apply(null,arguments).exponent(.5)}function rv(t){return Math.sign(t)*t*t}function iv(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ov(){var t,e=I_(),n=[0,1],r=!1;function i(n){var i=iv(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(rv(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,v_)).map(rv)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ov(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},f_.apply(i,arguments),L_(i)}function sv(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=Wt(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[N(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(C),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return sv().domain(e).range(n).unknown(t)},f_.apply(o,arguments)}function av(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function s(e){return null!=e&&e<=e?o[N(i,e,0,r)]:t}function a(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return s}return s.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,a()):[e,n]},s.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,a()):o.slice()},s.invertExtent=function(t){var s=o.indexOf(t);return s<0?[NaN,NaN]:s<1?[e,i[0]]:s>=r?[i[r-1],n]:[i[s-1],i[s]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return i.slice()},s.copy=function(){return av().domain([e,n]).range(o).unknown(t)},f_.apply(L_(s),arguments)}function cv(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[N(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return cv().domain(e).range(n).unknown(t)},f_.apply(i,arguments)}var lv=new Date,dv=new Date;function uv(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var s,a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=function(n){return uv((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return lv.setTime(+e),dv.setTime(+r),t(lv),t(dv),Math.floor(n(lv,dv))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var hv=uv((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));hv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?uv((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):hv:null};const gv=hv;var fv=hv.range;const pv=1e3,mv=60*pv,bv=60*mv,kv=24*bv,wv=7*kv,yv=30*kv,_v=365*kv;var vv=uv((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*pv)}),(function(t,e){return(e-t)/pv}),(function(t){return t.getUTCSeconds()}));const Av=vv;var Cv=vv.range,xv=uv((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*pv)}),(function(t,e){t.setTime(+t+e*mv)}),(function(t,e){return(e-t)/mv}),(function(t){return t.getMinutes()}));const Ev=xv;var Tv=xv.range,Sv=uv((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*pv-t.getMinutes()*mv)}),(function(t,e){t.setTime(+t+e*bv)}),(function(t,e){return(e-t)/bv}),(function(t){return t.getHours()}));const Dv=Sv;var Mv=Sv.range,Iv=uv((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*mv)/kv),(t=>t.getDate()-1));const Bv=Iv;var Lv=Iv.range;function Nv(t){return uv((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*mv)/wv}))}var Ov=Nv(0),Pv=Nv(1),Rv=Nv(2),zv=Nv(3),Fv=Nv(4),jv=Nv(5),Vv=Nv(6),$v=Ov.range,Hv=Pv.range,Uv=Rv.range,Wv=zv.range,qv=Fv.range,Yv=jv.range,Gv=Vv.range,Zv=uv((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const Kv=Zv;var Qv=Zv.range,Xv=uv((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Xv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?uv((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const Jv=Xv;var tA=Xv.range,eA=uv((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*mv)}),(function(t,e){return(e-t)/mv}),(function(t){return t.getUTCMinutes()}));const nA=eA;var rA=eA.range,iA=uv((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*bv)}),(function(t,e){return(e-t)/bv}),(function(t){return t.getUTCHours()}));const oA=iA;var sA=iA.range,aA=uv((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/kv}),(function(t){return t.getUTCDate()-1}));const cA=aA;var lA=aA.range;function dA(t){return uv((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/wv}))}var uA=dA(0),hA=dA(1),gA=dA(2),fA=dA(3),pA=dA(4),mA=dA(5),bA=dA(6),kA=uA.range,wA=hA.range,yA=gA.range,_A=fA.range,vA=pA.range,AA=mA.range,CA=bA.range,xA=uv((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const EA=xA;var TA=xA.range,SA=uv((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));SA.every=function(t){return isFinite(t=Math.floor(t))&&t>0?uv((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const DA=SA;var MA=SA.range;function IA(t,e,n,r,i,o){const s=[[Av,1,pv],[Av,5,5*pv],[Av,15,15*pv],[Av,30,30*pv],[o,1,mv],[o,5,5*mv],[o,15,15*mv],[o,30,30*mv],[i,1,bv],[i,3,3*bv],[i,6,6*bv],[i,12,12*bv],[r,1,kv],[r,2,2*kv],[n,1,wv],[e,1,yv],[e,3,3*yv],[t,1,_v]];function a(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:c(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o}function c(e,n,r){const i=Math.abs(n-e)/r,o=E((([,,t])=>t)).right(s,i);if(o===s.length)return t.every(Lt(e/_v,n/_v,r));if(0===o)return gv.every(Math.max(Lt(e,n,r),1));const[a,c]=s[i/s[o-1][2]<s[o][2]/i?o-1:o];return a.every(c)}return[a,c]}const[BA,LA]=IA(DA,EA,uA,cA,oA,nA),[NA,OA]=IA(Jv,Kv,Ov,Bv,Dv,Ev);function PA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function RA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zA(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function FA(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,c=t.shortMonths,l=QA(i),d=XA(i),u=QA(o),h=XA(o),g=QA(s),f=XA(s),p=QA(a),m=XA(a),b=QA(c),k=XA(c),w={a:L,A:N,b:O,B:P,c:null,d:wC,e:wC,f:CC,g:OC,G:RC,H:yC,I:_C,j:vC,L:AC,m:xC,M:EC,p:R,q:z,Q:sx,s:ax,S:TC,u:SC,U:DC,V:IC,w:BC,W:LC,x:null,X:null,y:NC,Y:PC,Z:zC,"%":ox},y={a:F,A:j,b:V,B:$,c:null,d:FC,e:FC,f:UC,g:ex,G:rx,H:jC,I:VC,j:$C,L:HC,m:WC,M:qC,p:H,q:U,Q:sx,s:ax,S:YC,u:GC,U:ZC,V:QC,w:XC,W:JC,x:null,X:null,y:tx,Y:nx,Z:ix,"%":ox},_={a:E,A:T,b:S,B:D,c:M,d:lC,e:lC,f:pC,g:oC,G:iC,H:uC,I:uC,j:dC,L:fC,m:cC,M:hC,p:x,q:aC,Q:bC,s:kC,S:gC,u:tC,U:eC,V:nC,w:JA,W:rC,x:I,X:B,y:oC,Y:iC,Z:sC,"%":mC};function v(t,e){return function(n){var r,i,o,s=[],a=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++a<l;)37===t.charCodeAt(a)&&(s.push(t.slice(c,a)),null!=(i=WA[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),c=a+1);return s.push(t.slice(c,a)),s.join("")}}function A(t,e){return function(n){var r,i,o=zA(1900,void 0,1);if(C(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=RA(zA(o.y,0,1))).getUTCDay(),r=i>4||0===i?hA.ceil(r):hA(r),r=cA.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=PA(zA(o.y,0,1))).getDay(),r=i>4||0===i?Pv.ceil(r):Pv(r),r=Bv.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?RA(zA(o.y,0,1)).getUTCDay():PA(zA(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,RA(o)):PA(o)}}function C(t,e,n,r){for(var i,o,s=0,a=e.length,c=n.length;s<a;){if(r>=c)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=_[i in WA?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function x(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=d.get(r[0].toLowerCase()),n+r[0].length):-1}function E(t,e,n){var r=g.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1}function T(t,e,n){var r=u.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1}function S(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function D(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1}function M(t,n,r){return C(t,e,n,r)}function I(t,e,r){return C(t,n,e,r)}function B(t,e,n){return C(t,r,e,n)}function L(t){return s[t.getDay()]}function N(t){return o[t.getDay()]}function O(t){return c[t.getMonth()]}function P(t){return a[t.getMonth()]}function R(t){return i[+(t.getHours()>=12)]}function z(t){return 1+~~(t.getMonth()/3)}function F(t){return s[t.getUTCDay()]}function j(t){return o[t.getUTCDay()]}function V(t){return c[t.getUTCMonth()]}function $(t){return a[t.getUTCMonth()]}function H(t){return i[+(t.getUTCHours()>=12)]}function U(t){return 1+~~(t.getUTCMonth()/3)}return w.x=v(n,w),w.X=v(r,w),w.c=v(e,w),y.x=v(n,y),y.X=v(r,y),y.c=v(e,y),{format:function(t){var e=v(t+="",w);return e.toString=function(){return t},e},parse:function(t){var e=A(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=v(t+="",y);return e.toString=function(){return t},e},utcParse:function(t){var e=A(t+="",!0);return e.toString=function(){return t},e}}}var jA,VA,$A,HA,UA,WA={"-":"",_:" ",0:"0"},qA=/^\s*\d+/,YA=/^%/,GA=/[\\^$*+?|[\]().{}]/g;function ZA(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function KA(t){return t.replace(GA,"\\$&")}function QA(t){return new RegExp("^(?:"+t.map(KA).join("|")+")","i")}function XA(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function JA(t,e,n){var r=qA.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function tC(t,e,n){var r=qA.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function eC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function iC(t,e,n){var r=qA.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function oC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sC(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function aC(t,e,n){var r=qA.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function cC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dC(t,e,n){var r=qA.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function uC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function gC(t,e,n){var r=qA.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function fC(t,e,n){var r=qA.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function pC(t,e,n){var r=qA.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mC(t,e,n){var r=YA.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bC(t,e,n){var r=qA.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kC(t,e,n){var r=qA.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function wC(t,e){return ZA(t.getDate(),e,2)}function yC(t,e){return ZA(t.getHours(),e,2)}function _C(t,e){return ZA(t.getHours()%12||12,e,2)}function vC(t,e){return ZA(1+Bv.count(Jv(t),t),e,3)}function AC(t,e){return ZA(t.getMilliseconds(),e,3)}function CC(t,e){return AC(t,e)+"000"}function xC(t,e){return ZA(t.getMonth()+1,e,2)}function EC(t,e){return ZA(t.getMinutes(),e,2)}function TC(t,e){return ZA(t.getSeconds(),e,2)}function SC(t){var e=t.getDay();return 0===e?7:e}function DC(t,e){return ZA(Ov.count(Jv(t)-1,t),e,2)}function MC(t){var e=t.getDay();return e>=4||0===e?Fv(t):Fv.ceil(t)}function IC(t,e){return t=MC(t),ZA(Fv.count(Jv(t),t)+(4===Jv(t).getDay()),e,2)}function BC(t){return t.getDay()}function LC(t,e){return ZA(Pv.count(Jv(t)-1,t),e,2)}function NC(t,e){return ZA(t.getFullYear()%100,e,2)}function OC(t,e){return ZA((t=MC(t)).getFullYear()%100,e,2)}function PC(t,e){return ZA(t.getFullYear()%1e4,e,4)}function RC(t,e){var n=t.getDay();return ZA((t=n>=4||0===n?Fv(t):Fv.ceil(t)).getFullYear()%1e4,e,4)}function zC(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ZA(e/60|0,"0",2)+ZA(e%60,"0",2)}function FC(t,e){return ZA(t.getUTCDate(),e,2)}function jC(t,e){return ZA(t.getUTCHours(),e,2)}function VC(t,e){return ZA(t.getUTCHours()%12||12,e,2)}function $C(t,e){return ZA(1+cA.count(DA(t),t),e,3)}function HC(t,e){return ZA(t.getUTCMilliseconds(),e,3)}function UC(t,e){return HC(t,e)+"000"}function WC(t,e){return ZA(t.getUTCMonth()+1,e,2)}function qC(t,e){return ZA(t.getUTCMinutes(),e,2)}function YC(t,e){return ZA(t.getUTCSeconds(),e,2)}function GC(t){var e=t.getUTCDay();return 0===e?7:e}function ZC(t,e){return ZA(uA.count(DA(t)-1,t),e,2)}function KC(t){var e=t.getUTCDay();return e>=4||0===e?pA(t):pA.ceil(t)}function QC(t,e){return t=KC(t),ZA(pA.count(DA(t),t)+(4===DA(t).getUTCDay()),e,2)}function XC(t){return t.getUTCDay()}function JC(t,e){return ZA(hA.count(DA(t)-1,t),e,2)}function tx(t,e){return ZA(t.getUTCFullYear()%100,e,2)}function ex(t,e){return ZA((t=KC(t)).getUTCFullYear()%100,e,2)}function nx(t,e){return ZA(t.getUTCFullYear()%1e4,e,4)}function rx(t,e){var n=t.getUTCDay();return ZA((t=n>=4||0===n?pA(t):pA.ceil(t)).getUTCFullYear()%1e4,e,4)}function ix(){return"+0000"}function ox(){return"%"}function sx(t){return+t}function ax(t){return Math.floor(+t/1e3)}function cx(t){return jA=FA(t),VA=jA.format,$A=jA.parse,HA=jA.utcFormat,UA=jA.utcParse,jA}cx({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var lx="%Y-%m-%dT%H:%M:%S.%LZ";function dx(t){return t.toISOString()}const ux=Date.prototype.toISOString?dx:HA(lx);function hx(t){var e=new Date(t);return isNaN(e)?null:e}const gx=+new Date("2000-01-01T00:00:00.000Z")?hx:UA(lx);function fx(t){return new Date(t)}function px(t){return t instanceof Date?+t:+new Date(+t)}function mx(t,e,n,r,i,o,s,a,c,l){var d=I_(),u=d.invert,h=d.domain,g=l(".%L"),f=l(":%S"),p=l("%I:%M"),m=l("%I %p"),b=l("%a %d"),k=l("%b %d"),w=l("%B"),y=l("%Y");function _(t){return(c(t)<t?g:a(t)<t?f:s(t)<t?p:o(t)<t?m:r(t)<t?i(t)<t?b:k:n(t)<t?w:y)(t)}return d.invert=function(t){return new Date(u(t))},d.domain=function(t){return arguments.length?h(Array.from(t,px)):h().map(fx)},d.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},d.tickFormat=function(t,e){return null==e?_:l(e)},d.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(P_(n,t)):d},d.copy=function(){return D_(d,mx(t,e,n,r,i,o,s,a,c,l))},d}function bx(){return f_.apply(mx(NA,OA,Jv,Kv,Ov,Bv,Dv,Ev,Av,VA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kx(){return f_.apply(mx(BA,LA,DA,EA,uA,cA,oA,nA,Av,HA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wx(){var t,e,n,r,i,o=0,s=1,a=C_,c=!1;function l(e){return null==e||isNaN(e=+e)?i:a(0===n?.5:(e=(r(e)-t)*n,c?Math.max(0,Math.min(1,e)):e))}function d(t){return function(e){var n,r;return arguments.length?([n,r]=e,a=t(n,r),l):[a(0),a(1)]}}return l.domain=function(i){return arguments.length?([o,s]=i,t=r(o=+o),e=r(s=+s),n=t===e?0:1/(e-t),l):[o,s]},l.clamp=function(t){return arguments.length?(c=!!t,l):c},l.interpolator=function(t){return arguments.length?(a=t,l):a},l.range=d(ds),l.rangeRound=d(gs),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(s),n=t===e?0:1/(e-t),l}}function yx(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _x(){var t=L_(wx()(C_));return t.copy=function(){return yx(t,_x())},p_.apply(t,arguments)}function vx(){var t=W_(wx()).domain([1,10]);return t.copy=function(){return yx(t,vx()).base(t.base())},p_.apply(t,arguments)}function Ax(){var t=Z_(wx());return t.copy=function(){return yx(t,Ax()).constant(t.constant())},p_.apply(t,arguments)}function Cx(){var t=tv(wx());return t.copy=function(){return yx(t,Cx()).exponent(t.exponent())},p_.apply(t,arguments)}function xx(){return Cx.apply(null,arguments).exponent(.5)}function Ex(){var t=[],e=C_;function n(n){if(null!=n&&!isNaN(n=+n))return e((N(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(C),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>Ut(t,r/e)))},n.copy=function(){return Ex(e).domain(t)},p_.apply(n,arguments)}function Tx(){var t,e,n,r,i,o,s,a=0,c=.5,l=1,d=1,u=C_,h=!1;function g(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-e)*(d*t<d*e?r:i),u(h?Math.max(0,Math.min(1,t)):t))}function f(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,u=zs(t,[n,r,i]),g):[u(0),u(.5),u(1)]}}return g.domain=function(s){return arguments.length?([a,c,l]=s,t=o(a=+a),e=o(c=+c),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),d=e<t?-1:1,g):[a,c,l]},g.clamp=function(t){return arguments.length?(h=!!t,g):h},g.interpolator=function(t){return arguments.length?(u=t,g):u},g.range=f(ds),g.rangeRound=f(gs),g.unknown=function(t){return arguments.length?(s=t,g):s},function(s){return o=s,t=s(a),e=s(c),n=s(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),d=e<t?-1:1,g}}function Sx(){var t=L_(Tx()(C_));return t.copy=function(){return yx(t,Sx())},p_.apply(t,arguments)}function Dx(){var t=W_(Tx()).domain([.1,1,10]);return t.copy=function(){return yx(t,Dx()).base(t.base())},p_.apply(t,arguments)}function Mx(){var t=Z_(Tx());return t.copy=function(){return yx(t,Mx()).constant(t.constant())},p_.apply(t,arguments)}function Ix(){var t=tv(Tx());return t.copy=function(){return yx(t,Ix()).exponent(t.exponent())},p_.apply(t,arguments)}function Bx(){return Ix.apply(null,arguments).exponent(.5)}function Lx(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}const Nx=Lx("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ox=Lx("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Px=Lx("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Rx=Lx("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),zx=Lx("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Fx=Lx("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),jx=Lx("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Vx=Lx("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),$x=Lx("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Hx=Lx("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ux=t=>Ko(t[t.length-1]);var Wx=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Lx);const qx=Ux(Wx);var Yx=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Lx);const Gx=Ux(Yx);var Zx=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Lx);const Kx=Ux(Zx);var Qx=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Lx);const Xx=Ux(Qx);var Jx=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Lx);const tE=Ux(Jx);var eE=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Lx);const nE=Ux(eE);var rE=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Lx);const iE=Ux(rE);var oE=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Lx);const sE=Ux(oE);var aE=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Lx);const cE=Ux(aE);var lE=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Lx);const dE=Ux(lE);var uE=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Lx);const hE=Ux(uE);var gE=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Lx);const fE=Ux(gE);var pE=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Lx);const mE=Ux(pE);var bE=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Lx);const kE=Ux(bE);var wE=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Lx);const yE=Ux(wE);var _E=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Lx);const vE=Ux(_E);var AE=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Lx);const CE=Ux(AE);var xE=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Lx);const EE=Ux(xE);var TE=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Lx);const SE=Ux(TE);var DE=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Lx);const ME=Ux(DE);var IE=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Lx);const BE=Ux(IE);var LE=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Lx);const NE=Ux(LE);var OE=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Lx);const PE=Ux(OE);var RE=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Lx);const zE=Ux(RE);var FE=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Lx);const jE=Ux(FE);var VE=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Lx);const $E=Ux(VE);var HE=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Lx);const UE=Ux(HE);function WE(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const qE=Rs(Ro(300,.5,0),Ro(-240,.5,1));var YE=Rs(Ro(-100,.75,.35),Ro(80,1.5,.8)),GE=Rs(Ro(260,.75,.35),Ro(80,1.5,.8)),ZE=Ro();function KE(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ZE.h=360*t-100,ZE.s=1.5-1.5*e,ZE.l=.8-.9*e,ZE+""}var QE=Hi(),XE=Math.PI/3,JE=2*Math.PI/3;function tT(t){var e;return t=(.5-t)*Math.PI,QE.r=255*(e=Math.sin(t))*e,QE.g=255*(e=Math.sin(t+XE))*e,QE.b=255*(e=Math.sin(t+JE))*e,QE+""}function eT(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function nT(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const rT=nT(Lx("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var iT=nT(Lx("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),oT=nT(Lx("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),sT=nT(Lx("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function aT(t){return function(){return t}}const cT=Math.abs,lT=Math.atan2,dT=Math.cos,uT=Math.max,hT=Math.min,gT=Math.sin,fT=Math.sqrt,pT=1e-12,mT=Math.PI,bT=mT/2,kT=2*mT;function wT(t){return t>1?0:t<-1?mT:Math.acos(t)}function yT(t){return t>=1?bT:t<=-1?-bT:Math.asin(t)}function _T(t){return t.innerRadius}function vT(t){return t.outerRadius}function AT(t){return t.startAngle}function CT(t){return t.endAngle}function xT(t){return t&&t.padAngle}function ET(t,e,n,r,i,o,s,a){var c=n-t,l=r-e,d=s-i,u=a-o,h=u*c-d*l;if(!(h*h<pT))return[t+(h=(d*(e-o)-u*(t-i))/h)*c,e+h*l]}function TT(t,e,n,r,i,o,s){var a=t-n,c=e-r,l=(s?o:-o)/fT(a*a+c*c),d=l*c,u=-l*a,h=t+d,g=e+u,f=n+d,p=r+u,m=(h+f)/2,b=(g+p)/2,k=f-h,w=p-g,y=k*k+w*w,_=i-o,v=h*p-f*g,A=(w<0?-1:1)*fT(uT(0,_*_*y-v*v)),C=(v*w-k*A)/y,x=(-v*k-w*A)/y,E=(v*w+k*A)/y,T=(-v*k+w*A)/y,S=C-m,D=x-b,M=E-m,I=T-b;return S*S+D*D>M*M+I*I&&(C=E,x=T),{cx:C,cy:x,x01:-d,y01:-u,x11:C*(i/_-1),y11:x*(i/_-1)}}function ST(){var t=_T,e=vT,n=aT(0),r=null,i=AT,o=CT,s=xT,a=null;function c(){var c,l,d=+t.apply(this,arguments),u=+e.apply(this,arguments),h=i.apply(this,arguments)-bT,g=o.apply(this,arguments)-bT,f=cT(g-h),p=g>h;if(a||(a=c=Cd()),u<d&&(l=u,u=d,d=l),u>pT)if(f>kT-pT)a.moveTo(u*dT(h),u*gT(h)),a.arc(0,0,u,h,g,!p),d>pT&&(a.moveTo(d*dT(g),d*gT(g)),a.arc(0,0,d,g,h,p));else{var m,b,k=h,w=g,y=h,_=g,v=f,A=f,C=s.apply(this,arguments)/2,x=C>pT&&(r?+r.apply(this,arguments):fT(d*d+u*u)),E=hT(cT(u-d)/2,+n.apply(this,arguments)),T=E,S=E;if(x>pT){var D=yT(x/d*gT(C)),M=yT(x/u*gT(C));(v-=2*D)>pT?(y+=D*=p?1:-1,_-=D):(v=0,y=_=(h+g)/2),(A-=2*M)>pT?(k+=M*=p?1:-1,w-=M):(A=0,k=w=(h+g)/2)}var I=u*dT(k),B=u*gT(k),L=d*dT(_),N=d*gT(_);if(E>pT){var O,P=u*dT(w),R=u*gT(w),z=d*dT(y),F=d*gT(y);if(f<mT&&(O=ET(I,B,z,F,P,R,L,N))){var j=I-O[0],V=B-O[1],$=P-O[0],H=R-O[1],U=1/gT(wT((j*$+V*H)/(fT(j*j+V*V)*fT($*$+H*H)))/2),W=fT(O[0]*O[0]+O[1]*O[1]);T=hT(E,(d-W)/(U-1)),S=hT(E,(u-W)/(U+1))}}A>pT?S>pT?(m=TT(z,F,I,B,u,S,p),b=TT(P,R,L,N,u,S,p),a.moveTo(m.cx+m.x01,m.cy+m.y01),S<E?a.arc(m.cx,m.cy,S,lT(m.y01,m.x01),lT(b.y01,b.x01),!p):(a.arc(m.cx,m.cy,S,lT(m.y01,m.x01),lT(m.y11,m.x11),!p),a.arc(0,0,u,lT(m.cy+m.y11,m.cx+m.x11),lT(b.cy+b.y11,b.cx+b.x11),!p),a.arc(b.cx,b.cy,S,lT(b.y11,b.x11),lT(b.y01,b.x01),!p))):(a.moveTo(I,B),a.arc(0,0,u,k,w,!p)):a.moveTo(I,B),d>pT&&v>pT?T>pT?(m=TT(L,N,P,R,d,-T,p),b=TT(I,B,z,F,d,-T,p),a.lineTo(m.cx+m.x01,m.cy+m.y01),T<E?a.arc(m.cx,m.cy,T,lT(m.y01,m.x01),lT(b.y01,b.x01),!p):(a.arc(m.cx,m.cy,T,lT(m.y01,m.x01),lT(m.y11,m.x11),!p),a.arc(0,0,d,lT(m.cy+m.y11,m.cx+m.x11),lT(b.cy+b.y11,b.cx+b.x11),p),a.arc(b.cx,b.cy,T,lT(b.y11,b.x11),lT(b.y01,b.x01),!p))):a.arc(0,0,d,_,y,p):a.lineTo(L,N)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-mT/2;return[dT(r)*n,gT(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:aT(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:aT(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:aT(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:aT(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:aT(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:aT(+t),c):o},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:aT(+t),c):s},c.context=function(t){return arguments.length?(a=null==t?null:t,c):a},c}var DT=Array.prototype.slice;function MT(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function IT(t){this._context=t}function BT(t){return new IT(t)}function LT(t){return t[0]}function NT(t){return t[1]}function OT(t,e){var n=aT(!0),r=null,i=BT,o=null;function s(s){var a,c,l,d=(s=MT(s)).length,u=!1;for(null==r&&(o=i(l=Cd())),a=0;a<=d;++a)!(a<d&&n(c=s[a],a,s))===u&&((u=!u)?o.lineStart():o.lineEnd()),u&&o.point(+t(c,a,s),+e(c,a,s));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?LT:aT(t),e="function"==typeof e?e:void 0===e?NT:aT(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:aT(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:aT(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:aT(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function PT(t,e,n){var r=null,i=aT(!0),o=null,s=BT,a=null;function c(c){var l,d,u,h,g,f=(c=MT(c)).length,p=!1,m=new Array(f),b=new Array(f);for(null==o&&(a=s(g=Cd())),l=0;l<=f;++l){if(!(l<f&&i(h=c[l],l,c))===p)if(p=!p)d=l,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),u=l-1;u>=d;--u)a.point(m[u],b[u]);a.lineEnd(),a.areaEnd()}p&&(m[l]=+t(h,l,c),b[l]=+e(h,l,c),a.point(r?+r(h,l,c):m[l],n?+n(h,l,c):b[l]))}if(g)return a=null,g+""||null}function l(){return OT().defined(i).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?LT:aT(+t),e="function"==typeof e?e:aT(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?NT:aT(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:aT(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:aT(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:aT(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:aT(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:aT(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:aT(+t),c):n},c.lineX0=c.lineY0=function(){return l().x(t).y(e)},c.lineY1=function(){return l().x(t).y(n)},c.lineX1=function(){return l().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:aT(!!t),c):i},c.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),c):s},c.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),c):o},c}function RT(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function zT(t){return t}function FT(){var t=zT,e=RT,n=null,r=aT(0),i=aT(kT),o=aT(0);function s(s){var a,c,l,d,u,h=(s=MT(s)).length,g=0,f=new Array(h),p=new Array(h),m=+r.apply(this,arguments),b=Math.min(kT,Math.max(-kT,i.apply(this,arguments)-m)),k=Math.min(Math.abs(b)/h,o.apply(this,arguments)),w=k*(b<0?-1:1);for(a=0;a<h;++a)(u=p[f[a]=a]=+t(s[a],a,s))>0&&(g+=u);for(null!=e?f.sort((function(t,n){return e(p[t],p[n])})):null!=n&&f.sort((function(t,e){return n(s[t],s[e])})),a=0,l=g?(b-h*w)/g:0;a<h;++a,m=d)c=f[a],d=m+((u=p[c])>0?u*l:0)+w,p[c]={data:s[c],index:a,value:u,startAngle:m,endAngle:d,padAngle:k};return p}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:aT(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:aT(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:aT(+t),s):i},s.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:aT(+t),s):o},s}IT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var jT=$T(BT);function VT(t){this._curve=t}function $T(t){function e(e){return new VT(t(e))}return e._curve=t,e}function HT(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e($T(t)):e()._curve},t}function UT(){return HT(OT().curve(jT))}function WT(){var t=PT().curve(jT),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return HT(n())},delete t.lineX0,t.lineEndAngle=function(){return HT(r())},delete t.lineX1,t.lineInnerRadius=function(){return HT(i())},delete t.lineY0,t.lineOuterRadius=function(){return HT(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e($T(t)):e()._curve},t}function qT(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}VT.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class YT{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class GT{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0==this._point++)this._x0=t,this._y0=e;else{const n=qT(this._x0,this._y0),r=qT(this._x0,this._y0=(this._y0+e)/2),i=qT(t,this._y0),o=qT(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}}}function ZT(t){return new YT(t,!0)}function KT(t){return new YT(t,!1)}function QT(t){return new GT(t)}function XT(t){return t.source}function JT(t){return t.target}function tS(t){let e=XT,n=JT,r=LT,i=NT,o=null,s=null;function a(){let a;const c=DT.call(arguments),l=e.apply(this,c),d=n.apply(this,c);if(null==o&&(s=t(a=Cd())),s.lineStart(),c[0]=l,s.point(+r.apply(this,c),+i.apply(this,c)),c[0]=d,s.point(+r.apply(this,c),+i.apply(this,c)),s.lineEnd(),a)return s=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:aT(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:aT(+t),a):i},a.context=function(e){return arguments.length?(null==e?o=s=null:s=t(o=e),a):o},a}function eS(){return tS(ZT)}function nS(){return tS(KT)}function rS(){const t=tS(QT);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const iS=fT(3),oS={draw(t,e){const n=.59436*fT(e+hT(e/28,.75)),r=n/2,i=r*iS;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},sS={draw(t,e){const n=fT(e/mT);t.moveTo(n,0),t.arc(0,0,n,0,kT)}},aS={draw(t,e){const n=fT(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},cS=fT(1/3),lS=2*cS,dS={draw(t,e){const n=fT(e/lS),r=n*cS;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},uS={draw(t,e){const n=.62625*fT(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},hS={draw(t,e){const n=.87559*fT(e-hT(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},gS={draw(t,e){const n=fT(e),r=-n/2;t.rect(r,r,n,n)}},fS={draw(t,e){const n=.4431*fT(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},pS=.8908130915292852,mS=gT(mT/10)/gT(7*mT/10),bS=gT(kT/10)*mS,kS=-dT(kT/10)*mS,wS={draw(t,e){const n=fT(e*pS),r=bS*n,i=kS*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=kT*e/5,s=dT(o),a=gT(o);t.lineTo(a*n,-s*n),t.lineTo(s*r-a*i,a*r+s*i)}t.closePath()}},yS=fT(3),_S={draw(t,e){const n=-fT(e/(3*yS));t.moveTo(0,2*n),t.lineTo(-yS*n,-n),t.lineTo(yS*n,-n),t.closePath()}},vS=fT(3),AS={draw(t,e){const n=.6824*fT(e),r=n/2,i=n*vS/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},CS=-.5,xS=fT(3)/2,ES=1/fT(12),TS=3*(ES/2+1),SS={draw(t,e){const n=fT(e/TS),r=n/2,i=n*ES,o=r,s=n*ES+n,a=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,c),t.lineTo(CS*r-xS*i,xS*r+CS*i),t.lineTo(CS*o-xS*s,xS*o+CS*s),t.lineTo(CS*a-xS*c,xS*a+CS*c),t.lineTo(CS*r+xS*i,CS*i-xS*r),t.lineTo(CS*o+xS*s,CS*s-xS*o),t.lineTo(CS*a+xS*c,CS*c-xS*a),t.closePath()}},DS={draw(t,e){const n=.6189*fT(e-hT(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},MS=[sS,aS,dS,gS,wS,_S,SS],IS=[sS,hS,DS,AS,oS,fS,uS];function BS(t,e){let n=null;function r(){let r;if(n||(n=r=Cd()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:aT(t||sS),e="function"==typeof e?e:aT(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"==typeof e?e:aT(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:aT(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function LS(){}function NS(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function OS(t){this._context=t}function PS(t){return new OS(t)}function RS(t){this._context=t}function zS(t){return new RS(t)}function FS(t){this._context=t}function jS(t){return new FS(t)}function VS(t,e){this._basis=new OS(t),this._beta=e}OS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:NS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:NS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},RS.prototype={areaStart:LS,areaEnd:LS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:NS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},FS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:NS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},VS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],s=t[n]-i,a=e[n]-o,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*s),this._beta*e[c]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const $S=function t(e){function n(t){return 1===e?new OS(t):new VS(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function HS(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function US(t,e){this._context=t,this._k=(1-e)/6}US.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HS(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:HS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const WS=function t(e){function n(t){return new US(t,e)}return n.tension=function(e){return t(+e)},n}(0);function qS(t,e){this._context=t,this._k=(1-e)/6}qS.prototype={areaStart:LS,areaEnd:LS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:HS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const YS=function t(e){function n(t){return new qS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function GS(t,e){this._context=t,this._k=(1-e)/6}GS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ZS=function t(e){function n(t){return new GS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function KS(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>pT){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>pT){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/d,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function QS(t,e){this._context=t,this._alpha=e}QS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:KS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const XS=function t(e){function n(t){return e?new QS(t,e):new US(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function JS(t,e){this._context=t,this._alpha=e}JS.prototype={areaStart:LS,areaEnd:LS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:KS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tD=function t(e){function n(t){return e?new JS(t,e):new qS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function eD(t,e){this._context=t,this._alpha=e}eD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const nD=function t(e){function n(t){return e?new eD(t,e):new GS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function rD(t){this._context=t}function iD(t){return new rD(t)}function oD(t){return t<0?-1:1}function sD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(oD(o)+oD(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function aD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cD(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function lD(t){this._context=t}function dD(t){this._context=new uD(t)}function uD(t){this._context=t}function hD(t){return new lD(t)}function gD(t){return new dD(t)}function fD(t){this._context=t}function pD(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),s=new Array(r);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function mD(t){return new fD(t)}function bD(t,e){this._context=t,this._t=e}function kD(t){return new bD(t,.5)}function wD(t){return new bD(t,0)}function yD(t){return new bD(t,1)}function _D(t,e){if((i=t.length)>1)for(var n,r,i,o=1,s=t[e[0]],a=s.length;o<i;++o)for(r=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function vD(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function AD(t,e){return t[e]}function CD(t){const e=[];return e.key=t,e}function xD(){var t=aT([]),e=vD,n=_D,r=AD;function i(i){var o,s,a=Array.from(t.apply(this,arguments),CD),c=a.length,l=-1;for(const t of i)for(o=0,++l;o<c;++o)(a[o][l]=[0,+r(t,a[o].key,l,i)]).data=t;for(o=0,s=MT(e(a));o<c;++o)a[s[o]].index=o;return n(a,s),a}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:aT(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:aT(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?vD:"function"==typeof t?t:aT(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?_D:t,i):n},i}function ED(t,e){if((r=t.length)>0){for(var n,r,i,o=0,s=t[0].length;o<s;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}_D(t,e)}}function TD(t,e){if((a=t.length)>0)for(var n,r,i,o,s,a,c=0,l=t[e[0]].length;c<l;++c)for(o=s=0,n=0;n<a;++n)(i=(r=t[e[n]][c])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=s,r[0]=s+=i):(r[0]=0,r[1]=i)}function SD(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var s=0,a=0;s<n;++s)a+=t[s][r][1]||0;i[r][1]+=i[r][0]=-a/2}_D(t,e)}}function DD(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,s=1;s<r;++s){for(var a=0,c=0,l=0;a<i;++a){for(var d=t[e[a]],u=d[s][1]||0,h=(u-(d[s-1][1]||0))/2,g=0;g<a;++g){var f=t[e[g]];h+=(f[s][1]||0)-(f[s-1][1]||0)}c+=u,l+=h*u}n[s-1][1]+=n[s-1][0]=o,c&&(o-=l/c)}n[s-1][1]+=n[s-1][0]=o,_D(t,e)}}function MD(t){var e=t.map(ID);return vD(t).sort((function(t,n){return e[t]-e[n]}))}function ID(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function BD(t){var e=t.map(LD);return vD(t).sort((function(t,n){return e[t]-e[n]}))}function LD(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function ND(t){return BD(t).reverse()}function OD(t){var e,n,r=t.length,i=t.map(LD),o=MD(t),s=0,a=0,c=[],l=[];for(e=0;e<r;++e)n=o[e],s<a?(s+=i[n],c.push(n)):(a+=i[n],l.push(n));return l.reverse().concat(c)}function PD(t){return vD(t).reverse()}rD.prototype={areaStart:LS,areaEnd:LS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},lD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cD(this,this._t0,aD(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cD(this,aD(this,n=sD(this,t,e)),n);break;default:cD(this,this._t0,n=sD(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(dD.prototype=Object.create(lD.prototype)).point=function(t,e){lD.prototype.point.call(this,e,t)},uD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},fD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=pD(t),i=pD(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},bD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};const RD=t=>()=>t;function zD(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function FD(t,e,n){this.k=t,this.x=e,this.y=n}FD.prototype={constructor:FD,scale:function(t){return 1===t?this:new FD(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new FD(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jD=new FD(1,0,0);function VD(t){for(;!t.__zoom;)if(!(t=t.parentNode))return jD;return t.__zoom}function $D(t){t.stopImmediatePropagation()}function HD(t){t.preventDefault(),t.stopImmediatePropagation()}function UD(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function WD(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function qD(){return this.__zoom||jD}function YD(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function GD(){return navigator.maxTouchPoints||"ontouchstart"in this}function ZD(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function KD(){var t,e,n,r=UD,i=WD,o=ZD,s=YD,a=GD,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],d=250,u=Ts,h=qe("start","zoom","end"),g=500,f=150,p=0,m=10;function b(t){t.property("__zoom",qD).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function k(t,e){return(e=Math.max(c[0],Math.min(c[1],e)))===t.k?t:new FD(e,t.x,t.y)}function w(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new FD(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n,r){t.on("start.zoom",(function(){v(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){v(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,s=v(t,o).event(r),a=i.apply(t,o),c=null==n?y(a):"function"==typeof n?n.apply(t,o):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),d=t.__zoom,h="function"==typeof e?e.apply(t,o):e,g=u(d.invert(c).concat(l/d.k),h.invert(c).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=g(t),n=l/e[2];t=new FD(n,c[0]-e[0]*n,c[1]-e[1]*n)}s.zoom(null,t)}}))}function v(t,e,n){return!n&&t.__zooming||new A(t,e)}function A(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function C(t,...e){if(r.apply(this,arguments)){var n=v(this,e).event(t),i=this.__zoom,a=Math.max(c[0],Math.min(c[1],i.k*Math.pow(2,s.apply(this,arguments)))),d=ri(t);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=i.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[d,i.invert(d)],va(this),n.start()}HD(t),n.wheel=setTimeout(u,f),n.zoom("mouse",o(w(k(i,a),n.mouse[0],n.mouse[1]),n.extent,l))}function u(){n.wheel=null,n.end()}}function x(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,s=v(this,e,!0).event(t),a=Qr(t.view).on("mousemove.zoom",h,!0).on("mouseup.zoom",g,!0),c=ri(t,i),d=t.clientX,u=t.clientY;di(t.view),$D(t),s.mouse=[c,this.__zoom.invert(c)],va(this),s.start()}function h(t){if(HD(t),!s.moved){var e=t.clientX-d,n=t.clientY-u;s.moved=e*e+n*n>p}s.event(t).zoom("mouse",o(w(s.that.__zoom,s.mouse[0]=ri(t,i),s.mouse[1]),s.extent,l))}function g(t){a.on("mousemove.zoom mouseup.zoom",null),ui(t.view,s.moved),HD(t),s.event(t).end()}}function E(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,s=ri(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),c=n.k*(t.shiftKey?.5:2),u=o(w(k(n,c),s,a),i.apply(this,e),l);HD(t),d>0?Qr(this).transition().duration(d).call(_,u,s,t):Qr(this).call(b.transform,u,s,t)}}function T(n,...i){if(r.apply(this,arguments)){var o,s,a,c,l=n.touches,d=l.length,u=v(this,i,n.changedTouches.length===d).event(n);for($D(n),s=0;s<d;++s)c=[c=ri(a=l[s],this),this.__zoom.invert(c),a.identifier],u.touch0?u.touch1||u.touch0[2]===c[2]||(u.touch1=c,u.taps=0):(u.touch0=c,o=!0,u.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(u.taps<2&&(e=c[0],t=setTimeout((function(){t=null}),g)),va(this),u.start())}}function S(t,...e){if(this.__zooming){var n,r,i,s,a=v(this,e).event(t),c=t.changedTouches,d=c.length;for(HD(t),n=0;n<d;++n)i=ri(r=c[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var u=a.touch0[0],h=a.touch0[1],g=a.touch1[0],f=a.touch1[1],p=(p=g[0]-u[0])*p+(p=g[1]-u[1])*p,m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m;r=k(r,Math.sqrt(p/m)),i=[(u[0]+g[0])/2,(u[1]+g[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(w(r,i,s),a.extent,l))}}function D(t,...r){if(this.__zooming){var i,o,s=v(this,r).event(t),a=t.changedTouches,c=a.length;for($D(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),g),i=0;i<c;++i)o=a[i],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=ri(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<m)){var l=Qr(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return b.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",qD),t!==i?_(t,e,n,r):i.interrupt().each((function(){v(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},b.scaleBy=function(t,e,n,r){b.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},b.scaleTo=function(t,e,n,r){b.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,s=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),c="function"==typeof e?e.apply(this,arguments):e;return o(w(k(r,c),s,a),t,l)}),n,r)},b.translateBy=function(t,e,n,r){b.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}),null,r)},b.translateTo=function(t,e,n,r,s){b.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==r?y(t):"function"==typeof r?r.apply(this,arguments):r;return o(jD.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),r,s)},A.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Qr(this.that).datum();h.call(t,this.that,new zD(t,{sourceEvent:this.sourceEvent,target:b,type:t,transform:this.that.__zoom,dispatch:h}),e)}},b.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:RD(+t),b):s},b.filter=function(t){return arguments.length?(r="function"==typeof t?t:RD(!!t),b):r},b.touchable=function(t){return arguments.length?(a="function"==typeof t?t:RD(!!t),b):a},b.extent=function(t){return arguments.length?(i="function"==typeof t?t:RD([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),b):i},b.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],b):[c[0],c[1]]},b.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],b):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},b.constrain=function(t){return arguments.length?(o=t,b):o},b.duration=function(t){return arguments.length?(d=+t,b):d},b.interpolate=function(t){return arguments.length?(u=t,b):u},b.on=function(){var t=h.on.apply(h,arguments);return t===h?b:t},b.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,b):Math.sqrt(p)},b.tapDistance=function(t){return arguments.length?(m=+t,b):m},b}VD.prototype=FD.prototype;const QD=Object.freeze(Object.defineProperty({__proto__:null,bisect:N,bisectRight:I,bisectLeft:B,bisectCenter:L,ascending:C,bisector:E,blur:O,blur2:P,blurImage:R,count:U,cross:Z,cumsum:K,descending:x,deviation:X,extent:J,Adder:tt,fsum:et,fcumsum:nt,group:dt,flatGroup:gt,flatRollup:ft,groups:ut,index:bt,indexes:kt,rollup:pt,rollups:mt,groupSort:xt,bin:Pt,histogram:Pt,thresholdFreedmanDiaconis:Yt,thresholdScott:Gt,thresholdSturges:Ot,max:Rt,maxIndex:zt,mean:Zt,median:Kt,medianIndex:Qt,merge:Jt,min:Ft,minIndex:jt,mode:te,nice:Nt,pairs:ee,permute:_t,quantile:Ut,quantileIndex:qt,quantileSorted:Wt,quickselect:Vt,range:re,rank:ie,least:oe,leastIndex:se,greatest:Ht,greatestIndex:ae,scan:ce,shuffle:le,shuffler:de,sum:ue,ticks:It,tickIncrement:Bt,tickStep:Lt,transpose:he,variance:Q,zip:fe,every:pe,some:me,filter:be,map:ke,reduce:we,reverse:ye,sort:vt,difference:_e,disjoint:ve,intersection:Ae,subset:Te,superset:xe,union:Se,InternMap:rt,InternSet:it,axisTop:Ve,axisRight:$e,axisBottom:He,axisLeft:Ue,brush:rd,brushX:ed,brushY:nd,brushSelection:td,chord:pd,chordTranspose:md,chordDirected:bd,ribbon:Od,ribbonArrow:Pd,color:Fi,rgb:Hi,hsl:Ji,lab:bo,hcl:xo,lch:Co,gray:mo,cubehelix:Ro,contours:Gd,contourDensity:Xd,Delaunay:Ru,Voronoi:Mu,dispatch:qe,drag:ki,dragDisable:di,dragEnable:ui,dsvFormat:Qu,csvParse:Ju,csvParseRows:th,csvFormat:eh,csvFormatBody:nh,csvFormatRows:rh,csvFormatRow:ih,csvFormatValue:oh,tsvParse:ah,tsvParseRows:ch,tsvFormat:lh,tsvFormatBody:dh,tsvFormatRows:uh,tsvFormatRow:hh,tsvFormatValue:gh,autoType:fh,easeLinear:Mc,easeQuad:Lc,easeQuadIn:Ic,easeQuadOut:Bc,easeQuadInOut:Lc,easeCubic:Pc,easeCubicIn:Nc,easeCubicOut:Oc,easeCubicInOut:Pc,easePoly:jc,easePolyIn:zc,easePolyOut:Fc,easePolyInOut:jc,easeSin:Wc,easeSinIn:Hc,easeSinOut:Uc,easeSinInOut:Wc,easeExp:Zc,easeExpIn:Yc,easeExpOut:Gc,easeExpInOut:Zc,easeCircle:Xc,easeCircleIn:Kc,easeCircleOut:Qc,easeCircleInOut:Xc,easeBounce:dl,easeBounceIn:ll,easeBounceOut:dl,easeBounceInOut:ul,easeBack:pl,easeBackIn:gl,easeBackOut:fl,easeBackInOut:pl,easeElastic:yl,easeElasticIn:wl,easeElasticOut:yl,easeElasticInOut:_l,blob:bh,buffer:wh,dsv:Ah,csv:Ch,tsv:xh,image:Eh,json:Sh,text:_h,xml:Mh,html:Ih,svg:Bh,forceCenter:Lh,forceCollide:sg,forceLink:lg,forceManyBody:wg,forceRadial:yg,forceSimulation:kg,forceX:_g,forceY:vg,formatDefaultLocale:Hg,get format(){return zg},get formatPrefix(){return Fg},formatLocale:$g,formatSpecifier:Mg,FormatSpecifier:Ig,precisionFixed:Ug,precisionPrefix:Wg,precisionRound:qg,geoArea:Gf,geoBounds:Dp,geoCentroid:Vp,geoCircle:Xp,geoClipAntimeridian:lm,geoClipCircle:gm,geoClipExtent:vm,geoClipRectangle:_m,geoContains:jm,geoDistance:Im,geoGraticule:Hm,geoGraticule10:Um,geoInterpolate:Wm,geoLength:Sm,geoPath:Gb,geoAlbers:kk,geoAlbersUsa:yk,geoAzimuthalEqualArea:Ck,geoAzimuthalEqualAreaRaw:Ak,geoAzimuthalEquidistant:Ek,geoAzimuthalEquidistantRaw:xk,geoConicConformal:Bk,geoConicConformalRaw:Ik,geoConicEqualArea:bk,geoConicEqualAreaRaw:mk,geoConicEquidistant:Pk,geoConicEquidistantRaw:Ok,geoEqualEarth:Uk,geoEqualEarthRaw:Hk,geoEquirectangular:Nk,geoEquirectangularRaw:Lk,geoGnomonic:qk,geoGnomonicRaw:Wk,geoIdentity:Yk,geoProjection:hk,geoProjectionMutator:gk,geoMercator:Sk,geoMercatorRaw:Tk,geoNaturalEarth1:Zk,geoNaturalEarth1Raw:Gk,geoOrthographic:Qk,geoOrthographicRaw:Kk,geoStereographic:Jk,geoStereographicRaw:Xk,geoTransverseMercator:ew,geoTransverseMercatorRaw:tw,geoRotation:Zp,geoStream:Cf,geoTransform:Zb,cluster:lw,hierarchy:xw,Node:Iw,pack:oy,packSiblings:ry,packEnclose:$w,partition:uy,stratify:by,tree:Dy,treemap:Ny,treemapBinary:Oy,treemapDice:dy,treemapSlice:My,treemapSliceDice:Py,treemapSquarify:Ly,treemapResquarify:Ry,interpolate:ds,interpolateArray:ts,interpolateBasis:jo,interpolateBasisClosed:Vo,interpolateDate:ns,interpolateDiscrete:us,interpolateHue:hs,interpolateNumber:rs,interpolateNumberArray:Xo,interpolateObject:is,interpolateRound:gs,interpolateString:ls,interpolateTransformCss:_s,interpolateTransformSvg:vs,interpolateZoom:Ts,interpolateRgb:Go,interpolateRgbBasis:Ko,interpolateRgbBasisClosed:Qo,interpolateHsl:Ds,interpolateHslLong:Ms,interpolateLab:Is,interpolateHcl:Ls,interpolateHclLong:Ns,interpolateCubehelix:Ps,interpolateCubehelixLong:Rs,piecewise:zs,quantize:Fs,path:Cd,polygonArea:zy,polygonCentroid:Fy,polygonHull:Hy,polygonContains:Uy,polygonLength:Wy,quadtree:Xh,randomUniform:Yy,randomInt:Gy,randomNormal:Zy,randomLogNormal:Ky,randomBates:Xy,randomIrwinHall:Qy,randomExponential:Jy,randomPareto:t_,randomBernoulli:e_,randomGeometric:n_,randomBinomial:o_,randomGamma:r_,randomBeta:i_,randomWeibull:s_,randomCauchy:a_,randomLogistic:c_,randomPoisson:l_,randomLcg:g_,scaleBand:k_,scalePoint:y_,scaleIdentity:O_,scaleLinear:N_,scaleLog:q_,scaleSymlog:K_,scaleOrdinal:b_,scaleImplicit:m_,scalePow:ev,scaleSqrt:nv,scaleRadial:ov,scaleQuantile:sv,scaleQuantize:av,scaleThreshold:cv,scaleTime:bx,scaleUtc:kx,scaleSequential:_x,scaleSequentialLog:vx,scaleSequentialPow:Cx,scaleSequentialSqrt:xx,scaleSequentialSymlog:Ax,scaleSequentialQuantile:Ex,scaleDiverging:Sx,scaleDivergingLog:Dx,scaleDivergingPow:Ix,scaleDivergingSqrt:Bx,scaleDivergingSymlog:Mx,tickFormat:B_,schemeCategory10:Nx,schemeAccent:Ox,schemeDark2:Px,schemePaired:Rx,schemePastel1:zx,schemePastel2:Fx,schemeSet1:jx,schemeSet2:Vx,schemeSet3:$x,schemeTableau10:Hx,interpolateBrBG:qx,schemeBrBG:Wx,interpolatePRGn:Gx,schemePRGn:Yx,interpolatePiYG:Kx,schemePiYG:Zx,interpolatePuOr:Xx,schemePuOr:Qx,interpolateRdBu:tE,schemeRdBu:Jx,interpolateRdGy:nE,schemeRdGy:eE,interpolateRdYlBu:iE,schemeRdYlBu:rE,interpolateRdYlGn:sE,schemeRdYlGn:oE,interpolateSpectral:cE,schemeSpectral:aE,interpolateBuGn:dE,schemeBuGn:lE,interpolateBuPu:hE,schemeBuPu:uE,interpolateGnBu:fE,schemeGnBu:gE,interpolateOrRd:mE,schemeOrRd:pE,interpolatePuBuGn:kE,schemePuBuGn:bE,interpolatePuBu:yE,schemePuBu:wE,interpolatePuRd:vE,schemePuRd:_E,interpolateRdPu:CE,schemeRdPu:AE,interpolateYlGnBu:EE,schemeYlGnBu:xE,interpolateYlGn:SE,schemeYlGn:TE,interpolateYlOrBr:ME,schemeYlOrBr:DE,interpolateYlOrRd:BE,schemeYlOrRd:IE,interpolateBlues:NE,schemeBlues:LE,interpolateGreens:PE,schemeGreens:OE,interpolateGreys:zE,schemeGreys:RE,interpolatePurples:jE,schemePurples:FE,interpolateReds:$E,schemeReds:VE,interpolateOranges:UE,schemeOranges:HE,interpolateCividis:WE,interpolateCubehelixDefault:qE,interpolateRainbow:KE,interpolateWarm:YE,interpolateCool:GE,interpolateSinebow:tT,interpolateTurbo:eT,interpolateViridis:rT,interpolateMagma:iT,interpolateInferno:oT,interpolatePlasma:sT,create:Xr,creator:nn,local:ti,matcher:hn,namespace:Je,namespaces:Xe,pointer:ri,pointers:ii,select:Qr,selectAll:oi,selection:Zr,selector:on,selectorAll:ln,style:nr,window:Qn,arc:ST,area:PT,line:OT,pie:FT,areaRadial:WT,radialArea:WT,lineRadial:UT,radialLine:UT,pointRadial:qT,link:tS,linkHorizontal:eS,linkVertical:nS,linkRadial:rS,symbol:BS,symbolsStroke:IS,symbolsFill:MS,symbols:MS,symbolAsterisk:oS,symbolCircle:sS,symbolCross:aS,symbolDiamond:dS,symbolDiamond2:uS,symbolPlus:hS,symbolSquare:gS,symbolSquare2:fS,symbolStar:wS,symbolTriangle:_S,symbolTriangle2:AS,symbolWye:SS,symbolX:DS,curveBasisClosed:zS,curveBasisOpen:jS,curveBasis:PS,curveBumpX:ZT,curveBumpY:KT,curveBundle:$S,curveCardinalClosed:YS,curveCardinalOpen:ZS,curveCardinal:WS,curveCatmullRomClosed:tD,curveCatmullRomOpen:nD,curveCatmullRom:XS,curveLinearClosed:iD,curveLinear:BT,curveMonotoneX:hD,curveMonotoneY:gD,curveNatural:mD,curveStep:kD,curveStepAfter:yD,curveStepBefore:wD,stack:xD,stackOffsetExpand:ED,stackOffsetDiverging:TD,stackOffsetNone:_D,stackOffsetSilhouette:SD,stackOffsetWiggle:DD,stackOrderAppearance:MD,stackOrderAscending:BD,stackOrderDescending:ND,stackOrderInsideOut:OD,stackOrderNone:vD,stackOrderReverse:PD,timeInterval:uv,timeMillisecond:gv,timeMilliseconds:fv,utcMillisecond:gv,utcMilliseconds:fv,timeSecond:Av,timeSeconds:Cv,utcSecond:Av,utcSeconds:Cv,timeMinute:Ev,timeMinutes:Tv,timeHour:Dv,timeHours:Mv,timeDay:Bv,timeDays:Lv,timeWeek:Ov,timeWeeks:$v,timeSunday:Ov,timeSundays:$v,timeMonday:Pv,timeMondays:Hv,timeTuesday:Rv,timeTuesdays:Uv,timeWednesday:zv,timeWednesdays:Wv,timeThursday:Fv,timeThursdays:qv,timeFriday:jv,timeFridays:Yv,timeSaturday:Vv,timeSaturdays:Gv,timeMonth:Kv,timeMonths:Qv,timeYear:Jv,timeYears:tA,utcMinute:nA,utcMinutes:rA,utcHour:oA,utcHours:sA,utcDay:cA,utcDays:lA,utcWeek:uA,utcWeeks:kA,utcSunday:uA,utcSundays:kA,utcMonday:hA,utcMondays:wA,utcTuesday:gA,utcTuesdays:yA,utcWednesday:fA,utcWednesdays:_A,utcThursday:pA,utcThursdays:vA,utcFriday:mA,utcFridays:AA,utcSaturday:bA,utcSaturdays:CA,utcMonth:EA,utcMonths:TA,utcYear:DA,utcYears:MA,utcTicks:BA,utcTickInterval:LA,timeTicks:NA,timeTickInterval:OA,timeFormatDefaultLocale:cx,get timeFormat(){return VA},get timeParse(){return $A},get utcFormat(){return HA},get utcParse(){return UA},timeFormatLocale:FA,isoFormat:ux,isoParse:gx,now:Qs,timer:ta,timerFlush:ea,timeout:sa,interval:aa,transition:Tc,active:El,interrupt:va,zoom:KD,zoomTransform:VD,zoomIdentity:jD,ZoomTransform:FD},Symbol.toStringTag,{value:"Module"}));
/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */function XD(t){return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JD(t,e){return(JD=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tM(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function eM(t,e,n){return(eM=tM()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&JD(i,n.prototype),i}).apply(null,arguments)}function nM(t){return rM(t)||iM(t)||oM(t)||aM()}function rM(t){if(Array.isArray(t))return sM(t)}function iM(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function oM(t,e){if(t){if("string"==typeof t)return sM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sM(t,e):void 0}}function sM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aM(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var cM=Object.hasOwnProperty,lM=Object.setPrototypeOf,dM=Object.isFrozen,uM=Object.getPrototypeOf,hM=Object.getOwnPropertyDescriptor,gM=Object.freeze,fM=Object.seal,pM=Object.create,mM="undefined"!=typeof Reflect&&Reflect,bM=mM.apply,kM=mM.construct;bM||(bM=function(t,e,n){return t.apply(e,n)}),gM||(gM=function(t){return t}),fM||(fM=function(t){return t}),kM||(kM=function(t,e){return eM(t,nM(e))});var wM=DM(Array.prototype.forEach),yM=DM(Array.prototype.pop),_M=DM(Array.prototype.push),vM=DM(String.prototype.toLowerCase),AM=DM(String.prototype.match),CM=DM(String.prototype.replace),xM=DM(String.prototype.indexOf),EM=DM(String.prototype.trim),TM=DM(RegExp.prototype.test),SM=MM(TypeError);function DM(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return bM(t,e,r)}}function MM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kM(t,n)}}function IM(t,e,n){n=n||vM,lM&&lM(t,null);for(var r=e.length;r--;){var i=e[r];if("string"==typeof i){var o=n(i);o!==i&&(dM(e)||(e[r]=o),i=o)}t[i]=!0}return t}function BM(t){var e,n=pM(null);for(e in t)bM(cM,t,[e])&&(n[e]=t[e]);return n}function LM(t,e){for(;null!==t;){var n=hM(t,e);if(n){if(n.get)return DM(n.get);if("function"==typeof n.value)return DM(n.value)}t=uM(t)}function r(t){return console.warn("fallback value for",t),null}return r}var NM=gM(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),OM=gM(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),PM=gM(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),RM=gM(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zM=gM(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),FM=gM(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jM=gM(["#text"]),VM=gM(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$M=gM(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HM=gM(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),UM=gM(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),WM=fM(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qM=fM(/<%[\w\W]*|[\w\W]*%>/gm),YM=fM(/^data-[\-\w.\u00B7-\uFFFF]/),GM=fM(/^aria-[\-\w]+$/),ZM=fM(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),KM=fM(/^(?:\w+script|data):/i),QM=fM(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XM=fM(/^html$/i),JM=function(){return"undefined"==typeof window?null:window},tI=function(t,e){if("object"!==XD(t)||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(r)&&(n=e.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function eI(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JM(),e=function(t){return eI(t)};if(e.version="2.4.0",e.removed=[],!t||!t.document||9!==t.document.nodeType)return e.isSupported=!1,e;var n=t.document,r=t.document,i=t.DocumentFragment,o=t.HTMLTemplateElement,s=t.Node,a=t.Element,c=t.NodeFilter,l=t.NamedNodeMap,d=void 0===l?t.NamedNodeMap||t.MozNamedAttrMap:l,u=t.HTMLFormElement,h=t.DOMParser,g=t.trustedTypes,f=a.prototype,p=LM(f,"cloneNode"),m=LM(f,"nextSibling"),b=LM(f,"childNodes"),k=LM(f,"parentNode");if("function"==typeof o){var w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}var y=tI(g,n),_=y?y.createHTML(""):"",v=r,A=v.implementation,C=v.createNodeIterator,x=v.createDocumentFragment,E=v.getElementsByTagName,T=n.importNode,S={};try{S=BM(r).documentMode?r.documentMode:{}}catch(t){}var D={};e.isSupported="function"==typeof k&&A&&void 0!==A.createHTMLDocument&&9!==S;var M,I,B=WM,L=qM,N=YM,O=GM,P=KM,R=QM,z=ZM,F=null,j=IM({},[].concat(nM(NM),nM(OM),nM(PM),nM(zM),nM(jM))),V=null,$=IM({},[].concat(nM(VM),nM($M),nM(HM),nM(UM))),H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,W=null,q=!0,Y=!0,G=!1,Z=!1,K=!1,Q=!1,X=!1,J=!1,tt=!1,et=!1,nt=!0,rt=!1,it="user-content-",ot=!0,st=!1,at={},ct=null,lt=IM({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dt=null,ut=IM({},["audio","video","img","source","image","track"]),ht=null,gt=IM({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ft="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",mt="http://www.w3.org/1999/xhtml",bt=mt,kt=!1,wt=["application/xhtml+xml","text/html"],yt="text/html",_t=null,vt=r.createElement("form"),At=function(t){return t instanceof RegExp||t instanceof Function},Ct=function(t){_t&&_t===t||(t&&"object"===XD(t)||(t={}),t=BM(t),M=M=-1===wt.indexOf(t.PARSER_MEDIA_TYPE)?yt:t.PARSER_MEDIA_TYPE,I="application/xhtml+xml"===M?function(t){return t}:vM,F="ALLOWED_TAGS"in t?IM({},t.ALLOWED_TAGS,I):j,V="ALLOWED_ATTR"in t?IM({},t.ALLOWED_ATTR,I):$,ht="ADD_URI_SAFE_ATTR"in t?IM(BM(gt),t.ADD_URI_SAFE_ATTR,I):gt,dt="ADD_DATA_URI_TAGS"in t?IM(BM(ut),t.ADD_DATA_URI_TAGS,I):ut,ct="FORBID_CONTENTS"in t?IM({},t.FORBID_CONTENTS,I):lt,U="FORBID_TAGS"in t?IM({},t.FORBID_TAGS,I):{},W="FORBID_ATTR"in t?IM({},t.FORBID_ATTR,I):{},at="USE_PROFILES"in t&&t.USE_PROFILES,q=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,G=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=t.SAFE_FOR_TEMPLATES||!1,K=t.WHOLE_DOCUMENT||!1,J=t.RETURN_DOM||!1,tt=t.RETURN_DOM_FRAGMENT||!1,et=t.RETURN_TRUSTED_TYPE||!1,X=t.FORCE_BODY||!1,nt=!1!==t.SANITIZE_DOM,rt=t.SANITIZE_NAMED_PROPS||!1,ot=!1!==t.KEEP_CONTENT,st=t.IN_PLACE||!1,z=t.ALLOWED_URI_REGEXP||z,bt=t.NAMESPACE||mt,t.CUSTOM_ELEMENT_HANDLING&&At(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&At(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(Y=!1),tt&&(J=!0),at&&(F=IM({},nM(jM)),V=[],!0===at.html&&(IM(F,NM),IM(V,VM)),!0===at.svg&&(IM(F,OM),IM(V,$M),IM(V,UM)),!0===at.svgFilters&&(IM(F,PM),IM(V,$M),IM(V,UM)),!0===at.mathMl&&(IM(F,zM),IM(V,HM),IM(V,UM))),t.ADD_TAGS&&(F===j&&(F=BM(F)),IM(F,t.ADD_TAGS,I)),t.ADD_ATTR&&(V===$&&(V=BM(V)),IM(V,t.ADD_ATTR,I)),t.ADD_URI_SAFE_ATTR&&IM(ht,t.ADD_URI_SAFE_ATTR,I),t.FORBID_CONTENTS&&(ct===lt&&(ct=BM(ct)),IM(ct,t.FORBID_CONTENTS,I)),ot&&(F["#text"]=!0),K&&IM(F,["html","head","body"]),F.table&&(IM(F,["tbody"]),delete U.tbody),gM&&gM(t),_t=t)},xt=IM({},["mi","mo","mn","ms","mtext"]),Et=IM({},["foreignobject","desc","title","annotation-xml"]),Tt=IM({},["title","style","font","a","script"]),St=IM({},OM);IM(St,PM),IM(St,RM);var Dt=IM({},zM);IM(Dt,FM);var Mt=function(t){var e=k(t);e&&e.tagName||(e={namespaceURI:mt,tagName:"template"});var n=vM(t.tagName),r=vM(e.tagName);return t.namespaceURI===pt?e.namespaceURI===mt?"svg"===n:e.namespaceURI===ft?"svg"===n&&("annotation-xml"===r||xt[r]):Boolean(St[n]):t.namespaceURI===ft?e.namespaceURI===mt?"math"===n:e.namespaceURI===pt?"math"===n&&Et[r]:Boolean(Dt[n]):t.namespaceURI===mt&&!(e.namespaceURI===pt&&!Et[r])&&!(e.namespaceURI===ft&&!xt[r])&&!Dt[n]&&(Tt[n]||!St[n])},It=function(t){_M(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=_}catch(e){t.remove()}}},Bt=function(t,n){try{_M(e.removed,{attribute:n.getAttributeNode(t),from:n})}catch(t){_M(e.removed,{attribute:null,from:n})}if(n.removeAttribute(t),"is"===t&&!V[t])if(J||tt)try{It(n)}catch(t){}else try{n.setAttribute(t,"")}catch(t){}},Lt=function(t){var e,n;if(X)t="<remove></remove>"+t;else{var i=AM(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===M&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=y?y.createHTML(t):t;if(bt===mt)try{e=(new h).parseFromString(o,M)}catch(t){}if(!e||!e.documentElement){e=A.createDocument(bt,"template",null);try{e.documentElement.innerHTML=kt?"":o}catch(t){}}var s=e.body||e.documentElement;return t&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),bt===mt?E.call(e,K?"html":"body")[0]:K?e.documentElement:s},Nt=function(t){return C.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Ot=function(t){return t instanceof u&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof d)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},Pt=function(t){return"object"===XD(s)?t instanceof s:t&&"object"===XD(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Rt=function(t,n,r){D[t]&&wM(D[t],(function(t){t.call(e,n,r,_t)}))},zt=function(t){var n;if(Rt("beforeSanitizeElements",t,null),Ot(t))return It(t),!0;if(TM(/[\u0080-\uFFFF]/,t.nodeName))return It(t),!0;var r=I(t.nodeName);if(Rt("uponSanitizeElement",t,{tagName:r,allowedTags:F}),t.hasChildNodes()&&!Pt(t.firstElementChild)&&(!Pt(t.content)||!Pt(t.content.firstElementChild))&&TM(/<[/\w]/g,t.innerHTML)&&TM(/<[/\w]/g,t.textContent))return It(t),!0;if("select"===r&&TM(/<template/i,t.innerHTML))return It(t),!0;if(!F[r]||U[r]){if(!U[r]&&jt(r)){if(H.tagNameCheck instanceof RegExp&&TM(H.tagNameCheck,r))return!1;if(H.tagNameCheck instanceof Function&&H.tagNameCheck(r))return!1}if(ot&&!ct[r]){var i=k(t)||t.parentNode,o=b(t)||t.childNodes;if(o&&i)for(var s=o.length-1;s>=0;--s)i.insertBefore(p(o[s],!0),m(t))}return It(t),!0}return t instanceof a&&!Mt(t)?(It(t),!0):"noscript"!==r&&"noembed"!==r||!TM(/<\/no(script|embed)/i,t.innerHTML)?(Z&&3===t.nodeType&&(n=t.textContent,n=CM(n,B," "),n=CM(n,L," "),t.textContent!==n&&(_M(e.removed,{element:t.cloneNode()}),t.textContent=n)),Rt("afterSanitizeElements",t,null),!1):(It(t),!0)},Ft=function(t,e,n){if(nt&&("id"===e||"name"===e)&&(n in r||n in vt))return!1;if(Y&&!W[e]&&TM(N,e));else if(q&&TM(O,e));else if(!V[e]||W[e]){if(!(jt(t)&&(H.tagNameCheck instanceof RegExp&&TM(H.tagNameCheck,t)||H.tagNameCheck instanceof Function&&H.tagNameCheck(t))&&(H.attributeNameCheck instanceof RegExp&&TM(H.attributeNameCheck,e)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(e))||"is"===e&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&TM(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(ht[e]);else if(TM(z,CM(n,R,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==xM(n,"data:")||!dt[t])if(G&&!TM(P,CM(n,R,"")));else if(n)return!1;return!0},jt=function(t){return t.indexOf("-")>0},Vt=function(t){var n,r,i,o;Rt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V};for(o=s.length;o--;){var c=n=s[o],l=c.name,d=c.namespaceURI;if(r="value"===l?n.value:EM(n.value),i=I(l),a.attrName=i,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,Rt("uponSanitizeAttribute",t,a),r=a.attrValue,!a.forceKeepAttr&&(Bt(l,t),a.keepAttr))if(TM(/\/>/i,r))Bt(l,t);else{Z&&(r=CM(r,B," "),r=CM(r,L," "));var u=I(t.nodeName);if(Ft(u,i,r)){if(!rt||"id"!==i&&"name"!==i||(Bt(l,t),r=it+r),y&&"object"===XD(g)&&"function"==typeof g.getAttributeType)if(d);else switch(g.getAttributeType(u,i)){case"TrustedHTML":r=y.createHTML(r);break;case"TrustedScriptURL":r=y.createScriptURL(r)}try{d?t.setAttributeNS(d,l,r):t.setAttribute(l,r),yM(e.removed)}catch(t){}}}}Rt("afterSanitizeAttributes",t,null)}},$t=function t(e){var n,r=Nt(e);for(Rt("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)Rt("uponSanitizeShadowNode",n,null),zt(n)||(n.content instanceof i&&t(n.content),Vt(n));Rt("afterSanitizeShadowDOM",e,null)};return e.sanitize=function(r){var o,a,c,l,d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((kt=!r)&&(r="\x3c!--\x3e"),"string"!=typeof r&&!Pt(r)){if("function"!=typeof r.toString)throw SM("toString is not a function");if("string"!=typeof(r=r.toString()))throw SM("dirty is not a string, aborting")}if(!e.isSupported){if("object"===XD(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof r)return t.toStaticHTML(r);if(Pt(r))return t.toStaticHTML(r.outerHTML)}return r}if(Q||Ct(u),e.removed=[],"string"==typeof r&&(st=!1),st){if(r.nodeName){var h=I(r.nodeName);if(!F[h]||U[h])throw SM("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof s)1===(a=(o=Lt("\x3c!----\x3e")).ownerDocument.importNode(r,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!J&&!Z&&!K&&-1===r.indexOf("<"))return y&&et?y.createHTML(r):r;if(!(o=Lt(r)))return J?null:et?_:""}o&&X&&It(o.firstChild);for(var g=Nt(st?r:o);c=g.nextNode();)3===c.nodeType&&c===l||zt(c)||(c.content instanceof i&&$t(c.content),Vt(c),l=c);if(l=null,st)return r;if(J){if(tt)for(d=x.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return V.shadowroot&&(d=T.call(n,d,!0)),d}var f=K?o.outerHTML:o.innerHTML;return K&&F["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&TM(XM,o.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+f),Z&&(f=CM(f,B," "),f=CM(f,L," ")),y&&et?y.createHTML(f):f},e.setConfig=function(t){Ct(t),Q=!0},e.clearConfig=function(){_t=null,Q=!1},e.isValidAttribute=function(t,e,n){_t||Ct({});var r=I(t),i=I(e);return Ft(r,i,n)},e.addHook=function(t,e){"function"==typeof e&&(D[t]=D[t]||[],_M(D[t],e))},e.removeHook=function(t){if(D[t])return yM(D[t])},e.removeHooks=function(t){D[t]&&(D[t]=[])},e.removeAllHooks=function(){D={}},e}var nI=eI();const rI=t=>t?dI(t).replace(/\\n/g,"#br#").split("#br#"):[""],iI=t=>nI.sanitize(t),oI=(t,e)=>{var n;if(!1!==(null==(n=e.flowchart)?void 0:n.htmlLabels)){const n=e.securityLevel;"antiscript"===n||"strict"===n?t=iI(t):"loose"!==n&&(t=(t=(t=dI(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=lI(t))}return t},sI=(t,e)=>t?t=e.dompurifyConfig?nI.sanitize(oI(t,e),e.dompurifyConfig).toString():nI.sanitize(oI(t,e)):t,aI=(t,e)=>"string"==typeof t?sI(t,e):t.flat().map((t=>sI(t,e))),cI=/<br\s*\/?>/gi,lI=t=>t.replace(/#br#/g,"<br/>"),dI=t=>t.replace(cI,"#br#"),uI=t=>!1!==t&&!["false","null","0"].includes(String(t).trim().toLowerCase()),hI=function(t){let e=t;return-1!==t.indexOf("~")?(e=e.replace(/~([^~].*)/,"<$1"),e=e.replace(/~([^~]*)$/,">$1"),hI(e)):e},gI={getRows:rI,sanitizeText:sI,sanitizeTextOrArray:aI,hasBreaks:t=>cI.test(t),splitBreaks:t=>t.split(cI),lineBreakRegex:cI,removeScript:iI,getUrl:t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},evaluate:uI},fI={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return 2.55*n;t/=360,e/=100;const i=(n/=100)<.5?n*(1+e):n+e-n*e,o=2*n-i;switch(r){case"r":return 255*fI.hue2rgb(o,i,t+1/3);case"g":return 255*fI.hue2rgb(o,i,t);case"b":return 255*fI.hue2rgb(o,i,t-1/3)}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),o=Math.min(t,e,n),s=(i+o)/2;if("l"===r)return 100*s;if(i===o)return 0;const a=i-o;if("s"===r)return 100*(s>.5?a/(2-i-o):a/(i+o));switch(i){case t:return 60*((e-n)/a+(e<n?6:0));case e:return 60*((n-t)/a+2);case n:return 60*((t-e)/a+4);default:return-1}}},pI={channel:fI,lang:{clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},unit:{dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}}},mI={};for(let t=0;t<=255;t++)mI[t]=pI.unit.dec2hex(t);const bI={ALL:0,RGB:1,HSL:2};class kI{constructor(){this.type=bI.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=bI.ALL}is(t){return this.type===t}}const wI=kI;class yI{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new wI}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=bI.ALL,this}_ensureHSL(){const t=this.data,{h:e,s:n,l:r}=t;void 0===e&&(t.h=pI.channel.rgb2hsl(t,"h")),void 0===n&&(t.s=pI.channel.rgb2hsl(t,"s")),void 0===r&&(t.l=pI.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:e,g:n,b:r}=t;void 0===e&&(t.r=pI.channel.hsl2rgb(t,"r")),void 0===n&&(t.g=pI.channel.hsl2rgb(t,"g")),void 0===r&&(t.b=pI.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,e=t.r;return this.type.is(bI.HSL)||void 0===e?(this._ensureHSL(),pI.channel.hsl2rgb(t,"r")):e}get g(){const t=this.data,e=t.g;return this.type.is(bI.HSL)||void 0===e?(this._ensureHSL(),pI.channel.hsl2rgb(t,"g")):e}get b(){const t=this.data,e=t.b;return this.type.is(bI.HSL)||void 0===e?(this._ensureHSL(),pI.channel.hsl2rgb(t,"b")):e}get h(){const t=this.data,e=t.h;return this.type.is(bI.RGB)||void 0===e?(this._ensureRGB(),pI.channel.rgb2hsl(t,"h")):e}get s(){const t=this.data,e=t.s;return this.type.is(bI.RGB)||void 0===e?(this._ensureRGB(),pI.channel.rgb2hsl(t,"s")):e}get l(){const t=this.data,e=t.l;return this.type.is(bI.RGB)||void 0===e?(this._ensureRGB(),pI.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(bI.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(bI.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(bI.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(bI.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(bI.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(bI.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const _I=new yI({r:0,g:0,b:0,a:0},"transparent"),vI={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35!==t.charCodeAt(0))return;const e=t.match(vI.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,o=i%4==0,s=i>4,a=s?1:17,c=s?8:4,l=o?0:-1,d=s?255:15;return _I.set({r:(r>>c*(l+3)&d)*a,g:(r>>c*(l+2)&d)*a,b:(r>>c*(l+1)&d)*a,a:o?(r&d)*a/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${mI[Math.round(e)]}${mI[Math.round(n)]}${mI[Math.round(r)]}${mI[Math.round(255*i)]}`:`#${mI[Math.round(e)]}${mI[Math.round(n)]}${mI[Math.round(r)]}`}},AI=vI,CI={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(CI.hueRe);if(e){const[,t,n]=e;switch(n){case"grad":return pI.channel.clamp.h(.9*parseFloat(t));case"rad":return pI.channel.clamp.h(180*parseFloat(t)/Math.PI);case"turn":return pI.channel.clamp.h(360*parseFloat(t))}}return pI.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(104!==e&&72!==e)return;const n=t.match(CI.re);if(!n)return;const[,r,i,o,s,a]=n;return _I.set({h:CI._hue2deg(r),s:pI.channel.clamp.s(parseFloat(i)),l:pI.channel.clamp.l(parseFloat(o)),a:s?pI.channel.clamp.a(a?parseFloat(s)/100:parseFloat(s)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${pI.lang.round(e)}, ${pI.lang.round(n)}%, ${pI.lang.round(r)}%, ${i})`:`hsl(${pI.lang.round(e)}, ${pI.lang.round(n)}%, ${pI.lang.round(r)}%)`}},xI=CI,EI={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=EI.colors[t];if(e)return AI.parse(e)},stringify:t=>{const e=AI.stringify(t);for(const t in EI.colors)if(EI.colors[t]===e)return t}},TI=EI,SI={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(114!==e&&82!==e)return;const n=t.match(SI.re);if(!n)return;const[,r,i,o,s,a,c,l,d]=n;return _I.set({r:pI.channel.clamp.r(i?2.55*parseFloat(r):parseFloat(r)),g:pI.channel.clamp.g(s?2.55*parseFloat(o):parseFloat(o)),b:pI.channel.clamp.b(c?2.55*parseFloat(a):parseFloat(a)),a:l?pI.channel.clamp.a(d?parseFloat(l)/100:parseFloat(l)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${pI.lang.round(e)}, ${pI.lang.round(n)}, ${pI.lang.round(r)}, ${pI.lang.round(i)})`:`rgb(${pI.lang.round(e)}, ${pI.lang.round(n)}, ${pI.lang.round(r)})`}},DI=SI,MI={format:{keyword:TI,hex:AI,rgb:DI,rgba:DI,hsl:xI,hsla:xI},parse:t=>{if("string"!=typeof t)return t;const e=AI.parse(t)||DI.parse(t)||xI.parse(t)||TI.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(bI.HSL)||void 0===t.data.r?xI.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?DI.stringify(t):AI.stringify(t)},II=(t,e)=>{const n=MI.parse(t);for(const t in e)n[t]=pI.channel.clamp[t](e[t]);return MI.stringify(n)},BI=(t,e,n=0,r=1)=>{if("number"!=typeof t)return II(t,{a:e});const i=_I.set({r:pI.channel.clamp.r(t),g:pI.channel.clamp.g(e),b:pI.channel.clamp.b(n),a:pI.channel.clamp.a(r)});return MI.stringify(i)},LI=(t,e,n)=>{const r=MI.parse(t),i=r[e],o=pI.channel.clamp[e](i+n);return i!==o&&(r[e]=o),MI.stringify(r)},NI=(t,e)=>LI(t,"l",e),OI=(t,e)=>LI(t,"l",-e),PI=(t,e)=>{const n=MI.parse(t),r={};for(const t in e)e[t]&&(r[t]=n[t]+e[t]);return II(t,r)},RI=(t,e,n=50)=>{const{r,g:i,b:o,a:s}=MI.parse(t),{r:a,g:c,b:l,a:d}=MI.parse(e),u=n/100,h=2*u-1,g=s-d,f=((h*g==-1?h:(h+g)/(1+h*g))+1)/2,p=1-f;return BI(r*f+a*p,i*f+c*p,o*f+l*p,s*u+d*(1-u))},zI=(t,e=100)=>{const n=MI.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,RI(n,t,e)},FI=(t,e)=>PI(t,e?{s:-40,l:10}:{s:-40,l:-10}),jI="#ffffff",VI="#f2f2f2";class $I{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||PI(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||PI(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||FI(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||FI(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||FI(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||FI(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||zI(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||zI(this.tertiaryColor),this.lineColor=this.lineColor||zI(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?OI(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||OI(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||zI(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||NI(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||PI(this.primaryColor,{h:30}),this.cScale4=this.cScale4||PI(this.primaryColor,{h:60}),this.cScale5=this.cScale5||PI(this.primaryColor,{h:90}),this.cScale6=this.cScale6||PI(this.primaryColor,{h:120}),this.cScale7=this.cScale7||PI(this.primaryColor,{h:150}),this.cScale8=this.cScale8||PI(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||PI(this.primaryColor,{h:270}),this.cScale10=this.cScale10||PI(this.primaryColor,{h:300}),this.cScale11=this.cScale11||PI(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=OI(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=OI(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||zI(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||NI(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||OI(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||PI(this.primaryColor,{h:64}),this.fillType3=this.fillType3||PI(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||PI(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||PI(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||PI(this.primaryColor,{h:128}),this.fillType7=this.fillType7||PI(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||PI(this.primaryColor,{l:-10}),this.pie5=this.pie5||PI(this.secondaryColor,{l:-10}),this.pie6=this.pie6||PI(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||PI(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||PI(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||PI(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||PI(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||PI(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||PI(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?OI(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||PI(this.primaryColor,{h:-30}),this.git4=this.git4||PI(this.primaryColor,{h:-60}),this.git5=this.git5||PI(this.primaryColor,{h:-90}),this.git6=this.git6||PI(this.primaryColor,{h:60}),this.git7=this.git7||PI(this.primaryColor,{h:120}),this.darkMode?(this.git0=NI(this.git0,25),this.git1=NI(this.git1,25),this.git2=NI(this.git2,25),this.git3=NI(this.git3,25),this.git4=NI(this.git4,25),this.git5=NI(this.git5,25),this.git6=NI(this.git6,25),this.git7=NI(this.git7,25)):(this.git0=OI(this.git0,25),this.git1=OI(this.git1,25),this.git2=OI(this.git2,25),this.git3=OI(this.git3,25),this.git4=OI(this.git4,25),this.git5=OI(this.git5,25),this.git6=OI(this.git6,25),this.git7=OI(this.git7,25)),this.gitInv0=this.gitInv0||zI(this.git0),this.gitInv1=this.gitInv1||zI(this.git1),this.gitInv2=this.gitInv2||zI(this.git2),this.gitInv3=this.gitInv3||zI(this.git3),this.gitInv4=this.gitInv4||zI(this.git4),this.gitInv5=this.gitInv5||zI(this.git5),this.gitInv6=this.gitInv6||zI(this.git6),this.gitInv7=this.gitInv7||zI(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||jI,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||VI}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const HI=t=>{const e=new $I;return e.calculate(t),e};class UI{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=NI(this.primaryColor,16),this.tertiaryColor=PI(this.primaryColor,{h:-160}),this.primaryBorderColor=zI(this.background),this.secondaryBorderColor=FI(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=FI(this.tertiaryColor,this.darkMode),this.primaryTextColor=zI(this.primaryColor),this.secondaryTextColor=zI(this.secondaryColor),this.tertiaryTextColor=zI(this.tertiaryColor),this.lineColor=zI(this.background),this.textColor=zI(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=NI(zI("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=BI(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=OI("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=BI(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=BI(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=NI(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=NI(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=NI(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=PI(this.primaryColor,{h:64}),this.fillType3=PI(this.secondaryColor,{h:64}),this.fillType4=PI(this.primaryColor,{h:-64}),this.fillType5=PI(this.secondaryColor,{h:-64}),this.fillType6=PI(this.primaryColor,{h:128}),this.fillType7=PI(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||PI(this.primaryColor,{h:30}),this.cScale4=this.cScale4||PI(this.primaryColor,{h:60}),this.cScale5=this.cScale5||PI(this.primaryColor,{h:90}),this.cScale6=this.cScale6||PI(this.primaryColor,{h:120}),this.cScale7=this.cScale7||PI(this.primaryColor,{h:150}),this.cScale8=this.cScale8||PI(this.primaryColor,{h:210}),this.cScale9=this.cScale9||PI(this.primaryColor,{h:270}),this.cScale10=this.cScale10||PI(this.primaryColor,{h:300}),this.cScale11=this.cScale11||PI(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||zI(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||NI(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?OI(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=NI(this.secondaryColor,20),this.git1=NI(this.pie2||this.secondaryColor,20),this.git2=NI(this.pie3||this.tertiaryColor,20),this.git3=NI(this.pie4||PI(this.primaryColor,{h:-30}),20),this.git4=NI(this.pie5||PI(this.primaryColor,{h:-60}),20),this.git5=NI(this.pie6||PI(this.primaryColor,{h:-90}),10),this.git6=NI(this.pie7||PI(this.primaryColor,{h:60}),10),this.git7=NI(this.pie8||PI(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||zI(this.git0),this.gitInv1=this.gitInv1||zI(this.git1),this.gitInv2=this.gitInv2||zI(this.git2),this.gitInv3=this.gitInv3||zI(this.git3),this.gitInv4=this.gitInv4||zI(this.git4),this.gitInv5=this.gitInv5||zI(this.git5),this.gitInv6=this.gitInv6||zI(this.git6),this.gitInv7=this.gitInv7||zI(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||NI(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||NI(this.background,2)}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const WI=t=>{const e=new UI;return e.calculate(t),e};class qI{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=PI(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=PI(this.primaryColor,{h:-160}),this.primaryBorderColor=FI(this.primaryColor,this.darkMode),this.secondaryBorderColor=FI(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=FI(this.tertiaryColor,this.darkMode),this.primaryTextColor=zI(this.primaryColor),this.secondaryTextColor=zI(this.secondaryColor),this.tertiaryTextColor=zI(this.tertiaryColor),this.lineColor=zI(this.background),this.textColor=zI(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=BI(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||PI(this.primaryColor,{h:30}),this.cScale4=this.cScale4||PI(this.primaryColor,{h:60}),this.cScale5=this.cScale5||PI(this.primaryColor,{h:90}),this.cScale6=this.cScale6||PI(this.primaryColor,{h:120}),this.cScale7=this.cScale7||PI(this.primaryColor,{h:150}),this.cScale8=this.cScale8||PI(this.primaryColor,{h:210}),this.cScale9=this.cScale9||PI(this.primaryColor,{h:270}),this.cScale10=this.cScale10||PI(this.primaryColor,{h:300}),this.cScale11=this.cScale11||PI(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||OI(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||OI(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=OI(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||OI(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||PI(this["cScale"+t],{h:180});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||zI(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||zI(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=NI(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=PI(this.primaryColor,{h:64}),this.fillType3=PI(this.secondaryColor,{h:64}),this.fillType4=PI(this.primaryColor,{h:-64}),this.fillType5=PI(this.secondaryColor,{h:-64}),this.fillType6=PI(this.primaryColor,{h:128}),this.fillType7=PI(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||PI(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||PI(this.primaryColor,{l:-10}),this.pie5=this.pie5||PI(this.secondaryColor,{l:-30}),this.pie6=this.pie6||PI(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||PI(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||PI(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||PI(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||PI(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||PI(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||PI(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||PI(this.primaryColor,{h:-30}),this.git4=this.git4||PI(this.primaryColor,{h:-60}),this.git5=this.git5||PI(this.primaryColor,{h:-90}),this.git6=this.git6||PI(this.primaryColor,{h:60}),this.git7=this.git7||PI(this.primaryColor,{h:120}),this.darkMode?(this.git0=NI(this.git0,25),this.git1=NI(this.git1,25),this.git2=NI(this.git2,25),this.git3=NI(this.git3,25),this.git4=NI(this.git4,25),this.git5=NI(this.git5,25),this.git6=NI(this.git6,25),this.git7=NI(this.git7,25)):(this.git0=OI(this.git0,25),this.git1=OI(this.git1,25),this.git2=OI(this.git2,25),this.git3=OI(this.git3,25),this.git4=OI(this.git4,25),this.git5=OI(this.git5,25),this.git6=OI(this.git6,25),this.git7=OI(this.git7,25)),this.gitInv0=this.gitInv0||OI(zI(this.git0),25),this.gitInv1=this.gitInv1||zI(this.git1),this.gitInv2=this.gitInv2||zI(this.git2),this.gitInv3=this.gitInv3||zI(this.git3),this.gitInv4=this.gitInv4||zI(this.git4),this.gitInv5=this.gitInv5||zI(this.git5),this.gitInv6=this.gitInv6||zI(this.git6),this.gitInv7=this.gitInv7||zI(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||zI(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||zI(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||jI,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||VI}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const YI=t=>{const e=new qI;return e.calculate(t),e};class GI{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=NI("#cde498",10),this.primaryBorderColor=FI(this.primaryColor,this.darkMode),this.secondaryBorderColor=FI(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=FI(this.tertiaryColor,this.darkMode),this.primaryTextColor=zI(this.primaryColor),this.secondaryTextColor=zI(this.secondaryColor),this.tertiaryTextColor=zI(this.primaryColor),this.lineColor=zI(this.background),this.textColor=zI(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||PI(this.primaryColor,{h:30}),this.cScale4=this.cScale4||PI(this.primaryColor,{h:60}),this.cScale5=this.cScale5||PI(this.primaryColor,{h:90}),this.cScale6=this.cScale6||PI(this.primaryColor,{h:120}),this.cScale7=this.cScale7||PI(this.primaryColor,{h:150}),this.cScale8=this.cScale8||PI(this.primaryColor,{h:210}),this.cScale9=this.cScale9||PI(this.primaryColor,{h:270}),this.cScale10=this.cScale10||PI(this.primaryColor,{h:300}),this.cScale11=this.cScale11||PI(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||OI(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||OI(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=OI(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||OI(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||PI(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=OI(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=PI(this.primaryColor,{h:64}),this.fillType3=PI(this.secondaryColor,{h:64}),this.fillType4=PI(this.primaryColor,{h:-64}),this.fillType5=PI(this.secondaryColor,{h:-64}),this.fillType6=PI(this.primaryColor,{h:128}),this.fillType7=PI(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||PI(this.primaryColor,{l:-30}),this.pie5=this.pie5||PI(this.secondaryColor,{l:-30}),this.pie6=this.pie6||PI(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||PI(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||PI(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||PI(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||PI(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||PI(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||PI(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||PI(this.primaryColor,{h:-30}),this.git4=this.git4||PI(this.primaryColor,{h:-60}),this.git5=this.git5||PI(this.primaryColor,{h:-90}),this.git6=this.git6||PI(this.primaryColor,{h:60}),this.git7=this.git7||PI(this.primaryColor,{h:120}),this.darkMode?(this.git0=NI(this.git0,25),this.git1=NI(this.git1,25),this.git2=NI(this.git2,25),this.git3=NI(this.git3,25),this.git4=NI(this.git4,25),this.git5=NI(this.git5,25),this.git6=NI(this.git6,25),this.git7=NI(this.git7,25)):(this.git0=OI(this.git0,25),this.git1=OI(this.git1,25),this.git2=OI(this.git2,25),this.git3=OI(this.git3,25),this.git4=OI(this.git4,25),this.git5=OI(this.git5,25),this.git6=OI(this.git6,25),this.git7=OI(this.git7,25)),this.gitInv0=this.gitInv0||zI(this.git0),this.gitInv1=this.gitInv1||zI(this.git1),this.gitInv2=this.gitInv2||zI(this.git2),this.gitInv3=this.gitInv3||zI(this.git3),this.gitInv4=this.gitInv4||zI(this.git4),this.gitInv5=this.gitInv5||zI(this.git5),this.gitInv6=this.gitInv6||zI(this.git6),this.gitInv7=this.gitInv7||zI(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||jI,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||VI}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const ZI=t=>{const e=new GI;return e.calculate(t),e};class KI{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=NI(this.contrast,55),this.background="#ffffff",this.tertiaryColor=PI(this.primaryColor,{h:-160}),this.primaryBorderColor=FI(this.primaryColor,this.darkMode),this.secondaryBorderColor=FI(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=FI(this.tertiaryColor,this.darkMode),this.primaryTextColor=zI(this.primaryColor),this.secondaryTextColor=zI(this.secondaryColor),this.tertiaryTextColor=zI(this.tertiaryColor),this.lineColor=zI(this.background),this.textColor=zI(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=NI(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||zI(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||NI(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||OI(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=NI(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=NI(this.contrast,30),this.sectionBkgColor2=NI(this.contrast,30),this.taskBorderColor=OI(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=NI(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=OI(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=PI(this.primaryColor,{h:64}),this.fillType3=PI(this.secondaryColor,{h:64}),this.fillType4=PI(this.primaryColor,{h:-64}),this.fillType5=PI(this.secondaryColor,{h:-64}),this.fillType6=PI(this.primaryColor,{h:128}),this.fillType7=PI(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=OI(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||PI(this.primaryColor,{h:-30}),this.git4=this.pie5||PI(this.primaryColor,{h:-60}),this.git5=this.pie6||PI(this.primaryColor,{h:-90}),this.git6=this.pie7||PI(this.primaryColor,{h:60}),this.git7=this.pie8||PI(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||zI(this.git0),this.gitInv1=this.gitInv1||zI(this.git1),this.gitInv2=this.gitInv2||zI(this.git2),this.gitInv3=this.gitInv3||zI(this.git3),this.gitInv4=this.gitInv4||zI(this.git4),this.gitInv5=this.gitInv5||zI(this.git5),this.gitInv6=this.gitInv6||zI(this.git6),this.gitInv7=this.gitInv7||zI(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||jI,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||VI}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}}const QI={base:{getThemeVariables:HI},dark:{getThemeVariables:WI},default:{getThemeVariables:YI},forest:{getThemeVariables:ZI},neutral:{getThemeVariables:t=>{const e=new KI;return e.calculate(t),e}}},XI={theme:"default",themeVariables:QI.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16};XI.class&&(XI.class.arrowMarkerAbsolute=XI.arrowMarkerAbsolute),XI.gitGraph&&(XI.gitGraph.arrowMarkerAbsolute=XI.arrowMarkerAbsolute);const JI=(t,e="")=>Object.keys(t).reduce(((n,r)=>Array.isArray(t[r])?n:"object"==typeof t[r]&&null!==t[r]?[...n,e+r,...JI(t[r],"")]:[...n,e+r]),[]),tB=JI(XI,""),eB=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,nB=/\s*%%.*\n/gm,rB={},iB=function(t,e){t=t.replace(eB,"").replace(nB,"\n");for(const[n,{detector:r}]of Object.entries(rB))if(r(t,e))return n;throw new Error(`No diagram type detected for text: ${t}`)},oB=(t,e,n)=>{if(rB[t])throw new Error(`Detector with key ${t} already exists`);rB[t]={detector:e,loader:n},u.debug(`Detector with key ${t} added${n?" with loader":""}`)},sB=t=>rB[t].loader,aB=function(t,e,n){const{depth:r,clobber:i}=Object.assign({depth:2,clobber:!1},n);return Array.isArray(e)&&!Array.isArray(t)?(e.forEach((e=>aB(t,e,n))),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t):void 0===t||r<=0?null!=t&&"object"==typeof t&&"object"==typeof e?Object.assign(t,e):e:(void 0!==e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach((n=>{"object"!=typeof e[n]||void 0!==t[n]&&"object"!=typeof t[n]?(i||"object"!=typeof t[n]&&"object"!=typeof e[n])&&(t[n]=e[n]):(void 0===t[n]&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=aB(t[n],e[n],{depth:r-1,clobber:i}))})),t)};var cB,lB,dB,uB,hB,gB,fB,pB,mB,bB,kB,wB,yB="object"==typeof t&&t&&t.Object===Object&&t,_B=yB,vB="object"==typeof self&&self&&self.Object===Object&&self,AB=_B||vB||Function("return this")();function CB(){if(lB)return cB;lB=1;var t=AB.Symbol;return cB=t}function xB(){if(uB)return dB;uB=1;var t=CB(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(t){var e=n.call(t,i),o=t[i];try{t[i]=void 0;var s=!0}catch(t){}var a=r.call(t);return s&&(e?t[i]=o:delete t[i]),a}return dB=o}function EB(){if(gB)return hB;gB=1;var t=Object.prototype.toString;function e(e){return t.call(e)}return hB=e}function TB(){if(pB)return fB;pB=1;var t=CB(),e=xB(),n=EB(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function s(t){return null==t?void 0===t?i:r:o&&o in Object(t)?e(t):n(t)}return fB=s}function SB(){if(bB)return mB;function t(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}return bB=1,mB=t}function DB(){if(wB)return kB;wB=1;var t=TB(),e=SB(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function s(s){if(!e(s))return!1;var a=t(s);return a==r||a==i||a==n||a==o}return kB=s}var MB,IB=AB["__core-js_shared__"],BB=(MB=/[^.]+$/.exec(IB&&IB.keys&&IB.keys.IE_PROTO||""))?"Symbol(src)_1."+MB:"";function LB(t){return!!BB&&BB in t}var NB,OB,PB=LB;function RB(){if(OB)return NB;OB=1;var t=Function.prototype.toString;function e(e){if(null!=e){try{return t.call(e)}catch(t){}try{return e+""}catch(t){}}return""}return NB=e}var zB=DB(),FB=PB,jB=SB(),VB=RB(),$B=/[\\^$.*+?()[\]{}|]/g,HB=/^\[object .+?Constructor\]$/,UB=Function.prototype,WB=Object.prototype,qB=UB.toString,YB=WB.hasOwnProperty,GB=RegExp("^"+qB.call(YB).replace($B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZB(t){return!(!jB(t)||FB(t))&&(zB(t)?GB:HB).test(VB(t))}function KB(t,e){return null==t?void 0:t[e]}var QB=ZB,XB=KB;function JB(t,e){var n=XB(t,e);return QB(n)?n:void 0}var tL=JB,eL=tL(Object,"create"),nL=eL;function rL(){this.__data__=nL?nL(null):{},this.size=0}var iL=rL;function oL(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var sL=oL,aL=eL,cL="__lodash_hash_undefined__",lL=Object.prototype.hasOwnProperty;function dL(t){var e=this.__data__;if(aL){var n=e[t];return n===cL?void 0:n}return lL.call(e,t)?e[t]:void 0}var uL=dL,hL=eL,gL=Object.prototype.hasOwnProperty;function fL(t){var e=this.__data__;return hL?void 0!==e[t]:gL.call(e,t)}var pL=eL,mL="__lodash_hash_undefined__";function bL(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=pL&&void 0===e?mL:e,this}var kL=iL,wL=sL,yL=uL,_L=fL,vL=bL;function AL(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}AL.prototype.clear=kL,AL.prototype.delete=wL,AL.prototype.get=yL,AL.prototype.has=_L,AL.prototype.set=vL;var CL=AL;function xL(){this.__data__=[],this.size=0}var EL,TL,SL=xL;function DL(){if(TL)return EL;function t(t,e){return t===e||t!=t&&e!=e}return TL=1,EL=t}var ML=DL();function IL(t,e){for(var n=t.length;n--;)if(ML(t[n][0],e))return n;return-1}var BL=IL,LL=BL,NL=Array.prototype.splice;function OL(t){var e=this.__data__,n=LL(e,t);return!(n<0||(n==e.length-1?e.pop():NL.call(e,n,1),--this.size,0))}var PL=BL;function RL(t){var e=this.__data__,n=PL(e,t);return n<0?void 0:e[n][1]}var zL=BL;function FL(t){return zL(this.__data__,t)>-1}var jL=BL;function VL(t,e){var n=this.__data__,r=jL(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var $L=SL,HL=OL,UL=RL,WL=FL,qL=VL;function YL(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}YL.prototype.clear=$L,YL.prototype.delete=HL,YL.prototype.get=UL,YL.prototype.has=WL,YL.prototype.set=qL;var GL=YL,ZL=tL(AB,"Map"),KL=CL,QL=GL,XL=ZL;function JL(){this.size=0,this.__data__={hash:new KL,map:new(XL||QL),string:new KL}}function tN(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var eN=tN;function nN(t,e){var n=t.__data__;return eN(e)?n["string"==typeof e?"string":"hash"]:n.map}var rN=nN;function iN(t){var e=rN(this,t).delete(t);return this.size-=e?1:0,e}var oN=nN;function sN(t){return oN(this,t).get(t)}var aN=nN;function cN(t){return aN(this,t).has(t)}var lN=nN;function dN(t,e){var n=lN(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var uN=JL,hN=iN,gN=sN,fN=cN,pN=dN;function mN(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mN.prototype.clear=uN,mN.prototype.delete=hN,mN.prototype.get=gN,mN.prototype.has=fN,mN.prototype.set=pN;var bN=mN,kN=bN,wN="Expected a function";function yN(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(wN);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(yN.Cache||kN),n}yN.Cache=kN;var _N=yN;const vN={curveBasis:PS,curveBasisClosed:zS,curveBasisOpen:jS,curveLinear:BT,curveLinearClosed:iD,curveMonotoneX:hD,curveMonotoneY:gD,curveNatural:mD,curveStep:kD,curveStepAfter:yD,curveStepBefore:wD},AN=/[%]{2}[{]\s*(?:(?:(\w+)\s*:|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,CN=/\s*(?:(?:(\w+)(?=:):|(\w+))\s*(?:(?:(\w+))|((?:(?![}][%]{2}).|\r?\n)*))?\s*)(?:[}][%]{2})?/gi,xN=function(t,e){const n=EN(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const t=n.map((t=>t.args));ZN(t),r=aB(r,[...t])}else r=n.args;if(r){let n=iB(t,e);["config"].forEach((t=>{void 0!==r[t]&&("flowchart-v2"===n&&(n="flowchart"),r[n]=r[t],delete r[t])}))}return r},EN=function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${CN.source})(?=[}][%]{2}).*\n`,"ig");let r;t=t.trim().replace(n,"").replace(/'/gm,'"'),u.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);const i=[];for(;null!==(r=AN.exec(t));)if(r.index===AN.lastIndex&&AN.lastIndex++,r&&!e||e&&r[1]&&r[1].match(e)||e&&r[2]&&r[2].match(e)){const t=r[1]?r[1]:r[2],e=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:t,args:e})}return 0===i.length&&i.push({type:t,args:null}),1===i.length?i[0]:i}catch(n){return u.error(`ERROR: ${n.message} - Unable to parse directive\n      ${null!==e?" type:"+e:""} based on the text:${t}`),{type:null,args:null}}},TN=function(t,e){for(let n=0;n<e.length;n++)if(e[n].match(t))return n;return-1},SN=(t,e)=>{if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return vN[n]||e},DN=(t,e)=>{const n=t.trim();if(n)return"loose"!==e.securityLevel?p(n):n},MN=(t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let o=window;for(let t=0;t<r;t++)if(o=o[n[t]],!o)return;o[i](...e)},IN=(t,e)=>t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0,BN=t=>{let e,n=0;t.forEach((t=>{n+=IN(t,e),e=t}));let r,i=n/2;return e=void 0,t.forEach((t=>{if(e&&!r){const n=IN(t,e);if(n<i)i-=n;else{const o=i/n;o<=0&&(r=e),o>=1&&(r={x:t.x,y:t.y}),o>0&&o<1&&(r={x:(1-o)*e.x+o*t.x,y:(1-o)*e.y+o*t.y})}}e=t})),r},LN=t=>1===t.length?t[0]:BN(t),NN=(t,e,n)=>{let r;u.info("our points",e),e[0]!==n&&(e=e.reverse()),e.forEach((t=>{totalDistance+=IN(t,r),r=t}));let i,o=25;r=void 0,e.forEach((t=>{if(r&&!i){const e=IN(t,r);if(e<o)o-=e;else{const n=o/e;n<=0&&(i=r),n>=1&&(i={x:t.x,y:t.y}),n>0&&n<1&&(i={x:(1-n)*r.x+n*t.x,y:(1-n)*r.y+n*t.y})}}r=t}));const s=t?10:5,a=Math.atan2(e[0].y-i.y,e[0].x-i.x),c={x:0,y:0};return c.x=Math.sin(a)*s+(e[0].x+i.x)/2,c.y=-Math.cos(a)*s+(e[0].y+i.y)/2,c},ON=(t,e,n)=>{let r,i=JSON.parse(JSON.stringify(n));u.info("our points",i),"start_left"!==e&&"start_right"!==e&&(i=i.reverse()),i.forEach((t=>{r=t}));let o,s=25+t;r=void 0,i.forEach((t=>{if(r&&!o){const e=IN(t,r);if(e<s)s-=e;else{const n=s/e;n<=0&&(o=r),n>=1&&(o={x:t.x,y:t.y}),n>0&&n<1&&(o={x:(1-n)*r.x+n*t.x,y:(1-n)*r.y+n*t.y})}}r=t}));const a=10+.5*t,c=Math.atan2(i[0].y-o.y,i[0].x-o.x),l={x:0,y:0};return l.x=Math.sin(c)*a+(i[0].x+o.x)/2,l.y=-Math.cos(c)*a+(i[0].y+o.y)/2,"start_left"===e&&(l.x=Math.sin(c+Math.PI)*a+(i[0].x+o.x)/2,l.y=-Math.cos(c+Math.PI)*a+(i[0].y+o.y)/2),"end_right"===e&&(l.x=Math.sin(c-Math.PI)*a+(i[0].x+o.x)/2-5,l.y=-Math.cos(c-Math.PI)*a+(i[0].y+o.y)/2-5),"end_left"===e&&(l.x=Math.sin(c)*a+(i[0].x+o.x)/2-5,l.y=-Math.cos(c)*a+(i[0].y+o.y)/2-5),l},PN=t=>{let e="",n="";for(let r=0;r<t.length;r++)void 0!==t[r]&&(t[r].startsWith("color:")||t[r].startsWith("text-align:")?n=n+t[r]+";":e=e+t[r]+";");return{style:e,labelStyle:n}};let RN=0;const zN=()=>(RN++,"id-"+Math.random().toString(36).substr(2,12)+"-"+RN);function FN(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}const jN=t=>FN(t.length),VN=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0}},$N=function(t,e){const n=e.text.replace(gI.lineBreakRegex," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",e.fontSize),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),void 0!==e.class&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.attr("fill",e.fill),i.text(n),r},HN=_N(((t,e,n)=>{if(!t)return t;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),gI.lineBreakRegex.test(t))return t;const r=t.split(" "),i=[];let o="";return r.forEach(((t,s)=>{const a=qN(`${t} `,n),c=qN(o,n);if(a>e){const{hyphenatedStrings:r,remainingWord:s}=UN(t,e,"-",n);i.push(o,...r),o=s}else c+a>=e?(i.push(o),o=t):o=[o,t].filter(Boolean).join(" ");s+1===r.length&&i.push(o)})),i.filter((t=>""!==t)).join(n.joinWith)}),((t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`)),UN=_N(((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=t.split(""),o=[];let s="";return i.forEach(((t,a)=>{const c=`${s}${t}`;if(qN(c,r)>=e){const t=a+1,e=i.length===t,r=`${c}${n}`;o.push(e?c:r),s=""}else s=c})),{hyphenatedStrings:o,remainingWord:s}}),((t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`)),WN=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),YN(t,e).height},qN=function(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),YN(t,e).width},YN=_N((function(t,e){e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);const{fontSize:n,fontFamily:r,fontWeight:i}=e;if(!t)return{width:0,height:0};const o=["sans-serif",r],s=t.split(gI.lineBreakRegex),a=[],c=Qr("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const l=c.append("svg");for(const t of o){let e=0;const r={width:0,height:0,lineHeight:0};for(const o of s){const s=VN();s.text=o;const a=$N(l,s).style("font-size",n).style("font-weight",i).style("font-family",t),c=(a._groups||a)[0][0].getBBox();r.width=Math.round(Math.max(r.width,c.width)),e=Math.round(c.height),r.height+=e,r.lineHeight=Math.round(Math.max(r.lineHeight,e))}a.push(r)}return l.remove(),a[isNaN(a[1].height)||isNaN(a[1].width)||isNaN(a[1].lineHeight)||a[0].height>a[1].height&&a[0].width>a[1].width&&a[0].lineHeight>a[1].lineHeight?0:1]}),((t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`));let GN;const ZN=t=>{if(u.debug("directiveSanitizer called with",t),"object"==typeof t&&(t.length?t.forEach((t=>ZN(t))):Object.keys(t).forEach((e=>{u.debug("Checking key",e),0===e.indexOf("__")&&(u.debug("sanitize deleting __ option",e),delete t[e]),e.indexOf("proto")>=0&&(u.debug("sanitize deleting proto option",e),delete t[e]),e.indexOf("constr")>=0&&(u.debug("sanitize deleting constr option",e),delete t[e]),e.indexOf("themeCSS")>=0&&(u.debug("sanitizing themeCss option"),t[e]=KN(t[e])),e.indexOf("fontFamily")>=0&&(u.debug("sanitizing fontFamily option"),t[e]=KN(t[e])),e.indexOf("altFontFamily")>=0&&(u.debug("sanitizing altFontFamily option"),t[e]=KN(t[e])),tB.indexOf(e)<0?(u.debug("sanitize deleting option",e),delete t[e]):"object"==typeof t[e]&&(u.debug("sanitize deleting object",e),ZN(t[e]))}))),t.themeVariables){const e=Object.keys(t.themeVariables);for(let n=0;n<e.length;n++){const r=e[n],i=t.themeVariables[r];i&&i.match&&!i.match(/^[a-zA-Z0-9#,";()%. ]+$/)&&(t.themeVariables[r]="")}}u.debug("After sanitization",t)},KN=t=>{let e=0,n=0;for(let r=0;r<t.length;r++){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===t[r]?e++:"}"===t[r]&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t};function QN(t){return"str"in t}function XN(t){return t instanceof Error?t.message:String(t)}const JN={assignWithDepth:aB,wrapLabel:HN,calculateTextHeight:WN,calculateTextWidth:qN,calculateTextDimensions:YN,detectInit:xN,detectDirective:EN,isSubstringInArray:TN,interpolateToCurve:SN,calcLabelPosition:LN,calcCardinalityPosition:NN,calcTerminalLabelPosition:ON,formatUrl:DN,getStylesFromArray:PN,generateId:zN,random:jN,runFunc:MN,entityDecode:function(t){return GN=GN||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),GN.innerHTML=t,unescape(GN.textContent)},initIdGenerator:class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:ZN,sanitizeCss:KN};var tO="comm",eO="rule",nO="decl",rO="@import",iO="@keyframes",oO=Math.abs,sO=String.fromCharCode;function aO(t){return t.trim()}function cO(t,e,n){return t.replace(e,n)}function lO(t,e){return t.indexOf(e)}function dO(t,e){return 0|t.charCodeAt(e)}function uO(t,e,n){return t.slice(e,n)}function hO(t){return t.length}function gO(t){return t.length}function fO(t,e){return e.push(t),t}var pO=1,mO=1,bO=0,kO=0,wO=0,yO="";function _O(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:pO,column:mO,length:s,return:""}}function vO(){return wO}function AO(){return wO=kO>0?dO(yO,--kO):0,mO--,10===wO&&(mO=1,pO--),wO}function CO(){return wO=kO<bO?dO(yO,kO++):0,mO++,10===wO&&(mO=1,pO++),wO}function xO(){return dO(yO,kO)}function EO(){return kO}function TO(t,e){return uO(yO,t,e)}function SO(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DO(t){return pO=mO=1,bO=hO(yO=t),kO=0,[]}function MO(t){return yO="",t}function IO(t){return aO(TO(kO-1,NO(91===t?t+2:40===t?t+1:t)))}function BO(t){for(;(wO=xO())&&wO<33;)CO();return SO(t)>2||SO(wO)>3?"":" "}function LO(t,e){for(;--e&&CO()&&!(wO<48||wO>102||wO>57&&wO<65||wO>70&&wO<97););return TO(t,EO()+(e<6&&32==xO()&&32==CO()))}function NO(t){for(;CO();)switch(wO){case t:return kO;case 34:case 39:34!==t&&39!==t&&NO(wO);break;case 40:41===t&&NO(t);break;case 92:CO()}return kO}function OO(t,e){for(;CO()&&t+wO!==57&&(t+wO!==84||47!==xO()););return"/*"+TO(e,kO-1)+"*"+sO(47===t?t:CO())}function PO(t){for(;!SO(xO());)CO();return TO(t,kO)}function RO(t){return MO(zO("",null,null,null,[""],t=DO(t),0,[0],t))}function zO(t,e,n,r,i,o,s,a,c){for(var l=0,d=0,u=s,h=0,g=0,f=0,p=1,m=1,b=1,k=0,w="",y=i,_=o,v=r,A=w;m;)switch(f=k,k=CO()){case 40:if(108!=f&&58==dO(A,u-1)){-1!=lO(A+=cO(IO(k),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:A+=IO(k);break;case 9:case 10:case 13:case 32:A+=BO(f);break;case 92:A+=LO(EO()-1,7);continue;case 47:switch(xO()){case 42:case 47:fO(jO(OO(CO(),EO()),e,n),c);break;default:A+="/"}break;case 123*p:a[l++]=hO(A)*b;case 125*p:case 59:case 0:switch(k){case 0:case 125:m=0;case 59+d:g>0&&hO(A)-u&&fO(g>32?VO(A+";",r,n,u-1):VO(cO(A," ","")+";",r,n,u-2),c);break;case 59:A+=";";default:if(fO(v=FO(A,e,n,l,d,i,a,w,y=[],_=[],u),o),123===k)if(0===d)zO(A,e,v,v,y,o,u,a,_);else switch(h){case 100:case 109:case 115:zO(t,v,v,r&&fO(FO(t,v,v,0,0,i,a,w,i,y=[],u),_),i,_,u,a,r?y:_);break;default:zO(A,v,v,v,[""],_,0,a,_)}}l=d=g=0,p=b=1,w=A="",u=s;break;case 58:u=1+hO(A),g=f;default:if(p<1)if(123==k)--p;else if(125==k&&0==p++&&125==AO())continue;switch(A+=sO(k),k*p){case 38:b=d>0?1:(A+="\f",-1);break;case 44:a[l++]=(hO(A)-1)*b,b=1;break;case 64:45===xO()&&(A+=IO(CO())),h=xO(),d=u=hO(w=A+=PO(EO())),k++;break;case 45:45===f&&2==hO(A)&&(p=0)}}return o}function FO(t,e,n,r,i,o,s,a,c,l,d){for(var u=i-1,h=0===i?o:[""],g=gO(h),f=0,p=0,m=0;f<r;++f)for(var b=0,k=uO(t,u+1,u=oO(p=s[f])),w=t;b<g;++b)(w=aO(p>0?h[b]+" "+k:cO(k,/&\f/g,h[b])))&&(c[m++]=w);return _O(t,e,n,0===i?eO:a,c,l,d)}function jO(t,e,n){return _O(t,e,n,tO,sO(vO()),uO(t,2,-2),0)}function VO(t,e,n,r){return _O(t,e,n,nO,uO(t,0,r),uO(t,r+1,-1),r)}function $O(t,e){for(var n="",r=gO(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function HO(t,e,n,r){switch(t.type){case rO:case nO:return t.return=t.return||t.value;case tO:return"";case iO:return t.return=t.value+"{"+$O(t.children,r)+"}";case eO:t.value=t.props.join(",")}return hO(n=$O(t.children,r))?t.return=t.value+"{"+n+"}":""}const UO={name:"mermaid",version:"9.2.2",description:"Markdownish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",type:"commonjs",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","build:code":"node .esbuild/esbuild.cjs","build:types":"tsc -p ./tsconfig.json --emitDeclarationOnly","build:watch":"yarn build:code --watch","build:esbuild":'concurrently "yarn build:code" "yarn build:types"',build:"yarn clean; yarn build:esbuild",dev:"node .esbuild/serve.cjs","docs:build":"ts-node-esm src/docs.mts","docs:verify":"yarn docs:build --verify","todo-postbuild":"documentation build src/mermaidAPI.ts src/config.ts src/defaultConfig.ts --shallow -f md --markdown-toc false > src/docs/Setup.md && prettier --write src/docs/Setup.md",release:"yarn build",lint:"eslint --cache --ignore-path .gitignore . && yarn lint:jison && prettier --check .","lint:fix":"eslint --fix --ignore-path .gitignore . && prettier --write .","lint:jison":"ts-node-esm src/jison/lint.mts",cypress:"cypress run","cypress:open":"cypress open",e2e:"start-server-and-test dev http://localhost:9000/ cypress","todo-prepare":'concurrently "husky install" "yarn build"',"pre-commit":"lint-staged"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0",dagre:"^0.8.5","dagre-d3":"^0.6.4",dompurify:"2.4.0","fast-clone":"^1.5.13",graphlib:"^2.1.8",khroma:"^2.0.0",lodash:"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@applitools/eyes-cypress":"^3.25.7","@commitlint/cli":"^17.1.2","@commitlint/config-conventional":"^17.0.0","@types/d3":"^7.4.0","@types/dompurify":"^2.3.4","@types/eslint":"^8.4.6","@types/express":"^4.17.13","@types/jsdom":"^20.0.0","@types/lodash":"^4.14.185","@types/prettier":"^2.7.0","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.37.0","@typescript-eslint/parser":"^5.37.0",concurrently:"^7.4.0",coveralls:"^3.1.1",cypress:"^10.0.0","cypress-image-snapshot":"^4.0.1",documentation:"13.2.0",esbuild:"^0.15.8",eslint:"^8.23.1","eslint-config-prettier":"^8.5.0","eslint-plugin-cypress":"^2.12.1","eslint-plugin-html":"^7.1.0","eslint-plugin-jest":"^27.0.4","eslint-plugin-jsdoc":"^39.3.6","eslint-plugin-json":"^3.1.0","eslint-plugin-markdown":"^3.0.0",express:"^4.18.1",globby:"^13.1.2",husky:"^8.0.0","identity-obj-proxy":"^3.0.0",jison:"^0.4.18","js-base64":"3.7.2",jsdom:"^20.0.0","lint-staged":"^13.0.0",moment:"^2.23.0","path-browserify":"^1.0.1",prettier:"^2.7.1","prettier-plugin-jsdoc":"^0.4.2",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.12.6","ts-node":"^10.9.1",typescript:"^4.8.3","unist-util-flatmap":"^1.0.0"},resolutions:{d3:"^7.0.0"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},WO=Object.freeze(XI);let qO,YO=aB({},WO),GO=[],ZO=aB({},WO);const KO=(t,e)=>{let n=aB({},t),r={};for(let t=0;t<e.length;t++){const n=e[t];rP(n),r=aB(r,n)}if(n=aB(n,r),r.theme&&r.theme in QI){const t=aB({},qO),e=aB(t.themeVariables||{},r.themeVariables);n.theme&&n.theme in QI&&(n.themeVariables=QI[n.theme].getThemeVariables(e))}return ZO=n,lP(ZO),ZO},QO=t=>(YO=aB({},WO),YO=aB(YO,t),t.theme&&QI[t.theme]&&(YO.themeVariables=QI[t.theme].getThemeVariables(t.themeVariables)),KO(YO,GO),YO),XO=t=>{qO=aB({},t)},JO=t=>(YO=aB(YO,t),KO(YO,GO),YO),tP=()=>aB({},YO),eP=t=>(lP(t),aB(ZO,t),nP()),nP=()=>aB({},ZO),rP=t=>{var e;["secure",...null!=(e=YO.secure)?e:[]].forEach((e=>{void 0!==t[e]&&(u.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])})),Object.keys(t).forEach((e=>{0===e.indexOf("__")&&delete t[e]})),Object.keys(t).forEach((e=>{"string"==typeof t[e]&&(t[e].indexOf("<")>-1||t[e].indexOf(">")>-1||t[e].indexOf("url(data:")>-1)&&delete t[e],"object"==typeof t[e]&&rP(t[e])}))},iP=t=>{t.fontFamily&&(t.themeVariables&&t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily})),GO.push(t),KO(YO,GO)},oP=(t=YO)=>{GO=[],KO(t,GO)};var sP=(t=>(t.LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.",t))(sP||{});const aP={},cP=t=>{aP[t]||(u.warn(sP[t]),aP[t]=!0)},lP=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&cP("LAZY_LOAD_DEPRECATED")},dP=function(t,e){for(let n of e)t.attr(n[0],n[1])},uP=function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):r.set("width",e),r},hP=function(t,e,n,r){const i=uP(e,n,r);dP(t,i)},gP=function(t,e,n,r){const i=e.node().getBBox(),o=i.width,s=i.height;u.info(`SVG bounds: ${o}x${s}`,i);let a=0,c=0;u.info(`Graph bounds: ${a}x${c}`,t),a=o+2*n,c=s+2*n,u.info(`Calculated bounds: ${a}x${c}`),hP(e,c,a,r);const l=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",l)},fP=t=>`g.classGroup text {\n  fill: ${t.nodeBorder};\n  fill: ${t.classText};\n  stroke: none;\n  font-family: ${t.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${t.classText};\n}\n.edgeLabel .label rect {\n  fill: ${t.mainBkg};\n}\n.label text {\n  fill: ${t.classText};\n}\n.edgeLabel .label span {\n  background: ${t.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${t.nodeBorder};\n  stroke: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${t.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${t.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n#compositionStart, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n}\n\n`,pP=t=>`\n  .entityBox {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxOdd {\n    fill: ${t.attributeBackgroundColorOdd};\n    stroke: ${t.nodeBorder};\n  }\n\n  .attributeBoxEven {\n    fill:  ${t.attributeBackgroundColorEven};\n    stroke: ${t.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${t.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${t.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n    .relationshipLine {\n      stroke: ${t.lineColor};\n    }\n`,mP=()=>"",bP=t=>`.label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .cluster-label text {\n    fill: ${t.titleColor};\n  }\n  .cluster-label span {\n    color: ${t.titleColor};\n  }\n\n  .label text,span {\n    fill: ${t.nodeTextColor||t.textColor};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${t.edgeLabelBackground};\n      fill: ${t.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n    fill: ${t.clusterBkg};\n    stroke: ${t.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  .cluster span {\n    color: ${t.titleColor};\n  }\n  /* .cluster div {\n    color: ${t.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${t.fontFamily};\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n`,kP=t=>`\n  .mermaid-main-font {\n    font-family: "trebuchet ms", verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  .exclude-range {\n    fill: ${t.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${t.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${t.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${t.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    // font-size: ${t.ganttFontSize};\n    // text-height: 14px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${t.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n    text {\n      font-family: ${t.fontFamily};\n      fill: ${t.textColor};\n    }\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${t.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n\n  // .taskText:not([font-size]) {\n  //   font-size: ${t.ganttFontSize};\n  // }\n\n  .taskTextOutsideRight {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: start;\n    // font-size: ${t.ganttFontSize};\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: end;\n    // font-size: ${t.ganttFontSize};\n  }\n\n  /* Special case clickable */\n  .task.clickable {\n    cursor: pointer;\n  }\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${t.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${t.taskBkgColor};\n    stroke: ${t.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${t.activeTaskBkgColor};\n    stroke: ${t.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${t.doneTaskBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor}    ;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n`,wP=()=>"",yP=t=>`\n  .pieCircle{\n    stroke: ${t.pieStrokeColor};\n    stroke-width : ${t.pieStrokeWidth};\n    opacity : ${t.pieOpacity};\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${t.pieTitleTextSize};\n    fill: ${t.pieTitleTextColor};\n    font-family: ${t.fontFamily};\n  }\n  .slice {\n    font-family: ${t.fontFamily};\n    fill: ${t.pieSectionTextColor};\n    font-size:${t.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${t.pieLegendTextColor};\n    font-family: ${t.fontFamily};\n    font-size: ${t.pieLegendTextSize};\n  }\n`,_P=t=>`\n\n  marker {\n    fill: ${t.relationColor};\n    stroke: ${t.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${t.lineColor};\n  }\n\n  svg {\n    font-family: ${t.fontFamily};\n    font-size: ${t.fontSize};\n  }\n\n  .reqBox {\n    fill: ${t.requirementBackground};\n    fill-opacity: 100%;\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${t.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${t.relationLabelBackground};\n    fill-opacity: 100%;\n  }\n\n  .req-title-line {\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${t.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${t.relationLabelColor};\n  }\n\n`,vP=t=>`.actor {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${t.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${t.actorLineColor};\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${t.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${t.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${t.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .messageText {\n    fill: ${t.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${t.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${t.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${t.noteBorderColor};\n    fill: ${t.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${t.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${t.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n    stroke-width: 2px;\n  }\n`,AP=t=>`\ndefs #statediagram-barbEnd {\n    fill: ${t.transitionColor};\n    stroke: ${t.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${t.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${t.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${t.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${t.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${t.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${t.noteBorderColor};\n  fill: ${t.noteBkgColor};\n\n  text {\n    fill: ${t.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${t.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel .label text {\n  fill: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${t.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${t.innerEndBackground};\n  stroke: ${t.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${t.compositeBackground||t.background};\n  // stroke: ${t.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${t.stateBkg||t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${t.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${t.compositeTitleBackground};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${t.stateLabelColor};\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${t.stateBorder||t.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${t.compositeBackground||t.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${t.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${t.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${t.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${t.lineColor};\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n`,CP=t=>`.label {\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    color: ${t.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${t.textColor}\n  }\n\n  .legend {\n    fill: ${t.textColor};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${t.textColor}\n  }\n\n  .face {\n    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${t.fillType0?`fill: ${t.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${t.fillType0?`fill: ${t.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${t.fillType0?`fill: ${t.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${t.fillType0?`fill: ${t.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${t.fillType0?`fill: ${t.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${t.fillType0?`fill: ${t.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${t.fillType0?`fill: ${t.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${t.fillType0?`fill: ${t.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${t.actor0?`fill: ${t.actor0}`:""};\n  }\n  .actor-1 {\n    ${t.actor1?`fill: ${t.actor1}`:""};\n  }\n  .actor-2 {\n    ${t.actor2?`fill: ${t.actor2}`:""};\n  }\n  .actor-3 {\n    ${t.actor3?`fill: ${t.actor3}`:""};\n  }\n  .actor-4 {\n    ${t.actor4?`fill: ${t.actor4}`:""};\n  }\n  .actor-5 {\n    ${t.actor5?`fill: ${t.actor5}`:""};\n  }\n`,xP=t=>`.person {\n    stroke: ${t.personBorder};\n    fill: ${t.personBkg};\n  }\n`,EP={flowchart:bP,"flowchart-v2":bP,sequence:vP,gantt:kP,classDiagram:fP,"classDiagram-v2":fP,class:fP,stateDiagram:AP,state:AP,info:wP,pie:yP,er:pP,error:mP,journey:CP,requirement:_P,c4:xP},TP=(t,e,n)=>{let r="";return t in EP&&EP[t]?r=EP[t](n):u.warn(`No theme found for ${t}`),` {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n    fill: ${n.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  .error-icon {\n    fill: ${n.errorBkgColor};\n  }\n  .error-text {\n    fill: ${n.errorTextColor};\n    stroke: ${n.errorTextColor};\n  }\n\n  .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  .marker {\n    fill: ${n.lineColor};\n    stroke: ${n.lineColor};\n  }\n  .marker.cross {\n    stroke: ${n.lineColor};\n  }\n\n  svg {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n  }\n\n  ${r}\n\n  ${e}\n`},SP=(t,e)=>{EP[t]=e},DP=u,MP=h,IP=nP,BP=t=>sI(t,IP()),LP=gP,NP={},OP=(t,e,n)=>{DP.debug(`Registering diagram ${t}`),NP[t]&&DP.warn(`Diagram ${t} already registered.`),NP[t]=e,n&&oB(t,n),SP(t,e.styles),e.injectUtils&&e.injectUtils(DP,MP,IP,BP,LP),DP.debug(`Registered diagram ${t}. ${Object.keys(NP).join(", ")} diagrams registered.`)},PP=t=>{if(DP.debug(`Getting diagram ${t}. ${Object.keys(NP).join(", ")} diagrams registered.`),t in NP)return NP[t];throw new RP(t)};class RP extends Error{constructor(t){super(`Diagram ${t} not found.`)}}var zP=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,4],n=[1,7],r=[1,5],i=[1,9],o=[1,6],s=[2,6],a=[1,16],c=[6,8,14,20,22,24,25,27,29,32,37,40,50,54],l=[8,14,20,22,24,25,27,29,32,37,40],d=[8,13,14,20,22,24,25,27,29,32,37,40],u=[1,26],h=[6,8,14,50,54],g=[8,14,54],f=[1,65],p=[1,66],m=[1,67],b=[8,14,33,35,42,54],k={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ID:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,";":54,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",28:"ID",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[4,1],[4,1],[4,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 3:return o[a];case 4:return o[a-1];case 5:return r.setDirection(o[a-3]),o[a-1];case 7:r.setOptions(o[a-1]),this.$=o[a];break;case 8:o[a-1]+=o[a],this.$=o[a-1];break;case 10:this.$=[];break;case 11:o[a-1].push(o[a]),this.$=o[a-1];break;case 12:this.$=o[a-1];break;case 17:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 20:r.addSection(o[a].substr(8)),this.$=o[a].substr(8);break;case 22:r.checkout(o[a]);break;case 23:r.branch(o[a]);break;case 24:r.branch(o[a-2],o[a]);break;case 25:r.cherryPick(o[a],"",void 0);break;case 26:r.cherryPick(o[a-2],"",o[a]);break;case 27:case 29:r.cherryPick(o[a-2],"","");break;case 28:r.cherryPick(o[a],"",o[a-2]);break;case 30:r.merge(o[a],"","","");break;case 31:r.merge(o[a-2],o[a],"","");break;case 32:r.merge(o[a-2],"",o[a],"");break;case 33:r.merge(o[a-2],"","",o[a]);break;case 34:r.merge(o[a-4],o[a],"",o[a-2]);break;case 35:r.merge(o[a-4],"",o[a],o[a-2]);break;case 36:r.merge(o[a-4],"",o[a-2],o[a]);break;case 37:r.merge(o[a-4],o[a-2],o[a],"");break;case 38:r.merge(o[a-4],o[a-2],"",o[a]);break;case 39:r.merge(o[a-4],o[a],o[a-2],"");break;case 40:r.merge(o[a-6],o[a-4],o[a-2],o[a]);break;case 41:r.merge(o[a-6],o[a],o[a-4],o[a-2]);break;case 42:r.merge(o[a-6],o[a-4],o[a],o[a-2]);break;case 43:r.merge(o[a-6],o[a-2],o[a-4],o[a]);break;case 44:r.merge(o[a-6],o[a],o[a-2],o[a-4]);break;case 45:r.merge(o[a-6],o[a-2],o[a],o[a-4]);break;case 46:r.commit(o[a]);break;case 47:r.commit("","",r.commitType.NORMAL,o[a]);break;case 48:r.commit("","",o[a],"");break;case 49:r.commit("","",o[a],o[a-2]);break;case 50:r.commit("","",o[a-2],o[a]);break;case 51:r.commit("",o[a],r.commitType.NORMAL,"");break;case 52:r.commit("",o[a-2],r.commitType.NORMAL,o[a]);break;case 53:r.commit("",o[a],r.commitType.NORMAL,o[a-2]);break;case 54:r.commit("",o[a-2],o[a],"");break;case 55:r.commit("",o[a],o[a-2],"");break;case 56:r.commit("",o[a-4],o[a-2],o[a]);break;case 57:r.commit("",o[a-4],o[a],o[a-2]);break;case 58:r.commit("",o[a-2],o[a-4],o[a]);break;case 59:r.commit("",o[a],o[a-4],o[a-2]);break;case 60:r.commit("",o[a],o[a-2],o[a-4]);break;case 61:r.commit("",o[a-2],o[a],o[a-4]);break;case 62:r.commit(o[a],"",r.commitType.NORMAL,"");break;case 63:r.commit(o[a],"",r.commitType.NORMAL,o[a-2]);break;case 64:r.commit(o[a-2],"",r.commitType.NORMAL,o[a]);break;case 65:r.commit(o[a-2],"",o[a],"");break;case 66:r.commit(o[a],"",o[a-2],"");break;case 67:r.commit(o[a],o[a-2],r.commitType.NORMAL,"");break;case 68:r.commit(o[a-2],o[a],r.commitType.NORMAL,"");break;case 69:r.commit(o[a-4],"",o[a-2],o[a]);break;case 70:r.commit(o[a-4],"",o[a],o[a-2]);break;case 71:r.commit(o[a-2],"",o[a-4],o[a]);break;case 72:r.commit(o[a],"",o[a-4],o[a-2]);break;case 73:r.commit(o[a],"",o[a-2],o[a-4]);break;case 74:r.commit(o[a-2],"",o[a],o[a-4]);break;case 75:r.commit(o[a-4],o[a],o[a-2],"");break;case 76:r.commit(o[a-4],o[a-2],o[a],"");break;case 77:r.commit(o[a-2],o[a],o[a-4],"");break;case 78:r.commit(o[a],o[a-2],o[a-4],"");break;case 79:r.commit(o[a],o[a-4],o[a-2],"");break;case 80:r.commit(o[a-2],o[a-4],o[a],"");break;case 81:r.commit(o[a-4],o[a],r.commitType.NORMAL,o[a-2]);break;case 82:r.commit(o[a-4],o[a-2],r.commitType.NORMAL,o[a]);break;case 83:r.commit(o[a-2],o[a],r.commitType.NORMAL,o[a-4]);break;case 84:r.commit(o[a],o[a-2],r.commitType.NORMAL,o[a-4]);break;case 85:r.commit(o[a],o[a-4],r.commitType.NORMAL,o[a-2]);break;case 86:r.commit(o[a-2],o[a-4],r.commitType.NORMAL,o[a]);break;case 87:r.commit(o[a-6],o[a-4],o[a-2],o[a]);break;case 88:r.commit(o[a-6],o[a-4],o[a],o[a-2]);break;case 89:r.commit(o[a-6],o[a-2],o[a-4],o[a]);break;case 90:r.commit(o[a-6],o[a],o[a-4],o[a-2]);break;case 91:r.commit(o[a-6],o[a-2],o[a],o[a-4]);break;case 92:r.commit(o[a-6],o[a],o[a-2],o[a-4]);break;case 93:r.commit(o[a-4],o[a-6],o[a-2],o[a]);break;case 94:r.commit(o[a-4],o[a-6],o[a],o[a-2]);break;case 95:r.commit(o[a-2],o[a-6],o[a-4],o[a]);break;case 96:r.commit(o[a],o[a-6],o[a-4],o[a-2]);break;case 97:r.commit(o[a-2],o[a-6],o[a],o[a-4]);break;case 98:r.commit(o[a],o[a-6],o[a-2],o[a-4]);break;case 99:r.commit(o[a],o[a-4],o[a-2],o[a-6]);break;case 100:r.commit(o[a-2],o[a-4],o[a],o[a-6]);break;case 101:r.commit(o[a],o[a-2],o[a-4],o[a-6]);break;case 102:r.commit(o[a-2],o[a],o[a-4],o[a-6]);break;case 103:r.commit(o[a-4],o[a-2],o[a],o[a-6]);break;case 104:r.commit(o[a-4],o[a],o[a-2],o[a-6]);break;case 105:r.commit(o[a-2],o[a-4],o[a-6],o[a]);break;case 106:r.commit(o[a],o[a-4],o[a-6],o[a-2]);break;case 107:r.commit(o[a-2],o[a],o[a-6],o[a-4]);break;case 108:r.commit(o[a],o[a-2],o[a-6],o[a-4]);break;case 109:r.commit(o[a-4],o[a-2],o[a-6],o[a]);break;case 110:r.commit(o[a-4],o[a],o[a-6],o[a-2]);break;case 111:this.$="";break;case 112:this.$=o[a];break;case 113:this.$=r.commitType.NORMAL;break;case 114:this.$=r.commitType.REVERSE;break;case 115:this.$=r.commitType.HIGHLIGHT;break;case 118:r.parseDirective("%%{","open_directive");break;case 119:r.parseDirective(o[a],"type_directive");break;case 120:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 121:r.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:o},{1:[3]},{3:10,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:o},{3:11,4:2,5:3,6:e,8:n,14:r,46:8,50:i,54:o},{7:12,8:s,9:[1,13],10:[1,14],11:15,14:a},t(c,[2,122]),t(c,[2,123]),t(c,[2,124]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:s,11:15,14:a},{9:[1,21]},t(l,[2,10],{12:22,13:[1,23]}),t(d,[2,9]),{9:[1,25],48:24,53:u},t([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:s,11:15,14:a},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},t(d,[2,8]),t(h,[2,116]),{49:45,52:[1,46]},t(h,[2,121]),{1:[2,4]},{8:[1,47]},t(l,[2,11]),{4:48,8:n,14:r,54:o},t(l,[2,13]),t(g,[2,14]),t(g,[2,15]),t(g,[2,16]),{21:[1,49]},{23:[1,50]},t(g,[2,19]),t(g,[2,20]),t(g,[2,21]),{28:[1,51]},t(g,[2,111],{41:52,33:[1,55],34:[1,57],35:[1,53],38:[1,54],42:[1,56]}),{28:[1,58]},{33:[1,59],35:[1,60]},{28:[1,61]},{48:62,53:u},{53:[2,120]},{1:[2,5]},t(l,[2,12]),t(g,[2,17]),t(g,[2,18]),t(g,[2,22]),t(g,[2,46]),{34:[1,63]},{39:64,43:f,44:p,45:m},{34:[1,68]},{34:[1,69]},t(g,[2,112]),t(g,[2,30],{33:[1,70],35:[1,72],38:[1,71]}),{34:[1,73]},{34:[1,74],36:[1,75]},t(g,[2,23],{30:[1,76]}),t(h,[2,117]),t(g,[2,47],{33:[1,78],38:[1,77],42:[1,79]}),t(g,[2,48],{33:[1,81],35:[1,80],42:[1,82]}),t(b,[2,113]),t(b,[2,114]),t(b,[2,115]),t(g,[2,51],{35:[1,83],38:[1,84],42:[1,85]}),t(g,[2,62],{33:[1,88],35:[1,86],38:[1,87]}),{34:[1,89]},{39:90,43:f,44:p,45:m},{34:[1,91]},t(g,[2,25],{35:[1,92]}),{33:[1,93]},{33:[1,94]},{31:[1,95]},{39:96,43:f,44:p,45:m},{34:[1,97]},{34:[1,98]},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{39:103,43:f,44:p,45:m},{34:[1,104]},{34:[1,105]},{39:106,43:f,44:p,45:m},{34:[1,107]},t(g,[2,31],{35:[1,109],38:[1,108]}),t(g,[2,32],{33:[1,111],35:[1,110]}),t(g,[2,33],{33:[1,112],38:[1,113]}),{34:[1,114],36:[1,115]},{34:[1,116]},{34:[1,117]},t(g,[2,24]),t(g,[2,49],{33:[1,118],42:[1,119]}),t(g,[2,53],{38:[1,120],42:[1,121]}),t(g,[2,63],{33:[1,123],38:[1,122]}),t(g,[2,50],{33:[1,124],42:[1,125]}),t(g,[2,55],{35:[1,126],42:[1,127]}),t(g,[2,66],{33:[1,129],35:[1,128]}),t(g,[2,52],{38:[1,130],42:[1,131]}),t(g,[2,54],{35:[1,132],42:[1,133]}),t(g,[2,67],{35:[1,135],38:[1,134]}),t(g,[2,64],{33:[1,137],38:[1,136]}),t(g,[2,65],{33:[1,139],35:[1,138]}),t(g,[2,68],{35:[1,141],38:[1,140]}),{39:142,43:f,44:p,45:m},{34:[1,143]},{34:[1,144]},{34:[1,145]},{34:[1,146]},{39:147,43:f,44:p,45:m},t(g,[2,26]),t(g,[2,27]),t(g,[2,28]),t(g,[2,29]),{34:[1,148]},{34:[1,149]},{39:150,43:f,44:p,45:m},{34:[1,151]},{39:152,43:f,44:p,45:m},{34:[1,153]},{34:[1,154]},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{39:160,43:f,44:p,45:m},{34:[1,161]},{34:[1,162]},{34:[1,163]},{39:164,43:f,44:p,45:m},{34:[1,165]},{39:166,43:f,44:p,45:m},{34:[1,167]},{34:[1,168]},{34:[1,169]},{39:170,43:f,44:p,45:m},{34:[1,171]},t(g,[2,37],{35:[1,172]}),t(g,[2,38],{38:[1,173]}),t(g,[2,36],{33:[1,174]}),t(g,[2,39],{35:[1,175]}),t(g,[2,34],{38:[1,176]}),t(g,[2,35],{33:[1,177]}),t(g,[2,60],{42:[1,178]}),t(g,[2,73],{33:[1,179]}),t(g,[2,61],{42:[1,180]}),t(g,[2,84],{38:[1,181]}),t(g,[2,74],{33:[1,182]}),t(g,[2,83],{38:[1,183]}),t(g,[2,59],{42:[1,184]}),t(g,[2,72],{33:[1,185]}),t(g,[2,58],{42:[1,186]}),t(g,[2,78],{35:[1,187]}),t(g,[2,71],{33:[1,188]}),t(g,[2,77],{35:[1,189]}),t(g,[2,57],{42:[1,190]}),t(g,[2,85],{38:[1,191]}),t(g,[2,56],{42:[1,192]}),t(g,[2,79],{35:[1,193]}),t(g,[2,80],{35:[1,194]}),t(g,[2,86],{38:[1,195]}),t(g,[2,70],{33:[1,196]}),t(g,[2,81],{38:[1,197]}),t(g,[2,69],{33:[1,198]}),t(g,[2,75],{35:[1,199]}),t(g,[2,76],{35:[1,200]}),t(g,[2,82],{38:[1,201]}),{34:[1,202]},{39:203,43:f,44:p,45:m},{34:[1,204]},{34:[1,205]},{39:206,43:f,44:p,45:m},{34:[1,207]},{34:[1,208]},{34:[1,209]},{34:[1,210]},{39:211,43:f,44:p,45:m},{34:[1,212]},{39:213,43:f,44:p,45:m},{34:[1,214]},{34:[1,215]},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{39:221,43:f,44:p,45:m},{34:[1,222]},{34:[1,223]},{34:[1,224]},{39:225,43:f,44:p,45:m},{34:[1,226]},{39:227,43:f,44:p,45:m},{34:[1,228]},{34:[1,229]},{34:[1,230]},{39:231,43:f,44:p,45:m},t(g,[2,40]),t(g,[2,42]),t(g,[2,41]),t(g,[2,43]),t(g,[2,45]),t(g,[2,44]),t(g,[2,101]),t(g,[2,102]),t(g,[2,99]),t(g,[2,100]),t(g,[2,104]),t(g,[2,103]),t(g,[2,108]),t(g,[2,107]),t(g,[2,106]),t(g,[2,105]),t(g,[2,110]),t(g,[2,109]),t(g,[2,98]),t(g,[2,97]),t(g,[2,96]),t(g,[2,95]),t(g,[2,93]),t(g,[2,94]),t(g,[2,92]),t(g,[2,91]),t(g,[2,90]),t(g,[2,89]),t(g,[2,87]),t(g,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},w={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 34:case 38:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 39:return 34;case 40:return 31;case 41:return 28;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};function y(){this.yy={}}return k.lexer=w,y.prototype=k,k.Parser=y,new y}();zP.parser=zP;const FP=t=>null!==t.match(/^\s*gitGraph/);let jP="",VP="",$P="";const HP=t=>sI(t,nP()),UP=function(){jP="",$P="",VP=""},WP=function(t){jP=HP(t).replace(/^\s+/g,"")},qP=function(){return jP||VP},YP=function(t){$P=HP(t).replace(/\n\s+/g,"\n")},GP=function(){return $P},ZP=function(t){VP=HP(t)},KP=function(){return VP};let QP=nP().gitGraph.mainBranchName,XP=nP().gitGraph.mainBranchOrder,JP={},tR=null,eR={};eR[QP]={name:QP,order:XP};let nR={};nR[QP]=tR;let rR=QP,iR="LR",oR=0;function sR(){return jN({length:7})}function aR(t,e){const n=Object.create(null);return t.reduce(((t,r)=>{const i=e(r);return n[i]||(n[i]=!0,t.push(r)),t}),[])}let cR={};const lR=function(t,e,n,r){u.debug("Entering commit:",t,e,n,r),e=gI.sanitizeText(e,nP()),t=gI.sanitizeText(t,nP()),r=gI.sanitizeText(r,nP());const i={id:e||oR+"-"+sR(),message:t,seq:oR++,type:n||kR.NORMAL,tag:r||"",parents:null==tR?[]:[tR.id],branch:rR};tR=i,JP[i.id]=i,nR[rR]=i.id,u.debug("in pushCommit "+i.id)},dR=function(t,e){if(t=gI.sanitizeText(t,nP()),void 0!==nR[t]){let e=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")');throw e.hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},e}nR[t]=null!=tR?tR.id:null,eR[t]={name:t,order:e?parseInt(e,10):null},gR(t),u.debug("in createBranch")},uR=function(t,e,n,r){t=gI.sanitizeText(t,nP()),e=gI.sanitizeText(e,nP());const i=JP[nR[rR]],o=JP[nR[t]];if(rR===t){let e=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(void 0===i||!i){let e=new Error('Incorrect usage of "merge". Current branch ('+rR+")has no commits");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},e}if(void 0===nR[t]){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},e}if(void 0===o||!o){let e=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},e}if(i===o){let e=new Error('Incorrect usage of "merge". Both branches have same head');throw e.hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},e}if(e&&void 0!==JP[e]){let i=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id");throw i.hash={text:"merge "+t+e+n+r,token:"merge "+t+e+n+r,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+n+" "+r]},i}const s={id:e||oR+"-"+sR(),message:"merged branch "+t+" into "+rR,seq:oR++,parents:[null==tR?null:tR.id,nR[t]],branch:rR,type:kR.MERGE,customType:n,customId:!!e,tag:r||""};tR=s,JP[s.id]=s,nR[rR]=s.id,u.debug(nR),u.debug("in mergeBranch")},hR=function(t,e,n){if(u.debug("Entering cherryPick:",t,e,n),t=gI.sanitizeText(t,nP()),e=gI.sanitizeText(e,nP()),n=gI.sanitizeText(n,nP()),!t||void 0===JP[t]){let n=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}let r=JP[t],i=r.branch;if(r.type===kR.MERGE){let n=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}if(!e||void 0===JP[e]){if(i===rR){let n=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const o=JP[nR[rR]];if(void 0===o||!o){let n=new Error('Incorrect usage of "cherry-pick". Current branch ('+rR+")has no commits");throw n.hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},n}const s={id:oR+"-"+sR(),message:"cherry-picked "+r+" into "+rR,seq:oR++,parents:[null==tR?null:tR.id,r.id],branch:rR,type:kR.CHERRY_PICK,tag:null!=n?n:"cherry-pick:"+r.id};tR=s,JP[s.id]=s,nR[rR]=s.id,u.debug(nR),u.debug("in cherryPick")}},gR=function(t){if(t=gI.sanitizeText(t,nP()),void 0===nR[t]){let e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")');throw e.hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e}{rR=t;const e=nR[rR];tR=JP[e]}};function fR(t,e,n){const r=t.indexOf(e);-1===r?t.push(n):t.splice(r,1,n)}function pR(t){const e=t.reduce(((t,e)=>t.seq>e.seq?t:e),t[0]);let n="";t.forEach((function(t){n+=t===e?"\t*":"\t|"}));const r=[n,e.id,e.seq];for(let t in nR)nR[t]===e.id&&r.push(t);if(u.debug(r.join(" ")),e.parents&&2==e.parents.length){const n=JP[e.parents[0]];fR(t,e,n),t.push(JP[e.parents[1]])}else{if(0==e.parents.length)return;{const n=JP[e.parents];fR(t,e,n)}}pR(t=aR(t,(t=>t.id)))}const mR=function(){u.debug(JP),pR([bR()[0]])},bR=function(){const t=Object.keys(JP).map((function(t){return JP[t]}));return t.forEach((function(t){u.debug(t.id)})),t.sort(((t,e)=>t.seq-e.seq)),t},kR={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},wR={parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().gitGraph,setDirection:function(t){iR=t},setOptions:function(t){u.debug("options str",t),t=(t=t&&t.trim())||"{}";try{cR=JSON.parse(t)}catch(t){u.error("error while parsing gitGraph options",t.message)}},getOptions:function(){return cR},commit:lR,branch:dR,merge:uR,cherryPick:hR,checkout:gR,prettyPrint:mR,clear:function(){JP={},tR=null;let t=nP().gitGraph.mainBranchName,e=nP().gitGraph.mainBranchOrder;nR={},nR[t]=null,eR={},eR[t]={name:t,order:e},rR=t,oR=0,UP()},getBranchesAsObjArray:function(){return Object.values(eR).map(((t,e)=>null!==t.order?t:{...t,order:parseFloat(`0.${e}`,10)})).sort(((t,e)=>t.order-e.order)).map((({name:t})=>({name:t})))},getBranches:function(){return nR},getCommits:function(){return JP},getCommitsArray:bR,getCurrentBranch:function(){return rR},getDirection:function(){return iR},getHead:function(){return tR},setAccTitle:WP,getAccTitle:qP,getAccDescription:GP,setAccDescription:YP,commitType:kR};function yR(t,e,n){if(void 0===e.insert)return;let r=t.getAccTitle(),i=t.getAccDescription();e.attr("role","img").attr("aria-labelledby","chart-title-"+n+" chart-desc-"+n),e.insert("desc",":first-child").attr("id","chart-desc-"+n).text(i),e.insert("title",":first-child").attr("id","chart-title-"+n).text(r)}let _R={};const vR={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},AR=8;let CR={},xR={},ER=[],TR=0;const SR=()=>{CR={},xR={},_R={},TR=0,ER=[]},DR=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");let n=[];n="string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?t:[];for(let t=0;t<n.length;t++){const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),r.setAttribute("class","row"),r.textContent=n[t].trim(),e.appendChild(r)}return e},MR=(t,e,n)=>{const r=IP().gitGraph,i=t.append("g").attr("class","commit-bullets"),o=t.append("g").attr("class","commit-labels");let s=0;Object.keys(e).sort(((t,n)=>e[t].seq-e[n].seq)).forEach((t=>{const a=e[t],c=CR[a.branch].pos,l=s+10;if(n){let t,e=void 0!==a.customType&&""!==a.customType?a.customType:a.type;switch(e){case vR.NORMAL:t="commit-normal";break;case vR.REVERSE:t="commit-reverse";break;case vR.HIGHLIGHT:t="commit-highlight";break;case vR.MERGE:t="commit-merge";break;case vR.CHERRY_PICK:t="commit-cherry-pick";break;default:t="commit-normal"}if(e===vR.HIGHLIGHT){const e=i.append("rect");e.attr("x",l-10),e.attr("y",c-10),e.attr("height",20),e.attr("width",20),e.attr("class",`commit ${a.id} commit-highlight${CR[a.branch].index%AR} ${t}-outer`),i.append("rect").attr("x",l-6).attr("y",c-6).attr("height",12).attr("width",12).attr("class",`commit ${a.id} commit${CR[a.branch].index%AR} ${t}-inner`)}else if(e===vR.CHERRY_PICK)i.append("circle").attr("cx",l).attr("cy",c).attr("r",10).attr("class",`commit ${a.id} ${t}`),i.append("circle").attr("cx",l-3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${a.id} ${t}`),i.append("circle").attr("cx",l+3).attr("cy",c+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${a.id} ${t}`),i.append("line").attr("x1",l+3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${a.id} ${t}`),i.append("line").attr("x1",l-3).attr("y1",c+1).attr("x2",l).attr("y2",c-5).attr("stroke","#fff").attr("class",`commit ${a.id} ${t}`);else{const n=i.append("circle");if(n.attr("cx",l),n.attr("cy",c),n.attr("r",a.type===vR.MERGE?9:10),n.attr("class",`commit ${a.id} commit${CR[a.branch].index%AR}`),e===vR.MERGE){const e=i.append("circle");e.attr("cx",l),e.attr("cy",c),e.attr("r",6),e.attr("class",`commit ${t} ${a.id} commit${CR[a.branch].index%AR}`)}e===vR.REVERSE&&i.append("path").attr("d",`M ${l-5},${c-5}L${l+5},${c+5}M${l-5},${c+5}L${l+5},${c-5}`).attr("class",`commit ${t} ${a.id} commit${CR[a.branch].index%AR}`)}}if(xR[a.id]={x:s+10,y:c},n){const t=4,e=2;if(a.type!==vR.CHERRY_PICK&&(a.customId&&a.type===vR.MERGE||a.type!==vR.MERGE)&&r.showCommitLabel){const t=o.append("g"),n=t.insert("rect").attr("class","commit-label-bkg"),i=t.append("text").attr("x",s).attr("y",c+25).attr("class","commit-label").text(a.id);let l=i.node().getBBox();if(n.attr("x",s+10-l.width/2-e).attr("y",c+13.5).attr("width",l.width+2*e).attr("height",l.height+2*e),i.attr("x",s+10-l.width/2),r.rotateCommitLabel){let e=-7.5-(l.width+10)/25*9.5,n=10+l.width/25*8.5;t.attr("transform","translate("+e+", "+n+") rotate(-45, "+s+", "+c+")")}}if(a.tag){const n=o.insert("polygon"),r=o.append("circle"),i=o.append("text").attr("y",c-16).attr("class","tag-label").text(a.tag);let l=i.node().getBBox();i.attr("x",s+10-l.width/2);const d=l.height/2,u=c-19.2;n.attr("class","tag-label-bkg").attr("points",`\n          ${s-l.width/2-t/2},${u+e}\n          ${s-l.width/2-t/2},${u-e}\n          ${s+10-l.width/2-t},${u-d-e}\n          ${s+10+l.width/2+t},${u-d-e}\n          ${s+10+l.width/2+t},${u+d+e}\n          ${s+10-l.width/2-t},${u+d+e}`),r.attr("cx",s-l.width/2+t/2).attr("cy",u).attr("r",1.5).attr("class","tag-hole")}}s+=50,s>TR&&(TR=s)}))},IR=(t,e,n)=>Object.keys(n).filter((r=>n[r].branch===e.branch&&n[r].seq>t.seq&&n[r].seq<e.seq)).length>0,BR=(t,e,n)=>{const r=n||0,i=t+Math.abs(t-e)/2;if(r>5)return i;let o=!0;for(let t=0;t<ER.length;t++)Math.abs(ER[t]-i)<10&&(o=!1);if(o)return ER.push(i),i;const s=Math.abs(t-e);return BR(t,e-s/5,r+1)},LR=(t,e,n,r)=>{const i=xR[e.id],o=xR[n.id],s=IR(e,n,r);let a,c="",l="",d=0,u=0,h=CR[n.branch].index;if(s){c="A 10 10, 0, 0, 0,",l="A 10 10, 0, 0, 1,",d=10,u=10,h=CR[n.branch].index;const t=i.y<o.y?BR(i.y,o.y):BR(o.y,i.y);a=i.y<o.y?`M ${i.x} ${i.y} L ${i.x} ${t-d} ${c} ${i.x+u} ${t} L ${o.x-d} ${t} ${l} ${o.x} ${t+u} L ${o.x} ${o.y}`:`M ${i.x} ${i.y} L ${i.x} ${t+d} ${l} ${i.x+u} ${t} L ${o.x-d} ${t} ${c} ${o.x} ${t-u} L ${o.x} ${o.y}`}else i.y<o.y&&(c="A 20 20, 0, 0, 0,",d=20,u=20,h=CR[n.branch].index,a=`M ${i.x} ${i.y} L ${i.x} ${o.y-d} ${c} ${i.x+u} ${o.y} L ${o.x} ${o.y}`),i.y>o.y&&(c="A 20 20, 0, 0, 0,",d=20,u=20,h=CR[e.branch].index,a=`M ${i.x} ${i.y} L ${o.x-d} ${i.y} ${c} ${o.x} ${i.y-u} L ${o.x} ${o.y}`),i.y===o.y&&(h=CR[e.branch].index,a=`M ${i.x} ${i.y} L ${i.x} ${o.y-d} ${c} ${i.x+u} ${o.y} L ${o.x} ${o.y}`);t.append("path").attr("d",a).attr("class","arrow arrow"+h%AR)},NR=(t,e)=>{const n=t.append("g").attr("class","commit-arrows");Object.keys(e).forEach((t=>{const r=e[t];r.parents&&r.parents.length>0&&r.parents.forEach((t=>{LR(n,e[t],r,e)}))}))},OR=(t,e)=>{const n=IP().gitGraph,r=t.append("g");e.forEach(((t,e)=>{const i=e%AR,o=CR[t.name].pos,s=r.append("line");s.attr("x1",0),s.attr("y1",o),s.attr("x2",TR),s.attr("y2",o),s.attr("class","branch branch"+i),ER.push(o);let a=t.name;const c=DR(a),l=r.insert("rect"),d=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+i);d.node().appendChild(c);let u=c.getBBox();l.attr("class","branchLabelBkg label"+i).attr("rx",4).attr("ry",4).attr("x",-u.width-4-(!0===n.rotateCommitLabel?30:0)).attr("y",-u.height/2+8).attr("width",u.width+18).attr("height",u.height+4),d.attr("transform","translate("+(-u.width-14-(!0===n.rotateCommitLabel?30:0))+", "+(o-u.height/2-1)+")"),l.attr("transform","translate(-19, "+(o-u.height/2)+")")}))},PR={draw:function(t,e,n,r){SR();const i=IP(),o=IP().gitGraph;u.debug("in gitgraph renderer",t+"\n","id:",e,n),_R=r.db.getCommits();const s=r.db.getBranchesAsObjArray();let a=0;s.forEach(((t,e)=>{CR[t.name]={pos:a,index:e},a+=50+(o.rotateCommitLabel?40:0)}));const c=Qr(`[id="${e}"]`);yR(r.db,c,e),MR(c,_R,!1),o.showBranches&&OR(c,s),NR(c,_R),MR(c,_R,!0),LP(void 0,c,o.diagramPadding,i.useMaxWidth)}},RR=t=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map((e=>`\n        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }\n        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }\n        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }\n        .label${e}  { fill: ${t["git"+e]}; }\n        .arrow${e} { stroke: ${t["git"+e]}; }\n        `)).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${t.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}\n  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}\n  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }\n  .tag-hole { fill: ${t.textColor}; }\n\n  .commit-merge {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  }\n`;var zR=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,6],n=[1,7],r=[1,8],i=[1,9],o=[1,16],s=[1,11],a=[1,12],l=[1,13],d=[1,14],u=[1,15],h=[1,27],g=[1,33],f=[1,34],p=[1,35],m=[1,36],b=[1,37],k=[1,72],w=[1,73],y=[1,74],_=[1,75],v=[1,76],A=[1,77],C=[1,78],x=[1,38],E=[1,39],T=[1,40],S=[1,41],D=[1,42],M=[1,43],I=[1,44],B=[1,45],L=[1,46],N=[1,47],O=[1,48],P=[1,49],R=[1,50],z=[1,51],F=[1,52],j=[1,53],V=[1,54],$=[1,55],H=[1,56],U=[1,57],W=[1,59],q=[1,60],Y=[1,61],G=[1,62],Z=[1,63],K=[1,64],Q=[1,65],X=[1,66],J=[1,67],tt=[1,68],et=[1,69],nt=[24,52],rt=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],it=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],ot=[1,94],st=[1,95],at=[1,96],ct=[1,97],lt=[15,24,52],dt=[7,8,9,10,18,22,25,26,27,28],ut=[15,24,43,52],ht=[15,24,43,52,86,87,89,90],gt=[15,43],ft=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],pt={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 4:r.setDirection("TB");break;case 5:r.setDirection("BT");break;case 6:r.setDirection("RL");break;case 7:r.setDirection("LR");break;case 11:r.parseDirective("%%{","open_directive");break;case 12:break;case 13:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 14:r.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:r.setC4Type(o[a-3]);break;case 26:r.setTitle(o[a].substring(6)),this.$=o[a].substring(6);break;case 27:r.setAccDescription(o[a].substring(15)),this.$=o[a].substring(15);break;case 28:this.$=o[a].trim(),r.setTitle(this.$);break;case 29:case 30:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 35:case 36:o[a].splice(2,0,"ENTERPRISE"),r.addPersonOrSystemBoundary(...o[a]),this.$=o[a];break;case 37:r.addPersonOrSystemBoundary(...o[a]),this.$=o[a];break;case 38:o[a].splice(2,0,"CONTAINER"),r.addContainerBoundary(...o[a]),this.$=o[a];break;case 39:r.addDeploymentNode("node",...o[a]),this.$=o[a];break;case 40:r.addDeploymentNode("nodeL",...o[a]),this.$=o[a];break;case 41:r.addDeploymentNode("nodeR",...o[a]),this.$=o[a];break;case 42:r.popBoundaryParseStack();break;case 46:r.addPersonOrSystem("person",...o[a]),this.$=o[a];break;case 47:r.addPersonOrSystem("external_person",...o[a]),this.$=o[a];break;case 48:r.addPersonOrSystem("system",...o[a]),this.$=o[a];break;case 49:r.addPersonOrSystem("system_db",...o[a]),this.$=o[a];break;case 50:r.addPersonOrSystem("system_queue",...o[a]),this.$=o[a];break;case 51:r.addPersonOrSystem("external_system",...o[a]),this.$=o[a];break;case 52:r.addPersonOrSystem("external_system_db",...o[a]),this.$=o[a];break;case 53:r.addPersonOrSystem("external_system_queue",...o[a]),this.$=o[a];break;case 54:r.addContainer("container",...o[a]),this.$=o[a];break;case 55:r.addContainer("container_db",...o[a]),this.$=o[a];break;case 56:r.addContainer("container_queue",...o[a]),this.$=o[a];break;case 57:r.addContainer("external_container",...o[a]),this.$=o[a];break;case 58:r.addContainer("external_container_db",...o[a]),this.$=o[a];break;case 59:r.addContainer("external_container_queue",...o[a]),this.$=o[a];break;case 60:r.addComponent("component",...o[a]),this.$=o[a];break;case 61:r.addComponent("component_db",...o[a]),this.$=o[a];break;case 62:r.addComponent("component_queue",...o[a]),this.$=o[a];break;case 63:r.addComponent("external_component",...o[a]),this.$=o[a];break;case 64:r.addComponent("external_component_db",...o[a]),this.$=o[a];break;case 65:r.addComponent("external_component_queue",...o[a]),this.$=o[a];break;case 67:r.addRel("rel",...o[a]),this.$=o[a];break;case 68:r.addRel("birel",...o[a]),this.$=o[a];break;case 69:r.addRel("rel_u",...o[a]),this.$=o[a];break;case 70:r.addRel("rel_d",...o[a]),this.$=o[a];break;case 71:r.addRel("rel_l",...o[a]),this.$=o[a];break;case 72:r.addRel("rel_r",...o[a]),this.$=o[a];break;case 73:r.addRel("rel_b",...o[a]),this.$=o[a];break;case 74:o[a].splice(0,1),r.addRel("rel",...o[a]),this.$=o[a];break;case 75:r.updateElStyle("update_el_style",...o[a]),this.$=o[a];break;case 76:r.updateRelStyle("update_rel_style",...o[a]),this.$=o[a];break;case 77:r.updateLayoutConfig("update_layout_config",...o[a]),this.$=o[a];break;case 78:this.$=[o[a]];break;case 79:o[a].unshift(o[a-1]),this.$=o[a];break;case 80:case 82:this.$=o[a].trim();break;case 81:let t={};t[o[a-1].trim()]=o[a].trim(),this.$=t;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:o,22:s,25:a,26:l,27:d,28:u},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:e,8:n,9:r,10:i,11:5,12:10,18:o,22:s,25:a,26:l,27:d,28:u},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:h},t([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:g,33:f,34:p,36:m,38:b,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{23:79,29:29,30:30,31:31,32:g,33:f,34:p,36:m,38:b,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{23:80,29:29,30:30,31:31,32:g,33:f,34:p,36:m,38:b,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{23:81,29:29,30:30,31:31,32:g,33:f,34:p,36:m,38:b,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{23:82,29:29,30:30,31:31,32:g,33:f,34:p,36:m,38:b,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},t(nt,[2,20],{53:32,39:58,40:70,42:71,30:87,44:k,46:w,47:y,48:_,49:v,50:A,51:C,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et}),t(nt,[2,21]),t(rt,[2,23],{15:[1,88]}),t(nt,[2,43],{15:[1,89]}),t(it,[2,26]),t(it,[2,27]),{35:[1,90]},{37:[1,91]},t(it,[2,30]),{45:92,85:93,86:ot,87:st,89:at,90:ct},{45:98,85:93,86:ot,87:st,89:at,90:ct},{45:99,85:93,86:ot,87:st,89:at,90:ct},{45:100,85:93,86:ot,87:st,89:at,90:ct},{45:101,85:93,86:ot,87:st,89:at,90:ct},{45:102,85:93,86:ot,87:st,89:at,90:ct},{45:103,85:93,86:ot,87:st,89:at,90:ct},{45:104,85:93,86:ot,87:st,89:at,90:ct},{45:105,85:93,86:ot,87:st,89:at,90:ct},{45:106,85:93,86:ot,87:st,89:at,90:ct},{45:107,85:93,86:ot,87:st,89:at,90:ct},{45:108,85:93,86:ot,87:st,89:at,90:ct},{45:109,85:93,86:ot,87:st,89:at,90:ct},{45:110,85:93,86:ot,87:st,89:at,90:ct},{45:111,85:93,86:ot,87:st,89:at,90:ct},{45:112,85:93,86:ot,87:st,89:at,90:ct},{45:113,85:93,86:ot,87:st,89:at,90:ct},{45:114,85:93,86:ot,87:st,89:at,90:ct},{45:115,85:93,86:ot,87:st,89:at,90:ct},{45:116,85:93,86:ot,87:st,89:at,90:ct},t(lt,[2,66]),{45:117,85:93,86:ot,87:st,89:at,90:ct},{45:118,85:93,86:ot,87:st,89:at,90:ct},{45:119,85:93,86:ot,87:st,89:at,90:ct},{45:120,85:93,86:ot,87:st,89:at,90:ct},{45:121,85:93,86:ot,87:st,89:at,90:ct},{45:122,85:93,86:ot,87:st,89:at,90:ct},{45:123,85:93,86:ot,87:st,89:at,90:ct},{45:124,85:93,86:ot,87:st,89:at,90:ct},{45:125,85:93,86:ot,87:st,89:at,90:ct},{45:126,85:93,86:ot,87:st,89:at,90:ct},{45:127,85:93,86:ot,87:st,89:at,90:ct},{30:128,39:58,40:70,42:71,44:k,46:w,47:y,48:_,49:v,50:A,51:C,53:32,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et},{15:[1,130],43:[1,129]},{45:131,85:93,86:ot,87:st,89:at,90:ct},{45:132,85:93,86:ot,87:st,89:at,90:ct},{45:133,85:93,86:ot,87:st,89:at,90:ct},{45:134,85:93,86:ot,87:st,89:at,90:ct},{45:135,85:93,86:ot,87:st,89:at,90:ct},{45:136,85:93,86:ot,87:st,89:at,90:ct},{45:137,85:93,86:ot,87:st,89:at,90:ct},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},t(dt,[2,9]),{14:142,21:h},{21:[2,13]},{1:[2,15]},t(nt,[2,22]),t(rt,[2,24],{31:31,29:143,32:g,33:f,34:p,36:m,38:b}),t(nt,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:g,33:f,34:p,36:m,38:b,44:k,46:w,47:y,48:_,49:v,50:A,51:C,54:x,55:E,56:T,57:S,58:D,59:M,60:I,61:B,62:L,63:N,64:O,65:P,66:R,67:z,68:F,69:j,70:V,71:$,72:H,73:U,74:W,75:q,76:Y,77:G,78:Z,79:K,80:Q,81:X,82:J,83:tt,84:et}),t(it,[2,28]),t(it,[2,29]),t(lt,[2,46]),t(ut,[2,78],{85:93,45:145,86:ot,87:st,89:at,90:ct}),t(ht,[2,80]),{88:[1,146]},t(ht,[2,82]),t(ht,[2,83]),t(lt,[2,47]),t(lt,[2,48]),t(lt,[2,49]),t(lt,[2,50]),t(lt,[2,51]),t(lt,[2,52]),t(lt,[2,53]),t(lt,[2,54]),t(lt,[2,55]),t(lt,[2,56]),t(lt,[2,57]),t(lt,[2,58]),t(lt,[2,59]),t(lt,[2,60]),t(lt,[2,61]),t(lt,[2,62]),t(lt,[2,63]),t(lt,[2,64]),t(lt,[2,65]),t(lt,[2,67]),t(lt,[2,68]),t(lt,[2,69]),t(lt,[2,70]),t(lt,[2,71]),t(lt,[2,72]),t(lt,[2,73]),t(lt,[2,74]),t(lt,[2,75]),t(lt,[2,76]),t(lt,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},t(gt,[2,35]),t(gt,[2,36]),t(gt,[2,37]),t(gt,[2,38]),t(gt,[2,39]),t(gt,[2,40]),t(gt,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},t(rt,[2,25]),t(nt,[2,45]),t(ut,[2,79]),t(ht,[2,81]),t(lt,[2,31]),t(lt,[2,42]),t(ft,[2,32]),t(ft,[2,33],{15:[1,152]}),t(dt,[2,10]),t(ft,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},mt={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 78:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:case 21:case 75:break;case 19:c;break;case 20:return 15;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:case 84:this.popState(),this.popState();break;case 74:case 76:return 90;case 77:this.begin("string");break;case 79:case 85:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};function bt(){this.yy={}}return pt.lexer=mt,bt.prototype=pt,pt.Parser=bt,new bt}();zR.parser=zR;const FR=t=>null!==t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let jR=[],VR=[""],$R="global",HR="",UR=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],WR=[],qR="",YR=!1,GR=4,ZR=2;var KR;const QR=function(t,e,n,r,i,o,s,a,c){if(null==t||null==e||null==n||null==r)return;let l={};const d=WR.find((t=>t.from===e&&t.to===n));if(d?l=d:WR.push(l),l.type=t,l.from=e,l.to=n,l.label={text:r},null==i)l.techn={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.techn={text:i};if(null==o)l.descr={text:""};else if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]={text:e}}else l.descr={text:o};if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.sprite=s;if("object"==typeof a){let[t,e]=Object.entries(a)[0];l[t]=e}else l.tags=a;if("object"==typeof c){let[t,e]=Object.entries(c)[0];l[t]=e}else l.link=c;l.wrap=sz()},XR=function(t,e,n,r,i,o,s){if(null===e||null===n)return;let a={};const c=jR.find((t=>t.alias===e));if(c&&e===c.alias?a=c:(a.alias=e,jR.push(a)),a.label=null==n?{text:""}:{text:n},null==r)a.descr={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]={text:e}}else a.descr={text:r};if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.sprite=i;if("object"==typeof o){let[t,e]=Object.entries(o)[0];a[t]=e}else a.tags=o;if("object"==typeof s){let[t,e]=Object.entries(s)[0];a[t]=e}else a.link=s;a.typeC4Shape={text:t},a.parentBoundary=$R,a.wrap=sz()},JR=function(t,e,n,r,i,o,s,a){if(null===e||null===n)return;let c={};const l=jR.find((t=>t.alias===e));if(l&&e===l.alias?c=l:(c.alias=e,jR.push(c)),c.label=null==n?{text:""}:{text:n},null==r)c.techn={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];c[t]={text:e}}else c.techn={text:r};if(null==i)c.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];c[t]={text:e}}else c.descr={text:i};if("object"==typeof o){let[t,e]=Object.entries(o)[0];c[t]=e}else c.sprite=o;if("object"==typeof s){let[t,e]=Object.entries(s)[0];c[t]=e}else c.tags=s;if("object"==typeof a){let[t,e]=Object.entries(a)[0];c[t]=e}else c.link=a;c.wrap=sz(),c.typeC4Shape={text:t},c.parentBoundary=$R},tz=function(t,e,n,r,i,o,s,a){if(null===e||null===n)return;let c={};const l=jR.find((t=>t.alias===e));if(l&&e===l.alias?c=l:(c.alias=e,jR.push(c)),c.label=null==n?{text:""}:{text:n},null==r)c.techn={text:""};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];c[t]={text:e}}else c.techn={text:r};if(null==i)c.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];c[t]={text:e}}else c.descr={text:i};if("object"==typeof o){let[t,e]=Object.entries(o)[0];c[t]=e}else c.sprite=o;if("object"==typeof s){let[t,e]=Object.entries(s)[0];c[t]=e}else c.tags=s;if("object"==typeof a){let[t,e]=Object.entries(a)[0];c[t]=e}else c.link=a;c.wrap=sz(),c.typeC4Shape={text:t},c.parentBoundary=$R},ez=function(t,e,n,r,i){if(null===t||null===e)return;let o={};const s=UR.find((e=>e.alias===t));if(s&&t===s.alias?o=s:(o.alias=t,UR.push(o)),o.label=null==e?{text:""}:{text:e},null==n)o.type={text:"system"};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];o[t]={text:e}}else o.type={text:n};if("object"==typeof r){let[t,e]=Object.entries(r)[0];o[t]=e}else o.tags=r;if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]=e}else o.link=i;o.parentBoundary=$R,o.wrap=sz(),HR=$R,$R=t,VR.push(HR)},nz=function(t,e,n,r,i){if(null===t||null===e)return;let o={};const s=UR.find((e=>e.alias===t));if(s&&t===s.alias?o=s:(o.alias=t,UR.push(o)),o.label=null==e?{text:""}:{text:e},null==n)o.type={text:"container"};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];o[t]={text:e}}else o.type={text:n};if("object"==typeof r){let[t,e]=Object.entries(r)[0];o[t]=e}else o.tags=r;if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]=e}else o.link=i;o.parentBoundary=$R,o.wrap=sz(),HR=$R,$R=t,VR.push(HR)},rz=function(t,e,n,r,i,o,s,a){if(null===e||null===n)return;let c={};const l=UR.find((t=>t.alias===e));if(l&&e===l.alias?c=l:(c.alias=e,UR.push(c)),c.label=null==n?{text:""}:{text:n},null==r)c.type={text:"node"};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];c[t]={text:e}}else c.type={text:r};if(null==i)c.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];c[t]={text:e}}else c.descr={text:i};if("object"==typeof s){let[t,e]=Object.entries(s)[0];c[t]=e}else c.tags=s;if("object"==typeof a){let[t,e]=Object.entries(a)[0];c[t]=e}else c.link=a;c.nodeType=t,c.parentBoundary=$R,c.wrap=sz(),HR=$R,$R=e,VR.push(HR)},iz=function(t){return null==t?jR:jR.filter((e=>e.parentBoundary===t))},oz=function(t){return Object.keys(iz(t))},sz=function(){return YR},az={addPersonOrSystem:XR,addPersonOrSystemBoundary:ez,addContainer:JR,addContainerBoundary:nz,addComponent:tz,addDeploymentNode:rz,popBoundaryParseStack:function(){$R=HR,VR.pop(),HR=VR.pop(),VR.push(HR)},addRel:QR,updateElStyle:function(t,e,n,r,i,o,s,a,c,l,d){let u=jR.find((t=>t.alias===e));if(void 0!==u||(u=UR.find((t=>t.alias===e)),void 0!==u)){if(null!=n)if("object"==typeof n){let[t,e]=Object.entries(n)[0];u[t]=e}else u.bgColor=n;if(null!=r)if("object"==typeof r){let[t,e]=Object.entries(r)[0];u[t]=e}else u.fontColor=r;if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];u[t]=e}else u.borderColor=i;if(null!=o)if("object"==typeof o){let[t,e]=Object.entries(o)[0];u[t]=e}else u.shadowing=o;if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];u[t]=e}else u.shape=s;if(null!=a)if("object"==typeof a){let[t,e]=Object.entries(a)[0];u[t]=e}else u.sprite=a;if(null!=c)if("object"==typeof c){let[t,e]=Object.entries(c)[0];u[t]=e}else u.techn=c;if(null!=l)if("object"==typeof l){let[t,e]=Object.entries(l)[0];u[t]=e}else u.legendText=l;if(null!=d)if("object"==typeof d){let[t,e]=Object.entries(d)[0];u[t]=e}else u.legendSprite=d}},updateRelStyle:function(t,e,n,r,i,o,s){const a=WR.find((t=>t.from===e&&t.to===n));if(void 0!==a){if(null!=r)if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]=e}else a.textColor=r;if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.lineColor=i;if(null!=o)if("object"==typeof o){let[t,e]=Object.entries(o)[0];a[t]=parseInt(e)}else a.offsetX=parseInt(o);if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];a[t]=parseInt(e)}else a.offsetY=parseInt(s)}},updateLayoutConfig:function(t,e,n){let r=GR,i=ZR;if("object"==typeof e){const t=Object.values(e)[0];r=parseInt(t)}else r=parseInt(e);if("object"==typeof n){const t=Object.values(n)[0];i=parseInt(t)}else i=parseInt(n);r>=1&&(GR=r),i>=1&&(ZR=i)},autoWrap:sz,setWrap:function(t){YR=t},getC4ShapeArray:iz,getC4Shape:function(t){return jR.find((e=>e.alias===t))},getC4ShapeKeys:oz,getBoundarys:function(t){return null==t?UR:UR.filter((e=>e.parentBoundary===t))},getCurrentBoundaryParse:function(){return $R},getParentBoundaryParse:function(){return HR},getRels:function(){return WR},getTitle:function(){return qR},getC4Type:function(){return KR},getC4ShapeInRow:function(){return GR},getC4BoundaryInRow:function(){return ZR},setAccTitle:WP,getAccTitle:qP,getAccDescription:GP,setAccDescription:YP,parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().c4,clear:function(){jR=[],UR=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],HR="",$R="global",VR=[""],WR=[],VR=[""],qR="",YR=!1,GR=4,ZR=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){let e=sI(t,nP());qR=e},setC4Type:function(t){let e=sI(t,nP());KR=e}},cz=function(t,e){const n=t.append("rect");if(n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),"undefined"!==e.attrs&&null!==e.attrs)for(let t in e.attrs)n.attr(t,e.attrs[t]);return"undefined"!==e.class&&n.attr("class",e.class),n},lz=function(t,e,n,r,i,o){const s=t.append("image");s.attr("width",e),s.attr("height",n),s.attr("x",r),s.attr("y",i);let a=o.startsWith("data:image/png;base64")?o:p(o);s.attr("xlink:href",a)},dz=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var o=p(r);i.attr("xlink:href","#"+o)},uz=function(t,e){let n=0,r=0;const i=e.text.split(gI.lineBreakRegex);let o=[],s=0,a=()=>e.y;if(void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0)switch(e.valign){case"top":case"start":a=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":a=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":a=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin)}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="text-after-edge",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="text-before-edge",e.alignmentBaseline="middle"}for(let c=0;c<i.length;c++){let l=i[c];void 0!==e.textMargin&&0===e.textMargin&&void 0!==e.fontSize&&(s=c*e.fontSize);const d=t.append("text");if(d.attr("x",e.x),d.attr("y",a()),void 0!==e.anchor&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&d.style("font-family",e.fontFamily),void 0!==e.fontSize&&d.style("font-size",e.fontSize),void 0!==e.fontWeight&&d.style("font-weight",e.fontWeight),void 0!==e.fill&&d.attr("fill",e.fill),void 0!==e.class&&d.attr("class",e.class),void 0!==e.dy?d.attr("dy",e.dy):0!==s&&d.attr("dy",s),e.tspan){const t=d.append("tspan");t.attr("x",e.x),void 0!==e.fill&&t.attr("fill",e.fill),t.text(l)}else d.text(l);void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,n=r),o.push(d)}return o},hz=function(t,e){function n(t,e,n,r,i){return t+","+e+" "+(t+n)+","+e+" "+(t+n)+","+(e+r-i)+" "+(t+n-1.2*i)+","+(e+r)+" "+t+","+(e+r)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,uz(t,e),r},gz=(t,e,n)=>{const r=t.append("g");let i=0;for(let t of e){let e=t.textColor?t.textColor:"#444444",o=t.lineColor?t.lineColor:"#444444",s=t.offsetX?parseInt(t.offsetX):0,a=t.offsetY?parseInt(t.offsetY):0,c="";if(0===i){let e=r.append("line");e.attr("x1",t.startPoint.x),e.attr("y1",t.startPoint.y),e.attr("x2",t.endPoint.x),e.attr("y2",t.endPoint.y),e.attr("stroke-width","1"),e.attr("stroke",o),e.style("fill","none"),"rel_b"!==t.type&&e.attr("marker-end","url("+c+"#arrowhead)"),"birel"!==t.type&&"rel_b"!==t.type||e.attr("marker-start","url("+c+"#arrowend)"),i=-1}else{let e=r.append("path");e.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",t.startPoint.x).replaceAll("starty",t.startPoint.y).replaceAll("controlx",t.startPoint.x+(t.endPoint.x-t.startPoint.x)/2-(t.endPoint.x-t.startPoint.x)/4).replaceAll("controly",t.startPoint.y+(t.endPoint.y-t.startPoint.y)/2).replaceAll("stopx",t.endPoint.x).replaceAll("stopy",t.endPoint.y)),"rel_b"!==t.type&&e.attr("marker-end","url("+c+"#arrowhead)"),"birel"!==t.type&&"rel_b"!==t.type||e.attr("marker-start","url("+c+"#arrowend)")}let l=n.messageFont();Tz(n)(t.label.text,r,Math.min(t.startPoint.x,t.endPoint.x)+Math.abs(t.endPoint.x-t.startPoint.x)/2+s,Math.min(t.startPoint.y,t.endPoint.y)+Math.abs(t.endPoint.y-t.startPoint.y)/2+a,t.label.width,t.label.height,{fill:e},l),t.techn&&""!==t.techn.text&&(l=n.messageFont(),Tz(n)("["+t.techn.text+"]",r,Math.min(t.startPoint.x,t.endPoint.x)+Math.abs(t.endPoint.x-t.startPoint.x)/2+s,Math.min(t.startPoint.y,t.endPoint.y)+Math.abs(t.endPoint.y-t.startPoint.y)/2+n.messageFontSize+5+a,Math.max(t.label.width,t.techn.width),t.techn.height,{fill:e,"font-style":"italic"},l))}},fz=function(t,e,n){const r=t.append("g");let i=e.bgColor?e.bgColor:"none",o=e.borderColor?e.borderColor:"#444444",s=e.fontColor?e.fontColor:"black",a={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(a={"stroke-width":1});let c={x:e.x,y:e.y,fill:i,stroke:o,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:a};cz(r,c);let l=n.boundaryFont();l.fontWeight="bold",l.fontSize=l.fontSize+2,l.fontColor=s,Tz(n)(e.label.text,r,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},l),e.type&&""!==e.type.text&&(l=n.boundaryFont(),l.fontColor=s,Tz(n)(e.type.text,r,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},l)),e.descr&&""!==e.descr.text&&(l=n.boundaryFont(),l.fontSize=l.fontSize-2,l.fontColor=s,Tz(n)(e.descr.text,r,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},l))},pz=function(t,e,n){let r=e.bgColor?e.bgColor:n[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:n[e.typeC4Shape.text+"_border_color"],o=e.fontColor?e.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const a=t.append("g");a.attr("class","person-man");const c=xz();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":c.x=e.x,c.y=e.y,c.fill=r,c.width=e.width,c.height=e.height,c.style="stroke:"+i+";stroke-width:0.5;",c.rx=2.5,c.ry=2.5,cz(a,c);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":a.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),a.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":a.append("path").attr("fill",r).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),a.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}let l=Ez(n,e.typeC4Shape.text);switch(a.append("text").attr("fill",o).attr("font-family",l.fontFamily).attr("font-size",l.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":lz(a,48,48,e.x+e.width/2-24,e.y+e.image.Y,s)}let d=n[e.typeC4Shape.text+"Font"]();return d.fontWeight="bold",d.fontSize=d.fontSize+2,d.fontColor=o,Tz(n)(e.label.text,a,e.x,e.y+e.label.Y,e.width,e.height,{fill:o},d),d=n[e.typeC4Shape.text+"Font"](),d.fontColor=o,e.thchn&&""!==e.thchn.text?Tz(n)(e.thchn.text,a,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:o,"font-style":"italic"},d):e.type&&""!==e.type.text&&Tz(n)(e.type.text,a,e.x,e.y+e.type.Y,e.width,e.height,{fill:o,"font-style":"italic"},d),e.descr&&""!==e.descr.text&&(d=n.personFont(),d.fontColor=o,Tz(n)(e.descr.text,a,e.x,e.y+e.descr.Y,e.width,e.height,{fill:o},d)),e.height},mz=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},bz=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},kz=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},wz=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},yz=function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},_z=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},vz=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},Az=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},Cz=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},xz=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},Ez=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Tz=function(){function t(t,e,n,i,o,s,a){r(e.append("text").attr("x",n+o/2).attr("y",i+s/2+5).style("text-anchor","middle").text(t),a)}function e(t,e,n,i,o,s,a,c){const{fontSize:l,fontFamily:d,fontWeight:u}=c,h=t.split(gI.lineBreakRegex);for(let t=0;t<h.length;t++){const s=t*l-l*(h.length-1)/2,c=e.append("text").attr("x",n+o/2).attr("y",i).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",l).style("font-weight",u).style("font-family",d);c.append("tspan").attr("dy",s).text(h[t]).attr("alignment-baseline","mathematical"),r(c,a)}}function n(t,n,i,o,s,a,c,l){const d=n.append("switch"),u=d.append("foreignObject").attr("x",i).attr("y",o).attr("width",s).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,d,i,o,s,a,c,l),r(u,c)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),Sz={drawRect:cz,drawText:uz,drawLabel:hz,drawBoundary:fz,drawC4Shape:pz,drawRels:gz,drawImage:lz,drawEmbeddedImage:dz,insertArrowHead:wz,insertArrowEnd:yz,insertArrowFilledHead:_z,insertDynamicNumber:vz,insertArrowCrossHead:Az,insertDatabaseIcon:mz,insertComputerIcon:bz,insertClockIcon:kz,getTextObj:Cz,getNoteRect:xz,sanitizeUrl:p};let Dz=0,Mz=0,Iz=4,Bz=2;zR.yy=az;let Lz={};class Nz{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Oz(t.db.getConfig())}setData(t,e,n,r){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=r}updateVal(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,n=e+t.width,r=this.nextData.starty+2*t.margin,i=r+t.height;(e>=this.data.widthLimit||n>=this.data.widthLimit||this.nextData.cnt>Iz)&&(e=this.nextData.startx+t.margin+Lz.nextLinePaddingX,r=this.nextData.stopy+2*t.margin,this.nextData.stopx=n=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=i=r+t.height,this.nextData.cnt=1),t.x=e,t.y=r,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",r,Math.min),this.updateVal(this.data,"stopx",n,Math.max),this.updateVal(this.data,"stopy",i,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",r,Math.min),this.updateVal(this.nextData,"stopx",n,Math.max),this.updateVal(this.nextData,"stopy",i,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Oz(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}}const Oz=function(t){aB(Lz,t),t.fontFamily&&(Lz.personFontFamily=Lz.systemFontFamily=Lz.messageFontFamily=t.fontFamily),t.fontSize&&(Lz.personFontSize=Lz.systemFontSize=Lz.messageFontSize=t.fontSize),t.fontWeight&&(Lz.personFontWeight=Lz.systemFontWeight=Lz.messageFontWeight=t.fontWeight)},Pz=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),Rz=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),zz=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight});function Fz(t,e,n,r,i){if(!e[t].width)if(n)e[t].text=HN(e[t].text,i,r),e[t].textLines=e[t].text.split(gI.lineBreakRegex).length,e[t].width=i,e[t].height=WN(e[t].text,r);else{let n=e[t].text.split(gI.lineBreakRegex);e[t].textLines=n.length;let i=0;e[t].height=0,e[t].width=0;for(let o=0;o<n.length;o++)e[t].width=Math.max(qN(n[o],r),e[t].width),i=WN(n[o],r),e[t].height=e[t].height+i}}const jz=function(t,e,n){e.x=n.data.startx,e.y=n.data.starty,e.width=n.data.stopx-n.data.startx,e.height=n.data.stopy-n.data.starty,e.label.y=Lz.c4ShapeMargin-35;let r=e.wrap&&Lz.wrap,i=Rz(Lz);i.fontSize=i.fontSize+2,i.fontWeight="bold",Fz("label",e,r,i,qN(e.label.text,i)),Sz.drawBoundary(t,e,Lz)},Vz=function(t,e,n,r){let i=0;for(let o=0;o<r.length;o++){i=0;const s=n[r[o]];let a=Pz(Lz,s.typeC4Shape.text);switch(a.fontSize=a.fontSize-2,s.typeC4Shape.width=qN("<<"+s.typeC4Shape.text+">>",a),s.typeC4Shape.height=a.fontSize+2,s.typeC4Shape.Y=Lz.c4ShapePadding,i=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height);let c=s.wrap&&Lz.wrap,l=Lz.width-2*Lz.c4ShapePadding,d=Pz(Lz,s.typeC4Shape.text);d.fontSize=d.fontSize+2,d.fontWeight="bold",Fz("label",s,c,d,l),s.label.Y=i+8,i=s.label.Y+s.label.height,s.type&&""!==s.type.text?(s.type.text="["+s.type.text+"]",Fz("type",s,c,Pz(Lz,s.typeC4Shape.text),l),s.type.Y=i+5,i=s.type.Y+s.type.height):s.techn&&""!==s.techn.text&&(s.techn.text="["+s.techn.text+"]",Fz("techn",s,c,Pz(Lz,s.techn.text),l),s.techn.Y=i+5,i=s.techn.Y+s.techn.height);let u=i,h=s.label.width;s.descr&&""!==s.descr.text&&(Fz("descr",s,c,Pz(Lz,s.typeC4Shape.text),l),s.descr.Y=i+20,i=s.descr.Y+s.descr.height,h=Math.max(s.label.width,s.descr.width),u=i-5*s.descr.textLines),h+=Lz.c4ShapePadding,s.width=Math.max(s.width||Lz.width,h,Lz.width),s.height=Math.max(s.height||Lz.height,u,Lz.height),s.margin=s.margin||Lz.c4ShapeMargin,t.insert(s),Sz.drawC4Shape(e,s,Lz)}t.bumpLastMargin(Lz.c4ShapeMargin)};class $z{constructor(t,e){this.x=t,this.y=e}}let Hz=function(t,e){let n=t.x,r=t.y,i=e.x,o=e.y,s=n+t.width/2,a=r+t.height/2,c=Math.abs(n-i),l=Math.abs(r-o),d=l/c,u=t.height/t.width,h=null;return r==o&&n<i?h=new $z(n+t.width,a):r==o&&n>i?h=new $z(n,a):n==i&&r<o?h=new $z(s,r+t.height):n==i&&r>o&&(h=new $z(s,r)),n>i&&r<o?h=u>=d?new $z(n,a+d*t.width/2):new $z(s-c/l*t.height/2,r+t.height):n<i&&r<o?h=u>=d?new $z(n+t.width,a+d*t.width/2):new $z(s+c/l*t.height/2,r+t.height):n<i&&r>o?h=u>=d?new $z(n+t.width,a-d*t.width/2):new $z(s+t.height/2*c/l,r):n>i&&r>o&&(h=u>=d?new $z(n,a-t.width/2*d):new $z(s-t.height/2*c/l,r)),h},Uz=function(t,e){let n={x:0,y:0};n.x=e.x+e.width/2,n.y=e.y+e.height/2;let r=Hz(t,n);return n.x=t.x+t.width/2,n.y=t.y+t.height/2,{startPoint:r,endPoint:Hz(e,n)}};const Wz=function(t,e,n,r){let i=0;for(let t of e){i+=1;let e=t.wrap&&Lz.wrap,o=zz(Lz);"C4Dynamic"===r.db.getC4Type()&&(t.label.text=i+": "+t.label.text);let s=qN(t.label.text,o);Fz("label",t,e,o,s),t.techn&&""!==t.techn.text&&(s=qN(t.techn.text,o),Fz("techn",t,e,o,s)),t.descr&&""!==t.descr.text&&(s=qN(t.descr.text,o),Fz("descr",t,e,o,s));let a=n(t.from),c=n(t.to),l=Uz(a,c);t.startPoint=l.startPoint,t.endPoint=l.endPoint}Sz.drawRels(t,e,Lz)};function qz(t,e,n,r,i){let o=new Nz(i);o.data.widthLimit=n.data.widthLimit/Math.min(Bz,r.length);for(let s=0;s<r.length;s++){let a=r[s],c=0;a.image={width:0,height:0,Y:0},a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=c,c=a.image.Y+a.image.height);let l=a.wrap&&Lz.wrap,d=Rz(Lz);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Fz("label",a,l,d,o.data.widthLimit),a.label.Y=c+8,c=a.label.Y+a.label.height,a.type&&""!==a.type.text&&(a.type.text="["+a.type.text+"]",Fz("type",a,l,Rz(Lz),o.data.widthLimit),a.type.Y=c+5,c=a.type.Y+a.type.height),a.descr&&""!==a.descr.text){let t=Rz(Lz);t.fontSize=t.fontSize-2,Fz("descr",a,l,t,o.data.widthLimit),a.descr.Y=c+20,c=a.descr.Y+a.descr.height}if(0==s||s%Bz==0){let t=n.data.startx+Lz.diagramMarginX,e=n.data.stopy+Lz.diagramMarginY+c;o.setData(t,t,e,e)}else{let t=o.data.stopx!==o.data.startx?o.data.stopx+Lz.diagramMarginX:o.data.startx,e=o.data.starty;o.setData(t,t,e,e)}o.name=a.alias;let u=i.db.getC4ShapeArray(a.alias),h=i.db.getC4ShapeKeys(a.alias);h.length>0&&Vz(o,t,u,h),e=a.alias;let g=i.db.getBoundarys(e);g.length>0&&qz(t,e,o,g,i),"global"!==a.alias&&jz(t,a,o),n.data.stopy=Math.max(o.data.stopy+Lz.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(o.data.stopx+Lz.c4ShapeMargin,n.data.stopx),Dz=Math.max(Dz,n.data.stopx),Mz=Math.max(Mz,n.data.stopy)}}const Yz={drawPersonOrSystemArray:Vz,drawBoundary:jz,setConf:Oz,draw:function(t,e,n,r){Lz=nP().c4;const i=nP().securityLevel;let o;"sandbox"===i&&(o=Qr("#i"+e));const s=Qr("sandbox"===i?o.nodes()[0].contentDocument.body:"body");let a=r.db;r.db.setWrap(Lz.wrap),Iz=a.getC4ShapeInRow(),Bz=a.getC4BoundaryInRow(),u.debug(`C:${JSON.stringify(Lz,null,2)}`);const c="sandbox"===i?s.select(`[id="${e}"]`):Qr(`[id="${e}"]`);Sz.insertComputerIcon(c),Sz.insertDatabaseIcon(c),Sz.insertClockIcon(c);let l=new Nz(r);l.setData(Lz.diagramMarginX,Lz.diagramMarginX,Lz.diagramMarginY,Lz.diagramMarginY),l.data.widthLimit=screen.availWidth,Dz=Lz.diagramMarginX,Mz=Lz.diagramMarginY;const d=r.db.getTitle();qz(c,"",l,r.db.getBoundarys(""),r),Sz.insertArrowHead(c),Sz.insertArrowEnd(c),Sz.insertArrowCrossHead(c),Sz.insertArrowFilledHead(c),Wz(c,r.db.getRels(),r.db.getC4Shape,r),l.data.stopx=Dz,l.data.stopy=Mz;const h=l.data;let g=h.stopy-h.starty+2*Lz.diagramMarginY;const f=h.stopx-h.startx+2*Lz.diagramMarginX;d&&c.append("text").text(d).attr("x",(h.stopx-h.startx)/2-4*Lz.diagramMarginX).attr("y",h.starty+Lz.diagramMarginY),hP(c,g,f,Lz.useMaxWidth);const p=d?60:0;c.attr("viewBox",h.startx-Lz.diagramMarginX+" -"+(Lz.diagramMarginY+p)+" "+f+" "+(g+p)),yR(zR.yy,c,e),u.debug("models:",h)}};var Gz=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,7],r=[1,8],i=[1,9],o=[1,10],s=[1,13],a=[1,12],c=[1,16,25],l=[1,20],d=[1,31],u=[1,32],h=[1,33],g=[1,35],f=[1,38],p=[1,36],m=[1,37],b=[1,39],k=[1,40],w=[1,41],y=[1,42],_=[1,45],v=[1,46],A=[1,47],C=[1,48],x=[16,25],E=[1,62],T=[1,63],S=[1,64],D=[1,65],M=[1,66],I=[1,67],B=[1,68],L=[16,25,32,44,45,53,56,57,58,59,60,61,62,67,69],N=[16,25,30,32,44,45,49,53,56,57,58,59,60,61,62,67,69,84,85,86,87],O=[5,8,9,10,11,16,19,23,25],P=[53,84,85,86,87],R=[53,61,62,84,85,86,87],z=[53,56,57,58,59,60,84,85,86,87],F=[16,25,32],j=[1,100],V={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,acc_title:38,acc_title_value:39,acc_descr:40,acc_descr_value:41,acc_descr_multiline_value:42,CLASS:43,STYLE_SEPARATOR:44,STRUCT_START:45,members:46,STRUCT_STOP:47,ANNOTATION_START:48,ANNOTATION_END:49,MEMBER:50,SEPARATOR:51,relation:52,STR:53,relationType:54,lineType:55,AGGREGATION:56,EXTENSION:57,COMPOSITION:58,DEPENDENCY:59,LOLLIPOP:60,LINE:61,DOTTED_LINE:62,CALLBACK:63,LINK:64,LINK_TARGET:65,CLICK:66,CALLBACK_NAME:67,CALLBACK_ARGS:68,HREF:69,CSSCLASS:70,commentToken:71,textToken:72,graphCodeTokens:73,textNoTagsToken:74,TAGSTART:75,TAGEND:76,"==":77,"--":78,PCT:79,DEFAULT:80,SPACE:81,MINUS:82,keywords:83,UNICODE_TEXT:84,NUM:85,ALPHA:86,BQUOTE_STR:87,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",38:"acc_title",39:"acc_title_value",40:"acc_descr",41:"acc_descr_value",42:"acc_descr_multiline_value",43:"CLASS",44:"STYLE_SEPARATOR",45:"STRUCT_START",47:"STRUCT_STOP",48:"ANNOTATION_START",49:"ANNOTATION_END",50:"MEMBER",51:"SEPARATOR",53:"STR",56:"AGGREGATION",57:"EXTENSION",58:"COMPOSITION",59:"DEPENDENCY",60:"LOLLIPOP",61:"LINE",62:"DOTTED_LINE",63:"CALLBACK",64:"LINK",65:"LINK_TARGET",66:"CLICK",67:"CALLBACK_NAME",68:"CALLBACK_ARGS",69:"HREF",70:"CSSCLASS",73:"graphCodeTokens",75:"TAGSTART",76:"TAGEND",77:"==",78:"--",79:"PCT",80:"DEFAULT",81:"SPACE",82:"MINUS",83:"keywords",84:"UNICODE_TEXT",85:"NUM",86:"ALPHA",87:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[46,1],[46,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[52,3],[52,2],[52,2],[52,1],[54,1],[54,1],[54,1],[54,1],[54,1],[55,1],[55,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[71,1],[71,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[72,1],[74,1],[74,1],[74,1],[74,1],[28,1],[28,1],[28,1],[29,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 5:r.setDirection("TB");break;case 6:r.setDirection("BT");break;case 7:r.setDirection("RL");break;case 8:r.setDirection("LR");break;case 12:r.parseDirective("%%{","open_directive");break;case 13:r.parseDirective(o[a],"type_directive");break;case 14:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 15:r.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=o[a];break;case 22:this.$=o[a-1]+o[a];break;case 23:case 24:this.$=o[a-1]+"~"+o[a];break;case 25:r.addRelation(o[a]);break;case 26:o[a-1].title=r.cleanupLabel(o[a]),r.addRelation(o[a-1]);break;case 34:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 35:case 36:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 37:r.addClass(o[a]);break;case 38:r.addClass(o[a-2]),r.setCssClass(o[a-2],o[a]);break;case 39:r.addClass(o[a-3]),r.addMembers(o[a-3],o[a-1]);break;case 40:r.addClass(o[a-5]),r.setCssClass(o[a-5],o[a-3]),r.addMembers(o[a-5],o[a-1]);break;case 41:r.addAnnotation(o[a],o[a-2]);break;case 42:this.$=[o[a]];break;case 43:o[a].push(o[a-1]),this.$=o[a];break;case 44:case 46:case 47:break;case 45:r.addMember(o[a-1],r.cleanupLabel(o[a]));break;case 48:this.$={id1:o[a-2],id2:o[a],relation:o[a-1],relationTitle1:"none",relationTitle2:"none"};break;case 49:this.$={id1:o[a-3],id2:o[a],relation:o[a-1],relationTitle1:o[a-2],relationTitle2:"none"};break;case 50:this.$={id1:o[a-3],id2:o[a],relation:o[a-2],relationTitle1:"none",relationTitle2:o[a-1]};break;case 51:this.$={id1:o[a-4],id2:o[a],relation:o[a-2],relationTitle1:o[a-3],relationTitle2:o[a-1]};break;case 52:this.$={type1:o[a-2],type2:o[a],lineType:o[a-1]};break;case 53:this.$={type1:"none",type2:o[a],lineType:o[a-1]};break;case 54:this.$={type1:o[a-1],type2:"none",lineType:o[a]};break;case 55:this.$={type1:"none",type2:"none",lineType:o[a]};break;case 56:this.$=r.relationType.AGGREGATION;break;case 57:this.$=r.relationType.EXTENSION;break;case 58:this.$=r.relationType.COMPOSITION;break;case 59:this.$=r.relationType.DEPENDENCY;break;case 60:this.$=r.relationType.LOLLIPOP;break;case 61:this.$=r.lineType.LINE;break;case 62:this.$=r.lineType.DOTTED_LINE;break;case 63:case 69:this.$=o[a-2],r.setClickEvent(o[a-1],o[a]);break;case 64:case 70:this.$=o[a-3],r.setClickEvent(o[a-2],o[a-1]),r.setTooltip(o[a-2],o[a]);break;case 65:case 73:this.$=o[a-2],r.setLink(o[a-1],o[a]);break;case 66:case 74:this.$=o[a-3],r.setLink(o[a-2],o[a-1],o[a]);break;case 67:case 75:this.$=o[a-3],r.setLink(o[a-2],o[a-1]),r.setTooltip(o[a-2],o[a]);break;case 68:case 76:this.$=o[a-4],r.setLink(o[a-3],o[a-2],o[a]),r.setTooltip(o[a-3],o[a-1]);break;case 71:this.$=o[a-3],r.setClickEvent(o[a-2],o[a-1],o[a]);break;case 72:this.$=o[a-4],r.setClickEvent(o[a-3],o[a-2],o[a-1]),r.setTooltip(o[a-3],o[a]);break;case 77:r.setCssClass(o[a-1],o[a])}},table:[{3:1,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:o,12:6,13:11,19:s,23:a},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:e,6:4,7:5,8:n,9:r,10:i,11:o,12:6,13:11,19:s,23:a},{1:[2,9]},t(c,[2,5]),t(c,[2,6]),t(c,[2,7]),t(c,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:l},t([17,22],[2,13]),{6:30,7:29,8:n,9:r,10:i,11:o,13:11,19:s,24:21,26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:d,40:u,42:h,43:g,48:f,50:p,51:m,63:b,64:k,66:w,70:y,84:_,85:v,86:A,87:C},{16:[1,49]},{18:50,21:[1,51]},{16:[2,15]},{25:[1,52]},{16:[1,53],25:[2,17]},t(x,[2,25],{32:[1,54]}),t(x,[2,27]),t(x,[2,28]),t(x,[2,29]),t(x,[2,30]),t(x,[2,31]),t(x,[2,32]),t(x,[2,33]),{39:[1,55]},{41:[1,56]},t(x,[2,36]),t(x,[2,44],{52:57,54:60,55:61,32:[1,59],53:[1,58],56:E,57:T,58:S,59:D,60:M,61:I,62:B}),{27:69,28:43,29:44,84:_,85:v,86:A,87:C},t(x,[2,46]),t(x,[2,47]),{28:70,84:_,85:v,86:A},{27:71,28:43,29:44,84:_,85:v,86:A,87:C},{27:72,28:43,29:44,84:_,85:v,86:A,87:C},{27:73,28:43,29:44,84:_,85:v,86:A,87:C},{53:[1,74]},t(L,[2,20],{28:43,29:44,27:75,30:[1,76],84:_,85:v,86:A,87:C}),t(L,[2,21],{30:[1,77]}),t(N,[2,91]),t(N,[2,92]),t(N,[2,93]),t([16,25,30,32,44,45,53,56,57,58,59,60,61,62,67,69],[2,94]),t(O,[2,10]),{15:78,22:l},{22:[2,14]},{1:[2,16]},{6:30,7:29,8:n,9:r,10:i,11:o,13:11,19:s,24:79,25:[2,18],26:22,27:34,28:43,29:44,31:23,33:24,34:25,35:26,36:27,37:28,38:d,40:u,42:h,43:g,48:f,50:p,51:m,63:b,64:k,66:w,70:y,84:_,85:v,86:A,87:C},t(x,[2,26]),t(x,[2,34]),t(x,[2,35]),{27:80,28:43,29:44,53:[1,81],84:_,85:v,86:A,87:C},{52:82,54:60,55:61,56:E,57:T,58:S,59:D,60:M,61:I,62:B},t(x,[2,45]),{55:83,61:I,62:B},t(P,[2,55],{54:84,56:E,57:T,58:S,59:D,60:M}),t(R,[2,56]),t(R,[2,57]),t(R,[2,58]),t(R,[2,59]),t(R,[2,60]),t(z,[2,61]),t(z,[2,62]),t(x,[2,37],{44:[1,85],45:[1,86]}),{49:[1,87]},{53:[1,88]},{53:[1,89]},{67:[1,90],69:[1,91]},{28:92,84:_,85:v,86:A},t(L,[2,22]),t(L,[2,23]),t(L,[2,24]),{16:[1,93]},{25:[2,19]},t(F,[2,48]),{27:94,28:43,29:44,84:_,85:v,86:A,87:C},{27:95,28:43,29:44,53:[1,96],84:_,85:v,86:A,87:C},t(P,[2,54],{54:97,56:E,57:T,58:S,59:D,60:M}),t(P,[2,53]),{28:98,84:_,85:v,86:A},{46:99,50:j},{27:101,28:43,29:44,84:_,85:v,86:A,87:C},t(x,[2,63],{53:[1,102]}),t(x,[2,65],{53:[1,104],65:[1,103]}),t(x,[2,69],{53:[1,105],68:[1,106]}),t(x,[2,73],{53:[1,108],65:[1,107]}),t(x,[2,77]),t(O,[2,11]),t(F,[2,50]),t(F,[2,49]),{27:109,28:43,29:44,84:_,85:v,86:A,87:C},t(P,[2,52]),t(x,[2,38],{45:[1,110]}),{47:[1,111]},{46:112,47:[2,42],50:j},t(x,[2,41]),t(x,[2,64]),t(x,[2,66]),t(x,[2,67],{65:[1,113]}),t(x,[2,70]),t(x,[2,71],{53:[1,114]}),t(x,[2,74]),t(x,[2,75],{65:[1,115]}),t(F,[2,51]),{46:116,50:j},t(x,[2,39]),{47:[2,43]},t(x,[2,68]),t(x,[2,72]),t(x,[2,76]),{47:[1,117]},t(x,[2,40])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],51:[2,14],52:[2,16],79:[2,19],112:[2,43]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},$={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:case 19:case 27:break;case 11:return this.begin("acc_title"),38;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),40;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:case 37:case 40:case 43:case 46:case 49:case 52:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 20:case 21:return 23;case 22:return this.begin("struct"),45;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),47;case 28:return"MEMBER";case 29:return 43;case 30:return 70;case 31:return 63;case 32:return 64;case 33:return 66;case 34:return 48;case 35:return 49;case 36:this.begin("generic");break;case 38:return"GENERICTYPE";case 39:this.begin("string");break;case 41:return"STR";case 42:this.begin("bqstring");break;case 44:return"BQUOTE_STR";case 45:this.begin("href");break;case 47:return 69;case 48:this.begin("callback_name");break;case 50:this.popState(),this.begin("callback_args");break;case 51:return 67;case 53:return 68;case 54:case 55:case 56:case 57:return 65;case 58:case 59:return 57;case 60:case 61:return 59;case 62:return 58;case 63:return 56;case 64:return 60;case 65:return 61;case 66:return 62;case 67:return 32;case 68:return 44;case 69:return 82;case 70:return"DOT";case 71:return"PLUS";case 72:return 79;case 73:case 74:return"EQUALS";case 75:return 86;case 76:return"PUNCTUATION";case 77:return 85;case 78:return 84;case 79:return 81;case 80:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[52,53],inclusive:!1},callback_name:{rules:[49,50,51],inclusive:!1},href:{rules:[46,47],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[37,38],inclusive:!1},bqstring:{rules:[43,44],inclusive:!1},string:{rules:[40,41],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,39,42,45,48,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],inclusive:!0}}};function H(){this.yy={}}return V.lexer=$,H.prototype=V,V.Parser=H,new H}();Gz.parser=Gz;const Zz=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*classDiagram/)},Kz=(t,e)=>{var n;return null!==t.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(n=null==e?void 0:e.class)?void 0:n.defaultRenderer)||null!==t.match(/^\s*classDiagram-v2/)},Qz="classid-";let Xz=[],Jz={},tF=0,eF=[];const nF=t=>gI.sanitizeText(t,nP()),rF=function(t,e,n){h9.parseDirective(this,t,e,n)},iF=function(t){let e="",n=t;if(t.indexOf("~")>0){let r=t.split("~");n=r[0],e=gI.sanitizeText(r[1],nP())}return{className:n,type:e}},oF=function(t){let e=iF(t);void 0===Jz[e.className]&&(Jz[e.className]={id:e.className,type:e.type,cssClasses:[],methods:[],members:[],annotations:[],domId:Qz+e.className+"-"+tF},tF++)},sF=function(t){const e=Object.keys(Jz);for(let n=0;n<e.length;n++)if(Jz[e[n]].id===t)return Jz[e[n]].domId},aF=function(){Xz=[],Jz={},eF=[],eF.push(xF),UP()},cF=function(t){return Jz[t]},lF=function(){return Jz},dF=function(){return Xz},uF=function(t){u.debug("Adding relation: "+JSON.stringify(t)),oF(t.id1),oF(t.id2),t.id1=iF(t.id1).className,t.id2=iF(t.id2).className,t.relationTitle1=gI.sanitizeText(t.relationTitle1.trim(),nP()),t.relationTitle2=gI.sanitizeText(t.relationTitle2.trim(),nP()),Xz.push(t)},hF=function(t,e){const n=iF(t).className;Jz[n].annotations.push(e)},gF=function(t,e){const n=iF(t).className,r=Jz[n];if("string"==typeof e){const t=e.trim();t.startsWith("<<")&&t.endsWith(">>")?r.annotations.push(nF(t.substring(2,t.length-2))):t.indexOf(")")>0?r.methods.push(nF(t)):t&&r.members.push(nF(t))}},fF=function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach((e=>gF(t,e))))},pF=function(t){return":"===t.substring(0,1)?gI.sanitizeText(t.substr(1).trim(),nP()):nF(t.trim())},mF=function(t,e){t.split(",").forEach((function(t){let n=t;t[0].match(/\d/)&&(n=Qz+n),void 0!==Jz[n]&&Jz[n].cssClasses.push(e)}))},bF=function(t,e){const n=nP();t.split(",").forEach((function(t){void 0!==e&&(Jz[t].tooltip=gI.sanitizeText(e,n))}))},kF=function(t){return Jz[t].tooltip},wF=function(t,e,n){const r=nP();t.split(",").forEach((function(t){let i=t;t[0].match(/\d/)&&(i=Qz+i),void 0!==Jz[i]&&(Jz[i].link=JN.formatUrl(e,r),"sandbox"===r.securityLevel?Jz[i].linkTarget="_top":Jz[i].linkTarget="string"==typeof n?nF(n):"_blank")})),mF(t,"clickable")},yF=function(t,e,n){t.split(",").forEach((function(t){_F(t,e,n),Jz[t].haveCallback=!0})),mF(t,"clickable")},_F=function(t,e,n){const r=nP();let i=t,o=sF(i);if("loose"===r.securityLevel&&void 0!==e&&void 0!==Jz[i]){let t=[];if("string"==typeof n){t=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<t.length;e++){let n=t[e].trim();'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substr(1,n.length-2)),t[e]=n}}0===t.length&&t.push(o),eF.push((function(){const n=document.querySelector(`[id="${o}"]`);null!==n&&n.addEventListener("click",(function(){JN.runFunc(e,...t)}),!1)}))}},vF=function(t){eF.forEach((function(e){e(t)}))},AF={LINE:0,DOTTED_LINE:1},CF={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},xF=function(t){let e=Qr(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=Qr("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Qr(t).select("svg").selectAll("g.node").on("mouseover",(function(){const t=Qr(this);if(null===t.attr("title"))return;const n=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(t.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),t.classed("hover",!0)})).on("mouseout",(function(){e.transition().duration(500).style("opacity",0),Qr(this).classed("hover",!1)}))};eF.push(xF);let EF="TB";const TF={parseDirective:rF,setAccTitle:WP,getAccTitle:qP,getAccDescription:GP,setAccDescription:YP,getConfig:()=>nP().class,addClass:oF,bindFunctions:vF,clear:aF,getClass:cF,getClasses:lF,addAnnotation:hF,getRelations:dF,addRelation:uF,getDirection:()=>EF,setDirection:t=>{EF=t},addMember:gF,addMembers:fF,cleanupLabel:pF,lineType:AF,relationType:CF,setClickEvent:yF,setCssClass:mF,setLink:wF,getTooltip:kF,setTooltip:bF,lookUpDomId:sF};var SF,DF,MF,IF,BF,LF,NF,OF,PF,RF,zF,FF,jF,VF,$F,HF,UF,WF,qF,YF,GF,ZF,KF,QF,XF,JF,tj,ej,nj,rj,ij,oj;function sj(){if(DF)return SF;DF=1;var t=GL;function e(){this.__data__=new t,this.size=0}return SF=e}function aj(){if(IF)return MF;function t(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}return IF=1,MF=t}function cj(){if(LF)return BF;function t(t){return this.__data__.get(t)}return LF=1,BF=t}function lj(){if(OF)return NF;function t(t){return this.__data__.has(t)}return OF=1,NF=t}function dj(){if(RF)return PF;RF=1;var t=GL,e=ZL,n=bN,r=200;function i(i,o){var s=this.__data__;if(s instanceof t){var a=s.__data__;if(!e||a.length<r-1)return a.push([i,o]),this.size=++s.size,this;s=this.__data__=new n(a)}return s.set(i,o),this.size=s.size,this}return PF=i}function uj(){if(FF)return zF;FF=1;var t=GL,e=sj(),n=aj(),r=cj(),i=lj(),o=dj();function s(e){var n=this.__data__=new t(e);this.size=n.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=o,zF=s}function hj(){if(VF)return jF;function t(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}return VF=1,jF=t}function gj(){if(HF)return $F;HF=1;var t=tL,e=function(){try{var e=t(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();return $F=e}function fj(){if(WF)return UF;WF=1;var t=gj();function e(e,n,r){"__proto__"==n&&t?t(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}return UF=e}function pj(){if(YF)return qF;YF=1;var t=fj(),e=DL(),n=Object.prototype.hasOwnProperty;function r(r,i,o){var s=r[i];n.call(r,i)&&e(s,o)&&(void 0!==o||i in r)||t(r,i,o)}return qF=r}function mj(){if(ZF)return GF;ZF=1;var t=pj(),e=fj();function n(n,r,i,o){var s=!i;i||(i={});for(var a=-1,c=r.length;++a<c;){var l=r[a],d=o?o(i[l],n[l],l,i,n):void 0;void 0===d&&(d=n[l]),s?e(i,l,d):t(i,l,d)}return i}return GF=n}function bj(){if(QF)return KF;function t(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}return QF=1,KF=t}function kj(){if(JF)return XF;function t(t){return null!=t&&"object"==typeof t}return JF=1,XF=t}function wj(){if(ej)return tj;ej=1;var t=TB(),e=kj(),n="[object Arguments]";function r(r){return e(r)&&t(r)==n}return tj=r}function yj(){if(rj)return nj;rj=1;var t=wj(),e=kj(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=t(function(){return arguments}())?t:function(t){return e(t)&&r.call(t,"callee")&&!i.call(t,"callee")};return nj=o}function _j(){if(oj)return ij;oj=1;var t=Array.isArray;return ij=t}var vj,Aj,Cj,xj,Ej,Tj,Sj,Dj,Mj,Ij,Bj,Lj={exports:{}};function Nj(){if(Aj)return vj;function t(){return!1}return Aj=1,vj=t}function Oj(){return Cj||(Cj=1,function(t,e){var n=AB,r=Nj(),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?n.Buffer:void 0,a=(s?s.isBuffer:void 0)||r;t.exports=a}(Lj,Lj.exports)),Lj.exports}function Pj(){if(Ej)return xj;Ej=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(n,r){var i=typeof n;return!!(r=null==r?t:r)&&("number"==i||"symbol"!=i&&e.test(n))&&n>-1&&n%1==0&&n<r}return xj=n}function Rj(){if(Sj)return Tj;Sj=1;var t=9007199254740991;function e(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}return Tj=e}function zj(){if(Mj)return Dj;Mj=1;var t=TB(),e=Rj(),n=kj(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",s="[object Date]",a="[object Error]",c="[object Function]",l="[object Map]",d="[object Number]",u="[object Object]",h="[object RegExp]",g="[object Set]",f="[object String]",p="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",k="[object Float64Array]",w="[object Int8Array]",y="[object Int16Array]",_="[object Int32Array]",v="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",x="[object Uint32Array]",E={};function T(r){return n(r)&&e(r.length)&&!!E[t(r)]}return E["[object Float32Array]"]=E[k]=E[w]=E[y]=E[_]=E[v]=E[A]=E[C]=E[x]=!0,E[r]=E[i]=E[m]=E[o]=E[b]=E[s]=E[a]=E[c]=E[l]=E[d]=E[u]=E[h]=E[g]=E[f]=E[p]=!1,Dj=T}function Fj(){if(Bj)return Ij;function t(t){return function(e){return t(e)}}return Bj=1,Ij=t}var jj,Vj,$j,Hj,Uj,Wj,qj,Yj,Gj,Zj,Kj,Qj,Xj,Jj,tV,eV,nV,rV,iV,oV,sV,aV,cV,lV,dV,uV,hV,gV={exports:{}};function fV(){return jj||(jj=1,function(t,e){var n=yB,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r&&n.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}(gV,gV.exports)),gV.exports}function pV(){if($j)return Vj;$j=1;var t=zj(),e=Fj(),n=fV(),r=n&&n.isTypedArray,i=r?e(r):t;return Vj=i}function mV(){if(Uj)return Hj;Uj=1;var t=bj(),e=yj(),n=_j(),r=Oj(),i=Pj(),o=pV(),s=Object.prototype.hasOwnProperty;function a(a,c){var l=n(a),d=!l&&e(a),u=!l&&!d&&r(a),h=!l&&!d&&!u&&o(a),g=l||d||u||h,f=g?t(a.length,String):[],p=f.length;for(var m in a)!c&&!s.call(a,m)||g&&("length"==m||u&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||i(m,p))||f.push(m);return f}return Hj=a}function bV(){if(qj)return Wj;qj=1;var t=Object.prototype;function e(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}return Wj=e}function kV(){if(Gj)return Yj;function t(t,e){return function(n){return t(e(n))}}return Gj=1,Yj=t}function wV(){if(Kj)return Zj;Kj=1;var t=kV()(Object.keys,Object);return Zj=t}function yV(){if(Xj)return Qj;Xj=1;var t=bV(),e=wV(),n=Object.prototype.hasOwnProperty;function r(r){if(!t(r))return e(r);var i=[];for(var o in Object(r))n.call(r,o)&&"constructor"!=o&&i.push(o);return i}return Qj=r}function _V(){if(tV)return Jj;tV=1;var t=DB(),e=Rj();function n(n){return null!=n&&e(n.length)&&!t(n)}return Jj=n}function vV(){if(nV)return eV;nV=1;var t=mV(),e=yV(),n=_V();function r(r){return n(r)?t(r):e(r)}return eV=r}function AV(){if(iV)return rV;iV=1;var t=mj(),e=vV();function n(n,r){return n&&t(r,e(r),n)}return rV=n}function CV(){if(sV)return oV;function t(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}return sV=1,oV=t}function xV(){if(cV)return aV;cV=1;var t=SB(),e=bV(),n=CV(),r=Object.prototype.hasOwnProperty;function i(i){if(!t(i))return n(i);var o=e(i),s=[];for(var a in i)("constructor"!=a||!o&&r.call(i,a))&&s.push(a);return s}return aV=i}function EV(){if(dV)return lV;dV=1;var t=mV(),e=xV(),n=_V();function r(r){return n(r)?t(r,!0):e(r)}return lV=r}function TV(){if(hV)return uV;hV=1;var t=mj(),e=EV();function n(n,r){return n&&t(r,e(r),n)}return uV=n}var SV,DV,MV,IV,BV,LV,NV,OV,PV,RV,zV,FV,jV,VV,$V,HV,UV,WV,qV,YV,GV,ZV,KV,QV,XV,JV,t$,e$,n$,r$,i$,o$,s$,a$,c$,l$,d$,u$,h$,g$,f$,p$,m$,b$,k$,w$,y$,_$,v$,A$,C$,x$,E$,T$,S$,D$,M$,I$,B$,L$,N$,O$,P$,R$,z$,F$,j$,V$,$$,H$={exports:{}};function U$(){return SV||(SV=1,function(t,e){var n=AB,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function a(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}t.exports=a}(H$,H$.exports)),H$.exports}function W$(){if(MV)return DV;function t(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}return MV=1,DV=t}function q$(){if(BV)return IV;function t(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}return BV=1,IV=t}function Y$(){if(NV)return LV;function t(){return[]}return NV=1,LV=t}function G$(){if(PV)return OV;PV=1;var t=q$(),e=Y$(),n=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols;return OV=r?function(e){return null==e?[]:(e=Object(e),t(r(e),(function(t){return n.call(e,t)})))}:e}function Z$(){if(zV)return RV;zV=1;var t=mj(),e=G$();function n(n,r){return t(n,e(n),r)}return RV=n}function K$(){if(jV)return FV;function t(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}return jV=1,FV=t}function Q$(){if($V)return VV;$V=1;var t=kV()(Object.getPrototypeOf,Object);return VV=t}function X$(){if(UV)return HV;UV=1;var t=K$(),e=Q$(),n=G$(),r=Y$(),i=Object.getOwnPropertySymbols;return HV=i?function(r){for(var i=[];r;)t(i,n(r)),r=e(r);return i}:r}function J$(){if(qV)return WV;qV=1;var t=mj(),e=X$();function n(n,r){return t(n,e(n),r)}return WV=n}function tH(){if(GV)return YV;GV=1;var t=K$(),e=_j();function n(n,r,i){var o=r(n);return e(n)?o:t(o,i(n))}return YV=n}function eH(){if(KV)return ZV;KV=1;var t=tH(),e=G$(),n=vV();function r(r){return t(r,n,e)}return ZV=r}function nH(){if(XV)return QV;XV=1;var t=tH(),e=X$(),n=EV();function r(r){return t(r,n,e)}return QV=r}function rH(){if(t$)return JV;t$=1;var t=tL(AB,"DataView");return JV=t}function iH(){if(n$)return e$;n$=1;var t=tL(AB,"Promise");return e$=t}function oH(){if(i$)return r$;i$=1;var t=tL(AB,"Set");return r$=t}function sH(){if(s$)return o$;s$=1;var t=tL(AB,"WeakMap");return o$=t}function aH(){if(c$)return a$;c$=1;var t=rH(),e=ZL,n=iH(),r=oH(),i=sH(),o=TB(),s=RB(),a="[object Map]",c="[object Object]",l="[object Promise]",d="[object Set]",u="[object WeakMap]",h="[object DataView]",g=s(t),f=s(e),p=s(n),m=s(r),b=s(i),k=o;return(t&&k(new t(new ArrayBuffer(1)))!=h||e&&k(new e)!=a||n&&k(n.resolve())!=l||r&&k(new r)!=d||i&&k(new i)!=u)&&(k=function(t){var e=o(t),n=e==c?t.constructor:void 0,r=n?s(n):"";if(r)switch(r){case g:return h;case f:return a;case p:return l;case m:return d;case b:return u}return e}),a$=k}function cH(){if(d$)return l$;d$=1;var t=Object.prototype.hasOwnProperty;function e(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}return l$=e}function lH(){if(h$)return u$;h$=1;var t=AB.Uint8Array;return u$=t}function dH(){if(f$)return g$;f$=1;var t=lH();function e(e){var n=new e.constructor(e.byteLength);return new t(n).set(new t(e)),n}return g$=e}function uH(){if(m$)return p$;m$=1;var t=dH();function e(e,n){var r=n?t(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}return p$=e}function hH(){if(k$)return b$;k$=1;var t=/\w*$/;function e(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}return b$=e}function gH(){if(y$)return w$;y$=1;var t=CB(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(t){return n?Object(n.call(t)):{}}return w$=r}function fH(){if(v$)return _$;v$=1;var t=dH();function e(e,n){var r=n?t(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}return _$=e}function pH(){if(C$)return A$;C$=1;var t=dH(),e=uH(),n=hH(),r=gH(),i=fH(),o="[object Boolean]",s="[object Date]",a="[object Map]",c="[object Number]",l="[object RegExp]",d="[object Set]",u="[object String]",h="[object Symbol]",g="[object ArrayBuffer]",f="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",b="[object Int8Array]",k="[object Int16Array]",w="[object Int32Array]",y="[object Uint8Array]",_="[object Uint8ClampedArray]",v="[object Uint16Array]",A="[object Uint32Array]";function C(C,x,E){var T=C.constructor;switch(x){case g:return t(C);case o:case s:return new T(+C);case f:return e(C,E);case p:case m:case b:case k:case w:case y:case _:case v:case A:return i(C,E);case a:return new T;case c:case u:return new T(C);case l:return n(C);case d:return new T;case h:return r(C)}}return A$=C}function mH(){if(E$)return x$;E$=1;var t=SB(),e=Object.create,n=function(){function n(){}return function(r){if(!t(r))return{};if(e)return e(r);n.prototype=r;var i=new n;return n.prototype=void 0,i}}();return x$=n}function bH(){if(S$)return T$;S$=1;var t=mH(),e=Q$(),n=bV();function r(r){return"function"!=typeof r.constructor||n(r)?{}:t(e(r))}return T$=r}function kH(){if(M$)return D$;M$=1;var t=aH(),e=kj(),n="[object Map]";function r(r){return e(r)&&t(r)==n}return D$=r}function wH(){if(B$)return I$;B$=1;var t=kH(),e=Fj(),n=fV(),r=n&&n.isMap,i=r?e(r):t;return I$=i}function yH(){if(N$)return L$;N$=1;var t=aH(),e=kj(),n="[object Set]";function r(r){return e(r)&&t(r)==n}return L$=r}function _H(){if(P$)return O$;P$=1;var t=yH(),e=Fj(),n=fV(),r=n&&n.isSet,i=r?e(r):t;return O$=i}function vH(){if(z$)return R$;z$=1;var t=uj(),e=hj(),n=pj(),r=AV(),i=TV(),o=U$(),s=W$(),a=Z$(),c=J$(),l=eH(),d=nH(),u=aH(),h=cH(),g=pH(),f=bH(),p=_j(),m=Oj(),b=wH(),k=SB(),w=_H(),y=vV(),_=EV(),v=1,A=2,C=4,x="[object Arguments]",E="[object Array]",T="[object Boolean]",S="[object Date]",D="[object Error]",M="[object Function]",I="[object GeneratorFunction]",B="[object Map]",L="[object Number]",N="[object Object]",O="[object RegExp]",P="[object Set]",R="[object String]",z="[object Symbol]",F="[object WeakMap]",j="[object ArrayBuffer]",V="[object DataView]",$="[object Float32Array]",H="[object Float64Array]",U="[object Int8Array]",W="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",G="[object Uint8ClampedArray]",Z="[object Uint16Array]",K="[object Uint32Array]",Q={};function X(E,T,S,D,B,L){var O,P=T&v,R=T&A,z=T&C;if(S&&(O=B?S(E,D,B,L):S(E)),void 0!==O)return O;if(!k(E))return E;var F=p(E);if(F){if(O=h(E),!P)return s(E,O)}else{var j=u(E),V=j==M||j==I;if(m(E))return o(E,P);if(j==N||j==x||V&&!B){if(O=R||V?{}:f(E),!P)return R?c(E,i(O,E)):a(E,r(O,E))}else{if(!Q[j])return B?E:{};O=g(E,j,P)}}L||(L=new t);var $=L.get(E);if($)return $;L.set(E,O),w(E)?E.forEach((function(t){O.add(X(t,T,S,t,E,L))})):b(E)&&E.forEach((function(t,e){O.set(e,X(t,T,S,e,E,L))}));var H=F?void 0:(z?R?d:l:R?_:y)(E);return e(H||E,(function(t,e){H&&(t=E[e=t]),n(O,e,X(t,T,S,e,E,L))})),O}return Q[x]=Q[E]=Q[j]=Q[V]=Q[T]=Q[S]=Q[$]=Q[H]=Q[U]=Q[W]=Q[q]=Q[B]=Q[L]=Q[N]=Q[O]=Q[P]=Q[R]=Q[z]=Q[Y]=Q[G]=Q[Z]=Q[K]=!0,Q[D]=Q[M]=Q[F]=!1,R$=X}function AH(){if(j$)return F$;j$=1;var t=vH(),e=4;function n(n){return t(n,e)}return F$=n}function CH(){if($$)return V$;function t(t){return function(){return t}}return $$=1,V$=t}var xH,EH,TH,SH,DH,MH,IH,BH,LH,NH,OH,PH,RH,zH,FH,jH,VH,$H,HH,UH,WH,qH,YH,GH,ZH,KH,QH,XH,JH,tU,eU,nU,rU,iU,oU,sU,aU,cU,lU,dU,uU,hU,gU,fU,pU,mU,bU,kU,wU,yU,_U,vU,AU,CU,xU,EU,TU,SU,DU,MU,IU,BU,LU,NU,OU,PU,RU,zU,FU,jU,VU,$U,HU,UU,WU,qU,YU,GU,ZU,KU,QU,XU,JU,tW,eW,nW,rW,iW,oW,sW,aW,cW,lW,dW,uW,hW,gW,fW,pW,mW,bW,kW,wW,yW,_W,vW,AW,CW,xW,EW,TW,SW,DW,MW,IW,BW,LW,NW,OW,PW,RW,zW,FW,jW,VW,$W,HW,UW,WW,qW,YW,GW,ZW,KW,QW,XW,JW,tq,eq,nq,rq,iq,oq,sq,aq,cq,lq,dq,uq,hq,gq,fq,pq,mq,bq,kq,wq,yq,_q,vq,Aq,Cq,xq,Eq,Tq,Sq,Dq,Mq,Iq={exports:{}};function Bq(){if(EH)return xH;function t(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}return EH=1,xH=t}function Lq(){if(SH)return TH;SH=1;var t=Bq()();return TH=t}function Nq(){if(MH)return DH;MH=1;var t=Lq(),e=vV();function n(n,r){return n&&t(n,r,e)}return DH=n}function Oq(){if(BH)return IH;BH=1;var t=_V();function e(e,n){return function(r,i){if(null==r)return r;if(!t(r))return e(r,i);for(var o=r.length,s=n?o:-1,a=Object(r);(n?s--:++s<o)&&!1!==i(a[s],s,a););return r}}return IH=e}function Pq(){if(NH)return LH;NH=1;var t=Nq(),e=Oq()(t);return LH=e}function Rq(){if(PH)return OH;function t(t){return t}return PH=1,OH=t}function zq(){if(zH)return RH;zH=1;var t=Rq();function e(e){return"function"==typeof e?e:t}return RH=e}function Fq(){if(jH)return FH;jH=1;var t=hj(),e=Pq(),n=zq(),r=_j();function i(i,o){return(r(i)?t:e)(i,n(o))}return FH=i}function jq(){return VH||(VH=1,function(t){t.exports=Fq()}(Iq)),Iq.exports}function Vq(){if(HH)return $H;HH=1;var t=Pq();function e(e,n){var r=[];return t(e,(function(t,e,i){n(t,e,i)&&r.push(t)})),r}return $H=e}function $q(){if(WH)return UH;WH=1;var t="__lodash_hash_undefined__";function e(e){return this.__data__.set(e,t),this}return UH=e}function Hq(){if(YH)return qH;function t(t){return this.__data__.has(t)}return YH=1,qH=t}function Uq(){if(ZH)return GH;ZH=1;var t=bN,e=$q(),n=Hq();function r(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new t;++n<r;)this.add(e[n])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,GH=r}function Wq(){if(QH)return KH;function t(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}return QH=1,KH=t}function qq(){if(JH)return XH;function t(t,e){return t.has(e)}return JH=1,XH=t}function Yq(){if(eU)return tU;eU=1;var t=Uq(),e=Wq(),n=qq(),r=1,i=2;function o(o,s,a,c,l,d){var u=a&r,h=o.length,g=s.length;if(h!=g&&!(u&&g>h))return!1;var f=d.get(o),p=d.get(s);if(f&&p)return f==s&&p==o;var m=-1,b=!0,k=a&i?new t:void 0;for(d.set(o,s),d.set(s,o);++m<h;){var w=o[m],y=s[m];if(c)var _=u?c(y,w,m,s,o,d):c(w,y,m,o,s,d);if(void 0!==_){if(_)continue;b=!1;break}if(k){if(!e(s,(function(t,e){if(!n(k,e)&&(w===t||l(w,t,a,c,d)))return k.push(e)}))){b=!1;break}}else if(w!==y&&!l(w,y,a,c,d)){b=!1;break}}return d.delete(o),d.delete(s),b}return tU=o}function Gq(){if(rU)return nU;function t(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}return rU=1,nU=t}function Zq(){if(oU)return iU;function t(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}return oU=1,iU=t}function Kq(){if(aU)return sU;aU=1;var t=CB(),e=lH(),n=DL(),r=Yq(),i=Gq(),o=Zq(),s=1,a=2,c="[object Boolean]",l="[object Date]",d="[object Error]",u="[object Map]",h="[object Number]",g="[object RegExp]",f="[object Set]",p="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",k="[object DataView]",w=t?t.prototype:void 0,y=w?w.valueOf:void 0;function _(t,w,_,v,A,C,x){switch(_){case k:if(t.byteLength!=w.byteLength||t.byteOffset!=w.byteOffset)return!1;t=t.buffer,w=w.buffer;case b:return!(t.byteLength!=w.byteLength||!C(new e(t),new e(w)));case c:case l:case h:return n(+t,+w);case d:return t.name==w.name&&t.message==w.message;case g:case p:return t==w+"";case u:var E=i;case f:var T=v&s;if(E||(E=o),t.size!=w.size&&!T)return!1;var S=x.get(t);if(S)return S==w;v|=a,x.set(t,w);var D=r(E(t),E(w),v,A,C,x);return x.delete(t),D;case m:if(y)return y.call(t)==y.call(w)}return!1}return sU=_}function Qq(){if(lU)return cU;lU=1;var t=eH(),e=1,n=Object.prototype.hasOwnProperty;function r(r,i,o,s,a,c){var l=o&e,d=t(r),u=d.length;if(u!=t(i).length&&!l)return!1;for(var h=u;h--;){var g=d[h];if(!(l?g in i:n.call(i,g)))return!1}var f=c.get(r),p=c.get(i);if(f&&p)return f==i&&p==r;var m=!0;c.set(r,i),c.set(i,r);for(var b=l;++h<u;){var k=r[g=d[h]],w=i[g];if(s)var y=l?s(w,k,g,i,r,c):s(k,w,g,r,i,c);if(!(void 0===y?k===w||a(k,w,o,s,c):y)){m=!1;break}b||(b="constructor"==g)}if(m&&!b){var _=r.constructor,v=i.constructor;_==v||!("constructor"in r)||!("constructor"in i)||"function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v||(m=!1)}return c.delete(r),c.delete(i),m}return cU=r}function Xq(){if(uU)return dU;uU=1;var t=uj(),e=Yq(),n=Kq(),r=Qq(),i=aH(),o=_j(),s=Oj(),a=pV(),c=1,l="[object Arguments]",d="[object Array]",u="[object Object]",h=Object.prototype.hasOwnProperty;function g(g,f,p,m,b,k){var w=o(g),y=o(f),_=w?d:i(g),v=y?d:i(f),A=(_=_==l?u:_)==u,C=(v=v==l?u:v)==u,x=_==v;if(x&&s(g)){if(!s(f))return!1;w=!0,A=!1}if(x&&!A)return k||(k=new t),w||a(g)?e(g,f,p,m,b,k):n(g,f,_,p,m,b,k);if(!(p&c)){var E=A&&h.call(g,"__wrapped__"),T=C&&h.call(f,"__wrapped__");if(E||T){var S=E?g.value():g,D=T?f.value():f;return k||(k=new t),b(S,D,p,m,k)}}return!!x&&(k||(k=new t),r(g,f,p,m,b,k))}return dU=g}function Jq(){if(gU)return hU;gU=1;var t=Xq(),e=kj();function n(r,i,o,s,a){return r===i||(null==r||null==i||!e(r)&&!e(i)?r!=r&&i!=i:t(r,i,o,s,n,a))}return hU=n}function tY(){if(pU)return fU;pU=1;var t=uj(),e=Jq(),n=1,r=2;function i(i,o,s,a){var c=s.length,l=c,d=!a;if(null==i)return!l;for(i=Object(i);c--;){var u=s[c];if(d&&u[2]?u[1]!==i[u[0]]:!(u[0]in i))return!1}for(;++c<l;){var h=(u=s[c])[0],g=i[h],f=u[1];if(d&&u[2]){if(void 0===g&&!(h in i))return!1}else{var p=new t;if(a)var m=a(g,f,h,i,o,p);if(!(void 0===m?e(f,g,n|r,a,p):m))return!1}}return!0}return fU=i}function eY(){if(bU)return mU;bU=1;var t=SB();function e(e){return e==e&&!t(e)}return mU=e}function nY(){if(wU)return kU;wU=1;var t=eY(),e=vV();function n(n){for(var r=e(n),i=r.length;i--;){var o=r[i],s=n[o];r[i]=[o,s,t(s)]}return r}return kU=n}function rY(){if(_U)return yU;function t(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}return _U=1,yU=t}function iY(){if(AU)return vU;AU=1;var t=tY(),e=nY(),n=rY();function r(r){var i=e(r);return 1==i.length&&i[0][2]?n(i[0][0],i[0][1]):function(e){return e===r||t(e,r,i)}}return vU=r}function oY(){if(xU)return CU;xU=1;var t=TB(),e=kj(),n="[object Symbol]";function r(r){return"symbol"==typeof r||e(r)&&t(r)==n}return CU=r}function sY(){if(TU)return EU;TU=1;var t=_j(),e=oY(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(i,o){if(t(i))return!1;var s=typeof i;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=i&&!e(i))||r.test(i)||!n.test(i)||null!=o&&i in Object(o)}return EU=i}function aY(){if(DU)return SU;DU=1;var t=_N,e=500;function n(n){var r=t(n,(function(t){return i.size===e&&i.clear(),t})),i=r.cache;return r}return SU=n}function cY(){if(IU)return MU;IU=1;var t=aY(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(e,(function(t,e,i,o){r.push(i?o.replace(n,"$1"):e||t)})),r}));return MU=r}function lY(){if(LU)return BU;function t(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}return LU=1,BU=t}function dY(){if(OU)return NU;OU=1;var t=CB(),e=lY(),n=_j(),r=oY(),i=1/0,o=t?t.prototype:void 0,s=o?o.toString:void 0;function a(t){if("string"==typeof t)return t;if(n(t))return e(t,a)+"";if(r(t))return s?s.call(t):"";var o=t+"";return"0"==o&&1/t==-i?"-0":o}return NU=a}function uY(){if(RU)return PU;RU=1;var t=dY();function e(e){return null==e?"":t(e)}return PU=e}function hY(){if(FU)return zU;FU=1;var t=_j(),e=sY(),n=cY(),r=uY();function i(i,o){return t(i)?i:e(i,o)?[i]:n(r(i))}return zU=i}function gY(){if(VU)return jU;VU=1;var t=oY(),e=1/0;function n(n){if("string"==typeof n||t(n))return n;var r=n+"";return"0"==r&&1/n==-e?"-0":r}return jU=n}function fY(){if(HU)return $U;HU=1;var t=hY(),e=gY();function n(n,r){for(var i=0,o=(r=t(r,n)).length;null!=n&&i<o;)n=n[e(r[i++])];return i&&i==o?n:void 0}return $U=n}function pY(){if(WU)return UU;WU=1;var t=fY();function e(e,n,r){var i=null==e?void 0:t(e,n);return void 0===i?r:i}return UU=e}function mY(){if(YU)return qU;function t(t,e){return null!=t&&e in Object(t)}return YU=1,qU=t}function bY(){if(ZU)return GU;ZU=1;var t=hY(),e=yj(),n=_j(),r=Pj(),i=Rj(),o=gY();function s(s,a,c){for(var l=-1,d=(a=t(a,s)).length,u=!1;++l<d;){var h=o(a[l]);if(!(u=null!=s&&c(s,h)))break;s=s[h]}return u||++l!=d?u:!!(d=null==s?0:s.length)&&i(d)&&r(h,d)&&(n(s)||e(s))}return GU=s}function kY(){if(QU)return KU;QU=1;var t=mY(),e=bY();function n(n,r){return null!=n&&e(n,r,t)}return KU=n}function wY(){if(JU)return XU;JU=1;var t=Jq(),e=pY(),n=kY(),r=sY(),i=eY(),o=rY(),s=gY(),a=1,c=2;function l(l,d){return r(l)&&i(d)?o(s(l),d):function(r){var i=e(r,l);return void 0===i&&i===d?n(r,l):t(d,i,a|c)}}return XU=l}function yY(){if(eW)return tW;function t(t){return function(e){return null==e?void 0:e[t]}}return eW=1,tW=t}function _Y(){if(rW)return nW;rW=1;var t=fY();function e(e){return function(n){return t(n,e)}}return nW=e}function vY(){if(oW)return iW;oW=1;var t=yY(),e=_Y(),n=sY(),r=gY();function i(i){return n(i)?t(r(i)):e(i)}return iW=i}function AY(){if(aW)return sW;aW=1;var t=iY(),e=wY(),n=Rq(),r=_j(),i=vY();function o(o){return"function"==typeof o?o:null==o?n:"object"==typeof o?r(o)?e(o[0],o[1]):t(o):i(o)}return sW=o}function CY(){if(lW)return cW;lW=1;var t=q$(),e=Vq(),n=AY(),r=_j();function i(i,o){return(r(i)?t:e)(i,n(o,3))}return cW=i}function xY(){if(uW)return dW;uW=1;var t=Object.prototype.hasOwnProperty;function e(e,n){return null!=e&&t.call(e,n)}return dW=e}function EY(){if(gW)return hW;gW=1;var t=xY(),e=bY();function n(n,r){return null!=n&&e(n,r,t)}return hW=n}function TY(){if(pW)return fW;pW=1;var t=yV(),e=aH(),n=yj(),r=_j(),i=_V(),o=Oj(),s=bV(),a=pV(),c="[object Map]",l="[object Set]",d=Object.prototype.hasOwnProperty;function u(u){if(null==u)return!0;if(i(u)&&(r(u)||"string"==typeof u||"function"==typeof u.splice||o(u)||a(u)||n(u)))return!u.length;var h=e(u);if(h==c||h==l)return!u.size;if(s(u))return!t(u).length;for(var g in u)if(d.call(u,g))return!1;return!0}return fW=u}function SY(){if(bW)return mW;function t(t){return void 0===t}return bW=1,mW=t}function DY(){if(wW)return kW;wW=1;var t=Pq(),e=_V();function n(n,r){var i=-1,o=e(n)?Array(n.length):[];return t(n,(function(t,e,n){o[++i]=r(t,e,n)})),o}return kW=n}function MY(){if(_W)return yW;_W=1;var t=lY(),e=AY(),n=DY(),r=_j();function i(i,o){return(r(i)?t:n)(i,e(o,3))}return yW=i}function IY(){if(AW)return vW;function t(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}return AW=1,vW=t}function BY(){if(xW)return CW;function t(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}return xW=1,CW=t}function LY(){if(TW)return EW;TW=1;var t=IY(),e=Pq(),n=AY(),r=BY(),i=_j();function o(o,s,a){var c=i(o)?t:r,l=arguments.length<3;return c(o,n(s,4),a,l,e)}return EW=o}function NY(){if(DW)return SW;DW=1;var t=TB(),e=_j(),n=kj(),r="[object String]";function i(i){return"string"==typeof i||!e(i)&&n(i)&&t(i)==r}return SW=i}function OY(){if(IW)return MW;IW=1;var t=yY()("length");return MW=t}function PY(){if(LW)return BW;LW=1;var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function e(e){return t.test(e)}return BW=e}function RY(){if(OW)return NW;OW=1;var t="\\ud800-\\udfff",e="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:"+n+"|"+r+")?",c="[\\ufe0e\\ufe0f]?",l=c+a+"(?:\\u200d(?:"+[i,o,s].join("|")+")"+c+a+")*",d="(?:"+[i+n+"?",n,o,s,e].join("|")+")",u=RegExp(r+"(?="+r+")|"+d+l,"g");function h(t){for(var e=u.lastIndex=0;u.test(t);)++e;return e}return NW=h}function zY(){if(RW)return PW;RW=1;var t=OY(),e=PY(),n=RY();function r(r){return e(r)?n(r):t(r)}return PW=r}function FY(){if(FW)return zW;FW=1;var t=yV(),e=aH(),n=_V(),r=NY(),i=zY(),o="[object Map]",s="[object Set]";function a(a){if(null==a)return 0;if(n(a))return r(a)?i(a):a.length;var c=e(a);return c==o||c==s?a.size:t(a).length}return zW=a}function jY(){if(VW)return jW;VW=1;var t=hj(),e=mH(),n=Nq(),r=AY(),i=Q$(),o=_j(),s=Oj(),a=DB(),c=SB(),l=pV();function d(d,u,h){var g=o(d),f=g||s(d)||l(d);if(u=r(u,4),null==h){var p=d&&d.constructor;h=f?g?new p:[]:c(d)&&a(p)?e(i(d)):{}}return(f?t:n)(d,(function(t,e,n){return u(h,t,e,n)})),h}return jW=d}function VY(){if(HW)return $W;HW=1;var t=CB(),e=yj(),n=_j(),r=t?t.isConcatSpreadable:void 0;function i(t){return n(t)||e(t)||!!(r&&t&&t[r])}return $W=i}function $Y(){if(WW)return UW;WW=1;var t=K$(),e=VY();function n(r,i,o,s,a){var c=-1,l=r.length;for(o||(o=e),a||(a=[]);++c<l;){var d=r[c];i>0&&o(d)?i>1?n(d,i-1,o,s,a):t(a,d):s||(a[a.length]=d)}return a}return UW=n}function HY(){if(YW)return qW;function t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}return YW=1,qW=t}function UY(){if(ZW)return GW;ZW=1;var t=HY(),e=Math.max;function n(n,r,i){return r=e(void 0===r?n.length-1:r,0),function(){for(var o=arguments,s=-1,a=e(o.length-r,0),c=Array(a);++s<a;)c[s]=o[r+s];s=-1;for(var l=Array(r+1);++s<r;)l[s]=o[s];return l[r]=i(c),t(n,this,l)}}return GW=n}function WY(){if(QW)return KW;QW=1;var t=CH(),e=gj(),n=Rq();return KW=e?function(n,r){return e(n,"toString",{configurable:!0,enumerable:!1,value:t(r),writable:!0})}:n}function qY(){if(JW)return XW;JW=1;var t=800,e=16,n=Date.now;function r(r){var i=0,o=0;return function(){var s=n(),a=e-(s-o);if(o=s,a>0){if(++i>=t)return arguments[0]}else i=0;return r.apply(void 0,arguments)}}return XW=r}function YY(){if(eq)return tq;eq=1;var t=WY(),e=qY()(t);return tq=e}function GY(){if(rq)return nq;rq=1;var t=Rq(),e=UY(),n=YY();function r(r,i){return n(e(r,i,t),r+"")}return nq=r}function ZY(){if(oq)return iq;function t(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}return oq=1,iq=t}function KY(){if(aq)return sq;function t(t){return t!=t}return aq=1,sq=t}function QY(){if(lq)return cq;function t(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}return lq=1,cq=t}function XY(){if(uq)return dq;uq=1;var t=ZY(),e=KY(),n=QY();function r(r,i,o){return i==i?n(r,i,o):t(r,e,o)}return dq=r}function JY(){if(gq)return hq;gq=1;var t=XY();function e(e,n){return!(null==e||!e.length)&&t(e,n,0)>-1}return hq=e}function tG(){if(pq)return fq;function t(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}return pq=1,fq=t}function eG(){if(bq)return mq;function t(){}return bq=1,mq=t}function nG(){if(wq)return kq;wq=1;var t=oH(),e=eG(),n=Zq(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(e){return new t(e)}:e;return kq=i}function rG(){if(_q)return yq;_q=1;var t=Uq(),e=JY(),n=tG(),r=qq(),i=nG(),o=Zq(),s=200;function a(a,c,l){var d=-1,u=e,h=a.length,g=!0,f=[],p=f;if(l)g=!1,u=n;else if(h>=s){var m=c?null:i(a);if(m)return o(m);g=!1,u=r,p=new t}else p=c?[]:f;t:for(;++d<h;){var b=a[d],k=c?c(b):b;if(b=l||0!==b?b:0,g&&k==k){for(var w=p.length;w--;)if(p[w]===k)continue t;c&&p.push(k),f.push(b)}else u(p,k,l)||(p!==f&&p.push(k),f.push(b))}return f}return yq=a}function iG(){if(Aq)return vq;Aq=1;var t=_V(),e=kj();function n(n){return e(n)&&t(n)}return vq=n}function oG(){if(xq)return Cq;xq=1;var t=$Y(),e=GY(),n=rG(),r=iG(),i=e((function(e){return n(t(e,1,r,!0))}));return Cq=i}function sG(){if(Tq)return Eq;Tq=1;var t=lY();function e(e,n){return t(n,(function(t){return e[t]}))}return Eq=e}function aG(){if(Dq)return Sq;Dq=1;var t=sG(),e=vV();function n(n){return null==n?[]:t(n,e(n))}return Sq=n}if("function"==typeof r)try{Mq={clone:AH(),constant:CH(),each:jq(),filter:CY(),has:EY(),isArray:_j(),isEmpty:TY(),isFunction:DB(),isUndefined:SY(),keys:vV(),map:MY(),reduce:LY(),size:FY(),transform:jY(),union:oG(),values:aG()}}catch(t){}Mq||(Mq=window._);var cG=Mq,lG=cG,dG=fG,uG="\0",hG="\0",gG="";function fG(t){this._isDirected=!lG.has(t,"directed")||t.directed,this._isMultigraph=!!lG.has(t,"multigraph")&&t.multigraph,this._isCompound=!!lG.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=lG.constant(void 0),this._defaultEdgeLabelFn=lG.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[hG]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function pG(t,e){t[e]?t[e]++:t[e]=1}function mG(t,e){--t[e]||delete t[e]}function bG(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}return i+gG+o+gG+(lG.isUndefined(r)?uG:r)}function kG(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function wG(t,e){return bG(t,e.v,e.w,e.name)}fG.prototype._nodeCount=0,fG.prototype._edgeCount=0,fG.prototype.isDirected=function(){return this._isDirected},fG.prototype.isMultigraph=function(){return this._isMultigraph},fG.prototype.isCompound=function(){return this._isCompound},fG.prototype.setGraph=function(t){return this._label=t,this},fG.prototype.graph=function(){return this._label},fG.prototype.setDefaultNodeLabel=function(t){return lG.isFunction(t)||(t=lG.constant(t)),this._defaultNodeLabelFn=t,this},fG.prototype.nodeCount=function(){return this._nodeCount},fG.prototype.nodes=function(){return lG.keys(this._nodes)},fG.prototype.sources=function(){var t=this;return lG.filter(this.nodes(),(function(e){return lG.isEmpty(t._in[e])}))},fG.prototype.sinks=function(){var t=this;return lG.filter(this.nodes(),(function(e){return lG.isEmpty(t._out[e])}))},fG.prototype.setNodes=function(t,e){var n=arguments,r=this;return lG.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},fG.prototype.setNode=function(t,e){return lG.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=hG,this._children[t]={},this._children[hG][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},fG.prototype.node=function(t){return this._nodes[t]},fG.prototype.hasNode=function(t){return lG.has(this._nodes,t)},fG.prototype.removeNode=function(t){var e=this;if(lG.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],lG.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),lG.each(lG.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],lG.each(lG.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},fG.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(lG.isUndefined(e))e=hG;else{for(var n=e+="";!lG.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},fG.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},fG.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==hG)return e}},fG.prototype.children=function(t){if(lG.isUndefined(t)&&(t=hG),this._isCompound){var e=this._children[t];if(e)return lG.keys(e)}else{if(t===hG)return this.nodes();if(this.hasNode(t))return[]}},fG.prototype.predecessors=function(t){var e=this._preds[t];if(e)return lG.keys(e)},fG.prototype.successors=function(t){var e=this._sucs[t];if(e)return lG.keys(e)},fG.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return lG.union(e,this.successors(t))},fG.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},fG.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;lG.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),lG.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this._isCompound&&lG.each(e.nodes(),(function(t){e.setParent(t,i(t))})),e},fG.prototype.setDefaultEdgeLabel=function(t){return lG.isFunction(t)||(t=lG.constant(t)),this._defaultEdgeLabelFn=t,this},fG.prototype.edgeCount=function(){return this._edgeCount},fG.prototype.edges=function(){return lG.values(this._edgeObjs)},fG.prototype.setPath=function(t,e){var n=this,r=arguments;return lG.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},fG.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,lG.isUndefined(n)||(n=""+n);var s=bG(this._isDirected,t,e,n);if(lG.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=r),this;if(!lG.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=i?r:this._defaultEdgeLabelFn(t,e,n);var a=kG(this._isDirected,t,e,n);return t=a.v,e=a.w,Object.freeze(a),this._edgeObjs[s]=a,pG(this._preds[e],t),pG(this._sucs[t],e),this._in[e][s]=a,this._out[t][s]=a,this._edgeCount++,this},fG.prototype.edge=function(t,e,n){var r=1===arguments.length?wG(this._isDirected,arguments[0]):bG(this._isDirected,t,e,n);return this._edgeLabels[r]},fG.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?wG(this._isDirected,arguments[0]):bG(this._isDirected,t,e,n);return lG.has(this._edgeLabels,r)},fG.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?wG(this._isDirected,arguments[0]):bG(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],mG(this._preds[e],t),mG(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},fG.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=lG.values(n);return e?lG.filter(r,(function(t){return t.v===e})):r}},fG.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=lG.values(n);return e?lG.filter(r,(function(t){return t.w===e})):r}},fG.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var yG={Graph:dG,version:"2.1.8"},_G=cG,vG=dG,AG={write:CG,read:TG};function CG(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:xG(t),edges:EG(t)};return _G.isUndefined(t.graph())||(e.value=_G.clone(t.graph())),e}function xG(t){return _G.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return _G.isUndefined(n)||(i.value=n),_G.isUndefined(r)||(i.parent=r),i}))}function EG(t){return _G.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return _G.isUndefined(e.name)||(r.name=e.name),_G.isUndefined(n)||(r.value=n),r}))}function TG(t){var e=new vG(t.options).setGraph(t.value);return _G.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),_G.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}var SG=cG,DG=MG;function MG(t){var e,n={},r=[];function i(r){SG.has(n,r)||(n[r]=!0,e.push(r),SG.each(t.successors(r),i),SG.each(t.predecessors(r),i))}return SG.each(t.nodes(),(function(t){e=[],i(t),e.length&&r.push(e)})),r}var IG=cG,BG=LG;function LG(){this._arr=[],this._keyIndices={}}LG.prototype.size=function(){return this._arr.length},LG.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},LG.prototype.has=function(t){return IG.has(this._keyIndices,t)},LG.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},LG.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},LG.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!IG.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},LG.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},LG.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},LG.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},LG.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},LG.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var NG=BG,OG=RG,PG=cG.constant(1);function RG(t,e,n,r){return zG(t,String(e),n||PG,r||function(e){return t.outEdges(e)})}function zG(t,e,n,r){var i,o,s={},a=new NG,c=function(t){var e=t.v!==i?t.v:t.w,r=s[e],c=n(t),l=o.distance+c;if(c<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+c);l<r.distance&&(r.distance=l,r.predecessor=i,a.decrease(e,l))};for(t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},a.add(t,n)}));a.size()>0&&(i=a.removeMin(),(o=s[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return s}var FG=OG,jG=cG,VG=$G;function $G(t,e,n){return jG.transform(t.nodes(),(function(r,i){r[i]=FG(t,i,e,n)}),{})}var HG=cG,UG=WG;function WG(t){var e=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach((function(t){HG.has(r,t)?r[t].onStack&&(a.lowlink=Math.min(a.lowlink,r[t].index)):(o(t),a.lowlink=Math.min(a.lowlink,r[t].lowlink))})),a.lowlink===a.index){var c,l=[];do{c=n.pop(),r[c].onStack=!1,l.push(c)}while(s!==c);i.push(l)}}return t.nodes().forEach((function(t){HG.has(r,t)||o(t)})),i}var qG=cG,YG=UG,GG=ZG;function ZG(t){return qG.filter(YG(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}var KG=XG,QG=cG.constant(1);function XG(t,e,n){return JG(t,e||QG,n||function(e){return t.outEdges(e)})}function JG(t,e,n){var r={},i=t.nodes();return i.forEach((function(t){r[t]={},r[t][t]={distance:0},i.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=r[t];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)}))}))})),r}var tZ=cG,eZ=nZ;function nZ(t){var e={},n={},r=[];function i(o){if(tZ.has(n,o))throw new rZ;tZ.has(e,o)||(n[o]=!0,e[o]=!0,tZ.each(t.predecessors(o),i),delete n[o],r.push(o))}if(tZ.each(t.sinks(),i),tZ.size(e)!==t.nodeCount())throw new rZ;return r}function rZ(){}nZ.CycleException=rZ,rZ.prototype=new Error;var iZ=eZ;function oZ(t){try{iZ(t)}catch(t){if(t instanceof iZ.CycleException)return!1;throw t}return!0}var sZ=cG;function aZ(t,e,n){sZ.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return sZ.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);cZ(t,e,"post"===n,o,r,i)})),i}function cZ(t,e,n,r,i,o){sZ.has(r,e)||(r[e]=!0,n||o.push(e),sZ.each(i(e),(function(e){cZ(t,e,n,r,i,o)})),n&&o.push(e))}var lZ=aZ;function dZ(t,e){return lZ(t,e,"post")}var uZ=aZ;function hZ(t,e){return uZ(t,e,"pre")}var gZ=cG,fZ=dG,pZ=BG;function mZ(t,e){var n,r=new fZ,i={},o=new pZ;function s(t){var r=t.v===n?t.w:t.v,s=o.priority(r);if(void 0!==s){var a=e(t);a<s&&(i[r]=n,o.decrease(r,a))}}if(0===t.nodeCount())return r;gZ.each(t.nodes(),(function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)})),o.decrease(t.nodes()[0],0);for(var a=!1;o.size()>0;){if(n=o.removeMin(),gZ.has(i,n))r.setEdge(n,i[n]);else{if(a)throw new Error("Input graph is not connected: "+t);a=!0}t.nodeEdges(n).forEach(s)}return r}var bZ,kZ,wZ,yZ,_Z,vZ,AZ,CZ,xZ,EZ,TZ,SZ,DZ,MZ,IZ,BZ,LZ,NZ,OZ,PZ,RZ,zZ,FZ,jZ,VZ,$Z,HZ,UZ,WZ,qZ,YZ,GZ,ZZ,KZ,QZ,XZ,JZ,tK,eK,nK,rK,iK,oK,sK,aK,cK,lK,dK,uK,hK,gK,fK,pK,mK,bK,kK,wK,yK,_K,vK,AK,CK,xK,EK,TK,SK,DK,MK,IK,BK,LK,NK,OK,PK,RK,zK,FK,jK,VK,$K,HK,UK,WK,qK,YK,GK,ZK,KK,QK,XK,JK,tQ,eQ,nQ,rQ,iQ,oQ,sQ,aQ,cQ,lQ,dQ,uQ,hQ,gQ,fQ,pQ,mQ,bQ,kQ,wQ,yQ,_Q,vQ,AQ,CQ,xQ,EQ,TQ,SQ,DQ,MQ,IQ,BQ,LQ,NQ,OQ,PQ,RQ,zQ,FQ,jQ,VQ,$Q,HQ,UQ,WQ,qQ,YQ,GQ,ZQ,KQ,QQ,XQ,JQ,tX,eX,nX,rX,iX,oX,sX,aX={components:DG,dijkstra:OG,dijkstraAll:VG,findCycles:GG,floydWarshall:KG,isAcyclic:oZ,postorder:dZ,preorder:hZ,prim:mZ,tarjan:UG,topsort:eZ},cX=yG,lX={Graph:cX.Graph,json:AG,alg:aX,version:cX.version};function dX(){if(kZ)return bZ;var t;if(kZ=1,"function"==typeof r)try{t=lX}catch(t){}return t||(t=window.graphlib),bZ=t}function uX(){if(yZ)return wZ;yZ=1;var t=vH(),e=1,n=4;function r(r){return t(r,e|n)}return wZ=r}function hX(){if(vZ)return _Z;vZ=1;var t=DL(),e=_V(),n=Pj(),r=SB();function i(i,o,s){if(!r(s))return!1;var a=typeof o;return!!("number"==a?e(s)&&n(o,s.length):"string"==a&&o in s)&&t(s[o],i)}return _Z=i}function gX(){if(CZ)return AZ;CZ=1;var t=GY(),e=DL(),n=hX(),r=EV(),i=Object.prototype,o=i.hasOwnProperty,s=t((function(t,s){t=Object(t);var a=-1,c=s.length,l=c>2?s[2]:void 0;for(l&&n(s[0],s[1],l)&&(c=1);++a<c;)for(var d=s[a],u=r(d),h=-1,g=u.length;++h<g;){var f=u[h],p=t[f];(void 0===p||e(p,i[f])&&!o.call(t,f))&&(t[f]=d[f])}return t}));return AZ=s}function fX(){if(EZ)return xZ;EZ=1;var t=AY(),e=_V(),n=vV();function r(r){return function(i,o,s){var a=Object(i);if(!e(i)){var c=t(o,3);i=n(i),o=function(t){return c(a[t],t,a)}}var l=r(i,o,s);return l>-1?a[c?i[l]:l]:void 0}}return xZ=r}function pX(){if(SZ)return TZ;SZ=1;var t=/\s/;function e(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}return TZ=e}function mX(){if(MZ)return DZ;MZ=1;var t=pX(),e=/^\s+/;function n(n){return n?n.slice(0,t(n)+1).replace(e,""):n}return DZ=n}function bX(){if(BZ)return IZ;BZ=1;var t=mX(),e=SB(),n=oY(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function c(c){if("number"==typeof c)return c;if(n(c))return r;if(e(c)){var l="function"==typeof c.valueOf?c.valueOf():c;c=e(l)?l+"":l}if("string"!=typeof c)return 0===c?c:+c;c=t(c);var d=o.test(c);return d||s.test(c)?a(c.slice(2),d?2:8):i.test(c)?r:+c}return IZ=c}function kX(){if(NZ)return LZ;NZ=1;var t=bX(),e=1/0,n=17976931348623157e292;function r(r){return r?(r=t(r))===e||r===-e?(r<0?-1:1)*n:r==r?r:0:0===r?r:0}return LZ=r}function wX(){if(PZ)return OZ;PZ=1;var t=kX();function e(e){var n=t(e),r=n%1;return n==n?r?n-r:n:0}return OZ=e}function yX(){if(zZ)return RZ;zZ=1;var t=ZY(),e=AY(),n=wX(),r=Math.max;function i(i,o,s){var a=null==i?0:i.length;if(!a)return-1;var c=null==s?0:n(s);return c<0&&(c=r(a+c,0)),t(i,e(o,3),c)}return RZ=i}function _X(){if(jZ)return FZ;jZ=1;var t=fX()(yX());return FZ=t}function vX(){if($Z)return VZ;$Z=1;var t=$Y();function e(e){return null!=e&&e.length?t(e,1):[]}return VZ=e}function AX(){if(UZ)return HZ;UZ=1;var t=Lq(),e=zq(),n=EV();function r(r,i){return null==r?r:t(r,e(i),n)}return HZ=r}function CX(){if(qZ)return WZ;function t(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}return qZ=1,WZ=t}function xX(){if(GZ)return YZ;GZ=1;var t=fj(),e=Nq(),n=AY();function r(r,i){var o={};return i=n(i,3),e(r,(function(e,n,r){t(o,n,i(e,n,r))})),o}return YZ=r}function EX(){if(KZ)return ZZ;KZ=1;var t=oY();function e(e,n,r){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=n(s);if(null!=a&&(void 0===c?a==a&&!t(a):r(a,c)))var c=a,l=s}return l}return ZZ=e}function TX(){if(XZ)return QZ;function t(t,e){return t>e}return XZ=1,QZ=t}function SX(){if(tK)return JZ;tK=1;var t=EX(),e=TX(),n=Rq();function r(r){return r&&r.length?t(r,n,e):void 0}return JZ=r}function DX(){if(nK)return eK;nK=1;var t=fj(),e=DL();function n(n,r,i){(void 0!==i&&!e(n[r],i)||void 0===i&&!(r in n))&&t(n,r,i)}return eK=n}function MX(){if(iK)return rK;iK=1;var t=TB(),e=Q$(),n=kj(),r="[object Object]",i=Function.prototype,o=Object.prototype,s=i.toString,a=o.hasOwnProperty,c=s.call(Object);function l(i){if(!n(i)||t(i)!=r)return!1;var o=e(i);if(null===o)return!0;var l=a.call(o,"constructor")&&o.constructor;return"function"==typeof l&&l instanceof l&&s.call(l)==c}return rK=l}function IX(){if(sK)return oK;function t(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}return sK=1,oK=t}function BX(){if(cK)return aK;cK=1;var t=mj(),e=EV();function n(n){return t(n,e(n))}return aK=n}function LX(){if(dK)return lK;dK=1;var t=DX(),e=U$(),n=fH(),r=W$(),i=bH(),o=yj(),s=_j(),a=iG(),c=Oj(),l=DB(),d=SB(),u=MX(),h=pV(),g=IX(),f=BX();function p(p,m,b,k,w,y,_){var v=g(p,b),A=g(m,b),C=_.get(A);if(C)t(p,b,C);else{var x=y?y(v,A,b+"",p,m,_):void 0,E=void 0===x;if(E){var T=s(A),S=!T&&c(A),D=!T&&!S&&h(A);x=A,T||S||D?s(v)?x=v:a(v)?x=r(v):S?(E=!1,x=e(A,!0)):D?(E=!1,x=n(A,!0)):x=[]:u(A)||o(A)?(x=v,o(v)?x=f(v):d(v)&&!l(v)||(x=i(A))):E=!1}E&&(_.set(A,x),w(x,A,k,y,_),_.delete(A)),t(p,b,x)}}return lK=p}function NX(){if(hK)return uK;hK=1;var t=uj(),e=DX(),n=Lq(),r=LX(),i=SB(),o=EV(),s=IX();function a(c,l,d,u,h){c!==l&&n(l,(function(n,o){if(h||(h=new t),i(n))r(c,l,o,d,a,u,h);else{var g=u?u(s(c,o),n,o+"",c,l,h):void 0;void 0===g&&(g=n),e(c,o,g)}}),o)}return uK=a}function OX(){if(fK)return gK;fK=1;var t=GY(),e=hX();function n(n){return t((function(t,r){var i=-1,o=r.length,s=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(s=n.length>3&&"function"==typeof s?(o--,s):void 0,a&&e(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++i<o;){var c=r[i];c&&n(t,c,i,s)}return t}))}return gK=n}function PX(){if(mK)return pK;mK=1;var t=NX(),e=OX()((function(e,n,r){t(e,n,r)}));return pK=e}function RX(){if(kK)return bK;function t(t,e){return t<e}return kK=1,bK=t}function zX(){if(yK)return wK;yK=1;var t=EX(),e=RX(),n=Rq();function r(r){return r&&r.length?t(r,n,e):void 0}return wK=r}function FX(){if(vK)return _K;vK=1;var t=EX(),e=AY(),n=RX();function r(r,i){return r&&r.length?t(r,e(i,2),n):void 0}return _K=r}function jX(){if(CK)return AK;CK=1;var t=AB;return AK=function(){return t.Date.now()}}function VX(){if(EK)return xK;EK=1;var t=pj(),e=hY(),n=Pj(),r=SB(),i=gY();function o(o,s,a,c){if(!r(o))return o;for(var l=-1,d=(s=e(s,o)).length,u=d-1,h=o;null!=h&&++l<d;){var g=i(s[l]),f=a;if("__proto__"===g||"constructor"===g||"prototype"===g)return o;if(l!=u){var p=h[g];void 0===(f=c?c(p,g,h):void 0)&&(f=r(p)?p:n(s[l+1])?[]:{})}t(h,g,f),h=h[g]}return o}return xK=o}function $X(){if(SK)return TK;SK=1;var t=fY(),e=VX(),n=hY();function r(r,i,o){for(var s=-1,a=i.length,c={};++s<a;){var l=i[s],d=t(r,l);o(d,l)&&e(c,n(l,r),d)}return c}return TK=r}function HX(){if(MK)return DK;MK=1;var t=$X(),e=kY();function n(n,r){return t(n,r,(function(t,r){return e(n,r)}))}return DK=n}function UX(){if(BK)return IK;BK=1;var t=vX(),e=UY(),n=YY();function r(r){return n(e(r,void 0,t),r+"")}return IK=r}function WX(){if(NK)return LK;NK=1;var t=HX(),e=UX()((function(e,n){return null==e?{}:t(e,n)}));return LK=e}function qX(){if(PK)return OK;PK=1;var t=Math.ceil,e=Math.max;function n(n,r,i,o){for(var s=-1,a=e(t((r-n)/(i||1)),0),c=Array(a);a--;)c[o?a:++s]=n,n+=i;return c}return OK=n}function YX(){if(zK)return RK;zK=1;var t=qX(),e=hX(),n=kX();function r(r){return function(i,o,s){return s&&"number"!=typeof s&&e(i,o,s)&&(o=s=void 0),i=n(i),void 0===o?(o=i,i=0):o=n(o),s=void 0===s?i<o?1:-1:n(s),t(i,o,s,r)}}return RK=r}function GX(){if(jK)return FK;jK=1;var t=YX()();return FK=t}function ZX(){if($K)return VK;function t(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}return $K=1,VK=t}function KX(){if(UK)return HK;UK=1;var t=oY();function e(e,n){if(e!==n){var r=void 0!==e,i=null===e,o=e==e,s=t(e),a=void 0!==n,c=null===n,l=n==n,d=t(n);if(!c&&!d&&!s&&e>n||s&&a&&l&&!c&&!d||i&&a&&l||!r&&l||!o)return 1;if(!i&&!s&&!d&&e<n||d&&r&&o&&!i&&!s||c&&r&&o||!a&&o||!l)return-1}return 0}return HK=e}function QX(){if(qK)return WK;qK=1;var t=KX();function e(e,n,r){for(var i=-1,o=e.criteria,s=n.criteria,a=o.length,c=r.length;++i<a;){var l=t(o[i],s[i]);if(l)return i>=c?l:l*("desc"==r[i]?-1:1)}return e.index-n.index}return WK=e}function XX(){if(GK)return YK;GK=1;var t=lY(),e=fY(),n=AY(),r=DY(),i=ZX(),o=Fj(),s=QX(),a=Rq(),c=_j();function l(l,d,u){d=d.length?t(d,(function(t){return c(t)?function(n){return e(n,1===t.length?t[0]:t)}:t})):[a];var h=-1;d=t(d,o(n));var g=r(l,(function(e,n,r){return{criteria:t(d,(function(t){return t(e)})),index:++h,value:e}}));return i(g,(function(t,e){return s(t,e,u)}))}return YK=l}function JX(){if(KK)return ZK;KK=1;var t=$Y(),e=XX(),n=GY(),r=hX(),i=n((function(n,i){if(null==n)return[];var o=i.length;return o>1&&r(n,i[0],i[1])?i=[]:o>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),e(n,t(i,1),[])}));return ZK=i}function tJ(){if(XK)return QK;XK=1;var t=uY(),e=0;function n(n){var r=++e;return t(n)+r}return QK=n}function eJ(){if(tQ)return JK;function t(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}return tQ=1,JK=t}function nJ(){if(nQ)return eQ;nQ=1;var t=pj(),e=eJ();function n(n,r){return e(n||[],r||[],t)}return eQ=n}function rJ(){if(iQ)return rQ;var t;if(iQ=1,"function"==typeof r)try{t={cloneDeep:uX(),constant:CH(),defaults:gX(),each:jq(),filter:CY(),find:_X(),flatten:vX(),forEach:Fq(),forIn:AX(),has:EY(),isUndefined:SY(),last:CX(),map:MY(),mapValues:xX(),max:SX(),merge:PX(),min:zX(),minBy:FX(),now:jX(),pick:WX(),range:GX(),reduce:LY(),sortBy:JX(),uniqueId:tJ(),values:aG(),zipObject:nJ()}}catch(t){}return t||(t=window._),rQ=t}function iJ(){if(sQ)return oQ;function t(){var t={};t._next=t._prev=t,this._sentinel=t}function e(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function n(t,e){if("_next"!==t&&"_prev"!==t)return e}return sQ=1,oQ=t,t.prototype.dequeue=function(){var t=this._sentinel,n=t._prev;if(n!==t)return e(n),n},t.prototype.enqueue=function(t){var n=this._sentinel;t._prev&&t._next&&e(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n},t.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,n)),r=r._prev;return"["+t.join(", ")+"]"},oQ}function oJ(){if(cQ)return aQ;cQ=1;var t=rJ(),e=dX().Graph,n=iJ();aQ=i;var r=t.constant(1);function i(e,n){if(e.nodeCount()<=1)return[];var i=a(e,n||r),s=o(i.graph,i.buckets,i.zeroIdx);return t.flatten(t.map(s,(function(t){return e.outEdges(t.v,t.w)})),!0)}function o(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)s(t,e,n,r);for(;r=o.dequeue();)s(t,e,n,r);if(t.nodeCount())for(var c=e.length-2;c>0;--c)if(r=e[c].dequeue()){i=i.concat(s(t,e,n,r,!0));break}}return i}function s(e,n,r,i,o){var s=o?[]:void 0;return t.forEach(e.inEdges(i.v),(function(t){var i=e.edge(t),a=e.node(t.v);o&&s.push({v:t.v,w:t.w}),a.out-=i,c(n,r,a)})),t.forEach(e.outEdges(i.v),(function(t){var i=e.edge(t),o=t.w,s=e.node(o);s.in-=i,c(n,r,s)})),e.removeNode(i.v),s}function a(r,i){var o=new e,s=0,a=0;t.forEach(r.nodes(),(function(t){o.setNode(t,{v:t,in:0,out:0})})),t.forEach(r.edges(),(function(t){var e=o.edge(t.v,t.w)||0,n=i(t),r=e+n;o.setEdge(t.v,t.w,r),a=Math.max(a,o.node(t.v).out+=n),s=Math.max(s,o.node(t.w).in+=n)}));var l=t.range(a+s+3).map((function(){return new n})),d=s+1;return t.forEach(o.nodes(),(function(t){c(l,d,o.node(t))})),{graph:o,buckets:l,zeroIdx:d}}function c(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}return aQ}function sJ(){if(dQ)return lQ;dQ=1;var t=rJ(),e=oJ();function n(n){var i="greedy"===n.graph().acyclicer?e(n,o(n)):r(n);function o(t){return function(e){return t.edge(e).weight}}t.forEach(i,(function(e){var r=n.edge(e);n.removeEdge(e),r.forwardName=e.name,r.reversed=!0,n.setEdge(e.w,e.v,r,t.uniqueId("rev"))}))}function r(e){var n=[],r={},i={};function o(s){t.has(i,s)||(i[s]=!0,r[s]=!0,t.forEach(e.outEdges(s),(function(e){t.has(r,e.w)?n.push(e):o(e.w)})),delete r[s])}return t.forEach(e.nodes(),o),n}function i(e){t.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}return lQ={run:n,undo:i}}function aJ(){if(hQ)return uQ;hQ=1;var t=rJ(),e=dX().Graph;function n(e,n,r,i){var o;do{o=t.uniqueId(i)}while(e.hasNode(o));return r.dummy=n,e.setNode(o,r),o}function r(n){var r=(new e).setGraph(n.graph());return t.forEach(n.nodes(),(function(t){r.setNode(t,n.node(t))})),t.forEach(n.edges(),(function(t){var e=r.edge(t.v,t.w)||{weight:0,minlen:1},i=n.edge(t);r.setEdge(t.v,t.w,{weight:e.weight+i.weight,minlen:Math.max(e.minlen,i.minlen)})})),r}function i(n){var r=new e({multigraph:n.isMultigraph()}).setGraph(n.graph());return t.forEach(n.nodes(),(function(t){n.children(t).length||r.setNode(t,n.node(t))})),t.forEach(n.edges(),(function(t){r.setEdge(t,n.edge(t))})),r}function o(e){var n=t.map(e.nodes(),(function(n){var r={};return t.forEach(e.outEdges(n),(function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return t.zipObject(e.nodes(),n)}function s(e){var n=t.map(e.nodes(),(function(n){var r={};return t.forEach(e.inEdges(n),(function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return t.zipObject(e.nodes(),n)}function a(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,c=t.width/2,l=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*c>Math.abs(s)*l?(a<0&&(l=-l),n=l*s/a,r=l):(s<0&&(c=-c),n=c,r=c*a/s),{x:i+n,y:o+r}}function c(e){var n=t.map(t.range(h(e)+1),(function(){return[]}));return t.forEach(e.nodes(),(function(r){var i=e.node(r),o=i.rank;t.isUndefined(o)||(n[o][i.order]=r)})),n}function l(e){var n=t.min(t.map(e.nodes(),(function(t){return e.node(t).rank})));t.forEach(e.nodes(),(function(r){var i=e.node(r);t.has(i,"rank")&&(i.rank-=n)}))}function d(e){var n=t.min(t.map(e.nodes(),(function(t){return e.node(t).rank}))),r=[];t.forEach(e.nodes(),(function(t){var i=e.node(t).rank-n;r[i]||(r[i]=[]),r[i].push(t)}));var i=0,o=e.graph().nodeRankFactor;t.forEach(r,(function(n,r){t.isUndefined(n)&&r%o!=0?--i:i&&t.forEach(n,(function(t){e.node(t).rank+=i}))}))}function u(t,e,r,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=i),n(t,"border",o,e)}function h(e){return t.max(t.map(e.nodes(),(function(n){var r=e.node(n).rank;if(!t.isUndefined(r))return r})))}function g(e,n){var r={lhs:[],rhs:[]};return t.forEach(e,(function(t){n(t)?r.lhs.push(t):r.rhs.push(t)})),r}function f(e,n){var r=t.now();try{return n()}finally{console.log(e+" time: "+(t.now()-r)+"ms")}}function p(t,e){return e()}return uQ={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:s,intersectRect:a,buildLayerMatrix:c,normalizeRanks:l,removeEmptyRanks:d,addBorderNode:u,maxRank:h,partition:g,time:f,notime:p}}function cJ(){if(fQ)return gQ;fQ=1;var t=rJ(),e=aJ();function n(e){e.graph().dummyChains=[],t.forEach(e.edges(),(function(t){r(e,t)}))}function r(t,n){var r=n.v,i=t.node(r).rank,o=n.w,s=t.node(o).rank,a=n.name,c=t.edge(n),l=c.labelRank;if(s!==i+1){var d,u,h;for(t.removeEdge(n),h=0,++i;i<s;++h,++i)c.points=[],u={width:0,height:0,edgeLabel:c,edgeObj:n,rank:i},d=e.addDummyNode(t,"edge",u,"_d"),i===l&&(u.width=c.width,u.height=c.height,u.dummy="edge-label",u.labelpos=c.labelpos),t.setEdge(r,d,{weight:c.weight},a),0===h&&t.graph().dummyChains.push(d),r=d;t.setEdge(r,o,{weight:c.weight},a)}}function i(e){t.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)}))}return gQ={run:n,undo:i}}function lJ(){if(mQ)return pQ;mQ=1;var t=rJ();function e(e){var n={};function r(i){var o=e.node(i);if(t.has(n,i))return o.rank;n[i]=!0;var s=t.min(t.map(e.outEdges(i),(function(t){return r(t.w)-e.edge(t).minlen})));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s}t.forEach(e.sources(),r)}function n(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}return pQ={longestPath:e,slack:n}}function dJ(){if(kQ)return bQ;kQ=1;var t=rJ(),e=dX().Graph,n=lJ().slack;function r(t){var r,a,c=new e({directed:!1}),l=t.nodes()[0],d=t.nodeCount();for(c.setNode(l,{});i(c,t)<d;)r=o(c,t),a=c.hasNode(r.v)?n(t,r):-n(t,r),s(c,t,a);return c}function i(e,r){function i(o){t.forEach(r.nodeEdges(o),(function(t){var s=t.v,a=o===s?t.w:s;e.hasNode(a)||n(r,t)||(e.setNode(a,{}),e.setEdge(o,a,{}),i(a))}))}return t.forEach(e.nodes(),i),e.nodeCount()}function o(e,r){return t.minBy(r.edges(),(function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return n(r,t)}))}function s(e,n,r){t.forEach(e.nodes(),(function(t){n.node(t).rank+=r}))}return bQ=r}function uJ(){if(yQ)return wQ;yQ=1;var t=rJ(),e=dJ(),n=lJ().slack,r=lJ().longestPath,i=dX().alg.preorder,o=dX().alg.postorder,s=aJ().simplify;function a(t){t=s(t),r(t);var n,i=e(t);for(u(i),c(i,t);n=g(i);)p(i,t,n,f(i,t,n))}function c(e,n){var r=o(e,e.nodes());r=r.slice(0,r.length-1),t.forEach(r,(function(t){l(e,n,t)}))}function l(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=d(t,e,n)}function d(e,n,r){var i=e.node(r).parent,o=!0,s=n.edge(r,i),a=0;return s||(o=!1,s=n.edge(i,r)),a=s.weight,t.forEach(n.nodeEdges(r),(function(t){var s=t.v===r,c=s?t.w:t.v;if(c!==i){var l=s===o,d=n.edge(t).weight;if(a+=l?d:-d,b(e,r,c)){var u=e.edge(r,c).cutvalue;a+=l?-u:u}}})),a}function u(t,e){arguments.length<2&&(e=t.nodes()[0]),h(t,{},1,e)}function h(e,n,r,i,o){var s=r,a=e.node(i);return n[i]=!0,t.forEach(e.neighbors(i),(function(o){t.has(n,o)||(r=h(e,n,r,o,i))})),a.low=s,a.lim=r++,o?a.parent=o:delete a.parent,r}function g(e){return t.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function f(e,r,i){var o=i.v,s=i.w;r.hasEdge(o,s)||(o=i.w,s=i.v);var a=e.node(o),c=e.node(s),l=a,d=!1;a.lim>c.lim&&(l=c,d=!0);var u=t.filter(r.edges(),(function(t){return d===k(e,e.node(t.v),l)&&d!==k(e,e.node(t.w),l)}));return t.minBy(u,(function(t){return n(r,t)}))}function p(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),u(t),c(t,e),m(t,e)}function m(e,n){var r=t.find(e.nodes(),(function(t){return!n.node(t).parent})),o=i(e,r);o=o.slice(1),t.forEach(o,(function(t){var r=e.node(t).parent,i=n.edge(t,r),o=!1;i||(i=n.edge(r,t),o=!0),n.node(t).rank=n.node(r).rank+(o?i.minlen:-i.minlen)}))}function b(t,e,n){return t.hasEdge(e,n)}function k(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}return wQ=a,a.initLowLimValues=u,a.initCutValues=c,a.calcCutValue=d,a.leaveEdge=g,a.enterEdge=f,a.exchangeEdges=p,wQ}function hJ(){if(vQ)return _Q;vQ=1;var t=lJ().longestPath,e=dJ(),n=uJ();function r(t){switch(t.graph().ranker){case"network-simplex":default:s(t);break;case"tight-tree":o(t);break;case"longest-path":i(t)}}var i=t;function o(n){t(n),e(n)}function s(t){n(t)}return _Q=r}function gJ(){if(CQ)return AQ;CQ=1;var t=rJ();function e(e){var i=r(e);t.forEach(e.graph().dummyChains,(function(t){for(var r=e.node(t),o=r.edgeObj,s=n(e,i,o.v,o.w),a=s.path,c=s.lca,l=0,d=a[l],u=!0;t!==o.w;){if(r=e.node(t),u){for(;(d=a[l])!==c&&e.node(d).maxRank<r.rank;)l++;d===c&&(u=!1)}if(!u){for(;l<a.length-1&&e.node(d=a[l+1]).minRank<=r.rank;)l++;d=a[l]}e.setParent(t,d),t=e.successors(t)[0]}}))}function n(t,e,n,r){var i,o,s=[],a=[],c=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>c||l>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}function r(e){var n={},r=0;function i(o){var s=r;t.forEach(e.children(o),i),n[o]={low:s,lim:r++}}return t.forEach(e.children(),i),n}return AQ=e}function fJ(){if(EQ)return xQ;EQ=1;var t=rJ(),e=aJ();function n(n){var s=e.addDummyNode(n,"root",{},"_root"),a=i(n),c=t.max(t.values(a))-1,l=2*c+1;n.graph().nestingRoot=s,t.forEach(n.edges(),(function(t){n.edge(t).minlen*=l}));var d=o(n)+1;t.forEach(n.children(),(function(t){r(n,s,l,d,c,a,t)})),n.graph().nodeRankFactor=l}function r(n,i,o,s,a,c,l){var d=n.children(l);if(d.length){var u=e.addBorderNode(n,"_bt"),h=e.addBorderNode(n,"_bb"),g=n.node(l);n.setParent(u,l),g.borderTop=u,n.setParent(h,l),g.borderBottom=h,t.forEach(d,(function(t){r(n,i,o,s,a,c,t);var e=n.node(t),d=e.borderTop?e.borderTop:t,g=e.borderBottom?e.borderBottom:t,f=e.borderTop?s:2*s,p=d!==g?1:a-c[l]+1;n.setEdge(u,d,{weight:f,minlen:p,nestingEdge:!0}),n.setEdge(g,h,{weight:f,minlen:p,nestingEdge:!0})})),n.parent(l)||n.setEdge(i,u,{weight:0,minlen:a+c[l]})}else l!==i&&n.setEdge(i,l,{weight:0,minlen:o})}function i(e){var n={};function r(i,o){var s=e.children(i);s&&s.length&&t.forEach(s,(function(t){r(t,o+1)})),n[i]=o}return t.forEach(e.children(),(function(t){r(t,1)})),n}function o(e){return t.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}function s(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,t.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}return xQ={run:n,cleanup:s}}function pJ(){if(SQ)return TQ;SQ=1;var t=rJ(),e=aJ();function n(e){function n(i){var o=e.children(i),s=e.node(i);if(o.length&&t.forEach(o,n),t.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,c=s.maxRank+1;a<c;++a)r(e,"borderLeft","_bl",i,s,a),r(e,"borderRight","_br",i,s,a)}}t.forEach(e.children(),n)}function r(t,n,r,i,o,s){var a={width:0,height:0,rank:s,borderType:n},c=o[n][s-1],l=e.addDummyNode(t,"border",a,r);o[n][s]=l,t.setParent(l,i),c&&t.setEdge(c,l,{weight:1})}return TQ=n}function mJ(){if(MQ)return DQ;MQ=1;var t=rJ();function e(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||r(t)}function n(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||o(t),"lr"!==e&&"rl"!==e||(a(t),r(t))}function r(e){t.forEach(e.nodes(),(function(t){i(e.node(t))})),t.forEach(e.edges(),(function(t){i(e.edge(t))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function o(e){t.forEach(e.nodes(),(function(t){s(e.node(t))})),t.forEach(e.edges(),(function(n){var r=e.edge(n);t.forEach(r.points,s),t.has(r,"y")&&s(r)}))}function s(t){t.y=-t.y}function a(e){t.forEach(e.nodes(),(function(t){c(e.node(t))})),t.forEach(e.edges(),(function(n){var r=e.edge(n);t.forEach(r.points,c),t.has(r,"x")&&c(r)}))}function c(t){var e=t.x;t.x=t.y,t.y=e}return DQ={adjust:e,undo:n}}function bJ(){if(BQ)return IQ;BQ=1;var t=rJ();function e(e){var n={},r=t.filter(e.nodes(),(function(t){return!e.children(t).length})),i=t.max(t.map(r,(function(t){return e.node(t).rank}))),o=t.map(t.range(i+1),(function(){return[]}));function s(r){if(!t.has(n,r)){n[r]=!0;var i=e.node(r);o[i.rank].push(r),t.forEach(e.successors(r),s)}}var a=t.sortBy(r,(function(t){return e.node(t).rank}));return t.forEach(a,s),o}return IQ=e}function kJ(){if(NQ)return LQ;NQ=1;var t=rJ();function e(t,e){for(var r=0,i=1;i<e.length;++i)r+=n(t,e[i-1],e[i]);return r}function n(e,n,r){for(var i=t.zipObject(r,t.map(r,(function(t,e){return e}))),o=t.flatten(t.map(n,(function(n){return t.sortBy(t.map(e.outEdges(n),(function(t){return{pos:i[t.w],weight:e.edge(t).weight}})),"pos")})),!0),s=1;s<r.length;)s<<=1;var a=2*s-1;s-=1;var c=t.map(new Array(a),(function(){return 0})),l=0;return t.forEach(o.forEach((function(t){var e=t.pos+s;c[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=c[e+1]),c[e=e-1>>1]+=t.weight;l+=t.weight*n}))),l}return LQ=e}function wJ(){if(PQ)return OQ;PQ=1;var t=rJ();function e(e,n){return t.map(n,(function(n){var r=e.inEdges(n);if(r.length){var i=t.reduce(r,(function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}return{v:n}}))}return OQ=e}function yJ(){if(zQ)return RQ;zQ=1;var t=rJ();function e(e,r){var i={};return t.forEach(e,(function(e,n){var r=i[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};t.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)})),t.forEach(r.edges(),(function(e){var n=i[e.v],r=i[e.w];t.isUndefined(n)||t.isUndefined(r)||(r.indegree++,n.out.push(i[e.w]))})),n(t.filter(i,(function(t){return!t.indegree})))}function n(e){var n=[];function i(e){return function(n){n.merged||(t.isUndefined(n.barycenter)||t.isUndefined(e.barycenter)||n.barycenter>=e.barycenter)&&r(e,n)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var s=e.pop();n.push(s),t.forEach(s.in.reverse(),i(s)),t.forEach(s.out,o(s))}return t.map(t.filter(n,(function(t){return!t.merged})),(function(e){return t.pick(e,["vs","i","barycenter","weight"])}))}function r(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}return RQ=e}function _J(){if(jQ)return FQ;jQ=1;var t=rJ(),e=aJ();function n(n,o){var s=e.partition(n,(function(e){return t.has(e,"barycenter")})),a=s.lhs,c=t.sortBy(s.rhs,(function(t){return-t.i})),l=[],d=0,u=0,h=0;a.sort(i(!!o)),h=r(l,c,h),t.forEach(a,(function(t){h+=t.vs.length,l.push(t.vs),d+=t.barycenter*t.weight,u+=t.weight,h=r(l,c,h)}));var g={vs:t.flatten(l,!0)};return u&&(g.barycenter=d/u,g.weight=u),g}function r(e,n,r){for(var i;n.length&&(i=t.last(n)).i<=r;)n.pop(),e.push(i.vs),r++;return r}function i(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}return FQ=n}function vJ(){if($Q)return VQ;$Q=1;var t=rJ(),e=wJ(),n=yJ(),r=_J();function i(a,c,l,d){var u=a.children(c),h=a.node(c),g=h?h.borderLeft:void 0,f=h?h.borderRight:void 0,p={};g&&(u=t.filter(u,(function(t){return t!==g&&t!==f})));var m=e(a,u);t.forEach(m,(function(e){if(a.children(e.v).length){var n=i(a,e.v,l,d);p[e.v]=n,t.has(n,"barycenter")&&s(e,n)}}));var b=n(m,l);o(b,p);var k=r(b,d);if(g&&(k.vs=t.flatten([g,k.vs,f],!0),a.predecessors(g).length)){var w=a.node(a.predecessors(g)[0]),y=a.node(a.predecessors(f)[0]);t.has(k,"barycenter")||(k.barycenter=0,k.weight=0),k.barycenter=(k.barycenter*k.weight+w.order+y.order)/(k.weight+2),k.weight+=2}return k}function o(e,n){t.forEach(e,(function(e){e.vs=t.flatten(e.vs.map((function(t){return n[t]?n[t].vs:t})),!0)}))}function s(e,n){t.isUndefined(e.barycenter)?(e.barycenter=n.barycenter,e.weight=n.weight):(e.barycenter=(e.barycenter*e.weight+n.barycenter*n.weight)/(e.weight+n.weight),e.weight+=n.weight)}return VQ=i}function AJ(){if(UQ)return HQ;UQ=1;var t=rJ(),e=dX().Graph;function n(n,i,o){var s=r(n),a=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel((function(t){return n.node(t)}));return t.forEach(n.nodes(),(function(e){var r=n.node(e),c=n.parent(e);(r.rank===i||r.minRank<=i&&i<=r.maxRank)&&(a.setNode(e),a.setParent(e,c||s),t.forEach(n[o](e),(function(r){var i=r.v===e?r.w:r.v,o=a.edge(i,e),s=t.isUndefined(o)?0:o.weight;a.setEdge(i,e,{weight:n.edge(r).weight+s})})),t.has(r,"minRank")&&a.setNode(e,{borderLeft:r.borderLeft[i],borderRight:r.borderRight[i]}))})),a}function r(e){for(var n;e.hasNode(n=t.uniqueId("_root")););return n}return HQ=n}function CJ(){if(qQ)return WQ;qQ=1;var t=rJ();function e(e,n,r){var i,o={};t.forEach(r,(function(t){for(var r,s,a=e.parent(t);a;){if((r=e.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void n.setEdge(s,a);a=r}}))}return WQ=e}function xJ(){if(GQ)return YQ;GQ=1;var t=rJ(),e=bJ(),n=kJ(),r=vJ(),i=AJ(),o=CJ(),s=dX().Graph,a=aJ();function c(r){var i=a.maxRank(r),o=l(r,t.range(1,i+1),"inEdges"),s=l(r,t.range(i-1,-1,-1),"outEdges"),c=e(r);u(r,c);for(var h,g=Number.POSITIVE_INFINITY,f=0,p=0;p<4;++f,++p){d(f%2?o:s,f%4>=2),c=a.buildLayerMatrix(r);var m=n(r,c);m<g&&(p=0,h=t.cloneDeep(c),g=m)}u(r,h)}function l(e,n,r){return t.map(n,(function(t){return i(e,t,r)}))}function d(e,n){var i=new s;t.forEach(e,(function(e){var s=e.graph().root,a=r(e,s,i,n);t.forEach(a.vs,(function(t,n){e.node(t).order=n})),o(e,i,a.vs)}))}function u(e,n){t.forEach(n,(function(n){t.forEach(n,(function(t,n){e.node(t).order=n}))}))}return YQ=c}function EJ(){if(KQ)return ZQ;KQ=1;var t=rJ(),e=dX().Graph,n=aJ();function r(e,n){var r={};function i(n,i){var a=0,c=0,l=n.length,d=t.last(i);return t.forEach(i,(function(n,u){var h=o(e,n),g=h?e.node(h).order:l;(h||n===d)&&(t.forEach(i.slice(c,u+1),(function(n){t.forEach(e.predecessors(n),(function(t){var i=e.node(t),o=i.order;!(o<a||g<o)||i.dummy&&e.node(n).dummy||s(r,t,n)}))})),c=u+1,a=g)})),i}return t.reduce(n,i),r}function i(e,n){var r={};function i(n,i,o,a,c){var l;t.forEach(t.range(i,o),(function(i){l=n[i],e.node(l).dummy&&t.forEach(e.predecessors(l),(function(t){var n=e.node(t);n.dummy&&(n.order<a||n.order>c)&&s(r,t,l)}))}))}function o(n,r){var o,s=-1,a=0;return t.forEach(r,(function(t,c){if("border"===e.node(t).dummy){var l=e.predecessors(t);l.length&&(o=e.node(l[0]).order,i(r,a,c,s,o),a=c,s=o)}i(r,a,r.length,o,n.length)})),r}return t.reduce(n,o),r}function o(e,n){if(e.node(n).dummy)return t.find(e.predecessors(n),(function(t){return e.node(t).dummy}))}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function a(e,n,r){if(n>r){var i=n;n=r,r=i}return t.has(e[n],r)}function c(e,n,r,i){var o={},s={},c={};return t.forEach(n,(function(e){t.forEach(e,(function(t,e){o[t]=t,s[t]=t,c[t]=e}))})),t.forEach(n,(function(e){var n=-1;t.forEach(e,(function(e){var l=i(e);if(l.length)for(var d=((l=t.sortBy(l,(function(t){return c[t]}))).length-1)/2,u=Math.floor(d),h=Math.ceil(d);u<=h;++u){var g=l[u];s[e]===e&&n<c[g]&&!a(r,e,g)&&(s[g]=e,s[e]=o[e]=o[g],n=c[g])}}))})),{root:o,align:s}}function l(e,n,r,i,o){var s={},a=d(e,n,r,o),c=o?"borderLeft":"borderRight";function l(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}function u(t){s[t]=a.inEdges(t).reduce((function(t,e){return Math.max(t,s[e.v]+a.edge(e))}),0)}function h(t){var n=a.outEdges(t).reduce((function(t,e){return Math.min(t,s[e.w]-a.edge(e))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[t]=Math.max(s[t],n))}return l(u,a.predecessors.bind(a)),l(h,a.successors.bind(a)),t.forEach(i,(function(t){s[t]=s[r[t]]})),s}function d(n,r,i,o){var s=new e,a=n.graph(),c=p(a.nodesep,a.edgesep,o);return t.forEach(r,(function(e){var r;t.forEach(e,(function(t){var e=i[t];if(s.setNode(e),r){var o=i[r],a=s.edge(o,e);s.setEdge(o,e,Math.max(c(n,t,r),a||0))}r=t}))})),s}function u(e,n){return t.minBy(t.values(n),(function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return t.forIn(n,(function(t,n){var o=m(e,n)/2;r=Math.max(t+o,r),i=Math.min(t-o,i)})),r-i}))}function h(e,n){var r=t.values(n),i=t.min(r),o=t.max(r);t.forEach(["u","d"],(function(r){t.forEach(["l","r"],(function(s){var a,c=r+s,l=e[c];if(l!==n){var d=t.values(l);(a="l"===s?i-t.min(d):o-t.max(d))&&(e[c]=t.mapValues(l,(function(t){return t+a})))}}))}))}function g(e,n){return t.mapValues(e.ul,(function(r,i){if(n)return e[n.toLowerCase()][i];var o=t.sortBy(t.map(e,i));return(o[1]+o[2])/2}))}function f(e){var o,s=n.buildLayerMatrix(e),a=t.merge(r(e,s),i(e,s)),d={};t.forEach(["u","d"],(function(n){o="u"===n?s:t.values(s).reverse(),t.forEach(["l","r"],(function(r){"r"===r&&(o=t.map(o,(function(e){return t.values(e).reverse()})));var i=("u"===n?e.predecessors:e.successors).bind(e),s=c(e,o,a,i),u=l(e,o,s.root,s.align,"r"===r);"r"===r&&(u=t.mapValues(u,(function(t){return-t}))),d[n+r]=u}))}));var f=u(e,d);return h(d,f),g(d,e.graph().align)}function p(e,n,r){return function(i,o,s){var a,c=i.node(o),l=i.node(s),d=0;if(d+=c.width/2,t.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=-c.width/2;break;case"r":a=c.width/2}if(a&&(d+=r?a:-a),a=0,d+=(c.dummy?n:e)/2,d+=(l.dummy?n:e)/2,d+=l.width/2,t.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(d+=r?a:-a),a=0,d}}function m(t,e){return t.node(e).width}return ZQ={positionX:f,findType1Conflicts:r,findType2Conflicts:i,addConflict:s,hasConflict:a,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:u,balance:g}}function TJ(){if(XQ)return QQ;XQ=1;var t=rJ(),e=aJ(),n=EJ().positionX;function r(r){i(r=e.asNonCompoundGraph(r)),t.forEach(n(r),(function(t,e){r.node(e).x=t}))}function i(n){var r=e.buildLayerMatrix(n),i=n.graph().ranksep,o=0;t.forEach(r,(function(e){var r=t.max(t.map(e,(function(t){return n.node(t).height})));t.forEach(e,(function(t){n.node(t).y=o+r/2})),o+=r+i}))}return QQ=r}function SJ(){if(tX)return JQ;tX=1;var t=rJ(),e=sJ(),n=cJ(),r=hJ(),i=aJ().normalizeRanks,o=gJ(),s=aJ().removeEmptyRanks,a=fJ(),c=pJ(),l=mJ(),d=xJ(),u=TJ(),h=aJ(),g=dX().Graph;function f(t,e){var n=e&&e.debugTiming?h.time:h.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return x(t)}));n("  runLayout",(function(){p(e,n)})),n("  updateInputGraph",(function(){m(t,e)}))}))}function p(t,g){g("    makeSpaceForEdgeLabels",(function(){E(t)})),g("    removeSelfEdges",(function(){O(t)})),g("    acyclic",(function(){e.run(t)})),g("    nestingGraph.run",(function(){a.run(t)})),g("    rank",(function(){r(h.asNonCompoundGraph(t))})),g("    injectEdgeLabelProxies",(function(){T(t)})),g("    removeEmptyRanks",(function(){s(t)})),g("    nestingGraph.cleanup",(function(){a.cleanup(t)})),g("    normalizeRanks",(function(){i(t)})),g("    assignRankMinMax",(function(){S(t)})),g("    removeEdgeLabelProxies",(function(){D(t)})),g("    normalize.run",(function(){n.run(t)})),g("    parentDummyChains",(function(){o(t)})),g("    addBorderSegments",(function(){c(t)})),g("    order",(function(){d(t)})),g("    insertSelfEdges",(function(){P(t)})),g("    adjustCoordinateSystem",(function(){l.adjust(t)})),g("    position",(function(){u(t)})),g("    positionSelfEdges",(function(){R(t)})),g("    removeBorderNodes",(function(){N(t)})),g("    normalize.undo",(function(){n.undo(t)})),g("    fixupEdgeLabelCoords",(function(){B(t)})),g("    undoCoordinateSystem",(function(){l.undo(t)})),g("    translateGraph",(function(){M(t)})),g("    assignNodeIntersects",(function(){I(t)})),g("    reversePoints",(function(){L(t)})),g("    acyclic.undo",(function(){e.undo(t)}))}function m(e,n){t.forEach(e.nodes(),(function(t){var r=e.node(t),i=n.node(t);r&&(r.x=i.x,r.y=i.y,n.children(t).length&&(r.width=i.width,r.height=i.height))})),t.forEach(e.edges(),(function(r){var i=e.edge(r),o=n.edge(r);i.points=o.points,t.has(o,"x")&&(i.x=o.x,i.y=o.y)})),e.graph().width=n.graph().width,e.graph().height=n.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],k={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],y=["width","height"],_={width:0,height:0},v=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function x(e){var n=new g({multigraph:!0,compound:!0}),r=F(e.graph());return n.setGraph(t.merge({},k,z(r,b),t.pick(r,w))),t.forEach(e.nodes(),(function(r){var i=F(e.node(r));n.setNode(r,t.defaults(z(i,y),_)),n.setParent(r,e.parent(r))})),t.forEach(e.edges(),(function(r){var i=F(e.edge(r));n.setEdge(r,t.merge({},A,z(i,v),t.pick(i,C)))})),n}function E(e){var n=e.graph();n.ranksep/=2,t.forEach(e.edges(),(function(t){var r=e.edge(t);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}function T(e){t.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};h.addDummyNode(e,"edge-proxy",i,"_ep")}}))}function S(e){var n=0;t.forEach(e.nodes(),(function(r){var i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,n=t.max(n,i.maxRank))})),e.graph().maxRank=n}function D(e){t.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}function M(e){var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,s=e.graph(),a=s.marginx||0,c=s.marginy||0;function l(t){var e=t.x,s=t.y,a=t.width,c=t.height;n=Math.min(n,e-a/2),r=Math.max(r,e+a/2),i=Math.min(i,s-c/2),o=Math.max(o,s+c/2)}t.forEach(e.nodes(),(function(t){l(e.node(t))})),t.forEach(e.edges(),(function(n){var r=e.edge(n);t.has(r,"x")&&l(r)})),n-=a,i-=c,t.forEach(e.nodes(),(function(t){var r=e.node(t);r.x-=n,r.y-=i})),t.forEach(e.edges(),(function(r){var o=e.edge(r);t.forEach(o.points,(function(t){t.x-=n,t.y-=i})),t.has(o,"x")&&(o.x-=n),t.has(o,"y")&&(o.y-=i)})),s.width=r-n+a,s.height=o-i+c}function I(e){t.forEach(e.edges(),(function(t){var n,r,i=e.edge(t),o=e.node(t.v),s=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(h.intersectRect(o,n)),i.points.push(h.intersectRect(s,r))}))}function B(e){t.forEach(e.edges(),(function(n){var r=e.edge(n);if(t.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}function L(e){t.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}function N(e){t.forEach(e.nodes(),(function(n){if(e.children(n).length){var r=e.node(n),i=e.node(r.borderTop),o=e.node(r.borderBottom),s=e.node(t.last(r.borderLeft)),a=e.node(t.last(r.borderRight));r.width=Math.abs(a.x-s.x),r.height=Math.abs(o.y-i.y),r.x=s.x+r.width/2,r.y=i.y+r.height/2}})),t.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}function O(e){t.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}function P(e){var n=h.buildLayerMatrix(e);t.forEach(n,(function(n){var r=0;t.forEach(n,(function(n,i){var o=e.node(n);o.order=i+r,t.forEach(o.selfEdges,(function(t){h.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:i+ ++r,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}function R(e){t.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}}))}function z(e,n){return t.mapValues(t.pick(e,n),Number)}function F(e){var n={};return t.forEach(e,(function(t,e){n[e.toLowerCase()]=t})),n}return JQ=f}function DJ(){if(nX)return eX;nX=1;var t=rJ(),e=aJ(),n=dX().Graph;function r(r){var i=e.buildLayerMatrix(r),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),(function(t){o.setNode(t,{label:t}),o.setParent(t,"layer"+r.node(t).rank)})),t.forEach(r.edges(),(function(t){o.setEdge(t.v,t.w,{},t.name)})),t.forEach(i,(function(e,n){var r="layer"+n;o.setNode(r,{rank:"same"}),t.reduce(e,(function(t,e){return o.setEdge(t,e,{style:"invis"}),e}))})),o}return eX={debugOrdering:r}}function MJ(){return iX?rX:(iX=1,rX="0.8.5")}function IJ(){return sX?oX:(sX=1,oX={graphlib:dX(),layout:SJ(),debug:DJ(),util:{time:aJ().time,notime:aJ().notime},version:MJ()})}var BJ=IJ();let LJ=0;const NJ=function(t,e,n,r){u.debug("Rendering class ",e,n);const i=e.id,o={id:i,label:e.id,width:0,height:0},s=t.append("g").attr("id",r.db.lookUpDomId(i)).attr("class","classGroup");let a;a=e.link?s.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",n.textHeight+n.padding).attr("x",0):s.append("text").attr("y",n.textHeight+n.padding).attr("x",0);let c=!0;e.annotations.forEach((function(t){const e=a.append("tspan").text("«"+t+"»");c||e.attr("dy",n.textHeight),c=!1}));let l=e.id;void 0!==e.type&&""!==e.type&&(l+="<"+e.type+">");const d=a.append("tspan").text(l).attr("class","title");c||d.attr("dy",n.textHeight);const h=a.node().getBBox().height,g=s.append("line").attr("x1",0).attr("y1",n.padding+h+n.dividerMargin/2).attr("y2",n.padding+h+n.dividerMargin/2),f=s.append("text").attr("x",n.padding).attr("y",h+n.dividerMargin+n.textHeight).attr("fill","white").attr("class","classText");c=!0,e.members.forEach((function(t){FJ(f,t,c,n),c=!1}));const p=f.node().getBBox(),m=s.append("line").attr("x1",0).attr("y1",n.padding+h+n.dividerMargin+p.height).attr("y2",n.padding+h+n.dividerMargin+p.height),b=s.append("text").attr("x",n.padding).attr("y",h+2*n.dividerMargin+p.height+n.textHeight).attr("fill","white").attr("class","classText");c=!0,e.methods.forEach((function(t){FJ(b,t,c,n),c=!1}));const k=s.node().getBBox();var w=" ";e.cssClasses.length>0&&(w+=e.cssClasses.join(" "));const y=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",k.width+2*n.padding).attr("height",k.height+n.padding+.5*n.dividerMargin).attr("class",w).node().getBBox().width;return a.node().childNodes.forEach((function(t){t.setAttribute("x",(y-t.getBBox().width)/2)})),e.tooltip&&a.insert("title").text(e.tooltip),g.attr("x2",y),m.attr("x2",y),o.width=y,o.height=k.height+n.padding+.5*n.dividerMargin,o},OJ=function(t){const e=/^(\+|-|~|#)?(\w+)(~\w+~|\[\])?\s+(\w+) *(\*|\$)?$/,n=/^([+|\-|~|#])?(\w+) *\( *(.*)\) *(\*|\$)? *(\w*[~|[\]]*\s*\w*~?)$/;let r=t.match(e),i=t.match(n);return r&&!i?PJ(r):i?RJ(i):zJ(t)},PJ=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",o=t[3]?hI(t[3].trim()):"",s=t[4]?t[4].trim():"",a=t[5]?t[5].trim():"";n=r+i+o+" "+s,e=jJ(a)}catch(e){n=t}return{displayText:n,cssStyle:e}},RJ=function(t){let e="",n="";try{let r=t[1]?t[1].trim():"",i=t[2]?t[2].trim():"",o=t[3]?hI(t[3].trim()):"",s=t[4]?t[4].trim():"";n=r+i+"("+o+")"+(t[5]?" : "+hI(t[5]).trim():""),e=jJ(s)}catch(e){n=t}return{displayText:n,cssStyle:e}},zJ=function(t){let e="",n="",r="",i=t.indexOf("("),o=t.indexOf(")");if(i>1&&o>i&&o<=t.length){let s="",a="",c=t.substring(0,1);c.match(/\w/)?a=t.substring(0,i).trim():(c.match(/\+|-|~|#/)&&(s=c),a=t.substring(1,i).trim());const l=t.substring(i+1,o);t.substring(o+1,1),n=jJ(t.substring(o+1,o+2)),e=s+a+"("+hI(l.trim())+")",o<t.length&&(r=t.substring(o+2).trim(),""!==r&&(r=" : "+hI(r),e+=r))}else e=hI(t);return{displayText:e,cssStyle:n}},FJ=function(t,e,n,r){let i=OJ(e);const o=t.append("tspan").attr("x",r.padding).text(i.displayText);""!==i.cssStyle&&o.attr("style",i.cssStyle),n||o.attr("dy",r.textHeight)},jJ=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},VJ={drawClass:NJ,drawEdge:function(t,e,n,r,i){const o=function(t){switch(t){case i.db.relationType.AGGREGATION:return"aggregation";case i.db.EXTENSION:return"extension";case i.db.COMPOSITION:return"composition";case i.db.DEPENDENCY:return"dependency";case i.db.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const s=e.points,a=OT().x((function(t){return t.x})).y((function(t){return t.y})).curve(PS),c=t.append("path").attr("d",a(s)).attr("id","edge"+LJ).attr("class","relation");let l,d,h="";r.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),1==n.relation.lineType&&c.attr("class","relation dashed-line"),"none"!==n.relation.type1&&c.attr("marker-start","url("+h+"#"+o(n.relation.type1)+"Start)"),"none"!==n.relation.type2&&c.attr("marker-end","url("+h+"#"+o(n.relation.type2)+"End)");const g=e.points.length;let f,p,m,b,k=JN.calcLabelPosition(e.points);if(l=k.x,d=k.y,g%2!=0&&g>1){let t=JN.calcCardinalityPosition("none"!==n.relation.type1,e.points,e.points[0]),r=JN.calcCardinalityPosition("none"!==n.relation.type2,e.points,e.points[g-1]);u.debug("cardinality_1_point "+JSON.stringify(t)),u.debug("cardinality_2_point "+JSON.stringify(r)),f=t.x,p=t.y,m=r.x,b=r.y}if(void 0!==n.title){const e=t.append("g").attr("class","classLabel"),i=e.append("text").attr("class","label").attr("x",l).attr("y",d).attr("fill","red").attr("text-anchor","middle").text(n.title);window.label=i;const o=i.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",o.x-r.padding/2).attr("y",o.y-r.padding/2).attr("width",o.width+r.padding).attr("height",o.height+r.padding)}u.info("Rendering relation "+JSON.stringify(n)),void 0!==n.relationTitle1&&"none"!==n.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",f).attr("y",p).attr("fill","black").attr("font-size","6").text(n.relationTitle1),void 0!==n.relationTitle2&&"none"!==n.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",m).attr("y",b).attr("fill","black").attr("font-size","6").text(n.relationTitle2),LJ++},parseMember:OJ};let $J={};const HJ=20,UJ=function(t){const e=Object.entries($J).find((e=>e[1].label===t));if(e)return e[0]},WJ=function(t){t.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},qJ={draw:function(t,e,n,r){const i=nP().class;$J={},u.info("Rendering diagram "+t);const o=nP().securityLevel;let s;"sandbox"===o&&(s=Qr("#i"+e));const a=Qr("sandbox"===o?s.nodes()[0].contentDocument.body:"body"),c=a.select(`[id='${e}']`);WJ(c);const l=new lX.Graph({multigraph:!0});l.setGraph({isMultiGraph:!0}),l.setDefaultEdgeLabel((function(){return{}}));const d=r.db.getClasses(),h=Object.keys(d);for(let t=0;t<h.length;t++){const e=d[h[t]],n=VJ.drawClass(c,e,i,r);$J[n.id]=n,l.setNode(n.id,n),u.info("Org height: "+n.height)}r.db.getRelations().forEach((function(t){u.info("tjoho"+UJ(t.id1)+UJ(t.id2)+JSON.stringify(t)),l.setEdge(UJ(t.id1),UJ(t.id2),{relation:t},t.title||"DEFAULT")})),BJ.layout(l),l.nodes().forEach((function(t){void 0!==t&&void 0!==l.node(t)&&(u.debug("Node "+t+": "+JSON.stringify(l.node(t))),a.select("#"+r.db.lookUpDomId(t)).attr("transform","translate("+(l.node(t).x-l.node(t).width/2)+","+(l.node(t).y-l.node(t).height/2)+" )"))})),l.edges().forEach((function(t){void 0!==t&&void 0!==l.edge(t)&&(u.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(l.edge(t))),VJ.drawEdge(c,l.edge(t),l.edge(t).relation,i,r))}));const g=c.node().getBBox(),f=g.width+2*HJ,p=g.height+2*HJ;hP(c,p,f,i.useMaxWidth);const m=`${g.x-HJ} ${g.y-HJ} ${f} ${p}`;u.debug(`viewBox ${m}`),c.attr("viewBox",m),yR(r.db,c,e)}},YJ=(t,e,n,r)=>{e.forEach((e=>{GJ[e](t,n,r)}))},GJ={extension:(t,e,n)=>{u.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}};function ZJ(t,e){e&&t.attr("style",e)}function KJ(t){const e=Qr(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=t.label,i=t.isNode?"nodeLabel":"edgeLabel";return n.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>"),ZJ(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}const QJ=(t,e,n,r)=>{let i=t||"";if("object"==typeof i&&(i=i[0]),uI(nP().flowchart.htmlLabels))return i=i.replace(/\\n|\n/g,"<br />"),u.info("vertexText"+i),KJ({isNode:r,label:o9(i).replace(/fa[lrsb]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:e.replace("fill:","color:")});{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let r=[];r="string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(let e=0;e<r.length;e++){const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),n?i.setAttribute("class","title-row"):i.setAttribute("class","row"),i.textContent=r[e].trim(),t.appendChild(i)}return t}},XJ=(t,e,n,r)=>{let i;i=n||"node default";const o=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=o.insert("g").attr("class","label").attr("style",e.labelStyle);let a;a=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];const c=s.node().appendChild(QJ(sI(o9(a),nP()),e.labelStyle,!1,r));let l=c.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=c.children[0],e=Qr(c);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}const d=e.padding/2;return s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),{shapeSvg:o,bbox:l,halfPadding:d,label:s}},JJ=(t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height};function t0(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}let e0={},n0={},r0={};const i0=()=>{n0={},r0={},e0={}},o0=(t,e)=>(u.trace("In isDecendant",e," ",t," = ",n0[e].indexOf(t)>=0),n0[e].indexOf(t)>=0),s0=(t,e)=>(u.info("Decendants of ",e," is ",n0[e]),u.info("Edge is ",t),t.v!==e&&t.w!==e&&(n0[e]?n0[e].indexOf(t.v)>=0||!!o0(t.v,e)||!!o0(t.w,e)||n0[e].indexOf(t.w)>=0:(u.debug("Tilt, ",e,",not in decendants"),!1))),a0=(t,e,n,r)=>{u.warn("Copying children of ",t,"root",r,"data",e.node(t),r);const i=e.children(t)||[];t!==r&&i.push(t),u.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach((i=>{if(e.children(i).length>0)a0(i,e,n,r);else{const o=e.node(i);u.info("cp ",i," to ",r," with parent ",t),n.setNode(i,o),r!==e.parent(i)&&(u.warn("Setting parent",i,e.parent(i)),n.setParent(i,e.parent(i))),t!==r&&i!==t?(u.debug("Setting parent",i,t),n.setParent(i,t)):(u.info("In copy ",t,"root",r,"data",e.node(t),r),u.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==r,"node!==clusterId",i!==t));const s=e.edges(i);u.debug("Copying Edges",s),s.forEach((i=>{u.info("Edge",i);const o=e.edge(i.v,i.w,i.name);u.info("Edge data",o,r);try{s0(i,r)?(u.info("Copying as ",i.v,i.w,o,i.name),n.setEdge(i.v,i.w,o,i.name),u.info("newGraph edges ",n.edges(),n.edge(n.edges()[0]))):u.info("Skipping copy of edge ",i.v,"--\x3e",i.w," rootId: ",r," clusterId:",t)}catch(t){u.error(t)}}))}u.debug("Removing node",i),e.removeNode(i)}))},c0=(t,e)=>{const n=e.children(t);let r=[].concat(n);for(let i=0;i<n.length;i++)r0[n[i]]=t,r=r.concat(c0(n[i],e));return r},l0=(t,e)=>{u.trace("Searching",t);const n=e.children(t);if(u.trace("Searching children of id ",t,n),n.length<1)return u.trace("This is a valid node",t),t;for(let r=0;r<n.length;r++){const i=l0(n[r],e);if(i)return u.trace("Found replacement for",t," => ",i),i}},d0=t=>e0[t]&&e0[t].externalConnections&&e0[t]?e0[t].id:t,u0=(t,e)=>{!t||e>10?u.debug("Opting out, no graph "):(u.debug("Opting in, graph "),t.nodes().forEach((function(e){t.children(e).length>0&&(u.warn("Cluster identified",e," Replacement id in edges: ",l0(e,t)),n0[e]=c0(e,t),e0[e]={id:l0(e,t),clusterData:t.node(e)})})),t.nodes().forEach((function(e){const n=t.children(e),r=t.edges();n.length>0?(u.debug("Cluster identified",e,n0),r.forEach((t=>{t.v!==e&&t.w!==e&&o0(t.v,e)^o0(t.w,e)&&(u.warn("Edge: ",t," leaves cluster ",e),u.warn("Decendants of XXX ",e,": ",n0[e]),e0[e].externalConnections=!0)}))):u.debug("Not a cluster ",e,n0)})),t.edges().forEach((function(e){const n=t.edge(e);u.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),u.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));let r=e.v,i=e.w;if(u.warn("Fix XXX",e0,"ids:",e.v,e.w,"Translateing: ",e0[e.v]," --- ",e0[e.w]),e0[e.v]&&e0[e.w]&&e0[e.v]===e0[e.w]){u.warn("Fixing and trixing link to self - removing XXX",e.v,e.w,e.name),u.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=d0(e.v),i=d0(e.w),t.removeEdge(e.v,e.w,e.name);const o=e.w+"---"+e.v;t.setNode(o,{domId:o,id:o,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""});const s=JSON.parse(JSON.stringify(n)),a=JSON.parse(JSON.stringify(n));s.label="",s.arrowTypeEnd="none",a.label="",s.fromCluster=e.v,a.toCluster=e.v,t.setEdge(r,o,s,e.name+"-cyclic-special"),t.setEdge(o,i,a,e.name+"-cyclic-special")}else(e0[e.v]||e0[e.w])&&(u.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),r=d0(e.v),i=d0(e.w),t.removeEdge(e.v,e.w,e.name),r!==e.v&&(n.fromCluster=e.v),i!==e.w&&(n.toCluster=e.w),u.warn("Fix Replacing with XXX",r,i,e.name),t.setEdge(r,i,n,e.name))})),u.warn("Adjusted Graph",lX.json.write(t)),h0(t,0),u.trace(e0))},h0=(t,e)=>{if(u.warn("extractor - ",e,lX.json.write(t),t.children("D")),e>10)return void u.error("Bailing out");let n=t.nodes(),r=!1;for(let e=0;e<n.length;e++){const i=n[e],o=t.children(i);r=r||o.length>0}if(r){u.debug("Nodes = ",n,e);for(let r=0;r<n.length;r++){const i=n[r];if(u.debug("Extracting node",i,e0,e0[i]&&!e0[i].externalConnections,!t.parent(i),t.node(i),t.children("D")," Depth ",e),e0[i])if(!e0[i].externalConnections&&t.children(i)&&t.children(i).length>0){u.warn("Cluster without external connections, without a parent and with children",i,e);let n="TB"===t.graph().rankdir?"LR":"TB";e0[i]&&e0[i].clusterData&&e0[i].clusterData.dir&&(n=e0[i].clusterData.dir,u.warn("Fixing dir",e0[i].clusterData.dir,n));const r=new lX.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));u.warn("Old graph before copy",lX.json.write(t)),a0(i,t,r,i),t.setNode(i,{clusterNode:!0,id:i,clusterData:e0[i].clusterData,labelText:e0[i].labelText,graph:r}),u.warn("New graph after copy node: (",i,")",lX.json.write(r)),u.debug("Old graph after copy",lX.json.write(t))}else u.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!e0[i].externalConnections," no parent: ",!t.parent(i)," children ",t.children(i)&&t.children(i).length>0,t.children("D"),e),u.debug(e0);else u.debug("Not a cluster",i,e)}n=t.nodes(),u.warn("New list of nodes",n);for(let r=0;r<n.length;r++){const i=n[r],o=t.node(i);u.warn(" Now next level",i,o),o.clusterNode&&h0(o.graph,e+1)}}else u.debug("Done, no node has children",t.nodes())},g0=(t,e)=>{if(0===e.length)return[];let n=Object.assign(e);return e.forEach((e=>{const r=t.children(e),i=g0(t,r);n=n.concat(i)})),n},f0=t=>g0(t,t.children());function p0(t,e){return t.intersect(e)}function m0(t,e,n,r){var i=t.x,o=t.y,s=i-r.x,a=o-r.y,c=Math.sqrt(e*e*a*a+n*n*s*s),l=Math.abs(e*n*s/c);r.x<i&&(l=-l);var d=Math.abs(e*n*a/c);return r.y<o&&(d=-d),{x:i+l,y:o+d}}function b0(t,e,n){return m0(t,e,e,n)}function k0(t,e,n,r){var i,o,s,a,c,l,d,u,h,g,f,p,m;if(i=e.y-t.y,s=t.x-e.x,c=e.x*t.y-t.x*e.y,h=i*n.x+s*n.y+c,g=i*r.x+s*r.y+c,!(0!==h&&0!==g&&w0(h,g)||(o=r.y-n.y,a=n.x-r.x,l=r.x*n.y-n.x*r.y,d=o*t.x+a*t.y+l,u=o*e.x+a*e.y+l,0!==d&&0!==u&&w0(d,u)||0==(f=i*a-o*s))))return p=Math.abs(f/2),{x:(m=s*l-a*c)<0?(m-p)/f:(m+p)/f,y:(m=o*c-i*l)<0?(m-p)/f:(m+p)/f}}function w0(t,e){return t*e>0}function y0(t,e,n){var r=t.x,i=t.y,o=[],s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),a=Math.min(a,t.y)})):(s=Math.min(s,e.x),a=Math.min(a,e.y));for(var c=r-t.width/2-s,l=i-t.height/2-a,d=0;d<e.length;d++){var u=e[d],h=e[d<e.length-1?d+1:0],g=k0(t,n,{x:c+u.x,y:l+u.y},{x:c+h.x,y:l+h.y});g&&o.push(g)}return o.length?(o.length>1&&o.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,o=Math.sqrt(r*r+i*i),s=e.x-n.x,a=e.y-n.y,c=Math.sqrt(s*s+a*a);return o<c?-1:o===c?0:1})),o[0]):t}const _0=(t,e)=>{var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,c=t.width/2,l=t.height/2;return Math.abs(a)*c>Math.abs(s)*l?(a<0&&(l=-l),n=0===a?0:l*s/a,r=l):(s<0&&(c=-c),n=c,r=0===s?0:c*a/s),{x:i+n,y:o+r}},v0={node:p0,circle:b0,ellipse:m0,polygon:y0,rect:_0};function A0(t,e,n,r){const i=[],o=t=>{i.push(t),i.push(0)},s=t=>{i.push(0),i.push(t)};e.includes("t")?(u.debug("add top border"),o(n)):s(n),e.includes("r")?(u.debug("add right border"),o(r)):s(r),e.includes("b")?(u.debug("add bottom border"),o(n)):s(n),e.includes("l")?(u.debug("add left border"),o(r)):s(r),t.attr("stroke-dasharray",i.join(" "))}const C0=(t,e,n)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,o=10;"LR"===n&&(i=10,o=70);const s=r.append("rect").attr("x",-1*i/2).attr("y",-1*o/2).attr("width",i).attr("height",o).attr("class","fork-join");return JJ(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return v0.rect(e,t)},r},x0={question:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding+(r.height+e.padding),o=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}];u.info("Question main (Circle)");const s=t0(n,i,i,o);return s.attr("style",e.style),JJ(e,s),e.intersect=function(t){return u.warn("Intersect called"),v0.polygon(e,o,t)},n},rect:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=XJ(t,e,"node "+e.classes,!0);u.trace("Classes = ",e.classes);const o=n.insert("rect",":first-child"),s=r.width+e.padding,a=r.height+e.padding;if(o.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",s).attr("height",a),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(A0(o,e.props.borders,s,a),t.delete("borders")),t.forEach((t=>{u.warn(`Unknown node property ${t}`)}))}return JJ(e,o),e.intersect=function(t){return v0.rect(e,t)},n},labelRect:(t,e)=>{const{shapeSvg:n}=XJ(t,e,"label",!0);u.trace("Classes = ",e.classes);const r=n.insert("rect",":first-child"),i=0,o=0;if(r.attr("width",i).attr("height",o),n.attr("class","label edgeLabel"),e.props){const t=new Set(Object.keys(e.props));e.props.borders&&(A0(r,e.props.borders,i,o),t.delete("borders")),t.forEach((t=>{u.warn(`Unknown node property ${t}`)}))}return JJ(e,r),e.intersect=function(t){return v0.rect(e,t)},n},rectWithTitle:(t,e)=>{let n;n=e.classes?"node "+e.classes:"node default";const r=t.insert("g").attr("class",n).attr("id",e.domId||e.id),i=r.insert("rect",":first-child"),o=r.insert("line"),s=r.insert("g").attr("class","label"),a=e.labelText.flat?e.labelText.flat():e.labelText;let c="";c="object"==typeof a?a[0]:a,u.info("Label text abc79",c,a,"object"==typeof a);const l=s.node().appendChild(QJ(c,e.labelStyle,!0,!0));let d={width:0,height:0};if(uI(nP().flowchart.htmlLabels)){const t=l.children[0],e=Qr(l);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}u.info("Text 2",a);const h=a.slice(1,a.length);let g=l.getBBox();const f=s.node().appendChild(QJ(h.join?h.join("<br/>"):h,e.labelStyle,!0,!0));if(uI(nP().flowchart.htmlLabels)){const t=f.children[0],e=Qr(f);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}const p=e.padding/2;return Qr(f).attr("transform","translate( "+(d.width>g.width?0:(g.width-d.width)/2)+", "+(g.height+p+5)+")"),Qr(l).attr("transform","translate( "+(d.width<g.width?0:-(g.width-d.width)/2)+", 0)"),d=s.node().getBBox(),s.attr("transform","translate("+-d.width/2+", "+(-d.height/2-p+3)+")"),i.attr("class","outer title-state").attr("x",-d.width/2-p).attr("y",-d.height/2-p).attr("width",d.width+e.padding).attr("height",d.height+e.padding),o.attr("class","divider").attr("x1",-d.width/2-p).attr("x2",d.width/2+p).attr("y1",-d.height/2-p+g.height+p).attr("y2",-d.height/2-p+g.height+p),JJ(e,i),e.intersect=function(t){return v0.rect(e,t)},r},choice:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=28,i=[{x:0,y:r/2},{x:r/2,y:0},{x:0,y:-r/2},{x:-r/2,y:0}];return n.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return v0.circle(e,14,t)},n},circle:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=XJ(t,e,void 0,!0),o=n.insert("circle",":first-child");return o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),u.info("Circle main"),JJ(e,o),e.intersect=function(t){return u.info("Circle intersect",e,r.width/2+i,t),v0.circle(e,r.width/2+i,t)},n},doublecircle:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=XJ(t,e,void 0,!0),o=5,s=n.insert("g",":first-child"),a=s.insert("circle"),c=s.insert("circle");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i+o).attr("width",r.width+e.padding+2*o).attr("height",r.height+e.padding+2*o),c.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",r.width/2+i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),u.info("DoubleCircle main"),JJ(e,a),e.intersect=function(t){return u.info("DoubleCircle intersect",e,r.width/2+i+o,t),v0.circle(e,r.width/2+i+o,t)},n},stadium:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.height+e.padding,o=r.width+i/4+e.padding,s=n.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-o/2).attr("y",-i/2).attr("width",o).attr("height",i);return JJ(e,s),e.intersect=function(t){return v0.rect(e,t)},n},hexagon:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=4,o=r.height+e.padding,s=o/i,a=r.width+2*s+e.padding,c=[{x:s,y:0},{x:a-s,y:0},{x:a,y:-o/2},{x:a-s,y:-o},{x:s,y:-o},{x:0,y:-o/2}],l=t0(n,a,o,c);return l.attr("style",e.style),JJ(e,l),e.intersect=function(t){return v0.polygon(e,c,t)},n},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:-o/2,y:0},{x:i,y:0},{x:i,y:-o},{x:-o/2,y:-o},{x:0,y:-o/2}];return t0(n,i,o,s).attr("style",e.style),e.width=i+o,e.height=o,e.intersect=function(t){return v0.polygon(e,s,t)},n},lean_right:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:-2*o/6,y:0},{x:i-o/6,y:0},{x:i+2*o/6,y:-o},{x:o/6,y:-o}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},lean_left:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:2*o/6,y:0},{x:i+o/6,y:0},{x:i-2*o/6,y:-o},{x:-o/6,y:-o}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:-2*o/6,y:0},{x:i+2*o/6,y:0},{x:i-o/6,y:-o},{x:o/6,y:-o}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},inv_trapezoid:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:o/6,y:0},{x:i-o/6,y:0},{x:i+2*o/6,y:-o},{x:-2*o/6,y:-o}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:0,y:0},{x:i+o/2,y:0},{x:i,y:-o/2},{x:i+o/2,y:-o},{x:0,y:-o}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},cylinder:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=i/2,s=o/(2.5+i/50),a=r.height+s+e.padding,c="M 0,"+s+" a "+o+","+s+" 0,0,0 "+i+" 0 a "+o+","+s+" 0,0,0 "+-i+" 0 l 0,"+a+" a "+o+","+s+" 0,0,0 "+i+" 0 l 0,"+-a,l=n.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",c).attr("transform","translate("+-i/2+","+-(a/2+s)+")");return JJ(e,l),e.intersect=function(t){const n=v0.rect(e,t),r=n.x-e.x;if(0!=o&&(Math.abs(r)<e.width/2||Math.abs(r)==e.width/2&&Math.abs(n.y-e.y)>e.height/2-s)){let i=s*s*(1-r*r/(o*o));0!=i&&(i=Math.sqrt(i)),i=s-i,t.y-e.y>0&&(i=-i),n.y+=i}return n},n},start:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),JJ(e,r),e.intersect=function(t){return v0.circle(e,7,t)},n},end:(t,e)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=n.insert("circle",":first-child"),i=n.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),JJ(e,i),e.intersect=function(t){return v0.circle(e,7,t)},n},note:(t,e)=>{const{shapeSvg:n,bbox:r,halfPadding:i}=XJ(t,e,"node "+e.classes,!0);u.info("Classes = ",e.classes);const o=n.insert("rect",":first-child");return o.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),JJ(e,o),e.intersect=function(t){return v0.rect(e,t)},n},subroutine:(t,e)=>{const{shapeSvg:n,bbox:r}=XJ(t,e,void 0,!0),i=r.width+e.padding,o=r.height+e.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-o},{x:0,y:-o},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-o},{x:-8,y:-o},{x:-8,y:0}],a=t0(n,i,o,s);return a.attr("style",e.style),JJ(e,a),e.intersect=function(t){return v0.polygon(e,s,t)},n},fork:C0,join:C0,class_box:(t,e)=>{const n=e.padding/2,r=4,i=8;let o;o=e.classes?"node "+e.classes:"node default";const s=t.insert("g").attr("class",o).attr("id",e.domId||e.id),a=s.insert("rect",":first-child"),c=s.insert("line"),l=s.insert("line");let d=0,u=r;const h=s.insert("g").attr("class","label");let g=0;const f=e.classData.annotations&&e.classData.annotations[0],p=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",m=h.node().appendChild(QJ(p,e.labelStyle,!0,!0));let b=m.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=m.children[0],e=Qr(m);b=t.getBoundingClientRect(),e.attr("width",b.width),e.attr("height",b.height)}e.classData.annotations[0]&&(u+=b.height+r,d+=b.width);let k=e.classData.id;void 0!==e.classData.type&&""!==e.classData.type&&(nP().flowchart.htmlLabels?k+="&lt;"+e.classData.type+"&gt;":k+="<"+e.classData.type+">");const w=h.node().appendChild(QJ(k,e.labelStyle,!0,!0));Qr(w).attr("class","classTitle");let y=w.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=w.children[0],e=Qr(w);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}u+=y.height+r,y.width>d&&(d=y.width);const _=[];e.classData.members.forEach((t=>{const n=OJ(t);let i=n.displayText;nP().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const o=h.node().appendChild(QJ(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=o.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=o.children[0],e=Qr(o);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>d&&(d=s.width),u+=s.height+r,_.push(o)})),u+=i;const v=[];if(e.classData.methods.forEach((t=>{const n=OJ(t);let i=n.displayText;nP().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const o=h.node().appendChild(QJ(i,n.cssStyle?n.cssStyle:e.labelStyle,!0,!0));let s=o.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=o.children[0],e=Qr(o);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>d&&(d=s.width),u+=s.height+r,v.push(o)})),u+=i,f){let t=(d-b.width)/2;Qr(m).attr("transform","translate( "+(-1*d/2+t)+", "+-1*u/2+")"),g=b.height+r}let A=(d-y.width)/2;return Qr(w).attr("transform","translate( "+(-1*d/2+A)+", "+(-1*u/2+g)+")"),g+=y.height+r,c.attr("class","divider").attr("x1",-d/2-n).attr("x2",d/2+n).attr("y1",-u/2-n+i+g).attr("y2",-u/2-n+i+g),g+=i,_.forEach((t=>{Qr(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+g+i/2)+")"),g+=y.height+r})),g+=i,l.attr("class","divider").attr("x1",-d/2-n).attr("x2",d/2+n).attr("y1",-u/2-n+i+g).attr("y2",-u/2-n+i+g),g+=i,v.forEach((t=>{Qr(t).attr("transform","translate( "+-d/2+", "+(-1*u/2+g)+")"),g+=y.height+r})),a.attr("class","outer title-state").attr("x",-d/2-n).attr("y",-u/2-n).attr("width",d+e.padding).attr("height",u+e.padding),JJ(e,a),e.intersect=function(t){return v0.rect(e,t)},s}};let E0={};const T0=(t,e,n)=>{let r,i;if(e.link){let o;"sandbox"===nP().securityLevel?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o),i=x0[e.shape](r,e,n)}else i=x0[e.shape](t,e,n),r=i;e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),E0[e.id]=r,e.haveCallback&&E0[e.id].attr("class",E0[e.id].attr("class")+" clickable")},S0=(t,e)=>{E0[e.id]=t},D0=()=>{E0={}},M0=t=>{const e=E0[t.id];u.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},I0={rect:(t,e)=>{u.trace("Creating subgraph rect for ",e.id,e);const n=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),o=i.node().appendChild(QJ(e.labelText,e.labelStyle,void 0,!0));let s=o.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=o.children[0],e=Qr(o);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}const a=0*e.padding,c=a/2,l=e.width<=s.width+a?s.width+a:e.width;e.width<=s.width+a?e.diff=(s.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,u.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-l/2).attr("y",e.y-e.height/2-c).attr("width",l).attr("height",e.height+a),i.attr("transform","translate("+(e.x-s.width/2)+", "+(e.y-e.height/2+e.padding/3)+")");const d=r.node().getBBox();return e.width=d.width,e.height=d.height,e.intersect=function(t){return _0(e,t)},n},roundedWithTitle:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=n.insert("g").attr("class","cluster-label"),o=n.append("rect"),s=i.node().appendChild(QJ(e.labelText,e.labelStyle,void 0,!0));let a=s.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=s.children[0],e=Qr(s);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a=s.getBBox();const c=0*e.padding,l=c/2,d=e.width<=a.width+e.padding?a.width+e.padding:e.width;e.width<=a.width+e.padding?e.diff=(a.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-d/2-l).attr("y",e.y-e.height/2-l).attr("width",d+c).attr("height",e.height+c),o.attr("class","inner").attr("x",e.x-d/2-l).attr("y",e.y-e.height/2-l+a.height-1).attr("width",d+c).attr("height",e.height+c-a.height-3),i.attr("transform","translate("+(e.x-a.width/2)+", "+(e.y-e.height/2-e.padding/3+(uI(nP().flowchart.htmlLabels)?5:3))+")");const u=r.node().getBBox();return e.height=u.height,e.intersect=function(t){return _0(e,t)},n},noteGroup:(t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,o=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2-o).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(t){return _0(e,t)},n},divider:(t,e)=>{const n=t.insert("g").attr("class",e.classes).attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,o=i/2;r.attr("class","divider").attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);const s=r.node().getBBox();return e.width=s.width,e.height=s.height,e.diff=-e.padding/2,e.intersect=function(t){return _0(e,t)},n}};let B0={};const L0=(t,e)=>{u.trace("Inserting cluster");const n=e.shape||"rect";B0[e.id]=I0[n](t,e)},N0=()=>{B0={}};let O0={},P0={};const R0=()=>{O0={},P0={}},z0=(t,e)=>{const n=QJ(e.label,e.labelStyle),r=t.insert("g").attr("class","edgeLabel"),i=r.insert("g").attr("class","label");i.node().appendChild(n);let o,s=n.getBBox();if(uI(nP().flowchart.htmlLabels)){const t=n.children[0],e=Qr(n);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}if(i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),O0[e.id]=r,e.width=s.width,e.height=s.height,e.startLabelLeft){const n=QJ(e.startLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");o=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),P0[e.id]||(P0[e.id]={}),P0[e.id].startLeft=r,F0(o,e.startLabelLeft)}if(e.startLabelRight){const n=QJ(e.startLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");o=r.node().appendChild(n),i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),P0[e.id]||(P0[e.id]={}),P0[e.id].startRight=r,F0(o,e.startLabelRight)}if(e.endLabelLeft){const n=QJ(e.endLabelLeft,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");o=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(n),P0[e.id]||(P0[e.id]={}),P0[e.id].endLeft=r,F0(o,e.endLabelLeft)}if(e.endLabelRight){const n=QJ(e.endLabelRight,e.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),i=r.insert("g").attr("class","inner");o=i.node().appendChild(n);const s=n.getBBox();i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(n),P0[e.id]||(P0[e.id]={}),P0[e.id].endRight=r,F0(o,e.endLabelRight)}};function F0(t,e){nP().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const j0=(t,e)=>{u.info("Moving label abc78 ",t.id,t.label,O0[t.id]);let n=e.updatedPath?e.updatedPath:e.originalPath;if(t.label){const e=O0[t.id];let r=t.x,i=t.y;if(n){const t=JN.calcLabelPosition(n);u.info("Moving label from (",r,",",i,") to (",t.x,",",t.y,") abc78")}e.attr("transform","translate("+r+", "+i+")")}if(t.startLabelLeft){const e=P0[t.id].startLeft;let r=t.x,i=t.y;if(n){const e=JN.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.startLabelRight){const e=P0[t.id].startRight;let r=t.x,i=t.y;if(n){const e=JN.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelLeft){const e=P0[t.id].endLeft;let r=t.x,i=t.y;if(n){const e=JN.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}if(t.endLabelRight){const e=P0[t.id].endRight;let r=t.x,i=t.y;if(n){const e=JN.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);r=e.x,i=e.y}e.attr("transform","translate("+r+", "+i+")")}},V0=(t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),o=Math.abs(e.y-r),s=t.width/2,a=t.height/2;return i>=s||o>=a},$0=(t,e,n)=>{u.warn(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(n)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,o=Math.abs(r-n.x),s=t.width/2;let a=n.x<e.x?s-o:s+o;const c=t.height/2,l=Math.abs(e.y-n.y),d=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*s>Math.abs(r-e.x)*c){let t=n.y<e.y?e.y-c-i:i-c-e.y;a=d*t/l;const r={x:n.x<e.x?n.x+a:n.x-d+a,y:n.y<e.y?n.y+l-t:n.y-l+t};return 0===a&&(r.x=e.x,r.y=e.y),0===d&&(r.x=e.x),0===l&&(r.y=e.y),u.warn(`abc89 topp/bott calc, Q ${l}, q ${t}, R ${d}, r ${a}`,r),r}{a=n.x<e.x?e.x-s-r:r-s-e.x;let t=l*a/d,i=n.x<e.x?n.x+d-a:n.x-d+a,o=n.y<e.y?n.y+t:n.y-t;return u.warn(`sides calc abc89, Q ${l}, q ${t}, R ${d}, r ${a}`,{_x:i,_y:o}),0===a&&(i=e.x,o=e.y),0===d&&(i=e.x),0===l&&(o=e.y),{x:i,y:o}}},H0=(t,e)=>{u.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach((t=>{if(u.info("abc88 checking point",t,e),V0(e,t)||i)u.warn("abc88 outside",t,r),r=t,i||n.push(t);else{const o=$0(e,r,t);u.warn("abc88 inside",t,r,o),u.warn("abc88 intersection",o);let s=!1;n.forEach((t=>{s=s||t.x===o.x&&t.y===o.y})),n.find((t=>t.x===o.x&&t.y===o.y))?u.warn("abc88 no intersect",o,n):n.push(o),i=!0}})),u.warn("abc88 returning points",n),n},U0=function(t,e,n,r,i,o){let s=n.points,a=!1;const c=o.node(e.v);var l=o.node(e.w);u.info("abc88 InsertEdge: ",n),l.intersect&&c.intersect&&(s=s.slice(1,n.points.length-1),s.unshift(c.intersect(s[0])),u.info("Last point",s[s.length-1],l,l.intersect(s[s.length-1])),s.push(l.intersect(s[s.length-1]))),n.toCluster&&(u.info("to cluster abc88",r[n.toCluster]),s=H0(n.points,r[n.toCluster].node),a=!0),n.fromCluster&&(u.info("from cluster abc88",r[n.fromCluster]),s=H0(s.reverse(),r[n.fromCluster].node).reverse(),a=!0);const d=s.filter((t=>!Number.isNaN(t.y)));let h;h=("graph"===i||"flowchart"===i)&&n.curve||PS;const g=OT().x((function(t){return t.x})).y((function(t){return t.y})).curve(h);let f;switch(n.thickness){case"normal":f="edge-thickness-normal";break;case"thick":case"invisible":f="edge-thickness-thick";break;default:f=""}switch(n.pattern){case"solid":f+=" edge-pattern-solid";break;case"dotted":f+=" edge-pattern-dotted";break;case"dashed":f+=" edge-pattern-dashed"}const p=t.append("path").attr("d",g(d)).attr("id",n.id).attr("class"," "+f+(n.classes?" "+n.classes:"")).attr("style",n.style);let m="";switch((nP().flowchart.arrowMarkerAbsolute||nP().state.arrowMarkerAbsolute)&&(m=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,m=m.replace(/\(/g,"\\("),m=m.replace(/\)/g,"\\)")),u.info("arrowTypeStart",n.arrowTypeStart),u.info("arrowTypeEnd",n.arrowTypeEnd),n.arrowTypeStart){case"arrow_cross":p.attr("marker-start","url("+m+"#"+i+"-crossStart)");break;case"arrow_point":p.attr("marker-start","url("+m+"#"+i+"-pointStart)");break;case"arrow_barb":p.attr("marker-start","url("+m+"#"+i+"-barbStart)");break;case"arrow_circle":p.attr("marker-start","url("+m+"#"+i+"-circleStart)");break;case"aggregation":p.attr("marker-start","url("+m+"#"+i+"-aggregationStart)");break;case"extension":p.attr("marker-start","url("+m+"#"+i+"-extensionStart)");break;case"composition":p.attr("marker-start","url("+m+"#"+i+"-compositionStart)");break;case"dependency":p.attr("marker-start","url("+m+"#"+i+"-dependencyStart)");break;case"lollipop":p.attr("marker-start","url("+m+"#"+i+"-lollipopStart)")}switch(n.arrowTypeEnd){case"arrow_cross":p.attr("marker-end","url("+m+"#"+i+"-crossEnd)");break;case"arrow_point":p.attr("marker-end","url("+m+"#"+i+"-pointEnd)");break;case"arrow_barb":p.attr("marker-end","url("+m+"#"+i+"-barbEnd)");break;case"arrow_circle":p.attr("marker-end","url("+m+"#"+i+"-circleEnd)");break;case"aggregation":p.attr("marker-end","url("+m+"#"+i+"-aggregationEnd)");break;case"extension":p.attr("marker-end","url("+m+"#"+i+"-extensionEnd)");break;case"composition":p.attr("marker-end","url("+m+"#"+i+"-compositionEnd)");break;case"dependency":p.attr("marker-end","url("+m+"#"+i+"-dependencyEnd)");break;case"lollipop":p.attr("marker-end","url("+m+"#"+i+"-lollipopEnd)")}let b={};return a&&(b.updatedPath=s),b.originalPath=n.points,b},W0=(t,e,n,r)=>{u.info("Graph in recursive render: XXX",lX.json.write(e),r);const i=e.graph().rankdir;u.trace("Dir in recursive render - dir:",i);const o=t.insert("g").attr("class","root");e.nodes()?u.info("Recursive render XXX",e.nodes()):u.info("No nodes found for",e),e.edges().length>0&&u.trace("Recursive edges",e.edge(e.edges()[0]));const s=o.insert("g").attr("class","clusters"),a=o.insert("g").attr("class","edgePaths"),c=o.insert("g").attr("class","edgeLabels"),l=o.insert("g").attr("class","nodes");e.nodes().forEach((function(t){const o=e.node(t);if(void 0!==r){const n=JSON.parse(JSON.stringify(r.clusterData));u.info("Setting data for cluster XXX (",t,") ",n,r),e.setNode(r.id,n),e.parent(t)||(u.trace("Setting parent",t,r.id),e.setParent(t,r.id,n))}if(u.info("(Insert) Node XXX"+t+": "+JSON.stringify(e.node(t))),o&&o.clusterNode){u.info("Cluster identified",t,o.width,e.node(t));const r=W0(l,o.graph,n,e.node(t)),i=r.elem;JJ(o,i),o.diff=r.diff||0,u.info("Node bounds (abc123)",t,o,o.width,o.x,o.y),S0(i,o),u.warn("Recursive render complete ",i,o)}else e.children(t).length>0?(u.info("Cluster - the non recursive path XXX",t,o.id,o,e),u.info(l0(o.id,e)),e0[o.id]={id:l0(o.id,e),node:o}):(u.info("Node - the non recursive path",t,o.id,o),T0(l,e.node(t),i))})),e.edges().forEach((function(t){const n=e.edge(t.v,t.w,t.name);u.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),u.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(e.edge(t))),u.info("Fix",e0,"ids:",t.v,t.w,"Translateing: ",e0[t.v],e0[t.w]),z0(c,n)})),e.edges().forEach((function(t){u.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))})),u.info("#############################################"),u.info("###                Layout                 ###"),u.info("#############################################"),u.info(e),BJ.layout(e),u.info("Graph after layout:",lX.json.write(e));let d=0;return f0(e).forEach((function(t){const n=e.node(t);u.info("Position "+t+": "+JSON.stringify(e.node(t))),u.info("Position "+t+": ("+n.x,","+n.y,") width: ",n.width," height: ",n.height),n&&n.clusterNode?M0(n):e.children(t).length>0?(L0(s,n),e0[n.id].node=n):M0(n)})),e.edges().forEach((function(t){const r=e.edge(t);u.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(r),r);const i=U0(a,t,r,e0,n,e);j0(r,i)})),e.nodes().forEach((function(t){const n=e.node(t);u.info(t,n.type,n.diff),"group"===n.type&&(d=n.diff)})),{elem:o,diff:d}},q0=(t,e,n,r,i)=>{YJ(t,n,r,i),D0(),R0(),N0(),i0(),u.warn("Graph at first:",lX.json.write(e)),u0(e),u.warn("Graph after:",lX.json.write(e)),W0(t,e,r)},Y0=t=>gI.sanitizeText(t,nP()),G0=function(t,e,n,r){const i=Object.keys(t);u.info("keys:",i),u.info(t),i.forEach((function(n){const i=t[n];let o="";i.cssClasses.length>0&&(o=o+" "+i.cssClasses.join(" "));const s={labelStyle:""};let a=void 0!==i.text?i.text:i.id,c=0,l="";i.type,l="class_box",e.setNode(i.id,{labelStyle:s.labelStyle,shape:l,labelText:Y0(a),classData:i,rx:c,ry:c,class:o,style:s.style,id:i.id,domId:i.domId,tooltip:r.db.getTooltip(i.id)||"",haveCallback:i.haveCallback,link:i.link,width:"group"===i.type?500:void 0,type:i.type,padding:nP().flowchart.padding}),u.info("setNode",{labelStyle:s.labelStyle,shape:l,labelText:a,rx:c,ry:c,class:o,style:s.style,id:i.id,width:"group"===i.type?500:void 0,type:i.type,padding:nP().flowchart.padding})}))},Z0=function(t,e){const n=nP().flowchart;let r=0;t.forEach((function(i){r++;const o={classes:"relation"};o.pattern=1==i.relation.lineType?"dashed":"solid",o.id="id"+r,"arrow_open"===i.type?o.arrowhead="none":o.arrowhead="normal",u.info(o,i),o.startLabelRight="none"===i.relationTitle1?"":i.relationTitle1,o.endLabelLeft="none"===i.relationTitle2?"":i.relationTitle2,o.arrowTypeStart=K0(i.relation.type1),o.arrowTypeEnd=K0(i.relation.type2);let s="",a="";if(void 0!==i.style){const t=PN(i.style);s=t.style,a=t.labelStyle}else s="fill:none";o.style=s,o.labelStyle=a,void 0!==i.interpolate?o.curve=SN(i.interpolate,BT):void 0!==t.defaultInterpolate?o.curve=SN(t.defaultInterpolate,BT):o.curve=SN(n.curve,BT),i.text=i.title,void 0===i.text?void 0!==i.style&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c",nP().flowchart.htmlLabels?(o.labelType="html",o.label='<span class="edgeLabel">'+i.text+"</span>"):(o.labelType="text",o.label=i.text.replace(gI.lineBreakRegex,"\n"),void 0===i.style&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none"),o.labelStyle=o.labelStyle.replace("color:","fill:"))),e.setEdge(i.id1,i.id2,o,r)}))};function K0(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const Q0={setConf:function(t){Object.keys(t).forEach((function(e){t[e]}))},draw:function(t,e,n,r){u.info("Drawing class - ",e);const i=nP().flowchart,o=nP().securityLevel;u.info("config:",i);const s=i.nodeSpacing||50,a=i.rankSpacing||50,c=new lX.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r.db.getDirection(),nodesep:s,ranksep:a,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),l=r.db.getClasses(),d=r.db.getRelations();let h;u.info(d),G0(l,c,e,r),Z0(d,c),"sandbox"===o&&(h=Qr("#i"+e));const g=Qr("sandbox"===o?h.nodes()[0].contentDocument.body:"body"),f=g.select(`[id="${e}"]`),p=g.select("#"+e+" g");if(q0(p,c,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),gP(c,f,i.diagramPadding,i.useMaxWidth),!i.htmlLabels){const t="sandbox"===o?h.nodes()[0].contentDocument:document,n=t.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let e=0;e<n.length;e++){const r=n[e],i=r.getBBox(),o=t.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("rx",0),o.setAttribute("ry",0),o.setAttribute("width",i.width),o.setAttribute("height",i.height),r.insertBefore(o,r.firstChild)}}yR(r.db,f,e)}};var X0=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,5],r=[6,9,11,23,25,27,29,30,31,49],i=[1,17],o=[1,18],s=[1,19],a=[1,20],c=[1,21],l=[1,22],d=[1,25],u=[1,30],h=[1,31],g=[1,32],f=[1,33],p=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],m=[1,45],b=[30,31,46,47],k=[4,6,9,11,23,25,27,29,30,31,49],w=[42,43,44,45],y=[22,37],_=[1,64],v={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 1:break;case 3:case 7:case 8:this.$=[];break;case 4:o[a-1].push(o[a]),this.$=o[a-1];break;case 5:case 6:case 20:case 41:case 28:case 29:case 30:this.$=o[a];break;case 12:r.addEntity(o[a-4]),r.addEntity(o[a-2]),r.addRelationship(o[a-4],o[a],o[a-2],o[a-3]);break;case 13:r.addEntity(o[a-3]),r.addAttributes(o[a-3],o[a-1]);break;case 14:r.addEntity(o[a-2]);break;case 15:r.addEntity(o[a]);break;case 16:case 17:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 21:case 39:case 40:case 31:this.$=o[a].replace(/"/g,"");break;case 22:this.$=[o[a]];break;case 23:o[a].push(o[a-1]),this.$=o[a];break;case 24:this.$={attributeType:o[a-1],attributeName:o[a]};break;case 25:this.$={attributeType:o[a-2],attributeName:o[a-1],attributeKeyType:o[a]};break;case 26:this.$={attributeType:o[a-2],attributeName:o[a-1],attributeComment:o[a]};break;case 27:this.$={attributeType:o[a-3],attributeName:o[a-2],attributeKeyType:o[a-1],attributeComment:o[a]};break;case 32:this.$={cardA:o[a],relType:o[a-1],cardB:o[a-2]};break;case 33:this.$=r.Cardinality.ZERO_OR_ONE;break;case 34:this.$=r.Cardinality.ZERO_OR_MORE;break;case 35:this.$=r.Cardinality.ONE_OR_MORE;break;case 36:this.$=r.Cardinality.ONLY_ONE;break;case 37:this.$=r.Identification.NON_IDENTIFYING;break;case 38:this.$=r.Identification.IDENTIFYING;break;case 42:r.parseDirective("%%{","open_directive");break;case 43:r.parseDirective(o[a],"type_directive");break;case 44:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 45:r.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:e,7:3,12:4,49:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,49:n},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:i,25:o,27:s,29:a,30:c,31:l,49:n},{1:[2,2]},{14:23,15:[1,24],52:d},t([15,52],[2,43]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:15,10:26,12:4,17:16,23:i,25:o,27:s,29:a,30:c,31:l,49:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),t(r,[2,15],{18:27,40:29,20:[1,28],42:u,43:h,44:g,45:f}),{24:[1,34]},{26:[1,35]},{28:[1,36]},t(r,[2,19]),t(p,[2,20]),t(p,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},t(r,[2,5]),{17:40,30:c,31:l},{21:41,22:[1,42],32:43,33:44,37:m},{41:46,46:[1,47],47:[1,48]},t(b,[2,33]),t(b,[2,34]),t(b,[2,35]),t(b,[2,36]),t(r,[2,16]),t(r,[2,17]),t(r,[2,18]),t(k,[2,9]),{14:49,52:d},{52:[2,44]},{15:[1,50]},{22:[1,51]},t(r,[2,14]),{21:52,22:[2,22],32:43,33:44,37:m},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:u,43:h,44:g,45:f},t(w,[2,37]),t(w,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},t(r,[2,13]),{22:[2,23]},t(y,[2,24],{35:61,36:62,38:[1,63],39:_}),t([22,37,38,39],[2,29]),t([30,31],[2,32]),t(k,[2,10]),t(r,[2,12]),t(r,[2,39]),t(r,[2,40]),t(r,[2,41]),t(y,[2,25],{36:65,39:_}),t(y,[2,26]),t([22,37,39],[2,30]),t(y,[2,31]),t(y,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},A={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:case 13:case 15:case 21:case 26:break;case 14:return 11;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 22:return 38;case 23:case 24:return 37;case 25:return 39;case 27:return this.popState(),22;case 28:case 41:return e.yytext[0];case 29:case 33:return 42;case 30:case 34:return 43;case 31:case 35:return 44;case 32:return 45;case 36:case 38:case 39:return 46;case 37:return 47;case 40:return 30;case 42:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\|o\b)/i,/^(?:\}o\b)/i,/^(?:\}\|)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!0}}};function C(){this.yy={}}return v.lexer=A,C.prototype=v,v.Parser=C,new C}();X0.parser=X0;const J0=t=>null!==t.match(/^\s*erDiagram/);let t1={},e1=[];const n1=function(t){return void 0===t1[t]&&(t1[t]={attributes:[]},u.info("Added new entity :",t)),t1[t]},r1=function(t,e){let n,r=n1(t);for(n=e.length-1;n>=0;n--)r.attributes.push(e[n]),u.debug("Added attribute ",e[n].attributeName)},i1={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().er,addEntity:n1,addAttributes:r1,getEntities:()=>t1,addRelationship:function(t,e,n,r){let i={entityA:t,roleA:e,entityB:n,relSpec:r};e1.push(i),u.debug("Added new relationship :",i)},getRelationships:()=>e1,clear:function(){t1={},e1=[],UP()},setAccTitle:WP,getAccTitle:qP,setAccDescription:YP,getAccDescription:GP},o1={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},s1={ERMarkers:o1,insertMarkers:function(t,e){let n;t.append("defs").append("marker").attr("id",o1.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",o1.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",o1.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),n=t.append("defs").append("marker").attr("id",o1.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",o1.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",o1.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),n=t.append("defs").append("marker").attr("id",o1.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),n=t.append("defs").append("marker").attr("id",o1.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),n.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let a1;const c1=new Uint8Array(16);function l1(){if(!a1&&(a1="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a1(c1)}const d1=[];for(let t=0;t<256;++t)d1.push((t+256).toString(16).slice(1));function u1(t,e=0){return(d1[t[e+0]]+d1[t[e+1]]+d1[t[e+2]]+d1[t[e+3]]+"-"+d1[t[e+4]]+d1[t[e+5]]+"-"+d1[t[e+6]]+d1[t[e+7]]+"-"+d1[t[e+8]]+d1[t[e+9]]+"-"+d1[t[e+10]]+d1[t[e+11]]+d1[t[e+12]]+d1[t[e+13]]+d1[t[e+14]]+d1[t[e+15]]).toLowerCase()}const h1={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function g1(t,e,n){if(h1.randomUUID&&!e&&!t)return h1.randomUUID();const r=(t=t||{}).random||(t.rng||l1)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return u1(r)}const f1=/[^A-Za-z0-9]([\W])*/g;let p1={},m1=new Map;const b1=(t,e,n)=>{const r=p1.entityPadding/3,i=p1.entityPadding/3,o=.85*p1.fontSize,s=e.node().getBBox(),a=[];let c=!1,l=!1,d=0,u=0,h=0,g=0,f=s.height+2*r,p=1;n.forEach((t=>{void 0!==t.attributeKeyType&&(c=!0),void 0!==t.attributeComment&&(l=!0)})),n.forEach((n=>{const i=`${e.node().id}-attr-${p}`;let s=0;const m=hI(n.attributeType),b=t.append("text").attr("class","er entityLabel").attr("id",`${i}-type`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+nP().fontFamily+"; font-size: "+o+"px").text(m),k=t.append("text").attr("class","er entityLabel").attr("id",`${i}-name`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+nP().fontFamily+"; font-size: "+o+"px").text(n.attributeName),w={};w.tn=b,w.nn=k;const y=b.node().getBBox(),_=k.node().getBBox();if(d=Math.max(d,y.width),u=Math.max(u,_.width),s=Math.max(y.height,_.height),c){const e=t.append("text").attr("class","er entityLabel").attr("id",`${i}-key`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+nP().fontFamily+"; font-size: "+o+"px").text(n.attributeKeyType||"");w.kn=e;const r=e.node().getBBox();h=Math.max(h,r.width),s=Math.max(s,r.height)}if(l){const e=t.append("text").attr("class","er entityLabel").attr("id",`${i}-comment`).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","left").attr("style","font-family: "+nP().fontFamily+"; font-size: "+o+"px").text(n.attributeComment||"");w.cn=e;const r=e.node().getBBox();g=Math.max(g,r.width),s=Math.max(s,r.height)}w.height=s,a.push(w),f+=s+2*r,p+=1}));let m=4;c&&(m+=2),l&&(m+=2);const b=d+u+h+g,k={width:Math.max(p1.minEntityWidth,Math.max(s.width+2*p1.entityPadding,b+i*m)),height:n.length>0?f:Math.max(p1.minEntityHeight,s.height+2*p1.entityPadding)};if(n.length>0){const n=Math.max(0,(k.width-b-i*m)/(m/2));e.attr("transform","translate("+k.width/2+","+(r+s.height/2)+")");let o=s.height+2*r,f="attributeBoxOdd";a.forEach((e=>{const s=o+r+e.height/2;e.tn.attr("transform","translate("+i+","+s+")");const a=t.insert("rect","#"+e.tn.node().id).attr("class",`er ${f}`).attr("fill",p1.fill).attr("fill-opacity","100%").attr("stroke",p1.stroke).attr("x",0).attr("y",o).attr("width",d+2*i+n).attr("height",e.height+2*r),p=parseFloat(a.attr("x"))+parseFloat(a.attr("width"));e.nn.attr("transform","translate("+(p+i)+","+s+")");const m=t.insert("rect","#"+e.nn.node().id).attr("class",`er ${f}`).attr("fill",p1.fill).attr("fill-opacity","100%").attr("stroke",p1.stroke).attr("x",p).attr("y",o).attr("width",u+2*i+n).attr("height",e.height+2*r);let b=parseFloat(m.attr("x"))+parseFloat(m.attr("width"));if(c){e.kn.attr("transform","translate("+(b+i)+","+s+")");const a=t.insert("rect","#"+e.kn.node().id).attr("class",`er ${f}`).attr("fill",p1.fill).attr("fill-opacity","100%").attr("stroke",p1.stroke).attr("x",b).attr("y",o).attr("width",h+2*i+n).attr("height",e.height+2*r);b=parseFloat(a.attr("x"))+parseFloat(a.attr("width"))}l&&(e.cn.attr("transform","translate("+(b+i)+","+s+")"),t.insert("rect","#"+e.cn.node().id).attr("class",`er ${f}`).attr("fill",p1.fill).attr("fill-opacity","100%").attr("stroke",p1.stroke).attr("x",b).attr("y",o).attr("width",g+2*i+n).attr("height",e.height+2*r)),o+=e.height+2*r,f="attributeBoxOdd"===f?"attributeBoxEven":"attributeBoxOdd"}))}else k.height=Math.max(p1.minEntityHeight,f),e.attr("transform","translate("+k.width/2+","+k.height/2+")");return k},k1=function(t,e,n){let r;return Object.keys(e).forEach((function(i){const o=C1(i,"entity");m1.set(i,o);const s=t.append("g").attr("id",o);r=void 0===r?o:r;const a="text-"+o,c=s.append("text").attr("class","er entityLabel").attr("id",a).attr("x",0).attr("y",0).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("style","font-family: "+nP().fontFamily+"; font-size: "+p1.fontSize+"px").text(i),{width:l,height:d}=b1(s,c,e[i].attributes),u=s.insert("rect","#"+a).attr("class","er entityBox").attr("fill",p1.fill).attr("fill-opacity","100%").attr("stroke",p1.stroke).attr("x",0).attr("y",0).attr("width",l).attr("height",d).node().getBBox();n.setNode(o,{width:u.width,height:u.height,shape:"rect",id:o})})),r},w1=function(t,e){e.nodes().forEach((function(n){void 0!==n&&void 0!==e.node(n)&&t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )")}))},y1=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},_1=function(t,e){return t.forEach((function(t){e.setEdge(m1.get(t.entityA),m1.get(t.entityB),{relationship:t},y1(t))})),t};let v1=0;const A1=function(t,e,n,r,i){v1++;const o=n.edge(m1.get(e.entityA),m1.get(e.entityB),y1(e)),s=OT().x((function(t){return t.x})).y((function(t){return t.y})).curve(PS),a=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",s(o.points)).attr("stroke",p1.stroke).attr("fill","none");e.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&a.attr("stroke-dasharray","8,8");let c="";switch(p1.arrowMarkerAbsolute&&(c=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,c=c.replace(/\(/g,"\\("),c=c.replace(/\)/g,"\\)")),e.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:a.attr("marker-end","url("+c+"#"+s1.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:a.attr("marker-end","url("+c+"#"+s1.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:a.attr("marker-end","url("+c+"#"+s1.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:a.attr("marker-end","url("+c+"#"+s1.ERMarkers.ONLY_ONE_END+")")}switch(e.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:a.attr("marker-start","url("+c+"#"+s1.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:a.attr("marker-start","url("+c+"#"+s1.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:a.attr("marker-start","url("+c+"#"+s1.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:a.attr("marker-start","url("+c+"#"+s1.ERMarkers.ONLY_ONE_START+")")}const l=a.node().getTotalLength(),d=a.node().getPointAtLength(.5*l),u="rel"+v1,h=t.append("text").attr("class","er relationshipLabel").attr("id",u).attr("x",d.x).attr("y",d.y).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("style","font-family: "+nP().fontFamily+"; font-size: "+p1.fontSize+"px").text(e.roleA).node().getBBox();t.insert("rect","#"+u).attr("class","er relationshipLabelBox").attr("x",d.x-h.width/2).attr("y",d.y-h.height/2).attr("width",h.width).attr("height",h.height).attr("fill","white").attr("fill-opacity","85%")};function C1(t="",e=""){const n=t.replace(f1,"");return`${x1(e)}${x1(n)}${g1()}`}function x1(t=""){return t.length>0?`${t}-`:""}const E1={setConf:function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)p1[e[n]]=t[e[n]]},draw:function(t,e,n,r){p1=nP().er,u.info("Drawing ER diagram");const i=nP().securityLevel;let o;"sandbox"===i&&(o=Qr("#i"+e));const s=Qr("sandbox"===i?o.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);let a;s1.insertMarkers(s,p1),a=new lX.Graph({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:p1.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel((function(){return{}}));const c=k1(s,r.db.getEntities(),a),l=_1(r.db.getRelationships(),a);BJ.layout(a),w1(s,a),l.forEach((function(t){A1(s,t,a,c,r)}));const d=p1.diagramPadding,h=s.node().getBBox(),g=h.width+2*d,f=h.height+2*d;hP(s,f,g,p1.useMaxWidth),s.attr("viewBox",`${h.x-d} ${h.y-d} ${g} ${f}`),yR(r.db,s,e)}};var T1=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,9],n=[1,7],r=[1,6],i=[1,8],o=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],s=[2,10],a=[1,20],c=[1,21],l=[1,22],d=[1,23],u=[1,30],h=[1,32],g=[1,33],f=[1,34],p=[1,62],m=[1,48],b=[1,52],k=[1,36],w=[1,37],y=[1,38],_=[1,39],v=[1,40],A=[1,56],C=[1,63],x=[1,51],E=[1,53],T=[1,55],S=[1,59],D=[1,60],M=[1,41],I=[1,42],B=[1,43],L=[1,44],N=[1,61],O=[1,50],P=[1,54],R=[1,57],z=[1,58],F=[1,49],j=[1,66],V=[1,71],$=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],H=[1,75],U=[1,74],W=[1,76],q=[20,21,23,81,82],Y=[1,99],G=[1,104],Z=[1,107],K=[1,108],Q=[1,101],X=[1,106],J=[1,109],tt=[1,102],et=[1,114],nt=[1,113],rt=[1,103],it=[1,105],ot=[1,110],st=[1,111],at=[1,112],ct=[1,115],lt=[20,21,22,23,81,82],dt=[20,21,22,23,53,81,82],ut=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],ht=[20,21,23],gt=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],ft=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],pt=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],mt=[1,149],bt=[1,157],kt=[1,158],wt=[1,159],yt=[1,160],_t=[1,144],vt=[1,145],At=[1,141],Ct=[1,152],xt=[1,153],Et=[1,154],Tt=[1,155],St=[1,156],Dt=[1,161],Mt=[1,162],It=[1,147],Bt=[1,150],Lt=[1,146],Nt=[1,143],Ot=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Pt=[1,165],Rt=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],zt=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],Ft=[12,21,22,24],jt=[22,106],Vt=[1,250],$t=[1,245],Ht=[1,246],Ut=[1,254],Wt=[1,251],qt=[1,248],Yt=[1,247],Gt=[1,249],Zt=[1,252],Kt=[1,253],Qt=[1,255],Xt=[1,273],Jt=[20,21,23,106],te=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],ee={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 5:r.parseDirective("%%{","open_directive");break;case 6:r.parseDirective(o[a],"type_directive");break;case 7:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 8:r.parseDirective("}%%","close_directive","flowchart");break;case 10:case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 11:(!Array.isArray(o[a])||o[a].length>0)&&o[a-1].push(o[a]),this.$=o[a-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:case 78:case 150:this.$=o[a];break;case 19:r.setDirection("TB"),this.$="TB";break;case 20:r.setDirection(o[a-1]),this.$=o[a-1];break;case 35:this.$=o[a-1].nodes;break;case 41:this.$=r.addSubGraph(o[a-6],o[a-1],o[a-4]);break;case 42:this.$=r.addSubGraph(o[a-3],o[a-1],o[a-3]);break;case 43:this.$=r.addSubGraph(void 0,o[a-1],void 0);break;case 45:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 46:case 47:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 51:r.addLink(o[a-2].stmt,o[a],o[a-1]),this.$={stmt:o[a],nodes:o[a].concat(o[a-2].nodes)};break;case 52:r.addLink(o[a-3].stmt,o[a-1],o[a-2]),this.$={stmt:o[a-1],nodes:o[a-1].concat(o[a-3].nodes)};break;case 53:this.$={stmt:o[a-1],nodes:o[a-1]};break;case 54:this.$={stmt:o[a],nodes:o[a]};break;case 55:case 123:case 125:this.$=[o[a]];break;case 56:this.$=o[a-4].concat(o[a]);break;case 57:this.$=[o[a-2]],r.setClass(o[a-2],o[a]);break;case 58:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"square");break;case 59:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"doublecircle");break;case 60:this.$=o[a-5],r.addVertex(o[a-5],o[a-2],"circle");break;case 61:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"ellipse");break;case 62:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"stadium");break;case 63:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"subroutine");break;case 64:this.$=o[a-7],r.addVertex(o[a-7],o[a-1],"rect",void 0,void 0,void 0,Object.fromEntries([[o[a-5],o[a-3]]]));break;case 65:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"cylinder");break;case 66:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"round");break;case 67:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"diamond");break;case 68:this.$=o[a-5],r.addVertex(o[a-5],o[a-2],"hexagon");break;case 69:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"odd");break;case 70:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"trapezoid");break;case 71:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"inv_trapezoid");break;case 72:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"lean_right");break;case 73:this.$=o[a-3],r.addVertex(o[a-3],o[a-1],"lean_left");break;case 74:this.$=o[a],r.addVertex(o[a]);break;case 75:o[a-1].text=o[a],this.$=o[a-1];break;case 76:case 77:o[a-2].text=o[a-1],this.$=o[a-2];break;case 79:var c=r.destructLink(o[a],o[a-2]);this.$={type:c.type,stroke:c.stroke,length:c.length,text:o[a-1]};break;case 80:c=r.destructLink(o[a]),this.$={type:c.type,stroke:c.stroke,length:c.length};break;case 81:this.$=o[a-1];break;case 83:case 97:case 153:case 151:this.$=o[a-1]+""+o[a];break;case 98:case 99:this.$=o[a-4],r.addClass(o[a-2],o[a]);break;case 100:this.$=o[a-4],r.setClass(o[a-2],o[a]);break;case 101:case 109:this.$=o[a-1],r.setClickEvent(o[a-1],o[a]);break;case 102:case 110:this.$=o[a-3],r.setClickEvent(o[a-3],o[a-2]),r.setTooltip(o[a-3],o[a]);break;case 103:this.$=o[a-2],r.setClickEvent(o[a-2],o[a-1],o[a]);break;case 104:this.$=o[a-4],r.setClickEvent(o[a-4],o[a-3],o[a-2]),r.setTooltip(o[a-4],o[a]);break;case 105:case 111:this.$=o[a-1],r.setLink(o[a-1],o[a]);break;case 106:case 112:this.$=o[a-3],r.setLink(o[a-3],o[a-2]),r.setTooltip(o[a-3],o[a]);break;case 107:case 113:this.$=o[a-3],r.setLink(o[a-3],o[a-2],o[a]);break;case 108:case 114:this.$=o[a-5],r.setLink(o[a-5],o[a-4],o[a]),r.setTooltip(o[a-5],o[a-2]);break;case 115:this.$=o[a-4],r.addVertex(o[a-2],void 0,void 0,o[a]);break;case 116:case 118:this.$=o[a-4],r.updateLink(o[a-2],o[a]);break;case 117:this.$=o[a-4],r.updateLink([o[a-2]],o[a]);break;case 119:this.$=o[a-8],r.updateLinkInterpolate([o[a-6]],o[a-2]),r.updateLink([o[a-6]],o[a]);break;case 120:this.$=o[a-8],r.updateLinkInterpolate(o[a-6],o[a-2]),r.updateLink(o[a-6],o[a]);break;case 121:this.$=o[a-6],r.updateLinkInterpolate([o[a-4]],o[a]);break;case 122:this.$=o[a-6],r.updateLinkInterpolate(o[a-4],o[a]);break;case 124:case 126:o[a-2].push(o[a]),this.$=o[a-2];break;case 128:this.$=o[a-1]+o[a];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:e,16:4,21:n,22:r,24:i},t(o,s,{17:11}),{7:12,13:[1,13]},{16:14,21:n,22:r,24:i},{16:15,21:n,22:r,24:i},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:a,21:c,22:l,23:d,32:24,33:25,34:26,35:27,36:28,37:29,38:u,43:31,44:h,46:g,48:f,50:35,51:45,52:p,54:46,66:m,67:b,86:k,87:w,88:y,89:_,90:v,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,118:M,119:I,120:B,121:L,122:N,123:O,124:P,125:R,126:z,127:F},{8:64,10:[1,65],15:j},t([10,15],[2,6]),t(o,[2,17]),t(o,[2,18]),t(o,[2,19]),{20:[1,68],21:[1,69],22:V,27:67,30:70},t($,[2,11]),t($,[2,12]),t($,[2,13]),t($,[2,14]),t($,[2,15]),t($,[2,16]),{9:72,20:H,21:U,23:W,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:H,21:U,23:W},{9:81,20:H,21:U,23:W},{9:82,20:H,21:U,23:W},{9:83,20:H,21:U,23:W},{9:84,20:H,21:U,23:W},{9:86,20:H,21:U,22:[1,85],23:W},t($,[2,44]),{45:[1,87]},{47:[1,88]},t($,[2,47]),t(q,[2,54],{30:89,22:V}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:Y,52:G,66:Z,67:K,84:[1,97],91:Q,97:96,98:[1,94],100:[1,95],105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},t($,[2,158]),t($,[2,159]),t($,[2,160]),t($,[2,161]),t(lt,[2,55],{53:[1,116]}),t(dt,[2,74],{116:129,40:[1,117],52:p,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:m,67:b,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:A,95:C,105:x,106:E,109:T,111:S,112:D,122:N,123:O,124:P,125:R,126:z,127:F}),t(ut,[2,150]),t(ut,[2,175]),t(ut,[2,176]),t(ut,[2,177]),t(ut,[2,178]),t(ut,[2,179]),t(ut,[2,180]),t(ut,[2,181]),t(ut,[2,182]),t(ut,[2,183]),t(ut,[2,184]),t(ut,[2,185]),t(ut,[2,186]),t(ut,[2,187]),t(ut,[2,188]),t(ut,[2,189]),t(ut,[2,190]),{9:130,20:H,21:U,23:W},{11:131,14:[1,132]},t(ht,[2,8]),t(o,[2,20]),t(o,[2,26]),t(o,[2,27]),{21:[1,133]},t(gt,[2,34],{30:134,22:V}),t($,[2,35]),{50:135,51:45,52:p,54:46,66:m,67:b,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,122:N,123:O,124:P,125:R,126:z,127:F},t(ft,[2,48]),t(ft,[2,49]),t(ft,[2,50]),t(pt,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:mt,24:bt,26:kt,38:wt,39:139,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),t($,[2,36]),t($,[2,37]),t($,[2,38]),t($,[2,39]),t($,[2,40]),{22:mt,24:bt,26:kt,38:wt,39:163,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(Ot,s,{17:164}),t($,[2,45]),t($,[2,46]),t(q,[2,53],{52:Pt}),{26:Y,52:G,66:Z,67:K,91:Q,97:166,102:[1,167],105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},{95:[1,168],103:169,105:[1,170]},{26:Y,52:G,66:Z,67:K,91:Q,95:[1,171],97:172,105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},{26:Y,52:G,66:Z,67:K,91:Q,97:173,105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(ht,[2,101],{22:[1,174],99:[1,175]}),t(ht,[2,105],{22:[1,176]}),t(ht,[2,109],{115:100,117:178,22:[1,177],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,122:rt,123:it,124:ot,125:st,126:at,127:ct}),t(ht,[2,111],{22:[1,179]}),t(Rt,[2,152]),t(Rt,[2,154]),t(Rt,[2,155]),t(Rt,[2,156]),t(Rt,[2,157]),t(zt,[2,162]),t(zt,[2,163]),t(zt,[2,164]),t(zt,[2,165]),t(zt,[2,166]),t(zt,[2,167]),t(zt,[2,168]),t(zt,[2,169]),t(zt,[2,170]),t(zt,[2,171]),t(zt,[2,172]),t(zt,[2,173]),t(zt,[2,174]),{52:p,54:180,66:m,67:b,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,122:N,123:O,124:P,125:R,126:z,127:F},{22:mt,24:bt,26:kt,38:wt,39:181,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:182,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:184,42:yt,52:G,57:[1,183],66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:185,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:186,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:187,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{66:[1,188]},{22:mt,24:bt,26:kt,38:wt,39:189,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:190,42:yt,52:G,66:Z,67:K,71:[1,191],73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:192,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:193,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:194,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(ut,[2,151]),t(Ft,[2,3]),{8:195,15:j},{15:[2,7]},t(o,[2,28]),t(gt,[2,33]),t(q,[2,51],{30:196,22:V}),t(pt,[2,75],{22:[1,197]}),{22:[1,198]},{22:mt,24:bt,26:kt,38:wt,39:199,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,73:_t,81:vt,82:[1,200],83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(zt,[2,82]),t(zt,[2,84]),t(zt,[2,140]),t(zt,[2,141]),t(zt,[2,142]),t(zt,[2,143]),t(zt,[2,144]),t(zt,[2,145]),t(zt,[2,146]),t(zt,[2,147]),t(zt,[2,148]),t(zt,[2,149]),t(zt,[2,85]),t(zt,[2,86]),t(zt,[2,87]),t(zt,[2,88]),t(zt,[2,89]),t(zt,[2,90]),t(zt,[2,91]),t(zt,[2,92]),t(zt,[2,93]),t(zt,[2,94]),t(zt,[2,95]),{9:203,20:H,21:U,22:mt,23:W,24:bt,26:kt,38:wt,40:[1,202],42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{18:18,19:19,20:a,21:c,22:l,23:d,32:24,33:25,34:26,35:27,36:28,37:29,38:u,42:[1,204],43:31,44:h,46:g,48:f,50:35,51:45,52:p,54:46,66:m,67:b,86:k,87:w,88:y,89:_,90:v,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,118:M,119:I,120:B,121:L,122:N,123:O,124:P,125:R,126:z,127:F},{22:V,30:205},{22:[1,206],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},t(jt,[2,123]),{22:[1,211]},{22:[1,212],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:[1,213],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,115:100,117:178,122:rt,123:it,124:ot,125:st,126:at,127:ct},{84:[1,214]},t(ht,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},t(Rt,[2,153]),{84:[1,219],101:[1,220]},t(lt,[2,57],{116:129,52:p,66:m,67:b,91:A,95:C,105:x,106:E,109:T,111:S,112:D,122:N,123:O,124:P,125:R,126:z,127:F}),{22:mt,24:bt,26:kt,38:wt,41:[1,221],42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,56:[1,222],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:223,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,58:[1,224],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,60:[1,225],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,62:[1,226],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,64:[1,227],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{67:[1,228]},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,70:[1,229],73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,72:[1,230],73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,39:231,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,41:[1,232],42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,73:_t,75:[1,233],77:[1,234],81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,73:_t,75:[1,236],77:[1,235],81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{9:237,20:H,21:U,23:W},t(q,[2,52],{52:Pt}),t(pt,[2,77]),t(pt,[2,76]),{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,68:[1,238],73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(pt,[2,79]),t(zt,[2,83]),{22:mt,24:bt,26:kt,38:wt,39:239,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(Ot,s,{17:240}),t($,[2,43]),{51:241,52:p,54:46,66:m,67:b,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,122:N,123:O,124:P,125:R,126:z,127:F},{22:Vt,66:$t,67:Ht,86:Ut,96:242,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{22:Vt,66:$t,67:Ht,86:Ut,96:256,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{22:Vt,66:$t,67:Ht,86:Ut,96:257,102:Wt,104:[1,258],105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{22:Vt,66:$t,67:Ht,86:Ut,96:259,102:Wt,104:[1,260],105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{105:[1,261]},{22:Vt,66:$t,67:Ht,86:Ut,96:262,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{22:Vt,66:$t,67:Ht,86:Ut,96:263,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{26:Y,52:G,66:Z,67:K,91:Q,97:264,105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(ht,[2,102]),{84:[1,265]},t(ht,[2,106],{22:[1,266]}),t(ht,[2,107]),t(ht,[2,110]),t(ht,[2,112],{22:[1,267]}),t(ht,[2,113]),t(dt,[2,58]),t(dt,[2,59]),{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,58:[1,268],66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(dt,[2,66]),t(dt,[2,61]),t(dt,[2,62]),t(dt,[2,63]),{66:[1,269]},t(dt,[2,65]),t(dt,[2,67]),{22:mt,24:bt,26:kt,38:wt,42:yt,52:G,66:Z,67:K,72:[1,270],73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(dt,[2,69]),t(dt,[2,70]),t(dt,[2,72]),t(dt,[2,71]),t(dt,[2,73]),t(Ft,[2,4]),t([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:mt,24:bt,26:kt,38:wt,41:[1,271],42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{18:18,19:19,20:a,21:c,22:l,23:d,32:24,33:25,34:26,35:27,36:28,37:29,38:u,42:[1,272],43:31,44:h,46:g,48:f,50:35,51:45,52:p,54:46,66:m,67:b,86:k,87:w,88:y,89:_,90:v,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,118:M,119:I,120:B,121:L,122:N,123:O,124:P,125:R,126:z,127:F},t(lt,[2,56]),t(ht,[2,115],{106:Xt}),t(Jt,[2,125],{108:274,22:Vt,66:$t,67:Ht,86:Ut,102:Wt,105:qt,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt}),t(te,[2,127]),t(te,[2,129]),t(te,[2,130]),t(te,[2,131]),t(te,[2,132]),t(te,[2,133]),t(te,[2,134]),t(te,[2,135]),t(te,[2,136]),t(te,[2,137]),t(te,[2,138]),t(te,[2,139]),t(ht,[2,116],{106:Xt}),t(ht,[2,117],{106:Xt}),{22:[1,275]},t(ht,[2,118],{106:Xt}),{22:[1,276]},t(jt,[2,124]),t(ht,[2,98],{106:Xt}),t(ht,[2,99],{106:Xt}),t(ht,[2,100],{115:100,117:178,26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,122:rt,123:it,124:ot,125:st,126:at,127:ct}),t(ht,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:H,21:U,23:W},t($,[2,42]),{22:Vt,66:$t,67:Ht,86:Ut,102:Wt,105:qt,107:283,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},t(te,[2,128]),{26:Y,52:G,66:Z,67:K,91:Q,97:284,105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},{26:Y,52:G,66:Z,67:K,91:Q,97:285,105:X,106:J,109:tt,111:et,112:nt,115:100,117:98,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(ht,[2,108]),t(ht,[2,114]),t(dt,[2,60]),{22:mt,24:bt,26:kt,38:wt,39:286,42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:140,84:At,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},t(dt,[2,68]),t(Ot,s,{17:287}),t(Jt,[2,126],{108:274,22:Vt,66:$t,67:Ht,86:Ut,102:Wt,105:qt,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt}),t(ht,[2,121],{115:100,117:178,22:[1,288],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,122:rt,123:it,124:ot,125:st,126:at,127:ct}),t(ht,[2,122],{115:100,117:178,22:[1,289],26:Y,52:G,66:Z,67:K,91:Q,105:X,106:J,109:tt,111:et,112:nt,122:rt,123:it,124:ot,125:st,126:at,127:ct}),{22:mt,24:bt,26:kt,38:wt,41:[1,290],42:yt,52:G,66:Z,67:K,73:_t,81:vt,83:201,85:151,86:Ct,87:xt,88:Et,89:Tt,90:St,91:Dt,92:Mt,94:142,95:It,105:X,106:J,109:Bt,111:et,112:nt,113:Lt,114:Nt,115:148,122:rt,123:it,124:ot,125:st,126:at,127:ct},{18:18,19:19,20:a,21:c,22:l,23:d,32:24,33:25,34:26,35:27,36:28,37:29,38:u,42:[1,291],43:31,44:h,46:g,48:f,50:35,51:45,52:p,54:46,66:m,67:b,86:k,87:w,88:y,89:_,90:v,91:A,95:C,105:x,106:E,109:T,111:S,112:D,116:47,118:M,119:I,120:B,121:L,122:N,123:O,124:P,125:R,126:z,127:F},{22:Vt,66:$t,67:Ht,86:Ut,96:292,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},{22:Vt,66:$t,67:Ht,86:Ut,96:293,102:Wt,105:qt,107:243,108:244,109:Yt,110:Gt,111:Zt,112:Kt,113:Qt},t(dt,[2,64]),t($,[2,41]),t(ht,[2,119],{106:Xt}),t(ht,[2,120],{106:Xt})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},ne={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:case 15:case 24:case 27:case 30:case 33:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 25:return 100;case 26:this.begin("callbackname");break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 31:return 99;case 32:this.begin("click");break;case 34:return 90;case 35:case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:case 40:case 41:case 42:return 101;case 43:return this.popState(),25;case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:case 67:case 68:case 69:return 82;case 70:case 71:case 72:return 81;case 73:return 59;case 74:return 60;case 75:return 61;case 76:return 62;case 77:return 63;case 78:return 64;case 79:return 65;case 80:return 69;case 81:return 70;case 82:return 55;case 83:return 56;case 84:return 109;case 85:return 112;case 86:return 127;case 87:return 124;case 88:return 113;case 89:case 90:return 125;case 91:return 114;case 92:return 73;case 93:return 92;case 94:return"SEP";case 95:return 91;case 96:return 66;case 97:return 75;case 98:return 74;case 99:return 77;case 100:return 76;case 101:return 122;case 102:return 123;case 103:return 68;case 104:return 57;case 105:return 58;case 106:return 40;case 107:return 41;case 108:return 71;case 109:return 72;case 110:return 133;case 111:return 21;case 112:return 22;case 113:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],inclusive:!0}}};function re(){this.yy={}}return ee.lexer=ne,re.prototype=ee,ee.Parser=re,new re}();T1.parser=T1;const S1=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*graph/)},D1=(t,e)=>{var n;return"dagre-wrapper"===(null==(n=null==e?void 0:e.flowchart)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*graph/)||null!==t.match(/^\s*flowchart/)},M1="flowchart-";let I1,B1,L1=0,N1=nP(),O1={},P1=[],R1=[],z1=[],F1={},j1={},V1=0,$1=!0,H1=[];const U1=t=>gI.sanitizeText(t,N1),W1=function(t,e,n){h9.parseDirective(this,t,e,n)},q1=function(t){const e=Object.keys(O1);for(let n=0;n<e.length;n++)if(O1[e[n]].id===t)return O1[e[n]].domId;return t},Y1=function(t,e,n,r,i,o,s={}){let a,c=t;void 0!==c&&0!==c.trim().length&&(void 0===O1[c]&&(O1[c]={id:c,domId:M1+c+"-"+L1,styles:[],classes:[]}),L1++,void 0!==e?(N1=nP(),a=U1(e.trim()),'"'===a[0]&&'"'===a[a.length-1]&&(a=a.substring(1,a.length-1)),O1[c].text=a):void 0===O1[c].text&&(O1[c].text=t),void 0!==n&&(O1[c].type=n),null!=r&&r.forEach((function(t){O1[c].styles.push(t)})),null!=i&&i.forEach((function(t){O1[c].classes.push(t)})),void 0!==o&&(O1[c].dir=o),O1[c].props=s)},G1=function(t,e,n,r){const i={start:t,end:e,type:void 0,text:""};void 0!==(r=n.text)&&(i.text=U1(r.trim()),'"'===i.text[0]&&'"'===i.text[i.text.length-1]&&(i.text=i.text.substring(1,i.text.length-1))),void 0!==n&&(i.type=n.type,i.stroke=n.stroke,i.length=n.length),P1.push(i)},Z1=function(t,e,n,r){let i,o;for(i=0;i<t.length;i++)for(o=0;o<e.length;o++)G1(t[i],e[o],n,r)},K1=function(t,e){t.forEach((function(t){"default"===t?P1.defaultInterpolate=e:P1[t].interpolate=e}))},Q1=function(t,e){t.forEach((function(t){"default"===t?P1.defaultStyle=e:(-1===JN.isSubstringInArray("fill",e)&&e.push("fill:none"),P1[t].style=e)}))},X1=function(t,e){void 0===R1[t]&&(R1[t]={id:t,styles:[],textStyles:[]}),null!=e&&e.forEach((function(e){if(e.match("color")){const n=e.replace("fill","bgFill").replace("color","fill");R1[t].textStyles.push(n)}R1[t].styles.push(e)}))},J1=function(t){I1=t,I1.match(/.*</)&&(I1="RL"),I1.match(/.*\^/)&&(I1="BT"),I1.match(/.*>/)&&(I1="LR"),I1.match(/.*v/)&&(I1="TB")},t2=function(t,e){t.split(",").forEach((function(t){let n=t;void 0!==O1[n]&&O1[n].classes.push(e),void 0!==F1[n]&&F1[n].classes.push(e)}))},e2=function(t,e){t.split(",").forEach((function(t){void 0!==e&&(j1["gen-1"===B1?q1(t):t]=U1(e))}))},n2=function(t,e,n){let r=q1(t);if("loose"!==nP().securityLevel)return;if(void 0===e)return;let i=[];if("string"==typeof n){i=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<i.length;t++){let e=i[t].trim();'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substr(1,e.length-2)),i[t]=e}}0===i.length&&i.push(t),void 0!==O1[t]&&(O1[t].haveCallback=!0,H1.push((function(){const t=document.querySelector(`[id="${r}"]`);null!==t&&t.addEventListener("click",(function(){JN.runFunc(e,...i)}),!1)})))},r2=function(t,e,n){t.split(",").forEach((function(t){void 0!==O1[t]&&(O1[t].link=JN.formatUrl(e,N1),O1[t].linkTarget=n)})),t2(t,"clickable")},i2=function(t){return j1[t]},o2=function(t,e,n){t.split(",").forEach((function(t){n2(t,e,n)})),t2(t,"clickable")},s2=function(t){H1.forEach((function(e){e(t)}))},a2=function(){return I1.trim()},c2=function(){return O1},l2=function(){return P1},d2=function(){return R1},u2=function(t){let e=Qr(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=Qr("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Qr(t).select("svg").selectAll("g.node").on("mouseover",(function(){const t=Qr(this);if(null===t.attr("title"))return;const n=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(t.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),t.classed("hover",!0)})).on("mouseout",(function(){e.transition().duration(500).style("opacity",0),Qr(this).classed("hover",!1)}))};H1.push(u2);const h2=function(t,e,n){let r=t.trim(),i=n.trim();function o(t){const e={boolean:{},number:{},string:{}},n=[];let r;return{nodeList:t.filter((function(t){const i=typeof t;return t.stmt&&"dir"===t.stmt?(r=t.value,!1):""!==t.trim()&&(i in e?!e[i].hasOwnProperty(t)&&(e[i][t]=!0):!(n.indexOf(t)>=0)&&n.push(t))})),dir:r}}r===i&&i.match(/\s/)&&(r=void 0);let s=[];const{nodeList:a,dir:c}=o(s.concat.apply(s,e));if(s=a,"gen-1"===B1)for(let t=0;t<s.length;t++)s[t]=q1(s[t]);r=r||"subGraph"+V1,i=i||"",i=U1(i),V1+=1;const l={id:r,nodes:s,title:i.trim(),classes:[],dir:c};return u.info("Adding",l.id,l.nodes,l.dir),l.nodes=_2(l,z1).nodes,z1.push(l),F1[r]=l,r},g2=function(t){for(let e=0;e<z1.length;e++)if(z1[e].id===t)return e;return-1};let f2=-1;const p2=[],m2=function(t,e){const n=z1[e].nodes;if(f2+=1,f2>2e3)return;if(p2[f2]=e,z1[e].id===t)return{result:!0,count:0};let r=0,i=1;for(;r<n.length;){const e=g2(n[r]);if(e>=0){const n=m2(t,e);if(n.result)return{result:!0,count:i+n.count};i+=n.count}r+=1}return{result:!1,count:i}},b2=t=>{let e=t.trim(),n="arrow_open";switch(e[0]){case"<":n="arrow_point",e=e.slice(1);break;case"x":n="arrow_cross",e=e.slice(1);break;case"o":n="arrow_circle",e=e.slice(1)}let r="normal";return-1!==e.indexOf("=")&&(r="thick"),-1!==e.indexOf(".")&&(r="dotted"),{type:n,stroke:r}},k2=(t,e)=>{const n=e.length;let r=0;for(let i=0;i<n;++i)e[i]===t&&++r;return r},w2=t=>{const e=t.trim();let n=e.slice(0,-1),r="arrow_open";switch(e.slice(-1)){case"x":r="arrow_cross","x"===e[0]&&(r="double_"+r,n=n.slice(1));break;case">":r="arrow_point","<"===e[0]&&(r="double_"+r,n=n.slice(1));break;case"o":r="arrow_circle","o"===e[0]&&(r="double_"+r,n=n.slice(1))}let i="normal",o=n.length-1;"="===n[0]&&(i="thick"),"~"===n[0]&&(i="invisible");let s=k2(".",n);return s&&(i="dotted",o=s),{type:r,stroke:i,length:o}},y2=(t,e)=>{let n=!1;return t.forEach((t=>{t.nodes.indexOf(e)>=0&&(n=!0)})),n},_2=(t,e)=>{const n=[];return t.nodes.forEach(((r,i)=>{y2(e,r)||n.push(t.nodes[i])})),{nodes:n}},v2={parseDirective:W1,defaultConfig:()=>WO.flowchart,setAccTitle:WP,getAccTitle:qP,getAccDescription:GP,setAccDescription:YP,addVertex:Y1,lookUpDomId:q1,addLink:Z1,updateLinkInterpolate:K1,updateLink:Q1,addClass:X1,setDirection:J1,setClass:t2,setTooltip:e2,getTooltip:i2,setClickEvent:o2,setLink:r2,bindFunctions:s2,getDirection:a2,getVertices:c2,getEdges:l2,getClasses:d2,clear:function(t="gen-1"){O1={},R1={},P1=[],H1=[u2],z1=[],F1={},V1=0,j1=[],$1=!0,B1=t,UP()},setGen:t=>{B1=t||"gen-1"},defaultStyle:function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph:h2,getDepthFirstPos:function(t){return p2[t]},indexNodes:function(){f2=-1,z1.length>0&&m2("none",z1.length-1)},getSubGraphs:function(){return z1},destructLink:(t,e)=>{const n=w2(t);let r;if(e){if(r=b2(e),r.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===r.type)r.type=n.type;else{if(r.type!==n.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return"double_arrow"===r.type&&(r.type="double_arrow_point"),r.length=n.length,r}return n},lex:{firstGraph:()=>!!$1&&($1=!1,!0)},exists:y2,makeUniq:_2};var A2;if("function"==typeof r)try{A2=lX}catch(t){}A2||(A2=window.graphlib);var C2,x2=A2;if("function"==typeof r)try{C2=IJ()}catch(t){}C2||(C2=window.dagre);var E2=C2,T2=S2;function S2(t,e){return t.intersect(e)}var D2=M2;function M2(t,e,n,r){var i=t.x,o=t.y,s=i-r.x,a=o-r.y,c=Math.sqrt(e*e*a*a+n*n*s*s),l=Math.abs(e*n*s/c);r.x<i&&(l=-l);var d=Math.abs(e*n*a/c);return r.y<o&&(d=-d),{x:i+l,y:o+d}}var I2=D2,B2=L2;function L2(t,e,n){return I2(t,e,e,n)}function N2(t,e,n,r){var i,o,s,a,c,l,d,u,h,g,f,p,m;if(i=e.y-t.y,s=t.x-e.x,c=e.x*t.y-t.x*e.y,h=i*n.x+s*n.y+c,g=i*r.x+s*r.y+c,!(0!==h&&0!==g&&O2(h,g)||(o=r.y-n.y,a=n.x-r.x,l=r.x*n.y-n.x*r.y,d=o*t.x+a*t.y+l,u=o*e.x+a*e.y+l,0!==d&&0!==u&&O2(d,u)||0==(f=i*a-o*s))))return p=Math.abs(f/2),{x:(m=s*l-a*c)<0?(m-p)/f:(m+p)/f,y:(m=o*c-i*l)<0?(m-p)/f:(m+p)/f}}function O2(t,e){return t*e>0}var P2=N2,R2=z2;function z2(t,e,n){var r=t.x,i=t.y,o=[],s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.forEach((function(t){s=Math.min(s,t.x),a=Math.min(a,t.y)}));for(var c=r-t.width/2-s,l=i-t.height/2-a,d=0;d<e.length;d++){var u=e[d],h=e[d<e.length-1?d+1:0],g=P2(t,n,{x:c+u.x,y:l+u.y},{x:c+h.x,y:l+h.y});g&&o.push(g)}return o.length?(o.length>1&&o.sort((function(t,e){var r=t.x-n.x,i=t.y-n.y,o=Math.sqrt(r*r+i*i),s=e.x-n.x,a=e.y-n.y,c=Math.sqrt(s*s+a*a);return o<c?-1:o===c?0:1})),o[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}var F2=j2;function j2(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,c=t.width/2,l=t.height/2;return Math.abs(a)*c>Math.abs(s)*l?(a<0&&(l=-l),n=0===a?0:l*s/a,r=l):(s<0&&(c=-c),n=c,r=0===s?0:c*a/s),{x:i+n,y:o+r}}var V2,$2={node:T2,circle:B2,ellipse:D2,polygon:R2,rect:F2};if("function"==typeof r)try{V2={defaults:gX(),each:jq(),isFunction:DB(),isPlainObject:MX(),pick:WX(),has:EY(),range:GX(),uniqueId:tJ()}}catch(t){}V2||(V2=window._);var H2=V2;const U2=e(QD);var W2;if(!W2&&"function"==typeof r)try{W2=U2}catch(t){}W2||(W2=window.d3);var q2=W2,Y2=H2,G2={isSubgraph:Z2,edgeToId:K2,applyStyle:e5,applyClass:n5,applyTransition:r5};function Z2(t,e){return!!t.children(e).length}function K2(t){return t5(t.v)+":"+t5(t.w)+":"+t5(t.name)}var Q2,X2,J2=/:/g;function t5(t){return t?String(t).replace(J2,"\\:"):""}function e5(t,e){e&&t.attr("style",e)}function n5(t,e,n){e&&t.attr("class",e).attr("class",n+" "+t.attr("class"))}function r5(t,e){var n=e.graph();if(Y2.isPlainObject(n)){var r=n.transition;if(Y2.isFunction(r))return r(t)}return t}function i5(){if(X2)return Q2;X2=1;var t=G2;function e(e,r){for(var i=e.append("text"),o=n(r.label).split("\n"),s=0;s<o.length;s++)i.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(o[s]);return t.applyStyle(i,r.labelStyle),i}function n(t){for(var e,n="",r=!1,i=0;i<t.length;++i)e=t[i],r?(n+="n"===e?"\n":e,r=!1):"\\"===e?r=!0:n+=e;return n}return Q2=e}var o5,s5,a5,c5,l5,d5,u5,h5,g5,f5,p5,m5,b5,k5,w5,y5,_5,v5,A5,C5,x5,E5,T5=G2,S5=D5;function D5(t,e){var n=t.append("foreignObject").attr("width","100000"),r=n.append("xhtml:div");r.attr("xmlns","http://www.w3.org/1999/xhtml");var i=e.label;switch(typeof i){case"function":r.insert(i);break;case"object":r.insert((function(){return i}));break;default:r.html(i)}T5.applyStyle(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");var o=r.node().getBoundingClientRect();return n.attr("width",o.width).attr("height",o.height),n}function M5(){if(s5)return o5;s5=1;var t=G2;function e(e,n){var r=e;return r.node().appendChild(n.label),t.applyStyle(r,n.labelStyle),r}return o5=e}function I5(){if(c5)return a5;c5=1;var t=i5(),e=S5,n=M5();function r(r,i,o){var s=i.label,a=r.append("g");"svg"===i.labelType?n(a,i):"string"!=typeof s||"html"===i.labelType?e(a,i):t(a,i);var c,l=a.node().getBBox();switch(o){case"top":c=-i.height/2;break;case"bottom":c=i.height/2-l.height;break;default:c=-l.height/2}return a.attr("transform","translate("+-l.width/2+","+c+")"),a}return a5=r}function B5(){if(d5)return l5;d5=1;var t=H2,e=I5(),n=G2,r=q2;function i(i,o,s){var a,c=o.nodes().filter((function(t){return!n.isSubgraph(o,t)})),l=i.selectAll("g.node").data(c,(function(t){return t})).classed("update",!0);return l.exit().remove(),l.enter().append("g").attr("class","node").style("opacity",0),(l=i.selectAll("g.node")).each((function(i){var a=o.node(i),c=r.select(this);n.applyClass(c,a.class,(c.classed("update")?"update ":"")+"node"),c.select("g.label").remove();var l=c.append("g").attr("class","label"),d=e(l,a),u=s[a.shape],h=t.pick(d.node().getBBox(),"width","height");a.elem=this,a.id&&c.attr("id",a.id),a.labelId&&l.attr("id",a.labelId),t.has(a,"width")&&(h.width=a.width),t.has(a,"height")&&(h.height=a.height),h.width+=a.paddingLeft+a.paddingRight,h.height+=a.paddingTop+a.paddingBottom,l.attr("transform","translate("+(a.paddingLeft-a.paddingRight)/2+","+(a.paddingTop-a.paddingBottom)/2+")");var g=r.select(this);g.select(".label-container").remove();var f=u(g,h,a).classed("label-container",!0);n.applyStyle(f,a.style);var p=f.node().getBBox();a.width=p.width,a.height=p.height})),a=l.exit?l.exit():l.selectAll(null),n.applyTransition(a,o).style("opacity",0).remove(),l}return l5=i}function L5(){if(h5)return u5;h5=1;var t=G2,e=q2,n=I5();function r(r,i){var o,s=i.nodes().filter((function(e){return t.isSubgraph(i,e)})),a=r.selectAll("g.cluster").data(s,(function(t){return t}));return a.selectAll("*").remove(),a.enter().append("g").attr("class","cluster").attr("id",(function(t){return i.node(t).id})).style("opacity",0),a=r.selectAll("g.cluster"),t.applyTransition(a,i).style("opacity",1),a.each((function(t){var r=i.node(t),o=e.select(this);e.select(this).append("rect");var s=o.append("g").attr("class","label");n(s,r,r.clusterLabelPos)})),a.selectAll("rect").each((function(n){var r=i.node(n),o=e.select(this);t.applyStyle(o,r.style)})),o=a.exit?a.exit():a.selectAll(null),t.applyTransition(o,i).style("opacity",0).remove(),a}return u5=r}function N5(){if(f5)return g5;f5=1;var t=H2,e=I5(),n=G2,r=q2;function i(i,o){var s,a=i.selectAll("g.edgeLabel").data(o.edges(),(function(t){return n.edgeToId(t)})).classed("update",!0);return a.exit().remove(),a.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(a=i.selectAll("g.edgeLabel")).each((function(n){var i=r.select(this);i.select(".label").remove();var s=o.edge(n),a=e(i,o.edge(n),0,0).classed("label",!0),c=a.node().getBBox();s.labelId&&a.attr("id",s.labelId),t.has(s,"width")||(s.width=c.width),t.has(s,"height")||(s.height=c.height)})),s=a.exit?a.exit():a.selectAll(null),n.applyTransition(s,o).style("opacity",0).remove(),a}return g5=i}function O5(){if(m5)return p5;m5=1;var t=H2,e=T2,n=G2,r=q2;function i(e,i,a){var c=e.selectAll("g.edgePath").data(i.edges(),(function(t){return n.edgeToId(t)})).classed("update",!0),u=l(c,i);d(c,i);var h=void 0!==c.merge?c.merge(u):c;return n.applyTransition(h,i).style("opacity",1),h.each((function(t){var e=r.select(this),o=i.edge(t);o.elem=this,o.id&&e.attr("id",o.id),n.applyClass(e,o.class,(e.classed("update")?"update ":"")+"edgePath")})),h.selectAll("path.path").each((function(e){var a=i.edge(e);a.arrowheadId=t.uniqueId("arrowhead");var c=r.select(this).attr("marker-end",(function(){return"url("+o(location.href,a.arrowheadId)+")"})).style("fill","none");n.applyTransition(c,i).attr("d",(function(t){return s(i,t)})),n.applyStyle(c,a.style)})),h.selectAll("defs *").remove(),h.selectAll("defs").each((function(t){var e=i.edge(t);(0,a[e.arrowhead])(r.select(this),e.arrowheadId,e,"arrowhead")})),h}function o(t,e){return t.split("#")[0]+"#"+e}function s(t,n){var r=t.edge(n),i=t.node(n.v),o=t.node(n.w),s=r.points.slice(1,r.points.length-1);return s.unshift(e(i,s[0])),s.push(e(o,s[s.length-1])),a(r,s)}function a(t,e){var n=(r.line||r.svg.line)().x((function(t){return t.x})).y((function(t){return t.y}));return(n.curve||n.interpolate)(t.curve),n(e)}function c(t){var e=t.getBBox(),n=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2);return{x:n.e,y:n.f}}function l(e,n){var r=e.enter().append("g").attr("class","edgePath").style("opacity",0);return r.append("path").attr("class","path").attr("d",(function(e){var r=n.edge(e),i=n.node(e.v).elem;return a(r,t.range(r.points.length).map((function(){return c(i)})))})),r.append("defs"),r}function d(t,e){var r=t.exit();n.applyTransition(r,e).style("opacity",0).remove()}return p5=i}function P5(){if(k5)return b5;k5=1;var t=G2,e=q2;function n(n,r){function i(t){var e=r.node(t);return"translate("+e.x+","+e.y+")"}n.filter((function(){return!e.select(this).classed("update")})).attr("transform",i),t.applyTransition(n,r).style("opacity",1).attr("transform",i)}return b5=n}function R5(){if(y5)return w5;y5=1;var t=G2,e=q2,n=H2;function r(r,i){function o(t){var e=i.edge(t);return n.has(e,"x")?"translate("+e.x+","+e.y+")":""}r.filter((function(){return!e.select(this).classed("update")})).attr("transform",o),t.applyTransition(r,i).style("opacity",1).attr("transform",o)}return w5=r}function z5(){if(v5)return _5;v5=1;var t=G2,e=q2;function n(n,r){var i=n.filter((function(){return!e.select(this).classed("update")}));function o(t){var e=r.node(t);return"translate("+e.x+","+e.y+")"}i.attr("transform",o),t.applyTransition(n,r).style("opacity",1).attr("transform",o),t.applyTransition(i.selectAll("rect"),r).attr("width",(function(t){return r.node(t).width})).attr("height",(function(t){return r.node(t).height})).attr("x",(function(t){return-r.node(t).width/2})).attr("y",(function(t){return-r.node(t).height/2}))}return _5=n}function F5(){if(C5)return A5;C5=1;var t=F2,e=D2,n=B2,r=R2;function i(e,n,r){var i=e.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-n.width/2).attr("y",-n.height/2).attr("width",n.width).attr("height",n.height);return r.intersect=function(e){return t(r,e)},i}function o(t,n,r){var i=n.width/2,o=n.height/2,s=t.insert("ellipse",":first-child").attr("x",-n.width/2).attr("y",-n.height/2).attr("rx",i).attr("ry",o);return r.intersect=function(t){return e(r,i,o,t)},s}function s(t,e,r){var i=Math.max(e.width,e.height)/2,o=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",i);return r.intersect=function(t){return n(r,i,t)},o}function a(t,e,n){var i=e.width*Math.SQRT2/2,o=e.height*Math.SQRT2/2,s=[{x:0,y:-o},{x:-i,y:0},{x:0,y:o},{x:i,y:0}],a=t.insert("polygon",":first-child").attr("points",s.map((function(t){return t.x+","+t.y})).join(" "));return n.intersect=function(t){return r(n,s,t)},a}return A5={rect:i,ellipse:o,circle:s,diamond:a}}function j5(){if(E5)return x5;E5=1;var t=G2;function e(e,n,r,i){var o=e.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(o,r[i+"Style"]),r[i+"Class"]&&o.attr("class",r[i+"Class"])}function n(e,n,r,i){var o=e.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(o,r[i+"Style"]),r[i+"Class"]&&o.attr("class",r[i+"Class"])}function r(e,n,r,i){var o=e.append("marker").attr("id",n).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");t.applyStyle(o,r[i+"Style"]),r[i+"Class"]&&o.attr("class",r[i+"Class"])}return x5={default:e,normal:e,vee:n,undirected:r}}var V5=H2,$5=q2,H5=E2.layout,U5=W5;function W5(){var t=B5(),e=L5(),n=N5(),r=O5(),i=P5(),o=R5(),s=z5(),a=F5(),c=j5(),l=function(l,d){G5(d);var u=K5(l,"output"),h=K5(u,"clusters"),g=K5(u,"edgePaths"),f=n(K5(u,"edgeLabels"),d),p=t(K5(u,"nodes"),d,a);H5(d),i(p,d),o(f,d),r(g,d,c);var m=e(h,d);s(m,d),Z5(d)};return l.createNodes=function(e){return arguments.length?(t=e,l):t},l.createClusters=function(t){return arguments.length?(e=t,l):e},l.createEdgeLabels=function(t){return arguments.length?(n=t,l):n},l.createEdgePaths=function(t){return arguments.length?(r=t,l):r},l.shapes=function(t){return arguments.length?(a=t,l):a},l.arrows=function(t){return arguments.length?(c=t,l):c},l}var q5={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},Y5={arrowhead:"normal",curve:$5.curveLinear};function G5(t){t.nodes().forEach((function(e){var n=t.node(e);V5.has(n,"label")||t.children(e).length||(n.label=e),V5.has(n,"paddingX")&&V5.defaults(n,{paddingLeft:n.paddingX,paddingRight:n.paddingX}),V5.has(n,"paddingY")&&V5.defaults(n,{paddingTop:n.paddingY,paddingBottom:n.paddingY}),V5.has(n,"padding")&&V5.defaults(n,{paddingLeft:n.padding,paddingRight:n.padding,paddingTop:n.padding,paddingBottom:n.padding}),V5.defaults(n,q5),V5.each(["paddingLeft","paddingRight","paddingTop","paddingBottom"],(function(t){n[t]=Number(n[t])})),V5.has(n,"width")&&(n._prevWidth=n.width),V5.has(n,"height")&&(n._prevHeight=n.height)})),t.edges().forEach((function(e){var n=t.edge(e);V5.has(n,"label")||(n.label=""),V5.defaults(n,Y5)}))}function Z5(t){V5.each(t.nodes(),(function(e){var n=t.node(e);V5.has(n,"_prevWidth")?n.width=n._prevWidth:delete n.width,V5.has(n,"_prevHeight")?n.height=n._prevHeight:delete n.height,delete n._prevWidth,delete n._prevHeight}))}function K5(t,e){var n=t.select("g."+e);return n.empty()&&(n=t.append("g").attr("class",e)),n}var Q5={graphlib:x2,dagre:E2,intersect:$2,render:U5,util:G2,version:"0.6.4"};function X5(t,e,n){const r=.9*(e.width+e.height),i=[{x:r/2,y:0},{x:r,y:-r/2},{x:r/2,y:-r},{x:0,y:-r/2}],o=u4(t,r,r,i);return n.intersect=function(t){return Q5.intersect.polygon(n,i,t)},o}function J5(t,e,n){const r=4,i=e.height,o=i/r,s=e.width+2*o,a=[{x:o,y:0},{x:s-o,y:0},{x:s,y:-i/2},{x:s-o,y:-i},{x:o,y:-i},{x:0,y:-i/2}],c=u4(t,s,i,a);return n.intersect=function(t){return Q5.intersect.polygon(n,a,t)},c}function t4(t,e,n){const r=e.width,i=e.height,o=[{x:-i/2,y:0},{x:r,y:0},{x:r,y:-i},{x:-i/2,y:-i},{x:0,y:-i/2}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function e4(t,e,n){const r=e.width,i=e.height,o=[{x:-2*i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:i/6,y:-i}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function n4(t,e,n){const r=e.width,i=e.height,o=[{x:2*i/6,y:0},{x:r+i/6,y:0},{x:r-2*i/6,y:-i},{x:-i/6,y:-i}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function r4(t,e,n){const r=e.width,i=e.height,o=[{x:-2*i/6,y:0},{x:r+2*i/6,y:0},{x:r-i/6,y:-i},{x:i/6,y:-i}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function i4(t,e,n){const r=e.width,i=e.height,o=[{x:i/6,y:0},{x:r-i/6,y:0},{x:r+2*i/6,y:-i},{x:-2*i/6,y:-i}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function o4(t,e,n){const r=e.width,i=e.height,o=[{x:0,y:0},{x:r+i/2,y:0},{x:r,y:-i/2},{x:r+i/2,y:-i},{x:0,y:-i}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function s4(t,e,n){const r=e.height,i=e.width+r/4,o=t.insert("rect",":first-child").attr("rx",r/2).attr("ry",r/2).attr("x",-i/2).attr("y",-r/2).attr("width",i).attr("height",r);return n.intersect=function(t){return Q5.intersect.rect(n,t)},o}function a4(t,e,n){const r=e.width,i=e.height,o=[{x:0,y:0},{x:r,y:0},{x:r,y:-i},{x:0,y:-i},{x:0,y:0},{x:-8,y:0},{x:r+8,y:0},{x:r+8,y:-i},{x:-8,y:-i},{x:-8,y:0}],s=u4(t,r,i,o);return n.intersect=function(t){return Q5.intersect.polygon(n,o,t)},s}function c4(t,e,n){const r=e.width,i=r/2,o=i/(2.5+r/50),s=e.height+o,a="M 0,"+o+" a "+i+","+o+" 0,0,0 "+r+" 0 a "+i+","+o+" 0,0,0 "+-r+" 0 l 0,"+s+" a "+i+","+o+" 0,0,0 "+r+" 0 l 0,"+-s,c=t.attr("label-offset-y",o).insert("path",":first-child").attr("d",a).attr("transform","translate("+-r/2+","+-(s/2+o)+")");return n.intersect=function(t){const e=Q5.intersect.rect(n,t),r=e.x-n.x;if(0!=i&&(Math.abs(r)<n.width/2||Math.abs(r)==n.width/2&&Math.abs(e.y-n.y)>n.height/2-o)){let s=o*o*(1-r*r/(i*i));0!=s&&(s=Math.sqrt(s)),s=o-s,t.y-n.y>0&&(s=-s),e.y+=s}return e},c}function l4(t){t.shapes().question=X5,t.shapes().hexagon=J5,t.shapes().stadium=s4,t.shapes().subroutine=a4,t.shapes().cylinder=c4,t.shapes().rect_left_inv_arrow=t4,t.shapes().lean_right=e4,t.shapes().lean_left=n4,t.shapes().trapezoid=r4,t.shapes().inv_trapezoid=i4,t.shapes().rect_right_inv_arrow=o4}function d4(t){t({question:X5}),t({hexagon:J5}),t({stadium:s4}),t({subroutine:a4}),t({cylinder:c4}),t({rect_left_inv_arrow:t4}),t({lean_right:e4}),t({lean_left:n4}),t({trapezoid:r4}),t({inv_trapezoid:i4}),t({rect_right_inv_arrow:o4})}function u4(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map((function(t){return t.x+","+t.y})).join(" ")).attr("transform","translate("+-e/2+","+n/2+")")}const h4={addToRender:l4,addToRenderV2:d4},g4={},f4=function(t,e,n,r,i,o){const s=r?r.select(`[id="${n}"]`):Qr(`[id="${n}"]`),a=i||document;Object.keys(t).forEach((function(n){const r=t[n];let i="default";r.classes.length>0&&(i=r.classes.join(" "));const c=PN(r.styles);let l,d=void 0!==r.text?r.text:r.id;if(uI(nP().flowchart.htmlLabels)){const t={label:d.replace(/fa[lrsb]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))};l=S5(s,t).node(),l.parentNode.removeChild(l)}else{const t=a.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",c.labelStyle.replace("color:","fill:"));const e=d.split(gI.lineBreakRegex);for(let n=0;n<e.length;n++){const r=a.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","1"),r.textContent=e[n],t.appendChild(r)}l=t}let h=0,g="";switch(r.type){case"round":h=5,g="rect";break;case"square":case"group":default:g="rect";break;case"diamond":g="question";break;case"hexagon":g="hexagon";break;case"odd":case"odd_right":g="rect_left_inv_arrow";break;case"lean_right":g="lean_right";break;case"lean_left":g="lean_left";break;case"trapezoid":g="trapezoid";break;case"inv_trapezoid":g="inv_trapezoid";break;case"circle":g="circle";break;case"ellipse":g="ellipse";break;case"stadium":g="stadium";break;case"subroutine":g="subroutine";break;case"cylinder":g="cylinder"}u.warn("Adding node",r.id,r.domId),e.setNode(o.db.lookUpDomId(r.id),{labelType:"svg",labelStyle:c.labelStyle,shape:g,label:l,rx:h,ry:h,class:i,style:c.style,id:o.db.lookUpDomId(r.id)})}))},p4=function(t,e,n){let r,i,o=0;if(void 0!==t.defaultStyle){const e=PN(t.defaultStyle);r=e.style,i=e.labelStyle}t.forEach((function(s){o++;var a="L-"+s.start+"-"+s.end,c="LS-"+s.start,l="LE-"+s.end;const d={};"arrow_open"===s.type?d.arrowhead="none":d.arrowhead="normal";let u="",h="";if(void 0!==s.style){const t=PN(s.style);u=t.style,h=t.labelStyle}else switch(s.stroke){case"normal":u="fill:none",void 0!==r&&(u=r),void 0!==i&&(h=i);break;case"dotted":u="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":u=" stroke-width: 3.5px;fill:none"}d.style=u,d.labelStyle=h,void 0!==s.interpolate?d.curve=SN(s.interpolate,BT):void 0!==t.defaultInterpolate?d.curve=SN(t.defaultInterpolate,BT):d.curve=SN(g4.curve,BT),void 0===s.text?void 0!==s.style&&(d.arrowheadStyle="fill: #333"):(d.arrowheadStyle="fill: #333",d.labelpos="c",uI(nP().flowchart.htmlLabels)?(d.labelType="html",d.label=`<span id="L-${a}" class="edgeLabel L-${c}' L-${l}" style="${d.labelStyle}">${s.text.replace(/fa[lrsb]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))}</span>`):(d.labelType="text",d.label=s.text.replace(gI.lineBreakRegex,"\n"),void 0===s.style&&(d.style=d.style||"stroke: #333; stroke-width: 1.5px;fill:none"),d.labelStyle=d.labelStyle.replace("color:","fill:"))),d.id=a,d.class=c+" "+l,d.minlen=s.length||1,e.setEdge(n.db.lookUpDomId(s.start),n.db.lookUpDomId(s.end),d,o)}))},m4=function(t,e,n,r){u.info("Drawing flowchart"),r.db.clear();const{securityLevel:i,flowchart:o}=nP();let s;"sandbox"===i&&(s=Qr("#i"+e));const a=Qr("sandbox"===i?s.nodes()[0].contentDocument.body:"body"),c="sandbox"===i?s.nodes()[0].contentDocument:document;try{r.parser.parse(t)}catch(t){u.debug("Parsing failed")}let l=r.db.getDirection();void 0===l&&(l="TD");const d=o.nodeSpacing||50,h=o.rankSpacing||50,g=new lX.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:l,nodesep:d,ranksep:h,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let f;const p=r.db.getSubGraphs();for(let t=p.length-1;t>=0;t--)f=p[t],r.db.addVertex(f.id,f.title,"group",void 0,f.classes);const m=r.db.getVertices();u.warn("Get vertices",m);const b=r.db.getEdges();let k=0;for(k=p.length-1;k>=0;k--){f=p[k],oi("cluster").append("text");for(let t=0;t<f.nodes.length;t++)u.warn("Setting subgraph",f.nodes[t],r.db.lookUpDomId(f.nodes[t]),r.db.lookUpDomId(f.id)),g.setParent(r.db.lookUpDomId(f.nodes[t]),r.db.lookUpDomId(f.id))}f4(m,g,e,a,c,r),p4(b,g,r);const w=new(0,Q5.render);h4.addToRender(w),w.arrows().none=function(t,e,n,r){const i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");Q5.util.applyStyle(i,n[r+"Style"])},w.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};const y=a.select(`[id="${e}"]`);yR(r.db,y,e);const _=a.select("#"+e+" g");for(w(_,g),_.selectAll("g.node").attr("title",(function(){return r.db.getTooltip(this.id)})),r.db.indexNodes("subGraph"+k),k=0;k<p.length;k++)if(f=p[k],"undefined"!==f.title){const t=c.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(f.id)+'"] rect'),n=c.querySelectorAll("#"+e+' [id="'+r.db.lookUpDomId(f.id)+'"]'),i=t[0].x.baseVal.value,o=t[0].y.baseVal.value,s=t[0].width.baseVal.value,a=Qr(n[0]).select(".label");a.attr("transform",`translate(${i+s/2}, ${o+14})`),a.attr("id",e+"Text");for(let t=0;t<f.classes.length;t++)n[0].classList.add(f.classes[t])}if(!o.htmlLabels){const t=c.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let e=0;e<t.length;e++){const n=t[e],r=n.getBBox(),i=c.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("rx",0),i.setAttribute("ry",0),i.setAttribute("width",r.width),i.setAttribute("height",r.height),n.insertBefore(i,n.firstChild)}}gP(g,y,o.diagramPadding,o.useMaxWidth),Object.keys(m).forEach((function(t){const n=m[t];if(n.link){const o=a.select("#"+e+' [id="'+r.db.lookUpDomId(t)+'"]');if(o){const t=c.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",n.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",n.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===i?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):n.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",n.linkTarget);const e=o.insert((function(){return t}),":first-child"),r=o.select(".label-container");r&&e.append((function(){return r.node()}));const s=o.select(".label");s&&e.append((function(){return s.node()}))}}}))},b4={setConf:function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)g4[e[n]]=t[e[n]]},addVertices:f4,addEdges:p4,getClasses:function(t,e){u.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(t){return}},draw:m4},k4={},w4=function(t,e,n,r,i,o){const s=r.select(`[id="${n}"]`);Object.keys(t).forEach((function(n){const r=t[n];let a="default";r.classes.length>0&&(a=r.classes.join(" "));const c=PN(r.styles);let l,d=void 0!==r.text?r.text:r.id;if(uI(nP().flowchart.htmlLabels)){const t={label:d.replace(/fa[lrsb]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`))};l=S5(s,t).node(),l.parentNode.removeChild(l)}else{const t=i.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",c.labelStyle.replace("color:","fill:"));const e=d.split(gI.lineBreakRegex);for(let n=0;n<e.length;n++){const r=i.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","1"),r.textContent=e[n],t.appendChild(r)}l=t}let h=0,g="";switch(r.type){case"round":h=5,g="rect";break;case"square":case"group":default:g="rect";break;case"diamond":g="question";break;case"hexagon":g="hexagon";break;case"odd":case"odd_right":g="rect_left_inv_arrow";break;case"lean_right":g="lean_right";break;case"lean_left":g="lean_left";break;case"trapezoid":g="trapezoid";break;case"inv_trapezoid":g="inv_trapezoid";break;case"circle":g="circle";break;case"ellipse":g="ellipse";break;case"stadium":g="stadium";break;case"subroutine":g="subroutine";break;case"cylinder":g="cylinder";break;case"doublecircle":g="doublecircle"}e.setNode(r.id,{labelStyle:c.labelStyle,shape:g,labelText:d,rx:h,ry:h,class:a,style:c.style,id:r.id,link:r.link,linkTarget:r.linkTarget,tooltip:o.db.getTooltip(r.id)||"",domId:o.db.lookUpDomId(r.id),haveCallback:r.haveCallback,width:"group"===r.type?500:void 0,dir:r.dir,type:r.type,props:r.props,padding:nP().flowchart.padding}),u.info("setNode",{labelStyle:c.labelStyle,shape:g,labelText:d,rx:h,ry:h,class:a,style:c.style,id:r.id,domId:o.db.lookUpDomId(r.id),width:"group"===r.type?500:void 0,type:r.type,dir:r.dir,props:r.props,padding:nP().flowchart.padding})}))},y4=function(t,e,n){u.info("abc78 edges = ",t);let r,i,o=0,s={};if(void 0!==t.defaultStyle){const e=PN(t.defaultStyle);r=e.style,i=e.labelStyle}t.forEach((function(n){o++;var a="L-"+n.start+"-"+n.end;void 0===s[a]?(s[a]=0,u.info("abc78 new entry",a,s[a])):(s[a]++,u.info("abc78 new entry",a,s[a]));let c=a+"-"+s[a];u.info("abc78 new link id to be used is",a,c,s[a]);var l="LS-"+n.start,d="LE-"+n.end;const h={style:"",labelStyle:""};switch(h.minlen=n.length||1,"arrow_open"===n.type?h.arrowhead="none":h.arrowhead="normal",h.arrowTypeStart="arrow_open",h.arrowTypeEnd="arrow_open",n.type){case"double_arrow_cross":h.arrowTypeStart="arrow_cross";case"arrow_cross":h.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":h.arrowTypeStart="arrow_point";case"arrow_point":h.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":h.arrowTypeStart="arrow_circle";case"arrow_circle":h.arrowTypeEnd="arrow_circle"}let g="",f="";switch(n.stroke){case"normal":g="fill:none;",void 0!==r&&(g=r),void 0!==i&&(f=i),h.thickness="normal",h.pattern="solid";break;case"dotted":h.thickness="normal",h.pattern="dotted",h.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":h.thickness="thick",h.pattern="solid",h.style="stroke-width: 3.5px;fill:none;";break;case"invisible":h.thickness="invisible",h.pattern="solid",h.style="stroke-width: 0;fill:none;"}if(void 0!==n.style){const t=PN(n.style);g=t.style,f=t.labelStyle}h.style=h.style+=g,h.labelStyle=h.labelStyle+=f,void 0!==n.interpolate?h.curve=SN(n.interpolate,BT):void 0!==t.defaultInterpolate?h.curve=SN(t.defaultInterpolate,BT):h.curve=SN(k4.curve,BT),void 0===n.text?void 0!==n.style&&(h.arrowheadStyle="fill: #333"):(h.arrowheadStyle="fill: #333",h.labelpos="c"),h.labelType="text",h.label=n.text.replace(gI.lineBreakRegex,"\n"),void 0===n.style&&(h.style=h.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),h.labelStyle=h.labelStyle.replace("color:","fill:"),h.id=c,h.classes="flowchart-link "+l+" "+d,e.setEdge(n.start,n.end,h,o)}))},_4=function(t,e,n,r){u.info("Drawing flowchart"),r.db.clear(),v2.setGen("gen-2"),r.parser.parse(t);let i=r.db.getDirection();void 0===i&&(i="TD");const{securityLevel:o,flowchart:s}=nP(),a=s.nodeSpacing||50,c=s.rankSpacing||50;let l;"sandbox"===o&&(l=Qr("#i"+e));const d=Qr("sandbox"===o?l.nodes()[0].contentDocument.body:"body"),h="sandbox"===o?l.nodes()[0].contentDocument:document,g=new lX.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:a,ranksep:c,marginx:0,marginy:0}).setDefaultEdgeLabel((function(){return{}}));let f;const p=r.db.getSubGraphs();u.info("Subgraphs - ",p);for(let t=p.length-1;t>=0;t--)f=p[t],u.info("Subgraph - ",f),r.db.addVertex(f.id,f.title,"group",void 0,f.classes,f.dir);const m=r.db.getVertices(),b=r.db.getEdges();u.info(b);let k=0;for(k=p.length-1;k>=0;k--){f=p[k],oi("cluster").append("text");for(let t=0;t<f.nodes.length;t++)u.info("Setting up subgraphs",f.nodes[t],f.id),g.setParent(f.nodes[t],f.id)}w4(m,g,e,d,h,r),y4(b,g);const w=d.select(`[id="${e}"]`);yR(r.db,w,e);const y=d.select("#"+e+" g");if(q0(y,g,["point","circle","cross"],"flowchart",e),gP(g,w,s.diagramPadding,s.useMaxWidth),r.db.indexNodes("subGraph"+k),!s.htmlLabels){const t=h.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let e=0;e<t.length;e++){const n=t[e],r=n.getBBox(),i=h.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("rx",0),i.setAttribute("ry",0),i.setAttribute("width",r.width),i.setAttribute("height",r.height),n.insertBefore(i,n.firstChild)}}Object.keys(m).forEach((function(t){const n=m[t];if(n.link){const r=Qr("#"+e+' [id="'+t+'"]');if(r){const t=h.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",n.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",n.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===o?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):n.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",n.linkTarget);const e=r.insert((function(){return t}),":first-child"),i=r.select(".label-container");i&&e.append((function(){return i.node()}));const s=r.select(".label");s&&e.append((function(){return s.node()}))}}}))},v4={setConf:function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)k4[e[n]]=t[e[n]]},addVertices:w4,addEdges:y4,getClasses:function(t,e){u.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(t){return}},draw:_4};var A4=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,5],r=[7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],i=[1,15],o=[1,16],s=[1,17],a=[1,18],c=[1,19],l=[1,20],d=[1,21],u=[1,22],h=[1,23],g=[1,24],f=[1,25],p=[1,26],m=[1,28],b=[1,30],k=[1,33],w=[5,7,9,11,12,13,14,15,16,17,18,19,20,22,24,25,27,34,39],y={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,excludes:16,includes:17,todayMarker:18,title:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,clickStatement:26,taskTxt:27,taskData:28,openDirective:29,typeDirective:30,closeDirective:31,":":32,argDirective:33,click:34,callbackname:35,callbackargs:36,href:37,clickStatementDebug:38,open_directive:39,type_directive:40,arg_directive:41,close_directive:42,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"excludes",17:"includes",18:"todayMarker",19:"title",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"taskTxt",28:"taskData",32:":",34:"click",35:"callbackname",36:"callbackargs",37:"href",39:"open_directive",40:"type_directive",41:"arg_directive",42:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[26,2],[26,3],[26,3],[26,4],[26,3],[26,4],[26,2],[38,2],[38,3],[38,3],[38,4],[38,3],[38,4],[38,2],[29,1],[30,1],[33,1],[31,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 2:return o[a-1];case 3:case 7:case 8:this.$=[];break;case 4:o[a-1].push(o[a]),this.$=o[a-1];break;case 5:case 6:this.$=o[a];break;case 9:r.setDateFormat(o[a].substr(11)),this.$=o[a].substr(11);break;case 10:r.enableInclusiveEndDates(),this.$=o[a].substr(18);break;case 11:r.TopAxis(),this.$=o[a].substr(8);break;case 12:r.setAxisFormat(o[a].substr(11)),this.$=o[a].substr(11);break;case 13:r.setExcludes(o[a].substr(9)),this.$=o[a].substr(9);break;case 14:r.setIncludes(o[a].substr(9)),this.$=o[a].substr(9);break;case 15:r.setTodayMarker(o[a].substr(12)),this.$=o[a].substr(12);break;case 16:r.setDiagramTitle(o[a].substr(6)),this.$=o[a].substr(6);break;case 17:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 18:case 19:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 20:r.addSection(o[a].substr(8)),this.$=o[a].substr(8);break;case 22:r.addTask(o[a-1],o[a]),this.$="task";break;case 26:this.$=o[a-1],r.setClickEvent(o[a-1],o[a],null);break;case 27:this.$=o[a-2],r.setClickEvent(o[a-2],o[a-1],o[a]);break;case 28:this.$=o[a-2],r.setClickEvent(o[a-2],o[a-1],null),r.setLink(o[a-2],o[a]);break;case 29:this.$=o[a-3],r.setClickEvent(o[a-3],o[a-2],o[a-1]),r.setLink(o[a-3],o[a]);break;case 30:this.$=o[a-2],r.setClickEvent(o[a-2],o[a],null),r.setLink(o[a-2],o[a-1]);break;case 31:this.$=o[a-3],r.setClickEvent(o[a-3],o[a-1],o[a]),r.setLink(o[a-3],o[a-2]);break;case 32:this.$=o[a-1],r.setLink(o[a-1],o[a]);break;case 33:case 39:this.$=o[a-1]+" "+o[a];break;case 34:case 35:case 37:this.$=o[a-2]+" "+o[a-1]+" "+o[a];break;case 36:case 38:this.$=o[a-3]+" "+o[a-2]+" "+o[a-1]+" "+o[a];break;case 40:r.parseDirective("%%{","open_directive");break;case 41:r.parseDirective(o[a],"type_directive");break;case 42:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 43:r.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:e,29:4,39:n},{1:[3]},{3:6,4:2,5:e,29:4,39:n},t(r,[2,3],{6:7}),{30:8,40:[1,9]},{40:[2,40]},{1:[2,1]},{4:29,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:i,13:o,14:s,15:a,16:c,17:l,18:d,19:u,20:h,22:g,24:f,25:p,26:27,27:m,29:4,34:b,39:n},{31:31,32:[1,32],42:k},t([32,42],[2,41]),t(r,[2,8],{1:[2,2]}),t(r,[2,4]),{4:29,10:34,12:i,13:o,14:s,15:a,16:c,17:l,18:d,19:u,20:h,22:g,24:f,25:p,26:27,27:m,29:4,34:b,39:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,9]),t(r,[2,10]),t(r,[2,11]),t(r,[2,12]),t(r,[2,13]),t(r,[2,14]),t(r,[2,15]),t(r,[2,16]),{21:[1,35]},{23:[1,36]},t(r,[2,19]),t(r,[2,20]),t(r,[2,21]),{28:[1,37]},t(r,[2,23]),{35:[1,38],37:[1,39]},{11:[1,40]},{33:41,41:[1,42]},{11:[2,43]},t(r,[2,5]),t(r,[2,17]),t(r,[2,18]),t(r,[2,22]),t(r,[2,26],{36:[1,43],37:[1,44]}),t(r,[2,32],{35:[1,45]}),t(w,[2,24]),{31:46,42:k},{42:[2,42]},t(r,[2,27],{37:[1,47]}),t(r,[2,28]),t(r,[2,30],{36:[1,48]}),{11:[1,49]},t(r,[2,29]),t(r,[2,31]),t(w,[2,25])],defaultActions:{5:[2,40],6:[2,1],33:[2,43],42:[2,42]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},_={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),39;case 1:return this.begin("type_directive"),40;case 2:return this.popState(),this.begin("arg_directive"),32;case 3:return this.popState(),this.popState(),42;case 4:return 41;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:case 20:case 23:case 26:case 29:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:case 16:case 17:case 18:break;case 15:return 11;case 19:this.begin("href");break;case 21:return 37;case 22:this.begin("callbackname");break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 35;case 27:return 36;case 28:this.begin("click");break;case 30:return 34;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 17;case 37:return 16;case 38:return 18;case 39:return"date";case 40:return 19;case 41:return"accDescription";case 42:return 25;case 43:return 27;case 44:return 28;case 45:return 32;case 46:return 7;case 47:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],inclusive:!0}}};function v(){this.yy={}}return y.lexer=_,v.prototype=y,y.Parser=v,new v}();A4.parser=A4;const C4=t=>null!==t.match(/^\s*gantt/);let x4="",E4="",T4="",S4=[],D4=[],M4={},I4=[],B4=[],L4="";const N4=["active","done","crit","milestone"];let O4=[],P4=!1,R4=!1,z4=0;const F4=function(){I4=[],B4=[],L4="",O4=[],Y4=0,Q4=void 0,X4=void 0,J4=[],x4="",E4="",T4="",S4=[],D4=[],P4=!1,R4=!1,z4=0,M4={},UP()},j4=function(){let t=n3();const e=10;let n=0;for(;!t&&n<e;)t=n3(),n++;return B4=J4,B4},V4=function(t,e,n,r){return!(r.indexOf(t.format(e.trim()))>=0)&&(t.isoWeekday()>=6&&n.indexOf("weekends")>=0||n.indexOf(t.format("dddd").toLowerCase())>=0||n.indexOf(t.format(e.trim()))>=0)},$4=function(t,e,n,r){if(!n.length||t.manualEndTime)return;let i=l(t.startTime,e,!0);i.add(1,"d");let o=l(t.endTime,e,!0),s=H4(i,o,e,n,r);t.endTime=o.toDate(),t.renderEndTime=s},H4=function(t,e,n,r,i){let o=!1,s=null;for(;t<=e;)o||(s=e.toDate()),o=V4(t,n,r,i),o&&e.add(1,"d"),t.add(1,"d");return s},U4=function(t,e,n){n=n.trim();const r=/^after\s+([\d\w- ]+)/.exec(n.trim());if(null!==r){let t=null;if(r[1].split(" ").forEach((function(e){let n=e3(e);void 0!==n&&(t?n.endTime>t.endTime&&(t=n):t=n)})),t)return t.endTime;{const t=new Date;return t.setHours(0,0,0,0),t}}let i=l(n,e.trim(),!0);if(i.isValid())return i.toDate();{u.debug("Invalid date:"+n),u.debug("With date format:"+e.trim());const t=new Date(n);if(void 0===t||isNaN(t.getTime()))throw new Error("Invalid date:"+n);return t}},W4=function(t){const e=/^(\d+(?:\.\d+)?)([yMwdhms]|ms)$/.exec(t.trim());return null!==e?l.duration(Number.parseFloat(e[1]),e[2]):l.duration.invalid()},q4=function(t,e,n,r){r=r||!1,n=n.trim();let i=l(n,e.trim(),!0);if(i.isValid())return r&&i.add(1,"d"),i.toDate();const o=l(t),s=W4(n);return s.isValid()&&o.add(s),o.toDate()};let Y4=0;const G4=function(t){return void 0===t?(Y4+=1,"task"+Y4):t},Z4=function(t,e){let n;n=":"===e.substr(0,1)?e.substr(1,e.length):e;const r=n.split(","),i={};c3(r,i,N4);for(let t=0;t<r.length;t++)r[t]=r[t].trim();let o="";switch(r.length){case 1:i.id=G4(),i.startTime=t.endTime,o=r[0];break;case 2:i.id=G4(),i.startTime=U4(void 0,x4,r[0]),o=r[1];break;case 3:i.id=G4(r[0]),i.startTime=U4(void 0,x4,r[1]),o=r[2]}return o&&(i.endTime=q4(i.startTime,x4,o,P4),i.manualEndTime=l(o,"YYYY-MM-DD",!0).isValid(),$4(i,x4,D4,S4)),i},K4=function(t,e){let n;n=":"===e.substr(0,1)?e.substr(1,e.length):e;const r=n.split(","),i={};c3(r,i,N4);for(let t=0;t<r.length;t++)r[t]=r[t].trim();switch(r.length){case 1:i.id=G4(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:r[0]};break;case 2:i.id=G4(),i.startTime={type:"getStartDate",startData:r[0]},i.endTime={data:r[1]};break;case 3:i.id=G4(r[0]),i.startTime={type:"getStartDate",startData:r[1]},i.endTime={data:r[2]}}return i};let Q4,X4,J4=[];const t3={},e3=function(t){const e=t3[t];return J4[e]},n3=function(){const t=function(t){const e=J4[t];let n="";switch(J4[t].raw.startTime.type){case"prevTaskEnd":{const t=e3(e.prevTaskId);e.startTime=t.endTime;break}case"getStartDate":n=U4(void 0,x4,J4[t].raw.startTime.startData),n&&(J4[t].startTime=n)}return J4[t].startTime&&(J4[t].endTime=q4(J4[t].startTime,x4,J4[t].raw.endTime.data,P4),J4[t].endTime&&(J4[t].processed=!0,J4[t].manualEndTime=l(J4[t].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),$4(J4[t],x4,D4,S4))),J4[t].processed};let e=!0;for(let n=0;n<J4.length;n++)t(n),e=e&&J4[n].processed;return e},r3=function(t,e){let n=e;"loose"!==nP().securityLevel&&(n=p(e)),t.split(",").forEach((function(t){void 0!==e3(t)&&(s3(t,(()=>{window.open(n,"_self")})),M4[t]=n)})),i3(t,"clickable")},i3=function(t,e){t.split(",").forEach((function(t){let n=e3(t);void 0!==n&&n.classes.push(e)}))},o3=function(t,e,n){if("loose"!==nP().securityLevel)return;if(void 0===e)return;let r=[];if("string"==typeof n){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<r.length;t++){let e=r[t].trim();'"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substr(1,e.length-2)),r[t]=e}}0===r.length&&r.push(t),void 0!==e3(t)&&s3(t,(()=>{JN.runFunc(e,...r)}))},s3=function(t,e){O4.push((function(){const n=document.querySelector(`[id="${t}"]`);null!==n&&n.addEventListener("click",(function(){e()}))})),O4.push((function(){const n=document.querySelector(`[id="${t}-text"]`);null!==n&&n.addEventListener("click",(function(){e()}))}))},a3={parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().gantt,clear:F4,setDateFormat:function(t){x4=t},getDateFormat:function(){return x4},enableInclusiveEndDates:function(){P4=!0},endDatesAreInclusive:function(){return P4},enableTopAxis:function(){R4=!0},topAxisEnabled:function(){return R4},setAxisFormat:function(t){E4=t},getAxisFormat:function(){return E4},setTodayMarker:function(t){T4=t},getTodayMarker:function(){return T4},setAccTitle:WP,getAccTitle:qP,setDiagramTitle:ZP,getDiagramTitle:KP,setAccDescription:YP,getAccDescription:GP,addSection:function(t){L4=t,I4.push(t)},getSections:function(){return I4},getTasks:j4,addTask:function(t,e){const n={section:L4,type:L4,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},r=K4(X4,e);n.raw.startTime=r.startTime,n.raw.endTime=r.endTime,n.id=r.id,n.prevTaskId=X4,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,n.order=z4,z4++;const i=J4.push(n);X4=n.id,t3[n.id]=i-1},findTaskById:e3,addTaskOrg:function(t,e){const n={section:L4,type:L4,description:t,task:t,classes:[]},r=Z4(Q4,e);n.startTime=r.startTime,n.endTime=r.endTime,n.id=r.id,n.active=r.active,n.done=r.done,n.crit=r.crit,n.milestone=r.milestone,Q4=n,B4.push(n)},setIncludes:function(t){S4=t.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return S4},setExcludes:function(t){D4=t.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return D4},setClickEvent:function(t,e,n){t.split(",").forEach((function(t){o3(t,e,n)})),i3(t,"clickable")},setLink:r3,getLinks:function(){return M4},bindFunctions:function(t){O4.forEach((function(e){e(t)}))},parseDuration:W4,isInvalidDate:V4};function c3(t,e,n){let r=!0;for(;r;)r=!1,n.forEach((function(n){const i=new RegExp("^\\s*"+n+"\\s*$");t[0].match(i)&&(e[n]=!0,t.shift(1),r=!0)}))}let l3;const d3={setConf:function(){u.debug("Something is calling, setConf, remove the call")},draw:function(t,e,n,r){const i=nP().gantt,o=nP().securityLevel;let s;"sandbox"===o&&(s=Qr("#i"+e));const a=Qr("sandbox"===o?s.nodes()[0].contentDocument.body:"body"),c="sandbox"===o?s.nodes()[0].contentDocument:document,d=c.getElementById(e);l3=d.parentElement.offsetWidth,void 0===l3&&(l3=1200),void 0!==i.useWidth&&(l3=i.useWidth);const u=r.db.getTasks(),h=u.length*(i.barHeight+i.barGap)+2*i.topPadding;d.setAttribute("viewBox","0 0 "+l3+" "+h);const g=a.select(`[id="${e}"]`),f=bx().domain([Ft(u,(function(t){return t.startTime})),Rt(u,(function(t){return t.endTime}))]).rangeRound([0,l3-i.leftPadding-i.rightPadding]);let p=[];for(let t=0;t<u.length;t++)p.push(u[t].type);const m=p;function b(t,e){const n=t.startTime,r=e.startTime;let i=0;return n>r?i=1:n<r&&(i=-1),i}function k(t,e,n){const o=i.barHeight,s=o+i.barGap,a=i.topPadding,c=i.leftPadding,l=N_().domain([0,p.length]).range(["#00B9FA","#F95002"]).interpolate(Ls);y(s,a,c,e,n,t,r.db.getExcludes(),r.db.getIncludes()),_(c,a,e,n),w(t,s,a,c,o,l,e),v(s,a),A(c,a,e,n)}function w(t,n,o,s,a,c,l){g.append("g").selectAll("rect").data(t).enter().append("rect").attr("x",0).attr("y",(function(t,e){return t.order*n+o-2})).attr("width",(function(){return l-i.rightPadding/2})).attr("height",n).attr("class",(function(t){for(let e=0;e<p.length;e++)if(t.type===p[e])return"section section"+e%i.numberSectionStyles;return"section section0"}));const d=g.append("g").selectAll("rect").data(t).enter(),u=r.db.getLinks();if(d.append("rect").attr("id",(function(t){return t.id})).attr("rx",3).attr("ry",3).attr("x",(function(t){return t.milestone?f(t.startTime)+s+.5*(f(t.endTime)-f(t.startTime))-.5*a:f(t.startTime)+s})).attr("y",(function(t,e){return t.order*n+o})).attr("width",(function(t){return t.milestone?a:f(t.renderEndTime||t.endTime)-f(t.startTime)})).attr("height",a).attr("transform-origin",(function(t,e){return e=t.order,(f(t.startTime)+s+.5*(f(t.endTime)-f(t.startTime))).toString()+"px "+(e*n+o+.5*a).toString()+"px"})).attr("class",(function(t){const e="task";let n="";t.classes.length>0&&(n=t.classes.join(" "));let r=0;for(let e=0;e<p.length;e++)t.type===p[e]&&(r=e%i.numberSectionStyles);let o="";return t.active?t.crit?o+=" activeCrit":o=" active":t.done?o=t.crit?" doneCrit":" done":t.crit&&(o+=" crit"),0===o.length&&(o=" task"),t.milestone&&(o=" milestone "+o),o+=r,o+=" "+n,e+o})),d.append("text").attr("id",(function(t){return t.id+"-text"})).text((function(t){return t.task})).attr("font-size",i.fontSize).attr("x",(function(t){let e=f(t.startTime),n=f(t.renderEndTime||t.endTime);t.milestone&&(e+=.5*(f(t.endTime)-f(t.startTime))-.5*a),t.milestone&&(n=e+a);const r=this.getBBox().width;return r>n-e?n+r+1.5*i.leftPadding>l?e+s-5:n+s+5:(n-e)/2+e+s})).attr("y",(function(t,e){return t.order*n+i.barHeight/2+(i.fontSize/2-2)+o})).attr("text-height",a).attr("class",(function(t){const e=f(t.startTime);let n=f(t.endTime);t.milestone&&(n=e+a);const r=this.getBBox().width;let o="";t.classes.length>0&&(o=t.classes.join(" "));let s=0;for(let e=0;e<p.length;e++)t.type===p[e]&&(s=e%i.numberSectionStyles);let c="";return t.active&&(c=t.crit?"activeCritText"+s:"activeText"+s),t.done?c=t.crit?c+" doneCritText"+s:c+" doneText"+s:t.crit&&(c=c+" critText"+s),t.milestone&&(c+=" milestoneText"),r>n-e?n+r+1.5*i.leftPadding>l?o+" taskTextOutsideLeft taskTextOutside"+s+" "+c:o+" taskTextOutsideRight taskTextOutside"+s+" "+c+" width-"+r:o+" taskText taskText"+s+" "+c+" width-"+r})),"sandbox"===nP().securityLevel){let t;t=Qr("#i"+e);const n=t.nodes()[0].contentDocument;d.filter((function(t){return void 0!==u[t.id]})).each((function(t){var e=n.querySelector("#"+t.id),r=n.querySelector("#"+t.id+"-text");const i=e.parentNode;var o=n.createElement("a");o.setAttribute("xlink:href",u[t.id]),o.setAttribute("target","_top"),i.appendChild(o),o.appendChild(e),o.appendChild(r)}))}}function y(t,e,n,o,s,a,c,d){const u=a.reduce(((t,{startTime:e})=>t?Math.min(t,e):e),0),h=a.reduce(((t,{endTime:e})=>t?Math.max(t,e):e),0),p=r.db.getDateFormat();if(!u||!h)return;const m=[];let b=null,k=l(u);for(;k.valueOf()<=h;)r.db.isInvalidDate(k,p,c,d)?b?b.end=k.clone():b={start:k.clone(),end:k.clone()}:b&&(m.push(b),b=null),k.add(1,"d");g.append("g").selectAll("rect").data(m).enter().append("rect").attr("id",(function(t){return"exclude-"+t.start.format("YYYY-MM-DD")})).attr("x",(function(t){return f(t.start)+n})).attr("y",i.gridLineStartPadding).attr("width",(function(t){const e=t.end.clone().add(1,"day");return f(e)-f(t.start)})).attr("height",s-e-i.gridLineStartPadding).attr("transform-origin",(function(e,r){return(f(e.start)+n+.5*(f(e.end)-f(e.start))).toString()+"px "+(r*t+.5*s).toString()+"px"})).attr("class","exclude-range")}function _(t,e,n,o){let s=He(f).tickSize(-o+e+i.gridLineStartPadding).tickFormat(VA(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(g.append("g").attr("class","grid").attr("transform","translate("+t+", "+(o-50)+")").call(s).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||i.topAxis){let n=Ve(f).tickSize(-o+e+i.gridLineStartPadding).tickFormat(VA(r.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));g.append("g").attr("class","grid").attr("transform","translate("+t+", "+e+")").call(n).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function v(t,e){const n=[];let r=0;for(let t=0;t<p.length;t++)n[t]=[p[t],E(p[t],m)];g.append("g").selectAll("text").data(n).enter().append((function(t){const e=t[0].split(gI.lineBreakRegex),n=-(e.length-1)/2,r=c.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("dy",n+"em");for(let t=0;t<e.length;t++){const n=c.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttribute("alignment-baseline","central"),n.setAttribute("x","10"),t>0&&n.setAttribute("dy","1em"),n.textContent=e[t],r.appendChild(n)}return r})).attr("x",10).attr("y",(function(i,o){if(!(o>0))return i[1]*t/2+e;for(let s=0;s<o;s++)return r+=n[o-1][1],i[1]*t/2+r*t+e})).attr("font-size",i.sectionFontSize).attr("font-size",i.sectionFontSize).attr("class",(function(t){for(let e=0;e<p.length;e++)if(t[0]===p[e])return"sectionTitle sectionTitle"+e%i.numberSectionStyles;return"sectionTitle"}))}function A(t,e,n,o){const s=r.db.getTodayMarker();if("off"===s)return;const a=g.append("g").attr("class","today"),c=new Date,l=a.append("line");l.attr("x1",f(c)+t).attr("x2",f(c)+t).attr("y1",i.titleTopMargin).attr("y2",o-i.titleTopMargin).attr("class","today"),""!==s&&l.attr("style",s.replace(/,/g,";"))}function C(t){const e={},n=[];for(let r=0,i=t.length;r<i;++r)Object.prototype.hasOwnProperty.call(e,t[r])||(e[t[r]]=!0,n.push(t[r]));return n}function x(t){let e=t.length;const n={};for(;e;)n[t[--e]]=(n[t[e]]||0)+1;return n}function E(t,e){return x(e)[t]||0}p=C(p),u.sort(b),k(u,l3,h),hP(g,h,l3,i.useMaxWidth),g.append("text").text(r.db.getDiagramTitle()).attr("x",l3/2).attr("y",i.titleTopMargin).attr("class","titleText"),yR(r.db,g,e)}};var u3=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[6,9,10],n={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,e,n,r,i,o,s){switch(o.length,i){case 1:return r;case 4:break;case 6:r.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},t(e,[2,3]),t(e,[2,4]),t(e,[2,5]),t(e,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},r={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};function i(){this.yy={}}return n.lexer=r,i.prototype=n,n.Parser=i,new i}();u3.parser=u3;var h3="",g3=!1;const f3={setMessage:t=>{u.debug("Setting message to: "+t),h3=t},getMessage:()=>h3,setInfo:t=>{g3=t},getInfo:()=>g3,clear:UP},p3={draw:(t,e,n,r)=>{try{u.debug("Rendering info diagram\n"+t);const r=nP().securityLevel;let i;"sandbox"===r&&(i=Qr("#i"+e));const o=Qr("sandbox"===r?i.nodes()[0].contentDocument.body:"body").select("#"+e);o.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+n),o.attr("height",100),o.attr("width",400)}catch(t){u.error("Error while rendering info diagram"),u.error(t.message)}}},m3=t=>null!==t.match(/^\s*info/);var b3=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,4],n=[1,5],r=[1,6],i=[1,7],o=[1,9],s=[1,11,13,15,17,19,20,26,27,28,29],a=[2,5],c=[1,6,11,13,15,17,19,20,26,27,28,29],l=[26,27,28],d=[2,8],u=[1,18],h=[1,19],g=[1,20],f=[1,21],p=[1,22],m=[1,23],b=[1,28],k=[6,26,27,28,29],w={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 4:r.setShowData(!0);break;case 7:this.$=o[a-1];break;case 9:r.addSection(o[a-1],r.cleanupValue(o[a]));break;case 10:this.$=o[a].trim(),r.setDiagramTitle(this.$);break;case 11:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 12:case 13:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 14:r.addSection(o[a].substr(8)),this.$=o[a].substr(8);break;case 21:r.parseDirective("%%{","open_directive");break;case 22:r.parseDirective(o[a],"type_directive");break;case 23:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 24:r.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:o},{1:[3]},{3:10,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:o},{3:11,4:2,5:3,6:e,21:8,26:n,27:r,28:i,29:o},t(s,a,{7:12,8:[1,13]}),t(c,[2,18]),t(c,[2,19]),t(c,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},t(l,d,{21:8,9:16,10:17,5:24,1:[2,3],11:u,13:h,15:g,17:f,19:p,20:m,29:o}),t(s,a,{7:25}),{23:26,24:[1,27],32:b},t([24,32],[2,22]),t(s,[2,6]),{4:29,26:n,27:r,28:i},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},t(l,[2,13]),t(l,[2,14]),t(l,[2,15]),t(l,d,{21:8,9:16,10:17,5:24,1:[2,4],11:u,13:h,15:g,17:f,19:p,20:m,29:o}),t(k,[2,16]),{25:34,31:[1,35]},t(k,[2,24]),t(s,[2,7]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),{23:36,32:b},{32:[2,23]},t(k,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},y={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:case 8:case 9:break;case 7:return 26;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:case 20:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};function _(){this.yy={}}return w.lexer=y,_.prototype=w,w.Parser=_,new _}();b3.parser=b3;const k3=t=>null!==t.match(/^\s*pie/);let w3={},y3=!1;const _3={parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().pie,addSection:function(t,e){t=gI.sanitizeText(t,nP()),void 0===w3[t]&&(w3[t]=e,u.debug("Added new section :",t))},getSections:()=>w3,cleanupValue:function(t){return":"===t.substring(0,1)?(t=t.substring(1).trim(),Number(t.trim())):Number(t.trim())},clear:function(){w3={},y3=!1,UP()},setAccTitle:WP,getAccTitle:qP,setDiagramTitle:ZP,getDiagramTitle:KP,setShowData:function(t){y3=t},getShowData:function(){return y3},getAccDescription:GP,setAccDescription:YP};let v3,A3=nP();const C3=450,x3={draw:(t,e,n,r)=>{try{A3=nP(),u.debug("Rendering info diagram\n"+t);const n=nP().securityLevel;let b;"sandbox"===n&&(b=Qr("#i"+e));const k=Qr("sandbox"===n?b.nodes()[0].contentDocument.body:"body"),w="sandbox"===n?b.nodes()[0].contentDocument:document;r.db.clear(),r.parser.parse(t),u.debug("Parsed info diagram");const y=w.getElementById(e);v3=y.parentElement.offsetWidth,void 0===v3&&(v3=1200),void 0!==A3.useWidth&&(v3=A3.useWidth),void 0!==A3.pie.useWidth&&(v3=A3.pie.useWidth);const _=k.select("#"+e);hP(_,C3,v3,A3.pie.useMaxWidth),yR(r.db,_,e),y.setAttribute("viewBox","0 0 "+v3+" "+C3);var i=40,o=18,s=4,a=Math.min(v3,C3)/2-i,c=_.append("g").attr("transform","translate("+v3/2+","+C3/2+")"),l=r.db.getSections(),d=0;Object.keys(l).forEach((function(t){d+=l[t]}));const v=A3.themeVariables;var h=[v.pie1,v.pie2,v.pie3,v.pie4,v.pie5,v.pie6,v.pie7,v.pie8,v.pie9,v.pie10,v.pie11,v.pie12],g=b_().range(h),f=FT().value((function(t){return t[1]}))(Object.entries(l)),p=ST().innerRadius(0).outerRadius(a);c.selectAll("mySlices").data(f).enter().append("path").attr("d",p).attr("fill",(function(t){return g(t.data[0])})).attr("class","pieCircle"),c.selectAll("mySlices").data(f).enter().append("text").text((function(t){return(t.data[1]/d*100).toFixed(0)+"%"})).attr("transform",(function(t){return"translate("+p.centroid(t)+")"})).style("text-anchor","middle").attr("class","slice"),c.append("text").text(r.db.getDiagramTitle()).attr("x",0).attr("y",-(C3-50)/2).attr("class","pieTitleText");var m=c.selectAll(".legend").data(g.domain()).enter().append("g").attr("class","legend").attr("transform",(function(t,e){var n=o+s,r=n*g.domain().length/2;return"translate("+12*o+","+(e*n-r)+")"}));m.append("rect").attr("width",o).attr("height",o).style("fill",g).style("stroke",g),m.data(f).append("text").attr("x",o+s).attr("y",o-s).text((function(t){return r.db.getShowData()||A3.showData||A3.pie.showData?t.data[0]+" ["+t.data[1]+"]":t.data[0]}))}catch(t){u.error("Error while rendering info diagram"),u.error(t)}}};var E3=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,3],n=[1,5],r=[1,6],i=[1,7],o=[1,8],s=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],a=[1,22],c=[2,13],l=[1,26],d=[1,27],u=[1,28],h=[1,29],g=[1,30],f=[1,31],p=[1,24],m=[1,32],b=[1,33],k=[1,36],w=[71,72],y=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],_=[1,56],v=[1,57],A=[1,58],C=[1,59],x=[1,60],E=[1,61],T=[1,62],S=[62,63],D=[1,74],M=[1,70],I=[1,71],B=[1,72],L=[1,73],N=[1,75],O=[1,79],P=[1,80],R=[1,77],z=[1,78],F=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],j={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 6:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 7:case 8:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 9:r.parseDirective("%%{","open_directive");break;case 10:r.parseDirective(o[a],"type_directive");break;case 11:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 12:r.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:r.addRequirement(o[a-3],o[a-4]);break;case 20:r.setNewReqId(o[a-2]);break;case 21:r.setNewReqText(o[a-2]);break;case 22:r.setNewReqRisk(o[a-2]);break;case 23:r.setNewReqVerifyMethod(o[a-2]);break;case 26:this.$=r.RequirementType.REQUIREMENT;break;case 27:this.$=r.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=r.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=r.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=r.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=r.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=r.RiskLevel.LOW_RISK;break;case 33:this.$=r.RiskLevel.MED_RISK;break;case 34:this.$=r.RiskLevel.HIGH_RISK;break;case 35:this.$=r.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=r.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=r.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=r.VerifyType.VERIFY_TEST;break;case 39:r.addElement(o[a-3]);break;case 40:r.setNewElementType(o[a-2]);break;case 41:r.setNewElementDocRef(o[a-2]);break;case 44:r.addRelationship(o[a-2],o[a],o[a-4]);break;case 45:r.addRelationship(o[a-2],o[a-4],o[a]);break;case 46:this.$=r.Relationships.CONTAINS;break;case 47:this.$=r.Relationships.COPIES;break;case 48:this.$=r.Relationships.DERIVES;break;case 49:this.$=r.Relationships.SATISFIES;break;case 50:this.$=r.Relationships.VERIFIES;break;case 51:this.$=r.Relationships.REFINES;break;case 52:this.$=r.Relationships.TRACES}},table:[{3:1,4:2,6:e,9:4,14:n,16:r,18:i,19:o},{1:[3]},{3:10,4:2,5:[1,9],6:e,9:4,14:n,16:r,18:i,19:o},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},t(s,[2,8]),{20:[2,9]},{3:16,4:2,6:e,9:4,14:n,16:r,18:i,19:o},{1:[2,2]},{4:21,5:a,7:17,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{11:34,12:[1,35],22:k},t([12,22],[2,10]),t(s,[2,6]),t(s,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:a,7:38,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{4:21,5:a,7:39,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{4:21,5:a,7:40,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{4:21,5:a,7:41,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{4:21,5:a,7:42,8:c,9:4,14:n,16:r,18:i,19:o,23:18,24:19,25:20,26:23,32:25,40:l,41:d,42:u,43:h,44:g,45:f,53:p,71:m,72:b},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},t(w,[2,26]),t(w,[2,27]),t(w,[2,28]),t(w,[2,29]),t(w,[2,30]),t(w,[2,31]),t(y,[2,55]),t(y,[2,56]),t(s,[2,4]),{13:51,21:[1,52]},t(s,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:_,65:v,66:A,67:C,68:x,69:E,70:T},{61:63,64:_,65:v,66:A,67:C,68:x,69:E,70:T},{11:64,22:k},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},t(S,[2,46]),t(S,[2,47]),t(S,[2,48]),t(S,[2,49]),t(S,[2,50]),t(S,[2,51]),t(S,[2,52]),{63:[1,68]},t(s,[2,5]),{5:D,29:69,30:M,33:I,35:B,37:L,39:N},{5:O,39:P,55:76,56:R,58:z},{32:81,71:m,72:b},{32:82,71:m,72:b},t(F,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:D,29:87,30:M,33:I,35:B,37:L,39:N},t(F,[2,25]),t(F,[2,39]),{31:[1,88]},{31:[1,89]},{5:O,39:P,55:90,56:R,58:z},t(F,[2,43]),t(F,[2,44]),t(F,[2,45]),{32:91,71:m,72:b},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},t(F,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},t(F,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:D,29:116,30:M,33:I,35:B,37:L,39:N},{5:D,29:117,30:M,33:I,35:B,37:L,39:N},{5:D,29:118,30:M,33:I,35:B,37:L,39:N},{5:D,29:119,30:M,33:I,35:B,37:L,39:N},{5:O,39:P,55:120,56:R,58:z},{5:O,39:P,55:121,56:R,58:z},t(F,[2,20]),t(F,[2,21]),t(F,[2,22]),t(F,[2,23]),t(F,[2,40]),t(F,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},V={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 53:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};function $(){this.yy={}}return j.lexer=V,$.prototype=j,j.Parser=$,new $}();E3.parser=E3;const T3=t=>null!==t.match(/^\s*requirement(Diagram)?/);let S3=[],D3={},M3={},I3={},B3={};const L3={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().req,addRequirement:(t,e)=>(void 0===M3[t]&&(M3[t]={name:t,type:e,id:D3.id,text:D3.text,risk:D3.risk,verifyMethod:D3.verifyMethod}),D3={},M3[t]),getRequirements:()=>M3,setNewReqId:t=>{void 0!==D3&&(D3.id=t)},setNewReqText:t=>{void 0!==D3&&(D3.text=t)},setNewReqRisk:t=>{void 0!==D3&&(D3.risk=t)},setNewReqVerifyMethod:t=>{void 0!==D3&&(D3.verifyMethod=t)},setAccTitle:WP,getAccTitle:qP,setAccDescription:YP,getAccDescription:GP,addElement:t=>(void 0===B3[t]&&(B3[t]={name:t,type:I3.type,docRef:I3.docRef},u.info("Added new requirement: ",t)),I3={},B3[t]),getElements:()=>B3,setNewElementType:t=>{void 0!==I3&&(I3.type=t)},setNewElementDocRef:t=>{void 0!==I3&&(I3.docRef=t)},addRelationship:(t,e,n)=>{S3.push({type:t,src:e,dst:n})},getRelationships:()=>S3,clear:()=>{S3=[],D3={},M3={},I3={},B3={},UP()}},N3={CONTAINS:"contains",ARROW:"arrow"},O3={ReqMarkers:N3,insertLineEndings:(t,e)=>{let n=t.append("defs").append("marker").attr("id",N3.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");n.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),n.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),n.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",N3.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0\n      L${e.line_height},${e.line_height/2}\n      M${e.line_height},${e.line_height/2}\n      L0,${e.line_height}`).attr("stroke-width",1)}};let P3={},R3=0;const z3=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",P3.rect_min_width+"px").attr("height",P3.rect_min_height+"px"),F3=(t,e,n)=>{let r=P3.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",r).attr("y",P3.rect_padding).attr("dominant-baseline","hanging"),o=0;n.forEach((t=>{0==o?i.append("tspan").attr("text-anchor","middle").attr("x",P3.rect_min_width/2).attr("dy",0).text(t):i.append("tspan").attr("text-anchor","middle").attr("x",P3.rect_min_width/2).attr("dy",.75*P3.line_height).text(t),o++}));let s=1.5*P3.rect_padding+o*P3.line_height*.75;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",P3.rect_min_width).attr("y1",s).attr("y2",s),{titleNode:i,y:s}},j3=(t,e,n,r)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",P3.rect_padding).attr("y",r).attr("dominant-baseline","hanging"),o=0;const s=30;let a=[];return n.forEach((t=>{let e=t.length;for(;e>s&&o<3;){let n=t.substring(0,s);e=(t=t.substring(s,t.length)).length,a[a.length]=n,o++}if(3==o){let t=a[a.length-1];a[a.length-1]=t.substring(0,t.length-4)+"..."}else a[a.length]=t;o=0})),a.forEach((t=>{i.append("tspan").attr("x",P3.rect_padding).attr("dy",P3.line_height).text(t)})),i},V3=(t,e,n,r)=>{const i=e.node().getTotalLength(),o=e.node().getPointAtLength(.5*i),s="rel"+R3;R3++;const a=t.append("text").attr("class","req relationshipLabel").attr("id",s).attr("x",o.x).attr("y",o.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(r).node().getBBox();t.insert("rect","#"+s).attr("class","req reqLabelBox").attr("x",o.x-a.width/2).attr("y",o.y-a.height/2).attr("width",a.width).attr("height",a.height).attr("fill","white").attr("fill-opacity","85%")},$3=function(t,e,n,r,i){const o=n.edge(Y3(e.src),Y3(e.dst)),s=OT().x((function(t){return t.x})).y((function(t){return t.y})),a=t.insert("path","#"+r).attr("class","er relationshipLine").attr("d",s(o.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?a.attr("marker-start","url("+gI.getUrl(P3.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(a.attr("stroke-dasharray","10,7"),a.attr("marker-end","url("+gI.getUrl(P3.arrowMarkerAbsolute)+"#"+O3.ReqMarkers.ARROW+"_line_ending)")),V3(t,a,P3,`<<${e.type}>>`)},H3=(t,e,n)=>{Object.keys(t).forEach((r=>{let i=t[r];r=Y3(r),u.info("Added new requirement: ",r);const o=n.append("g").attr("id",r),s=z3(o,"req-"+r);let a=F3(o,r+"_title",[`<<${i.type}>>`,`${i.name}`]);j3(o,r+"_body",[`Id: ${i.id}`,`Text: ${i.text}`,`Risk: ${i.risk}`,`Verification: ${i.verifyMethod}`],a.y);const c=s.node().getBBox();e.setNode(r,{width:c.width,height:c.height,shape:"rect",id:r})}))},U3=(t,e,n)=>{Object.keys(t).forEach((r=>{let i=t[r];const o=Y3(r),s=n.append("g").attr("id",o),a="element-"+o,c=z3(s,a);let l=F3(s,a+"_title",["<<Element>>",`${r}`]);j3(s,a+"_body",[`Type: ${i.type||"Not Specified"}`,`Doc Ref: ${i.docRef||"None"}`],l.y);const d=c.node().getBBox();e.setNode(o,{width:d.width,height:d.height,shape:"rect",id:o})}))},W3=(t,e)=>(t.forEach((function(t){let n=Y3(t.src),r=Y3(t.dst);e.setEdge(n,r,{relationship:t})})),t),q3=function(t,e){e.nodes().forEach((function(n){void 0!==n&&void 0!==e.node(n)&&(t.select("#"+n),t.select("#"+n).attr("transform","translate("+(e.node(n).x-e.node(n).width/2)+","+(e.node(n).y-e.node(n).height/2)+" )"))}))},Y3=t=>t.replace(/\s/g,"").replace(/\./g,"_"),G3={draw:(t,e,n,r)=>{P3=nP().requirement,r.db.clear(),r.parser.parse(t);const i=P3.securityLevel;let o;"sandbox"===i&&(o=Qr("#i"+e));const s=Qr("sandbox"===i?o.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);O3.insertLineEndings(s,P3);const a=new lX.Graph({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:P3.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel((function(){return{}}));let c=r.db.getRequirements(),l=r.db.getElements(),d=r.db.getRelationships();H3(c,a,s),U3(l,a,s),W3(d,a),BJ.layout(a),q3(s,a),d.forEach((function(t){$3(s,t,a,e,r)}));const u=P3.rect_padding,h=s.node().getBBox(),g=h.width+2*u,f=h.height+2*u;hP(s,f,g,P3.useMaxWidth),s.attr("viewBox",`${h.x-u} ${h.y-u} ${g} ${f}`),yR(r.db,s,e)}};var Z3=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,3],r=[1,5],i=[1,7],o=[2,5],s=[1,15],a=[1,17],c=[1,18],l=[1,19],d=[1,21],u=[1,22],h=[1,23],g=[1,29],f=[1,30],p=[1,31],m=[1,32],b=[1,33],k=[1,34],w=[1,35],y=[1,36],_=[1,37],v=[1,38],A=[1,39],C=[1,40],x=[1,43],E=[1,44],T=[1,45],S=[1,46],D=[1,47],M=[1,48],I=[1,51],B=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],L=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],N=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],O=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],P=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],R=[67,68,69],z=[1,121],F=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],j={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 4:return r.apply(o[a]),o[a];case 5:case 9:this.$=[];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:case 8:case 56:this.$=o[a];break;case 12:o[a-3].type="addParticipant",o[a-3].description=r.parseMessage(o[a-1]),this.$=o[a-3];break;case 13:o[a-1].type="addParticipant",this.$=o[a-1];break;case 14:o[a-3].type="addActor",o[a-3].description=r.parseMessage(o[a-1]),this.$=o[a-3];break;case 15:o[a-1].type="addActor",this.$=o[a-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(o[a-2]),sequenceIndexStep:Number(o[a-1]),sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(o[a-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:r.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:r.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:o[a-1]};break;case 22:this.$={type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:o[a-1]};break;case 28:r.setDiagramTitle(o[a].substring(6)),this.$=o[a].substring(6);break;case 29:r.setDiagramTitle(o[a].substring(7)),this.$=o[a].substring(7);break;case 30:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 31:case 32:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 33:o[a-1].unshift({type:"loopStart",loopText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.LOOP_START}),o[a-1].push({type:"loopEnd",loopText:o[a-2],signalType:r.LINETYPE.LOOP_END}),this.$=o[a-1];break;case 34:o[a-1].unshift({type:"rectStart",color:r.parseMessage(o[a-2]),signalType:r.LINETYPE.RECT_START}),o[a-1].push({type:"rectEnd",color:r.parseMessage(o[a-2]),signalType:r.LINETYPE.RECT_END}),this.$=o[a-1];break;case 35:o[a-1].unshift({type:"optStart",optText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.OPT_START}),o[a-1].push({type:"optEnd",optText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.OPT_END}),this.$=o[a-1];break;case 36:o[a-1].unshift({type:"altStart",altText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.ALT_START}),o[a-1].push({type:"altEnd",signalType:r.LINETYPE.ALT_END}),this.$=o[a-1];break;case 37:o[a-1].unshift({type:"parStart",parText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.PAR_START}),o[a-1].push({type:"parEnd",signalType:r.LINETYPE.PAR_END}),this.$=o[a-1];break;case 38:o[a-1].unshift({type:"criticalStart",criticalText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.CRITICAL_START}),o[a-1].push({type:"criticalEnd",signalType:r.LINETYPE.CRITICAL_END}),this.$=o[a-1];break;case 39:o[a-1].unshift({type:"breakStart",breakText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.BREAK_START}),o[a-1].push({type:"breakEnd",optText:r.parseMessage(o[a-2]),signalType:r.LINETYPE.BREAK_END}),this.$=o[a-1];break;case 42:this.$=o[a-3].concat([{type:"option",optionText:r.parseMessage(o[a-1]),signalType:r.LINETYPE.CRITICAL_OPTION},o[a]]);break;case 44:this.$=o[a-3].concat([{type:"and",parText:r.parseMessage(o[a-1]),signalType:r.LINETYPE.PAR_AND},o[a]]);break;case 46:this.$=o[a-3].concat([{type:"else",altText:r.parseMessage(o[a-1]),signalType:r.LINETYPE.ALT_ELSE},o[a]]);break;case 47:this.$=[o[a-1],{type:"addNote",placement:o[a-2],actor:o[a-1].actor,text:o[a]}];break;case 48:o[a-2]=[].concat(o[a-1],o[a-1]).slice(0,2),o[a-2][0]=o[a-2][0].actor,o[a-2][1]=o[a-2][1].actor,this.$=[o[a-1],{type:"addNote",placement:r.PLACEMENT.OVER,actor:o[a-2].slice(0,2),text:o[a]}];break;case 49:this.$=[o[a-1],{type:"addLinks",actor:o[a-1].actor,text:o[a]}];break;case 50:this.$=[o[a-1],{type:"addALink",actor:o[a-1].actor,text:o[a]}];break;case 51:this.$=[o[a-1],{type:"addProperties",actor:o[a-1].actor,text:o[a]}];break;case 52:this.$=[o[a-1],{type:"addDetails",actor:o[a-1].actor,text:o[a]}];break;case 55:this.$=[o[a-2],o[a]];break;case 57:this.$=r.PLACEMENT.LEFTOF;break;case 58:this.$=r.PLACEMENT.RIGHTOF;break;case 59:this.$=[o[a-4],o[a-1],{type:"addMessage",from:o[a-4].actor,to:o[a-1].actor,signalType:o[a-3],msg:o[a]},{type:"activeStart",signalType:r.LINETYPE.ACTIVE_START,actor:o[a-1]}];break;case 60:this.$=[o[a-4],o[a-1],{type:"addMessage",from:o[a-4].actor,to:o[a-1].actor,signalType:o[a-3],msg:o[a]},{type:"activeEnd",signalType:r.LINETYPE.ACTIVE_END,actor:o[a-4]}];break;case 61:this.$=[o[a-3],o[a-1],{type:"addMessage",from:o[a-3].actor,to:o[a-1].actor,signalType:o[a-2],msg:o[a]}];break;case 62:this.$={type:"addParticipant",actor:o[a]};break;case 63:this.$=r.LINETYPE.SOLID_OPEN;break;case 64:this.$=r.LINETYPE.DOTTED_OPEN;break;case 65:this.$=r.LINETYPE.SOLID;break;case 66:this.$=r.LINETYPE.DOTTED;break;case 67:this.$=r.LINETYPE.SOLID_CROSS;break;case 68:this.$=r.LINETYPE.DOTTED_CROSS;break;case 69:this.$=r.LINETYPE.SOLID_POINT;break;case 70:this.$=r.LINETYPE.DOTTED_POINT;break;case 71:this.$=r.parseMessage(o[a].trim().substring(1));break;case 72:r.parseDirective("%%{","open_directive");break;case 73:r.parseDirective(o[a],"type_directive");break;case 74:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 75:r.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:e,5:n,6:4,7:r,11:6,79:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,11:6,79:i},{3:9,4:e,5:n,6:4,7:r,11:6,79:i},{3:10,4:e,5:n,6:4,7:r,11:6,79:i},t([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],o,{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},{13:49,14:[1,50],82:I},t([14,82],[2,73]),t(B,[2,6]),{6:41,10:52,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},t(B,[2,8]),t(B,[2,9]),{17:53,69:M},{17:54,69:M},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:M},{17:60,69:M},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},t(B,[2,28]),t(B,[2,29]),{35:[1,66]},{37:[1,67]},t(B,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},t(B,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:M},{17:89,69:M},{17:90,69:M},{17:91,69:M},t([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},t(B,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},t(B,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},t(B,[2,20]),{5:[1,102]},{5:[1,103]},t(B,[2,23]),t(B,[2,24]),t(B,[2,25]),t(B,[2,26]),t(B,[2,27]),t(B,[2,30]),t(B,[2,31]),t(L,o,{8:104}),t(L,o,{8:105}),t(L,o,{8:106}),t(N,o,{44:107,8:108}),t(O,o,{46:109,8:110}),t(P,o,{48:111,8:112}),t(L,o,{8:113}),{17:116,67:[1,114],68:[1,115],69:M},t(R,[2,63]),t(R,[2,64]),t(R,[2,65]),t(R,[2,66]),t(R,[2,67]),t(R,[2,68]),t(R,[2,69]),t(R,[2,70]),{17:117,69:M},{17:119,57:118,69:M},{69:[2,57]},{69:[2,58]},{55:120,78:z},{55:122,78:z},{55:123,78:z},{55:124,78:z},t(F,[2,10]),{13:125,82:I},{82:[2,74]},{19:[1,126]},t(B,[2,13]),{19:[1,127]},t(B,[2,15]),{5:[1,128]},t(B,[2,18]),t(B,[2,19]),t(B,[2,21]),t(B,[2,22]),{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[1,129],41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[1,130],41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[1,131],41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},{40:[1,132]},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[2,45],41:w,42:y,43:_,45:v,47:A,49:C,52:[1,133],53:x,58:E,59:T,60:S,61:D,69:M,79:i},{40:[1,134]},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[2,43],41:w,42:y,43:_,45:v,47:A,49:C,51:[1,135],53:x,58:E,59:T,60:S,61:D,69:M,79:i},{40:[1,136]},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[2,41],41:w,42:y,43:_,45:v,47:A,49:C,50:[1,137],53:x,58:E,59:T,60:S,61:D,69:M,79:i},{4:s,5:a,6:41,9:14,10:16,11:6,16:c,17:42,20:l,21:20,22:d,25:u,26:h,27:24,28:25,29:26,30:27,31:28,32:g,33:f,34:p,36:m,38:b,39:k,40:[1,138],41:w,42:y,43:_,45:v,47:A,49:C,53:x,58:E,59:T,60:S,61:D,69:M,79:i},{17:139,69:M},{17:140,69:M},{55:141,78:z},{55:142,78:z},{55:143,78:z},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},t(B,[2,17]),t(B,[2,33]),t(B,[2,34]),t(B,[2,35]),t(B,[2,36]),{19:[1,148]},t(B,[2,37]),{19:[1,149]},t(B,[2,38]),{19:[1,150]},t(B,[2,39]),{55:151,78:z},{55:152,78:z},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:M},t(F,[2,11]),t(B,[2,12]),t(B,[2,14]),t(N,o,{8:108,44:154}),t(O,o,{8:110,46:155}),t(P,o,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},V={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:case 52:case 65:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 53:return e.yytext=e.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};function $(){this.yy={}}return j.lexer=V,$.prototype=j,j.Parser=$,new $}();Z3.parser=Z3;const K3=t=>null!==t.match(/^\s*sequenceDiagram/);let Q3,X3,J3={},t6=[],e6=!1;const n6=function(t,e,n,r){const i=J3[t];i&&e===i.name&&null==n||(null!=n&&null!=n.text||(n={text:e,wrap:null,type:r}),null!=r&&null!=n.text||(n={text:e,wrap:null,type:r}),J3[t]={name:e,description:n.text,wrap:void 0===n.wrap&&a6()||!!n.wrap,prevActor:Q3,links:{},properties:{},actorCnt:null,rectData:null,type:r||"participant"},Q3&&J3[Q3]&&(J3[Q3].nextActor=t),Q3=t)},r6=t=>{let e,n=0;for(e=0;e<t6.length;e++)t6[e].type===c6.ACTIVE_START&&t6[e].from.actor===t&&n++,t6[e].type===c6.ACTIVE_END&&t6[e].from.actor===t&&n--;return n},i6=function(t,e,n,r){t6.push({from:t,to:e,message:n.text,wrap:void 0===n.wrap&&a6()||!!n.wrap,answer:r})},o6=function(t,e,n={text:void 0,wrap:void 0},r){if(r===c6.ACTIVE_END&&r6(t.actor)<1){let e=new Error("Trying to inactivate an inactive participant ("+t.actor+")");throw e.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},e}return t6.push({from:t,to:e,message:n.text,wrap:void 0===n.wrap&&a6()||!!n.wrap,type:r}),!0},s6=function(t){return J3[t]},a6=()=>void 0!==X3?X3:nP().sequence.wrap,c6={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31},l6=function(t,e,n){n.text,void 0===n.wrap&&a6()||n.wrap;const r=[].concat(t,t);t6.push({from:r[0],to:r[1],message:n.text,wrap:void 0===n.wrap&&a6()||!!n.wrap,type:c6.NOTE,placement:e})},d6=function(t,e){const n=s6(t);try{let t=sI(e.text,nP());t=t.replace(/&amp;/g,"&"),t=t.replace(/&equals;/g,"="),h6(n,JSON.parse(t))}catch(t){u.error("error while parsing actor link text",t)}},u6=function(t,e){const n=s6(t);try{const t={};let s=sI(e.text,nP());var r=s.indexOf("@");s=s.replace(/&amp;/g,"&"),s=s.replace(/&equals;/g,"=");var i=s.slice(0,r-1).trim(),o=s.slice(r+1).trim();t[i]=o,h6(n,t)}catch(t){u.error("error while parsing actor link text",t)}};function h6(t,e){if(null==t.links)t.links=e;else for(let n in e)t.links[n]=e[n]}const g6=function(t,e){const n=s6(t);try{let t=sI(e.text,nP());f6(n,JSON.parse(t))}catch(t){u.error("error while parsing actor properties text",t)}};function f6(t,e){if(null==t.properties)t.properties=e;else for(let n in e)t.properties[n]=e[n]}const p6=function(t,e){const n=s6(t),r=document.getElementById(e.text);try{const t=r.innerHTML,e=JSON.parse(t);e.properties&&f6(n,e.properties),e.links&&h6(n,e.links)}catch(t){u.error("error while parsing actor details text",t)}},m6=function(t){if(t instanceof Array)t.forEach((function(t){m6(t)}));else switch(t.type){case"sequenceIndex":t6.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":n6(t.actor,t.actor,t.description,"participant");break;case"addActor":n6(t.actor,t.actor,t.description,"actor");break;case"activeStart":case"activeEnd":o6(t.actor,void 0,void 0,t.signalType);break;case"addNote":l6(t.actor,t.placement,t.text);break;case"addLinks":d6(t.actor,t.text);break;case"addALink":u6(t.actor,t.text);break;case"addProperties":g6(t.actor,t.text);break;case"addDetails":p6(t.actor,t.text);break;case"addMessage":o6(t.from,t.to,t.msg,t.signalType);break;case"loopStart":o6(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":o6(void 0,void 0,void 0,t.signalType);break;case"rectStart":o6(void 0,void 0,t.color,t.signalType);break;case"optStart":o6(void 0,void 0,t.optText,t.signalType);break;case"altStart":case"else":o6(void 0,void 0,t.altText,t.signalType);break;case"setAccTitle":WP(t.text);break;case"parStart":case"and":o6(void 0,void 0,t.parText,t.signalType);break;case"criticalStart":o6(void 0,void 0,t.criticalText,t.signalType);break;case"option":o6(void 0,void 0,t.optionText,t.signalType);break;case"breakStart":o6(void 0,void 0,t.breakText,t.signalType)}},b6={addActor:n6,addMessage:i6,addSignal:o6,addLinks:d6,addDetails:p6,addProperties:g6,autoWrap:a6,setWrap:function(t){X3=t},enableSequenceNumbers:function(){e6=!0},disableSequenceNumbers:function(){e6=!1},showSequenceNumbers:()=>e6,getMessages:function(){return t6},getActors:function(){return J3},getActor:s6,getActorKeys:function(){return Object.keys(J3)},getActorProperty:function(t,e){if(void 0!==t&&void 0!==t.properties)return t.properties[e]},getAccTitle:qP,getDiagramTitle:KP,setDiagramTitle:ZP,parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().sequence,clear:function(){J3={},t6=[],e6=!1,UP()},parseMessage:function(t){const e=t.trim(),n={text:e.replace(/^[:]?(?:no)?wrap:/,"").trim(),wrap:null!==e.match(/^[:]?wrap:/)||null===e.match(/^[:]?nowrap:/)&&void 0};return u.debug("parseMessage:",n),n},LINETYPE:c6,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:l6,setAccTitle:WP,apply:m6,setAccDescription:YP,getAccDescription:GP};let k6=[];const w6=t=>{k6.push(t)},y6=()=>{k6.forEach((t=>{t()})),k6=[]},_6=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),void 0!==e.class&&n.attr("class",e.class),n},v6=(t,e)=>{w6((()=>{const n=document.querySelectorAll(t);0!==n.length&&(n[0].addEventListener("mouseover",(function(){S6("actor"+e+"_popup")})),n[0].addEventListener("mouseout",(function(){D6("actor"+e+"_popup")})))}))},A6=function(t,e,n,r,i){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};const o=e.links,s=e.actorCnt,a=e.rectData;var c="none";i&&(c="block !important");const l=t.append("g");l.attr("id","actor"+s+"_popup"),l.attr("class","actorPopupMenu"),l.attr("display",c),v6("#actor"+s+"_popup",s);var d="";void 0!==a.class&&(d=" "+a.class);let u=a.width>n?a.width:n;const h=l.append("rect");if(h.attr("class","actorPopupMenuPanel"+d),h.attr("x",a.x),h.attr("y",a.height),h.attr("fill",a.fill),h.attr("stroke",a.stroke),h.attr("width",u),h.attr("height",a.height),h.attr("rx",a.rx),h.attr("ry",a.ry),null!=o){var g=20;for(let t in o){var f=l.append("a"),m=p(o[t]);f.attr("xlink:href",m),f.attr("target","_blank"),Q6(r)(t,f,a.x+10,a.height+g,u,20,{class:"actor"},r),g+=30}}return h.attr("height",g),{height:a.height+g,width:u}},C6=function(t,e,n,r){const i=t.append("image");i.attr("x",e),i.attr("y",n);var o=p(r);i.attr("xlink:href",o)},x6=function(t,e,n,r){const i=t.append("use");i.attr("x",e),i.attr("y",n);var o=p(r);i.attr("xlink:href","#"+o)},E6=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},T6=function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},S6=function(t){var e=document.getElementById(t);null!=e&&(e.style.display="block")},D6=function(t){var e=document.getElementById(t);null!=e&&(e.style.display="none")},M6=function(t,e){let n=0,r=0;const i=e.text.split(gI.lineBreakRegex);let o=[],s=0,a=()=>e.y;if(void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0)switch(e.valign){case"top":case"start":a=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":a=()=>Math.round(e.y+(n+r+e.textMargin)/2);break;case"bottom":case"end":a=()=>Math.round(e.y+(n+r+2*e.textMargin)-e.textMargin)}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for(let c=0;c<i.length;c++){let l=i[c];void 0!==e.textMargin&&0===e.textMargin&&void 0!==e.fontSize&&(s=c*e.fontSize);const d=t.append("text");if(d.attr("x",e.x),d.attr("y",a()),void 0!==e.anchor&&d.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&d.style("font-family",e.fontFamily),void 0!==e.fontSize&&d.style("font-size",e.fontSize),void 0!==e.fontWeight&&d.style("font-weight",e.fontWeight),void 0!==e.fill&&d.attr("fill",e.fill),void 0!==e.class&&d.attr("class",e.class),void 0!==e.dy?d.attr("dy",e.dy):0!==s&&d.attr("dy",s),e.tspan){const t=d.append("tspan");t.attr("x",e.x),void 0!==e.fill&&t.attr("fill",e.fill),t.text(l)}else d.text(l);void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0&&(r+=(d._groups||d)[0][0].getBBox().height,n=r),o.push(d)}return o},I6=function(t,e){function n(t,e,n,r,i){return t+","+e+" "+(t+n)+","+e+" "+(t+n)+","+(e+r-i)+" "+(t+n-1.2*i)+","+(e+r)+" "+t+","+(e+r)}const r=t.append("polygon");return r.attr("points",n(e.x,e.y,e.width,e.height,7)),r.attr("class","labelBox"),e.y=e.y+e.height/2,M6(t,e),r};let B6=-1;const L6=(t,e)=>{t.selectAll&&t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},N6=function(t,e,n){const r=e.x+e.width/2,i=t.append("g");var o=i;0===e.y&&(B6++,o.append("line").attr("id","actor"+B6).attr("x1",r).attr("y1",5).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),o=i.append("g"),e.actorCnt=B6,null!=e.links&&(o.attr("id","root-"+B6),v6("#root-"+B6,B6)));const s=Z6();var a="actor";null!=e.properties&&e.properties.class?a=e.properties.class:s.fill="#eaeaea",s.x=e.x,s.y=e.y,s.width=e.width,s.height=e.height,s.class=a,s.rx=3,s.ry=3;const c=_6(o,s);if(e.rectData=s,null!=e.properties&&e.properties.icon){const t=e.properties.icon.trim();"@"===t.charAt(0)?x6(o,s.x+s.width-20,s.y+10,t.substr(1)):C6(o,s.x+s.width-20,s.y+10,t)}K6(n)(e.description,o,s.x,s.y,s.width,s.height,{class:"actor"},n);let l=e.height;if(c.node){const t=c.node().getBBox();e.height=t.height,l=t.height}return l},O6=function(t,e,n){const r=e.x+e.width/2;0===e.y&&(B6++,t.append("line").attr("id","actor"+B6).attr("x1",r).attr("y1",80).attr("x2",r).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"));const i=t.append("g");i.attr("class","actor-man");const o=Z6();o.x=e.x,o.y=e.y,o.fill="#eaeaea",o.width=e.width,o.height=e.height,o.class="actor",o.rx=3,o.ry=3,i.append("line").attr("id","actor-man-torso"+B6).attr("x1",r).attr("y1",e.y+25).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("id","actor-man-arms"+B6).attr("x1",r-18).attr("y1",e.y+33).attr("x2",r+18).attr("y2",e.y+33),i.append("line").attr("x1",r-18).attr("y1",e.y+60).attr("x2",r).attr("y2",e.y+45),i.append("line").attr("x1",r).attr("y1",e.y+45).attr("x2",r+16).attr("y2",e.y+60);const s=i.append("circle");s.attr("cx",e.x+e.width/2),s.attr("cy",e.y+10),s.attr("r",15),s.attr("width",e.width),s.attr("height",e.height);const a=i.node().getBBox();return e.height=a.height,K6(n)(e.description,i,o.x,o.y+35,o.width,o.height,{class:"actor"},n),e.height},P6=function(t,e,n){switch(e.type){case"actor":return O6(t,e,n);case"participant":return N6(t,e,n)}},R6=function(t){return t.append("g")},z6=function(t,e,n,r,i){const o=Z6(),s=e.anchored;o.x=e.startx,o.y=e.starty,o.class="activation"+i%3,o.width=e.stopx-e.startx,o.height=n-e.starty,_6(s,o)},F6=function(t,e,n,r){const{boxMargin:i,boxTextMargin:o,labelBoxHeight:s,labelBoxWidth:a,messageFontFamily:c,messageFontSize:l,messageFontWeight:d}=r,u=t.append("g"),h=function(t,e,n,r){return u.append("line").attr("x1",t).attr("y1",e).attr("x2",n).attr("y2",r).attr("class","loopLine")};h(e.startx,e.starty,e.stopx,e.starty),h(e.stopx,e.starty,e.stopx,e.stopy),h(e.startx,e.stopy,e.stopx,e.stopy),h(e.startx,e.starty,e.startx,e.stopy),void 0!==e.sections&&e.sections.forEach((function(t){h(e.startx,t.y,e.stopx,t.y).style("stroke-dasharray","3, 3")}));let g=G6();g.text=n,g.x=e.startx,g.y=e.starty,g.fontFamily=c,g.fontSize=l,g.fontWeight=d,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=a||50,g.height=s||20,g.textMargin=o,g.class="labelText",I6(u,g),g=G6(),g.text=e.title,g.x=e.startx+a/2+(e.stopx-e.startx)/2,g.y=e.starty+i+o,g.anchor="middle",g.valign="middle",g.textMargin=o,g.class="loopText",g.fontFamily=c,g.fontSize=l,g.fontWeight=d,g.wrap=!0;let f=M6(u,g);return void 0!==e.sectionTitles&&e.sectionTitles.forEach((function(t,n){if(t.message){g.text=t.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[n].y+i+o,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=c,g.fontSize=l,g.fontWeight=d,g.wrap=e.wrap,f=M6(u,g);let r=Math.round(f.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));e.sections[n].height+=r-(i+o)}})),e.height=Math.round(e.stopy-e.starty),u},j6=function(t,e){_6(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},V6=function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},$6=function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},H6=function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},U6=function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},W6=function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},q6=function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},Y6=function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},G6=function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},Z6=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},K6=function(){function t(t,e,n,i,o,s,a){r(e.append("text").attr("x",n+o/2).attr("y",i+s/2+5).style("text-anchor","middle").text(t),a)}function e(t,e,n,i,o,s,a,c){const{actorFontSize:l,actorFontFamily:d,actorFontWeight:u}=c;let h=l&&l.replace?l.replace("px",""):l;const g=t.split(gI.lineBreakRegex);for(let t=0;t<g.length;t++){const c=t*h-h*(g.length-1)/2,f=e.append("text").attr("x",n+o/2).attr("y",i).style("text-anchor","middle").style("font-size",l).style("font-weight",u).style("font-family",d);f.append("tspan").attr("x",n+o/2).attr("dy",c).text(g[t]),f.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(f,a)}}function n(t,n,i,o,s,a,c,l){const d=n.append("switch"),u=d.append("foreignObject").attr("x",i).attr("y",o).attr("width",s).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,d,i,o,s,a,c,l),r(u,c)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),Q6=function(){function t(t,e,n,i,o,s,a){r(e.append("text").attr("x",n).attr("y",i).style("text-anchor","start").text(t),a)}function e(t,e,n,i,o,s,a,c){const{actorFontSize:l,actorFontFamily:d,actorFontWeight:u}=c,h=t.split(gI.lineBreakRegex);for(let t=0;t<h.length;t++){const o=t*l-l*(h.length-1)/2,c=e.append("text").attr("x",n).attr("y",i).style("text-anchor","start").style("font-size",l).style("font-weight",u).style("font-family",d);c.append("tspan").attr("x",n).attr("dy",o).text(h[t]),c.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(c,a)}}function n(t,n,i,o,s,a,c,l){const d=n.append("switch"),u=d.append("foreignObject").attr("x",i).attr("y",o).attr("width",s).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,d,i,o,s,a,c,l),r(u,c)}function r(t,e){for(const n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),X6={drawRect:_6,drawText:M6,drawLabel:I6,drawActor:P6,drawPopup:A6,drawImage:C6,drawEmbeddedImage:x6,anchorElement:R6,drawActivation:z6,drawLoop:F6,drawBackgroundRect:j6,insertArrowHead:U6,insertArrowFilledHead:W6,insertSequenceNumber:q6,insertArrowCrossHead:Y6,insertDatabaseIcon:V6,insertComputerIcon:$6,insertClockIcon:H6,getTextObj:G6,getNoteRect:Z6,popupMenu:E6,popdownMenu:T6,fixLifeLineHeights:L6,sanitizeUrl:p};let J6={};const t7={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map((t=>t.height||0)))+(0===this.loops.length?0:this.loops.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.messages.length?0:this.messages.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.notes.length?0:this.notes.map((t=>t.height||0)).reduce(((t,e)=>t+e)))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,l7(nP())},updateVal:function(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=this;let o=0;function s(s){return function(a){o++;const c=i.sequenceItems.length-o+1;i.updateVal(a,"starty",e-c*J6.boxMargin,Math.min),i.updateVal(a,"stopy",r+c*J6.boxMargin,Math.max),i.updateVal(t7.data,"startx",t-c*J6.boxMargin,Math.min),i.updateVal(t7.data,"stopx",n+c*J6.boxMargin,Math.max),"activation"!==s&&(i.updateVal(a,"startx",t-c*J6.boxMargin,Math.min),i.updateVal(a,"stopx",n+c*J6.boxMargin,Math.max),i.updateVal(t7.data,"starty",e-c*J6.boxMargin,Math.min),i.updateVal(t7.data,"stopy",r+c*J6.boxMargin,Math.max))}}this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))},insert:function(t,e,n,r){const i=Math.min(t,n),o=Math.max(t,n),s=Math.min(e,r),a=Math.max(e,r);this.updateVal(t7.data,"startx",i,Math.min),this.updateVal(t7.data,"starty",s,Math.min),this.updateVal(t7.data,"stopx",o,Math.max),this.updateVal(t7.data,"stopy",a,Math.max),this.updateBounds(i,s,o,a)},newActivation:function(t,e,n){const r=n[t.from.actor],i=d7(t.from.actor).length||0,o=r.x+r.width/2+(i-1)*J6.activationWidth/2;this.activations.push({startx:o,starty:this.verticalPos+2,stopx:o+J6.activationWidth,stopy:void 0,actor:t.from.actor,anchored:X6.anchorElement(e)})},endActivation:function(t){const e=this.activations.map((function(t){return t.actor})).lastIndexOf(t.from.actor);return this.activations.splice(e,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:t7.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},e7=function(t,e){t7.bumpVerticalPos(J6.boxMargin),e.height=J6.boxMargin,e.starty=t7.getVerticalPos();const n=X6.getNoteRect();n.x=e.startx,n.y=e.starty,n.width=e.width||J6.width,n.class="note";const r=t.append("g"),i=X6.drawRect(r,n),o=X6.getTextObj();o.x=e.startx,o.y=e.starty,o.width=n.width,o.dy="1em",o.text=e.message,o.class="noteText",o.fontFamily=J6.noteFontFamily,o.fontSize=J6.noteFontSize,o.fontWeight=J6.noteFontWeight,o.anchor=J6.noteAlign,o.textMargin=J6.noteMargin,o.valign="center";const s=M6(r,o),a=Math.round(s.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));i.attr("height",a+2*J6.noteMargin),e.height+=a+2*J6.noteMargin,t7.bumpVerticalPos(a+2*J6.noteMargin),e.stopy=e.starty+a+2*J6.noteMargin,e.stopx=e.startx+n.width,t7.insert(e.startx,e.starty,e.stopx,e.stopy),t7.models.addNote(e)},n7=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),r7=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),i7=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),o7=function(t,e){t7.bumpVerticalPos(10);const{startx:n,stopx:r,message:i}=e,o=gI.splitBreaks(i).length,s=JN.calculateTextDimensions(i,n7(J6)),a=s.height/o;let c;e.height+=a,t7.bumpVerticalPos(a);let l=s.height-10;const d=s.width;if(n===r){c=t7.getVerticalPos()+l,J6.rightAngles||(l+=J6.boxMargin,c=t7.getVerticalPos()+l),l+=30;const t=Math.max(d/2,J6.width/2);t7.insert(n-t,t7.getVerticalPos()-10+l,r+t,t7.getVerticalPos()+30+l)}else l+=J6.boxMargin,c=t7.getVerticalPos()+l,t7.insert(n,c-10,r,c);return t7.bumpVerticalPos(l),e.height+=l,e.stopy=e.starty+e.height,t7.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),c},s7=function(t,e,n,r){const{startx:i,stopx:o,starty:s,message:a,type:c,sequenceIndex:l,sequenceVisible:d}=e,u=JN.calculateTextDimensions(a,n7(J6)),h=X6.getTextObj();h.x=i,h.y=s+10,h.width=o-i,h.class="messageText",h.dy="1em",h.text=a,h.fontFamily=J6.messageFontFamily,h.fontSize=J6.messageFontSize,h.fontWeight=J6.messageFontWeight,h.anchor=J6.messageAlign,h.valign="center",h.textMargin=J6.wrapPadding,h.tspan=!1,M6(t,h);const g=u.width;let f;i===o?f=J6.rightAngles?t.append("path").attr("d",`M  ${i},${n} H ${i+Math.max(J6.width/2,g/2)} V ${n+25} H ${i}`):t.append("path").attr("d","M "+i+","+n+" C "+(i+60)+","+(n-10)+" "+(i+60)+","+(n+30)+" "+i+","+(n+20)):(f=t.append("line"),f.attr("x1",i),f.attr("y1",n),f.attr("x2",o),f.attr("y2",n)),c===r.db.LINETYPE.DOTTED||c===r.db.LINETYPE.DOTTED_CROSS||c===r.db.LINETYPE.DOTTED_POINT||c===r.db.LINETYPE.DOTTED_OPEN?(f.style("stroke-dasharray","3, 3"),f.attr("class","messageLine1")):f.attr("class","messageLine0");let p="";J6.arrowMarkerAbsolute&&(p=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,p=p.replace(/\(/g,"\\("),p=p.replace(/\)/g,"\\)")),f.attr("stroke-width",2),f.attr("stroke","none"),f.style("fill","none"),c!==r.db.LINETYPE.SOLID&&c!==r.db.LINETYPE.DOTTED||f.attr("marker-end","url("+p+"#arrowhead)"),c!==r.db.LINETYPE.SOLID_POINT&&c!==r.db.LINETYPE.DOTTED_POINT||f.attr("marker-end","url("+p+"#filled-head)"),c!==r.db.LINETYPE.SOLID_CROSS&&c!==r.db.LINETYPE.DOTTED_CROSS||f.attr("marker-end","url("+p+"#crosshead)"),(d||J6.showSequenceNumbers)&&(f.attr("marker-start","url("+p+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",n+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(l))},a7=function(t,e,n,r,i,o){if(!0===i.hideUnusedParticipants){const t=new Set;o.forEach((e=>{t.add(e.from),t.add(e.to)})),n=n.filter((e=>t.has(e)))}let s=0,a=0,c=0;for(let i=0;i<n.length;i++){const o=e[n[i]];o.width=o.width||J6.width,o.height=Math.max(o.height||J6.height,J6.height),o.margin=o.margin||J6.actorMargin,o.x=s+a,o.y=r;const l=X6.drawActor(t,o,J6);c=Math.max(c,l),t7.insert(o.x,r,o.x+o.width,o.height),s+=o.width,a+=o.margin,t7.models.addActor(o)}t7.bumpVerticalPos(c)},c7=function(t,e,n,r){let i=0,o=0;for(let s=0;s<n.length;s++){const a=e[n[s]],c=p7(a),l=X6.drawPopup(t,a,c,J6,J6.forceMenus,r);l.height>i&&(i=l.height),l.width+a.x>o&&(o=l.width+a.x)}return{maxHeight:i,maxWidth:o}},l7=function(t){aB(J6,t),t.fontFamily&&(J6.actorFontFamily=J6.noteFontFamily=J6.messageFontFamily=t.fontFamily),t.fontSize&&(J6.actorFontSize=J6.noteFontSize=J6.messageFontSize=t.fontSize),t.fontWeight&&(J6.actorFontWeight=J6.noteFontWeight=J6.messageFontWeight=t.fontWeight)},d7=function(t){return t7.activations.filter((function(e){return e.actor===t}))},u7=function(t,e){const n=e[t],r=d7(t);return[r.reduce((function(t,e){return Math.min(t,e.startx)}),n.x+n.width/2),r.reduce((function(t,e){return Math.max(t,e.stopx)}),n.x+n.width/2)]};function h7(t,e,n,r,i){t7.bumpVerticalPos(n);let o=r;if(e.id&&e.message&&t[e.id]){const n=t[e.id].width,i=n7(J6);e.message=JN.wrapLabel(`[${e.message}]`,n-2*J6.wrapPadding,i),e.width=n,e.wrap=!0;const s=JN.calculateTextDimensions(e.message,i),a=Math.max(s.height,J6.labelBoxHeight);o=r+a,u.debug(`${a} - ${e.message}`)}i(e),t7.bumpVerticalPos(o)}const g7=function(t,e,n,r){const{securityLevel:i,sequence:o}=nP();let s;J6=o,"sandbox"===i&&(s=Qr("#i"+e));const a=Qr("sandbox"===i?s.nodes()[0].contentDocument.body:"body"),c="sandbox"===i?s.nodes()[0].contentDocument:document;t7.init(),u.debug(r.db);const l="sandbox"===i?a.select(`[id="${e}"]`):Qr(`[id="${e}"]`),d=r.db.getActors(),h=r.db.getActorKeys(),g=r.db.getMessages(),f=r.db.getDiagramTitle(),p=f7(d,g,r);J6.height=m7(d,p),X6.insertComputerIcon(l),X6.insertDatabaseIcon(l),X6.insertClockIcon(l),a7(l,d,h,0,J6,g);const m=w7(g,d,p,r);function b(t,e){const n=t7.endActivation(t);n.starty+18>e&&(n.starty=e-6,e+=12),X6.drawActivation(l,n,e,J6,d7(t.from.actor).length),t7.insert(n.startx,e-10,n.stopx,e)}X6.insertArrowHead(l),X6.insertArrowCrossHead(l),X6.insertArrowFilledHead(l),X6.insertSequenceNumber(l);let k=1,w=1;const y=[];g.forEach((function(t){let e,n,i;switch(t.type){case r.db.LINETYPE.NOTE:n=t.noteModel,e7(l,n);break;case r.db.LINETYPE.ACTIVE_START:t7.newActivation(t,l,d);break;case r.db.LINETYPE.ACTIVE_END:b(t,t7.getVerticalPos());break;case r.db.LINETYPE.LOOP_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.LOOP_END:e=t7.endLoop(),X6.drawLoop(l,e,"loop",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;case r.db.LINETYPE.RECT_START:h7(m,t,J6.boxMargin,J6.boxMargin,(t=>t7.newLoop(void 0,t.message)));break;case r.db.LINETYPE.RECT_END:e=t7.endLoop(),X6.drawBackgroundRect(l,e),t7.models.addLoop(e),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos());break;case r.db.LINETYPE.OPT_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.OPT_END:e=t7.endLoop(),X6.drawLoop(l,e,"opt",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;case r.db.LINETYPE.ALT_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.ALT_ELSE:h7(m,t,J6.boxMargin+J6.boxTextMargin,J6.boxMargin,(t=>t7.addSectionToLoop(t)));break;case r.db.LINETYPE.ALT_END:e=t7.endLoop(),X6.drawLoop(l,e,"alt",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;case r.db.LINETYPE.PAR_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.PAR_AND:h7(m,t,J6.boxMargin+J6.boxTextMargin,J6.boxMargin,(t=>t7.addSectionToLoop(t)));break;case r.db.LINETYPE.PAR_END:e=t7.endLoop(),X6.drawLoop(l,e,"par",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;case r.db.LINETYPE.AUTONUMBER:k=t.message.start||k,w=t.message.step||w,t.message.visible?r.db.enableSequenceNumbers():r.db.disableSequenceNumbers();break;case r.db.LINETYPE.CRITICAL_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.CRITICAL_OPTION:h7(m,t,J6.boxMargin+J6.boxTextMargin,J6.boxMargin,(t=>t7.addSectionToLoop(t)));break;case r.db.LINETYPE.CRITICAL_END:e=t7.endLoop(),X6.drawLoop(l,e,"critical",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;case r.db.LINETYPE.BREAK_START:h7(m,t,J6.boxMargin,J6.boxMargin+J6.boxTextMargin,(t=>t7.newLoop(t)));break;case r.db.LINETYPE.BREAK_END:e=t7.endLoop(),X6.drawLoop(l,e,"break",J6),t7.bumpVerticalPos(e.stopy-t7.getVerticalPos()),t7.models.addLoop(e);break;default:try{i=t.msgModel,i.starty=t7.getVerticalPos(),i.sequenceIndex=k,i.sequenceVisible=r.db.showSequenceNumbers();const e=o7(l,i);y.push({messageModel:i,lineStarty:e}),t7.models.addMessage(i)}catch(t){u.error("error while drawing message",t)}}[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(k+=w)})),y.forEach((t=>s7(l,t.messageModel,t.lineStarty,r))),J6.mirrorActors&&(t7.bumpVerticalPos(2*J6.boxMargin),a7(l,d,h,t7.getVerticalPos(),J6,g),t7.bumpVerticalPos(J6.boxMargin),L6(l,t7.getVerticalPos()));const _=c7(l,d,h,c),{bounds:v}=t7.getBounds();u.debug("For line height fix Querying: #"+e+" .actor-line"),oi("#"+e+" .actor-line").attr("y2",v.stopy);let A=v.stopy-v.starty;A<_.maxHeight&&(A=_.maxHeight);let C=A+2*J6.diagramMarginY;J6.mirrorActors&&(C=C-J6.boxMargin+J6.bottomMarginAdj);let x=v.stopx-v.startx;x<_.maxWidth&&(x=_.maxWidth);const E=x+2*J6.diagramMarginX;f&&l.append("text").text(f).attr("x",(v.stopx-v.startx)/2-2*J6.diagramMarginX).attr("y",-25),hP(l,C,E,J6.useMaxWidth);const T=f?40:0;l.attr("viewBox",v.startx-J6.diagramMarginX+" -"+(J6.diagramMarginY+T)+" "+E+" "+(C+T)),yR(r.db,l,e),u.debug("models:",t7.models)},f7=function(t,e,n){const r={};return e.forEach((function(e){if(t[e.to]&&t[e.from]){const i=t[e.to];if(e.placement===n.db.PLACEMENT.LEFTOF&&!i.prevActor)return;if(e.placement===n.db.PLACEMENT.RIGHTOF&&!i.nextActor)return;const o=void 0!==e.placement,s=!o,a=o?r7(J6):n7(J6),c=e.wrap?JN.wrapLabel(e.message,J6.width-2*J6.wrapPadding,a):e.message,l=JN.calculateTextDimensions(c,a).width+2*J6.wrapPadding;s&&e.from===i.nextActor?r[e.to]=Math.max(r[e.to]||0,l):s&&e.from===i.prevActor?r[e.from]=Math.max(r[e.from]||0,l):s&&e.from===e.to?(r[e.from]=Math.max(r[e.from]||0,l/2),r[e.to]=Math.max(r[e.to]||0,l/2)):e.placement===n.db.PLACEMENT.RIGHTOF?r[e.from]=Math.max(r[e.from]||0,l):e.placement===n.db.PLACEMENT.LEFTOF?r[i.prevActor]=Math.max(r[i.prevActor]||0,l):e.placement===n.db.PLACEMENT.OVER&&(i.prevActor&&(r[i.prevActor]=Math.max(r[i.prevActor]||0,l/2)),i.nextActor&&(r[e.from]=Math.max(r[e.from]||0,l/2)))}})),u.debug("maxMessageWidthPerActor:",r),r},p7=function(t){let e=0;const n=i7(J6);for(const r in t.links){const t=JN.calculateTextDimensions(r,n).width+2*J6.wrapPadding+2*J6.boxMargin;e<t&&(e=t)}return e},m7=function(t,e){let n=0;Object.keys(t).forEach((e=>{const r=t[e];r.wrap&&(r.description=JN.wrapLabel(r.description,J6.width-2*J6.wrapPadding,i7(J6)));const i=JN.calculateTextDimensions(r.description,i7(J6));r.width=r.wrap?J6.width:Math.max(J6.width,i.width+2*J6.wrapPadding),r.height=r.wrap?Math.max(i.height,J6.height):J6.height,n=Math.max(n,r.height)}));for(const n in e){const r=t[n];if(!r)continue;const i=t[r.nextActor];if(!i)continue;const o=e[n]+J6.actorMargin-r.width/2-i.width/2;r.margin=Math.max(o,J6.actorMargin)}return Math.max(n,J6.height)},b7=function(t,e,n){const r=e[t.from].x,i=e[t.to].x,o=t.wrap&&t.message;let s=JN.calculateTextDimensions(o?JN.wrapLabel(t.message,J6.width,r7(J6)):t.message,r7(J6));const a={width:o?J6.width:Math.max(J6.width,s.width+2*J6.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===n.db.PLACEMENT.RIGHTOF?(a.width=o?Math.max(J6.width,s.width):Math.max(e[t.from].width/2+e[t.to].width/2,s.width+2*J6.noteMargin),a.startx=r+(e[t.from].width+J6.actorMargin)/2):t.placement===n.db.PLACEMENT.LEFTOF?(a.width=o?Math.max(J6.width,s.width+2*J6.noteMargin):Math.max(e[t.from].width/2+e[t.to].width/2,s.width+2*J6.noteMargin),a.startx=r-a.width+(e[t.from].width-J6.actorMargin)/2):t.to===t.from?(s=JN.calculateTextDimensions(o?JN.wrapLabel(t.message,Math.max(J6.width,e[t.from].width),r7(J6)):t.message,r7(J6)),a.width=o?Math.max(J6.width,e[t.from].width):Math.max(e[t.from].width,J6.width,s.width+2*J6.noteMargin),a.startx=r+(e[t.from].width-a.width)/2):(a.width=Math.abs(r+e[t.from].width/2-(i+e[t.to].width/2))+J6.actorMargin,a.startx=r<i?r+e[t.from].width/2-J6.actorMargin/2:i+e[t.to].width/2-J6.actorMargin/2),o&&(a.message=JN.wrapLabel(t.message,a.width-2*J6.wrapPadding,r7(J6))),u.debug(`NM:[${a.startx},${a.stopx},${a.starty},${a.stopy}:${a.width},${a.height}=${t.message}]`),a},k7=function(t,e,n){let r=!1;if([n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(r=!0),!r)return{};const i=u7(t.from,e),o=u7(t.to,e),s=i[0]<=o[0]?1:0,a=i[0]<o[0]?0:1,c=i.concat(o),l=Math.abs(o[a]-i[s]);t.wrap&&t.message&&(t.message=JN.wrapLabel(t.message,Math.max(l+2*J6.wrapPadding,J6.width),n7(J6)));const d=JN.calculateTextDimensions(t.message,n7(J6));return{width:Math.max(t.wrap?0:d.width+2*J6.wrapPadding,l+2*J6.wrapPadding,J6.width),height:0,startx:i[s],stopx:o[a],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,c),toBounds:Math.max.apply(null,c)}},w7=function(t,e,n,r){const i={},o=[];let s,a,c;return t.forEach((function(t){switch(t.id=JN.random({length:10}),t.type){case r.db.LINETYPE.LOOP_START:case r.db.LINETYPE.ALT_START:case r.db.LINETYPE.OPT_START:case r.db.LINETYPE.PAR_START:case r.db.LINETYPE.CRITICAL_START:case r.db.LINETYPE.BREAK_START:o.push({id:t.id,msg:t.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case r.db.LINETYPE.ALT_ELSE:case r.db.LINETYPE.PAR_AND:case r.db.LINETYPE.CRITICAL_OPTION:t.message&&(s=o.pop(),i[s.id]=s,i[t.id]=s,o.push(s));break;case r.db.LINETYPE.LOOP_END:case r.db.LINETYPE.ALT_END:case r.db.LINETYPE.OPT_END:case r.db.LINETYPE.PAR_END:case r.db.LINETYPE.CRITICAL_END:case r.db.LINETYPE.BREAK_END:s=o.pop(),i[s.id]=s;break;case r.db.LINETYPE.ACTIVE_START:{const n=e[t.from?t.from.actor:t.to.actor],r=d7(t.from?t.from.actor:t.to.actor).length,i=n.x+n.width/2+(r-1)*J6.activationWidth/2,o={startx:i,stopx:i+J6.activationWidth,actor:t.from.actor,enabled:!0};t7.activations.push(o)}break;case r.db.LINETYPE.ACTIVE_END:{const e=t7.activations.map((t=>t.actor)).lastIndexOf(t.from.actor);delete t7.activations.splice(e,1)[0]}}void 0!==t.placement?(a=b7(t,e,r),t.noteModel=a,o.forEach((t=>{s=t,s.from=Math.min(s.from,a.startx),s.to=Math.max(s.to,a.startx+a.width),s.width=Math.max(s.width,Math.abs(s.from-s.to))-J6.labelBoxWidth}))):(c=k7(t,e,r),t.msgModel=c,c.startx&&c.stopx&&o.length>0&&o.forEach((n=>{if(s=n,c.startx===c.stopx){const n=e[t.from],r=e[t.to];s.from=Math.min(n.x-c.width/2,n.x-n.width/2,s.from),s.to=Math.max(r.x+c.width/2,r.x+n.width/2,s.to),s.width=Math.max(s.width,Math.abs(s.to-s.from))-J6.labelBoxWidth}else s.from=Math.min(c.startx,s.from),s.to=Math.max(c.stopx,s.to),s.width=Math.max(s.width,c.width)-J6.labelBoxWidth})))})),t7.activations=[],u.debug("Loop type widths:",i),i},y7={bounds:t7,drawActors:a7,drawActorsPopup:c7,setConf:l7,draw:g7};var _7=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,3],r=[1,5],i=[1,7],o=[2,5],s=[1,15],a=[1,17],c=[1,19],l=[1,20],d=[1,21],u=[1,22],h=[1,33],g=[1,23],f=[1,24],p=[1,25],m=[1,26],b=[1,27],k=[1,30],w=[1,31],y=[1,32],_=[1,35],v=[1,36],A=[1,37],C=[1,38],x=[1,34],E=[1,41],T=[1,4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],S=[1,4,5,12,13,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],D=[1,4,5,7,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],M=[4,5,14,15,17,19,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],I={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,idStatement:11,DESCR:12,"--\x3e":13,HIDE_EMPTY:14,scale:15,WIDTH:16,COMPOSIT_STATE:17,STRUCT_START:18,STRUCT_STOP:19,STATE_DESCR:20,AS:21,ID:22,FORK:23,JOIN:24,CHOICE:25,CONCURRENT:26,note:27,notePosition:28,NOTE_TEXT:29,direction:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,openDirective:36,typeDirective:37,closeDirective:38,":":39,argDirective:40,direction_tb:41,direction_bt:42,direction_rl:43,direction_lr:44,eol:45,";":46,EDGE_STATE:47,left_of:48,right_of:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",12:"DESCR",13:"--\x3e",14:"HIDE_EMPTY",15:"scale",16:"WIDTH",17:"COMPOSIT_STATE",18:"STRUCT_START",19:"STRUCT_STOP",20:"STATE_DESCR",21:"AS",22:"ID",23:"FORK",24:"JOIN",25:"CHOICE",26:"CONCURRENT",27:"note",29:"NOTE_TEXT",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",39:":",41:"direction_tb",42:"direction_bt",43:"direction_rl",44:"direction_lr",46:";",47:"EDGE_STATE",48:"left_of",49:"right_of",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[6,3],[6,5],[30,1],[30,1],[30,1],[30,1],[45,1],[45,1],[11,1],[11,1],[28,1],[28,1],[36,1],[37,1],[40,1],[38,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 4:return r.setRootDoc(o[a]),o[a];case 5:this.$=[];break;case 6:"nl"!=o[a]&&(o[a-1].push(o[a]),this.$=o[a-1]);break;case 7:case 8:case 39:case 40:this.$=o[a];break;case 9:this.$="nl";break;case 10:this.$={stmt:"state",id:o[a],type:"default",description:""};break;case 11:this.$={stmt:"state",id:o[a-1],type:"default",description:r.trimColon(o[a])};break;case 12:this.$={stmt:"relation",state1:{stmt:"state",id:o[a-2],type:"default",description:""},state2:{stmt:"state",id:o[a],type:"default",description:""}};break;case 13:this.$={stmt:"relation",state1:{stmt:"state",id:o[a-3],type:"default",description:""},state2:{stmt:"state",id:o[a-1],type:"default",description:""},description:o[a].substr(1).trim()};break;case 17:this.$={stmt:"state",id:o[a-3],type:"default",description:"",doc:o[a-1]};break;case 18:var c=o[a],l=o[a-2].trim();if(o[a].match(":")){var d=o[a].split(":");c=d[0],l=[l,d[1]]}this.$={stmt:"state",id:c,type:"default",description:l};break;case 19:this.$={stmt:"state",id:o[a-3],type:"default",description:o[a-5],doc:o[a-1]};break;case 20:this.$={stmt:"state",id:o[a],type:"fork"};break;case 21:this.$={stmt:"state",id:o[a],type:"join"};break;case 22:this.$={stmt:"state",id:o[a],type:"choice"};break;case 23:this.$={stmt:"state",id:r.getDividerId(),type:"divider"};break;case 24:this.$={stmt:"state",id:o[a-1].trim(),note:{position:o[a-2].trim(),text:o[a].trim()}};break;case 28:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 29:case 30:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 33:r.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 34:r.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 35:r.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 36:r.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 43:r.parseDirective("%%{","open_directive");break;case 44:r.parseDirective(o[a],"type_directive");break;case 45:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 46:r.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:e,5:n,6:4,7:r,36:6,50:i},{1:[3]},{3:8,4:e,5:n,6:4,7:r,36:6,50:i},{3:9,4:e,5:n,6:4,7:r,36:6,50:i},{3:10,4:e,5:n,6:4,7:r,36:6,50:i},t([1,4,5,14,15,17,20,22,23,24,25,26,27,31,33,35,41,42,43,44,47,50],o,{8:11}),{37:12,51:[1,13]},{51:[2,43]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:s,5:a,6:28,9:14,10:16,11:18,14:c,15:l,17:d,20:u,22:h,23:g,24:f,25:p,26:m,27:b,30:29,31:k,33:w,35:y,36:6,41:_,42:v,43:A,44:C,47:x,50:i},{38:39,39:[1,40],53:E},t([39,53],[2,44]),t(T,[2,6]),{6:28,10:42,11:18,14:c,15:l,17:d,20:u,22:h,23:g,24:f,25:p,26:m,27:b,30:29,31:k,33:w,35:y,36:6,41:_,42:v,43:A,44:C,47:x,50:i},t(T,[2,8]),t(T,[2,9]),t(T,[2,10],{12:[1,43],13:[1,44]}),t(T,[2,14]),{16:[1,45]},t(T,[2,16],{18:[1,46]}),{21:[1,47]},t(T,[2,20]),t(T,[2,21]),t(T,[2,22]),t(T,[2,23]),{28:48,29:[1,49],48:[1,50],49:[1,51]},t(T,[2,26]),t(T,[2,27]),{32:[1,52]},{34:[1,53]},t(T,[2,30]),t(S,[2,39]),t(S,[2,40]),t(T,[2,33]),t(T,[2,34]),t(T,[2,35]),t(T,[2,36]),t(D,[2,31]),{40:54,52:[1,55]},t(D,[2,46]),t(T,[2,7]),t(T,[2,11]),{11:56,22:h,47:x},t(T,[2,15]),t(M,o,{8:57}),{22:[1,58]},{22:[1,59]},{21:[1,60]},{22:[2,41]},{22:[2,42]},t(T,[2,28]),t(T,[2,29]),{38:61,53:E},{53:[2,45]},t(T,[2,12],{12:[1,62]}),{4:s,5:a,6:28,9:14,10:16,11:18,14:c,15:l,17:d,19:[1,63],20:u,22:h,23:g,24:f,25:p,26:m,27:b,30:29,31:k,33:w,35:y,36:6,41:_,42:v,43:A,44:C,47:x,50:i},t(T,[2,18],{18:[1,64]}),{29:[1,65]},{22:[1,66]},t(D,[2,32]),t(T,[2,13]),t(T,[2,17]),t(M,o,{8:67}),t(T,[2,24]),t(T,[2,25]),{4:s,5:a,6:28,9:14,10:16,11:18,14:c,15:l,17:d,19:[1,68],20:u,22:h,23:g,24:f,25:p,26:m,27:b,30:29,31:k,33:w,35:y,36:6,41:_,42:v,43:A,44:C,47:x,50:i},t(T,[2,19])],defaultActions:{7:[2,43],8:[2,1],9:[2,2],10:[2,3],50:[2,41],51:[2,42],55:[2,45]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},B={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:case 33:return 41;case 1:case 34:return 42;case 2:case 35:return 43;case 3:case 36:return 44;case 4:return this.begin("open_directive"),50;case 5:return this.begin("type_directive"),51;case 6:return this.popState(),this.begin("arg_directive"),39;case 7:return this.popState(),this.popState(),53;case 8:return 52;case 9:case 10:case 12:case 13:case 14:case 15:case 46:case 52:break;case 11:case 66:return 5;case 16:return this.pushState("SCALE"),15;case 17:return 16;case 18:case 24:case 40:case 43:this.popState();break;case 19:return this.begin("acc_title"),31;case 20:return this.popState(),"acc_title_value";case 21:return this.begin("acc_descr"),33;case 22:return this.popState(),"acc_descr_value";case 23:this.begin("acc_descr_multiline");break;case 25:return"acc_descr_multiline_value";case 26:this.pushState("STATE");break;case 27:case 30:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),23;case 28:case 31:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),24;case 29:case 32:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),25;case 37:this.begin("STATE_STRING");break;case 38:return this.popState(),this.pushState("STATE_ID"),"AS";case 39:case 54:return this.popState(),"ID";case 41:return"STATE_DESCR";case 42:return 17;case 44:return this.popState(),this.pushState("struct"),18;case 45:return this.popState(),19;case 47:return this.begin("NOTE"),27;case 48:return this.popState(),this.pushState("NOTE_ID"),48;case 49:return this.popState(),this.pushState("NOTE_ID"),49;case 50:this.popState(),this.pushState("FLOATING_NOTE");break;case 51:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 53:return"NOTE_TEXT";case 55:return this.popState(),this.pushState("NOTE_TEXT"),22;case 56:return this.popState(),e.yytext=e.yytext.substr(2).trim(),29;case 57:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),29;case 58:case 59:return 7;case 60:return 14;case 61:return 47;case 62:return 22;case 63:return e.yytext=e.yytext.trim(),12;case 64:return 13;case 65:return 26;case 67:return"INVALID"}},rules:[/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[13,14],inclusive:!1},close_directive:{rules:[13,14],inclusive:!1},arg_directive:{rules:[7,8,13,14],inclusive:!1},type_directive:{rules:[6,7,13,14],inclusive:!1},open_directive:{rules:[5,13,14],inclusive:!1},struct:{rules:[13,14,26,33,34,35,36,45,46,47,61,62,63,64,65],inclusive:!1},FLOATING_NOTE_ID:{rules:[54],inclusive:!1},FLOATING_NOTE:{rules:[51,52,53],inclusive:!1},NOTE_TEXT:{rules:[56,57],inclusive:!1},NOTE_ID:{rules:[55],inclusive:!1},NOTE:{rules:[48,49,50],inclusive:!1},acc_descr_multiline:{rules:[24,25],inclusive:!1},acc_descr:{rules:[22],inclusive:!1},acc_title:{rules:[20],inclusive:!1},SCALE:{rules:[17,18],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[39],inclusive:!1},STATE_STRING:{rules:[40,41],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[13,14,27,28,29,30,31,32,37,38,42,43,44],inclusive:!1},ID:{rules:[13,14],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,12,14,15,16,19,21,23,26,44,47,58,59,60,61,62,63,64,66,67],inclusive:!0}}};function L(){this.yy={}}return I.lexer=B,L.prototype=I,I.Parser=L,new L}();_7.parser=_7;const v7=(t,e)=>{var n;return"dagre-wrapper"!==(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer)&&null!==t.match(/^\s*stateDiagram/)},A7=(t,e)=>{var n;return null!==t.match(/^\s*stateDiagram-v2/)||!(!t.match(/^\s*stateDiagram/)||"dagre-wrapper"!==(null==(n=null==e?void 0:e.state)?void 0:n.defaultRenderer))},C7=t=>JSON.parse(JSON.stringify(t));let x7=[];const E7=function(t,e,n){h9.parseDirective(this,t,e,n)},T7=t=>{u.info("Setting root doc",t),x7=t},S7=()=>x7,D7=(t,e,n)=>{if("relation"===e.stmt)D7(t,e.state1,!0),D7(t,e.state2,!1);else if("state"===e.stmt&&"[*]"===e.id&&(e.id=n?t.id+"_start":t.id+"_end",e.start=n),e.doc){const t=[];let n=0,r=[];for(n=0;n<e.doc.length;n++)if("divider"===e.doc[n].type){const i=C7(e.doc[n]);i.doc=C7(r),t.push(i),r=[]}else r.push(e.doc[n]);if(t.length>0&&r.length>0){const n={stmt:"state",id:zN(),type:"divider",doc:C7(r)};t.push(C7(n)),e.doc=t}e.doc.forEach((t=>D7(e,t,!0)))}},M7=()=>(D7({id:"root"},{id:"root",doc:x7},!0),{id:"root",doc:x7}),I7=t=>{let e;e=t.doc?t.doc:t,u.info(e),R7(!0),u.info("Extract",e),e.forEach((t=>{"state"===t.stmt&&P7(t.id,t.type,t.doc,t.description,t.note),"relation"===t.stmt&&z7(t.state1.id,t.state2.id,t.description)}))},B7=()=>({relations:[],states:{},documents:{}});let L7={root:B7()},N7=L7.root,O7=0;const P7=function(t,e,n,r,i){void 0===N7.states[t]?N7.states[t]={id:t,descriptions:[],type:e,doc:n,note:i}:(N7.states[t].doc||(N7.states[t].doc=n),N7.states[t].type||(N7.states[t].type=e)),r&&(u.info("Adding state ",t,r),"string"==typeof r&&F7(t,r.trim()),"object"==typeof r&&r.forEach((e=>F7(t,e.trim())))),i&&(N7.states[t].note=i,N7.states[t].note.text=gI.sanitizeText(N7.states[t].note.text,nP()))},R7=function(t){L7={root:B7()},N7=L7.root,N7=L7.root,O7=0,V7=[],t||UP()},z7=function(t,e,n){let r=t,i=e,o="default",s="default";"[*]"===t&&(O7++,r="start"+O7,o="start"),"[*]"===e&&(i="end"+O7,s="end"),P7(r,o),P7(i,s),N7.relations.push({id1:r,id2:i,title:gI.sanitizeText(n,nP())})},F7=function(t,e){const n=N7.states[t];let r=e;":"===r[0]&&(r=r.substr(1).trim()),n.descriptions.push(gI.sanitizeText(r,nP()))};let j7=0,V7=[],$7="TB";const H7={parseDirective:E7,getConfig:()=>nP().state,addState:P7,clear:R7,getState:function(t){return N7.states[t]},getStates:function(){return N7.states},getRelations:function(){return N7.relations},getClasses:()=>V7,getDirection:()=>$7,addRelation:z7,getDividerId:()=>(j7++,"divider-id-"+j7),setDirection:t=>{$7=t},cleanupLabel:function(t){return":"===t.substring(0,1)?t.substr(2).trim():t.trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){u.info("Documents = ",L7)},getRootDoc:S7,setRootDoc:T7,getRootDocV2:M7,extract:I7,trimColon:t=>t&&":"===t[0]?t.substr(1).trim():t.trim(),getAccTitle:qP,setAccTitle:WP,getAccDescription:GP,setAccDescription:YP},U7=t=>t.append("circle").attr("class","start-state").attr("r",nP().state.sizeUnit).attr("cx",nP().state.padding+nP().state.sizeUnit).attr("cy",nP().state.padding+nP().state.sizeUnit),W7=t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",nP().state.textHeight).attr("class","divider").attr("x2",2*nP().state.textHeight).attr("y1",0).attr("y2",0),q7=(t,e)=>{const n=t.append("text").attr("x",2*nP().state.padding).attr("y",nP().state.textHeight+2*nP().state.padding).attr("font-size",nP().state.fontSize).attr("class","state-title").text(e.id),r=n.node().getBBox();return t.insert("rect",":first-child").attr("x",nP().state.padding).attr("y",nP().state.padding).attr("width",r.width+2*nP().state.padding).attr("height",r.height+2*nP().state.padding).attr("rx",nP().state.radius),n},Y7=(t,e)=>{const n=function(t,e,n){const r=t.append("tspan").attr("x",2*nP().state.padding).text(e);n||r.attr("dy",nP().state.textHeight)},r=t.append("text").attr("x",2*nP().state.padding).attr("y",nP().state.textHeight+1.3*nP().state.padding).attr("font-size",nP().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=r.height,o=t.append("text").attr("x",nP().state.padding).attr("y",i+.4*nP().state.padding+nP().state.dividerMargin+nP().state.textHeight).attr("class","state-description");let s=!0,a=!0;e.descriptions.forEach((function(t){s||(n(o,t,a),a=!1),s=!1}));const c=t.append("line").attr("x1",nP().state.padding).attr("y1",nP().state.padding+i+nP().state.dividerMargin/2).attr("y2",nP().state.padding+i+nP().state.dividerMargin/2).attr("class","descr-divider"),l=o.node().getBBox(),d=Math.max(l.width,r.width);return c.attr("x2",d+3*nP().state.padding),t.insert("rect",":first-child").attr("x",nP().state.padding).attr("y",nP().state.padding).attr("width",d+2*nP().state.padding).attr("height",l.height+i+2*nP().state.padding).attr("rx",nP().state.radius),t},G7=(t,e,n)=>{const r=nP().state.padding,i=2*nP().state.padding,o=t.node().getBBox(),s=o.width,a=o.x,c=t.append("text").attr("x",0).attr("y",nP().state.titleShift).attr("font-size",nP().state.fontSize).attr("class","state-title").text(e.id),l=c.node().getBBox().width+i;let d,u=Math.max(l,s);u===s&&(u+=i);const h=t.node().getBBox();e.doc,d=a-r,l>s&&(d=(s-u)/2+r),Math.abs(a-h.x)<r&&l>s&&(d=a-(l-s)/2);const g=1-nP().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",g).attr("class",n?"alt-composit":"composit").attr("width",u).attr("height",h.height+nP().state.textHeight+nP().state.titleShift+1).attr("rx","0"),c.attr("x",d+r),l<=s&&c.attr("x",a+(u-i)/2-l/2+r),t.insert("rect",":first-child").attr("x",d).attr("y",nP().state.titleShift-nP().state.textHeight-nP().state.padding).attr("width",u).attr("height",3*nP().state.textHeight).attr("rx",nP().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",nP().state.titleShift-nP().state.textHeight-nP().state.padding).attr("width",u).attr("height",h.height+3+2*nP().state.textHeight).attr("rx",nP().state.radius),t},Z7=t=>(t.append("circle").attr("class","end-state-outer").attr("r",nP().state.sizeUnit+nP().state.miniPadding).attr("cx",nP().state.padding+nP().state.sizeUnit+nP().state.miniPadding).attr("cy",nP().state.padding+nP().state.sizeUnit+nP().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",nP().state.sizeUnit).attr("cx",nP().state.padding+nP().state.sizeUnit+2).attr("cy",nP().state.padding+nP().state.sizeUnit+2)),K7=(t,e)=>{let n=nP().state.forkWidth,r=nP().state.forkHeight;if(e.parentId){let t=n;n=r,r=t}return t.append("rect").style("stroke","black").style("fill","black").attr("width",n).attr("height",r).attr("x",nP().state.padding).attr("y",nP().state.padding)},Q7=(t,e,n,r)=>{let i=0;const o=r.append("text");o.style("text-anchor","start"),o.attr("class","noteText");let s=t.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");const a=s.split(gI.lineBreakRegex);let c=1.25*nP().state.noteMargin;for(const t of a){const r=t.trim();if(r.length>0){const t=o.append("tspan");t.text(r),0===c&&(c+=t.node().getBBox().height),i+=c,t.attr("x",e+nP().state.noteMargin),t.attr("y",n+i+1.25*nP().state.noteMargin)}}return{textWidth:o.node().getBBox().width,textHeight:i}},X7=(t,e)=>{e.attr("class","state-note");const n=e.append("rect").attr("x",0).attr("y",nP().state.padding),r=e.append("g"),{textWidth:i,textHeight:o}=Q7(t,0,0,r);return n.attr("height",o+2*nP().state.noteMargin),n.attr("width",i+2*nP().state.noteMargin),n},J7=function(t,e){const n=e.id,r={id:n,label:e.id,width:0,height:0},i=t.append("g").attr("id",n).attr("class","stateGroup");"start"===e.type&&U7(i),"end"===e.type&&Z7(i),"fork"!==e.type&&"join"!==e.type||K7(i,e),"note"===e.type&&X7(e.note.text,i),"divider"===e.type&&W7(i),"default"===e.type&&0===e.descriptions.length&&q7(i,e),"default"===e.type&&e.descriptions.length>0&&Y7(i,e);const o=i.node().getBBox();return r.width=o.width+2*nP().state.padding,r.height=o.height+2*nP().state.padding,r};let t8=0;const e8=function(t,e,n){const r=function(t){switch(t){case H7.relationType.AGGREGATION:return"aggregation";case H7.relationType.EXTENSION:return"extension";case H7.relationType.COMPOSITION:return"composition";case H7.relationType.DEPENDENCY:return"dependency"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const i=e.points,o=OT().x((function(t){return t.x})).y((function(t){return t.y})).curve(PS),s=t.append("path").attr("d",o(i)).attr("id","edge"+t8).attr("class","transition");let a="";if(nP().state.arrowMarkerAbsolute&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=a.replace(/\(/g,"\\("),a=a.replace(/\)/g,"\\)")),s.attr("marker-end","url("+a+"#"+r(H7.relationType.DEPENDENCY)+"End)"),void 0!==n.title){const r=t.append("g").attr("class","stateLabel"),{x:i,y:o}=JN.calcLabelPosition(e.points),s=gI.getRows(n.title);let a=0;const c=[];let l=0,d=0;for(let t=0;t<=s.length;t++){const e=r.append("text").attr("text-anchor","middle").text(s[t]).attr("x",i).attr("y",o+a),n=e.node().getBBox();if(l=Math.max(l,n.width),d=Math.min(d,n.x),u.info(n.x,i,o+a),0===a){const t=e.node().getBBox();a=t.height,u.info("Title height",a,o)}c.push(e)}let h=a*s.length;if(s.length>1){const t=(s.length-1)*a*.5;c.forEach(((e,n)=>e.attr("y",o+n*a-t))),h=a*s.length}const g=r.node().getBBox();r.insert("rect",":first-child").attr("class","box").attr("x",i-l/2-nP().state.padding/2).attr("y",o-h/2-nP().state.padding/2-3.5).attr("width",l+nP().state.padding).attr("height",h+nP().state.padding),u.info(g)}t8++};let n8;const r8={},i8=function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},o8=function(t,e,n,r){n8=nP().state;const i=nP().securityLevel;let o;"sandbox"===i&&(o=Qr("#i"+e));const s=Qr("sandbox"===i?o.nodes()[0].contentDocument.body:"body"),a="sandbox"===i?o.nodes()[0].contentDocument:document;u.debug("Rendering diagram "+t);const c=s.select(`[id='${e}']`);i8(c),new lX.Graph({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel((function(){return{}}));const l=r.db.getRootDoc();a8(l,c,void 0,!1,s,a,r);const d=n8.padding,h=c.node().getBBox(),g=h.width+2*d,f=h.height+2*d;hP(c,f,1.75*g,n8.useMaxWidth),c.attr("viewBox",`${h.x-n8.padding}  ${h.y-n8.padding} `+g+" "+f),yR(r.db,c,e)},s8=t=>t?t.length*n8.fontSizeFactor:1,a8=(t,e,n,r,i,o,s)=>{const a=new lX.Graph({compound:!0,multigraph:!0});let c,l=!0;for(c=0;c<t.length;c++)if("relation"===t[c].stmt){l=!1;break}n?a.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:l?1:n8.edgeLengthFactor,nodeSep:l?1:50,isMultiGraph:!0}):a.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:l?1:n8.edgeLengthFactor,nodeSep:l?1:50,ranker:"tight-tree",isMultiGraph:!0}),a.setDefaultEdgeLabel((function(){return{}})),s.db.extract(t);const d=s.db.getStates(),h=s.db.getRelations(),g=Object.keys(d);for(let t=0;t<g.length;t++){const c=d[g[t]];let l;if(n&&(c.parentId=n),c.doc){let t=e.append("g").attr("id",c.id).attr("class","stateGroup");l=a8(c.doc,t,c.id,!r,i,o,s);{t=G7(t,c,r);let e=t.node().getBBox();l.width=e.width,l.height=e.height+n8.padding/2,r8[c.id]={y:n8.compositTitleSize}}}else l=J7(e,c);if(c.note){const t={descriptions:[],id:c.id+"-note",note:c.note,type:"note"},n=J7(e,t);"left of"===c.note.position?(a.setNode(l.id+"-note",n),a.setNode(l.id,l)):(a.setNode(l.id,l),a.setNode(l.id+"-note",n)),a.setParent(l.id,l.id+"-group"),a.setParent(l.id+"-note",l.id+"-group")}else a.setNode(l.id,l)}u.debug("Count=",a.nodeCount(),a);let f=0;h.forEach((function(t){f++,u.debug("Setting edge",t),a.setEdge(t.id1,t.id2,{relation:t,width:s8(t.title),height:n8.labelHeight*gI.getRows(t.title).length,labelpos:"c"},"id"+f)})),BJ.layout(a),u.debug("Graph after layout",a.nodes());const p=e.node();a.nodes().forEach((function(t){void 0!==t&&void 0!==a.node(t)?(u.warn("Node "+t+": "+JSON.stringify(a.node(t))),i.select("#"+p.id+" #"+t).attr("transform","translate("+(a.node(t).x-a.node(t).width/2)+","+(a.node(t).y+(r8[t]?r8[t].y:0)-a.node(t).height/2)+" )"),i.select("#"+p.id+" #"+t).attr("data-x-shift",a.node(t).x-a.node(t).width/2),o.querySelectorAll("#"+p.id+" #"+t+" .divider").forEach((t=>{const e=t.parentElement;let n=0,r=0;e&&(e.parentElement&&(n=e.parentElement.getBBox().width),r=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(r)&&(r=0)),t.setAttribute("x1",0-r+8),t.setAttribute("x2",n-r-8)}))):u.debug("No Node "+t+": "+JSON.stringify(a.node(t)))}));let m=p.getBBox();a.edges().forEach((function(t){void 0!==t&&void 0!==a.edge(t)&&(u.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(a.edge(t))),e8(e,a.edge(t),a.edge(t).relation))})),m=p.getBBox();const b={id:n||"root",label:n||"root",width:0,height:0};return b.width=m.width+2*n8.padding,b.height=m.height+2*n8.padding,u.debug("Doc rendered",b,a),b},c8={setConf:function(){},draw:o8},l8={};let d8={};const u8=(t,e,n,r)=>{if("root"!==n.id){let e="rect";!0===n.start&&(e="start"),!1===n.start&&(e="end"),"default"!==n.type&&(e=n.type),d8[n.id]||(d8[n.id]={id:n.id,shape:e,description:gI.sanitizeText(n.id,nP()),classes:"statediagram-state"}),n.description&&(Array.isArray(d8[n.id].description)?(d8[n.id].shape="rectWithTitle",d8[n.id].description.push(n.description)):d8[n.id].description.length>0?(d8[n.id].shape="rectWithTitle",d8[n.id].description===n.id?d8[n.id].description=[n.description]:d8[n.id].description=[d8[n.id].description,n.description]):(d8[n.id].shape="rect",d8[n.id].description=n.description),d8[n.id].description=gI.sanitizeTextOrArray(d8[n.id].description,nP())),1===d8[n.id].description.length&&"rectWithTitle"===d8[n.id].shape&&(d8[n.id].shape="rect"),!d8[n.id].type&&n.doc&&(u.info("Setting cluster for ",n.id,f8(n)),d8[n.id].type="group",d8[n.id].dir=f8(n),d8[n.id].shape="divider"===n.type?"divider":"roundedWithTitle",d8[n.id].classes=d8[n.id].classes+" "+(r?"statediagram-cluster statediagram-cluster-alt":"statediagram-cluster"));const i={labelStyle:"",shape:d8[n.id].shape,labelText:d8[n.id].description,classes:d8[n.id].classes,style:"",id:n.id,dir:d8[n.id].dir,domId:"state-"+n.id+"-"+h8,type:d8[n.id].type,padding:15};if(n.note){const e={labelStyle:"",shape:"note",labelText:n.note.text,classes:"statediagram-note",style:"",id:n.id+"----note-"+h8,domId:"state-"+n.id+"----note-"+h8,type:d8[n.id].type,padding:15},r={labelStyle:"",shape:"noteGroup",labelText:n.note.text,classes:d8[n.id].classes,style:"",id:n.id+"----parent",domId:"state-"+n.id+"----parent-"+h8,type:"group",padding:0};h8++,t.setNode(n.id+"----parent",r),t.setNode(e.id,e),t.setNode(n.id,i),t.setParent(n.id,n.id+"----parent"),t.setParent(e.id,n.id+"----parent");let o=n.id,s=e.id;"left of"===n.note.position&&(o=e.id,s=n.id),t.setEdge(o,s,{arrowhead:"none",arrowType:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal"})}else t.setNode(n.id,i)}e&&"root"!==e.id&&(u.trace("Setting node ",n.id," to be child of its parent ",e.id),t.setParent(n.id,e.id)),n.doc&&(u.trace("Adding nodes children "),g8(t,n,n.doc,!r))};let h8=0;const g8=(t,e,n,r)=>{u.trace("items",n),n.forEach((n=>{if("state"===n.stmt||"default"===n.stmt)u8(t,e,n,r);else if("relation"===n.stmt){u8(t,e,n.state1,r),u8(t,e,n.state2,r);const i={id:"edge"+h8,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:gI.sanitizeText(n.description,nP()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition"};let o=n.state1.id,s=n.state2.id;t.setEdge(o,s,i,h8),h8++}}))},f8=(t,e)=>{let n=e||"TB";if(t.doc)for(let e=0;e<t.doc.length;e++){const r=t.doc[e];"dir"===r.stmt&&(n=r.value)}return n},p8={setConf:function(t){const e=Object.keys(t);for(let n=0;n<e.length;n++)l8[e[n]]=t[e[n]]},getClasses:function(t,e){return u.trace("Extracting classes"),e.sb.clear(),e.parser.parse(t),e.sb.getClasses()},draw:function(t,e,n,r){u.info("Drawing state diagram (v2)",e),d8={},r.db.getDirection();const{securityLevel:i,state:o}=nP(),s=o.nodeSpacing||50,a=o.rankSpacing||50;u.info(r.db.getRootDocV2()),r.db.extract(r.db.getRootDocV2()),u.info(r.db.getRootDocV2());const c=new lX.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:f8(r.db.getRootDocV2()),nodesep:s,ranksep:a,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let l;u8(c,void 0,r.db.getRootDocV2(),!0),"sandbox"===i&&(l=Qr("#i"+e));const d=Qr("sandbox"===i?l.nodes()[0].contentDocument.body:"body"),h=d.select(`[id="${e}"]`),g=d.select("#"+e+" g");q0(g,c,["barb"],"statediagram",e);const f=8,p=h.node().getBBox(),m=p.width+2*f,b=p.height+2*f;h.attr("class","statediagram");const k=h.node().getBBox();hP(h,b,m,o.useMaxWidth);const w=`${k.x-f} ${k.y-f} ${m} ${b}`;u.debug(`viewBox ${w}`),h.attr("viewBox",w);const y=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let t=0;t<y.length;t++){const e=y[t],n=e.getBBox(),r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",n.width),r.setAttribute("height",n.height),e.insertBefore(r,e.firstChild)}yR(r.db,h,e)}};var m8=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,2],n=[1,5],r=[6,9,11,17,18,20,22,23,24,26],i=[1,15],o=[1,16],s=[1,17],a=[1,18],c=[1,19],l=[1,20],d=[1,24],u=[4,6,9,11,17,18,20,22,23,24,26],h={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,n,r,i,o,s){var a=o.length-1;switch(i){case 1:return o[a-1];case 3:case 7:case 8:this.$=[];break;case 4:o[a-1].push(o[a]),this.$=o[a-1];break;case 5:case 6:this.$=o[a];break;case 11:r.setDiagramTitle(o[a].substr(6)),this.$=o[a].substr(6);break;case 12:this.$=o[a].trim(),r.setAccTitle(this.$);break;case 13:case 14:this.$=o[a].trim(),r.setAccDescription(this.$);break;case 15:r.addSection(o[a].substr(8)),this.$=o[a].substr(8);break;case 16:r.addTask(o[a-1],o[a]),this.$="task";break;case 18:r.parseDirective("%%{","open_directive");break;case 19:r.parseDirective(o[a],"type_directive");break;case 20:o[a]=o[a].trim().replace(/'/g,'"'),r.parseDirective(o[a],"arg_directive");break;case 21:r.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:e,7:3,12:4,26:n},{1:[3]},t(r,[2,3],{5:6}),{3:7,4:e,7:3,12:4,26:n},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:i,18:o,20:s,22:a,23:c,24:l,26:n},{1:[2,2]},{14:22,15:[1,23],29:d},t([15,29],[2,19]),t(r,[2,8],{1:[2,1]}),t(r,[2,4]),{7:21,10:25,12:4,17:i,18:o,20:s,22:a,23:c,24:l,26:n},t(r,[2,6]),t(r,[2,7]),t(r,[2,11]),{19:[1,26]},{21:[1,27]},t(r,[2,14]),t(r,[2,15]),{25:[1,28]},t(r,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},t(r,[2,5]),t(r,[2,12]),t(r,[2,13]),t(r,[2,16]),t(u,[2,9]),{14:32,29:d},{29:[2,20]},{11:[1,33]},t(u,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[],i=[null],o=[],s=this.table,a="",c=0,l=0,d=2,u=1,h=o.slice.call(arguments,1),g=Object.create(this.lexer),f={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(f.yy[p]=this.yy[p]);g.setInput(t,f.yy),f.yy.lexer=g,f.yy.parser=this,void 0===g.yylloc&&(g.yylloc={});var m=g.yylloc;o.push(m);var b=g.options&&g.options.ranges;function k(){var t;return"number"!=typeof(t=r.pop()||g.lex()||u)&&(t instanceof Array&&(t=(r=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,y,_,v,A,C,x,E,T={};;){if(y=n[n.length-1],this.defaultActions[y]?_=this.defaultActions[y]:(null==w&&(w=k()),_=s[y]&&s[y][w]),void 0===_||!_.length||!_[0]){var S="";for(A in E=[],s[y])this.terminals_[A]&&A>d&&E.push("'"+this.terminals_[A]+"'");S=g.showPosition?"Parse error on line "+(c+1)+":\n"+g.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(c+1)+": Unexpected "+(w==u?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(S,{text:g.match,token:this.terminals_[w]||w,line:g.yylineno,loc:m,expected:E})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(_[0]){case 1:n.push(w),i.push(g.yytext),o.push(g.yylloc),n.push(_[1]),w=null,l=g.yyleng,a=g.yytext,c=g.yylineno,m=g.yylloc;break;case 2:if(C=this.productions_[_[1]][1],T.$=i[i.length-C],T._$={first_line:o[o.length-(C||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(C||1)].first_column,last_column:o[o.length-1].last_column},b&&(T._$.range=[o[o.length-(C||1)].range[0],o[o.length-1].range[1]]),void 0!==(v=this.performAction.apply(T,[a,l,c,f.yy,_[1],i,o].concat(h))))return v;C&&(n=n.slice(0,-1*C*2),i=i.slice(0,-1*C),o=o.slice(0,-1*C)),n.push(this.productions_[_[1]][0]),i.push(T.$),o.push(T._$),x=s[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},g={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,n,r){switch(n){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:case 8:case 9:break;case 7:return 11;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};function f(){this.yy={}}return h.lexer=g,f.prototype=h,h.Parser=f,new f}();m8.parser=m8;const b8=t=>null!==t.match(/^\s*journey/);let k8="";const w8=[],y8=[],_8=[],v8=function(){let t=C8();const e=100;let n=0;for(;!t&&n<e;)t=C8(),n++;return y8.push(..._8),y8},A8=function(){const t=[];return y8.forEach((e=>{e.people&&t.push(...e.people)})),[...new Set(t)].sort()},C8=function(){const t=function(t){return _8[t].processed};let e=!0;for(let n=0;n<_8.length;n++)t(n),e=e&&_8[n].processed;return e},x8={parseDirective:function(t,e,n){h9.parseDirective(this,t,e,n)},getConfig:()=>nP().journey,clear:function(){w8.length=0,y8.length=0,k8="",_8.length=0,UP()},setDiagramTitle:ZP,getDiagramTitle:KP,setAccTitle:WP,getAccTitle:qP,setAccDescription:YP,getAccDescription:GP,addSection:function(t){k8=t,w8.push(t)},getSections:function(){return w8},getTasks:v8,addTask:function(t,e){const n=e.substr(1).split(":");let r=0,i=[];1===n.length?(r=Number(n[0]),i=[]):(r=Number(n[0]),i=n[1].split(","));const o=i.map((t=>t.trim())),s={section:k8,type:k8,people:o,task:t,score:r};_8.push(s)},addTaskOrg:function(t){const e={section:k8,type:k8,description:t,task:t,classes:[]};y8.push(e)},getActors:function(){return A8()}},E8=function(t,e){const n=t.append("rect");return n.attr("x",e.x),n.attr("y",e.y),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("width",e.width),n.attr("height",e.height),n.attr("rx",e.rx),n.attr("ry",e.ry),void 0!==e.class&&n.attr("class",e.class),n},T8=function(t,e){const n=15,r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",n).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");function o(t){const r=ST().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(n/2).outerRadius(n/2.2);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function s(t){const r=ST().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(n/2).outerRadius(n/2.2);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function a(t){t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.append("circle").attr("cx",e.cx-n/3).attr("cy",e.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+n/3).attr("cy",e.cy-n/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),e.score>3?o(i):e.score<3?s(i):a(i),r},S8=function(t,e){const n=t.append("circle");return n.attr("cx",e.cx),n.attr("cy",e.cy),n.attr("class","actor-"+e.pos),n.attr("fill",e.fill),n.attr("stroke",e.stroke),n.attr("r",e.r),void 0!==n.class&&n.attr("class",n.class),void 0!==e.title&&n.append("title").text(e.title),n},D8=function(t,e){const n=e.text.replace(/<br\s*\/?>/gi," "),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.attr("class","legend"),r.style("text-anchor",e.anchor),void 0!==e.class&&r.attr("class",e.class);const i=r.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.text(n),r},M8=function(t,e){function n(t,e,n,r,i){return t+","+e+" "+(t+n)+","+e+" "+(t+n)+","+(e+r-i)+" "+(t+n-1.2*i)+","+(e+r)+" "+t+","+(e+r)}const r=t.append("polygon");r.attr("points",n(e.x,e.y,50,20,7)),r.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,D8(t,e)},I8=function(t,e,n){const r=t.append("g"),i=P8();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=n.width,i.height=n.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,E8(r,i),R8(n)(e.text,r,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},n,e.colour)};let B8=-1;const L8=function(t,e,n){const r=e.x+n.width/2,i=t.append("g");B8++;const o=450;i.append("line").attr("id","task"+B8).attr("x1",r).attr("y1",e.y).attr("x2",r).attr("y2",o).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),T8(i,{cx:r,cy:300+30*(5-e.score),score:e.score});const s=P8();s.x=e.x,s.y=e.y,s.fill=e.fill,s.width=n.width,s.height=n.height,s.class="task task-type-"+e.num,s.rx=3,s.ry=3,E8(i,s);let a=e.x+14;e.people.forEach((t=>{const n=e.actors[t].color,r={cx:a,cy:e.y,r:7,fill:n,stroke:"#000",title:t,pos:e.actors[t].position};S8(i,r),a+=10})),R8(n)(e.task,i,s.x,s.y,s.width,s.height,{class:"task"},n,e.colour)},N8=function(t,e){E8(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},O8=function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},P8=function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},R8=function(){function t(t,e,n,i,o,s,a,c){r(e.append("text").attr("x",n+o/2).attr("y",i+s/2+5).style("font-color",c).style("text-anchor","middle").text(t),a)}function e(t,e,n,i,o,s,a,c,l){const{taskFontSize:d,taskFontFamily:u}=c,h=t.split(/<br\s*\/?>/gi);for(let t=0;t<h.length;t++){const c=t*d-d*(h.length-1)/2,g=e.append("text").attr("x",n+o/2).attr("y",i).attr("fill",l).style("text-anchor","middle").style("font-size",d).style("font-family",u);g.append("tspan").attr("x",n+o/2).attr("dy",c).text(h[t]),g.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),r(g,a)}}function n(t,n,i,o,s,a,c,l){const d=n.append("switch"),u=d.append("foreignObject").attr("x",i).attr("y",o).attr("width",s).attr("height",a).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,d,i,o,s,a,c,l),r(u,c)}function r(t,e){for(const n in e)n in e&&t.attr(n,e[n])}return function(r){return"fo"===r.textPlacement?n:"old"===r.textPlacement?t:e}}(),z8={drawRect:E8,drawCircle:S8,drawSection:I8,drawText:D8,drawLabel:M8,drawTask:L8,drawBackgroundRect:N8,getTextObj:O8,getNoteRect:P8,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},F8=function(t){Object.keys(t).forEach((function(e){$8[e]=t[e]}))},j8={};function V8(t){const e=nP().journey;let n=60;Object.keys(j8).forEach((r=>{const i=j8[r].color,o={cx:20,cy:n,r:7,fill:i,stroke:"#000",pos:j8[r].position};z8.drawCircle(t,o);const s={x:40,y:n+7,fill:"#666",text:r,textMargin:5|e.boxTextMargin};z8.drawText(t,s),n+=20}))}const $8=nP().journey,H8=$8.leftMargin,U8=function(t,e,n,r){const i=nP().journey;r.db.clear(),r.parser.parse(t+"\n");const o=nP().securityLevel;let s;"sandbox"===o&&(s=Qr("#i"+e));const a=Qr("sandbox"===o?s.nodes()[0].contentDocument.body:"body");W8.init();const c=a.select("#"+e);z8.initGraphics(c);const l=r.db.getTasks(),d=r.db.getDiagramTitle(),u=r.db.getActors();for(const t in j8)delete j8[t];let h=0;u.forEach((t=>{j8[t]={color:i.actorColours[h%i.actorColours.length],position:h},h++})),V8(c),W8.insert(0,0,H8,50*Object.keys(j8).length),G8(c,l,0);const g=W8.getBounds();d&&c.append("text").text(d).attr("x",H8).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const f=g.stopy-g.starty+2*i.diagramMarginY,p=H8+g.stopx+2*i.diagramMarginX;hP(c,f,p,i.useMaxWidth),c.append("line").attr("x1",H8).attr("y1",4*i.height).attr("x2",p-H8-4).attr("y2",4*i.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const m=d?70:0;c.attr("viewBox",`${g.startx} -25 ${p} ${f+m}`),c.attr("preserveAspectRatio","xMinYMin meet"),c.attr("height",f+m+25),yR(r.db,c,e)},W8={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,n,r){void 0===t[e]?t[e]=n:t[e]=r(n,t[e])},updateBounds:function(t,e,n,r){const i=nP().journey,o=this;let s=0;function a(a){return function(c){s++;const l=o.sequenceItems.length-s+1;o.updateVal(c,"starty",e-l*i.boxMargin,Math.min),o.updateVal(c,"stopy",r+l*i.boxMargin,Math.max),o.updateVal(W8.data,"startx",t-l*i.boxMargin,Math.min),o.updateVal(W8.data,"stopx",n+l*i.boxMargin,Math.max),"activation"!==a&&(o.updateVal(c,"startx",t-l*i.boxMargin,Math.min),o.updateVal(c,"stopx",n+l*i.boxMargin,Math.max),o.updateVal(W8.data,"starty",e-l*i.boxMargin,Math.min),o.updateVal(W8.data,"stopy",r+l*i.boxMargin,Math.max))}}this.sequenceItems.forEach(a())},insert:function(t,e,n,r){const i=Math.min(t,n),o=Math.max(t,n),s=Math.min(e,r),a=Math.max(e,r);this.updateVal(W8.data,"startx",i,Math.min),this.updateVal(W8.data,"starty",s,Math.min),this.updateVal(W8.data,"stopx",o,Math.max),this.updateVal(W8.data,"stopy",a,Math.max),this.updateBounds(i,s,o,a)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},q8=$8.sectionFills,Y8=$8.sectionColours,G8=function(t,e,n){const r=nP().journey;let i="";const o=n+(2*r.height+r.diagramMarginY);let s=0,a="#CCC",c="black",l=0;for(let n=0;n<e.length;n++){const d=e[n];if(i!==d.section){a=q8[s%q8.length],l=s%q8.length,c=Y8[s%Y8.length];const e={x:n*r.taskMargin+n*r.width+H8,y:50,text:d.section,fill:a,num:l,colour:c};z8.drawSection(t,e,r),i=d.section,s++}const u=d.people.reduce(((t,e)=>(j8[e]&&(t[e]=j8[e]),t)),{});d.x=n*r.taskMargin+n*r.width+H8,d.y=o,d.width=r.diagramMarginX,d.height=r.diagramMarginY,d.colour=c,d.fill=a,d.num=l,d.actors=u,z8.drawTask(t,d,r),W8.insert(d.x,d.y,d.x+d.width+r.taskMargin,450)}},Z8={setConf:F8,draw:U8};let K8={};const Q8={setConf:function(t){K8={...K8,...t}},draw:(t,e,n)=>{try{u.debug("Renering svg for syntax error\n");const t=Qr("#"+e),r=t.append("g");r.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),r.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),r.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),r.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),r.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),r.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),r.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),r.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+n),t.attr("height",100),t.attr("width",500),t.attr("viewBox","768 0 912 512")}catch(t){u.error("Error while rendering info diagram"),u.error(XN(t))}}};let X8=!1;const J8=()=>{X8||(X8=!0,OP("error",{db:{clear:()=>{}},styles:mP,renderer:Q8,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},(t=>"error"===t.toLowerCase().trim())),OP("c4",{parser:zR,db:az,renderer:Yz,styles:xP,init:t=>{Yz.setConf(t.c4)}},FR),OP("class",{parser:Gz,db:TF,renderer:qJ,styles:fP,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,TF.clear()}},Zz),OP("classDiagram",{parser:Gz,db:TF,renderer:Q0,styles:fP,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,TF.clear()}},Kz),OP("er",{parser:X0,db:i1,renderer:E1,styles:pP},J0),OP("gantt",{parser:A4,db:a3,renderer:d3,styles:kP},C4),OP("info",{parser:u3,db:f3,renderer:p3,styles:wP},m3),OP("pie",{parser:b3,db:_3,renderer:x3,styles:yP},k3),OP("requirement",{parser:E3,db:L3,renderer:G3,styles:_P},T3),OP("sequence",{parser:Z3,db:b6,renderer:y7,styles:vP,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");b6.setWrap(t.wrap),y7.setConf(t.sequence)}},K3),OP("state",{parser:_7,db:H7,renderer:c8,styles:AP,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,H7.clear()}},v7),OP("stateDiagram",{parser:_7,db:H7,renderer:p8,styles:AP,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,H7.clear()}},A7),OP("journey",{parser:m8,db:x8,renderer:Z8,styles:CP,init:t=>{Z8.setConf(t.journey),x8.clear()}},b8),OP("flowchart",{parser:T1,db:v2,renderer:v4,styles:bP,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,b4.setConf(t.flowchart),v2.clear(),v2.setGen("gen-1")}},S1),OP("flowchart-v2",{parser:T1,db:v2,renderer:v4,styles:bP,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,eP({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),v4.setConf(t.flowchart),v2.clear(),v2.setGen("gen-2")}},D1),OP("gitGraph",{parser:zP,db:wR,renderer:PR,styles:RR},FP))};class t9{constructor(t,e){var n,r;i(this,"type","graph"),i(this,"parser"),i(this,"renderer"),i(this,"db"),i(this,"detectTypeFailed",!1),this.txt=t;const o=nP();this.txt=t;try{this.type=iB(t,o)}catch(t){this.handleError(t,e),this.type="error",this.detectTypeFailed=!0}const s=PP(this.type);u.debug("Type "+this.type),this.db=s.db,null==(r=(n=this.db).clear)||r.call(n),this.renderer=s.renderer,this.parser=s.parser,this.parser.parser.yy=this.db,s.init&&(s.init(o),u.debug("Initialized diagram "+this.type,o)),this.txt+="\n",this.parse(this.txt,e)}parse(t,e){if(this.detectTypeFailed)return!1;try{return t+="\n",this.db.clear(),this.parser.parse(t),!0}catch(t){this.handleError(t,e)}return!1}handleError(t,e){if(!e)throw t;QN(t)?e(t.str,t.hash):e(t)}getParser(){return this.parser}getType(){return this.type}}const e9=(t,e)=>{const n=iB(t,nP());try{return PP(n),new t9(t,e)}catch(r){if(!(r instanceof RP))throw u.error(r),r;const i=sB(n);if(!i)throw new Error(`Loader for ${n} not found.`);return i().then((({diagram:r})=>(OP(n,r,void 0),new t9(t,e))))}};function n9(t,e){return J8(),new t9(t,e).parse(t,e)}async function r9(t,e){return J8(),(await e9(t,e)).parse(t,e)}const i9=function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/classDef.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/#\w+;/g,(function(t){const e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"ﬂ°°"+e+"¶ß":"ﬂ°"+e+"¶ß"})),e},o9=function(t){let e=t;return e=e.replace(/ﬂ°°/g,(function(){return"&#"})),e=e.replace(/ﬂ°/g,(function(){return"&"})),e=e.replace(/¶ß/g,(function(){return";"})),e},s9=function(t,e,n,r){var i;J8(),oP(),e=e.replace(/\r\n?/g,"\n");const o=JN.detectInit(e);o&&(ZN(o),iP(o));const s=nP();u.debug(s),e.length>s.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let a,c,l=Qr("body");if(void 0!==r){if(r&&(r.innerHTML=""),"sandbox"===s.securityLevel){const e=Qr(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");l=Qr(e.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=Qr(r);l.append("div").attr("id","d"+t).attr("style","font-family: "+s.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const e=document.getElementById(t);let n;if(e&&e.remove(),n="sandbox"===s.securityLevel?document.querySelector("#i"+t):document.querySelector("#d"+t),n&&n.remove(),"sandbox"===s.securityLevel){const e=Qr("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");l=Qr(e.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=Qr("body");l.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=i9(e);try{if(a=e9(e),"then"in a)throw new Error("Diagram is a promise")}catch(t){a=new t9("error"),c=t}const d=l.select("#d"+t).node(),h=a.type,g=d.firstChild,f=g.firstChild;let p="";if(void 0!==s.themeCSS&&(p+=`\n${s.themeCSS}`),void 0!==s.fontFamily&&(p+=`\n:root { --mermaid-font-family: ${s.fontFamily}}`),void 0!==s.altFontFamily&&(p+=`\n:root { --mermaid-alt-font-family: ${s.altFontFamily}}`),"flowchart"===h||"flowchart-v2"===h||"graph"===h){const t=b4.getClasses(e,a),n=s.htmlLabels||(null==(i=s.flowchart)?void 0:i.htmlLabels);for(const e in t)n?(p+=`\n.${e} > * { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} span { ${t[e].styles.join(" !important; ")} !important; }`):(p+=`\n.${e} path { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} rect { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} polygon { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} ellipse { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} circle { ${t[e].styles.join(" !important; ")} !important; }`,t[e].textStyles&&(p+=`\n.${e} tspan { ${t[e].textStyles.join(" !important; ")} !important; }`))}const m=(k=`#${t}`,w=TP(h,p,s.themeVariables),$O(RO(`${k}{${w}}`),HO)),b=document.createElement("style");var k,w;b.innerHTML=`#${t} `+m,g.insertBefore(b,f);try{a.renderer.draw(e,t,UO.version,a)}catch(n){throw Q8.draw(e,t,UO.version),n}l.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let y=l.select("#d"+t).node().innerHTML;if(u.debug("cnf.arrowMarkerAbsolute",s.arrowMarkerAbsolute),uI(s.arrowMarkerAbsolute)||"sandbox"===s.securityLevel||(y=y.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),y=o9(y),y=y.replace(/<br>/g,"<br/>"),"sandbox"===s.securityLevel){const e=l.select("#d"+t+" svg").node(),n="100%";let r="100%";e&&(r=e.viewBox.baseVal.height+"px"),y=`<iframe style="width:${n};height:${r};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+y+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The “iframe” tag is not supported by your browser.\n</iframe>`}else"loose"!==s.securityLevel&&(y=nI.sanitize(y,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(void 0!==n)switch(h){case"flowchart":case"flowchart-v2":n(y,v2.bindFunctions);break;case"gantt":n(y,a3.bindFunctions);break;case"class":case"classDiagram":n(y,TF.bindFunctions);break;default:n(y)}else u.debug("CB = undefined!");y6();const _=Qr("sandbox"===s.securityLevel?"#i"+t:"#d"+t).node();if(_&&"remove"in _&&_.remove(),c)throw c;return y},a9=async function(t,e,n,r){var i;J8(),oP(),e=e.replace(/\r\n?/g,"\n");const o=JN.detectInit(e);o&&(ZN(o),iP(o));const s=nP();u.debug(s),e.length>s.maxTextSize&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let a,c,l=Qr("body");if(void 0!==r){if(r&&(r.innerHTML=""),"sandbox"===s.securityLevel){const e=Qr(r).append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");l=Qr(e.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=Qr(r);l.append("div").attr("id","d"+t).attr("style","font-family: "+s.fontFamily).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").append("g")}else{const e=document.getElementById(t);let n;if(e&&e.remove(),n="sandbox"===s.securityLevel?document.querySelector("#i"+t):document.querySelector("#d"+t),n&&n.remove(),"sandbox"===s.securityLevel){const e=Qr("body").append("iframe").attr("id","i"+t).attr("style","width: 100%; height: 100%;").attr("sandbox","");l=Qr(e.nodes()[0].contentDocument.body),l.node().style.margin=0}else l=Qr("body");l.append("div").attr("id","d"+t).append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg").append("g")}e=i9(e);try{a=await e9(e)}catch(t){a=new t9("error"),c=t}const d=l.select("#d"+t).node(),h=a.type,g=d.firstChild,f=g.firstChild;let p="";if(void 0!==s.themeCSS&&(p+=`\n${s.themeCSS}`),void 0!==s.fontFamily&&(p+=`\n:root { --mermaid-font-family: ${s.fontFamily}}`),void 0!==s.altFontFamily&&(p+=`\n:root { --mermaid-alt-font-family: ${s.altFontFamily}}`),"flowchart"===h||"flowchart-v2"===h||"graph"===h){const t=b4.getClasses(e,a),n=s.htmlLabels||(null==(i=s.flowchart)?void 0:i.htmlLabels);for(const e in t)n?(p+=`\n.${e} > * { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} span { ${t[e].styles.join(" !important; ")} !important; }`):(p+=`\n.${e} path { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} rect { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} polygon { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} ellipse { ${t[e].styles.join(" !important; ")} !important; }`,p+=`\n.${e} circle { ${t[e].styles.join(" !important; ")} !important; }`,t[e].textStyles&&(p+=`\n.${e} tspan { ${t[e].textStyles.join(" !important; ")} !important; }`))}const m=(k=`#${t}`,w=TP(h,p,s.themeVariables),$O(RO(`${k}{${w}}`),HO)),b=document.createElement("style");var k,w;b.innerHTML=`#${t} `+m,g.insertBefore(b,f);try{await a.renderer.draw(e,t,UO.version,a)}catch(n){throw Q8.draw(e,t,UO.version),n}l.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let y=l.select("#d"+t).node().innerHTML;if(u.debug("cnf.arrowMarkerAbsolute",s.arrowMarkerAbsolute),uI(s.arrowMarkerAbsolute)||"sandbox"===s.securityLevel||(y=y.replace(/marker-end="url\(.*?#/g,'marker-end="url(#',"g")),y=o9(y),y=y.replace(/<br>/g,"<br/>"),"sandbox"===s.securityLevel){const e=l.select("#d"+t+" svg").node(),n="100%";let r="100%";e&&(r=e.viewBox.baseVal.height+"px"),y=`<iframe style="width:${n};height:${r};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+y+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The “iframe” tag is not supported by your browser.\n</iframe>`}else"loose"!==s.securityLevel&&(y=nI.sanitize(y,{ADD_TAGS:["foreignobject"],ADD_ATTR:["dominant-baseline"]}));if(void 0!==n)switch(h){case"flowchart":case"flowchart-v2":n(y,v2.bindFunctions);break;case"gantt":n(y,a3.bindFunctions);break;case"class":case"classDiagram":n(y,TF.bindFunctions);break;default:n(y)}else u.debug("CB = undefined!");y6();const _=Qr("sandbox"===s.securityLevel?"#i"+t:"#d"+t).node();if(_&&"remove"in _&&_.remove(),c)throw c;return y};let c9={};const l9=function(t,e,n,r){try{if(void 0!==e)switch(e=e.trim(),n){case"open_directive":c9={};break;case"type_directive":if(!c9)throw new Error("currentDirective is undefined");c9.type=e.toLowerCase();break;case"arg_directive":if(!c9)throw new Error("currentDirective is undefined");c9.args=JSON.parse(e);break;case"close_directive":d9(t,c9,r),c9=void 0}}catch(t){u.error(`Error while rendering sequenceDiagram directive: ${e} jison context: ${n}`),u.error(t.message)}},d9=function(t,e,n){switch(u.debug(`Directive type=${e.type} with args:`,e.args),e.type){case"init":case"initialize":["config"].forEach((t=>{void 0!==e.args[t]&&("flowchart-v2"===n&&(n="flowchart"),e.args[n]=e.args[t],delete e.args[t])})),u.debug("sanitize in handleDirective",e.args),ZN(e.args),u.debug("sanitize in handleDirective (done)",e.args),iP(e.args);break;case"wrap":case"nowrap":t&&t.setWrap&&t.setWrap("wrap"===e.type);break;case"themeCss":u.warn("themeCss encountered");break;default:u.warn(`Unhandled directive: source: '%%{${e.type}: ${JSON.stringify(e.args?e.args:{})}}%%`,e)}};function u9(t={}){t.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),XO(t),(null==t?void 0:t.theme)&&t.theme in QI?t.themeVariables=QI[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=QI.default.getThemeVariables(t.themeVariables));const e="object"==typeof t?QO(t):tP();h(e.logLevel),J8()}const h9=Object.freeze({render:s9,renderAsync:a9,parse:n9,parseAsync:r9,parseDirective:l9,initialize:u9,getConfig:nP,setConfig:eP,getSiteConfig:tP,updateSiteConfig:JO,reset:()=>{oP()},globalReset:()=>{oP(WO)},defaultConfig:WO});h(nP().logLevel),oP(nP());let g9=!1;const f9=async function(t,e,n){try{g9?await w9(t,e,n):m9(t,e,n)}catch(t){u.warn("Syntax Error rendering"),QN(t)&&u.warn(t.str),M9.parseError&&M9.parseError(t)}},p9=(t,e,n)=>{u.warn(t),QN(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},m9=function(t,e,n){const r=h9.getConfig();let i;if(t&&(M9.sequenceConfig=t),u.debug((n?"":"No ")+"Callback function found"),void 0===e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}u.debug(`Found ${i.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(u.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),h9.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));const o=new JN.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let s;const a=[];for(const t of Array.from(i)){
/*! Check if previously processed */
if(u.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const e=`mermaid-${o.next()}`;s=t.innerHTML,s=JN.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=JN.detectInit(s);r&&u.debug("Detected early reinit: ",r);try{h9.render(e,s,((r,i)=>{t.innerHTML=r,void 0!==n&&n(e),i&&i(t)}),t)}catch(t){p9(t,a,M9.parseError)}}if(a.length>0)throw a[0]},b9=t=>{for(const{id:e,detector:n,loader:r}of t)oB(e,n,r)},k9=async t=>{u.debug(`Loading ${t.length} external diagrams`);const e=(await Promise.allSettled(t.map((async({id:t,detector:e,loader:n})=>{const{diagram:r}=await n();OP(t,r,e)})))).filter((t=>"rejected"===t.status));if(e.length>0){u.error(`Failed to load ${e.length} external diagrams`);for(const t of e)u.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}},w9=async function(t,e,n){const r=h9.getConfig();let i;if(t&&(M9.sequenceConfig=t),u.debug((n?"":"No ")+"Callback function found"),void 0===e)i=document.querySelectorAll(".mermaid");else if("string"==typeof e)i=document.querySelectorAll(e);else if(e instanceof HTMLElement)i=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");i=e}u.debug(`Found ${i.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(u.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),h9.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));const o=new JN.initIdGenerator(r.deterministicIds,r.deterministicIDSeed);let s;const a=[];for(const t of Array.from(i)){
/*! Check if previously processed */
if(u.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");const e=`mermaid-${o.next()}`;s=t.innerHTML,s=JN.entityDecode(s).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=JN.detectInit(s);r&&u.debug("Detected early reinit: ",r);try{await h9.renderAsync(e,s,((r,i)=>{t.innerHTML=r,void 0!==n&&n(e),i&&i(t)}),t)}catch(t){p9(t,a,M9.parseError)}}if(a.length>0)throw a[0]},y9=function(t){h9.initialize(t)},_9=async(t,{lazyLoad:e=!0}={})=>{e?b9(t):await k9(t),g9=!0},v9=function(){if(M9.startOnLoad){const{startOnLoad:t}=h9.getConfig();t&&M9.init()}};"undefined"!=typeof document&&
/*!
     * Wait for document loaded before starting the execution
     */
window.addEventListener("load",v9,!1);const A9=function(t){M9.parseError=t},C9=t=>h9.parse(t,M9.parseError),x9=[];let E9=!1;const T9=async()=>{if(!E9){for(E9=!0;x9.length>0;){const t=x9.shift();if(t)try{await t()}catch(t){u.error("Error executing queue",t)}}E9=!1}},S9=t=>new Promise(((e,n)=>{const r=()=>new Promise(((r,i)=>{h9.parseAsync(t,M9.parseError).then((t=>{r(t),e(t)}),(t=>{u.error("Error parsing",t),i(t),n(t)}))}));x9.push(r),T9()})),D9=(t,e,n,r)=>new Promise(((i,o)=>{const s=()=>new Promise(((s,a)=>{h9.renderAsync(t,e,n,r).then((t=>{s(t),i(t)}),(t=>{u.error("Error parsing",t),a(t),o(t)}))}));x9.push(s),T9()})),M9={startOnLoad:!0,diagrams:{},mermaidAPI:h9,parse:C9,parseAsync:S9,render:h9.render,renderAsync:D9,init:f9,initThrowsErrors:m9,initThrowsErrorsAsync:w9,registerExternalDiagrams:_9,initialize:y9,parseError:void 0,contentLoaded:v9,setParseErrorHandler:A9};return M9}()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r={};return(()=>{"use strict";n.d(r,{default:()=>OB});const t=function(){try{return navigator.userAgent.toLowerCase()}catch(t){return""}}(),e={isMac:o(t),isWindows:function(t){return t.indexOf("windows")>-1}(t),isGecko:function(t){return!!t.match(/gecko\/\d+/)}(t),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}(t),isiOS:function(t){return!!t.match(/iphone|ipad/i)||o(t)&&navigator.maxTouchPoints>0}(t),isAndroid:function(t){return t.indexOf("android")>-1}(t),isBlink:function(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}(t),features:{isRegExpUnicodePropertySupported:function(){let t=!1;try{t=0==="ć".search(new RegExp("[\\p{L}]","u"))}catch(t){}return t}()}},i=e;function o(t){return t.indexOf("macintosh")>-1}function s(t,e,n,r){n=n||function(t,e){return t===e};const i=Array.isArray(t)?t:Array.prototype.slice.call(t),o=Array.isArray(e)?e:Array.prototype.slice.call(e),s=function(t,e,n){const r=a(t,e,n);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=c(t,r),o=c(e,r),s=a(i,o,n),l=t.length-s,d=e.length-s;return{firstIndex:r,lastIndexOld:l,lastIndexNew:d}}(i,o,n),l=r?function(t,e){const{firstIndex:n,lastIndexOld:r,lastIndexNew:i}=t;if(-1===n)return Array(e).fill("equal");let o=[];n>0&&(o=o.concat(Array(n).fill("equal")));i-n>0&&(o=o.concat(Array(i-n).fill("insert")));r-n>0&&(o=o.concat(Array(r-n).fill("delete")));i<e&&(o=o.concat(Array(e-i).fill("equal")));return o}(s,o.length):function(t,e){const n=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:o}=e;o-r>0&&n.push({index:r,type:"insert",values:t.slice(r,o)});i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r});return n}(o,s);return l}function a(t,e,n){for(let r=0;r<Math.max(t.length,e.length);r++)if(void 0===t[r]||void 0===e[r]||!n(t[r],e[r]))return r;return-1}function c(t,e){return t.slice(e).reverse()}function l(t,e,n){n=n||function(t,e){return t===e};const r=t.length,i=e.length;if(r>200||i>200||r+i>300)return l.fastDiff(t,e,n,!0);let o,s;if(i<r){const n=t;t=e,e=n,o="delete",s="insert"}else o="insert",s="delete";const a=t.length,c=e.length,d=c-a,u={},h={};function g(r){const i=(void 0!==h[r-1]?h[r-1]:-1)+1,l=void 0!==h[r+1]?h[r+1]:-1,d=i>l?-1:1;u[r+d]&&(u[r]=u[r+d].slice(0)),u[r]||(u[r]=[]),u[r].push(i>l?o:s);let g=Math.max(i,l),f=g-r;for(;f<a&&g<c&&n(t[f],e[g]);)f++,g++,u[r].push("equal");return g}let f,p=0;do{for(f=-p;f<d;f++)h[f]=g(f);for(f=d+p;f>d;f--)h[f]=g(f);h[d]=g(d),p++}while(h[d]!==c);return u[d].slice(1)}function d(t,...e){e.forEach((e=>{const n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertySymbols(e);n.concat(r).forEach((n=>{if(n in t.prototype)return;if("function"==typeof e&&("length"==n||"name"==n||"prototype"==n))return;const r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t.prototype,n,r)}))}))}l.fastDiff=s;const u=function(){return function t(){t.called=!0}};class h{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=u(),this.off=u()}}const g=new Array(256).fill("").map(((t,e)=>("0"+e.toString(16)).slice(-2)));function f(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+g[t>>0&255]+g[t>>8&255]+g[t>>16&255]+g[t>>24&255]+g[e>>0&255]+g[e>>8&255]+g[e>>16&255]+g[e>>24&255]+g[n>>0&255]+g[n>>8&255]+g[n>>16&255]+g[n>>24&255]+g[r>>0&255]+g[r>>8&255]+g[r>>16&255]+g[r>>24&255]}const p={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function m(t,e){const n=p.get(e.priority);for(let r=0;r<t.length;r++)if(p.get(t[r].priority)<n)return void t.splice(r,0,e);t.push(e)}class b extends Error{constructor(t,e,n){super(function(t,e){const n=new WeakSet,r=(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e},i=e?` ${JSON.stringify(e,r)}`:"",o=w(t);return t+i+o}(t,n)),this.name="CKEditorError",this.context=e,this.data=n}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;const n=new b(t.message,e);throw n.stack=t.stack,n}}function k(t,e){console.warn(...y(t,e))}function w(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}function y(t,e){const n=w(t);return e?[t,e,n]:[t,n]}const _="35.3.2",v="object"==typeof window?window:n.g;if(v.CKEDITOR_VERSION)throw new b("ckeditor-duplicated-modules",null);v.CKEDITOR_VERSION=_;const A=Symbol("listeningTo"),C=Symbol("emitterId"),x=Symbol("delegations"),E=T(Object);function T(t){if(!t)return E;return class extends t{on(t,e,n){this.listenTo(this,t,e,n)}once(t,e,n){let r=!1;this.listenTo(this,t,((t,...n)=>{r||(r=!0,t.off(),e.call(this,t,...n))}),n)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,n,r={}){let i,o;this[A]||(this[A]={});const s=this[A];D(t)||S(t);const a=D(t);(i=s[a])||(i=s[a]={emitter:t,callbacks:{}}),(o=i.callbacks[e])||(o=i.callbacks[e]=[]),o.push(n),function(t,e,n,r,i){e._addEventListener?e._addEventListener(n,r,i):t._addEventListener.call(e,n,r,i)}(this,t,e,n,r)}stopListening(t,e,n){const r=this[A];let i=t&&D(t);const o=r&&i?r[i]:void 0,s=o&&e?o.callbacks[e]:void 0;if(!(!r||t&&!o||e&&!s))if(n){N(this,t,e,n);-1!==s.indexOf(n)&&(1===s.length?delete o.callbacks[e]:N(this,t,e,n))}else if(s){for(;n=s.pop();)N(this,t,e,n);delete o.callbacks[e]}else if(o){for(e in o.callbacks)this.stopListening(t,e);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[A]}}fire(t,...e){try{const n=t instanceof h?t:new h(this,t),r=n.name;let i=B(this,r);if(n.path.push(this),i){const t=[n,...e];i=Array.from(i);for(let e=0;e<i.length&&(i[e].callback.apply(this,t),n.off.called&&(delete n.off.called,this._removeEventListener(r,i[e].callback)),!n.stop.called);e++);}const o=this[x];if(o){const t=o.get(r),i=o.get("*");t&&L(t,n,e),i&&L(i,n,e)}return n.return}catch(t){b.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,n)=>{this[x]||(this[x]=new Map),t.forEach((t=>{const r=this[x].get(t);r?r.set(e,n):this[x].set(t,new Map([[e,n]]))}))}}}stopDelegating(t,e){if(this[x])if(t)if(e){const n=this[x].get(t);n&&n.delete(e)}else this[x].delete(t);else this[x].clear()}_addEventListener(t,e,n){!function(t,e){const n=M(t);if(n[e])return;let r=e,i=null;const o=[];for(;""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){for(const t of o)t.callbacks=n[r].callbacks.slice();n[r].childEvents.push(i)}}(this,t);const r=I(this,t),i={callback:e,priority:p.get(n.priority)};for(const t of r)m(t,i)}_removeEventListener(t,e){const n=I(this,t);for(const t of n)for(let n=0;n<t.length;n++)t[n].callback==e&&(t.splice(n,1),n--)}}}function S(t,e){t[C]||(t[C]=e||f())}function D(t){return t[C]}function M(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function I(t,e){const n=M(t)[e];if(!n)return[];let r=[n.callbacks];for(let e=0;e<n.childEvents.length;e++){const i=I(t,n.childEvents[e]);r=r.concat(i)}return r}function B(t,e){let n;return t._events&&(n=t._events[e])&&n.callbacks.length?n.callbacks:e.indexOf(":")>-1?B(t,e.substr(0,e.lastIndexOf(":"))):null}function L(t,e,n){for(let[r,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new h(e.source,i);t.path=[...e.path],r.fire(t,...n)}}function N(t,e,n,r){e._removeEventListener?e._removeEventListener(n,r):t._removeEventListener.call(e,n,r)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((t=>{T[t]=E.prototype[t]}));const O=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},P=Symbol("observableProperties"),R=Symbol("boundObservables"),z=Symbol("boundProperties"),F=Symbol("decoratedMethods"),j=Symbol("decoratedOriginal"),V=$(T());function $(t){if(!t)return V;return class extends t{set(t,e){if(O(t))return void Object.keys(t).forEach((e=>{this.set(e,t[e])}),this);H(this);const n=this[P];if(t in this&&!n.has(t))throw new b("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>n.get(t),set(e){const r=n.get(t);let i=this.fire(`set:${t}`,t,e,r);void 0===i&&(i=e),r===i&&n.has(t)||(n.set(t,i),this.fire(`change:${t}`,t,i,r))}}),this[t]=e}bind(...t){if(!t.length||!q(t))throw new b("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new b("observable-bind-duplicate-properties",this);H(this);const e=this[z];t.forEach((t=>{if(e.has(t))throw new b("observable-bind-rebind",this)}));const n=new Map;return t.forEach((t=>{const r={property:t,to:[]};e.set(t,r),n.set(t,r)})),{to:U,toMany:W,_observable:this,_bindProperties:t,_to:[],_bindings:n}}unbind(...t){if(!this[P])return;const e=this[z],n=this[R];if(t.length){if(!q(t))throw new b("observable-unbind-wrong-properties",this);t.forEach((t=>{const r=e.get(t);r&&(r.to.forEach((([t,e])=>{const i=n.get(t),o=i[e];o.delete(r),o.size||delete i[e],Object.keys(i).length||(n.delete(t),this.stopListening(t,"change"))})),e.delete(t))}))}else n.forEach(((t,e)=>{this.stopListening(e,"change")})),n.clear(),e.clear()}decorate(t){H(this);const e=this[t];if(!e)throw new b("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,((t,n)=>{t.return=e.apply(this,n)})),this[t]=function(...e){return this.fire(t,e)},this[t][j]=e,this[F]||(this[F]=[]),this[F].push(t)}stopListening(t,e,n){if(!t&&this[F]){for(const t of this[F])this[t]=this[t][j];delete this[F]}super.stopListening(t,e,n)}}}function H(t){t[P]||(Object.defineProperty(t,P,{value:new Map}),Object.defineProperty(t,R,{value:new Map}),Object.defineProperty(t,z,{value:new Map}))}function U(...t){const e=function(...t){if(!t.length)throw new b("observable-bind-to-parse-error",null);const e={to:[]};let n;"function"==typeof t[t.length-1]&&(e.callback=t.pop());return t.forEach((t=>{if("string"==typeof t)n.properties.push(t);else{if("object"!=typeof t)throw new b("observable-bind-to-parse-error",null);n={observable:t,properties:[]},e.to.push(n)}})),e}(...t),n=Array.from(this._bindings.keys()),r=n.length;if(!e.callback&&e.to.length>1)throw new b("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new b("observable-bind-to-extra-callback",this);var i;e.to.forEach((t=>{if(t.properties.length&&t.properties.length!==r)throw new b("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)})),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),i=this._observable,this._to.forEach((t=>{const e=i[R];let n;e.get(t.observable)||i.listenTo(t.observable,"change",((r,o)=>{n=e.get(t.observable)[o],n&&n.forEach((t=>{Y(i,t.property)}))}))})),function(t){let e;t._bindings.forEach(((n,r)=>{t._to.forEach((i=>{e=i.properties[n.callback?0:t._bindProperties.indexOf(r)],n.to.push([i.observable,e]),function(t,e,n,r){const i=t[R],o=i.get(n),s=o||{};s[r]||(s[r]=new Set);s[r].add(e),o||i.set(n,s)}(t._observable,n,i.observable,e)}))}))}(this),this._bindProperties.forEach((t=>{Y(this._observable,t)}))}function W(t,e,n){if(this._bindings.size>1)throw new b("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const n=t.map((t=>[t,e]));return Array.prototype.concat.apply([],n)}(t,e),n)}function q(t){return t.every((t=>"string"==typeof t))}function Y(t,e){const n=t[z].get(e);let r;n.callback?r=n.callback.apply(t,n.to.map((t=>t[0][t[1]]))):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=r:t.set(e,r)}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((t=>{$[t]=V.prototype[t]}));class G{constructor(){this._replacedElements=[]}replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}restore(){this._replacedElements.forEach((({element:t,newElement:e})=>{t.style.display="",e&&e.remove()})),this._replacedElements=[]}}function Z(t){let e=0;for(const n of t)e++;return e}function K(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)if(t[r]!=e[r])return r;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function Q(t){return!(!t||!t[Symbol.iterator])}const X="object"==typeof global&&global&&global.Object===Object&&global;var J="object"==typeof self&&self&&self.Object===Object&&self;const tt=X||J||Function("return this")();const et=tt.Symbol;var nt=Object.prototype,rt=nt.hasOwnProperty,it=nt.toString,ot=et?et.toStringTag:void 0;const st=function(t){var e=rt.call(t,ot),n=t[ot];try{t[ot]=void 0;var r=!0}catch(t){}var i=it.call(t);return r&&(e?t[ot]=n:delete t[ot]),i};var at=Object.prototype.toString;const ct=function(t){return at.call(t)};var lt=et?et.toStringTag:void 0;const dt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":lt&&lt in Object(t)?st(t):ct(t)};const ut=Array.isArray;const ht=function(t){return null!=t&&"object"==typeof t};const gt=function(t){return"string"==typeof t||!ut(t)&&ht(t)&&"[object String]"==dt(t)};function ft(t,e,n={},r=[]){const i=n&&n.xmlns,o=i?t.createElementNS(i,e):t.createElement(e);for(const t in n)o.setAttribute(t,n[t]);!gt(r)&&Q(r)||(r=[r]);for(let e of r)gt(e)&&(e=t.createTextNode(e)),o.appendChild(e);return o}const pt=function(t,e){return function(n){return t(e(n))}};const mt=pt(Object.getPrototypeOf,Object);var bt=Function.prototype,kt=Object.prototype,wt=bt.toString,yt=kt.hasOwnProperty,_t=wt.call(Object);const vt=function(t){if(!ht(t)||"[object Object]"!=dt(t))return!1;var e=mt(t);if(null===e)return!0;var n=yt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==_t};const At=function(){this.__data__=[],this.size=0};const Ct=function(t,e){return t===e||t!=t&&e!=e};const xt=function(t,e){for(var n=t.length;n--;)if(Ct(t[n][0],e))return n;return-1};var Et=Array.prototype.splice;const Tt=function(t){var e=this.__data__,n=xt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Et.call(e,n,1),--this.size,!0)};const St=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]};const Dt=function(t){return xt(this.__data__,t)>-1};const Mt=function(t,e){var n=this.__data__,r=xt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function It(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}It.prototype.clear=At,It.prototype.delete=Tt,It.prototype.get=St,It.prototype.has=Dt,It.prototype.set=Mt;const Bt=It;const Lt=function(){this.__data__=new Bt,this.size=0};const Nt=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const Ot=function(t){return this.__data__.get(t)};const Pt=function(t){return this.__data__.has(t)};const Rt=function(t){if(!O(t))return!1;var e=dt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const zt=tt["__core-js_shared__"];var Ft=function(){var t=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();const jt=function(t){return!!Ft&&Ft in t};var Vt=Function.prototype.toString;const $t=function(t){if(null!=t){try{return Vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var Ht=/^\[object .+?Constructor\]$/,Ut=Function.prototype,Wt=Object.prototype,qt=Ut.toString,Yt=Wt.hasOwnProperty,Gt=RegExp("^"+qt.call(Yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Zt=function(t){return!(!O(t)||jt(t))&&(Rt(t)?Gt:Ht).test($t(t))};const Kt=function(t,e){return null==t?void 0:t[e]};const Qt=function(t,e){var n=Kt(t,e);return Zt(n)?n:void 0};const Xt=Qt(tt,"Map");const Jt=Qt(Object,"create");const te=function(){this.__data__=Jt?Jt(null):{},this.size=0};const ee=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var ne=Object.prototype.hasOwnProperty;const re=function(t){var e=this.__data__;if(Jt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(e,t)?e[t]:void 0};var ie=Object.prototype.hasOwnProperty;const oe=function(t){var e=this.__data__;return Jt?void 0!==e[t]:ie.call(e,t)};const se=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Jt&&void 0===e?"__lodash_hash_undefined__":e,this};function ae(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ae.prototype.clear=te,ae.prototype.delete=ee,ae.prototype.get=re,ae.prototype.has=oe,ae.prototype.set=se;const ce=ae;const le=function(){this.size=0,this.__data__={hash:new ce,map:new(Xt||Bt),string:new ce}};const de=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const ue=function(t,e){var n=t.__data__;return de(e)?n["string"==typeof e?"string":"hash"]:n.map};const he=function(t){var e=ue(this,t).delete(t);return this.size-=e?1:0,e};const ge=function(t){return ue(this,t).get(t)};const fe=function(t){return ue(this,t).has(t)};const pe=function(t,e){var n=ue(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function me(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}me.prototype.clear=le,me.prototype.delete=he,me.prototype.get=ge,me.prototype.has=fe,me.prototype.set=pe;const be=me;const ke=function(t,e){var n=this.__data__;if(n instanceof Bt){var r=n.__data__;if(!Xt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new be(r)}return n.set(t,e),this.size=n.size,this};function we(t){var e=this.__data__=new Bt(t);this.size=e.size}we.prototype.clear=Lt,we.prototype.delete=Nt,we.prototype.get=Ot,we.prototype.has=Pt,we.prototype.set=ke;const ye=we;const _e=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};const ve=function(){try{var t=Qt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const Ae=function(t,e,n){"__proto__"==e&&ve?ve(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Ce=Object.prototype.hasOwnProperty;const xe=function(t,e,n){var r=t[e];Ce.call(t,e)&&Ct(r,n)&&(void 0!==n||e in t)||Ae(t,e,n)};const Ee=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?Ae(n,a,c):xe(n,a,c)}return n};const Te=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};const Se=function(t){return ht(t)&&"[object Arguments]"==dt(t)};var De=Object.prototype,Me=De.hasOwnProperty,Ie=De.propertyIsEnumerable;const Be=Se(function(){return arguments}())?Se:function(t){return ht(t)&&Me.call(t,"callee")&&!Ie.call(t,"callee")};const Le=function(){return!1};var Ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,Oe=Ne&&"object"==typeof module&&module&&!module.nodeType&&module,Pe=Oe&&Oe.exports===Ne?tt.Buffer:void 0;const Re=(Pe?Pe.isBuffer:void 0)||Le;var ze=/^(?:0|[1-9]\d*)$/;const Fe=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ze.test(t))&&t>-1&&t%1==0&&t<e};const je=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ve={};Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve["[object Arguments]"]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object Boolean]"]=Ve["[object DataView]"]=Ve["[object Date]"]=Ve["[object Error]"]=Ve["[object Function]"]=Ve["[object Map]"]=Ve["[object Number]"]=Ve["[object Object]"]=Ve["[object RegExp]"]=Ve["[object Set]"]=Ve["[object String]"]=Ve["[object WeakMap]"]=!1;const $e=function(t){return ht(t)&&je(t.length)&&!!Ve[dt(t)]};const He=function(t){return function(e){return t(e)}};var Ue="object"==typeof exports&&exports&&!exports.nodeType&&exports,We=Ue&&"object"==typeof module&&module&&!module.nodeType&&module,qe=We&&We.exports===Ue&&X.process;const Ye=function(){try{var t=We&&We.require&&We.require("util").types;return t||qe&&qe.binding&&qe.binding("util")}catch(t){}}();var Ge=Ye&&Ye.isTypedArray;const Ze=Ge?He(Ge):$e;var Ke=Object.prototype.hasOwnProperty;const Qe=function(t,e){var n=ut(t),r=!n&&Be(t),i=!n&&!r&&Re(t),o=!n&&!r&&!i&&Ze(t),s=n||r||i||o,a=s?Te(t.length,String):[],c=a.length;for(var l in t)!e&&!Ke.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Fe(l,c))||a.push(l);return a};var Xe=Object.prototype;const Je=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Xe)};const tn=pt(Object.keys,Object);var en=Object.prototype.hasOwnProperty;const nn=function(t){if(!Je(t))return tn(t);var e=[];for(var n in Object(t))en.call(t,n)&&"constructor"!=n&&e.push(n);return e};const rn=function(t){return null!=t&&je(t.length)&&!Rt(t)};const on=function(t){return rn(t)?Qe(t):nn(t)};const sn=function(t,e){return t&&Ee(e,on(e),t)};const an=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e};var cn=Object.prototype.hasOwnProperty;const ln=function(t){if(!O(t))return an(t);var e=Je(t),n=[];for(var r in t)("constructor"!=r||!e&&cn.call(t,r))&&n.push(r);return n};const dn=function(t){return rn(t)?Qe(t,!0):ln(t)};const un=function(t,e){return t&&Ee(e,dn(e),t)};var hn="object"==typeof exports&&exports&&!exports.nodeType&&exports,gn=hn&&"object"==typeof module&&module&&!module.nodeType&&module,fn=gn&&gn.exports===hn?tt.Buffer:void 0,pn=fn?fn.allocUnsafe:void 0;const mn=function(t,e){if(e)return t.slice();var n=t.length,r=pn?pn(n):new t.constructor(n);return t.copy(r),r};const bn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};const kn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o};const wn=function(){return[]};var yn=Object.prototype.propertyIsEnumerable,_n=Object.getOwnPropertySymbols;const vn=_n?function(t){return null==t?[]:(t=Object(t),kn(_n(t),(function(e){return yn.call(t,e)})))}:wn;const An=function(t,e){return Ee(t,vn(t),e)};const Cn=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};const xn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Cn(e,vn(t)),t=mt(t);return e}:wn;const En=function(t,e){return Ee(t,xn(t),e)};const Tn=function(t,e,n){var r=e(t);return ut(t)?r:Cn(r,n(t))};const Sn=function(t){return Tn(t,on,vn)};const Dn=function(t){return Tn(t,dn,xn)};const Mn=Qt(tt,"DataView");const In=Qt(tt,"Promise");const Bn=Qt(tt,"Set");const Ln=Qt(tt,"WeakMap");var Nn="[object Map]",On="[object Promise]",Pn="[object Set]",Rn="[object WeakMap]",zn="[object DataView]",Fn=$t(Mn),jn=$t(Xt),Vn=$t(In),$n=$t(Bn),Hn=$t(Ln),Un=dt;(Mn&&Un(new Mn(new ArrayBuffer(1)))!=zn||Xt&&Un(new Xt)!=Nn||In&&Un(In.resolve())!=On||Bn&&Un(new Bn)!=Pn||Ln&&Un(new Ln)!=Rn)&&(Un=function(t){var e=dt(t),n="[object Object]"==e?t.constructor:void 0,r=n?$t(n):"";if(r)switch(r){case Fn:return zn;case jn:return Nn;case Vn:return On;case $n:return Pn;case Hn:return Rn}return e});const Wn=Un;var qn=Object.prototype.hasOwnProperty;const Yn=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&qn.call(t,"index")&&(n.index=t.index,n.input=t.input),n};const Gn=tt.Uint8Array;const Zn=function(t){var e=new t.constructor(t.byteLength);return new Gn(e).set(new Gn(t)),e};const Kn=function(t,e){var n=e?Zn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)};var Qn=/\w*$/;const Xn=function(t){var e=new t.constructor(t.source,Qn.exec(t));return e.lastIndex=t.lastIndex,e};var Jn=et?et.prototype:void 0,tr=Jn?Jn.valueOf:void 0;const er=function(t){return tr?Object(tr.call(t)):{}};const nr=function(t,e){var n=e?Zn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};const rr=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Zn(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return Kn(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nr(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Xn(t);case"[object Symbol]":return er(t)}};var ir=Object.create;const or=function(){function t(){}return function(e){if(!O(e))return{};if(ir)return ir(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const sr=function(t){return"function"!=typeof t.constructor||Je(t)?{}:or(mt(t))};const ar=function(t){return ht(t)&&"[object Map]"==Wn(t)};var cr=Ye&&Ye.isMap;const lr=cr?He(cr):ar;const dr=function(t){return ht(t)&&"[object Set]"==Wn(t)};var ur=Ye&&Ye.isSet;const hr=ur?He(ur):dr;var gr="[object Arguments]",fr="[object Function]",pr="[object Object]",mr={};mr[gr]=mr["[object Array]"]=mr["[object ArrayBuffer]"]=mr["[object DataView]"]=mr["[object Boolean]"]=mr["[object Date]"]=mr["[object Float32Array]"]=mr["[object Float64Array]"]=mr["[object Int8Array]"]=mr["[object Int16Array]"]=mr["[object Int32Array]"]=mr["[object Map]"]=mr["[object Number]"]=mr["[object Object]"]=mr["[object RegExp]"]=mr["[object Set]"]=mr["[object String]"]=mr["[object Symbol]"]=mr["[object Uint8Array]"]=mr["[object Uint8ClampedArray]"]=mr["[object Uint16Array]"]=mr["[object Uint32Array]"]=!0,mr["[object Error]"]=mr[fr]=mr["[object WeakMap]"]=!1;const br=function t(e,n,r,i,o,s){var a,c=1&n,l=2&n,d=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!O(e))return e;var u=ut(e);if(u){if(a=Yn(e),!c)return bn(e,a)}else{var h=Wn(e),g=h==fr||"[object GeneratorFunction]"==h;if(Re(e))return mn(e,c);if(h==pr||h==gr||g&&!o){if(a=l||g?{}:sr(e),!c)return l?En(e,un(a,e)):An(e,sn(a,e))}else{if(!mr[h])return o?e:{};a=rr(e,h,c)}}s||(s=new ye);var f=s.get(e);if(f)return f;s.set(e,a),hr(e)?e.forEach((function(i){a.add(t(i,n,r,i,e,s))})):lr(e)&&e.forEach((function(i,o){a.set(o,t(i,n,r,o,e,s))}));var p=u?void 0:(d?l?Dn:Sn:l?dn:on)(e);return _e(p||e,(function(i,o){p&&(i=e[o=i]),xe(a,o,t(i,n,r,o,e,s))})),a};const kr=function(t,e){return br(t,5,e="function"==typeof e?e:void 0)};const wr=function(t){return ht(t)&&1===t.nodeType&&!vt(t)};class yr{constructor(t,e){this._config={},e&&this.define(_r(e)),t&&this._setObjectToTarget(this._config,t)}set(t,e){this._setToTarget(this._config,t,e)}define(t,e){this._setToTarget(this._config,t,e,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,e,n,r=!1){if(vt(e))return void this._setObjectToTarget(t,e,r);const i=e.split(".");e=i.pop();for(const e of i)vt(t[e])||(t[e]={}),t=t[e];if(vt(n))return vt(t[e])||(t[e]={}),t=t[e],void this._setObjectToTarget(t,n,r);r&&void 0!==t[e]||(t[e]=n)}_getFromSource(t,e){const n=e.split(".");e=n.pop();for(const e of n){if(!vt(t[e])){t=null;break}t=t[e]}return t?_r(t[e]):void 0}_setObjectToTarget(t,e,n){Object.keys(e).forEach((r=>{this._setToTarget(t,r,e[r],n)}))}}function _r(t){return kr(t,vr)}function vr(t){return wr(t)?t:void 0}function Ar(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}function Cr(t){const e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}const xr=Er(T());function Er(t){if(!t)return xr;return class extends t{listenTo(t,e,n,r={}){if(Ar(t)||Cr(t)){const i={capture:!!r.useCapture,passive:!!r.usePassive},o=this._getProxyEmitter(t,i)||new Tr(t,i);this.listenTo(o,e,n,r)}else super.listenTo(t,e,n,r)}stopListening(t,e,n){if(Ar(t)||Cr(t)){const r=this._getAllProxyEmitters(t);for(const t of r)this.stopListening(t,e,n)}else super.stopListening(t,e,n)}_getProxyEmitter(t,e){return function(t,e){const n=t[A];return n&&n[e]?n[e].emitter:null}(this,Sr(t,e))}_getAllProxyEmitters(t){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map((e=>this._getProxyEmitter(t,e))).filter((t=>!!t))}}}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((t=>{Er[t]=xr.prototype[t]}));class Tr extends(T()){constructor(t,e){super(),S(this,Sr(t,e)),this._domNode=t,this._options=e}attach(t){if(this._domListeners&&this._domListeners[t])return;const e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e}detach(t){let e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()}_addEventListener(t,e,n){this.attach(t),T().prototype._addEventListener.call(this,t,e,n)}_removeEventListener(t,e){T().prototype._removeEventListener.call(this,t,e),this.detach(t)}_createDomListener(t){const e=e=>{this.fire(t,e)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}}function Sr(t,e){let n=function(t){return t["data-ck-expando"]||(t["data-ck-expando"]=f())}(t);for(const t of Object.keys(e).sort())e[t]&&(n+="-"+t);return n}let Dr;try{Dr={window,document}}catch(t){Dr={window:{},document:{}}}const Mr=Dr;function Ir(t){const e=[];let n=t;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)e.unshift(n),n=n.parentNode;return e}function Br(t){return"[object Text]"==Object.prototype.toString.call(t)}function Lr(t){return"[object Range]"==Object.prototype.toString.apply(t)}function Nr(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}const Or=["top","right","bottom","left","width","height"];class Pr{constructor(t){const e=Lr(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Fr(t)||e)if(e){const e=Pr.getDomRangeRects(t);Rr(this,Pr.getBoundingRect(e))}else Rr(this,t.getBoundingClientRect());else if(Cr(t)){const{innerWidth:e,innerHeight:n}=t;Rr(this,{top:0,right:e,bottom:n,left:0,width:e,height:n})}else Rr(this,t)}clone(){return new Pr(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new Pr(e)}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(!zr(t)){let n=t.parentNode||t.commonAncestorContainer;for(;n&&!zr(n);){const t=new Pr(n),r=e.getIntersection(t);if(!r)return null;r.getArea()<e.getArea()&&(e=r),n=n.parentNode}}return e}isEqual(t){for(const e of Or)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!(!e||!e.isEqual(t))}excludeScrollbarsAndBorders(){const t=this._source;let e,n,r;if(Cr(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,r=t.getComputedStyle(t.document.documentElement).direction;else{const i=Nr(t);e=t.offsetWidth-t.clientWidth-i.left-i.right,n=t.offsetHeight-t.clientHeight-i.top-i.bottom,r=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,"ltr"===r?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const t of n)e.push(new Pr(t));else{let n=t.startContainer;Br(n)&&(n=n.parentNode);const r=new Pr(n.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const r of t)n++,e.left=Math.min(e.left,r.left),e.top=Math.min(e.top,r.top),e.right=Math.max(e.right,r.right),e.bottom=Math.max(e.bottom,r.bottom);return 0==n?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new Pr(e))}}function Rr(t,e){for(const n of Or)t[n]=e[n]}function zr(t){return!!Fr(t)&&t===t.ownerDocument.body}function Fr(t){return null!==t&&"object"==typeof t&&1===t.nodeType&&"function"==typeof t.getBoundingClientRect}class jr{constructor(t,e){jr._observerInstance||jr._createObserver(),this._element=t,this._callback=e,jr._addElementCallback(t,e),jr._observerInstance.observe(t)}destroy(){jr._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){jr._elementCallbacks||(jr._elementCallbacks=new Map);let n=jr._elementCallbacks.get(t);n||(n=new Set,jr._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=jr._getElementCallbacks(t);n&&(n.delete(e),n.size||(jr._elementCallbacks.delete(t),jr._observerInstance.unobserve(t))),jr._elementCallbacks&&!jr._elementCallbacks.size&&(jr._observerInstance=null,jr._elementCallbacks=null)}static _getElementCallbacks(t){return jr._elementCallbacks?jr._elementCallbacks.get(t):null}static _createObserver(){jr._observerInstance=new Mr.window.ResizeObserver((t=>{for(const e of t){const t=jr._getElementCallbacks(e.target);if(t)for(const n of t)n(e)}}))}}function Vr(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}function $r(t){return e=>e+t}function Hr(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}function Ur(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}function Wr(t){return t&&t.nodeType===Node.COMMENT_NODE}function qr(t){return!!(t&&t.getClientRects&&t.getClientRects().length)}function Yr({element:t,target:e,positions:n,limiter:r,fitInViewport:i,viewportOffsetConfig:o}){Rt(e)&&(e=e()),Rt(r)&&(r=r());const s=function(t){return t&&t.parentNode?t.offsetParent===Mr.document.body?null:t.offsetParent:null}(t),a=new Pr(t),c=new Pr(e);let l;const d=i&&function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new Pr(Mr.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e}(o)||null,u={targetRect:c,elementRect:a,positionedElementAncestor:s,viewportRect:d};if(r||i){const t=r&&new Pr(r).getVisible();Object.assign(u,{limiterRect:t,viewportRect:d}),l=function(t,e){const{elementRect:n}=e,r=n.getArea(),i=t.map((t=>new Zr(t,e))).filter((t=>!!t.name));let o=0,s=null;for(const t of i){const{limiterIntersectionArea:e,viewportIntersectionArea:n}=t;if(e===r)return t;const i=n**2+e**2;i>o&&(o=i,s=t)}return s}(n,u)||new Zr(n[0],u)}else l=new Zr(n[0],u);return l}function Gr(t){const{scrollX:e,scrollY:n}=Mr.window;return t.clone().moveBy(e,n)}jr._observerInstance=null,jr._elementCallbacks=null;class Zr{constructor(t,e){const n=t(e.targetRect,e.elementRect,e.viewportRect);if(!n)return;const{left:r,top:i,name:o,config:s}=n;this.name=o,this.config=s,this._positioningFunctionCorrdinates={left:r,top:i},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;if(t){const e=this._options.viewportRect;if(!e)return t.getIntersectionArea(this._rect);{const n=t.getIntersection(e);if(n)return n.getIntersectionArea(this._rect)}}return 0}get viewportIntersectionArea(){const t=this._options.viewportRect;return t?t.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=Gr(this._rect),this._options.positionedElementAncestor&&function(t,e){const n=Gr(new Pr(e)),r=Nr(e);let i=0,o=0;i-=n.left,o-=n.top,i+=e.scrollLeft,o+=e.scrollTop,i-=r.left,o-=r.top,t.moveBy(i,o)}(this._cachedAbsoluteRect,this._options.positionedElementAncestor)),this._cachedAbsoluteRect}}function Kr(t){const e=t.parentNode;e&&e.removeChild(t)}function Qr({target:t,viewportOffset:e=0}){const n=ii(t);let r=n,i=null;for(;r;){let o;o=oi(r==n?t:i),Jr(o,(()=>si(t,r)));const s=si(t,r);if(Xr(r,s,e),r.parent!=r){if(i=r.frameElement,r=r.parent,!i)return}else r=null}}function Xr(t,e,n){const r=e.clone().moveBy(0,n),i=e.clone().moveBy(0,-n),o=new Pr(t).excludeScrollbarsAndBorders();if(![i,r].every((t=>o.contains(t)))){let{scrollX:s,scrollY:a}=t;ei(i,o)?a-=o.top-e.top+n:ti(r,o)&&(a+=e.bottom-o.bottom+n),ni(e,o)?s-=o.left-e.left+n:ri(e,o)&&(s+=e.right-o.right+n),t.scrollTo(s,a)}}function Jr(t,e){const n=ii(t);let r,i;for(;t!=n.document.body;)i=e(),r=new Pr(t).excludeScrollbarsAndBorders(),r.contains(i)||(ei(i,r)?t.scrollTop-=r.top-i.top:ti(i,r)&&(t.scrollTop+=i.bottom-r.bottom),ni(i,r)?t.scrollLeft-=r.left-i.left:ri(i,r)&&(t.scrollLeft+=i.right-r.right)),t=t.parentNode}function ti(t,e){return t.bottom>e.bottom}function ei(t,e){return t.top<e.top}function ni(t,e){return t.left<e.left}function ri(t,e){return t.right>e.right}function ii(t){return Lr(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function oi(t){if(Lr(t)){let e=t.commonAncestorContainer;return Br(e)&&(e=e.parentNode),e}return t.parentNode}function si(t,e){const n=ii(t),r=new Pr(t);if(n===e)return r;{let t=n;for(;t!=e;){const e=t.frameElement,n=new Pr(e).excludeScrollbarsAndBorders();r.moveBy(n.left,n.top),t=t.parent}}return r}const ai={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},ci={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},li=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const n=String.fromCharCode(e);t[n.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;for(const e of"`-=[];',./\\")t[e]=e.charCodeAt(0);return t}(),di=Object.fromEntries(Object.entries(li).map((([t,e])=>[e,t.charAt(0).toUpperCase()+t.slice(1)])));function ui(t){let e;if("string"==typeof t){if(e=li[t.toLowerCase()],!e)throw new b("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?li.alt:0)+(t.ctrlKey?li.ctrl:0)+(t.shiftKey?li.shift:0)+(t.metaKey?li.cmd:0);return e}function hi(t){return"string"==typeof t&&(t=function(t){return t.split("+").map((t=>t.trim()))}(t)),t.map((t=>"string"==typeof t?function(t){if(t.endsWith("!"))return ui(t.slice(0,-1));const e=ui(t);return i.isMac&&e==li.ctrl?li.cmd:e}(t):t)).reduce(((t,e)=>e+t),0)}function gi(t){let e=hi(t);return Object.entries(i.isMac?ai:ci).reduce(((t,[n,r])=>(0!=(e&li[n])&&(e&=~li[n],t+=r),t)),"")+(e?di[e]:"")}function fi(t,e){const n="ltr"===e;switch(t){case li.arrowleft:return n?"left":"right";case li.arrowright:return n?"right":"left";case li.arrowup:return"up";case li.arrowdown:return"down"}}const pi=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function mi(t){return pi.includes(t)?"rtl":"ltr"}function bi(t){return Array.isArray(t)?t:[t]}function ki(t,e,n=1){if("number"!=typeof n)throw new b("translation-service-quantity-not-a-number",null,{quantity:n});const r=Object.keys(Mr.window.CKEDITOR_TRANSLATIONS).length;1===r&&(t=Object.keys(Mr.window.CKEDITOR_TRANSLATIONS)[0]);const i=e.id||e.string;if(0===r||!function(t,e){return!!Mr.window.CKEDITOR_TRANSLATIONS[t]&&!!Mr.window.CKEDITOR_TRANSLATIONS[t].dictionary[e]}(t,i))return 1!==n?e.plural:e.string;const o=Mr.window.CKEDITOR_TRANSLATIONS[t].dictionary,s=Mr.window.CKEDITOR_TRANSLATIONS[t].getPluralForm||(t=>1===t?0:1),a=o[i];if("string"==typeof a)return a;return a[Number(s(n))]}Mr.window.CKEDITOR_TRANSLATIONS||(Mr.window.CKEDITOR_TRANSLATIONS={});class wi{constructor({uiLanguage:t="en",contentLanguage:e}={}){this.uiLanguage=t,this.contentLanguage=e||this.uiLanguage,this.uiLanguageDirection=mi(this.uiLanguage),this.contentLanguageDirection=mi(this.contentLanguage),this.t=(t,e)=>this._t(t,e)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,e=[]){e=bi(e),"string"==typeof t&&(t={string:t});const n=!!t.plural?e[0]:1;return function(t,e){return t.replace(/%(\d+)/g,((t,n)=>n<e.length?e[n]:t))}(ki(this.uiLanguage,t,n),e)}}class yi extends(T()){constructor(t={},e={}){super();const n=Q(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new b("collection-add-item-invalid-index",this);let n=0;for(const r of t){const t=this._getItemIdBeforeAdding(r),i=e+n;this._items.splice(i,0,r),this._itemMap.set(t,r),this.fire("add",r,i),n++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new b("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new b("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding((e=>new t(e)))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding((e=>e[t]))}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(n,r,i)=>{const o=e._bindToCollection==this,s=e._bindToInternalToExternalMap.get(r);if(o&&s)this._bindToExternalToInternalMap.set(r,s),this._bindToInternalToExternalMap.set(s,r);else{const n=t(r);if(!n)return void this._skippedIndexesFromExternal.push(i);let o=i;for(const t of this._skippedIndexesFromExternal)i>t&&o--;for(const t of e._skippedIndexesFromExternal)o>=t&&o++;this._bindToExternalToInternalMap.set(r,n),this._bindToInternalToExternalMap.set(n,r),this.add(n,o);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)o<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)n(0,t,e.getIndex(t));this.listenTo(e,"add",n),this.listenTo(e,"remove",((t,e,n)=>{const r=this._bindToExternalToInternalMap.get(e);r&&this.remove(r),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce(((t,e)=>(n<e&&t.push(e-1),n>e&&t.push(e),t)),[])}))}_getItemIdBeforeAdding(t){const e=this._idProperty;let n;if(e in t){if(n=t[e],"string"!=typeof n)throw new b("collection-add-invalid-id",this);if(this.get(n))throw new b("collection-add-item-already-exists",this)}else t[e]=n=f();return n}_remove(t){let e,n,r,i=!1;const o=this._idProperty;if("string"==typeof t?(n=t,r=this._itemMap.get(n),i=!r,r&&(e=this._items.indexOf(r))):"number"==typeof t?(e=t,r=this._items[e],i=!r,r&&(n=r[o])):(r=t,n=r[o],e=this._items.indexOf(r),i=-1==e||!this._itemMap.get(n)),i)throw new b("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const s=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(s),this.fire("remove",r,e),[r,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function _i(t){const e=t.next();return e.done?null:e.value}class vi extends(Er($())){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(t){if(this._elements.has(t))throw new b("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",(()=>this._focus(t)),{useCapture:!0}),this.listenTo(t,"blur",(()=>this._blur()),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((()=>{this.focusedElement=null,this.isFocused=!1}),0)}}class Ai{constructor(){this._listener=new(Er())}listenTo(t){this._listener.listenTo(t,"keydown",((t,e)=>{this._listener.fire("_keydown:"+ui(e),e)}))}set(t,e,n={}){const r=hi(t),i=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,((t,n)=>{e(n,(()=>{n.preventDefault(),n.stopPropagation(),t.stop()})),t.return=!0}),{priority:i})}press(t){return!!this._listener.fire("_keydown:"+ui(t),t)}destroy(){this._listener.stopListening()}}function Ci(t){return Q(t)?new Map(t):function(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}(t)}function xi(t,e){return!!(n=t.charAt(e-1))&&1==n.length&&/[\ud800-\udbff]/.test(n)&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e));var n}function Ei(t,e){return!!(n=t.charAt(e))&&1==n.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n);var n}const Ti=function(){const t=/\p{Regional_Indicator}{2}/u.source,e="(?:"+[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u].map((t=>t.source)).join("|")+")";return new RegExp(`${t}|${e}(?:‍${e})*`,"ug")}();function Si(t,e){const n=String(t).matchAll(Ti);return Array.from(n).some((t=>t.index<e&&e<t.index+t[0].length))}class Di extends($()){constructor(t){super(),this.editor=t,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Mi,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Mi),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Mi(t){t.return=!1,t.stop()}class Ii extends($()){constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",(()=>{this.refresh()})),this.on("execute",(t=>{this.isEnabled||t.stop()}),{priority:"high"}),this.listenTo(t,"change:isReadOnly",((t,e,n)=>{n&&this.affectsData?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}))}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Bi,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Bi),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function Bi(t){t.return=!1,t.stop()}class Li extends Ii{constructor(t){super(t),this._childCommandsDefinitions=[]}refresh(){}execute(...t){const e=this._getFirstEnabledCommand();return!!e&&e.execute(t)}registerChildCommand(t,e={}){m(this._childCommandsDefinitions,{command:t,priority:e.priority||"normal"}),t.on("change:isEnabled",(()=>this._checkEnabled())),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const t=this._childCommandsDefinitions.find((({command:t})=>t.isEnabled));return t&&t.command}}class Ni extends(T()){constructor(t,e=[],n=[]){super(),this._context=t,this._plugins=new Map,this._availablePlugins=new Map;for(const t of e)t.pluginName&&this._availablePlugins.set(t.pluginName,t);this._contextPlugins=new Map;for(const[t,e]of n)this._contextPlugins.set(t,e),this._contextPlugins.set(e,t),t.pluginName&&this._availablePlugins.set(t.pluginName,t)}*[Symbol.iterator](){for(const t of this._plugins)"function"==typeof t[0]&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new b("plugincollection-plugin-not-loaded",this._context,{plugin:e})}return e}has(t){return this._plugins.has(t)}init(t,e=[],n=[]){const r=this,i=this._context;!function t(e,n=new Set){e.forEach((e=>{a(e)&&(n.has(e)||(n.add(e),e.pluginName&&!r._availablePlugins.has(e.pluginName)&&r._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,n)))}))}(t),u(t);const o=[...function t(e,n=new Set){return e.map((t=>a(t)?t:r._availablePlugins.get(t))).reduce(((e,r)=>n.has(r)?e:(n.add(r),r.requires&&(u(r.requires,r),t(r.requires,n).forEach((t=>e.add(t)))),e.add(r))),new Set)}(t.filter((t=>!l(t,e))))];!function(t,e){for(const n of e){if("function"!=typeof n)throw new b("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});const e=n.pluginName;if(!e)throw new b("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new b("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:e});const i=r._availablePlugins.get(e);if(!i)throw new b("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:e});const o=t.indexOf(i);if(-1===o){if(r._contextPlugins.has(i))return;throw new b("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:e})}if(i.requires&&i.requires.length)throw new b("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:e});t.splice(o,1,n),r._availablePlugins.set(e,n)}}(o,n);const s=function(t){return t.map((t=>{let e=r._contextPlugins.get(t);return e=e||new t(i),r._add(t,e),e}))}(o);return h(s,"init").then((()=>h(s,"afterInit"))).then((()=>s));function a(t){return"function"==typeof t}function c(t){return a(t)&&t.isContextPlugin}function l(t,e){return e.some((e=>e===t||(d(t)===e||d(e)===t)))}function d(t){return a(t)?t.pluginName||t.name:t}function u(t,n=null){t.map((t=>a(t)?t:r._availablePlugins.get(t)||t)).forEach((t=>{!function(t,e){if(a(t))return;if(e)throw new b("plugincollection-soft-required",i,{missingPlugin:t,requiredBy:d(e)});throw new b("plugincollection-plugin-not-found",i,{plugin:t})}(t,n),function(t,e){if(!c(e))return;if(c(t))return;throw new b("plugincollection-context-required",i,{plugin:d(t),requiredBy:d(e)})}(t,n),function(t,n){if(!n)return;if(!l(t,e))return;throw new b("plugincollection-required",i,{plugin:d(t),requiredBy:d(n)})}(t,n)}))}function h(t,e){return t.reduce(((t,n)=>n[e]?r._contextPlugins.has(n)?t:t.then(n[e].bind(n)):t),Promise.resolve())}}destroy(){const t=[];for(const[,e]of this)"function"!=typeof e.destroy||this._contextPlugins.has(e)||t.push(e.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new b("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}class Oi{constructor(t){this.config=new yr(t,this.constructor.defaultConfig);const e=this.constructor.builtinPlugins;this.config.define("plugins",e),this.plugins=new Ni(this,e);const n=this.config.get("language")||{};this.locale=new wi({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new yi,this._contextOwner=null}initPlugins(){const t=this.config.get("plugins")||[],e=this.config.get("substitutePlugins")||[];for(const n of t.concat(e)){if("function"!=typeof n)throw new b("context-initplugins-constructor-only",null,{Plugin:n});if(!0!==n.isContextPlugin)throw new b("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(t,[],e)}destroy(){return Promise.all(Array.from(this.editors,(t=>t.destroy()))).then((()=>this.plugins.destroy()))}_addEditor(t,e){if(this._contextOwner)throw new b("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){const t={};for(const e of this.config.names())["plugins","removePlugins","extraPlugins"].includes(e)||(t[e]=this.config.get(e));return t}static create(t){return new Promise((e=>{const n=new this(t);e(n.initPlugins().then((()=>n)))}))}}class Pi extends($()){constructor(t){super(),this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}var Ri=n(6062),zi=n.n(Ri),Fi=n(4717),ji={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Fi.Z,ji);Fi.Z.locals;const Vi=new WeakMap;function $i(t){const{view:e,element:n,text:r,isDirectHost:i=!0,keepOnFocus:o=!1}=t,s=e.document;Vi.has(s)||(Vi.set(s,new Map),s.registerPostFixer((t=>Ui(s,t))),s.on("change:isComposing",(()=>{e.change((t=>Ui(s,t)))}),{priority:"high"})),Vi.get(s).set(n,{text:r,isDirectHost:i,keepOnFocus:o,hostElement:i?n:null}),e.change((t=>Ui(s,t)))}function Hi(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}function Ui(t,e){const n=Vi.get(t),r=[];let i=!1;for(const[t,o]of n)o.isDirectHost&&(r.push(t),Wi(e,t,o)&&(i=!0));for(const[t,o]of n){if(o.isDirectHost)continue;const n=qi(t);n&&(r.includes(n)||(o.hostElement=n,Wi(e,t,o)&&(i=!0)))}return i}function Wi(t,e,n){const{text:r,isDirectHost:i,hostElement:o}=n;let s=!1;o.getAttribute("data-placeholder")!==r&&(t.setAttribute("data-placeholder",r,o),s=!0);return(i||1==e.childCount)&&function(t,e){if(!t.isAttached())return!1;const n=Array.from(t.getChildren()).some((t=>!t.is("uiElement")));if(n)return!1;const r=t.document,i=r.selection.anchor;return!(r.isComposing&&i&&i.parent===t||!e&&r.isFocused&&(!i||i.parent===t))}(o,n.keepOnFocus)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}(t,o)&&(s=!0):Hi(t,o)&&(s=!0),s}function qi(t){if(t.childCount){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}class Yi{is(){throw new Error("is() method is abstract")}}const Gi=function(t){return br(t,4)};class Zi extends(T(Yi)){constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new b("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=K(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&(this.root===t.root&&!this.isBefore(t))}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e){this.fire(`change:${t}`,e),this.parent&&this.parent._fireChange(t,e)}toJSON(){const t=Gi(this);return delete t.parent,t}}Zi.prototype.is=function(t){return"node"===t||"view:node"===t};class Ki extends Zi{constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Ki&&(this===t||this.data===t.data)}_clone(){return new Ki(this.document,this.data)}}Ki.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class Qi extends Yi{constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.data.length)throw new b("view-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.data.length)throw new b("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let n=t.includeSelf?this.textNode:this.parent;for(;null!==n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}}Qi.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class Xi{constructor(...t){this._patterns=[],this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const n=Ji(e,t);if(n)return{element:e,pattern:t,match:n}}return null}matchAll(...t){const e=[];for(const n of t)for(const t of this._patterns){const r=Ji(n,t);r&&e.push({element:n,pattern:t,match:r})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}}function Ji(t,e){if("function"==typeof e)return e(t);const n={};return e.name&&(n.name=function(t,e){if(t instanceof RegExp)return!!e.match(t);return t===e}(e.name,t.name),!n.name)||e.attributes&&(n.attributes=function(t,e){const n=new Set(e.getAttributeKeys());vt(t)?(void 0!==t.style&&k("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&k("matcher-pattern-deprecated-attributes-class-key",t)):(n.delete("style"),n.delete("class"));return to(t,n,(t=>e.getAttribute(t)))}(e.attributes,t),!n.attributes)||e.classes&&(n.classes=function(t,e){return to(t,e.getClassNames(),(()=>{}))}(e.classes,t),!n.classes)||e.styles&&(n.styles=function(t,e){return to(t,e.getStyleNames(!0),(t=>e.getStyle(t)))}(e.styles,t),!n.styles)?null:n}function to(t,e,n){const r=function(t){if(Array.isArray(t))return t.map((t=>vt(t)?(void 0!==t.key&&void 0!==t.value||k("matcher-pattern-missing-key-or-value",t),[t.key,t.value]):[t,!0]));if(vt(t))return Object.entries(t);return[[t,!0]]}(t),i=Array.from(e),o=[];if(r.forEach((([t,e])=>{i.forEach((r=>{(function(t,e){return!0===t||t===e||t instanceof RegExp&&e.match(t)})(t,r)&&function(t,e,n){if(!0===t)return!0;const r=n(e);return t===r||t instanceof RegExp&&!!String(r).match(t)}(e,r,n)&&o.push(r)}))})),r.length&&!(o.length<r.length))return o}const eo=function(t){return"symbol"==typeof t||ht(t)&&"[object Symbol]"==dt(t)};var no=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ro=/^\w*$/;const io=function(t,e){if(ut(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!eo(t))||(ro.test(t)||!no.test(t)||null!=e&&t in Object(e))};function oo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(oo.Cache||be),n}oo.Cache=be;const so=oo;var ao=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,co=/\\(\\)?/g,lo=function(t){var e=so(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ao,(function(t,n,r,i){e.push(r?i.replace(co,"$1"):n||t)})),e}));const uo=lo;const ho=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var go=et?et.prototype:void 0,fo=go?go.toString:void 0;const po=function t(e){if("string"==typeof e)return e;if(ut(e))return ho(e,t)+"";if(eo(e))return fo?fo.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};const mo=function(t){return null==t?"":po(t)};const bo=function(t,e){return ut(t)?t:io(t,e)?[t]:uo(mo(t))};const ko=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};const wo=function(t){if("string"==typeof t||eo(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};const yo=function(t,e){for(var n=0,r=(e=bo(e,t)).length;null!=t&&n<r;)t=t[wo(e[n++])];return n&&n==r?t:void 0};const _o=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};const vo=function(t,e){return e.length<2?t:yo(t,_o(e,0,-1))};const Ao=function(t,e){return e=bo(e,t),null==(t=vo(t,e))||delete t[wo(ko(e))]};const Co=function(t,e){return null==t||Ao(t,e)};const xo=function(t,e,n){var r=null==t?void 0:yo(t,e);return void 0===r?n:r};const Eo=function(t,e,n){(void 0!==n&&!Ct(t[e],n)||void 0===n&&!(e in t))&&Ae(t,e,n)};const To=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}();const So=function(t){return ht(t)&&rn(t)};const Do=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};const Mo=function(t){return Ee(t,dn(t))};const Io=function(t,e,n,r,i,o,s){var a=Do(t,n),c=Do(e,n),l=s.get(c);if(l)Eo(t,n,l);else{var d=o?o(a,c,n+"",t,e,s):void 0,u=void 0===d;if(u){var h=ut(c),g=!h&&Re(c),f=!h&&!g&&Ze(c);d=c,h||g||f?ut(a)?d=a:So(a)?d=bn(a):g?(u=!1,d=mn(c,!0)):f?(u=!1,d=nr(c,!0)):d=[]:vt(c)||Be(c)?(d=a,Be(a)?d=Mo(a):O(a)&&!Rt(a)||(d=sr(c))):u=!1}u&&(s.set(c,d),i(d,c,r,o,s),s.delete(c)),Eo(t,n,d)}};const Bo=function t(e,n,r,i,o){e!==n&&To(n,(function(s,a){if(o||(o=new ye),O(s))Io(e,n,a,r,t,i,o);else{var c=i?i(Do(e,a),s,a+"",e,n,o):void 0;void 0===c&&(c=s),Eo(e,a,c)}}),dn)};const Lo=function(t){return t};const No=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Oo=Math.max;const Po=function(t,e,n){return e=Oo(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Oo(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),No(t,this,a)}};const Ro=function(t){return function(){return t}};const zo=ve?function(t,e){return ve(t,"toString",{configurable:!0,enumerable:!1,value:Ro(e),writable:!0})}:Lo;var Fo=Date.now;const jo=function(t){var e=0,n=0;return function(){var r=Fo(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}};const Vo=jo(zo);const $o=function(t,e){return Vo(Po(t,e,Lo),t+"")};const Ho=function(t,e,n){if(!O(n))return!1;var r=typeof e;return!!("number"==r?rn(n)&&Fe(e,n.length):"string"==r&&e in n)&&Ct(n[e],t)};const Uo=function(t){return $o((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&Ho(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))};const Wo=Uo((function(t,e,n){Bo(t,e,n)}));const qo=function(t,e,n,r){if(!O(t))return t;for(var i=-1,o=(e=bo(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var c=wo(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var d=a[c];void 0===(l=r?r(d,c,a):void 0)&&(l=O(d)?d:Fe(e[i+1])?[]:{})}xe(a,c,l),a=a[c]}return t};const Yo=function(t,e,n){return null==t?t:qo(t,e,n)};class Go{constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){const t=Object.entries(this._styles);return!Array.from(t).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=Array.from(function(t){let e=null,n=0,r=0,i=null;const o=new Map;if(""===t)return o;";"!=t.charAt(t.length-1)&&(t+=";");for(let s=0;s<t.length;s++){const a=t.charAt(s);if(null===e)switch(a){case":":i||(i=t.substr(n,s-n),r=s+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(r,s-r);i&&o.set(i.trim(),e.trim()),i=null,n=s+1;break}}else a===e&&(e=null)}return o}(t).entries());for(const[t,n]of e)this._styleProcessor.toNormalizedForm(t,n,this._styles)}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find((([e])=>e===t));return Array.isArray(e)}set(t,e){if(O(t))for(const[e,n]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,n,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e=Ko(t);Co(this._styles,e),delete this._styles[t],this._cleanEmptyObjectsOnPath(e)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map((t=>t.join(":"))).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!O(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find((([e])=>e===t));return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){if(this.isEmpty)return[];if(t)return this._styleProcessor.getStyleNames(this._styles);return this._getStylesEntries().map((([t])=>t))}clear(){this._styles={}}_getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const n=e.splice(0,e.length-1).join("."),r=xo(this._styles,n);if(!r)return;!Array.from(Object.keys(r)).length&&this.remove(n)}}class Zo{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(t,e,n){if(O(e))Qo(n,Ko(t),e);else if(this._normalizers.has(t)){const r=this._normalizers.get(t),{path:i,value:o}=r(e);Qo(n,i,o)}else Qo(n,t,e)}getNormalized(t,e){if(!t)return Wo({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){const n=this._extractors.get(t);if("string"==typeof n)return xo(e,n);const r=n(t,e);if(r)return r}return xo(e,Ko(t))}getReducedForm(t,e){const n=this.getNormalized(t,e);if(void 0===n)return[];if(this._reducers.has(t)){return this._reducers.get(t)(n)}return[[t,n]]}getStyleNames(t){const e=Array.from(this._consumables.keys()).filter((e=>{const n=this.getNormalized(e,t);return n&&"object"==typeof n?Object.keys(n).length:n})),n=new Set([...e,...Object.keys(t)]);return Array.from(n.values())}getRelatedStyles(t){return this._consumables.get(t)||[]}setNormalizer(t,e){this._normalizers.set(t,e)}setExtractor(t,e){this._extractors.set(t,e)}setReducer(t,e){this._reducers.set(t,e)}setStyleRelation(t,e){this._mapStyleNames(t,e);for(const n of e)this._mapStyleNames(n,[t])}_mapStyleNames(t,e){this._consumables.has(t)||this._consumables.set(t,[]),this._consumables.get(t).push(...e)}}function Ko(t){return t.replace("-",".")}function Qo(t,e,n){let r=n;O(n)&&(r=Wo({},xo(t,e),n)),Yo(t,e,r)}class Xo extends Zi{constructor(t,e,n,r){if(super(t),this.name=e,this._attrs=function(t){const e=Ci(t);for(const[t,n]of e)null===n?e.delete(t):"string"!=typeof n&&e.set(t,String(n));return e}(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const t=this._attrs.get("class");Jo(this._classes,t),this._attrs.delete("class")}this._styles=new Go(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._unsafeAttributesToRender=[]}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if("class"==t)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"==t){const t=this._styles.toString();return""==t?void 0:t}return this._attrs.get(t)}hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof Xo))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[e,n]of this._attrs)if(!t._attrs.has(e)||t._attrs.get(e)!==n)return!1;for(const e of this._classes)if(!t._classes.has(e))return!1;for(const e of this._styles.getStyleNames())if(!t._styles.has(e)||t._styles.getAsString(e)!==this._styles.getAsString(e))return!1;return!0}hasClass(...t){for(const e of t)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t){return this._styles.getStyleNames(t)}hasStyle(...t){for(const e of t)if(!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Xi(...t);let n=this.parent;for(;n&&!n.is("documentFragment");){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),e=this._styles.toString(),n=Array.from(this._attrs).map((t=>`${t[0]}="${t[1]}"`)).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==n?"":` ${n}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const e=[];if(t)for(const n of this.getChildren())e.push(n._clone(t));const n=new this.constructor(this.document,this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t,e){if("string"==typeof e)return[new Ki(t,e)];Q(e)||(e=[e]);return Array.from(e).map((e=>"string"==typeof e?new Ki(t,e):e instanceof Qi?new Ki(t,e.data):e))}(this.document,e);for(const e of r)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e){e=String(e),this._fireChange("attributes",this),"class"==t?Jo(this._classes,e):"style"==t?this._styles.setTo(e):this._attrs.set(t,e)}_removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const e of bi(t))this._classes.add(e)}_removeClass(t){this._fireChange("attributes",this);for(const e of bi(t))this._classes.delete(e)}_setStyle(t,e){this._fireChange("attributes",this),vt(t)?this._styles.set(t):this._styles.set(t,e)}_removeStyle(t){this._fireChange("attributes",this);for(const e of bi(t))this._styles.remove(e)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}function Jo(t,e){const n=e.split(/\s+/);t.clear(),n.forEach((e=>t.add(e)))}Xo.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class ts extends Xo{constructor(...t){super(...t),this.getFillerOffset=es}}function es(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}ts.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class ns extends($(ts)){constructor(...t){super(...t);const e=t[0];this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",(t=>t&&e.selection.editableElement==this)),this.listenTo(e.selection,"change",(()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this}))}destroy(){this.stopListening()}}ns.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const rs=Symbol("rootName");class is extends ns{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(rs)}set rootName(t){this._setCustomProperty(rs,t)}set _name(t){this.name=t}}is.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class os{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new b("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new b("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this.position=ss._createAt(t.startPosition):this.position=ss._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(t){let e,n,r;do{r=this.position,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(n instanceof Ki){if(t.isAtEnd)return this.position=ss._createAfter(n),this._next();r=n.data[t.offset]}else r=n.getChild(t.offset);if(r instanceof Xo)return this.shallow?t.offset++:t=new ss(r,0),this.position=t,this._formatReturnValue("elementStart",r,e,t,1);if(r instanceof Ki){if(this.singleCharacters)return t=new ss(r,0),this.position=t,this._next();{let n,i=r.data.length;return r==this._boundaryEndParent?(i=this.boundaries.end.offset,n=new Qi(r,0,i),t=ss._createAfter(n)):(n=new Qi(r,0,r.data.length),t.offset++),this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;if(this.singleCharacters)r=1;else{r=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset}const i=new Qi(n,t.offset,r);return t.offset+=r,this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=ss._createAfter(n),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(n instanceof Ki){if(t.isAtStart)return this.position=ss._createBefore(n),this._previous();r=n.data[t.offset-1]}else r=n.getChild(t.offset-1);if(r instanceof Xo)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",r,e,t,1)):(t=new ss(r,r.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,e,t));if(r instanceof Ki){if(this.singleCharacters)return t=new ss(r,r.data.length),this.position=t,this._previous();{let n,i=r.data.length;if(r==this._boundaryStartParent){const e=this.boundaries.start.offset;n=new Qi(r,e,r.data.length-e),i=n.data.length,t=ss._createBefore(n)}else n=new Qi(r,0,r.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",n,e,t,i)}}if("string"==typeof r){let r;if(this.singleCharacters)r=1;else{const e=n===this._boundaryStartParent?this.boundaries.start.offset:0;r=t.offset-e}t.offset-=r;const i=new Qi(n,t.offset,r);return this.position=t,this._formatReturnValue("text",i,e,t,r)}return t=ss._createBefore(n),this.position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,r,i){return e instanceof Qi&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=ss._createAfter(e.textNode):(r=ss._createAfter(e.textNode),this.position=r)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=ss._createBefore(e.textNode):(r=ss._createBefore(e.textNode),this.position=r))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}}class ss extends Yi{constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof ns);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=ss._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new os(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const r=K(e,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return e[r]<n[r]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new os(t)}clone(){return new ss(this.parent,this.offset)}static _createAt(t,e){if(t instanceof ss)return new this(t.parent,t.offset);{const n=t;if("end"==e)e=n.is("$text")?n.data.length:n.childCount;else{if("before"==e)return this._createBefore(n);if("after"==e)return this._createAfter(n);if(0!==e&&!e)throw new b("view-createpositionat-offset-required",n)}return new ss(n,e)}}static _createAfter(t){if(t.is("$textProxy"))return new ss(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new b("view-position-after-root",t,{root:t});return new ss(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new ss(t.textNode,t.offsetInText);if(!t.parent)throw new b("view-position-before-root",t,{root:t});return new ss(t.parent,t.index)}}ss.prototype.is=function(t){return"position"===t||"view:position"===t};class as extends Yi{constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new os({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(cs,{direction:"backward"}),e=this.end.getLastMatchingPosition(cs);return t.parent.is("$text")&&t.isAtStart&&(t=ss._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=ss._createAfter(e.parent)),new as(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(cs);if(t.isAfter(this.end)||t.isEqual(this.end))return new as(t,t);let e=this.end.getLastMatchingPosition(cs,{direction:"backward"});const n=t.nodeAfter,r=e.nodeBefore;return n&&n.is("$text")&&(t=new ss(n,0)),r&&r.is("$text")&&(e=new ss(r,r.data.length)),new as(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new as(this.start,t.start)),this.containsPosition(t.end)&&e.push(new as(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new as(e,n)}return null}getWalker(t={}){return t.boundaries=this,new os(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new as(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new os(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new os(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,n,r){return new this(new ss(t,e),new ss(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(ss._createBefore(t),e)}}function cs(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}as.prototype.is=function(t){return"range"===t||"view:range"===t};class ls extends(T(Yi)){constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=Z(this.getRanges());if(e!=Z(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let n=!1;for(let r of t.getRanges())if(r=r.getTrimmed(),e.start.isEqual(r.start)&&e.end.isEqual(r.end)){n=!0;break}if(!n)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,n,r]=t;if("object"==typeof n&&(r=n,n=void 0),null===e)this._setRanges([]),this._setFakeOptions(r);else if(e instanceof ls||e instanceof ds)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof as)this._setRanges([e],r&&r.backward),this._setFakeOptions(r);else if(e instanceof ss)this._setRanges([new as(e)]),this._setFakeOptions(r);else if(e instanceof Zi){const t=!!r&&!!r.backward;let i;if(void 0===n)throw new b("view-selection-setto-required-second-parameter",this);i="in"==n?as._createIn(e):"on"==n?as._createOn(e):new as(ss._createAt(e,n)),this._setRanges([i],t),this._setFakeOptions(r)}else{if(!Q(e))throw new b("view-selection-setto-not-selectable",this);this._setRanges(e,r&&r.backward),this._setFakeOptions(r)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new b("view-selection-setfocus-no-ranges",this);const n=ss._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new as(n,r),!0):this._addRange(new as(r,n)),this.fire("change")}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof as))throw new b("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new b("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new as(t.start,t.end))}}ls.prototype.is=function(t){return"selection"===t||"view:selection"===t};class ds extends(T(Yi)){constructor(...t){super(),this._selection=new ls,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}ds.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t};class us extends h{constructor(t,e,n){super(t,e),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const hs=Symbol("bubbling contexts");function gs(t){return class extends t{fire(t,...e){try{const n=t instanceof h?t:new h(this,t),r=bs(this);if(!r.size)return;if(fs(n,"capturing",this),ps(r,"$capture",n,...e))return n.return;const i=n.startRange||this.selection.getFirstRange(),o=i?i.getContainedElement():null,s=!!o&&Boolean(ms(r,o));let a=o||function(t){if(!t)return null;const e=t.start.parent,n=t.end.parent,r=e.getPath(),i=n.getPath();return r.length>i.length?e:n}(i);if(fs(n,"atTarget",a),!s){if(ps(r,"$text",n,...e))return n.return;fs(n,"bubbling",a)}for(;a;){if(a.is("rootElement")){if(ps(r,"$root",n,...e))return n.return}else if(a.is("element")&&ps(r,a.name,n,...e))return n.return;if(ps(r,a,n,...e))return n.return;a=a.parent,fs(n,"bubbling",a)}return fs(n,"bubbling",this),ps(r,"$document",n,...e),n.return}catch(t){b.rethrowUnexpectedError(t,this)}}_addEventListener(t,e,n){const r=bi(n.context||"$document"),i=bs(this);for(const o of r){let r=i.get(o);r||(r=new(T()),i.set(o,r)),this.listenTo(r,t,e,n)}}_removeEventListener(t,e){const n=bs(this);for(const r of n.values())this.stopListening(r,t,e)}}}{const t=gs(Object);["fire","_addEventListener","_removeEventListener"].forEach((e=>{gs[e]=t.prototype[e]}))}function fs(t,e,n){t instanceof us&&(t._eventPhase=e,t._currentTarget=n)}function ps(t,e,n,...r){const i="string"==typeof e?t.get(e):ms(t,e);return!!i&&(i.fire(n,...r),n.stop.called)}function ms(t,e){for(const[n,r]of t)if("function"==typeof n&&n(e))return r;return null}function bs(t){return t[hs]||(t[hs]=new Map),t[hs]}class ks extends(gs($())){constructor(t){super(),this.selection=new ds,this.roots=new yi({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.map((t=>t.destroy())),this.stopListening()}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(e=n(t),e)break}while(e)}}class ws extends Xo{constructor(...t){super(...t),this.getFillerOffset=ys,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new b("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}}function ys(){if(_s(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(_s(t)>1)return null;t=t.parent}return!t||_s(t)>1?null:this.childCount}function _s(t){return Array.from(t.getChildren()).filter((t=>!t.is("uiElement"))).length}ws.DEFAULT_PRIORITY=10,ws.prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class vs extends Xo{constructor(t,e,n,r){super(t,e,n,r),this.getFillerOffset=As}_insertChild(t,e){if(e&&(e instanceof Zi||Array.from(e).length>0))throw new b("view-emptyelement-cannot-add",[this,e]);return 0}}function As(){return null}vs.prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Cs extends Xo{constructor(...t){super(...t),this.getFillerOffset=Es}_insertChild(t,e){if(e&&(e instanceof Zi||Array.from(e).length>0))throw new b("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}}function xs(t){t.document.on("arrowKey",((e,n)=>function(t,e,n){if(e.keyCode==li.arrowright){const t=e.domTarget.ownerDocument.defaultView.getSelection(),r=1==t.rangeCount&&t.getRangeAt(0).collapsed;if(r||e.shiftKey){const e=t.focusNode,i=t.focusOffset,o=n.domPositionToView(e,i);if(null===o)return;let s=!1;const a=o.getLastMatchingPosition((t=>(t.item.is("uiElement")&&(s=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement")))));if(s){const e=n.viewPositionToDom(a);r?t.collapse(e.parent,e.offset):t.extend(e.parent,e.offset)}}}}(0,n,t.domConverter)),{priority:"low"})}function Es(){return null}Cs.prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Ts extends Xo{constructor(...t){super(...t),this.getFillerOffset=Ss}_insertChild(t,e){if(e&&(e instanceof Zi||Array.from(e).length>0))throw new b("view-rawelement-cannot-add",[this,e]);return 0}render(){}}function Ss(){return null}Ts.prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Ds extends(T(Yi)){constructor(t,e){super(),this.document=t,this._children=[],e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this);let n=0;const r=function(t,e){if("string"==typeof e)return[new Ki(t,e)];Q(e)||(e=[e]);return Array.from(e).map((e=>"string"==typeof e?new Ki(t,e):e instanceof Qi?new Ki(t,e.data):e))}(this.document,e);for(const e of r)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}}Ds.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};class Ms{constructor(t){this.document=t,this._cloneGroups=new Map,this._slotFactory=null}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(...t){this.document.selection._setFocus(...t)}createDocumentFragment(t){return new Ds(this.document,t)}createText(t){return new Ki(this.document,t)}createAttributeElement(t,e,n={}){const r=new ws(this.document,t,e);return"number"==typeof n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createContainerElement(t,e,n={},r={}){let i=null;vt(n)?r=n:i=n;const o=new ts(this.document,t,e,i);return r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}createEditableElement(t,e,n={}){const r=new ns(this.document,t,e);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createEmptyElement(t,e,n={}){const r=new vs(this.document,t,e);return n.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),r}createUIElement(t,e,n){const r=new Cs(this.document,t,e);return n&&(r.render=n),r}createRawElement(t,e,n,r={}){const i=new Ts(this.document,t,e);return n&&(i.render=n),r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){vt(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof ss?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new b("view-writer-break-non-container-element",this.document);if(!e.parent)throw new b("view-writer-break-root",this.document);if(t.isAtStart)return ss._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(ss._createAfter(e),n);const r=new as(t,ss._createAt(e,"end")),i=new ss(n,0);this.move(r,i)}return ss._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&0===n.childCount){const t=n.parent,e=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new ss(t,e))}const r=n.getChild(e-1),i=n.getChild(e);if(!r||!i)return t;if(r.is("$text")&&i.is("$text"))return Os(r,i);if(r.is("attributeElement")&&i.is("attributeElement")&&r.isSimilar(i)){const t=r.childCount;return r._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new ss(r,t))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new b("view-writer-merge-containers-invalid-position",this.document);const r=e.getChild(e.childCount-1),i=r instanceof Ki?ss._createAt(r,"end"):ss._createAt(e,"end");return this.move(as._createIn(n),ss._createAt(e,"end")),this.remove(as._createOn(n)),i}insert(t,e){Rs(e=Q(e)?[...e]:[e],this.document);const n=e.reduce(((t,e)=>{const n=t[t.length-1],r=!e.is("uiElement");return n&&n.breakAttributes==r?n.nodes.push(e):t.push({breakAttributes:r,nodes:[e]}),t}),[]);let r=null,i=t;for(const{nodes:t,breakAttributes:e}of n){const n=this._insertNodes(i,t,e);r||(r=n.start),i=n.end}return r?new as(r,i):new as(t)}remove(t){const e=t instanceof as?t:as._createOn(t);if(Fs(e,this.document),e.isCollapsed)return new Ds(this.document);const{start:n,end:r}=this._breakAttributesRange(e,!0),i=n.parent,o=r.offset-n.offset,s=i._removeChildren(n.offset,o);for(const t of s)this._removeFromClonedElementsGroup(t);const a=this.mergeAttributes(n);return e.start=a,e.end=a.clone(),new Ds(this.document,s)}clear(t,e){Fs(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const n=r.item;let i;if(n.is("element")&&e.isSimilar(n))i=as._createOn(n);else if(!r.nextPosition.isAfter(t.start)&&n.is("$textProxy")){const t=n.getAncestors().find((t=>t.is("element")&&e.isSimilar(t)));t&&(i=as._createIn(t))}i&&(i.end.isAfter(t.end)&&(i.end=t.end),i.start.isBefore(t.start)&&(i.start=t.start),this.remove(i))}}move(t,e){let n;if(e.isAfter(t.end)){const r=(e=this._breakAttributes(e,!0)).parent,i=r.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=r.childCount-i}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof ws))throw new b("view-writer-wrap-invalid-attribute",this.document);if(Fs(t,this.document),t.isCollapsed){let r=t.start;r.parent.is("element")&&(n=r.parent,!Array.from(n.getChildren()).some((t=>!t.is("uiElement"))))&&(r=r.getLastMatchingPosition((t=>t.item.is("uiElement")))),r=this._wrapPosition(r,e);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(t.start)&&this.setSelection(r),new as(r)}return this._wrapRange(t,e);var n}unwrap(t,e){if(!(e instanceof ws))throw new b("view-writer-unwrap-invalid-attribute",this.document);if(Fs(t,this.document),t.isCollapsed)return t;const{start:n,end:r}=this._breakAttributesRange(t,!0),i=n.parent,o=this._unwrapChildren(i,n.offset,r.offset,e),s=this.mergeAttributes(o.start);s.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new as(s,a)}rename(t,e){const n=new ts(this.document,t,e.getAttributes());return this.insert(ss._createAfter(e),n),this.move(as._createIn(e),ss._createAt(n,0)),this.remove(as._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return ss._createAt(t,e)}createPositionAfter(t){return ss._createAfter(t)}createPositionBefore(t){return ss._createBefore(t)}createRange(...t){return new as(...t)}createRangeOn(t){return as._createOn(t)}createRangeIn(t){return as._createIn(t)}createSelection(...t){return new ls(...t)}createSlot(t){if(!this._slotFactory)throw new b("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let r,i;if(r=n?Is(t):t.parent.is("$text")?t.parent.parent:t.parent,!r)throw new b("view-writer-invalid-position-container",this.document);i=n?this._breakAttributes(t,!0):t.parent.is("$text")?Ns(t):t;const o=r._insertChild(i.offset,e);for(const t of e)this._addToClonedElementsGroup(t);const s=i.getShiftedBy(o),a=this.mergeAttributes(i);a.isEqual(i)||s.offset--;const c=this.mergeAttributes(s);return new as(a,c)}_wrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i),n=e.is("$text"),s=e.is("attributeElement");if(s&&this._wrapAttributeElement(r,e))o.push(new ss(t,i));else if(n||!s||Bs(r,e)){const n=r._clone();e._remove(),n._appendChild(e),t._insertChild(i,n),this._addToClonedElementsGroup(n),o.push(new ss(t,i))}else this._wrapChildren(e,0,e.childCount,r);i++}let s=0;for(const t of o){if(t.offset-=s,t.offset==e)continue;this.mergeAttributes(t).isEqual(t)||(s++,n--)}return as._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,r){let i=e;const o=[];for(;i<n;){const e=t.getChild(i);if(e.is("attributeElement"))if(e.isSimilar(r)){const r=e.getChildren(),s=e.childCount;e._remove(),t._insertChild(i,r),this._removeFromClonedElementsGroup(e),o.push(new ss(t,i),new ss(t,i+s)),i+=s,n+=s-1}else this._unwrapAttributeElement(r,e)?(o.push(new ss(t,i),new ss(t,i+1)),i++):(this._unwrapChildren(e,0,e.childCount,r),i++);else i++}let s=0;for(const t of o){if(t.offset-=s,t.offset==e||t.offset==n)continue;this.mergeAttributes(t).isEqual(t)||(s++,n--)}return as._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:r}=this._breakAttributesRange(t,!0),i=n.parent,o=this._wrapChildren(i,n.offset,r.offset,e),s=this.mergeAttributes(o.start);s.isEqual(o.start)||o.end.offset--;const a=this.mergeAttributes(o.end);return new as(s,a)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return Ls(t.clone());t.parent.is("$text")&&(t=Ns(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const r=new as(t,t.getShiftedBy(1));this.wrap(r,e);const i=new ss(n.parent,n.index);n._remove();const o=i.nodeBefore,s=i.nodeAfter;return o instanceof Ki&&s instanceof Ki?Os(o,s):Ls(i)}_wrapAttributeElement(t,e){if(!js(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&e.hasAttribute(n)&&e.getAttribute(n)!==t.getAttribute(n))return!1;for(const n of t.getStyleNames())if(e.hasStyle(n)&&e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&(e.hasAttribute(n)||this.setAttribute(n,t.getAttribute(n),e));for(const n of t.getStyleNames())e.hasStyle(n)||this.setStyle(n,t.getStyle(n),e);for(const n of t.getClassNames())e.hasClass(n)||this.addClass(n,e);return!0}_unwrapAttributeElement(t,e){if(!js(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if("class"!==n&&"style"!==n&&(!e.hasAttribute(n)||e.getAttribute(n)!==t.getAttribute(n)))return!1;if(!e.hasClass(...t.getClassNames()))return!1;for(const n of t.getStyleNames())if(!e.hasStyle(n)||e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())"class"!==n&&"style"!==n&&this.removeAttribute(n,e);return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0}_breakAttributesRange(t,e=!1){const n=t.start,r=t.end;if(Fs(t,this.document),t.isCollapsed){const n=this._breakAttributes(t.start,e);return new as(n,n)}const i=this._breakAttributes(r,e),o=i.parent.childCount,s=this._breakAttributes(n,e);return i.offset+=i.parent.childCount-o,new as(s,i)}_breakAttributes(t,e=!1){const n=t.offset,r=t.parent;if(t.parent.is("emptyElement"))throw new b("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new b("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new b("view-writer-cannot-break-raw-element",this.document);if(!e&&r.is("$text")&&zs(r.parent))return t.clone();if(zs(r))return t.clone();if(r.is("$text"))return this._breakAttributes(Ns(t),e);if(n==r.childCount){const t=new ss(r.parent,r.index+1);return this._breakAttributes(t,e)}if(0===n){const t=new ss(r.parent,r.index);return this._breakAttributes(t,e)}{const t=r.index+1,i=r._clone();r.parent._insertChild(t,i),this._addToClonedElementsGroup(i);const o=r.childCount-n,s=r._removeChildren(n,o);i._appendChild(s);const a=new ss(r.parent,t);return this._breakAttributes(a,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const e of t.getChildren())this._addToClonedElementsGroup(e);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const e of t.getChildren())this._removeFromClonedElementsGroup(e);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Is(t){let e=t.parent;for(;!zs(e);){if(!e)return;e=e.parent}return e}function Bs(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity()}function Ls(t){const e=t.nodeBefore;if(e&&e.is("$text"))return new ss(e,e.data.length);const n=t.nodeAfter;return n&&n.is("$text")?new ss(n,0):t}function Ns(t){if(t.offset==t.parent.data.length)return new ss(t.parent.parent,t.parent.index+1);if(0===t.offset)return new ss(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new Ki(t.root.document,e)),new ss(t.parent.parent,t.parent.index+1)}function Os(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new ss(t,n)}const Ps=[Ki,ws,ts,vs,Ts,Cs];function Rs(t,e){for(const n of t){if(!Ps.some((t=>n instanceof t)))throw new b("view-writer-insert-invalid-node-type",e);n.is("$text")||Rs(n.getChildren(),e)}}function zs(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function Fs(t,e){const n=Is(t.start),r=Is(t.end);if(!n||!r||n!==r)throw new b("view-writer-invalid-range-container",e)}function js(t,e){return null===t.id&&null===e.id}const Vs=t=>t.createTextNode(" "),$s=t=>{const e=t.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},Hs=t=>{const e=t.createElement("br");return e.dataset.ckeFiller="true",e},Us="⁠".repeat(7);function Ws(t){return Br(t)&&t.data.substr(0,7)===Us}function qs(t){return 7==t.data.length&&Ws(t)}function Ys(t){return Ws(t)?t.data.slice(7):t.data}function Gs(t,e){if(e.keyCode==li.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(1==t.rangeCount&&t.getRangeAt(0).collapsed){const e=t.getRangeAt(0).startContainer,n=t.getRangeAt(0).startOffset;Ws(e)&&n<=7&&t.collapse(e,0)}}}var Zs=n(9315),Ks={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Zs.Z,Ks);Zs.Z.locals;class Qs extends($()){constructor(t,e){super(),this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=e,this.set("isFocused",!1),this.set("isSelecting",!1),i.isBlink&&!i.isAndroid&&this.on("change:isSelecting",(()=>{this.isSelecting||this.render()})),this.set("isComposing",!1),this.on("change:isComposing",(()=>{this.isComposing||this.render()})),this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new b("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}render(){if(this.isComposing&&!i.isAndroid)return;let t=null;const e=!(i.isBlink&&!i.isAndroid)||!this.isSelecting;for(const t of this.markedChildren)this._updateChildrenMappings(t);e?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(t=this.domConverter.domPositionToView(this._inlineFiller),t&&t.parent.is("$text")&&(t=ss._createBefore(t.parent)));for(const t of this.markedAttributes)this._updateAttrs(t);for(const e of this.markedChildren)this._updateChildren(e,{inlineFillerPosition:t});for(const e of this.markedTexts)!this.markedChildren.has(e.parent)&&this.domConverter.mapViewToDom(e.parent)&&this._updateText(e,{inlineFillerPosition:t});if(e)if(t){const e=this.domConverter.viewPositionToDom(t),n=e.parent.ownerDocument;Ws(e.parent)?this._inlineFiller=e.parent:this._inlineFiller=Xs(n,e.parent,e.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(t){if(!this.domConverter.mapViewToDom(t))return;const e=Array.from(this.domConverter.mapViewToDom(t).childNodes),n=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),r=this._diffNodeLists(e,n),i=this._findReplaceActions(r,e,n);if(-1!==i.indexOf("replace")){const r={equal:0,insert:0,delete:0};for(const o of i)if("replace"===o){const i=r.equal+r.insert,o=r.equal+r.delete,s=t.getChild(i);!s||s.is("uiElement")||s.is("rawElement")||this._updateElementMappings(s,e[o]),Kr(n[i]),r.equal++}else r[o]++}}_updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}_getInlineFillerPosition(){const t=this.selection.getFirstPosition();return t.parent.is("$text")?ss._createBefore(t.parent):t}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Br(e.parent)&&Ws(e.parent))}_removeInlineFiller(){const t=this._inlineFiller;if(!Ws(t))throw new b("view-renderer-filler-was-lost",this);qs(t)?t.remove():t.data=t.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!function(t){if("false"==t.getAttribute("contenteditable"))return!1;const e=t.findAncestor((t=>t.hasAttribute("contenteditable")));return!e||"true"==e.getAttribute("contenteditable")}(e))return!1;if(n===e.getFillerOffset())return!1;const r=t.nodeBefore,o=t.nodeAfter;return!(r instanceof Ki||o instanceof Ki)&&(!i.isAndroid||!r&&!o)}_updateText(t,e){const n=this.domConverter.findCorrespondingDomText(t);let r=this.domConverter.viewToDom(t).data;const i=e.inlineFillerPosition;i&&i.parent==t.parent&&i.offset==t.index&&(r=Us+r),na(n,r)}_updateAttrs(t){const e=this.domConverter.mapViewToDom(t);if(!e)return;const n=Array.from(e.attributes).map((t=>t.name)),r=t.getAttributeKeys();for(const n of r)this.domConverter.setDomElementAttribute(e,n,t.getAttribute(n),t);for(const r of n)t.hasAttribute(r)||this.domConverter.removeDomElementAttribute(e,r)}_updateChildren(t,e){const n=this.domConverter.mapViewToDom(t);if(!n)return;if(i.isAndroid){let t=null;for(const e of Array.from(n.childNodes)){if(t&&Br(t)&&Br(e)){n.normalize();break}t=e}}const r=e.inlineFillerPosition,o=n.childNodes,s=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));r&&r.parent===t&&Xs(n.ownerDocument,s,r.offset);const a=this._diffNodeLists(o,s),c=i.isAndroid?this._findReplaceActions(a,o,s,{replaceText:!0}):a;let l=0;const d=new Set;for(const t of c)"delete"===t?(d.add(o[l]),Kr(o[l])):"equal"!==t&&"replace"!==t||l++;l=0;for(const t of c)"insert"===t?(Ur(n,l,s[l]),l++):"replace"===t?(na(o[l],s[l].data),l++):"equal"===t&&(this._markDescendantTextToSync(this.domConverter.domToView(s[l])),l++);for(const t of d)t.parentNode||this.domConverter.unbindDomElement(t)}_diffNodeLists(t,e){return l(t=function(t,e){const n=Array.from(t);if(0==n.length||!e)return n;n[n.length-1]==e&&n.pop();return n}(t,this._fakeSelectionContainer),e,ea.bind(null,this.domConverter))}_findReplaceActions(t,e,n,r={}){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;let i=[],o=[],s=[];const a={equal:0,insert:0,delete:0};for(const c of t)"insert"===c?s.push(n[a.equal+a.insert]):"delete"===c?o.push(e[a.equal+a.delete]):(i=i.concat(l(o,s,r.replaceText?ta:Js).map((t=>"equal"===t?"replace":t))),i.push("equal"),o=[],s=[]),a[c]++;return i.concat(l(o,s,r.replaceText?ta:Js).map((t=>"equal"===t?"replace":t)))}_markDescendantTextToSync(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element"))for(const e of t.getChildren())this._markDescendantTextToSync(e)}_updateSelection(){if(i.isBlink&&!i.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&i.isAndroid||this._updateDomSelection(t))}_updateFakeSelection(t){const e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}(e));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(t))return;n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const r=e.getSelection(),i=e.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i)}_updateDomSelection(t){const e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);e.collapse(n.parent,n.offset),e.extend(r.parent,r.offset),i.isGecko&&function(t,e){const n=t.parent;if(n.nodeType!=Node.ELEMENT_NODE||t.offset!=n.childNodes.length-1)return;const r=n.childNodes[t.offset];r&&"BR"==r.tagName&&e.addRange(e.getRangeAt(0))}(r,e)}_domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;const e=t&&this.domConverter.domSelectionToView(t);return(!e||!this.selection.isEqual(e))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(t){const e=this._fakeSelectionContainer,n=t.ownerDocument.getSelection();return!e||e.parentElement!==t||(n.anchorNode!==e&&!e.contains(n.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel)}_removeDomSelection(){for(const t of this.domDocuments){const e=t.getSelection();if(e.rangeCount){const n=t.activeElement,r=this.domConverter.mapDomToView(n);n&&r&&e.removeAllRanges()}}}_removeFakeSelection(){const t=this._fakeSelectionContainer;t&&t.remove()}_updateFocus(){if(this.isFocused){const t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}function Xs(t,e,n){const r=e instanceof Array?e:e.childNodes,i=r[n];if(Br(i))return i.data=Us+i.data,i;{const i=t.createTextNode(Us);return Array.isArray(e)?r.splice(n,0,i):Ur(e,n,i),i}}function Js(t,e){return Ar(t)&&Ar(e)&&!Br(t)&&!Br(e)&&!Wr(t)&&!Wr(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function ta(t,e){return Ar(t)&&Ar(e)&&Br(t)&&Br(e)}function ea(t,e,n){return e===n||(Br(e)&&Br(n)?e.data===n.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(n)))}function na(t,e){const n=t.data;if(n==e)return;const r=s(n,e);for(const e of r)"insert"===e.type?t.insertData(e.index,e.values.join("")):t.deleteData(e.index,e.howMany)}const ra=Hs(Mr.document),ia=Vs(Mr.document),oa=$s(Mr.document),sa="data-ck-unsafe-attribute-",aa="data-ck-unsafe-element";class ca{constructor(t,e={}){this.document=t,this.renderingMode=e.renderingMode||"editing",this.blockFillerMode=e.blockFillerMode||("editing"===this.renderingMode?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument="editing"===this.renderingMode?Mr.document:Mr.document.implementation.createHTMLDocument(""),this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Xi,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new ls(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const e of Array.from(t.children))this.unbindDomElement(e)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return"data"===this.renderingMode||!(t=t.toLowerCase()).startsWith("on")&&(("srcdoc"!==t||!e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&("img"===n&&("src"===t||"srcset"===t)||("source"===n&&"srcset"===t||!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))))}setContentOf(t,e){if("data"===this.renderingMode)return void(t.innerHTML=e);const n=(new DOMParser).parseFromString(e,"text/html"),r=n.createDocumentFragment(),i=n.body.childNodes;for(;i.length>0;)r.appendChild(i[0]);const o=n.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),s=[];let a;for(;a=o.nextNode();)s.push(a);for(const t of s){for(const e of t.getAttributeNames())this.setDomElementAttribute(t,e,t.getAttribute(e));const e=t.tagName.toLowerCase();this._shouldRenameElement(e)&&(ua(e),t.replaceWith(this._createReplacementDomElement(e,t)))}for(;t.firstChild;)t.firstChild.remove();t.append(r)}viewToDom(t,e={}){if(t.is("$text")){const e=this._processDataFromViewText(t);return this._domDocument.createTextNode(e)}{if(this.mapViewToDom(t))return this.mapViewToDom(t);let n;if(t.is("documentFragment"))n=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(n,t);else{if(t.is("uiElement"))return n="$comment"===t.name?this._domDocument.createComment(t.getCustomProperty("$rawContent")):t.render(this._domDocument,this),e.bind&&this.bindElements(n,t),n;this._shouldRenameElement(t.name)?(ua(t.name),n=this._createReplacementDomElement(t.name)):n=t.hasAttribute("xmlns")?this._domDocument.createElementNS(t.getAttribute("xmlns"),t.name):this._domDocument.createElement(t.name),t.is("rawElement")&&t.render(n,this),e.bind&&this.bindElements(n,t);for(const e of t.getAttributeKeys())this.setDomElementAttribute(n,e,t.getAttribute(e),t)}if(!1!==e.withChildren)for(const r of this.viewChildrenToDom(t,e))n.appendChild(r);return n}}setDomElementAttribute(t,e,n,r){const i=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(e);i||k("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),t.hasAttribute(e)&&!i?t.removeAttribute(e):t.hasAttribute(sa+e)&&i&&t.removeAttribute(sa+e),t.setAttribute(i?e:sa+e,n)}removeDomElementAttribute(t,e){e!=aa&&(t.removeAttribute(e),t.removeAttribute(sa+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let r=0;for(const i of t.getChildren()){n===r&&(yield this._getBlockFiller());const t=i.is("element")&&i.getCustomProperty("dataPipeline:transparentRendering");t&&"data"==this.renderingMode?yield*this.viewChildrenToDom(i,e):(t&&k("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:i}),yield this.viewToDom(i,e)),r++}n===r&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),r=this._domDocument.createRange();return r.setStart(e.parent,e.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let r=t.offset;return Ws(n)&&(r+=7),{parent:n,offset:r}}{let n,r,i;if(0===t.offset){if(n=this.mapViewToDom(e),!n)return null;i=n.childNodes[0]}else{const e=t.nodeBefore;if(r=e.is("$text")?this.findCorrespondingDomText(e):this.mapViewToDom(e),!r)return null;n=r.parentNode,i=r.nextSibling}if(Br(i)&&Ws(i))return{parent:i,offset:7};return{parent:n,offset:r?Hr(r)+1:0}}}domToView(t,e={}){if(this.isBlockFiller(t))return null;const n=this.getHostViewElement(t);if(n)return n;if(Wr(t)&&e.skipComments)return null;if(Br(t)){if(qs(t))return null;{const e=this._processDataFromDomText(t);return""===e?null:new Ki(this.document,e)}}{if(this.mapDomToView(t))return this.mapDomToView(t);let n;if(this.isDocumentFragment(t))n=new Ds(this.document),e.bind&&this.bindDocumentFragments(t,n);else{n=this._createViewElement(t,e),e.bind&&this.bindElements(t,n);const r=t.attributes;if(r)for(let t=r.length,e=0;e<t;e++)n._setAttribute(r[e].name,r[e].value);if(this._isViewElementWithRawContent(n,e)||Wr(t)){const e=Wr(t)?t.data:t.innerHTML;return n._setCustomProperty("$rawContent",e),this._encounteredRawContentDomNodes.add(t),n}}if(!1!==e.withChildren)for(const r of this.domChildrenToView(t,e))n._appendChild(r);return n}}*domChildrenToView(t,e){for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n],i=this.domToView(r,e);null!==i&&(yield i)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;Br(e)&&(e=e.parentNode);const n=this.fakeSelectionToView(e);if(n)return n}const e=this.isDomSelectionBackward(t),n=[];for(let e=0;e<t.rangeCount;e++){const r=t.getRangeAt(e),i=this.domRangeToView(r);i&&n.push(i)}return new ls(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new as(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,Hr(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return ss._createBefore(n);if(Br(t)){if(qs(t))return this.domPositionToView(t.parentNode,Hr(t));const n=this.findCorrespondingViewText(t);let r=e;return n?(Ws(t)&&(r-=7,r=r<0?0:r),new ss(n,r)):null}if(0===e){const e=this.mapDomToView(t);if(e)return new ss(e,0)}else{const n=t.childNodes[e-1];if(Br(n)&&qs(n))return this.domPositionToView(n.parentNode,Hr(n));const r=Br(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(r&&r.parent)return new ss(r.parent,r.index+1)}return null}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(qs(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const t=this.mapDomToView(n);if(t){const e=t.nextSibling;return e instanceof Ki?e:null}}else{const e=this.mapDomToView(t.parentNode);if(e){const t=e.getChild(0);return t instanceof Ki?t:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:t,scrollY:n}=Mr.window,r=[];la(e,(t=>{const{scrollLeft:e,scrollTop:n}=t;r.push([e,n])})),e.focus(),la(e,(t=>{const[e,n]=r.shift();t.scrollLeft=e,t.scrollTop=n})),Mr.window.scrollTo(t,n)}}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return"br"==this.blockFillerMode?t.isEqualNode(ra):!("BR"!==t.tagName||!da(t,this.blockElements)||1!==t.parentNode.childNodes.length)||(t.isEqualNode(oa)||function(t,e){return t.isEqualNode(ia)&&da(t,e)&&1===t.parentNode.childNodes.length}(t,this.blockElements))}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch(t){return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=Ir(t);for(e.pop();e.length;){const t=e.pop(),n=this._domToViewMapping.get(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Vs(this._domDocument);case"markedNbsp":return $s(this._domDocument);case"br":return Hs(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Br(t)&&Ws(t)&&e<7)return!1;if(this.isElement(t)&&Ws(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!n||!n.is("uiElement")&&!n.is("rawElement")}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some((t=>this.preElements.includes(t.name))))return e;if(" "==e.charAt(0)){const n=this._getTouchingInlineViewNode(t,!1);!(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n))&&n||(e=" "+e.substr(1))}if(" "==e.charAt(e.length-1)){const n=this._getTouchingInlineViewNode(t,!0),r=n&&n.is("$textProxy")&&" "==n.data.charAt(0);" "!=e.charAt(e.length-2)&&n&&!r||(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(t.getAncestors().some((t=>this.preElements.includes(t.name))))return!1;const e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1)}_processDataFromDomText(t){let e=t.data;if(function(t,e){return Ir(t).some((t=>t.tagName&&e.includes(t.tagName.toLowerCase())))}(t,this.preElements))return Ys(t);e=e.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(t,!1),r=this._getTouchingInlineDomNode(t,!0),i=this._checkShouldLeftTrimDomText(t,n),o=this._checkShouldRightTrimDomText(t,r);i&&(e=e.replace(/^ /,"")),o&&(e=e.replace(/ $/,"")),e=Ys(new Text(e)),e=e.replace(/ \u00A0/g,"  ");const s=r&&this.isElement(r)&&"BR"!=r.tagName,a=r&&Br(r)&&" "==r.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(e)||!r||s||a)&&(e=e.replace(/\u00A0$/," ")),(i||n&&this.isElement(n)&&"BR"!=n.tagName)&&(e=e.replace(/^\u00A0/," ")),e}_checkShouldLeftTrimDomText(t,e){return!e||(this.isElement(e)?"BR"===e.tagName:!this._encounteredRawContentDomNodes.has(t.previousSibling)&&/[^\S\u00A0]/.test(e.data.charAt(e.data.length-1)))}_checkShouldRightTrimDomText(t,e){return!e&&!Ws(t)}_getTouchingInlineViewNode(t,e){const n=new os({startPosition:e?ss._createAfter(t):ss._createBefore(t),direction:e?"forward":"backward"});for(const t of n){if(t.item.is("element")&&this.inlineObjectElements.includes(t.item.name))return t.item;if(t.item.is("containerElement"))return null;if(t.item.is("element","br"))return null;if(t.item.is("$textProxy"))return t.item}return null}_getTouchingInlineDomNode(t,e){if(!t.parentNode)return null;const n=e?"firstChild":"lastChild",r=e?"nextSibling":"previousSibling";let i=!0,o=t;do{if(!i&&o[n]?o=o[n]:o[r]?(o=o[r],i=!1):(o=o.parentNode,i=!0),!o||this._isBlockElement(o))return null}while(!Br(o)&&"BR"!=o.tagName&&!this._isInlineObjectElement(o));return o}_isBlockElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isInlineObjectElement(t){return this.isElement(t)&&this.inlineObjectElements.includes(t.tagName.toLowerCase())}_createViewElement(t,e){if(Wr(t))return new Cs(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new Xo(this.document,n)}_isViewElementWithRawContent(t,e){return!1!==e.withChildren&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return"editing"===this.renderingMode&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(aa,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const t of e.getAttributeNames())n.setAttribute(t,e.getAttribute(t))}return n}}function la(t,e){let n=t;for(;n;)e(n),n=n.parentElement}function da(t,e){const n=t.parentNode;return!!n&&!!n.tagName&&e.includes(n.tagName.toLowerCase())}function ua(t){"script"===t&&k("domconverter-unsafe-script-element-detected"),"style"===t&&k("domconverter-unsafe-style-element-detected")}class ha extends(Er()){constructor(t){super(),this.view=t,this.document=t.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}const ga=Uo((function(t,e){Ee(e,dn(e),t)}));class fa{constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,ga(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class pa extends ha{constructor(t){super(t),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((e=>{this.listenTo(t,e,((t,e)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(e.target)&&this.onDomEvent(e)}),{useCapture:this.useCapture})}))}fire(t,e,n){this.isEnabled&&this.document.fire(t,new fa(this.view,e,n))}}class ma extends pa{constructor(t){super(t),this.domEventType=["keydown","keyup"]}onDomEvent(t){const e={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return ui(this)}};this.fire(t.type,t,e)}}const ba=function(){return tt.Date.now()};var ka=/\s/;const wa=function(t){for(var e=t.length;e--&&ka.test(t.charAt(e)););return e};var ya=/^\s+/;const _a=function(t){return t?t.slice(0,wa(t)+1).replace(ya,""):t};var va=/^[-+]0x[0-9a-f]+$/i,Aa=/^0b[01]+$/i,Ca=/^0o[0-7]+$/i,xa=parseInt;const Ea=function(t){if("number"==typeof t)return t;if(eo(t))return NaN;if(O(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=O(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=_a(t);var n=Aa.test(t);return n||Ca.test(t)?xa(t.slice(2),n?2:8):va.test(t)?NaN:+t};var Ta=Math.max,Sa=Math.min;const Da=function(t,e,n){var r,i,o,s,a,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n)}function f(t){return l=t,a=setTimeout(m,e),d?g(t):s}function p(t){var n=t-c;return void 0===c||n>=e||n<0||u&&t-l>=o}function m(){var t=ba();if(p(t))return b(t);a=setTimeout(m,function(t){var n=e-(t-c);return u?Sa(n,o-(t-l)):n}(t))}function b(t){return a=void 0,h&&r?g(t):(r=i=void 0,s)}function k(){var t=ba(),n=p(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return f(c);if(u)return clearTimeout(a),a=setTimeout(m,e),g(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=Ea(e)||0,O(n)&&(d=!!n.leading,o=(u="maxWait"in n)?Ta(Ea(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),k.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=i=a=void 0},k.flush=function(){return void 0===a?s:b(ba())},k};class Ma extends ha{constructor(t){super(t),this._fireSelectionChangeDoneDebounced=Da((t=>{this.document.fire("selectionChangeDone",t)}),200)}observe(){const t=this.document;t.on("arrowKey",((e,n)=>{t.selection.isFake&&this.isEnabled&&n.preventDefault()}),{context:"$capture"}),t.on("arrowKey",((e,n)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)}),{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const e=this.document.selection,n=new ls(e.getRanges(),{backward:e.isBackward,fake:!1});t!=li.arrowleft&&t!=li.arrowup||n.setTo(n.getFirstPosition()),t!=li.arrowright&&t!=li.arrowdown||n.setTo(n.getLastPosition());const r={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}const Ia=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const Ba=function(t){return this.__data__.has(t)};function La(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new be;++e<n;)this.add(t[e])}La.prototype.add=La.prototype.push=Ia,La.prototype.has=Ba;const Na=La;const Oa=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};const Pa=function(t,e){return t.has(e)};const Ra=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(t),d=o.get(e);if(l&&d)return l==e&&d==t;var u=-1,h=!0,g=2&n?new Na:void 0;for(o.set(t,e),o.set(e,t);++u<a;){var f=t[u],p=e[u];if(r)var m=s?r(p,f,u,e,t,o):r(f,p,u,t,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(g){if(!Oa(e,(function(t,e){if(!Pa(g,e)&&(f===t||i(f,t,n,r,o)))return g.push(e)}))){h=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h};const za=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};const Fa=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var ja=et?et.prototype:void 0,Va=ja?ja.valueOf:void 0;const $a=function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Gn(t),new Gn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ct(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=za;case"[object Set]":var c=1&r;if(a||(a=Fa),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var d=Ra(a(t),a(e),r,i,o,s);return s.delete(t),d;case"[object Symbol]":if(Va)return Va.call(t)==Va.call(e)}return!1};var Ha=Object.prototype.hasOwnProperty;const Ua=function(t,e,n,r,i,o){var s=1&n,a=Sn(t),c=a.length;if(c!=Sn(e).length&&!s)return!1;for(var l=c;l--;){var d=a[l];if(!(s?d in e:Ha.call(e,d)))return!1}var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var g=!0;o.set(t,e),o.set(e,t);for(var f=s;++l<c;){var p=t[d=a[l]],m=e[d];if(r)var b=s?r(m,p,d,e,t,o):r(p,m,d,t,e,o);if(!(void 0===b?p===m||i(p,m,n,r,o):b)){g=!1;break}f||(f="constructor"==d)}if(g&&!f){var k=t.constructor,w=e.constructor;k==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof w&&w instanceof w||(g=!1)}return o.delete(t),o.delete(e),g};var Wa="[object Arguments]",qa="[object Array]",Ya="[object Object]",Ga=Object.prototype.hasOwnProperty;const Za=function(t,e,n,r,i,o){var s=ut(t),a=ut(e),c=s?qa:Wn(t),l=a?qa:Wn(e),d=(c=c==Wa?Ya:c)==Ya,u=(l=l==Wa?Ya:l)==Ya,h=c==l;if(h&&Re(t)){if(!Re(e))return!1;s=!0,d=!1}if(h&&!d)return o||(o=new ye),s||Ze(t)?Ra(t,e,n,r,i,o):$a(t,e,c,n,r,i,o);if(!(1&n)){var g=d&&Ga.call(t,"__wrapped__"),f=u&&Ga.call(e,"__wrapped__");if(g||f){var p=g?t.value():t,m=f?e.value():e;return o||(o=new ye),i(p,m,n,r,o)}}return!!h&&(o||(o=new ye),Ua(t,e,n,r,i,o))};const Ka=function t(e,n,r,i,o){return e===n||(null==e||null==n||!ht(e)&&!ht(n)?e!=e&&n!=n:Za(e,n,r,i,t,o))};const Qa=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Ka(t,e,void 0,n):!!r};class Xa extends ha{constructor(t){super(t),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=t.domConverter,this.renderer=t._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}enable(){super.enable();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0===t.length)return;const e=this.domConverter,n=new Set,r=new Set;for(const n of t){const t=e.mapDomToView(n.target);t&&(t.is("uiElement")||t.is("rawElement")||"childList"!==n.type||this._isBogusBrMutation(n)||r.add(t))}for(const i of t){const t=e.mapDomToView(i.target);if((!t||!t.is("uiElement")&&!t.is("rawElement"))&&"characterData"===i.type){const t=e.findCorrespondingViewText(i.target);t&&!r.has(t.parent)?n.add(t):!t&&Ws(i.target)&&r.add(e.mapDomToView(i.target.parentNode))}}let i=!1;for(const t of n)i=!0,this.renderer.markToSync("text",t);for(const t of r){const n=e.mapViewToDom(t),r=Array.from(t.getChildren()),o=Array.from(e.domChildrenToView(n,{withChildren:!1}));Qa(r,o,Ja)||(i=!0,this.renderer.markToSync("children",t))}i&&this.view.forceRender()}_isBogusBrMutation(t){let e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}function Ja(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data}class tc extends ha{constructor(t){super(t),this.mutationObserver=t.getObserver(Xa),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Da((t=>{this.document.fire("selectionChangeDone",t)}),200),this._clearInfiniteLoopInterval=setInterval((()=>this._clearInfiniteLoop()),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Da((()=>this.document.isSelecting=!1),5e3),this._loopbackCounter=0}observe(t){const e=t.ownerDocument,n=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,e),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",(()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()}),{priority:"highest"}),this.listenTo(t,"keydown",n,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",n,{priority:"highest",useCapture:!0}),this._documents.has(e)||(this.listenTo(e,"mouseup",n,{priority:"highest",useCapture:!0}),this.listenTo(e,"selectionchange",((t,n)=>{this.document.isComposing&&!i.isAndroid||(this._handleSelectionChange(n,e),this._documentIsSelectingInactivityTimeoutDebounced())})),this._documents.add(e))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_handleSelectionChange(t,e){if(!this.isEnabled)return;const n=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const r=this.domConverter.domSelectionToView(n);if(0!=r.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(r))this.view.forceRender();else{const t={oldSelection:this.selection,newSelection:r,domSelection:n};this.document.fire("selectionChange",t),this._fireSelectionChangeDoneDebounced(t)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class ec extends pa{constructor(t){super(t),this.domEventType=["focus","blur"],this.useCapture=!0;const e=this.document;e.on("focus",(()=>{e.isFocused=!0,this._renderTimeoutId=setTimeout((()=>t.change((()=>{}))),50)})),e.on("blur",((n,r)=>{const i=e.selection.editableElement;null!==i&&i!==r.target||(e.isFocused=!1,t.change((()=>{})))}))}onDomEvent(t){this.fire(t.type,t)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class nc extends pa{constructor(t){super(t),this.domEventType=["compositionstart","compositionupdate","compositionend"];const e=this.document;e.on("compositionstart",(()=>{e.isComposing=!0}),{priority:"low"}),e.on("compositionend",(()=>{e.isComposing=!1}),{priority:"low"})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}class rc{constructor(t){this.files=function(t){const e=Array.from(t.files||[]),n=Array.from(t.items||[]);if(e.length)return e;return n.filter((t=>"file"===t.kind)).map((t=>t.getAsFile()))}(t),this._native=t}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}class ic extends pa{constructor(t){super(t),this.domEventType=["beforeinput"]}onDomEvent(t){const e=t.getTargetRanges(),n=this.view,r=n.document;let o=null,s=null,a=[];if(t.dataTransfer&&(o=new rc(t.dataTransfer)),null!==t.data?s=t.data:o&&(s=o.getData("text/plain")),r.selection.isFake)a=Array.from(r.selection.getRanges());else if(e.length)a=e.map((t=>n.domConverter.domRangeToView(t)));else if(i.isAndroid){const e=t.target.ownerDocument.defaultView.getSelection();a=Array.from(n.domConverter.domSelectionToView(e).getRanges())}if(i.isAndroid&&"insertCompositionText"==t.inputType&&s&&s.endsWith("\n"))this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[n.createRange(a[0].end)]});else if("insertText"==t.inputType&&s&&s.includes("\n")){const e=s.split(/\n{1,2}/g);let n=a;for(let i=0;i<e.length;i++){const s=e[i];""!=s&&(this.fire(t.type,t,{data:s,dataTransfer:o,targetRanges:n,inputType:t.inputType,isComposing:t.isComposing}),n=[r.selection.getFirstRange()]),i+1<e.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:n}),n=[r.selection.getFirstRange()])}}else this.fire(t.type,t,{data:s,dataTransfer:o,targetRanges:a,inputType:t.inputType,isComposing:t.isComposing})}}class oc extends ha{constructor(t){super(t),this.document.on("keydown",((t,e)=>{if(this.isEnabled&&((n=e.keyCode)==li.arrowright||n==li.arrowleft||n==li.arrowup||n==li.arrowdown)){const n=new us(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,e),n.stop.called&&t.stop()}var n}))}observe(){}}class sc extends ha{constructor(t){super(t);const e=this.document;e.on("keydown",((t,n)=>{if(!this.isEnabled||n.keyCode!=li.tab||n.ctrlKey)return;const r=new us(e,"tab",e.selection.getFirstRange());e.fire(r,n),r.stop.called&&t.stop()}))}observe(){}}class ac extends($()){constructor(t){super(),this.document=new ks(t),this.domConverter=new ca(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Qs(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Ms(this.document),this.addObserver(Xa),this.addObserver(tc),this.addObserver(ec),this.addObserver(ma),this.addObserver(Ma),this.addObserver(nc),this.addObserver(oc),this.addObserver(ic),this.addObserver(sc),this.document.on("arrowKey",Gs,{priority:"low"}),xs(this),this.on("render",(()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1})),this.listenTo(this.document.selection,"change",(()=>{this._hasChangedSinceTheLastRendering=!0})),this.listenTo(this.document,"change:isFocused",(()=>{this._hasChangedSinceTheLastRendering=!0}))}attachDomRoot(t,e="main"){const n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();const r={};for(const{name:e,value:i}of Array.from(t.attributes))r[e]=i,"class"===e?this._writer.addClass(i.split(" "),n):this._writer.setAttribute(e,i,n);this._initialDomRootAttributes.set(t,r);const i=()=>{this._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};i(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",((t,e)=>this._renderer.markToSync("children",e))),n.on("change:attributes",((t,e)=>this._renderer.markToSync("attributes",e))),n.on("change:text",((t,e)=>this._renderer.markToSync("text",e))),n.on("change:isReadOnly",(()=>this.change(i))),n.on("change",(()=>{this._hasChangedSinceTheLastRendering=!0}));for(const n of this._observers.values())n.observe(t,e)}detachDomRoot(t){const e=this.domRoots.get(t);Array.from(e.attributes).forEach((({name:t})=>e.removeAttribute(t)));const n=this._initialDomRootAttributes.get(e);for(const t in n)e.setAttribute(t,n[t]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e)}getDomRoot(t="main"){return this.domRoots.get(t)}addObserver(t){let e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);for(const[t,n]of this.domRoots)e.observe(n,t);return e.enable(),e}getObserver(t){return this._observers.get(t)}disableObservers(){for(const t of this._observers.values())t.disable()}enableObservers(){for(const t of this._observers.values())t.enable()}scrollToTheSelection(){const t=this.document.selection.getFirstRange();t&&Qr({target:this.domConverter.viewRangeToDom(t),viewportOffset:20})}focus(){if(!this.document.isFocused){const t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new b("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;const e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(t){b.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change((()=>{}))}destroy(){for(const t of this._observers.values())t.destroy();this.document.destroy(),this.stopListening()}createPositionAt(t,e){return ss._createAt(t,e)}createPositionAfter(t){return ss._createAfter(t)}createPositionBefore(t){return ss._createBefore(t)}createRange(...t){return new as(...t)}createRangeOn(t){return as._createOn(t)}createRangeIn(t){return as._createIn(t)}createSelection(...t){return new ls(...t)}_disableRendering(t){this._renderingDisabled=t,0==t&&this.change((()=>{}))}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}class cc{is(){throw new Error("is() method is abstract")}}class lc extends cc{constructor(t){super(),this.parent=null,this._attrs=Ci(t)}get document(){return null}get index(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new b("model-node-not-found-in-parent",this);return t}get startOffset(){let t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new b("model-node-not-found-in-parent",this);return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),r=t.getAncestors(e);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),r=K(e,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return e[r]<n[r]}}isAfter(t){return this!=t&&(this.root===t.root&&!this.isBefore(t))}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce(((t,e)=>(t[e[0]]=e[1],t)),{})),t}_clone(t){return new lc(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Ci(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}lc.prototype.is=function(t){return"node"===t||"model:node"===t};class dc{constructor(t){this._nodes=[],t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce(((t,e)=>t+e.offsetSize),0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return-1==e?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce(((t,e)=>t+e.offsetSize),0)}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new b("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(const n of this._nodes){if(t>=e&&t<e+n.offsetSize)return this.getNodeIndex(n);e+=n.offsetSize}if(e!=t)throw new b("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.length}_insertNodes(t,e){for(const t of e)if(!(t instanceof lc))throw new b("model-nodelist-insertnodes-not-node",this);this._nodes=function(t,e,n,r){if(Math.max(e.length,t.length)>1e4)return t.slice(0,n).concat(e).concat(t.slice(n+r,t.length));{const i=Array.from(t);return i.splice(n,r,...e),i}}(this._nodes,Array.from(e),t,0)}_removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map((t=>t.toJSON()))}}class uc extends lc{constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new uc(this.data,this.getAttributes())}static fromJSON(t){return new uc(t.data,t.attributes)}}uc.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};class hc extends cc{constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new b("model-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.offsetSize)throw new b("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}hc.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class gc extends lc{constructor(t,e,n){super(e),this.name=t,this._children=new dc,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}findAncestor(t,e={}){let n=e.includeSelf?this:this.parent;for(;n;){if(n.name===t)return n;n=n.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?Array.from(this._children).map((t=>t._clone(!0))):void 0;return new gc(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){if("string"==typeof t)return[new uc(t)];Q(t)||(t=[t]);return Array.from(t).map((t=>"string"==typeof t?new uc(t):t instanceof hc?new uc(t.data,t.getAttributes()):t))}(e);for(const t of n)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const t of n)t.parent=null;return n}static fromJSON(t){let e;if(t.children){e=[];for(const n of t.children)n.name?e.push(gc.fromJSON(n)):e.push(uc.fromJSON(n))}return new gc(t.name,t.attributes,e)}}gc.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t};class fc{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new b("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new b("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this.position=t.startPosition.clone():this.position=mc._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(t){let e,n,r,i;do{r=this.position,i=this._visitedParent,({done:e,value:n}=this.next())}while(!e&&t(n));e||(this.position=r,this._visitedParent=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const r=bc(e,n),i=r||kc(e,n,r);if(i instanceof gc)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=i),this.position=e,pc("elementStart",i,t,e,1);if(i instanceof uc){let r;if(this.singleCharacters)r=1;else{let t=i.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),r=t-e.offset}const o=e.offset-i.startOffset,s=new hc(i,o,r);return e.offset+=r,this.position=e,pc("text",s,t,e,r)}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():pc("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const r=e.parent,i=bc(e,r),o=i||wc(e,r,i);if(o instanceof gc)return e.offset--,this.shallow?(this.position=e,pc("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this.position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():pc("elementEnd",o,t,e));if(o instanceof uc){let r;if(this.singleCharacters)r=1;else{let t=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),r=e.offset-t}const i=e.offset-o.startOffset,s=new hc(o,i-r,r);return e.offset-=r,this.position=e,pc("text",s,t,e,r)}return e.path.pop(),this.position=e,this._visitedParent=n.parent,pc("elementStart",n,t,e,1)}}function pc(t,e,n,r,i){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}class mc extends cc{constructor(t,e,n="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new b("model-position-root-invalid",t);if(!(e instanceof Array)||0===e.length)throw new b("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChild(t.offsetToIndex(this.path[e])),!t)throw new b("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new b("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return bc(this,this.parent)}get nodeAfter(){const t=this.parent;return kc(this,t,bc(this,t))}get nodeBefore(){const t=this.parent;return wc(this,t,bc(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=K(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new fc(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=K(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let r=0;for(;e[r]==n[r]&&e[r];)r++;return 0===r?null:e[r-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let n=0;n<e;n++){const e=this.path[n]-t.path[n];if(e<-1||e>1)return!1;if(1===e)return yc(t,this,n);if(-1===e)return yc(this,t,n)}return this.path.length===t.path.length||(this.path.length>t.path.length?_c(this.path,e):_c(t.path,e))}hasSameParentAs(t){if(this.root!==t.root)return!1;return"same"==K(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=mc._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let n;return e.containsPosition(this)||e.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?mc._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n}_getTransformedByDeletion(t,e){const n=mc._createAt(this);if(this.root!=t.root)return n;if("same"==K(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if("prefix"==K(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;if(t.offset<=this.path[r]){if(t.offset+e>this.path[r])return null;n.path[r]-=e}}return n}_getTransformedByInsertion(t,e){const n=mc._createAt(this);if(this.root!=t.root)return n;if("same"==K(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==K(t.getParentPath(),this.getParentPath())){const r=t.path.length-1;t.offset<=this.path[r]&&(n.path[r]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return mc._createAt(this);const r=this._getTransformedByDeletion(t,n);return null===r||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):r._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,r=mc._createAt(e);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-t.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t instanceof mc)return new mc(t.root,t.path,t.stickiness);{const r=t;if("end"==e)e=r.maxOffset;else{if("before"==e)return this._createBefore(r,n);if("after"==e)return this._createAfter(r,n);if(0!==e&&!e)throw new b("model-createpositionat-offset-required",[this,t])}if(!r.is("element")&&!r.is("documentFragment"))throw new b("model-position-parent-incorrect",[this,t]);const i=r.getPath();return i.push(e),new this(r.root,i,n)}}static _createAfter(t,e){if(!t.parent)throw new b("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new b("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const n=new mc(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new b("model-position-fromjson-no-root",e,{rootName:t.root});return new mc(e.getRoot(t.root),t.path,t.stickiness)}}function bc(t,e){const n=e.getChild(e.offsetToIndex(t.offset));return n&&n.is("$text")&&n.startOffset<t.offset?n:null}function kc(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset))}function wc(t,e,n){return null!==n?null:e.getChild(e.offsetToIndex(t.offset)-1)}function yc(t,e,n){return n+1!==t.path.length&&(!!_c(e.path,n+1)&&!!function(t,e){let n=t.parent,r=t.path.length-1,i=0;for(;r>=e;){if(t.path[r]+i!==n.maxOffset)return!1;i=1,r--,n=n.parent}return!0}(t,n+1))}function _c(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}mc.prototype.is=function(t){return"position"===t||"model:position"===t};class vc extends cc{constructor(t,e){super(),this.start=mc._createAt(t),this.end=e?mc._createAt(e):mc._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new fc({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==K(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),r=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&r}containsItem(t){const e=mc._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new vc(this.start,t.start)),this.containsPosition(t.end)&&e.push(new vc(t.end,this.end))):e.push(new vc(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new vc(e,n)}return null}getJoined(t,e=!1){let n=this.isIntersecting(t);if(n||(n=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;let r=this.start,i=this.end;return t.start.isBefore(r)&&(r=t.start),t.end.isAfter(i)&&(i=t.end),new vc(r,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=mc._createAt(this.start);let r=n.parent;for(;n.path.length>e+1;){const e=r.maxOffset-n.offset;0!==e&&t.push(new vc(n,n.getShiftedBy(e))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const e=this.end.path[n.path.length-1],r=e-n.offset;0!==r&&t.push(new vc(n,n.getShiftedBy(r))),n.offset=e,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new fc(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new fc(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new fc(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new vc(this.start,this.end)]}getTransformedByOperations(t){const e=[new vc(this.start,this.end)];for(const n of t)for(let t=0;t<e.length;t++){const r=e[t].getTransformedByOperation(n);e.splice(t,1,...r),t+=r.length-1}for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const t=e[r];(n.containsRange(t)||t.containsRange(n)||n.isEqual(t))&&e.splice(r,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const n=t.sourcePosition,r=t.howMany,i=t.targetPosition;return this._getTransformedByMove(n,i,r,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new vc(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new vc(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=mc._createAt(n),e.offset=0):(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new vc(e,n)):new vc(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new vc(this.start,t),new vc(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const n=new vc(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,e),n.end=n.end._getTransformedByInsertion(t,e),[n]}}_getTransformedByMove(t,e,n,r=!1){if(this.isCollapsed){const r=this.start._getTransformedByMove(t,e,n);return[new vc(r)]}const i=vc._createFromPositionAndShift(t,n),o=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!r&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const r=this.start._getTransformedByMove(t,e,n),i=this.end._getTransformedByMove(t,e,n);return[new vc(r,i)]}let s;const a=this.getDifference(i);let c=null;const l=this.getIntersection(i);if(1==a.length?c=new vc(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(c=new vc(this.start,this.end._getTransformedByDeletion(t,n))),s=c?c._getTransformedByInsertion(o,n,null!==l||r):[],l){const t=new vc(l.start._getCombined(i.start,o),l.end._getCombined(i.start,o));2==s.length?s.splice(1,0,t):s.push(t)}return s}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),r=this.end._getTransformedByDeletion(t,e);return null==n&&null==r?null:(null==n&&(n=t),null==r&&(r=t),new vc(n,r))}static _createFromPositionAndShift(t,e){const n=t,r=t.getShiftedBy(e);return e>0?new this(n,r):new this(r,n)}static _createIn(t){return new this(mc._createAt(t,0),mc._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(mc._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new b("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort(((t,e)=>t.start.isAfter(e.start)?1:-1));const n=t.indexOf(e),r=new this(e.start,e.end);if(n>0)for(let e=n-1;t[e].end.isEqual(r.start);e++)r.start=mc._createAt(t[e].start);for(let e=n+1;e<t.length&&t[e].start.isEqual(r.end);e++)r.end=mc._createAt(t[e].end);return r}static fromJSON(t,e){return new this(mc.fromJSON(t.start,e),mc.fromJSON(t.end,e))}}vc.prototype.is=function(t){return"range"===t||"model:range"===t};class Ac extends(T()){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",((t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);if(!n)throw new b("mapping-model-position-view-parent-not-found",this,{modelPosition:e.modelPosition});e.viewPosition=this.findPositionIn(n,e.modelPosition.offset)}),{priority:"low"}),this.on("viewToModelPosition",((t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),r=this._viewToModelMapping.get(n),i=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=mc._createAt(r,i)}),{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t,e={}){const n=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const e of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(e);e.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t),this._modelToViewMapping.get(n)==t&&this._modelToViewMapping.delete(n))}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const r=this._elementToMarkerNames.get(t)||new Set;r.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,r)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),0==n.size&&this._markerNameToElements.delete(e));const r=this._elementToMarkerNames.get(t);r&&(r.delete(e),0==r.size&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,e]of this._deferredBindingRemovals)t.root==e&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new vc(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new as(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const t of e)if(t.is("attributeElement"))for(const e of t.getElementsWithSameId())n.add(e);else n.add(t);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;for(;!this._viewToModelMapping.has(e);)e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t){return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t)}if(t.is("$text"))return e;let r=0;for(let n=0;n<e;n++)r+=this.getModelLength(t.getChild(n));return r}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name)){return this._viewToModelLengthCallbacks.get(t.name)(t)}if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const n of t.getChildren())e+=this.getModelLength(n);return e}}findPositionIn(t,e){let n,r=0,i=0,o=0;if(t.is("$text"))return new ss(t,e);for(;i<e;)n=t.getChild(o),r=this.getModelLength(n),i+=r,o++;return i==e?this._moveViewPositionToTextNode(new ss(t,o)):this.findPositionIn(n,e-(i-r))}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e instanceof Ki?new ss(e,e.data.length):n instanceof Ki?new ss(n,0):t}}class Cc{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(t,e){e=xc(e),t instanceof hc&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=xc(e),t instanceof hc&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}test(t,e){e=xc(e),t instanceof hc&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(void 0===n)return null;const r=n.get(e);return void 0===r?null:r}revert(t,e){e=xc(e),t instanceof hc&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null}verifyAllConsumed(t){const e=[];for(const[n,r]of this._consumable)for(const[i,o]of r){const r=i.split(":")[0];o&&t==r&&e.push({event:i,item:n.name||n.description})}if(e.length)throw new b("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const r=n.get(t.endOffset);r&&(e=r.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,r=t.parent,i=Symbol("$textProxy:"+t.data);let o,s;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),s=o.get(n),s||(s=new Map,o.set(n,s)),s.set(r,i),i}}function xc(t){const e=t.split(":");return"insert"==e[0]?e[0]:"addMarker"==e[0]||"removeMarker"==e[0]?t:e.length>1?e[0]+":"+e[1]:e[0]}class Ec extends(T()){constructor(t){super(),this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,e,n){const r=this._createConversionApi(n,t.getRefreshedItems());for(const e of t.getMarkersToRemove())this._convertMarkerRemove(e.name,e.range,r);const i=this._reduceChanges(t.getChanges());for(const t of i)"insert"===t.type?this._convertInsert(vc._createFromPositionAndShift(t.position,t.length),r):"reinsert"===t.type?this._convertReinsert(vc._createFromPositionAndShift(t.position,t.length),r):"remove"===t.type?this._convertRemove(t.position,t.length,t.name,r):this._convertAttribute(t.range,t.attributeKey,t.attributeOldValue,t.attributeNewValue,r);for(const t of r.mapper.flushUnboundMarkerNames()){const n=e.get(t).getRange();this._convertMarkerRemove(t,n,r),this._convertMarkerAdd(t,n,r)}for(const e of t.getMarkersToAdd())this._convertMarkerAdd(e.name,e.range,r);r.mapper.flushDeferredBindings(),r.consumable.verifyAllConsumed("insert")}convert(t,e,n,r={}){const i=this._createConversionApi(n,void 0,r);this._convertInsert(t,i);for(const[t,n]of e)this._convertMarkerAdd(t,n,i);i.consumable.verifyAllConsumed("insert")}convertSelection(t,e,n){const r=Array.from(e.getMarkersAtPosition(t.getFirstPosition())),i=this._createConversionApi(n);if(this._addConsumablesForSelection(i.consumable,t,r),this.fire("selection",{selection:t},i),t.isCollapsed){for(const e of r){const n=e.getRange();if(!Tc(t.getFirstPosition(),e,i.mapper))continue;const r={item:t,markerName:e.name,markerRange:n};i.consumable.test(t,"addMarker:"+e.name)&&this.fire(`addMarker:${e.name}`,r,i)}for(const e of t.getAttributeKeys()){const n={item:t,range:t.getFirstRange(),attributeKey:e,attributeOldValue:null,attributeNewValue:t.getAttribute(e)};i.consumable.test(t,"attribute:"+n.attributeKey)&&this.fire(`attribute:${n.attributeKey}:$text`,n,i)}}}_convertInsert(t,e,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(e.consumable,Array.from(t));for(const n of Array.from(t.getWalker({shallow:!0})).map(Sc))this._testAndFire("insert",n,e)}_convertRemove(t,e,n,r){this.fire(`remove:${n}`,{position:t,length:e},r)}_convertAttribute(t,e,n,r,i){this._addConsumablesForRange(i.consumable,t,`attribute:${e}`);for(const o of t){const t={item:o.item,range:vc._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:e,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${e}`,t,i)}}_convertReinsert(t,e){const n=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(e.consumable,n);for(const t of n.map(Sc))this._testAndFire("insert",{...t,reconversion:!0},e)}_convertMarkerAdd(t,e,n){if("$graveyard"==e.root.rootName)return;const r=`addMarker:${t}`;if(n.consumable.add(e,r),this.fire(r,{markerName:t,markerRange:e},n),n.consumable.consume(e,r)){this._addConsumablesForRange(n.consumable,e,r);for(const i of e.getItems()){if(!n.consumable.test(i,r))continue;const o={item:i,range:vc._createOn(i),markerName:t,markerRange:e};this.fire(r,o,n)}}}_convertMarkerRemove(t,e,n){"$graveyard"!=e.root.rootName&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:e},n)}_reduceChanges(t){const e={changes:t};return this.fire("reduceChanges",e),e.changes}_addConsumablesForInsert(t,e){for(const n of e){const e=n.item;if(null===t.test(e,"insert")){t.add(e,"insert");for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n)}}return t}_addConsumablesForRange(t,e,n){for(const r of e.getItems())t.add(r,n);return t}_addConsumablesForSelection(t,e,n){t.add(e,"selection");for(const r of n)t.add(e,"addMarker:"+r.name);for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n);return t}_testAndFire(t,e,n){const r=function(t,e){const n=e.item.is("element")?e.item.name:"$text";return`${t}:${n}`}(t,e),i=e.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(e.item):e.item,o=this._firedEventsMap.get(n),s=o.get(i);if(s){if(s.has(r))return;s.add(r)}else o.set(i,new Set([r]));this.fire(r,e,n)}_testAndFireAddAttributes(t,e){const n={item:t,range:vc._createOn(t)};for(const t of n.item.getAttributeKeys())n.attributeKey=t,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(t),this._testAndFire(`attribute:${t}`,n,e)}_createConversionApi(t,e=new Set,n={}){const r={...this._conversionApi,consumable:new Cc,writer:t,options:n,convertItem:t=>this._convertInsert(vc._createOn(t),r),convertChildren:t=>this._convertInsert(vc._createIn(t),r,{doNotAddConsumables:!0}),convertAttributes:t=>this._testAndFireAddAttributes(t,r),canReuseView:t=>!e.has(r.mapper.toModelElement(t))};return this._firedEventsMap.set(r,new Map),r}}function Tc(t,e,n){const r=e.getRange(),i=Array.from(t.getAncestors());i.shift(),i.reverse();return!i.some((t=>{if(r.containsItem(t)){return!!n.toViewElement(t).getCustomProperty("addHighlight")}}))}function Sc(t){return{item:t.item,range:vc._createFromPositionAndShift(t.previousPosition,t.length)}}class Dc extends(T(cc)){constructor(...t){super(),this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const r of t._ranges)if(e.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new vc(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new vc(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new vc(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,n,r]=t;if("object"==typeof n&&(r=n,n=void 0),null===e)this._setRanges([]);else if(e instanceof Dc)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof vc)this._setRanges([e],!!r&&!!r.backward);else if(e instanceof mc)this._setRanges([new vc(e)]);else if(e instanceof lc){const t=!!r&&!!r.backward;let i;if("in"==n)i=vc._createIn(e);else if("on"==n)i=vc._createOn(e);else{if(void 0===n)throw new b("model-selection-setto-required-second-parameter",[this,e]);i=new vc(mc._createAt(e,n))}this._setRanges([i],t)}else{if(!Q(e))throw new b("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,r&&!!r.backward)}}_setRanges(t,e=!1){const n=Array.from(t),r=n.some((e=>{if(!(e instanceof vc))throw new b("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every((t=>!t.isEqual(e)))}));(n.length!==this._ranges.length||r)&&(this._replaceAllRanges(n),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new b("model-selection-setfocus-no-ranges",[this,t]);const n=mc._createAt(t,e);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new vc(n,r)),this._lastRangeBackward=!0):(this._pushRange(new vc(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=Bc(e.start,t);n&&Lc(n,e)&&(yield n);for(const n of e.getWalker()){const r=n.item;"elementEnd"==n.type&&Ic(r,t,e)&&(yield r)}const r=Bc(e.end,t);r&&!e.end.isTouching(mc._createAt(r,0))&&Lc(r,e)&&(yield r)}}containsEntireContent(t=this.anchor.root){const e=mc._createAt(t,0),n=mc._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new vc(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new b("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Mc(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Ic(t,e,n){return Mc(t,e)&&Lc(t,n)}function Bc(t,e){const n=t.parent.root.document.model.schema,r=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const o=r.find((t=>!i&&(i=n.isLimit(t),!i&&Mc(t,e))));return r.forEach((t=>e.add(t))),o}function Lc(t,e){const n=function(t){const e=t.root.document.model.schema;let n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent}}(t);if(!n)return!0;return!e.containsRange(vc._createOn(n),!0)}Dc.prototype.is=function(t){return"selection"===t||"model:selection"===t};class Nc extends(T(vc)){constructor(t,e){super(t,e),Oc.call(this)}detach(){this.stopListening()}toRange(){return new vc(this.start,this.end)}static fromRange(t){return new Nc(t.start,t.end)}}function Oc(){this.listenTo(this.root.document.model,"applyOperation",((t,e)=>{const n=e[0];n.isDocumentOperation&&Pc.call(this,n)}),{priority:"low"})}function Pc(t){const e=this.getTransformedByOperation(t),n=vc._createFromRanges(e),r=!n.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let o=null;if(r){"$graveyard"==n.root.rootName&&(o="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",e,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}Nc.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};const Rc="selection:";class zc extends(T(cc)){constructor(t){super(),this._selection=new Fc(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return Rc+t}static _isStoreAttributeKey(t){return t.startsWith(Rc)}}zc.prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class Fc extends Dc{constructor(t){super(),this.markers=new yi({idProperty:"name"}),this._model=t.model,this._document=t,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",((t,e)=>{const n=e[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),this.on("change:range",(()=>{this._validateSelectionRanges(this.getRanges())})),this.listenTo(this._model.markers,"update",((t,e,n,r)=>{this._updateMarker(e,r)})),this.listenTo(this._document,"change",((t,e)=>{!function(t,e){const n=t.document.differ;for(const r of n.getChanges()){if("insert"!=r.type)continue;const n=r.position.parent;r.length===n.maxOffset&&t.enqueueChange(e,(t=>{const e=Array.from(n.getAttributeKeys()).filter((t=>t.startsWith(Rc)));for(const r of e)t.removeAttribute(r,n)}))}}(this._model,e)}))}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=f();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new b("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new b("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=Nc.fromRange(t);return e.on("change:range",((t,n,r)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}})),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))continue;const r=e.getRange();for(const n of this.getRanges())r.containsRange(n,!n.isCollapsed)&&t.push(e)}const n=Array.from(this.markers);for(const n of t)this.markers.has(n)||(this.markers.add(n),e=!0);for(const n of Array.from(this.markers))t.includes(n)||(this.markers.remove(n),e=!0);e&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(t,e){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const i=Array.from(this.markers),o=this.markers.has(t);if(e){let n=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){n=!0;break}n&&!o?(this.markers.add(t),r=!0):!n&&o&&(this.markers.remove(t),r=!0)}else o&&(this.markers.remove(t),r=!0);r&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=Ci(this._getSurroundingAttributes()),n=Ci(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const r=[];for(const[t,e]of this.getAttributes())n.has(t)&&n.get(t)===e||r.push(t);for(const[t]of n)this.hasAttribute(t)||r.push(t);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(t,e,n=!0){const r=n?"normal":"low";if("low"==r&&"normal"==this._attributePriority.get(t))return!1;return super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,r),!0)}_removeAttribute(t,e=!0){const n=e?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(this._attributePriority.set(t,n),!!super.hasAttribute(t)&&(this._attrs.delete(t),!0))}_setAttributesTo(t){const e=new Set;for(const[e,n]of this.getAttributes())t.get(e)!==n&&this._removeAttribute(e,!1);for(const[n,r]of t){this._setAttribute(n,r,!1)&&e.add(n)}return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(Rc)){const n=e.substr(Rc.length);yield[n,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;let n=null;if(this.isCollapsed){const r=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=jc(r)),n||(n=jc(i)),!this.isGravityOverridden&&!n){let t=r;for(;t&&!e.isInline(t)&&!n;)t=t.previousSibling,n=jc(t)}if(!n){let t=i;for(;t&&!e.isInline(t)&&!n;)t=t.nextSibling,n=jc(t)}n||(n=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const r of t){if(r.item.is("element")&&e.isObject(r.item))break;if("text"==r.type){n=r.item.getAttributes();break}}}return n}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function jc(t){return t instanceof hc||t instanceof uc?t.getAttributes():null}class Vc{constructor(t){this._dispatchers=t}add(t){for(const e of this._dispatchers)t(e);return this}}const $c=function(t){return br(t,5)};class Hc extends Vc{elementToElement(t){return this.add(function(t){const e=qc(t.model),n=Yc(t.view,"container");e.attributes.length&&(e.children=!0);return r=>{r.on(`insert:${e.name}`,function(t,e=el){return(n,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const o=t(r.item,i,r);if(!o)return;e(r.item,i.consumable);const s=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,o),i.writer.insert(s,o),i.convertAttributes(r.item),Jc(o,r.item.getChildren(),i,{reconversion:r.reconversion})}}(n,Xc(e)),{priority:t.converterPriority||"normal"}),(e.children||e.attributes.length)&&r.on("reduceChanges",Qc(e),{priority:"low"})}}(t))}elementToStructure(t){return this.add(function(t){const e=qc(t.model),n=Yc(t.view,"container");return e.children=!0,r=>{if(r._conversionApi.schema.checkChild(e.name,"$text"))throw new b("conversion-element-to-structure-disallowed-text",r,{elementName:e.name});var i,o;r.on(`insert:${e.name}`,(i=n,o=Xc(e),(t,e,n)=>{if(!o(e.item,n.consumable,{preflight:!0}))return;const r=new Map;n.writer._registerSlotFactory(function(t,e,n){return(r,i="children")=>{const o=r.createContainerElement("$slot");let s=null;if("children"===i)s=Array.from(t.getChildren());else{if("function"!=typeof i)throw new b("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:i});s=Array.from(t.getChildren()).filter((t=>i(t)))}return e.set(o,s),o}}(e.item,r,n));const s=i(e.item,n,e);if(n.writer._clearSlotFactory(),!s)return;!function(t,e,n){const r=Array.from(e.values()).flat(),i=new Set(r);if(i.size!=r.length)throw new b("conversion-slot-filter-overlap",n.dispatcher,{element:t});if(i.size!=t.childCount)throw new b("conversion-slot-filter-incomplete",n.dispatcher,{element:t})}(e.item,r,n),o(e.item,n.consumable);const a=n.mapper.toViewPosition(e.range.start);n.mapper.bindElements(e.item,s),n.writer.insert(a,s),n.convertAttributes(e.item),function(t,e,n,r){n.mapper.on("modelToViewPosition",s,{priority:"highest"});let i=null,o=null;for([i,o]of e)Jc(t,o,n,r),n.writer.move(n.writer.createRangeIn(i),n.writer.createPositionBefore(i)),n.writer.remove(i);function s(t,e){const n=e.modelPosition.nodeAfter,r=o.indexOf(n);r<0||(e.viewPosition=e.mapper.findPositionIn(i,r))}n.mapper.off("modelToViewPosition",s)}(s,r,n,{reconversion:e.reconversion})}),{priority:t.converterPriority||"normal"}),r.on("reduceChanges",Qc(e),{priority:"low"})}}(t))}attributeToElement(t){return this.add(function(t){let e=(t=$c(t)).model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;e.name&&(n+=":"+e.name);if(e.values)for(const n of e.values)t.view[n]=Yc(t.view[n],"attribute");else t.view=Yc(t.view,"attribute");const r=Gc(t);return e=>{e.on(n,function(t){return(e,n,r)=>{if(!r.consumable.test(n.item,e.name))return;const i=t(n.attributeOldValue,r,n),o=t(n.attributeNewValue,r,n);if(!i&&!o)return;r.consumable.consume(n.item,e.name);const s=r.writer,a=s.document.selection;if(n.item instanceof Dc||n.item instanceof zc)s.wrap(a.getFirstRange(),o);else{let t=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(t=s.unwrap(t,i)),null!==n.attributeNewValue&&o&&s.wrap(t,o)}}}(r),{priority:t.converterPriority||"normal"})}}(t))}attributeToAttribute(t){return this.add(function(t){let e=(t=$c(t)).model;"string"==typeof e&&(e={key:e});let n=`attribute:${e.key}`;e.name&&(n+=":"+e.name);if(e.values)for(const n of e.values)t.view[n]=Zc(t.view[n]);else t.view=Zc(t.view);const r=Gc(t);return e=>{var i;e.on(n,(i=r,(t,e,n)=>{if(!n.consumable.test(e.item,t.name))return;const r=i(e.attributeOldValue,n,e),o=i(e.attributeNewValue,n,e);if(!r&&!o)return;n.consumable.consume(e.item,t.name);const s=n.mapper.toViewElement(e.item),a=n.writer;if(!s)throw new b("conversion-attribute-to-attribute-on-text",n.dispatcher,e);if(null!==e.attributeOldValue&&r)if("class"==r.key){const t=bi(r.value);for(const e of t)a.removeClass(e,s)}else if("style"==r.key){const t=Object.keys(r.value);for(const e of t)a.removeStyle(e,s)}else a.removeAttribute(r.key,s);if(null!==e.attributeNewValue&&o)if("class"==o.key){const t=bi(o.value);for(const e of t)a.addClass(e,s)}else if("style"==o.key){const t=Object.keys(o.value);for(const e of t)a.setStyle(e,o.value[e],s)}else a.setAttribute(o.key,o.value,s)}),{priority:t.converterPriority||"normal"})}}(t))}markerToElement(t){return this.add(function(t){const e=Yc(t.view,"ui");return n=>{var r;n.on(`addMarker:${t.model}`,(r=e,(t,e,n)=>{e.isOpening=!0;const i=r(e,n);e.isOpening=!1;const o=r(e,n);if(!i||!o)return;const s=e.markerRange;if(s.isCollapsed&&!n.consumable.consume(s,t.name))return;for(const e of s)if(!n.consumable.consume(e.item,t.name))return;const a=n.mapper,c=n.writer;c.insert(a.toViewPosition(s.start),i),n.mapper.bindElementToMarker(i,e.markerName),s.isCollapsed||(c.insert(a.toViewPosition(s.end),o),n.mapper.bindElementToMarker(o,e.markerName)),t.stop()}),{priority:t.converterPriority||"normal"}),n.on(`removeMarker:${t.model}`,((t,e,n)=>{const r=n.mapper.markerNameToElements(e.markerName);if(r){for(const t of r)n.mapper.unbindElementFromMarkerName(t,e.markerName),n.writer.clear(n.writer.createRangeOn(t),t);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}),{priority:t.converterPriority||"normal"})}}(t))}markerToHighlight(t){return this.add(function(t){return e=>{var n;e.on(`addMarker:${t.model}`,(n=t.view,(t,e,r)=>{if(!e.item)return;if(!(e.item instanceof Dc||e.item instanceof zc||e.item.is("$textProxy")))return;const i=Kc(n,e,r);if(!i)return;if(!r.consumable.consume(e.item,t.name))return;const o=r.writer,s=Uc(o,i),a=o.document.selection;if(e.item instanceof Dc||e.item instanceof zc)o.wrap(a.getFirstRange(),s);else{const t=r.mapper.toViewRange(e.range),n=o.wrap(t,s);for(const t of n.getItems())if(t.is("attributeElement")&&t.isSimilar(s)){r.mapper.bindElementToMarker(t,e.markerName);break}}}),{priority:t.converterPriority||"normal"}),e.on(`addMarker:${t.model}`,function(t){return(e,n,r)=>{if(!n.item)return;if(!(n.item instanceof gc))return;const i=Kc(t,n,r);if(!i)return;if(!r.consumable.test(n.item,e.name))return;const o=r.mapper.toViewElement(n.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(n.item,e.name);for(const t of vc._createIn(n.item))r.consumable.consume(t.item,e.name);o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,n.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),e.on(`removeMarker:${t.model}`,function(t){return(e,n,r)=>{if(n.markerRange.isCollapsed)return;const i=Kc(t,n,r);if(!i)return;const o=Uc(r.writer,i),s=r.mapper.markerNameToElements(n.markerName);if(s){for(const t of s)if(r.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("attributeElement"))r.writer.unwrap(r.writer.createRangeOn(t),o);else{t.getCustomProperty("removeHighlight")(t,i.id,r.writer)}r.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}markerToData(t){return this.add(function(t){const e=(t=$c(t)).model;let n=t.view;n||(n=n=>({group:e,name:n.substr(t.model.length+1)}));return r=>{var i;r.on(`addMarker:${e}`,(i=n,(t,e,n)=>{const r=i(e.markerName,n);if(!r)return;const o=e.markerRange;n.consumable.consume(o,t.name)&&(Wc(o,!1,n,e,r),Wc(o,!0,n,e,r),t.stop())}),{priority:t.converterPriority||"normal"}),r.on(`removeMarker:${e}`,function(t){return(e,n,r)=>{const i=t(n.markerName,r);if(!i)return;const o=r.mapper.markerNameToElements(n.markerName);if(o){for(const t of o)r.mapper.unbindElementFromMarkerName(t,n.markerName),t.is("containerElement")?(s(`data-${i.group}-start-before`,t),s(`data-${i.group}-start-after`,t),s(`data-${i.group}-end-before`,t),s(`data-${i.group}-end-after`,t)):r.writer.clear(r.writer.createRangeOn(t),t);r.writer.clearClonedElementsGroup(n.markerName),e.stop()}function s(t,e){if(e.hasAttribute(t)){const n=new Set(e.getAttribute(t).split(","));n.delete(i.name),0==n.size?r.writer.removeAttribute(t,e):r.writer.setAttribute(t,Array.from(n).join(","),e)}}}}(n),{priority:t.converterPriority||"normal"})}}(t))}}function Uc(t,e){const n=t.createAttributeElement("span",e.attributes);return e.classes&&n._addClass(e.classes),"number"==typeof e.priority&&(n._priority=e.priority),n._id=e.id,n}function Wc(t,e,n,r,i){const o=e?t.start:t.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||a){let t,o;e&&s||!e&&!a?(t=s,o=!0):(t=a,o=!1);const c=n.mapper.toViewElement(t);if(c)return void function(t,e,n,r,i,o){const s=`data-${o.group}-${e?"start":"end"}-${n?"before":"after"}`,a=t.hasAttribute(s)?t.getAttribute(s).split(","):[];a.unshift(o.name),r.writer.setAttribute(s,a.join(","),t),r.mapper.bindElementToMarker(t,i.markerName)}(c,e,o,n,r,i)}!function(t,e,n,r,i){const o=`${i.group}-${e?"start":"end"}`,s=i.name?{name:i.name}:null,a=n.writer.createUIElement(o,s);n.writer.insert(t,a),n.mapper.bindElementToMarker(a,r.markerName)}(n.mapper.toViewPosition(o),e,n,r,i)}function qc(t){return"string"==typeof t&&(t={name:t}),t.attributes?Array.isArray(t.attributes)||(t.attributes=[t.attributes]):t.attributes=[],t.children=!!t.children,t}function Yc(t,e){return"function"==typeof t?t:(n,r)=>function(t,e,n){"string"==typeof t&&(t={name:t});let r;const i=e.writer,o=Object.assign({},t.attributes);if("container"==n)r=i.createContainerElement(t.name,o);else if("attribute"==n){const e={priority:t.priority||ws.DEFAULT_PRIORITY};r=i.createAttributeElement(t.name,o,e)}else r=i.createUIElement(t.name,o);if(t.styles){const e=Object.keys(t.styles);for(const n of e)i.setStyle(n,t.styles[n],r)}if(t.classes){const e=t.classes;if("string"==typeof e)i.addClass(e,r);else for(const t of e)i.addClass(t,r)}return r}(t,r,e)}function Gc(t){return t.model.values?(e,n,r)=>{const i=t.view[e];return i?i(e,n,r):null}:t.view}function Zc(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function Kc(t,e,n){const r="function"==typeof t?t(e,n):t;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function Qc(t){const e=function(t){return(e,n)=>{if(!e.is("element",t.name))return!1;if("attribute"==n.type){if(t.attributes.includes(n.attributeKey))return!0}else if(t.children)return!0;return!1}}(t);return(t,n)=>{const r=[];n.reconvertedElements||(n.reconvertedElements=new Set);for(const t of n.changes){const i="attribute"==t.type?t.range.start.nodeAfter:t.position.parent;if(i&&e(i,t)){if(!n.reconvertedElements.has(i)){n.reconvertedElements.add(i);const t=mc._createBefore(i);r.push({type:"remove",name:i.name,position:t,length:1},{type:"reinsert",name:i.name,position:t,length:1})}}else r.push(t)}n.changes=r}}function Xc(t){return(e,n,r={})=>{const i=["insert"];for(const n of t.attributes)e.hasAttribute(n)&&i.push(`attribute:${n}`);return!!i.every((t=>n.test(e,t)))&&(r.preflight||i.forEach((t=>n.consume(e,t))),!0)}}function Jc(t,e,n,r){for(const i of e)tl(t.root,i,n,r)||n.convertItem(i)}function tl(t,e,n,r){const{writer:i,mapper:o}=n;if(!r.reconversion)return!1;const s=o.toViewElement(e);return!(!s||s.root==t)&&(!!n.canReuseView(s)&&(i.move(i.createRangeOn(s),o.toViewPosition(mc._createBefore(e))),!0))}function el(t,e,{preflight:n}={}){return n?e.test(t,"insert"):e.consume(t,"insert")}function nl(t){const{schema:e,document:n}=t.model;for(const r of n.getRootNames()){const i=n.getRoot(r);if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0}return!1}function rl(t,e,n){const r=n.createContext(t);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),e)}function il(t,e){const n=e.createElement("paragraph");return e.insert(n,t),e.createPositionAt(n,0)}class ol extends Vc{elementToElement(t){return this.add(sl(t))}elementToAttribute(t){return this.add(function(t){ll(t=$c(t));const e=dl(t,!1),n=al(t.view),r=n?`element:${n}`:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"low"})}}(t))}attributeToAttribute(t){return this.add(function(t){t=$c(t);let e=null;("string"==typeof t.view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});const e=t.view.key;let n;if("class"==e||"style"==e){n={["class"==e?"classes":"styles"]:t.view.value}}else{n={attributes:{[e]:void 0===t.view.value?/[\s\S]*/:t.view.value}}}t.view.name&&(n.name=t.view.name);return t.view=n,e}(t));ll(t,e);const n=dl(t,!0);return e=>{e.on("element",n,{priority:t.converterPriority||"low"})}}(t))}elementToMarker(t){return this.add(function(t){const e=function(t){return(e,n)=>{const r="string"==typeof t?t:t(e,n);return n.writer.createElement("$marker",{"data-name":r})}}(t.model);return sl({...t,model:e})}(t))}dataToMarker(t){return this.add(function(t){(t=$c(t)).model||(t.model=e=>e?t.view+":"+e:t.view);const e={view:t.view,model:t.model},n=cl(ul(e,"start")),r=cl(ul(e,"end"));return i=>{i.on(`element:${t.view}-start`,n,{priority:t.converterPriority||"normal"}),i.on(`element:${t.view}-end`,r,{priority:t.converterPriority||"normal"});const o=p.get("low"),s=p.get("highest"),a=p.get(t.converterPriority)/s;i.on("element",function(t){return(e,n,r)=>{const i=`data-${t.view}`;function o(e,i){for(const o of i){const i=t.model(o,r),s=r.writer.createElement("$marker",{"data-name":i});r.writer.insert(s,e),n.modelCursor.isEqual(e)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(e,1),n.modelRange=n.modelRange._getTransformedByInsertion(e,1)[0]}}(r.consumable.test(n.viewItem,{attributes:i+"-end-after"})||r.consumable.test(n.viewItem,{attributes:i+"-start-after"})||r.consumable.test(n.viewItem,{attributes:i+"-end-before"})||r.consumable.test(n.viewItem,{attributes:i+"-start-before"}))&&(n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor)),r.consumable.consume(n.viewItem,{attributes:i+"-end-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-end-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-start-before").split(",")))}}(e),{priority:o+a})}}(t))}}function sl(t){const e=cl(t=$c(t)),n=al(t.view),r=n?`element:${n}`:"element";return n=>{n.on(r,e,{priority:t.converterPriority||"normal"})}}function al(t){return"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.name?t.name:null}function cl(t){const e=new Xi(t.view);return(n,r,i)=>{const o=e.match(r.viewItem);if(!o)return;const s=o.match;if(s.name=!0,!i.consumable.test(r.viewItem,s))return;const a=function(t,e,n){return t instanceof Function?t(e,n):n.writer.createElement(t)}(t.model,r.viewItem,i);a&&i.safeInsert(a,r.modelCursor)&&(i.consumable.consume(r.viewItem,s),i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r))}}function ll(t,e=null){const n=null===e||(t=>t.getAttribute(e)),r="object"!=typeof t.model?t.model:t.model.key,i="object"!=typeof t.model||void 0===t.model.value?n:t.model.value;t.model={key:r,value:i}}function dl(t,e){const n=new Xi(t.view);return(r,i,o)=>{if(!i.modelRange&&e)return;const s=n.match(i.viewItem);if(!s)return;if(!function(t,e){const n="function"==typeof t?t(e):t;if("object"==typeof n&&!al(n))return!1;return!n.classes&&!n.attributes&&!n.styles}(t.view,i.viewItem)?delete s.match.name:s.match.name=!0,!o.consumable.test(i.viewItem,s.match))return;const a=t.model.key,c="function"==typeof t.model.value?t.model.value(i.viewItem,o):t.model.value;if(null===c)return;i.modelRange||Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor));const l=function(t,e,n,r){let i=!1;for(const o of Array.from(t.getItems({shallow:n})))r.schema.checkAttribute(o,e.key)&&(i=!0,o.hasAttribute(e.key)||r.writer.setAttribute(e.key,e.value,o));return i}(i.modelRange,{key:a,value:c},e,o);l&&(o.consumable.test(i.viewItem,{name:!0})&&(s.match.name=!0),o.consumable.consume(i.viewItem,s.match))}}function ul(t,e){return{view:`${t.view}-${e}`,model:(e,n)=>{const r=e.getAttribute("name"),i=t.model(r,n);return n.writer.createElement("$marker",{"data-name":i})}}}class hl extends($()){constructor(t,e){super(),this.model=t,this.view=new ac(e),this.mapper=new Ac,this.downcastDispatcher=new Ec({mapper:this.mapper,schema:t.schema});const n=this.model.document,r=n.selection,i=this.model.markers;this.listenTo(this.model,"_beforeChanges",(()=>{this.view._disableRendering(!0)}),{priority:"highest"}),this.listenTo(this.model,"_afterChanges",(()=>{this.view._disableRendering(!1)}),{priority:"lowest"}),this.listenTo(n,"change",(()=>{this.view.change((t=>{this.downcastDispatcher.convertChanges(n.differ,i,t),this.downcastDispatcher.convertSelection(r,i,t)}))}),{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return(n,r)=>{const i=r.newSelection,o=[];for(const t of i.getRanges())o.push(e.toModelRange(t));const s=t.createSelection(o,{backward:i.isBackward});s.isEqual(t.document.selection)||t.change((t=>{t.setSelection(s)}))}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)}),{priority:"lowest"}),this.downcastDispatcher.on("insert",((t,e,n)=>{n.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||n.convertChildren(e.item)}),{priority:"lowest"}),this.downcastDispatcher.on("remove",((t,e,n)=>{const r=n.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),o=n.mapper.toViewPosition(i,{isPhantom:!0}),s=n.writer.createRange(r,o),a=n.writer.remove(s.getTrimmed());for(const t of n.writer.createRangeIn(a).getItems())n.mapper.unbindViewElement(t,{defer:!0})}),{priority:"low"}),this.downcastDispatcher.on("selection",((t,e,n)=>{const r=n.writer,i=r.document.selection;for(const t of i.getRanges())t.isCollapsed&&t.end.parent.isAttached()&&n.writer.mergeAttributes(t.start);r.setSelection(null)}),{priority:"high"}),this.downcastDispatcher.on("selection",((t,e,n)=>{const r=e.selection;if(r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=[];for(const t of r.getRanges())i.push(n.mapper.toViewRange(t));n.writer.setSelection(i,{backward:r.isBackward})}),{priority:"low"}),this.downcastDispatcher.on("selection",((t,e,n)=>{const r=e.selection;if(!r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=n.writer,o=r.getFirstPosition(),s=n.mapper.toViewPosition(o),a=i.breakAttributes(s);i.setSelection(a)}),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using((t=>{if("$graveyard"==t.rootName)return null;const e=new is(this.view.document,t.name);return e.rootName=t.rootName,this.mapper.bindElements(t,e),e}))}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const e="string"==typeof t?t:t.name,n=this.model.markers.get(e);if(!n)throw new b("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:e});this.model.change((()=>{this.model.markers._refresh(n)}))}reconvertItem(t){this.model.change((()=>{this.model.document.differ._refreshItem(t)}))}}class gl{constructor(){this._consumables=new Map}add(t,e){let n;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new pl(t),this._consumables.set(t,n)),n.add(e))}test(t,e){const n=this._consumables.get(t);return void 0===n?null:t.is("$text")||t.is("documentFragment")?n:n.test(e)}consume(t,e){return!!this.test(t,e)&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0)}revert(t,e){const n=this._consumables.get(t);void 0!==n&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e))}static consumablesFromElement(t){const e={element:t,name:!0,attributes:[],classes:[],styles:[]},n=t.getAttributeKeys();for(const t of n)"style"!=t&&"class"!=t&&e.attributes.push(t);const r=t.getClassNames();for(const t of r)e.classes.push(t);const i=t.getStyleNames();for(const t of i)e.styles.push(t);return e}static createFrom(t,e){if(e||(e=new gl),t.is("$text"))return e.add(t),e;t.is("element")&&e.add(t,gl.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);for(const n of t.getChildren())e=gl.createFrom(n,e);return e}}const fl=["attributes","classes","styles"];class pl{constructor(t){this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(t){t.name&&(this._canConsumeName=!0);for(const e of fl)e in t&&this._add(e,t[e])}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const e of fl)if(e in t){const n=this._test(e,t[e]);if(!0!==n)return n}return!0}consume(t){t.name&&(this._canConsumeName=!1);for(const e of fl)e in t&&this._consume(e,t[e])}revert(t){t.name&&(this._canConsumeName=!0);for(const e of fl)e in t&&this._revert(e,t[e])}_add(t,e){const n=ut(e)?e:[e],r=this._consumables[t];for(const e of n){if("attributes"===t&&("class"===e||"style"===e))throw new b("viewconsumable-invalid-attribute",this);if(r.set(e,!0),"styles"===t)for(const t of this.element.document.stylesProcessor.getRelatedStyles(e))r.set(t,!0)}}_test(t,e){const n=ut(e)?e:[e],r=this._consumables[t];for(const e of n)if("attributes"!==t||"class"!==e&&"style"!==e){const t=r.get(e);if(void 0===t)return null;if(!t)return!1}else{const t="class"==e?"classes":"styles",n=this._test(t,[...this._consumables[t].keys()]);if(!0!==n)return n}return!0}_consume(t,e){const n=ut(e)?e:[e],r=this._consumables[t];for(const e of n)if("attributes"!==t||"class"!==e&&"style"!==e){if(r.set(e,!1),"styles"==t)for(const t of this.element.document.stylesProcessor.getRelatedStyles(e))r.set(t,!1)}else{const t="class"==e?"classes":"styles";this._consume(t,[...this._consumables[t].keys()])}}_revert(t,e){const n=ut(e)?e:[e],r=this._consumables[t];for(const e of n)if("attributes"!==t||"class"!==e&&"style"!==e){!1===r.get(e)&&r.set(e,!0)}else{const t="class"==e?"classes":"styles";this._revert(t,[...this._consumables[t].keys()])}}}class ml extends($()){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",((t,e)=>{e[0]=new bl(e[0])}),{priority:"highest"}),this.on("checkChild",((t,e)=>{e[0]=new bl(e[0]),e[1]=this.getDefinition(e[1])}),{priority:"highest"})}register(t,e){if(this._sourceDefinitions[t])throw new b("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}extend(t,e){if(!this._sourceDefinitions[t])throw new b("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let e;return e="string"==typeof t?t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const e=this.getDefinition(t);return!(!e||!e.isBlock)}isLimit(t){const e=this.getDefinition(t);return!!e&&!(!e.isLimit&&!e.isObject)}isObject(t){const e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(t){const e=this.getDefinition(t);return!(!e||!e.isInline)}isSelectable(t){const e=this.getDefinition(t);return!!e&&!(!e.isSelectable&&!e.isObject)}isContent(t){const e=this.getDefinition(t);return!!e&&!(!e.isContent&&!e.isObject)}checkChild(t,e){return!!e&&this._checkContextMatch(e,t)}checkAttribute(t,e){const n=this.getDefinition(t.last);return!!n&&n.allowAttributes.includes(e)}checkMerge(t,e){if(t instanceof mc){const e=t.nodeBefore,n=t.nodeAfter;if(!(e instanceof gc))throw new b("schema-check-merge-no-element-before",this);if(!(n instanceof gc))throw new b("schema-check-merge-no-element-after",this);return this.checkMerge(e,n)}for(const n of e.getChildren())if(!this.checkChild(t,n))return!1;return!0}addChildCheck(t){this.on("checkChild",((e,[n,r])=>{if(!r)return;const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)}),{priority:"high"})}addAttributeCheck(t){this.on("checkAttribute",((e,[n,r])=>{const i=t(n,r);"boolean"==typeof i&&(e.stop(),e.return=i)}),{priority:"high"})}setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}getAttributeProperties(t){return this._attributeProperties[t]||{}}getLimitElement(t){let e;if(t instanceof mc)e=t.parent;else{e=(t instanceof vc?[t]:Array.from(t.getRanges())).reduce(((t,e)=>{const n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n}),null)}for(;!this.isLimit(e)&&e.parent;)e=e.parent;return e}checkAttributeInSelection(t,e){if(t.isCollapsed){const n=[...t.getFirstPosition().getAncestors(),new uc("",t.getAttributes())];return this.checkAttribute(n,e)}{const n=t.getRanges();for(const t of n)for(const n of t)if(this.checkAttribute(n.item,e))return!0}return!1}*getValidRanges(t,e){t=function*(t){for(const e of t)yield*e.getMinimalFlatRanges()}(t);for(const n of t)yield*this._getValidRangesForRange(n,e)}getNearestSelectionRange(t,e="both"){if(this.checkChild(t,"$text"))return new vc(t);let n,r;const i=t.getAncestors().reverse().find((t=>this.isLimit(t)))||t.root;"both"!=e&&"backward"!=e||(n=new fc({boundaries:vc._createIn(i),startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(r=new fc({boundaries:vc._createIn(i),startPosition:t}));for(const t of function*(t,e){let n=!1;for(;!n;){if(n=!0,t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}if(e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}}}(n,r)){const e=t.walker==n?"elementEnd":"elementStart",r=t.value;if(r.type==e&&this.isObject(r.item))return vc._createOn(r.item);if(this.checkChild(r.nextPosition,"$text"))return new vc(r.nextPosition)}return null}findAllowedParent(t,e){let n=t.parent;for(;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}setAllowedAttributes(t,e,n){const r=n.model;for(const[i,o]of Object.entries(e))r.schema.checkAttribute(t,i)&&n.setAttribute(i,o,t)}removeDisallowedAttributes(t,e){for(const n of t)if(n.is("$text"))Ml(this,n,e);else{const t=vc._createIn(n).getPositions();for(const n of t){Ml(this,n.nodeBefore||n.parent,e)}}}getAttributesWithProperty(t,e,n){const r={};for(const[i,o]of t.getAttributes()){const t=this.getAttributeProperties(i);void 0!==t[e]&&(void 0!==n&&n!==t[e]||(r[i]=o))}return r}createContext(t){return new bl(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},e=this._sourceDefinitions,n=Object.keys(e);for(const r of n)t[r]=kl(e[r],r);for(const e of n)wl(t,e);for(const e of n)yl(t,e);for(const e of n)_l(t,e);for(const e of n)vl(t,e),Al(t,e);for(const e of n)Cl(t,e),xl(t,e),El(t,e);this._compiledDefinitions=t}_checkContextMatch(t,e,n=e.length-1){const r=e.getItem(n);if(t.allowIn.includes(r.name)){if(0==n)return!0;{const t=this.getDefinition(r);return this._checkContextMatch(t,e,n-1)}}return!1}*_getValidRangesForRange(t,e){let n=t.start,r=t.start;for(const i of t.getItems({shallow:!0}))i.is("element")&&(yield*this._getValidRangesForRange(vc._createIn(i),e)),this.checkAttribute(i,e)||(n.isEqual(r)||(yield new vc(n,r)),n=mc._createAfter(i)),r=mc._createAfter(i);n.isEqual(r)||(yield new vc(n,r))}}class bl{constructor(t){if(t instanceof bl)return t;let e;e="string"==typeof t?[t]:Array.isArray(t)?t:t.getAncestors({includeSelf:!0}),this._items=e.map(Dl)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new bl([t]);return e._items=[...this._items,...e._items],e}getItem(t){return this._items[t]}*getNames(){yield*this._items.map((t=>t.name))}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function kl(t,e){const n={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(t,e){for(const n of t){const t=Object.keys(n).filter((t=>t.startsWith("is")));for(const r of t)e[r]=!!n[r]}}(t,n),Tl(t,n,"allowIn"),Tl(t,n,"allowContentOf"),Tl(t,n,"allowWhere"),Tl(t,n,"allowAttributes"),Tl(t,n,"allowAttributesOf"),Tl(t,n,"allowChildren"),Tl(t,n,"inheritTypesFrom"),function(t,e){for(const n of t){const t=n.inheritAllFrom;t&&(e.allowContentOf.push(t),e.allowWhere.push(t),e.allowAttributesOf.push(t),e.inheritTypesFrom.push(t))}}(t,n),n}function wl(t,e){const n=t[e];for(const r of n.allowChildren){const n=t[r];n&&n.allowIn.push(e)}n.allowChildren.length=0}function yl(t,e){for(const n of t[e].allowContentOf)if(t[n]){Sl(t,n).forEach((t=>{t.allowIn.push(e)}))}delete t[e].allowContentOf}function _l(t,e){for(const n of t[e].allowWhere){const r=t[n];if(r){const n=r.allowIn;t[e].allowIn.push(...n)}}delete t[e].allowWhere}function vl(t,e){for(const n of t[e].allowAttributesOf){const r=t[n];if(r){const n=r.allowAttributes;t[e].allowAttributes.push(...n)}}delete t[e].allowAttributesOf}function Al(t,e){const n=t[e];for(const e of n.inheritTypesFrom){const r=t[e];if(r){const t=Object.keys(r).filter((t=>t.startsWith("is")));for(const e of t)e in n||(n[e]=r[e])}}delete n.inheritTypesFrom}function Cl(t,e){const n=t[e],r=n.allowIn.filter((e=>t[e]));n.allowIn=Array.from(new Set(r))}function xl(t,e){const n=t[e];for(const r of n.allowIn){t[r].allowChildren.push(e)}}function El(t,e){const n=t[e];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function Tl(t,e,n){for(const r of t){const t=r[n];"string"==typeof t?e[n].push(t):Array.isArray(t)&&e[n].push(...t)}}function Sl(t,e){const n=t[e];return(r=t,Object.keys(r).map((t=>r[t]))).filter((t=>t.allowIn.includes(n.name)));var r}function Dl(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute:e=>t.getAttribute(e)}}function Ml(t,e,n){for(const r of e.getAttributeKeys())t.checkAttribute(e,r)||n.removeAttribute(r,e)}class Il extends(T()){constructor(t){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(t,e)=>this._convertItem(t,e),convertChildren:(t,e)=>this._convertChildren(t,e),safeInsert:(t,e)=>this._safeInsert(t,e),updateConversionResult:(t,e)=>this._updateConversionResult(t,e),splitToAllowedParent:(t,e)=>this._splitToAllowedParent(t,e),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=function(t,e){let n;for(const r of new bl(t)){const t={};for(const e of r.getAttributeKeys())t[e]=r.getAttribute(e);const i=e.createElement(r.name,t);n&&e.insert(i,n),n=mc._createAt(i,0)}return n}(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=gl.createFrom(t),this.conversionApi.store={};const{modelRange:r}=this._convertItem(t,this._modelCursor),i=e.createDocumentFragment();if(r){this._removeEmptyElements();for(const t of Array.from(this._modelCursor.parent.getChildren()))e.append(t,i);i.markers=function(t,e){const n=new Set,r=new Map,i=vc._createIn(t).getItems();for(const t of i)t.is("element","$marker")&&n.add(t);for(const t of n){const n=t.getAttribute("data-name"),i=e.createPositionBefore(t);r.has(n)?r.get(n).end=i.clone():r.set(n,new vc(i.clone())),e.remove(t)}return r}(i,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(t,e){const n={viewItem:t,modelCursor:e,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,n,this.conversionApi):t.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof vc))throw new b("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){let n=e.is("position")?e:mc._createAt(e,0);const r=new vc(n);for(const e of Array.from(t.getChildren())){const t=this._convertItem(e,n);t.modelRange instanceof vc&&(r.end=t.modelRange.end,n=t.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(t,e){const n=this._splitToAllowedParent(t,e);return!!n&&(this.conversionApi.writer.insert(t,n.position),!0)}_updateConversionResult(t,e){const n=this._getSplitParts(t),r=this.conversionApi.writer;e.modelRange||(e.modelRange=r.createRange(r.createPositionBefore(t),r.createPositionAfter(n[n.length-1])));const i=this._cursorParents.get(t);e.modelCursor=i?r.createPositionAt(i,0):e.modelRange.end}_splitToAllowedParent(t,e){const{schema:n,writer:r}=this.conversionApi;let i=n.findAllowedParent(e,t);if(i){if(i===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(i)&&(i=null)}if(!i)return rl(e,t,n)?{position:il(e,r)}:null;const o=this.conversionApi.writer.split(e,i),s=[];for(const t of o.range.getWalker())if("elementEnd"==t.type)s.push(t.item);else{const e=s.pop(),n=t.item;this._registerSplitPair(e,n)}const a=o.range.end.parent;return this._cursorParents.set(t,a),{position:o.position,cursorParent:a}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){let e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t],e}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){let t=!1;for(const e of this._splitParts.keys())e.isEmpty&&!this._emptyElementsToKeep.has(e)&&(this.conversionApi.writer.remove(e),this._splitParts.delete(e),t=!0);t&&this._removeEmptyElements()}}class Bl{getHtml(t){const e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}class Ll{constructor(t){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new ca(t,{renderingMode:"data"}),this.htmlWriter=new Bl}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}_toDom(t){t.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),r=e.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}}class Nl extends(T()){constructor(t,e){super(),this.model=t,this.mapper=new Ac,this.downcastDispatcher=new Ec({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),o=r.createText(e.item.data);r.insert(i,o)}),{priority:"lowest"}),this.downcastDispatcher.on("insert",((t,e,n)=>{n.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||n.convertChildren(e.item)}),{priority:"lowest"}),this.upcastDispatcher=new Il({schema:t.schema}),this.viewDocument=new ks(e),this.stylesProcessor=e,this.htmlProcessor=new Ll(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Ms(this.viewDocument),this.upcastDispatcher.on("text",((t,e,{schema:n,consumable:r,writer:i})=>{let o=e.modelCursor;if(!r.test(e.viewItem))return;if(!n.checkChild(o,"$text")){if(!rl(o,"$text",n))return;if(0==e.viewItem.data.trim().length)return;o=il(o,i)}r.consume(e.viewItem);const s=i.createText(e.viewItem.data);i.insert(s,o),e.modelRange=i.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}),{priority:"lowest"}),this.upcastDispatcher.on("element",((t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}}),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",((t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:t,modelCursor:r}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=t,e.modelCursor=r}}),{priority:"lowest"}),$().prototype.decorate.call(this,"init"),$().prototype.decorate.call(this,"set"),$().prototype.decorate.call(this,"get"),this.on("init",(()=>{this.fire("ready")}),{priority:"lowest"}),this.on("ready",(()=>{this.model.enqueueChange({isUndoable:!1},nl)}),{priority:"lowest"})}get(t={}){const{rootName:e="main",trim:n="empty"}=t;if(!this._checkIfRootsExists([e]))throw new b("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(e);return"empty"!==n||this.model.hasContent(r,{ignoreWhitespaces:!0})?this.stringify(r,t):""}stringify(t,e={}){const n=this.toView(t,e);return this.processor.toData(n)}toView(t,e={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const i=vc._createIn(t),o=new Ds(n);this.mapper.bindElements(t,o);const s=t.is("documentFragment")?t.markers:function(t){const e=[],n=t.root.document;if(!n)return new Map;const r=vc._createIn(t);for(const t of n.model.markers){const n=t.getRange(),i=n.isCollapsed,o=n.start.isEqual(r.start)||n.end.isEqual(r.end);if(i&&o)e.push([t.name,n]);else{const i=r.getIntersection(n);i&&e.push([t.name,i])}}return e.sort((([t,e],[n,r])=>{if("after"!==e.end.compareWith(r.start))return 1;if("before"!==e.start.compareWith(r.end))return-1;switch(e.start.compareWith(r.start)){case"before":return 1;case"after":return-1;default:switch(e.end.compareWith(r.end)){case"before":return 1;case"after":return-1;default:return n.localeCompare(t)}}})),new Map(e)}(t);return this.downcastDispatcher.convert(i,s,r,e),o}init(t){if(this.model.document.version)throw new b("datacontroller-init-document-not-empty",this);let e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new b("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},(t=>{for(const n of Object.keys(e)){const r=this.model.document.getRoot(n);t.insert(this.parse(e[n],r),r,0)}})),Promise.resolve()}set(t,e={}){let n={};if("string"==typeof t?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new b("datacontroller-set-non-existent-root",this);this.model.enqueueChange(e.batchType||{},(t=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const e of Object.keys(n)){const r=this.model.document.getRoot(e);t.remove(t.createRangeIn(r)),t.insert(this.parse(n[e],r),r,0)}}))}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change((n=>this.upcastDispatcher.convert(t,n,e)))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRootNames().includes(e))return!1;return!0}}class Ol{constructor(t,e){this._helpers=new Map,this._downcast=bi(t),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=bi(e),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(t,e){const n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new b("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n})}for(t){if(!this._helpers.has(t))throw new b("conversion-for-unknown-group",this);return this._helpers.get(t)}elementToElement(t){this.for("downcast").elementToElement(t);for(const{model:e,view:n}of Pl(t))this.for("upcast").elementToElement({model:e,view:n,converterPriority:t.converterPriority})}attributeToElement(t){this.for("downcast").attributeToElement(t);for(const{model:e,view:n}of Pl(t))this.for("upcast").elementToAttribute({view:n,model:e,converterPriority:t.converterPriority})}attributeToAttribute(t){this.for("downcast").attributeToAttribute(t);for(const{model:e,view:n}of Pl(t))this.for("upcast").attributeToAttribute({view:n,model:e})}_createConversionHelpers({name:t,dispatchers:e,isDowncast:n}){if(this._helpers.has(t))throw new b("conversion-group-exists",this);const r=n?new Hc(e):new ol(e);this._helpers.set(t,r)}}function*Pl(t){if(t.model.values)for(const e of t.model.values){const n={key:t.model.key,value:e},r=t.view[e],i=t.upcastAlso?t.upcastAlso[e]:void 0;yield*Rl(n,r,i)}else yield*Rl(t.model,t.view,t.upcastAlso)}function*Rl(t,e,n){if(yield{model:t,view:e},n)for(const e of bi(n))yield{model:t,view:e}}class zl{constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function Fl(t,e){const n=$l(e),r=n.reduce(((t,e)=>t+e.offsetSize),0),i=t.parent;Ul(t);const o=t.index;return i._insertChild(o,n),Hl(i,o+n.length),Hl(i,o),new vc(t,t.getShiftedBy(r))}function jl(t){if(!t.isFlat)throw new b("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Ul(t.start),Ul(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return Hl(e,t.start.index),n}function Vl(t,e){if(!t.isFlat)throw new b("operation-utils-move-range-not-flat",this);const n=jl(t);return Fl(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),n)}function $l(t){const e=[];!function t(n){if("string"==typeof n)e.push(new uc(n));else if(n instanceof hc)e.push(new uc(n.data,n.getAttributes()));else if(n instanceof lc)e.push(n);else if(Q(n))for(const e of n)t(e)}(t);for(let t=1;t<e.length;t++){const n=e[t],r=e[t-1];n instanceof uc&&r instanceof uc&&Wl(n,r)&&(e.splice(t-1,2,new uc(r.data+n.data,r.getAttributes())),t--)}return e}function Hl(t,e){const n=t.getChild(e-1),r=t.getChild(e);if(n&&r&&n.is("$text")&&r.is("$text")&&Wl(n,r)){const i=new uc(n.data+r.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function Ul(t){const e=t.textNode,n=t.parent;if(e){const r=t.offset-e.startOffset,i=e.index;n._removeChildren(i,1);const o=new uc(e.data.substr(0,r),e.getAttributes()),s=new uc(e.data.substr(r),e.getAttributes());n._insertChild(i,[o,s])}}function Wl(t,e){const n=t.getAttributes(),r=e.getAttributes();for(const t of n){if(t[1]!==e.getAttribute(t[0]))return!1;r.next()}return r.next().done}class ql extends zl{constructor(t,e,n,r){super(r),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new ql(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ql(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new b("move-operation-nodes-do-not-exist",this);if(t===e&&n<r&&r<n+this.howMany)throw new b("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==K(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=n&&this.targetPosition.path[t]<n+this.howMany)throw new b("move-operation-node-into-itself",this)}}_execute(){Vl(vc._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=mc.fromJSON(t.sourcePosition,e),r=mc.fromJSON(t.targetPosition,e);return new this(n,t.howMany,r,t.baseVersion)}}class Yl extends zl{constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new dc($l(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const t=new dc([...this.nodes].map((t=>t._clone(!0)))),e=new Yl(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new mc(t,[0]);return new ql(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new b("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new dc([...t].map((t=>t._clone(!0)))),Fl(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const e of t.nodes)e.name?n.push(gc.fromJSON(e)):n.push(uc.fromJSON(e));const r=new Yl(mc.fromJSON(t.position,e),n,t.baseVersion);return r.shouldReceiveAttributes=t.shouldReceiveAttributes,r}}class Gl extends zl{constructor(t,e,n,r,i,o){super(o),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=i,this._markers=r}get type(){return"marker"}clone(){return new Gl(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Gl(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Gl(t.name,t.oldRange?vc.fromJSON(t.oldRange,e):null,t.newRange?vc.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}const Zl=function(t,e){return Ka(t,e)};class Kl extends zl{constructor(t,e,n,r,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===n?null:n,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new Kl(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Kl(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new b("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Zl(t.getAttribute(this.key),this.oldValue))throw new b("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new b("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Zl(this.oldValue,this.newValue)||function(t,e,n){Ul(t.start),Ul(t.end);for(const r of t.getItems({shallow:!0})){const t=r.is("$textProxy")?r.textNode:r;null!==n?t._setAttribute(e,n):t._removeAttribute(e),Hl(t.parent,t.index)}Hl(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Kl(vc.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Ql extends zl{get type(){return"noop"}clone(){return new Ql(this.baseVersion)}getReversed(){return new Ql(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Xl extends zl{constructor(t,e,n,r){super(r),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}clone(){return new Xl(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Xl(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof gc))throw new b("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new b("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Xl(mc.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Jl extends zl{constructor(t,e,n,r,i){super(i),this.root=t,this.key=e,this.oldValue=n,this.newValue=r}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new Jl(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Jl(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new b("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new b("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new b("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new b("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Jl(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class td extends zl{constructor(t,e,n,r,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new mc(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new vc(this.sourcePosition,t)}clone(){return new td(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new mc(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new ed(t,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new b("merge-operation-source-position-invalid",this);if(!e.parent)throw new b("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new b("merge-operation-how-many-invalid",this)}_execute(){const t=this.sourcePosition.parent;Vl(vc._createIn(t),this.targetPosition),Vl(vc._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=mc.fromJSON(t.sourcePosition,e),r=mc.fromJSON(t.targetPosition,e),i=mc.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,r,i,t.baseVersion)}}class ed extends zl{constructor(t,e,n,r,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new mc(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new vc(this.splitPosition,t)}clone(){return new ed(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new mc(t,[0]);return new td(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new b("split-operation-position-invalid",this);if(!t.parent)throw new b("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new b("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new b("split-operation-graveyard-position-invalid",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)Vl(vc._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();Fl(this.insertionPosition,e)}Vl(new vc(mc._createAt(t,this.splitPosition.offset),mc._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new mc(t.root,e,"toPrevious")}static fromJSON(t,e){const n=mc.fromJSON(t.splitPosition,e),r=mc.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?mc.fromJSON(t.graveyardPosition,e):null;return new this(n,t.howMany,r,i,t.baseVersion)}}const nd={};nd[Kl.className]=Kl,nd[Yl.className]=Yl,nd[Gl.className]=Gl,nd[ql.className]=ql,nd[Ql.className]=Ql,nd[zl.className]=zl,nd[Xl.className]=Xl,nd[Jl.className]=Jl,nd[ed.className]=ed,nd[td.className]=td;class rd{static fromJSON(t,e){return nd[t.__className].fromJSON(t,e)}}const id=new Map;function od(t,e,n){let r=id.get(t);r||(r=new Map,id.set(t,r)),r.set(e,n)}function sd(t){return[t]}function ad(t,e,n={}){const r=function(t,e){const n=id.get(t);return n&&n.has(e)?n.get(e):sd}(t.constructor,e.constructor);try{return r(t=t.clone(),e,n)}catch(t){throw t}}function cd(t,e,n){t=t.slice(),e=e.slice();const r=new ld(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(t),r.setOriginalOperations(e);const i=r.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:i};const o=new WeakMap;for(const e of t)o.set(e,0);const s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;for(;a<t.length;){const n=t[a],i=o.get(n);if(i==e.length){a++;continue}const s=e[i],c=ad(n,s,r.getContext(n,s,!0)),l=ad(s,n,r.getContext(s,n,!1));r.updateRelation(n,s),r.setOriginalOperations(c,n),r.setOriginalOperations(l,s);for(const t of c)o.set(t,i+l.length);t.splice(a,1,...c),e.splice(i,1,...l)}if(n.padWithNoOps){const n=t.length-s.originalOperationsACount,r=e.length-s.originalOperationsBCount;ud(t,r-n),ud(e,n-r)}return dd(t,s.nextBaseVersionB),dd(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:i}}class ld{constructor(t,e,n=!1){this.originalOperations=new Map,this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(t,e=null){const n=e?this.originalOperations.get(e):null;for(const e of t)this.originalOperations.set(e,n||e)}updateRelation(t,e){if(t instanceof ql)e instanceof td?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof ql&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof ed){if(e instanceof td)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof ql)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{const n=vc._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const r=n.end.offset-t.splitPosition.offset,i=t.splitPosition.offset-n.start.offset;this._setRelation(t,e,{howMany:r,offset:i})}}}else if(t instanceof td)e instanceof td?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof ed&&t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource");else if(t instanceof Gl){const n=t.newRange;if(!n)return;if(e instanceof ql){const r=vc._createFromPositionAndShift(e.sourcePosition,e.howMany),i=r.containsPosition(n.start)||r.start.isEqual(n.start),o=r.containsPosition(n.end)||r.end.isEqual(n.end);!i&&!o||r.containsRange(n)||this._setRelation(t,e,{side:i?"left":"right",path:i?n.start.path.slice():n.end.path.slice()})}else if(e instanceof td){const r=n.start.isEqual(e.targetPosition),i=n.start.isEqual(e.deletionPosition),o=n.end.isEqual(e.deletionPosition),s=n.end.isEqual(e.sourcePosition);(r||i||o||s)&&this._setRelation(t,e,{wasInLeftElement:r,wasStartBeforeMergedElement:i,wasEndBeforeMergedElement:o,wasInRightElement:s})}}}getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(t){const e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}_getRelation(t,e){const n=this.originalOperations.get(e),r=this._history.getUndoneOperation(n);if(!r)return null;const i=this.originalOperations.get(t),o=this._relations.get(i);return o&&o.get(r)||null}_setRelation(t,e,n){const r=this.originalOperations.get(t),i=this.originalOperations.get(e);let o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(i,n)}}function dd(t,e){for(const n of t)n.baseVersion=e++}function ud(t,e){for(let n=0;n<e;n++)t.push(new Ql(0))}function hd(t,e,n){const r=t.nodes.getNode(0).getAttribute(e);if(r==n)return null;const i=new vc(t.position,t.position.getShiftedBy(t.howMany));return new Kl(i,e,r,n,0)}function gd(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function fd(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=new ql(i.start,i.end.offset-i.start.offset,e,0);n.push(o);for(let e=r+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}od(Kl,Kl,((t,e,n)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const r=t.range.getDifference(e.range).map((e=>new Kl(e,t.key,t.oldValue,t.newValue,0))),i=t.range.getIntersection(e.range);return i&&n.aIsStrong&&r.push(new Kl(i,e.key,e.newValue,t.newValue,0)),0==r.length?[new Ql(0)]:r}return[t]})),od(Kl,Yl,((t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map((e=>new Kl(e,t.key,t.oldValue,t.newValue,t.baseVersion)));if(e.shouldReceiveAttributes){const r=hd(e,t.key,t.oldValue);r&&n.unshift(r)}return n}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]})),od(Kl,td,((t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(vc._createFromPositionAndShift(e.graveyardPosition,1));const r=t.range._getTransformedByMergeOperation(e);return r.isCollapsed||n.push(r),n.map((e=>new Kl(e,t.key,t.oldValue,t.newValue,t.baseVersion)))})),od(Kl,ql,((t,e)=>{const n=function(t,e){const n=vc._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];n.containsRange(t,!0)?r=t:t.start.hasSameParentAs(n.start)?(i=t.getDifference(n),r=t.getIntersection(n)):i=[t];const o=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const n=e.getMovedRangeStart(),r=t.start.hasSameParentAs(n),i=t._getTransformedByInsertion(n,e.howMany,r);o.push(...i)}r&&o.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]);return o}(t.range,e);return n.map((e=>new Kl(e,t.key,t.oldValue,t.newValue,t.baseVersion)))})),od(Kl,ed,((t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new vc(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]})),od(Yl,Kl,((t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const r=hd(t,e.key,e.newValue);r&&n.push(r)}return n})),od(Yl,Yl,((t,e,n)=>(t.position.isEqual(e.position)&&n.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t]))),od(Yl,ql,((t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t]))),od(Yl,ed,((t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t]))),od(Yl,td,((t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t]))),od(Gl,Yl,((t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t]))),od(Gl,Gl,((t,e,n)=>{if(t.name==e.name){if(!n.aIsStrong)return[new Ql(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]})),od(Gl,td,((t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t]))),od(Gl,ql,((t,e,n)=>{if(t.oldRange&&(t.oldRange=vc._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(n.abRelation){const r=vc._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.end=r.end,t.newRange.start.path=n.abRelation.path,[t];if("right"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=r.start,t.newRange.end.path=n.abRelation.path,[t]}t.newRange=vc._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]})),od(Gl,ed,((t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const r=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?t.newRange.start=mc._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!n.abRelation.wasInLeftElement&&(t.newRange.start=mc._createAt(e.moveTargetPosition)),t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasInRightElement?t.newRange.end=mc._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?t.newRange.end=mc._createAt(e.insertionPosition):t.newRange.end=r.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]})),od(td,Yl,((t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t]))),od(td,td,((t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){const n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new mc(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new Ql(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const r="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=e.targetPosition._getTransformedByMergeOperation(e),r=t.targetPosition._getTransformedByMergeOperation(e);return[new ql(n,t.howMany,r,0)]}return[new Ql(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]})),od(td,ql,((t,e,n)=>{const r=vc._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&!n.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition)?[new Ql(0)]:(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])})),od(td,ed,((t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){const r=0!=e.howMany,i=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(r||i||"mergeTargetNotMoved"==n.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]})),od(ql,Yl,((t,e)=>{const n=vc._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=n.start,t.howMany=n.end.offset-n.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]})),od(ql,ql,((t,e,n)=>{const r=vc._createFromPositionAndShift(t.sourcePosition,t.howMany),i=vc._createFromPositionAndShift(e.sourcePosition,e.howMany);let o,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),o=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),gd(t,e)&&gd(e,t))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),fd([r],o);if(i.containsPosition(t.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),fd([r],o);const c=K(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),fd([r],o);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;const l=[],d=r.getDifference(i);for(const t of d){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const n="same"==K(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),r=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,n);l.push(...r)}const u=r.getIntersection(i);return null!==u&&s&&(u.start=u.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),u.end=u.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(u):1==l.length?i.start.isBefore(r.start)||i.start.isEqual(r.start)?l.unshift(u):l.push(u):l.splice(1,0,u)),0===l.length?[new Ql(t.baseVersion)]:fd(l,o)})),od(ql,ed,((t,e,n)=>{let r=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(r=t.targetPosition._getTransformedBySplitOperation(e));const i=vc._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=r,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new vc(e.splitPosition,i.end);t=t._getTransformedBySplitOperation(e);return fd([new vc(i.start,e.splitPosition),t],r)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(r=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(r=t.targetPosition);const o=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const r=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&r&&!n.aWasUndone&&o.push(vc._createFromPositionAndShift(e.insertionPosition,1))}return fd(o,r)})),od(ql,td,((t,e,n)=>{const r=vc._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Ql(0)]}else if(!n.aWasUndone){const n=[];let r=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(n.push(new ql(t.sourcePosition,t.howMany-1,t.targetPosition,0)),r=r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),s=new ql(r,1,o,0),a=s.getMovedRangeStart().path.slice();a.push(0);const c=new mc(s.targetPosition.root,a);i=i._getTransformedByMove(r,o,1);const l=new ql(i,e.howMany,c,0);return n.push(s),n.push(l),n}const i=vc._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]})),od(Xl,Yl,((t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t]))),od(Xl,td,((t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t]))),od(Xl,ql,((t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t]))),od(Xl,Xl,((t,e,n)=>{if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new Ql(0)];t.oldName=e.newName}return[t]})),od(Xl,ed,((t,e)=>{if("same"==K(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new Xl(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]})),od(Jl,Jl,((t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Ql(0)];t.oldValue=e.newValue}return[t]})),od(ed,Yl,((t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t]))),od(ed,td,((t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const n=e.graveyardPosition.path.slice();n.push(0);const r=new mc(e.graveyardPosition.root,n),i=ed.getInsertionPosition(new mc(e.graveyardPosition.root,n)),o=new ed(r,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=ed.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=ed.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]})),od(ed,ql,((t,e,n)=>{const r=vc._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&i){const n=t.splitPosition._getTransformedByMoveOperation(e),r=t.graveyardPosition._getTransformedByMoveOperation(e),i=r.path.slice();i.push(0);const o=new mc(r.root,i);return[new ql(n,t.howMany,o,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=ed.getInsertionPosition(t.splitPosition),[t];if(i&&n.abRelation&&n.abRelation.howMany){const{howMany:e,offset:r}=n.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(r),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.splitPosition)){const n=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=n,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=ed.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=ed.getInsertionPosition(t.splitPosition),[t]})),od(ed,ed,((t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Ql(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Ql(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const r="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=[];return e.howMany&&n.push(new ql(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&n.push(new ql(t.splitPosition,t.howMany,t.moveTargetPosition,0)),n}return[new Ql(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){const n=e.insertionPosition.path.slice();n.push(0);const r=new mc(e.insertionPosition.root,n);return[t,new ql(t.insertionPosition,1,r,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=ed.getInsertionPosition(t.splitPosition),[t]}));class pd extends(T(mc)){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new b("model-liveposition-root-not-rootelement",t);md.call(this)}detach(){this.stopListening()}toPosition(){return new mc(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}function md(){this.listenTo(this.root.document.model,"applyOperation",((t,e)=>{const n=e[0];n.isDocumentOperation&&bd.call(this,n)}),{priority:"low"})}function bd(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}pd.prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};class kd{constructor(t={}){"string"==typeof t&&(t="transparent"===t?{isUndoable:!1}:{},k("batch-constructor-deprecated-string-type"));const{isUndoable:e=!0,isLocal:n=!0,isUndo:r=!1,isTyping:i=!1}=t;this.operations=[],this.isUndoable=e,this.isLocal=n,this.isUndo=r,this.isTyping=i}get type(){return k("batch-type-deprecated"),"default"}get baseVersion(){for(const t of this.operations)if(null!==t.baseVersion)return t.baseVersion;return null}addOperation(t){return t.batch=this,this.operations.push(t),t}}class wd{constructor(t){this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}bufferOperation(t){const e=t;switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=vc._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getData();this.bufferMarkerChange(e.name,t,t)}break}case"split":{const t=e.splitPosition.parent;this._isInInsertedElement(t)||this._markRemove(t,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1);const r=e.targetPosition.parent;this._isInInsertedElement(r)||this._markInsert(r,e.targetPosition.offset,t.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){const r=this._changedMarkers.get(t);r?(r.newMarkerData=n,null==r.oldMarkerData.range&&null==n.range&&this._changedMarkers.delete(t)):this._changedMarkers.set(t,{newMarkerData:n,oldMarkerData:e})}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.oldMarkerData.range&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)null!=n.newMarkerData.range&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map((([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}})))}hasDataChanges(){if(this._changesInElement.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,r=!t.range&&e.range,i=t.range&&e.range&&!t.range.isEqual(e.range);if(n||r||i)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const t of this._changesInElement.keys()){const n=this._changesInElement.get(t).sort(((t,e)=>t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1)),r=this._elementSnapshots.get(t),i=yd(t.getChildren()),o=_d(r.length,n);let s=0,a=0;for(const n of o)if("i"===n)e.push(this._getInsertDiff(t,s,i[s])),s++;else if("r"===n)e.push(this._getRemoveDiff(t,s,r[a])),a++;else if("a"===n){const n=i[s].attributes,o=r[a].attributes;let c;if("$text"==i[s].name)c=new vc(mc._createAt(t,s),mc._createAt(t,s+1));else{const e=t.offsetToIndex(s);c=new vc(mc._createAt(t,s),mc._createAt(t.getChild(e),0))}e.push(...this._getAttributesDiff(c,o,n)),s++,a++}else s++,a++}e.sort(((t,e)=>t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1));for(let t=1,n=0;t<e.length;t++){const r=e[n],i=e[t],o="remove"==r.type&&"remove"==i.type&&"$text"==r.name&&"$text"==i.name&&r.position.isEqual(i.position),s="insert"==r.type&&"insert"==i.type&&"$text"==r.name&&"$text"==i.name&&r.position.parent==i.position.parent&&r.position.offset+r.length==i.position.offset,a="attribute"==r.type&&"attribute"==i.type&&r.position.parent==i.position.parent&&r.range.isFlat&&i.range.isFlat&&r.position.offset+r.length==i.position.offset&&r.attributeKey==i.attributeKey&&r.attributeOldValue==i.attributeOldValue&&r.attributeNewValue==i.attributeNewValue;o||s||a?(r.length++,a&&(r.range.end=r.range.end.getShiftedBy(1)),e[t]=null):n=t}e=e.filter((t=>t));for(const t of e)delete t.changeCount,"attribute"==t.type&&(delete t.position,delete t.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(vd),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t);const e=vc._createOn(t);for(const t of this._markerCollection.getMarkersIntersectingRange(e)){const e=t.getData();this.bufferMarkerChange(t.name,e,e)}this._cachedChanges=null}_markInsert(t,e,n){const r={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r)}_markRemove(t,e,n){const r={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,r),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshot(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let t=0;t<n.length;t++)n[t].howMany<1&&(n.splice(t,1),t--)}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,yd(t.getChildren()))}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const r=t.offset+t.howMany,i=n.offset+n.howMany;if("insert"==t.type&&("insert"==n.type&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<i&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==n.type&&t.offset<n.offset&&(n.offset+=t.howMany),"attribute"==n.type))if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<i){const i=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:r,howMany:i-n.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(r<=i)if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e,t.nodesToHandle-=e}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<i){const e=i-t.offset;n.howMany-=e,t.nodesToHandle-=e}if("remove"==n.type&&(r<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(r<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const e=r-n.offset;n.offset=t.offset,n.howMany-=e}else if(t.offset<i)if(r<=i){const r=n.howMany;n.howMany=t.offset-n.offset;const i=r-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:i,count:this._changeCount++})}else n.howMany-=i-t.offset}if("attribute"==t.type){if("insert"==n.type)if(t.offset<n.offset&&r>n.offset){if(r>i){const t={type:"attribute",offset:i,howMany:r-i,count:this._changeCount++};this._handleChange(t,e),e.push(t)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<i&&(r>i?(t.nodesToHandle=r-i,t.offset=i):t.nodesToHandle=0);if("remove"==n.type&&t.offset<n.offset&&r>n.offset){const i={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(i,e),e.push(i),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==n.type&&(t.offset>=n.offset&&r<=i?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&r>=i&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n){return{type:"insert",position:mc._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(t,e,n){return{type:"remove",position:mc._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(t,e,n){const r=[];n=new Map(n);for(const[i,o]of e){const e=n.has(i)?n.get(i):null;e!==o&&r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:i,attributeOldValue:o,attributeNewValue:e,changeCount:this._changeCount++}),n.delete(i)}for(const[e,i]of n)r.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:e,attributeOldValue:null,attributeNewValue:i,changeCount:this._changeCount++});return r}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),r=t.startOffset;if(n)for(const t of n)if("insert"==t.type&&r>=t.offset&&r<t.offset+t.howMany)return!0;return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const r=new vc(mc._createAt(t,e),mc._createAt(t,e+n));for(const t of r.getItems({shallow:!0}))t.is("element")&&(this._elementSnapshots.delete(t),this._changesInElement.delete(t),this._removeAllNestedChanges(t,0,t.maxOffset))}}function yd(t){const e=[];for(const n of t)if(n.is("$text"))for(let t=0;t<n.data.length;t++)e.push({name:"$text",attributes:new Map(n.getAttributes())});else e.push({name:n.name,attributes:new Map(n.getAttributes())});return e}function _d(t,e){const n=[];let r=0,i=0;for(const t of e){if(t.offset>r){for(let e=0;e<t.offset-r;e++)n.push("e");i+=t.offset-r}if("insert"==t.type){for(let e=0;e<t.howMany;e++)n.push("i");r=t.offset+t.howMany}else if("remove"==t.type){for(let e=0;e<t.howMany;e++)n.push("r");r=t.offset,i+=t.howMany}else n.push(..."a".repeat(t.howMany).split("")),r=t.offset+t.howMany,i+=t.howMany}if(i<t)for(let e=0;e<t-i-r;e++)n.push("e");return n}function vd(t){const e="position"in t&&"$graveyard"==t.position.root.rootName,n="range"in t&&"$graveyard"==t.range.root.rootName;return!e&&!n}class Ad{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new b("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];void 0===t&&(t=n.baseVersion);let r=e-1;for(const[e,n]of this._gaps)t>e&&t<n&&(t=n),r>e&&r<n&&(r=e-1);if(r<n.baseVersion||t>this.lastOperation.baseVersion)return[];let i=this._baseVersionToOperationIndex.get(t);void 0===i&&(i=0);let o=this._baseVersionToOperationIndex.get(r);return void 0===o&&(o=this._operations.length-1),this._operations.slice(i,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(void 0!==e)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class Cd extends gc{constructor(t,e,n="main"){super(e),this._document=t,this.rootName=n}get document(){return this._document}toJSON(){return this.rootName}}Cd.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t};const xd="$graveyard";class Ed extends(T()){constructor(t){super(),this.model=t,this.history=new Ad,this.selection=new zc(this),this.roots=new yi({idProperty:"rootName"}),this.differ=new wd(t.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",xd),this.listenTo(t,"applyOperation",((t,e)=>{const n=e[0];n.isDocumentOperation&&this.differ.bufferOperation(n)}),{priority:"high"}),this.listenTo(t,"applyOperation",((t,e)=>{const n=e[0];n.isDocumentOperation&&this.history.addOperation(n)}),{priority:"low"}),this.listenTo(this.selection,"change",(()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0})),this.listenTo(t.markers,"update",((t,e,n,r,i)=>{const o={...e.getData(),range:r};this.differ.bufferMarkerChange(e.name,i,o),null===n&&e.on("change",((t,n)=>{const r=e.getData();this.differ.bufferMarkerChange(e.name,{...r,range:n},r)}))}))}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(xd)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new b("model-document-createroot-name-exists",this,{name:e});const n=new Cd(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(){return Array.from(this.roots,(t=>t.rootName)).filter((t=>t!=xd))}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Gi(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const t of this.roots)if(t!==this.graveyard)return t;return this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,r=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(r)||e.createRange(r)}_validateSelectionRange(t){return Td(t.start)&&Td(t.end)}_callPostFixers(t){let e=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),e=n(t),e)break}while(e)}}function Td(t){const e=t.textNode;if(e){const n=e.data,r=t.offset-e.startOffset;return!xi(n,r)&&!Ei(n,r)}return!0}class Sd extends(T()){constructor(){super(),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){const e=t instanceof Dd?t.name:t;return this._markers.has(e)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,r=!1){const i=t instanceof Dd?t.name:t;if(i.includes(","))throw new b("markercollection-incorrect-marker-name",this);const o=this._markers.get(i);if(o){const t=o.getData(),s=o.getRange();let a=!1;return s.isEqual(e)||(o._attachLiveRange(Nc.fromRange(e)),a=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,a=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,a=!0),a&&this.fire(`update:${i}`,o,s,e,t),o}const s=Nc.fromRange(e),a=new Dd(i,s,n,r);return this._markers.set(i,a),this.fire(`update:${i}`,a,null,e,{...a.getData(),range:null}),a}_remove(t){const e=t instanceof Dd?t.name:t,n=this._markers.get(e);return!!n&&(this._markers.delete(e),this.fire(`update:${e}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0)}_refresh(t){const e=t instanceof Dd?t.name:t,n=this._markers.get(e);if(!n)throw new b("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire(`update:${e}`,n,r,r,n.getData())}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)null!==e.getRange().getIntersection(t)&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class Dd extends(T(cc)){constructor(t,e,n,r){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new b("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new b("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new b("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new b("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new b("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Dd.prototype.is=function(t){return"marker"===t||"model:marker"===t};class Md extends zl{constructor(t,e){super(null),this.sourcePosition=t.clone(),this.howMany=e}get type(){return"detach"}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new b("detach-operation-on-document-node",this)}_execute(){jl(vc._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Id extends cc{constructor(t){super(),this.markers=new Map,this._children=new dc,t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)n.name?e.push(gc.fromJSON(n)):e.push(uc.fromJSON(n));return new Id(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=function(t){if("string"==typeof t)return[new uc(t)];Q(t)||(t=[t]);return Array.from(t).map((t=>"string"==typeof t?new uc(t):t instanceof hc?new uc(t.data,t.getAttributes()):t))}(e);for(const t of n)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const t of n)t.parent=null;return n}}Id.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t};class Bd{constructor(t,e){this.model=t,this.batch=e}createText(t,e){return new uc(t,e)}createElement(t,e){return new gc(t,e)}createDocumentFragment(){return new Id}cloneElement(t,e=!0){return t._clone(e)}insert(t,e,n=0){if(this._assertWriterUsedCorrectly(),t instanceof uc&&""==t.data)return;const r=mc._createAt(e,n);if(t.parent){if(Rd(t.root,r.root))return void this.move(vc._createOn(t),r);if(t.root.document)throw new b("model-writer-insert-forbidden-move",this);this.remove(t)}const i=r.root.document?r.root.document.version:null,o=new Yl(r,t,i);if(t instanceof uc&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),t instanceof Id)for(const[e,n]of t.markers){const t=mc._createAt(n.root,0),i={range:new vc(n.start._getCombined(t,r),n.end._getCombined(t,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(e)?this.updateMarker(e,i):this.addMarker(e,i)}}insertText(t,e,n,r){e instanceof Id||e instanceof gc||e instanceof mc?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,r)}insertElement(t,e,n,r){e instanceof Id||e instanceof gc||e instanceof mc?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,r)}append(t,e){this.insert(t,e,"end")}appendText(t,e,n){e instanceof Id||e instanceof gc?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end")}appendElement(t,e,n){e instanceof Id||e instanceof gc?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end")}setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof vc){const r=n.getMinimalFlatRanges();for(const n of r)Ld(this,t,e,n)}else Nd(this,t,e,n)}setAttributes(t,e){for(const[n,r]of Ci(t))this.setAttribute(n,r,e)}removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof vc){const n=e.getMinimalFlatRanges();for(const e of n)Ld(this,t,null,e)}else Nd(this,t,null,e)}clearAttributes(t){this._assertWriterUsedCorrectly();const e=t=>{for(const e of t.getAttributeKeys())this.removeAttribute(e,t)};if(t instanceof vc)for(const n of t.getItems())e(n);else e(t)}move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof vc))throw new b("writer-move-invalid-range",this);if(!t.isFlat)throw new b("writer-move-range-not-flat",this);const r=mc._createAt(e,n);if(r.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!Rd(t.root,r.root))throw new b("writer-move-different-document",this);const i=t.root.document?t.root.document.version:null,o=new ql(t.start,t.end.offset-t.start.offset,r,i);this.batch.addOperation(o),this.model.applyOperation(o)}remove(t){this._assertWriterUsedCorrectly();const e=(t instanceof vc?t:vc._createOn(t)).getMinimalFlatRanges().reverse();for(const t of e)this._addOperationForAffectedMarkers("move",t),Pd(t.start,t.end.offset-t.start.offset,this.batch,this.model)}merge(t){this._assertWriterUsedCorrectly();const e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof gc))throw new b("writer-merge-no-element-before",this);if(!(n instanceof gc))throw new b("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n)}createPositionAt(t,e){return this.model.createPositionAt(t,e)}createPositionAfter(t){return this.model.createPositionAfter(t)}createPositionBefore(t){return this.model.createPositionBefore(t)}createRange(t,e){return this.model.createRange(t,e)}createRangeIn(t){return this.model.createRangeIn(t)}createRangeOn(t){return this.model.createRangeOn(t)}createSelection(...t){return this.model.createSelection(...t)}_mergeDetached(t){const e=t.nodeBefore,n=t.nodeAfter;this.move(vc._createIn(n),mc._createAt(e,"end")),this.remove(n)}_merge(t){const e=mc._createAt(t.nodeBefore,"end"),n=mc._createAt(t.nodeAfter,0),r=t.root.document.graveyard,i=new mc(r,[0]),o=t.root.document.version,s=new td(n,t.nodeAfter.maxOffset,e,i,o);this.batch.addOperation(s),this.model.applyOperation(s)}rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof gc))throw new b("writer-rename-not-element-instance",this);const n=t.root.document?t.root.document.version:null,r=new Xl(mc._createBefore(t),t.name,e,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(t,e){this._assertWriterUsedCorrectly();let n,r,i=t.parent;if(!i.parent)throw new b("writer-split-element-no-parent",this);if(e||(e=i.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new b("writer-split-invalid-limit-element",this);do{const e=i.root.document?i.root.document.version:null,o=i.maxOffset-t.offset,s=ed.getInsertionPosition(t),a=new ed(t,o,s,null,e);this.batch.addOperation(a),this.model.applyOperation(a),n||r||(n=i,r=t.parent.nextSibling),i=(t=this.createPositionAfter(t.parent)).parent}while(i!==e);return{position:t,range:new vc(mc._createAt(n,"end"),mc._createAt(r,0))}}wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new b("writer-wrap-range-not-flat",this);const n=e instanceof gc?e:new gc(e);if(n.childCount>0)throw new b("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new b("writer-wrap-element-attached",this);this.insert(n,t.start);const r=new vc(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(r,mc._createAt(n,0))}unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new b("writer-unwrap-element-no-parent",this);this.move(vc._createIn(t),this.createPositionAfter(t)),this.remove(t)}addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new b("writer-addmarker-no-usingoperation",this);const n=e.usingOperation,r=e.range,i=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new b("writer-addmarker-marker-exists",this);if(!r)throw new b("writer-addmarker-no-range",this);return n?(Od(this,t,null,r,i),this.model.markers.get(t)):this.model.markers._set(t,r,n,i)}updateMarker(t,e){this._assertWriterUsedCorrectly();const n="string"==typeof t?t:t.name,r=this.model.markers.get(n);if(!r)throw new b("writer-updatemarker-marker-not-exists",this);if(!e)return k("writer-updatemarker-reconvert-using-editingcontroller",{markerName:n}),void this.model.markers._refresh(r);const i="boolean"==typeof e.usingOperation,o="boolean"==typeof e.affectsData,s=o?e.affectsData:r.affectsData;if(!i&&!e.range&&!o)throw new b("writer-updatemarker-wrong-options",this);const a=r.getRange(),c=e.range?e.range:a;i&&e.usingOperation!==r.managedUsingOperations?e.usingOperation?Od(this,n,null,c,s):(Od(this,n,a,null,s),this.model.markers._set(n,c,void 0,s)):r.managedUsingOperations?Od(this,n,a,c,s):this.model.markers._set(n,c,void 0,s)}removeMarker(t){this._assertWriterUsedCorrectly();const e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new b("writer-removemarker-no-marker",this);const n=this.model.markers.get(e);if(!n.managedUsingOperations)return void this.model.markers._remove(e);Od(this,e,n.getRange(),null,n.affectsData)}setSelection(...t){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...t)}setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else for(const[e,n]of Ci(t))this._setSelectionAttribute(e,n)}removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else for(const e of t)this._removeSelectionAttribute(e)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t)}_setSelectionAttribute(t,e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=zc._getStoreAttributeKey(t);this.setAttribute(r,e,n.anchor.parent)}n._setAttribute(t,e)}_removeSelectionAttribute(t){const e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){const n=zc._getStoreAttributeKey(t);this.removeAttribute(n,e.anchor.parent)}e._removeAttribute(t)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new b("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,e){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let i=!1;if("move"===t){const t=e;i=t.containsPosition(r.start)||t.start.isEqual(r.start)||t.containsPosition(r.end)||t.end.isEqual(r.end)}else{const t=e,n=t.nodeBefore,o=t.nodeAfter,s=r.start.parent==n&&r.start.isAtEnd,a=r.end.parent==o&&0==r.end.offset,c=r.end.nodeAfter==o,l=r.start.nodeAfter==o;i=s||a||c||l}i&&this.updateMarker(n.name,{range:r})}}}function Ld(t,e,n,r){const i=t.model,o=i.document;let s,a,c,l=r.start;for(const t of r.getWalker({shallow:!0}))c=t.item.getAttribute(e),s&&a!=c&&(a!=n&&d(),l=s),s=t.nextPosition,a=c;function d(){const r=new vc(l,s),c=r.root.document?o.version:null,d=new Kl(r,e,a,n,c);t.batch.addOperation(d),i.applyOperation(d)}s instanceof mc&&s!=l&&a!=n&&d()}function Nd(t,e,n,r){const i=t.model,o=i.document,s=r.getAttribute(e);let a,c;if(s!=n){if(r.root===r){const t=r.document?o.version:null;c=new Jl(r,e,s,n,t)}else{a=new vc(mc._createBefore(r),t.createPositionAfter(r));const i=a.root.document?o.version:null;c=new Kl(a,e,s,n,i)}t.batch.addOperation(c),i.applyOperation(c)}}function Od(t,e,n,r,i){const o=t.model,s=o.document,a=new Gl(e,n,r,o.markers,!!i,s.version);t.batch.addOperation(a),o.applyOperation(a)}function Pd(t,e,n,r){let i;if(t.root.document){const n=r.document,o=new mc(n.graveyard,[0]);i=new ql(t,e,o,n.version)}else i=new Md(t,e);n.addOperation(i),r.applyOperation(i)}function Rd(t,e){return t===e||t instanceof Cd&&e instanceof Cd}function zd(t){t.document.registerPostFixer((e=>function(t,e){const n=e.document.selection,r=e.schema,i=[];let o=!1;for(const t of n.getRanges()){const e=Fd(t,r);e&&!e.isEqual(t)?(i.push(e),o=!0):i.push(t)}o&&t.setSelection(function(t){const e=[...t],n=new Set;let r=1;for(;r<e.length;){const t=e[r],i=e.slice(0,r);for(const[o,s]of i.entries())if(!n.has(o))if(t.isEqual(s))n.add(o);else if(t.isIntersecting(s)){n.add(o),n.add(r);const i=t.getJoined(s);e.push(i)}r++}return e.filter(((t,e)=>!n.has(e)))}(i),{backward:n.isBackward});return!1}(e,t)))}function Fd(t,e){return t.isCollapsed?function(t,e){const n=t.start,r=e.getNearestSelectionRange(n);if(!r){const t=n.getAncestors().reverse().find((t=>e.isObject(t)));return t?vc._createOn(t):null}if(!r.isCollapsed)return r;const i=r.start;if(n.isEqual(i))return null;return new vc(i)}(t,e):function(t,e){const{start:n,end:r}=t,i=e.checkChild(n,"$text"),o=e.checkChild(r,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(r);if(s===a){if(i&&o)return null;if(function(t,e,n){const r=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),i=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return r||i}(n,r,e)){const t=n.nodeAfter&&e.isSelectable(n.nodeAfter)?null:e.getNearestSelectionRange(n,"forward"),i=r.nodeBefore&&e.isSelectable(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward"),o=t?t.start:n,s=i?i.end:r;return new vc(o,s)}}const c=s&&!s.is("rootElement"),l=a&&!a.is("rootElement");if(c||l){const t=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,i=c&&(!t||!Vd(n.nodeAfter,e)),o=l&&(!t||!Vd(r.nodeBefore,e));let d=n,u=r;return i&&(d=mc._createBefore(jd(s,e))),o&&(u=mc._createAfter(jd(a,e))),new vc(d,u)}return null}(t,e)}function jd(t,e){let n=t,r=n;for(;e.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function Vd(t,e){return t&&e.isSelectable(t)}function $d(t,e,n={}){if(e.isCollapsed)return;const r=e.getFirstRange();if("$graveyard"==r.root.rootName)return;const i=t.schema;t.change((t=>{if(!n.doNotResetEntireContent&&function(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const r=e.getFirstRange();if(r.start.parent==r.end.parent)return!1;return t.checkChild(n,"paragraph")}(i,e))return void function(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),qd(t,t.createPositionAt(n,0),e)}(t,e);const o={};if(!n.doNotAutoparagraph){const t=e.getSelectedElement();t&&Object.assign(o,i.getAttributesWithProperty(t,"copyOnReplace",!0))}const[s,a]=function(t){const e=t.root.document.model,n=t.start;let r=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){const n=function(t){const e=t.parent,n=e.root.document.model.schema,r=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const t of r){if(n.isLimit(t))return null;if(n.isBlock(t))return t}}(r);if(n&&r.isTouching(e.createPositionAt(n,0))){const n=e.createSelection(t);e.modifySelection(n,{direction:"backward"});const i=n.getLastPosition(),o=e.createRange(i,r);e.hasContent(o,{ignoreMarkers:!0})||(r=i)}}return[pd.fromPosition(n,"toPrevious"),pd.fromPosition(r,"toNext")]}(r);s.isTouching(a)||t.remove(t.createRange(s,a)),n.leaveUnmerged||(!function(t,e,n){const r=t.model;if(!Wd(t.model.schema,e,n))return;const[i,o]=function(t,e){const n=t.getAncestors(),r=e.getAncestors();let i=0;for(;n[i]&&n[i]==r[i];)i++;return[n[i],r[i]]}(e,n);if(!i||!o)return;!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(o,{ignoreMarkers:!0})?Ud(t,e,n,i.parent):Hd(t,e,n,i.parent)}(t,s,a),i.removeDisallowedAttributes(s.parent.getChildren(),t)),Yd(t,e,s),!n.doNotAutoparagraph&&function(t,e){const n=t.checkChild(e,"$text"),r=t.checkChild(e,"paragraph");return!n&&r}(i,s)&&qd(t,s,e,o),s.detach(),a.detach()}))}function Hd(t,e,n,r){const i=e.parent,o=n.parent;if(i!=r&&o!=r){for(e=t.createPositionAfter(i),(n=t.createPositionBefore(o)).isEqual(e)||t.insert(o,e),t.merge(e);n.parent.isEmpty;){const e=n.parent;n=t.createPositionBefore(e),t.remove(e)}Wd(t.model.schema,e,n)&&Hd(t,e,n,r)}}function Ud(t,e,n,r){const i=e.parent,o=n.parent;if(i!=r&&o!=r){for(e=t.createPositionAfter(i),(n=t.createPositionBefore(o)).isEqual(e)||t.insert(i,n);e.parent.isEmpty;){const n=e.parent;e=t.createPositionBefore(n),t.remove(n)}n=t.createPositionBefore(o),function(t,e){const n=e.nodeBefore,r=e.nodeAfter;n.name!=r.name&&t.rename(n,r.name);t.clearAttributes(n),t.setAttributes(Object.fromEntries(r.getAttributes()),n),t.merge(e)}(t,n),Wd(t.model.schema,e,n)&&Ud(t,e,n,r)}}function Wd(t,e,n){const r=e.parent,i=n.parent;return r!=i&&(!t.isLimit(r)&&!t.isLimit(i)&&function(t,e,n){const r=new vc(t,e);for(const t of r.getWalker())if(n.isLimit(t.item))return!1;return!0}(e,n,t))}function qd(t,e,n,r={}){const i=t.createElement("paragraph");t.model.schema.setAllowedAttributes(i,r,t),t.insert(i,e),Yd(t,n,t.createPositionAt(i,0))}function Yd(t,e,n){e instanceof zc?t.setSelection(n):e.setTo(n)}function Gd(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map((t=>e.createRangeOn(t))).filter((e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end)))).forEach((t=>{n.push(t.start.parent),e.remove(t)})),n.forEach((t=>{let n=t;for(;n.parent&&n.isEmpty;){const t=e.createRangeOn(n);n=n.parent,e.remove(t)}}))}class Zd{constructor(t,e,n){this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._documentFragment=e.createDocumentFragment(),this._documentFragmentPosition=e.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(t){for(const e of Array.from(t))this._handleNode(e);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(t){const e=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(t);if(n.isAfter(e)){if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new b("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?vc._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new vc(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(t){if(this.schema.isObject(t))return void this._handleObject(t);let e=this._checkAndAutoParagraphToAllowedPosition(t);e||(e=this._checkAndSplitToAllowedPosition(t),e)?(this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this._handleDisallowedNode(t)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const t=pd.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}_handleObject(t){this._checkAndSplitToAllowedPosition(t)?this._appendToFragment(t):this._tryAutoparagraphing(t)}_handleDisallowedNode(t){t.is("element")?this.handleNodes(t.getChildren()):this._tryAutoparagraphing(t)}_appendToFragment(t){if(!this.schema.checkChild(this.position,t))throw new b("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}_setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=pd.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=pd.fromPosition(t,"toNext"))}_mergeOnLeft(){const t=this._firstNode;if(!(t instanceof gc))return;if(!this._canMergeLeft(t))return;const e=pd._createBefore(t);e.stickiness="toNext";const n=pd.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=pd._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=pd._createAt(e.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_mergeOnRight(){const t=this._lastNode;if(!(t instanceof gc))return;if(!this._canMergeRight(t))return;const e=pd._createAfter(t);if(e.stickiness="toNext",!this.position.isEqual(e))throw new b("insertcontent-invalid-insertion-position",this);this.position=mc._createAt(e.nodeBefore,"end");const n=pd.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=pd._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=pd._createAt(e.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}_canMergeLeft(t){const e=t.previousSibling;return e instanceof gc&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}_canMergeRight(t){const e=t.nextSibling;return e instanceof gc&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}_tryAutoparagraphing(t){const e=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,e)&&this.schema.checkChild(e,t)&&(e._appendChild(t),this._handleNode(e))}_checkAndAutoParagraphToAllowedPosition(t){if(this.schema.checkChild(this.position.parent,t))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",t))return!1;this._insertPartialFragment();const e=this.writer.createElement("paragraph");return this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0),!0}_checkAndSplitToAllowedPosition(t){const e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){const t=this.position.parent;this.position=this.writer.createPositionBefore(t),t.isEmpty&&t.parent===e&&this.writer.remove(t)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const t=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=t,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(t,e){return this.schema.checkChild(t,e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}function Kd(t,e,n="auto"){const r=t.getSelectedElement();if(r&&e.schema.isObject(r)&&!e.schema.isInline(r))return"before"==n||"after"==n?e.createRange(e.createPositionAt(r,n)):e.createRangeOn(r);const i=_i(t.getSelectedBlocks());if(!i)return e.createRange(t.focus);if(i.isEmpty)return e.createRange(e.createPositionAt(i,0));const o=e.createPositionAfter(i);return t.focus.isTouching(o)?e.createRange(o):e.createRange(e.createPositionBefore(i))}function Qd(t,e,n,r,i={}){if(!t.schema.isObject(e))throw new b("insertobject-element-not-an-object",t,{object:e});let o;o=n?n instanceof Dc||n instanceof zc?n:t.createSelection(n,r):t.document.selection;let s=o;i.findOptimalPosition&&t.schema.isBlock(e)&&(s=t.createSelection(Kd(o,t,i.findOptimalPosition)));const a=_i(o.getSelectedBlocks()),c={};return a&&Object.assign(c,t.schema.getAttributesWithProperty(a,"copyOnReplace",!0)),t.change((n=>{s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0});let r=e;const o=s.anchor.parent;!t.schema.checkChild(o,e)&&t.schema.checkChild(o,"paragraph")&&t.schema.checkChild("paragraph",e)&&(r=n.createElement("paragraph"),n.insert(e,r)),t.schema.setAllowedAttributes(r,c,n);const a=t.insertContent(r,s);return a.isCollapsed||i.setSelection&&function(t,e,n,r){const i=t.model;if("after"==n){let n=e.nextSibling;!(n&&i.schema.checkChild(n,"$text"))&&i.schema.checkChild(e.parent,"paragraph")&&(n=t.createElement("paragraph"),i.schema.setAllowedAttributes(n,r,t),i.insertContent(n,t.createPositionAfter(e))),n&&t.setSelection(n,0)}else{if("on"!=n)throw new b("insertobject-invalid-place-parameter-value",i);t.setSelection(e,"on")}}(n,e,i.setSelection,c),a}))}function Xd(t,e){const{isForward:n,walker:r,unit:i,schema:o,treatEmojiAsSingleUnit:s}=t,{type:a,item:c,nextPosition:l}=e;if("text"==a)return"word"===t.unit?function(t,e){let n=t.position.textNode;n||(n=e?t.position.nodeAfter:t.position.nodeBefore);for(;n&&n.is("$text");){const r=t.position.offset-n.startOffset;if(eu(n,r,e))n=e?t.position.nodeAfter:t.position.nodeBefore;else{if(tu(n.data,r,e))break;t.next()}}return t.position}(r,n):function(t,e,n){const r=t.position.textNode;if(r){const i=r.data;let o=t.position.offset-r.startOffset;for(;xi(i,o)||"character"==e&&Ei(i,o)||n&&Si(i,o);)t.next(),o=t.position.offset-r.startOffset}return t.position}(r,i,s);if(a==(n?"elementStart":"elementEnd")){if(o.isSelectable(c))return mc._createAt(c,n?"after":"before");if(o.checkChild(l,"$text"))return l}else{if(o.isLimit(c))return void r.skip((()=>!0));if(o.checkChild(l,"$text"))return l}}function Jd(t,e){const n=t.root,r=mc._createAt(n,e?"end":0);return e?new vc(t,r):new vc(r,t)}function tu(t,e,n){const r=e+(n?0:-1);return' ,.?!:;"-()'.includes(t.charAt(r))}function eu(t,e,n){return e===(n?t.offsetSize:0)}class nu extends($()){constructor(){super(),this.markers=new Sd,this.document=new Ed(this),this.schema=new ml,this._pendingChanges=[],this._currentWriter=null,["insertContent","insertObject","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((t=>this.decorate(t))),this.on("applyOperation",((t,e)=>{e[0]._validate()}),{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(((t,e)=>{if("$marker"===e.name)return!0})),zd(this),this.document.registerPostFixer(nl)}change(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new kd,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(t){b.rethrowUnexpectedError(t,this)}}enqueueChange(t,e){try{t?"function"==typeof t?(e=t,t=new kd):t instanceof kd||(t=new kd(t)):t=new kd,this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){b.rethrowUnexpectedError(t,this)}}applyOperation(t){t._execute()}insertContent(t,e,n){return function(t,e,n,r){return t.change((i=>{let o;o=n?n instanceof Dc||n instanceof zc?n:i.createSelection(n,r):t.document.selection,o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});const s=new Zd(t,i,o.anchor),a=[];let c;if(e.is("documentFragment")){if(e.markers.size){const t=[];for(const[n,r]of e.markers){const{start:e,end:i}=r,o=e.isEqual(i);t.push({position:e,name:n,isCollapsed:o},{position:i,name:n,isCollapsed:o})}t.sort((({position:t},{position:e})=>t.isBefore(e)?1:-1));for(const{position:n,name:r,isCollapsed:o}of t){let t=null,s=null;const c=n.parent===e&&n.isAtStart,l=n.parent===e&&n.isAtEnd;c||l?o&&(s=c?"start":"end"):(t=i.createElement("$marker"),i.insert(t,n)),a.push({name:r,element:t,collapsed:s})}}c=e.getChildren()}else c=[e];s.handleNodes(c);let l=s.getSelectionRange();if(e.is("documentFragment")&&a.length){const t=l?Nc.fromRange(l):null,e={};for(let t=a.length-1;t>=0;t--){const{name:n,element:r,collapsed:o}=a[t],c=!e[n];if(c&&(e[n]=[]),r){const t=i.createPositionAt(r,"before");e[n].push(t),i.remove(r)}else{const t=s.getAffectedRange();if(!t){o&&e[n].push(s.position);continue}o?e[n].push(t[o]):e[n].push(c?t.start:t.end)}}for(const[t,[n,r]]of Object.entries(e))n&&r&&n.root===r.root&&i.addMarker(t,{usingOperation:!0,affectsData:!0,range:new vc(n,r)});t&&(l=t.toRange(),t.detach())}l&&(o instanceof zc?i.setSelection(l):o.setTo(l));const d=s.getAffectedRange()||t.createRange(o.anchor);return s.destroy(),d}))}(this,t,e,n)}insertObject(t,e,n,r){return Qd(this,t,e,n,r)}deleteContent(t,e){$d(this,t,e)}modifySelection(t,e){!function(t,e,n={}){const r=t.schema,i="backward"!=n.direction,o=n.unit?n.unit:"character",s=!!n.treatEmojiAsSingleUnit,a=e.focus,c=new fc({boundaries:Jd(a,i),singleCharacters:!0,direction:i?"forward":"backward"}),l={walker:c,schema:r,isForward:i,unit:o,treatEmojiAsSingleUnit:s};let d;for(;d=c.next();){if(d.done)return;const n=Xd(l,d.value);if(n)return void(e instanceof zc?t.change((t=>{t.setSelectionFocus(n)})):e.setFocus(n))}}(this,t,e)}getSelectedContent(t){return function(t,e){return t.change((t=>{const n=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return n;const i=r.start.root,o=r.start.getCommonPath(r.end),s=i.getNodeByPath(o);let a;a=r.start.parent==r.end.parent?r:t.createRange(t.createPositionAt(s,r.start.path[o.length]),t.createPositionAt(s,r.end.path[o.length]+1));const c=a.end.offset-a.start.offset;for(const e of a.getItems({shallow:!0}))e.is("$textProxy")?t.appendText(e.data,e.getAttributes(),n):t.append(t.cloneElement(e,!0),n);if(a!=r){const e=r._getTransformedByMove(a.start,t.createPositionAt(n,0),c)[0],i=t.createRange(t.createPositionAt(n,0),e.start);Gd(t.createRange(e.end,t.createPositionAt(n,"end")),t),Gd(i,t)}return n}))}(this,t)}hasContent(t,e={}){const n=t instanceof vc?t:vc._createIn(t);if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:i=!1}=e;if(!i)for(const t of this.markers.getMarkersIntersectingRange(n))if(t.affectsData)return!0;for(const t of n.getItems())if(this.schema.isContent(t)){if(!t.is("$textProxy"))return!0;if(!r)return!0;if(-1!==t.data.search(/\S/))return!0}return!1}createPositionFromPath(t,e,n){return new mc(t,e,n)}createPositionAt(t,e){return mc._createAt(t,e)}createPositionAfter(t){return mc._createAfter(t)}createPositionBefore(t){return mc._createBefore(t)}createRange(t,e){return new vc(t,e)}createRangeIn(t){return vc._createIn(t)}createRangeOn(t){return vc._createOn(t)}createSelection(...t){return new Dc(...t)}createBatch(t){return new kd(t)}createOperationFromJSON(t){return rd.fromJSON(t,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const e=this._pendingChanges[0].batch;this._currentWriter=new Bd(this,e);const n=this._pendingChanges[0].callback(this._currentWriter);t.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}}class ru extends pa{constructor(t){super(t),this.domEventType="click"}onDomEvent(t){this.fire(t.type,t)}}class iu extends pa{constructor(t){super(t),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(t){this.fire(t.type,t)}}class ou{constructor(t){this.document=t}createDocumentFragment(t){return new Ds(this.document,t)}createElement(t,e,n){return new Xo(this.document,t,e,n)}createText(t){return new Ki(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const r=n.getChildIndex(t);return this.removeChildren(r,1,n),this.insertChild(r,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new Xo(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){vt(t)&&void 0===n?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return ss._createAt(t,e)}createPositionAfter(t){return ss._createAfter(t)}createPositionBefore(t){return ss._createBefore(t)}createRange(t,e){return new as(t,e)}createRangeOn(t){return as._createOn(t)}createRangeIn(t){return as._createIn(t)}createSelection(...t){return new ls(...t)}}const su=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,au=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,cu=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,lu=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,du=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,uu=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function hu(t){return t.startsWith("#")?su.test(t):t.startsWith("rgb")?au.test(t)||cu.test(t):t.startsWith("hsl")?lu.test(t)||du.test(t):uu.has(t.toLowerCase())}const gu=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function fu(t){return gu.includes(t)}const pu=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function mu(t){return pu.test(t)}const bu=/^[+-]?[0-9]*([.][0-9]+)?%$/;function ku(t){return bu.test(t)}const wu=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function yu(t){return wu.includes(t)}const _u=["center","top","bottom","left","right"];function vu(t){return _u.includes(t)}const Au=["fixed","scroll","local"];function Cu(t){return Au.includes(t)}const xu=/^url\(/;function Eu(t){return xu.test(t)}function Tu(t=""){if(""===t)return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=Iu(t),n=e[0],r=e[2]||n,i=e[1]||n;return{top:n,bottom:r,right:i,left:e[3]||i}}function Su(t){return e=>{const{top:n,right:r,bottom:i,left:o}=e,s=[];return[n,r,o,i].every((t=>!!t))?s.push([t,Du(e)]):(n&&s.push([t+"-top",n]),r&&s.push([t+"-right",r]),i&&s.push([t+"-bottom",i]),o&&s.push([t+"-left",o])),s}}function Du({top:t,right:e,bottom:n,left:r}){const i=[];return r!==e?i.push(t,e,n,r):n!==t?i.push(t,e,n):e!==t?i.push(t,e):i.push(t),i.join(" ")}function Mu(t){return e=>({path:t,value:Tu(e)})}function Iu(t){return t.replace(/, /g,",").split(" ").map((t=>t.replace(/,/g,", ")))}function Bu(t){t.setNormalizer("background",(t=>{const e={},n=Iu(t);for(const t of n)yu(t)?(e.repeat=e.repeat||[],e.repeat.push(t)):vu(t)?(e.position=e.position||[],e.position.push(t)):Cu(t)?e.attachment=t:hu(t)?e.color=t:Eu(t)&&(e.image=t);return{path:"background",value:e}})),t.setNormalizer("background-color",(t=>({path:"background.color",value:t}))),t.setReducer("background",(t=>{const e=[];return e.push(["background-color",t.color]),e})),t.setStyleRelation("background",["background-color"])}function Lu(t){t.setNormalizer("border",(t=>{const{color:e,style:n,width:r}=ju(t);return{path:"border",value:{color:Tu(e),style:Tu(n),width:Tu(r)}}})),t.setNormalizer("border-top",Nu("top")),t.setNormalizer("border-right",Nu("right")),t.setNormalizer("border-bottom",Nu("bottom")),t.setNormalizer("border-left",Nu("left")),t.setNormalizer("border-color",Ou("color")),t.setNormalizer("border-width",Ou("width")),t.setNormalizer("border-style",Ou("style")),t.setNormalizer("border-top-color",Ru("color","top")),t.setNormalizer("border-top-style",Ru("style","top")),t.setNormalizer("border-top-width",Ru("width","top")),t.setNormalizer("border-right-color",Ru("color","right")),t.setNormalizer("border-right-style",Ru("style","right")),t.setNormalizer("border-right-width",Ru("width","right")),t.setNormalizer("border-bottom-color",Ru("color","bottom")),t.setNormalizer("border-bottom-style",Ru("style","bottom")),t.setNormalizer("border-bottom-width",Ru("width","bottom")),t.setNormalizer("border-left-color",Ru("color","left")),t.setNormalizer("border-left-style",Ru("style","left")),t.setNormalizer("border-left-width",Ru("width","left")),t.setExtractor("border-top",zu("top")),t.setExtractor("border-right",zu("right")),t.setExtractor("border-bottom",zu("bottom")),t.setExtractor("border-left",zu("left")),t.setExtractor("border-top-color","border.color.top"),t.setExtractor("border-right-color","border.color.right"),t.setExtractor("border-bottom-color","border.color.bottom"),t.setExtractor("border-left-color","border.color.left"),t.setExtractor("border-top-width","border.width.top"),t.setExtractor("border-right-width","border.width.right"),t.setExtractor("border-bottom-width","border.width.bottom"),t.setExtractor("border-left-width","border.width.left"),t.setExtractor("border-top-style","border.style.top"),t.setExtractor("border-right-style","border.style.right"),t.setExtractor("border-bottom-style","border.style.bottom"),t.setExtractor("border-left-style","border.style.left"),t.setReducer("border-color",Su("border-color")),t.setReducer("border-style",Su("border-style")),t.setReducer("border-width",Su("border-width")),t.setReducer("border-top",Vu("top")),t.setReducer("border-right",Vu("right")),t.setReducer("border-bottom",Vu("bottom")),t.setReducer("border-left",Vu("left")),t.setReducer("border",function(){return e=>{const n=Fu(e,"top"),r=Fu(e,"right"),i=Fu(e,"bottom"),o=Fu(e,"left"),s=[n,r,i,o],a={width:t(s,"width"),style:t(s,"style"),color:t(s,"color")},c=$u(a,"all");if(c.length)return c;const l=Object.entries(a).reduce(((t,[e,n])=>(n&&(t.push([`border-${e}`,n]),s.forEach((t=>delete t[e]))),t)),[]);return[...l,...$u(n,"top"),...$u(r,"right"),...$u(i,"bottom"),...$u(o,"left")]};function t(t,e){return t.map((t=>t[e])).reduce(((t,e)=>t==e?t:null))}}()),t.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),t.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),t.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),t.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),t.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),t.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),t.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function Nu(t){return e=>{const{color:n,style:r,width:i}=ju(e),o={};return void 0!==n&&(o.color={[t]:n}),void 0!==r&&(o.style={[t]:r}),void 0!==i&&(o.width={[t]:i}),{path:"border",value:o}}}function Ou(t){return e=>({path:"border",value:Pu(e,t)})}function Pu(t,e){return{[e]:Tu(t)}}function Ru(t,e){return n=>({path:"border",value:{[t]:{[e]:n}}})}function zu(t){return(e,n)=>{if(n.border)return Fu(n.border,t)}}function Fu(t,e){const n={};return t.width&&t.width[e]&&(n.width=t.width[e]),t.style&&t.style[e]&&(n.style=t.style[e]),t.color&&t.color[e]&&(n.color=t.color[e]),n}function ju(t){const e={},n=Iu(t);for(const t of n)mu(t)||/thin|medium|thick/.test(t)?e.width=t:fu(t)?e.style=t:e.color=t;return e}function Vu(t){return e=>$u(e,t)}function $u(t,e){const n=[];if(t&&t.width&&n.push("width"),t&&t.style&&n.push("style"),t&&t.color&&n.push("color"),3==n.length){const r=n.map((e=>t[e])).join(" ");return["all"==e?["border",r]:[`border-${e}`,r]]}return"all"==e?[]:n.map((n=>[`border-${e}-${n}`,t[n]]))}function Hu(t){t.setNormalizer("margin",Mu("margin")),t.setNormalizer("margin-top",(t=>({path:"margin.top",value:t}))),t.setNormalizer("margin-right",(t=>({path:"margin.right",value:t}))),t.setNormalizer("margin-bottom",(t=>({path:"margin.bottom",value:t}))),t.setNormalizer("margin-left",(t=>({path:"margin.left",value:t}))),t.setReducer("margin",Su("margin")),t.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function Uu(t){t.setNormalizer("padding",Mu("padding")),t.setNormalizer("padding-top",(t=>({path:"padding.top",value:t}))),t.setNormalizer("padding-right",(t=>({path:"padding.right",value:t}))),t.setNormalizer("padding-bottom",(t=>({path:"padding.bottom",value:t}))),t.setNormalizer("padding-left",(t=>({path:"padding.left",value:t}))),t.setReducer("padding",Su("padding")),t.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}class Wu{constructor(){this._commands=new Map}add(t,e){this._commands.set(t,e)}get(t){return this._commands.get(t)}execute(t,...e){const n=this.get(t);if(!n)throw new b("commandcollection-command-not-found",this,{commandName:t});return n.execute(...e)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const t of this.commands())t.destroy()}}class qu extends Ai{constructor(t){super(),this.editor=t}set(t,e,n={}){if("string"==typeof e){const t=e;e=(e,n)=>{this.editor.execute(t),n()}}super.set(t,e,n)}}class Yu extends($()){constructor(t={}){super();const e=this.constructor,n=t.language||e.defaultConfig&&e.defaultConfig.language;this._context=t.context||new Oi({language:n}),this._context._addEditor(this,!t.context);const r=Array.from(e.builtinPlugins||[]);this.config=new yr(t,e.defaultConfig),this.config.define("plugins",r),this.config.define(this._context._getEditorConfig()),this.plugins=new Ni(this,r,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Wu,this.set("state","initializing"),this.once("ready",(()=>this.state="ready"),{priority:"high"}),this.once("destroy",(()=>this.state="destroyed"),{priority:"high"}),this.model=new nu;const i=new Zo;this.data=new Nl(this.model,i),this.editing=new hl(this.model,i),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ol([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new qu(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new b("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new b("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),1===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if("string"!=typeof t&&"symbol"!=typeof t)throw new b("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),0===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}initPlugins(){const t=this.config,e=t.get("plugins"),n=t.get("removePlugins")||[],r=t.get("extraPlugins")||[],i=t.get("substitutePlugins")||[];return this.plugins.init(e.concat(r),n,i)}destroy(){let t=Promise.resolve();return"initializing"==this.state&&(t=new Promise((t=>this.once("ready",t)))),t.then((()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()})).then((()=>this.plugins.destroy())).then((()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()})).then((()=>this._context._removeEditor(this)))}execute(t,...e){try{return this.commands.execute(t,...e)}catch(t){b.rethrowUnexpectedError(t,this)}}focus(){this.editing.view.focus()}}class Gu{constructor(t){this.editor=t,this._components=new Map}*names(){for(const t of this._components.values())yield t.originalName}add(t,e){this._components.set(Zu(t),{callback:e,originalName:t})}create(t){if(!this.has(t))throw new b("componentfactory-item-missing",this,{name:t});return this._components.get(Zu(t)).callback(this.editor.locale)}has(t){return this._components.has(Zu(t))}}function Zu(t){return String(t).toLowerCase()}class Ku extends yi{constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",((t,e,n)=>{this._renderViewIntoCollectionParent(e,n)})),this.on("remove",((t,e)=>{e.element&&this._parentElement&&e.element.remove()})),this._parentElement=null}destroy(){this.map((t=>t.destroy()))}setParent(t){this._parentElement=t;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...t){if(!t.length||!t.every((t=>"string"==typeof t)))throw new b("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const r of t)n.delegate(r).to(e);this.on("add",((n,r)=>{for(const n of t)r.delegate(n).to(e)})),this.on("remove",((n,r)=>{for(const n of t)r.stopDelegating(n,e)}))}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}}class Qu extends(T()){constructor(t){super(),Object.assign(this,ah(sh(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new b("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(e){if(e.children)for(const n of e.children)gh(n)?yield n:fh(n)&&(yield*t(n))}(this)}static bind(t,e){return{to:(n,r)=>new Ju({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:r}),if:(n,r,i)=>new th({observable:t,emitter:e,attribute:n,valueIfTrue:r,callback:i})}}static extend(t,e){if(t._isRendered)throw new b("template-extend-render",[this,t]);uh(t,ah(sh(e)))}_renderNode(t){let e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text,e)throw new b("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),eh(this.text)?this._bindToObservable({schema:this.text,updater:rh(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){if(!this.attributes)return;const e=t.node,n=t.revertData;for(const r in this.attributes){const i=e.getAttribute(r),o=this.attributes[r];n&&(n.attributes[r]=i);const s=mh(o)?o[0].ns:null;if(eh(o)){const a=mh(o)?o[0].value:o;n&&bh(r)&&a.unshift(i),this._bindToObservable({schema:a,updater:ih(e,r,s),data:t})}else if("style"==r&&"string"!=typeof o[0])this._renderStyleAttribute(o[0],t);else{n&&i&&bh(r)&&o.unshift(i);const t=o.map((t=>t&&t.value||t)).reduce(((t,e)=>t.concat(e)),[]).reduce(lh,"");hh(t)||e.setAttributeNS(s,r,t)}}}_renderStyleAttribute(t,e){const n=e.node;for(const r in t){const i=t[r];eh(i)?this._bindToObservable({schema:[i],updater:oh(n,r),data:e}):n.style[r]=i}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,r=t.isApplying;let i=0;for(const o of this.children)if(ph(o)){if(!r){o.setParent(e);for(const t of o)n.appendChild(t.element)}}else if(gh(o))r||(o.isRendered||o.render(),n.appendChild(o.element));else if(Ar(o))n.appendChild(o);else if(r){const e={children:[],bindings:[],attributes:{}};t.revertData.children.push(e),o._renderNode({intoFragment:!1,node:n.childNodes[i++],isApplying:!0,revertData:e})}else n.appendChild(o.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map((n=>{const[r,i]=e.split("@");return n.activateDomEventListener(r,i,t)}));t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const r=n.revertData;nh(t,e,n);const i=t.filter((t=>!hh(t))).filter((t=>t.observable)).map((r=>r.activateAttributeListener(t,e,n)));r&&r.bindings.push(i)}_revertTemplateFromNode(t,e){for(const t of e.bindings)for(const e of t)e();if(e.text)return void(t.textContent=e.text);const n=t;for(const t in e.attributes){const r=e.attributes[t];null===r?n.removeAttribute(t):n.setAttribute(t,r)}for(let t=0;t<e.children.length;++t)this._revertTemplateFromNode(n.childNodes[t],e.children[t])}}class Xu{constructor(t){this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const r=()=>nh(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}}class Ju extends Xu{constructor(t){super(t),this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,e,n){const r=(t,n)=>{e&&!n.target.matches(e)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,t,r),()=>{this.emitter.stopListening(n.node,t,r)}}}class th extends Xu{constructor(t){super(t),this.valueIfTrue=t.valueIfTrue}getValue(t){return!hh(super.getValue(t))&&(this.valueIfTrue||!0)}}function eh(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(eh):t instanceof Xu)}function nh(t,e,{node:n}){const r=function(t,e){return t.map((t=>t instanceof Xu?t.getValue(e):t))}(t,n);let i;i=1==t.length&&t[0]instanceof th?r[0]:r.reduce(lh,""),hh(i)?e.remove():e.set(i)}function rh(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function ih(t,e,n){return{set(r){t.setAttributeNS(n,e,r)},remove(){t.removeAttributeNS(n,e)}}}function oh(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function sh(t){return kr(t,(t=>{if(t&&(t instanceof Xu||fh(t)||gh(t)||ph(t)))return t}))}function ah(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){t.text=bi(t.text)}(t),t.on&&(t.eventListeners=function(t){for(const e in t)ch(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(const e in t)t[e].value&&(t[e].value=bi(t[e].value)),ch(t,e)}(t.attributes);const e=[];if(t.children)if(ph(t.children))e.push(t.children);else for(const n of t.children)fh(n)||gh(n)||Ar(n)?e.push(n):e.push(new Qu(n));t.children=e}return t}function ch(t,e){t[e]=bi(t[e])}function lh(t,e){return hh(e)?t:hh(t)?e:`${t} ${e}`}function dh(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function uh(t,e){if(e.attributes&&(t.attributes||(t.attributes={}),dh(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),dh(t.eventListeners,e.eventListeners)),e.text&&t.text.push(...e.text),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new b("ui-template-extend-children-mismatch",t);let n=0;for(const r of e.children)uh(t.children[n++],r)}}function hh(t){return!t&&0!==t}function gh(t){return t instanceof yh}function fh(t){return t instanceof Qu}function ph(t){return t instanceof Ku}function mh(t){return O(t[0])&&t[0].ns}function bh(t){return"class"==t||"style"==t}var kh=n(4793),wh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(kh.Z,wh);kh.Z.locals;class yh extends(Er($())){constructor(t){super(),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new yi,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",((e,n)=>{n.locale=t,n.t=t&&t.t})),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Qu.bind(this,this)}createCollection(t){const e=new Ku(t);return this._viewCollections.add(e),e}registerChild(t){Q(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){Q(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Qu(t)}extendTemplate(t){Qu.extend(this.template,t)}render(){if(this.isRendered)throw new b("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map((t=>t.destroy())),this.template&&this.template._revertData&&this.template.revert(this.element)}}var _h=n(8793),vh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(_h.Z,vh);_h.Z.locals;const Ah=$r("px"),Ch=Mr.document.body;class xh extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",(t=>`ck-balloon-panel_${t}`)),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Ah),left:e.to("left",Ah)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=xh.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast,e.viewportStickyNorth],limiter:Ch,fitInViewport:!0},t),r=xh._getOptimalPosition(n),i=parseInt(r.left),o=parseInt(r.top),s=r.name,a=r.config||{},{withArrow:c=!0}=a;this.top=o,this.left=i,this.position=s,this.withArrow=c}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);const e=Eh(t.target),n=t.limiter?Eh(t.limiter):Ch;this.listenTo(Mr.document,"scroll",((r,i)=>{const o=i.target,s=e&&o.contains(e),a=n&&o.contains(n);!s&&!a&&e&&n||this.attachTo(t)}),{useCapture:!0}),this.listenTo(Mr.window,"resize",(()=>{this.attachTo(t)}))}_stopPinning(){this.stopListening(Mr.document,"scroll"),this.stopListening(Mr.window,"resize")}}function Eh(t){return wr(t)?t:Lr(t)?t.commonAncestorContainer:"function"==typeof t?Eh(t()):null}function Th(t={}){const{sideOffset:e=xh.arrowSideOffset,heightOffset:n=xh.arrowHeightOffset,stickyVerticalOffset:r=xh.stickyVerticalOffset,config:i}=t;return{northWestArrowSouthWest:(t,n)=>({top:o(t,n),left:t.left-e,name:"arrow_sw",...i&&{config:i}}),northWestArrowSouthMiddleWest:(t,n)=>({top:o(t,n),left:t.left-.25*n.width-e,name:"arrow_smw",...i&&{config:i}}),northWestArrowSouth:(t,e)=>({top:o(t,e),left:t.left-e.width/2,name:"arrow_s",...i&&{config:i}}),northWestArrowSouthMiddleEast:(t,n)=>({top:o(t,n),left:t.left-.75*n.width+e,name:"arrow_sme",...i&&{config:i}}),northWestArrowSouthEast:(t,n)=>({top:o(t,n),left:t.left-n.width+e,name:"arrow_se",...i&&{config:i}}),northArrowSouthWest:(t,n)=>({top:o(t,n),left:t.left+t.width/2-e,name:"arrow_sw",...i&&{config:i}}),northArrowSouthMiddleWest:(t,n)=>({top:o(t,n),left:t.left+t.width/2-.25*n.width-e,name:"arrow_smw",...i&&{config:i}}),northArrowSouth:(t,e)=>({top:o(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s",...i&&{config:i}}),northArrowSouthMiddleEast:(t,n)=>({top:o(t,n),left:t.left+t.width/2-.75*n.width+e,name:"arrow_sme",...i&&{config:i}}),northArrowSouthEast:(t,n)=>({top:o(t,n),left:t.left+t.width/2-n.width+e,name:"arrow_se",...i&&{config:i}}),northEastArrowSouthWest:(t,n)=>({top:o(t,n),left:t.right-e,name:"arrow_sw",...i&&{config:i}}),northEastArrowSouthMiddleWest:(t,n)=>({top:o(t,n),left:t.right-.25*n.width-e,name:"arrow_smw",...i&&{config:i}}),northEastArrowSouth:(t,e)=>({top:o(t,e),left:t.right-e.width/2,name:"arrow_s",...i&&{config:i}}),northEastArrowSouthMiddleEast:(t,n)=>({top:o(t,n),left:t.right-.75*n.width+e,name:"arrow_sme",...i&&{config:i}}),northEastArrowSouthEast:(t,n)=>({top:o(t,n),left:t.right-n.width+e,name:"arrow_se",...i&&{config:i}}),southWestArrowNorthWest:t=>({top:s(t),left:t.left-e,name:"arrow_nw",...i&&{config:i}}),southWestArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left-.25*n.width-e,name:"arrow_nmw",...i&&{config:i}}),southWestArrowNorth:(t,e)=>({top:s(t),left:t.left-e.width/2,name:"arrow_n",...i&&{config:i}}),southWestArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left-.75*n.width+e,name:"arrow_nme",...i&&{config:i}}),southWestArrowNorthEast:(t,n)=>({top:s(t),left:t.left-n.width+e,name:"arrow_ne",...i&&{config:i}}),southArrowNorthWest:t=>({top:s(t),left:t.left+t.width/2-e,name:"arrow_nw",...i&&{config:i}}),southArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.left+t.width/2-.25*n.width-e,name:"arrow_nmw",...i&&{config:i}}),southArrowNorth:(t,e)=>({top:s(t),left:t.left+t.width/2-e.width/2,name:"arrow_n",...i&&{config:i}}),southArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.left+t.width/2-.75*n.width+e,name:"arrow_nme",...i&&{config:i}}),southArrowNorthEast:(t,n)=>({top:s(t),left:t.left+t.width/2-n.width+e,name:"arrow_ne",...i&&{config:i}}),southEastArrowNorthWest:t=>({top:s(t),left:t.right-e,name:"arrow_nw",...i&&{config:i}}),southEastArrowNorthMiddleWest:(t,n)=>({top:s(t),left:t.right-.25*n.width-e,name:"arrow_nmw",...i&&{config:i}}),southEastArrowNorth:(t,e)=>({top:s(t),left:t.right-e.width/2,name:"arrow_n",...i&&{config:i}}),southEastArrowNorthMiddleEast:(t,n)=>({top:s(t),left:t.right-.75*n.width+e,name:"arrow_nme",...i&&{config:i}}),southEastArrowNorthEast:(t,n)=>({top:s(t),left:t.right-n.width+e,name:"arrow_ne",...i&&{config:i}}),westArrowEast:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.left-e.width-n,name:"arrow_e",...i&&{config:i}}),eastArrowWest:(t,e)=>({top:t.top+t.height/2-e.height/2,left:t.right+n,name:"arrow_w",...i&&{config:i}}),viewportStickyNorth:(t,e,n)=>t.getIntersection(n)?{top:n.top+r,left:t.left+t.width/2-e.width/2,name:"arrowless",config:{withArrow:!1,...i}}:null};function o(t,e){return t.top-e.height-n}function s(t){return t.bottom+n}}xh.arrowSideOffset=25,xh.arrowHeightOffset=10,xh.stickyVerticalOffset=20,xh._getOptimalPosition=Yr,xh.defaultPositions=Th();var Sh=n(3332),Dh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Sh.Z,Dh);Sh.Z.locals;const Mh="ck-tooltip";class Ih extends(Er()){constructor(t){if(super(),Ih._editors.add(t),Ih._instance)return Ih._instance;Ih._instance=this,this.tooltipTextView=new yh(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new xh(t.locale),this.balloonPanelView.class=Mh,this.balloonPanelView.content.add(this.tooltipTextView),this._resizeObserver=null,this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._pinTooltipDebounced=Da(this._pinTooltip,600),this.listenTo(Mr.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Mr.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Mr.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Mr.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Mr.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const e=t.ui.view&&t.ui.view.body;Ih._editors.delete(t),this.stopListening(t.ui),e&&e.has(this.balloonPanelView)&&e.remove(this.balloonPanelView),Ih._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Ih._instance=null)}static getPositioningFunctions(t){const e=Ih.defaultBalloonPositions;return{s:[e.southArrowNorth,e.southArrowNorthEast,e.southArrowNorthWest],n:[e.northArrowSouth],e:[e.eastArrowWest],w:[e.westArrowEast],sw:[e.southArrowNorthEast],se:[e.southArrowNorthWest]}[t]}_onEnterOrFocus(t,{target:e}){const n=Bh(e);var r;n&&(n!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(n,{text:(r=n).dataset.ckeTooltipText,position:r.dataset.ckeTooltipPosition||"s",cssClass:r.dataset.ckeTooltipClass||""})))}_onLeaveOrBlur(t,{target:e,relatedTarget:n}){if("mouseleave"===t.name){if(!wr(e))return;if(this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;const t=Bh(e),r=Bh(n);t&&t!==r&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(t,{target:e}){this._currentElementWithTooltip&&(e.contains(this.balloonPanelView.element)&&e.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:e,position:n,cssClass:r}){const i=_i(Ih._editors.values()).ui.view.body;i.has(this.balloonPanelView)||i.add(this.balloonPanelView),this.tooltipTextView.text=e,this.balloonPanelView.pin({target:t,positions:Ih.getPositioningFunctions(n)}),this._resizeObserver=new jr(t,(()=>{qr(t)||this._unpinTooltip()})),this.balloonPanelView.class=[Mh,r].filter((t=>t)).join(" ");for(const t of Ih._editors)this.listenTo(t.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=n}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of Ih._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){qr(this._currentElementWithTooltip)?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Ih.getPositioningFunctions(this._currentTooltipPosition)}):this._unpinTooltip()}}function Bh(t){return wr(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}Ih.defaultBalloonPositions=Th({heightOffset:5,sideOffset:13}),Ih._editors=new Set,Ih._instance=null;class Lh extends($()){constructor(t){super(),this.editor=t,this.componentFactory=new Gu(t),this.focusTracker=new vi,this.tooltipManager=new Ih(t),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.isReady=!1,this.once("ready",(()=>{this.isReady=!0})),this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this.listenTo(t.editing.view.document,"layoutChanged",(()=>this.update())),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor);for(const t of this._editableElementsMap.values())t.ckeditorInstance=null;this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor),this.focusTracker.add(e);const n=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(e)};this.isReady?n():this.once("ready",n)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,e={}){t.isRendered?(this.focusTracker.add(t.element),this.editor.keystrokes.listenTo(t.element)):t.once("render",(()=>{this.focusTracker.add(t.element),this.editor.keystrokes.listenTo(t.element)})),this._focusableToolbarDefinitions.push({toolbarView:t,options:e})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const t=this.editor,e=t.config.get("ui.viewportOffset");if(e)return e;const n=t.config.get("toolbar.viewportTopOffset");return n?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:n}):{top:0}}_initFocusTracking(){const t=this.editor,e=t.editing.view;let n,r;t.keystrokes.set("Alt+F10",((t,i)=>{const o=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(o)&&!Array.from(e.domRoots.values()).includes(o)&&(n=o);const s=this._getCurrentFocusedToolbarDefinition();s&&r||(r=this._getFocusableCandidateToolbarDefinitions());for(let t=0;t<r.length;t++){const t=r.shift();if(r.push(t),t!==s&&this._focusFocusableCandidateToolbar(t)){s&&s.options.afterBlur&&s.options.afterBlur();break}}i()})),t.keystrokes.set("Esc",((e,r)=>{const i=this._getCurrentFocusedToolbarDefinition();i&&(n?(n.focus(),n=null):t.editing.view.focus(),i.options.afterBlur&&i.options.afterBlur(),r())}))}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const e of this._focusableToolbarDefinitions){const{toolbarView:n,options:r}=e;(qr(n.element)||r.beforeFocus)&&t.push(e)}return t.sort(((t,e)=>Nh(t)-Nh(e))),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:e,options:{beforeFocus:n}}=t;return n&&n(),!!qr(e.element)&&(e.focus(),!0)}}function Nh(t){const{toolbarView:e,options:n}=t;let r=10;return qr(e.element)&&r--,n.isContextual&&r--,r}function Oh(t){return class extends t{setData(t){this.data.set(t)}getData(t){return this.data.get(t)}}}{const t=Oh(Object);Oh.setData=t.prototype.setData,Oh.getData=t.prototype.getData}function Ph(t){return class extends t{updateSourceElement(t=this.data.get()){if(!this.sourceElement)throw new b("editor-missing-sourceelement",this);const e=this.config.get("updateSourceElementOnDestroy"),n=this.sourceElement instanceof HTMLTextAreaElement;Vr(this.sourceElement,e||n?t:"")}}}Ph.updateSourceElement=Ph(Object).prototype.updateSourceElement;class Rh extends Pi{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new yi({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if("string"!=typeof t)throw new b("pendingactions-add-invalid-message",this);const e=new($());return e.set("message",t),this._actions.add(e),this.hasAny=!0,e}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const zh={bold:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',importExport:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path clip-rule="evenodd" d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>',paragraph:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path clip-rule="evenodd" d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'};function Fh({emitter:t,activator:e,callback:n,contextElements:r}){t.listenTo(document,"mousedown",((t,i)=>{if(!e())return;const o="function"==typeof i.composedPath?i.composedPath():[];for(const t of r)if(t.contains(i.target)||o.includes(t))return;n()}))}function jh(t){const e=t;e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=()=>{e._isCssTransitionsDisabled=!0},e.enableCssTransitions=()=>{e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function Vh({view:t}){t.listenTo(t.element,"submit",((e,n)=>{n.preventDefault(),t.fire("submit")}),{useCapture:!0})}function $h({keystrokeHandler:t,focusTracker:e,gridItems:n,numberOfColumns:r}){const i="number"==typeof r?()=>r:r;function o(t){return r=>{const i=n.find((t=>t.element===e.focusedElement)),o=n.getIndex(i),s=t(o,n);n.get(s).focus(),r.stopPropagation(),r.preventDefault()}}t.set("arrowright",o(((t,e)=>t===e.length-1?0:t+1))),t.set("arrowleft",o(((t,e)=>0===t?e.length-1:t-1))),t.set("arrowup",o(((t,e)=>{let n=t-i();return n<0&&(n=t+i()*Math.floor(e.length/i()),n>e.length-1&&(n-=i())),n}))),t.set("arrowdown",o(((t,e)=>{let n=t+i();return n>e.length-1&&(n=t%i()),n})))}class Hh extends Ku{constructor(t,e=[]){super(e),this.locale=t}attachToDom(){this._bodyCollectionContainer=new Qu({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let t=document.querySelector(".ck-body-wrapper");t||(t=ft(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const t=document.querySelector(".ck-body-wrapper");t&&0==t.childElementCount&&t.remove()}}var Uh=n(6574),Wh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Uh.Z,Wh);Uh.Z.locals;class qh extends yh{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon","ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(()=>{this._updateXMLContent(),this._colorFillPaths()})),this.on("change:fillColor",(()=>{this._colorFillPaths()}))}_updateXMLContent(){if(this.content){const t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),e=t.getAttribute("viewBox");e&&(this.viewBox=e);for(const{name:e,value:n}of Array.from(t.attributes))qh.presentationalAttributeNames.includes(e)&&this.element.setAttribute(e,n);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((t=>{t.style.fill=this.fillColor}))}}qh.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];var Yh=n(4906),Gh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Yh.Z,Gh);Yh.Z.locals;class Zh extends yh{constructor(t){super(t);const e=this.bindTemplate,n=f();this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._createLabelView(n),this.iconView=new qh,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const r={tag:"button",attributes:{class:["ck","ck-button",e.to("class"),e.if("isEnabled","ck-disabled",(t=>!t)),e.if("isVisible","ck-hidden",(t=>!t)),e.to("isOn",(t=>t?"ck-on":"ck-off")),e.if("withText","ck-button_with-text"),e.if("withKeystroke","ck-button_with-keystroke")],type:e.to("type",(t=>t||"button")),tabindex:e.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${n}`,"aria-disabled":e.if("isEnabled",!0,(t=>!t)),"aria-pressed":e.to("isOn",(t=>!!this.isToggleable&&String(!!t))),"data-cke-tooltip-text":e.to("_tooltipString"),"data-cke-tooltip-position":e.to("tooltipPosition")},children:this.children,on:{click:e.to((t=>{this.isEnabled?this.fire("execute"):t.preventDefault()}))}};i.isSafari&&(r.on.mousedown=e.to((t=>{this.focus(),t.preventDefault()}))),this.setTemplate(r)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createLabelView(t){const e=new yh,n=this.bindTemplate;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:n.to("labelStyle"),id:`ck-editor__aria-label_${t}`},children:[{text:this.bindTemplate.to("label")}]}),e}_createKeystrokeView(){const t=new yh;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",(t=>gi(t)))}]}),t}_getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=gi(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}var Kh=n(5332),Qh={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Kh.Z,Qh);Kh.Z.locals;class Xh extends Zh{constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new yh;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}function Jh(t,e){const n=t.t,r={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return e.map((t=>{const e=r[t.label];return e&&e!=t.label&&(t.label=e),t}))}function tg(t){return t.map(eg).filter((t=>!!t))}function eg(t){return"string"==typeof t?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:void 0!==t.hasBorder&&t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}class ng extends Zh{constructor(t){super(t);const e=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:e.to("color")},class:["ck","ck-color-grid__tile",e.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}var rg=n(6781),ig={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(rg.Z,ig);rg.Z.locals;class og extends yh{constructor(t,e){super(t);const n=e&&e.colorDefinitions||[];this.columns=e&&e.columns?e.columns:5;const r={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new vi,this.keystrokes=new Ai,this.items.on("add",((t,e)=>{e.isOn=e.color===this.selectedColor})),n.forEach((t=>{const e=new ng;e.set({color:t.color,label:t.label,tooltip:!0,hasBorder:t.options.hasBorder}),e.on("execute",(()=>{this.fire("execute",{value:t.color,hasBorder:t.options.hasBorder,label:t.label})})),this.items.add(e)})),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",((t,e,n)=>{for(const t of this.items)t.isOn=t.color===n}))}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",((t,e)=>{this.focusTracker.add(e.element)})),this.items.on("remove",((t,e)=>{this.focusTracker.remove(e.element)})),this.keystrokes.listenTo(this.element),$h({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}const sg='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class ag extends Zh{constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",(t=>String(t)))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new qh;return t.content=sg,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}var cg=n(7686),lg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(cg.Z,lg);cg.Z.locals;class dg extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Ai,this.focusTracker=new vi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",e.to("class"),e.if("isVisible","ck-hidden",(t=>!t)),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",((t,e)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),e())})),this.keystrokes.set("arrowleft",((t,e)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),e())}))}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const t=new Zh;return t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const t=new Zh,e=t.bindTemplate;return t.icon=sg,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":e.to("isOn"),"aria-haspopup":!0,"aria-expanded":e.to("isOn",(t=>String(t)))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}class ug extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",(t=>`ck-dropdown__panel_${t}`)),e.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:e.to((t=>t.preventDefault()))}})}focus(){if(this.children.length){const t=this.children.first;"function"==typeof t.focus?t.focus():k("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}var hg=n(5485),gg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(hg.Z,gg);hg.Z.locals;class fg extends yh{constructor(t,e,n){super(t);const r=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.keystrokes=new Ai,this.focusTracker=new vi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",(t=>!t))],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",(()=>{this.isOpen=!this.isOpen})),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",((t,e,n)=>{n&&("auto"===this.panelPosition?this.panelView.position=fg._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)})),this.keystrokes.listenTo(this.element);const t=(t,e)=>{this.isOpen&&(this.isOpen=!1,e())};this.keystrokes.set("arrowdown",((t,e)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,e())})),this.keystrokes.set("arrowright",((t,e)=>{this.isOpen&&e()})),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:r,northEast:i,northWest:o,southMiddleEast:s,southMiddleWest:a,northMiddleEast:c,northMiddleWest:l}=fg.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,r,s,a,t,i,o,c,l,e]:[r,n,a,s,t,o,i,l,c,e]}}fg.defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"})},fg._getOptimalPosition=Yr;class pg{constructor(t){if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];"string"==typeof n&&(n=[n]);for(const r of n)t.keystrokeHandler.set(r,((t,n)=>{this[e](),n()}))}}get first(){return this.focusables.find(mg)||null}get last(){return this.focusables.filter(mg).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(((e,n)=>{const r=e.element===this.focusTracker.focusedElement;return r&&(t=n),r})),t)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(t){t&&t.focus()}_getFocusableItem(t){const e=this.current,n=this.focusables.length;if(!n)return null;if(null===e)return this[1===t?"first":"last"];let r=(e+n+t)%n;do{const e=this.focusables.get(r);if(mg(e))return e;r=(r+n+t)%n}while(r!==e);return null}}function mg(t){return!(!t.focus||!qr(t.element))}class bg extends yh{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class kg extends yh{constructor(t){super(t),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function wg(t){return Array.isArray(t)?{items:t,removeItems:[]}:t?Object.assign({items:[],removeItems:[]},t):{items:[],removeItems:[]}}var yg=n(5542),_g={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(yg.Z,_g);yg.Z.locals;const{threeVerticalDots:vg}=zh,Ag={alignLeft:zh.alignLeft,bold:zh.bold,importExport:zh.importExport,paragraph:zh.paragraph,plus:zh.plus,text:zh.text,threeVerticalDots:zh.threeVerticalDots};class Cg extends yh{constructor(t,e){super(t);const n=this.bindTemplate,r=this.t;this.options=e||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new vi,this.keystrokes=new Ai,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new xg(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const i="rtl"===t.uiLanguageDirection;this._focusCycler=new pg({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[i?"arrowright":"arrowleft","arrowup"],focusNext:[i?"arrowleft":"arrowright","arrowdown"]}});const o=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];var s;this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")}},children:this.children,on:{mousedown:(s=this,s.bindTemplate.to((t=>{t.target===s.element&&t.preventDefault()})))}}),this._behavior=this.options.shouldGroupWhenFull?new Tg(this):new Eg(this)}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",((t,e)=>{this.focusTracker.add(e.element)})),this.items.on("remove",((t,e)=>{this.focusTracker.remove(e.element)})),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,e,n){const r=wg(t),i=n||r.removeItems,o=this._cleanItemsConfiguration(r.items,e,i).map((t=>O(t)?this._createNestedToolbarDropdown(t,e,i):"|"===t?new bg:"-"===t?new kg:e.create(t))).filter((t=>!!t));this.items.addMany(o)}_cleanItemsConfiguration(t,e,n){const r=t.filter(((t,r,i)=>"|"===t||-1===n.indexOf(t)&&("-"===t?!this.options.shouldGroupWhenFull||(k("toolbarview-line-break-ignored-when-grouping-items",i),!1):!(!O(t)&&!e.has(t))||(k("toolbarview-item-unavailable",{item:t}),!1))));return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(t){const e=t=>"-"!==t&&"|"!==t,n=t.length,r=t.findIndex(e);if(-1===r)return[];const i=n-t.slice().reverse().findIndex(e);return t.slice(r,i).filter(((t,n,r)=>{if(e(t))return!0;return!(n>0&&r[n-1]===t)}))}_createNestedToolbarDropdown(t,e,n){let{label:r,icon:i,items:o,tooltip:s=!0,withText:a=!1}=t;if(o=this._cleanItemsConfiguration(o,e,n),!o.length)return null;const c=Rg(this.locale);return r||k("toolbarview-nested-toolbar-dropdown-missing-label",t),c.class="ck-toolbar__nested-toolbar-dropdown",c.buttonView.set({label:r,tooltip:s,withText:!!a}),!1!==i?c.buttonView.icon=Ag[i]||i||vg:c.buttonView.withText=!0,zg(c,[]),c.toolbarView.fillFromConfig(o,e,n),c}}class xg extends yh{constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Eg{constructor(t){const e=t.bindTemplate;t.set("isVertical",!1),t.itemsView.children.bindTo(t.items).using((t=>t)),t.focusables.bindTo(t.items).using((t=>t)),t.extendTemplate({attributes:{class:[e.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class Tg{constructor(t){this.view=t,this.viewChildren=t.children,this.viewFocusables=t.focusables,this.viewItemsView=t.itemsView,this.viewFocusTracker=t.focusTracker,this.viewLocale=t.locale,this.ungroupedItems=t.createCollection(),this.groupedItems=t.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,t.itemsView.children.bindTo(this.ungroupedItems).using((t=>t)),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),t.children.on("change",this._updateFocusCycleableItems.bind(this)),t.items.on("change",((t,e)=>{const n=e.index,r=Array.from(e.added);for(const t of e.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(t):this.ungroupedItems.remove(t);for(let t=n;t<n+r.length;t++){const e=r[t-n];t>this.ungroupedItems.length?this.groupedItems.add(e,t-this.ungroupedItems.length):this.ungroupedItems.add(e,t)}this._updateGrouping()})),t.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!qr(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const t=this.viewElement,e=this.viewLocale.uiLanguageDirection,n=new Pr(t.lastChild),r=new Pr(t);if(!this.cachedPadding){const n=Mr.window.getComputedStyle(t),r="ltr"===e?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(n[r])}return"ltr"===e?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new jr(this.viewElement,(e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)})),this._updateGrouping()}_enableGroupingOnMaxWidthChange(t){t.on("change:maxWidth",(()=>{this._updateGrouping()}))}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new bg),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const t=this.viewLocale,e=t.t,n=Rg(t);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",zg(n,[]),n.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:vg}),n.toolbarView.items.bindTo(this.groupedItems).using((t=>t)),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map((t=>{this.viewFocusables.add(t)})),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}var Sg=n(1046),Dg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Sg.Z,Dg);Sg.Z.locals;class Mg extends yh{constructor(t){super(t),this.items=this.createCollection(),this.focusTracker=new vi,this.keystrokes=new Ai,this._focusCycler=new pg({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",((t,e)=>{this.focusTracker.add(e.element)})),this.items.on("remove",((t,e)=>{this.focusTracker.remove(e.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Ig extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",e.if("isVisible","ck-hidden",(t=>!t))]},children:this.children})}focus(){this.children.first.focus()}}class Bg extends yh{constructor(t){super(t),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}var Lg=n(7339),Ng={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Lg.Z,Ng);Lg.Z.locals;var Og=n(3949),Pg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Og.Z,Pg);Og.Z.locals;function Rg(t,e=ag){const n=new e(t),r=new ug(t),i=new fg(t,n,r);return n.bind("isEnabled").to(i),n instanceof dg?n.arrowView.bind("isOn").to(i,"isOpen"):n.bind("isOn").to(i,"isOpen"),function(t){(function(t){t.on("render",(()=>{Fh({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=!1},contextElements:[t.element]})}))})(t),function(t){t.on("execute",(e=>{e.source instanceof Xh||(t.isOpen=!1)}))}(t),function(t){t.focusTracker.on("change:isFocused",((e,n,r)=>{t.isOpen&&!r&&(t.isOpen=!1)}))}(t),function(t){t.keystrokes.set("arrowdown",((e,n)=>{t.isOpen&&(t.panelView.focus(),n())})),t.keystrokes.set("arrowup",((e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())}))}(t),function(t){t.on("change:isOpen",((e,n,r)=>{r||t.panelView.element.contains(Mr.document.activeElement)&&t.buttonView.focus()}))}(t),function(t){t.on("change:isOpen",((e,n,r)=>{r&&t.panelView.focus()}),{priority:"low"})}(t)}(i),i}function zg(t,e,n={}){const r=t.locale,i=r.t,o=t.toolbarView=new Cg(r);o.set("ariaLabel",i("Dropdown toolbar")),t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),e.map((t=>o.items.add(t))),n.enableActiveItemFocusOnDropdownOpen&&jg(t,(()=>o.items.find((t=>t.isOn)))),t.panelView.children.add(o),o.items.delegate("execute").to(t)}function Fg(t,e){const n=t.locale,r=t.listView=new Mg(n);r.items.bindTo(e).using((t=>{if("separator"===t.type)return new Bg(n);if("button"===t.type||"switchbutton"===t.type){const e=new Ig(n);let r;return r="button"===t.type?new Zh(n):new Xh(n),r.bind(...Object.keys(t.model)).to(t.model),r.delegate("execute").to(e),e.children.add(r),e}return null})),t.panelView.children.add(r),r.items.delegate("execute").to(t),jg(t,(()=>r.items.find((t=>t instanceof Ig&&t.children.first.isOn))))}function jg(t,e){t.on("change:isOpen",(()=>{if(!t.isOpen)return;const n=e();n&&("function"==typeof n.focus?n.focus():k("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))}),{priority:p.low-10})}var Vg=n(9688),$g={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Vg.Z,$g);Vg.Z.locals;class Hg extends yh{constructor(t){super(t),this.body=new Hh(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}var Ug=n(3662),Wg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Ug.Z,Wg);Ug.Z.locals;class qg extends yh{constructor(t){super(t),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${f()}`;const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}class Yg extends Hg{constructor(t){super(t),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,e=new qg;return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{class:"ck-voice-label"}}),e}}class Gg extends yh{constructor(t,e,n){super(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=e}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",(()=>this._updateIsFocusedClasses())),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const t=this._editingView;function e(e){t.change((n=>{const r=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",r)}))}t.isRenderingInProgress?function n(r){t.once("change:isRenderingInProgress",((t,i,o)=>{o?n(r):e(r)}))}(this):e(this)}}class Zg extends Gg{constructor(t,e,n,r={}){super(t,e,n);const i=t.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=r.label||(()=>i("Editor editing area: %0",this.name))}render(){super.render();const t=this._editingView;t.change((e=>{const n=t.document.getRoot(this.name);e.setAttribute("aria-label",this._generateLabel(this),n)}))}}var Kg=n(8847),Qg={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Kg.Z,Qg);Kg.Z.locals;class Xg extends yh{constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("label",e.label||""),this.set("class",e.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children});const r=new yh(t);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"]},children:[{text:n.to("label")}]}),this.children.add(r)}}var Jg=n(4879),tf={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Jg.Z,tf);Jg.Z.locals;class ef extends yh{constructor(t){super(t),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new vi,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0),this.set("inputMode","text");const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",e.if("isFocused","ck-input_focused"),e.if("isEmpty","ck-input-text_empty"),e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),inputmode:e.to("inputMode"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to(((...t)=>{this.fire("input",...t),this._updateIsEmpty()})),change:e.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",((t,e,n)=>{this._setDomElementValue(n),this._updateIsEmpty()}))}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(t){this.element.value=t||0===t?t:""}}class nf extends ef{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class rf extends ef{constructor(t,{min:e,max:n,step:r}={}){super(t);const i=this.bindTemplate;this.set("min",e),this.set("max",n),this.set("step",r),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:i.to("min"),max:i.to("max"),step:i.to("step")}})}}var of=n(2577),sf={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(of.Z,sf);of.Z.locals;class af extends yh{constructor(t,e){super(t);const n=`ck-labeled-field-view-${f()}`,r=`ck-labeled-field-view-status-${f()}`;this.fieldView=e(this,n,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",((t,e)=>t||e));const i=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",i.to("class"),i.if("isEnabled","ck-disabled",(t=>!t)),i.if("isEmpty","ck-labeled-field-view_empty"),i.if("isFocused","ck-labeled-field-view_focused"),i.if("placeholder","ck-labeled-field-view_placeholder"),i.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const e=new qg(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createStatusView(t){const e=new yh(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",(t=>!t))],id:t,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),e}focus(){this.fieldView.focus()}}function cf(t,e,n){const r=new nf(t.locale);return r.set({id:e,ariaDescribedById:n}),r.bind("isReadOnly").to(t,"isEnabled",(t=>!t)),r.bind("hasError").to(t,"errorText",(t=>!!t)),r.on("input",(()=>{t.errorText=null})),t.bind("isEmpty","isFocused","placeholder").to(r),r}function lf(t,e,n){const r=new rf(t.locale);return r.set({id:e,ariaDescribedById:n,inputMode:"numeric"}),r.bind("isReadOnly").to(t,"isEnabled",(t=>!t)),r.bind("hasError").to(t,"errorText",(t=>!!t)),r.on("input",(()=>{t.errorText=null})),t.bind("isEmpty","isFocused","placeholder").to(r),r}function df(t,e,n){const r=Rg(t.locale);return r.set({id:e,ariaDescribedById:n}),r.bind("isEnabled").to(t),r}class uf extends Pi{static get pluginName(){return"Notification"}init(){this.on("show:warning",((t,e)=>{window.alert(e.message)}),{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}class hf extends($()){constructor(t,e){super(),e&&ga(this,e),t&&this.set(t)}}const gf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>';var ff=n(4650),pf={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(ff.Z,pf);ff.Z.locals;var mf=n(7676),bf={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(mf.Z,bf);mf.Z.locals;const kf=$r("px");class wf extends Di{static get pluginName(){return"ContextualBalloon"}constructor(t){super(t),this.positionLimiter=()=>{const t=this.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},this.set("visibleView",null),this.view=new xh(t.locale),t.ui.view.body.add(this.view),t.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}destroy(){super.destroy(),this.view.destroy(),this._rotatorView.destroy(),this._fakePanelsView.destroy()}hasView(t){return Array.from(this._viewToStack.keys()).includes(t)}add(t){if(this.hasView(t.view))throw new b("contextualballoon-add-view-exist",[this,t]);const e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));const n=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),n.set(t.view,t),this._viewToStack.set(t.view,n),n===this._visibleStack&&this._showView(t)}remove(t){if(!this.hasView(t))throw new b("contextualballoon-remove-view-not-exist",[this,t]);const e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack.delete(this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e.delete(t),this._viewToStack.delete(t)}updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(t){this.visibleStack=t;const e=this._idToStack.get(t);if(!e)throw new b("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find((e=>e[1]===t))[0]}_showNextStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]))}_showPrevStack(){const t=Array.from(this._idToStack.values());let e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]))}_createRotatorView(){const t=new yf(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",((t,e)=>!e&&t>1)),t.on("change:isNavigationVisible",(()=>this.updatePosition()),{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",((t,n)=>{if(n<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return e("%0 of %1",[r,n])})),t.buttonNextView.on("execute",(()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()})),t.buttonPrevView.on("execute",(()=>{t.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()})),t}_createFakePanelsView(){const t=new _f(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",((t,e)=>!e&&t>=2?Math.min(t-1,2):0)),t.listenTo(this.view,"change:top",(()=>t.updatePosition())),t.listenTo(this.view,"change:left",(()=>t.updatePosition())),this.editor.ui.view.body.add(t),t}_showView({view:t,balloonClassName:e="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=e,this.view.withArrow=n,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:this.editor.ui.viewportOffset})),t}}class yf extends yh{constructor(t){super(t);const e=t.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new vi,this.buttonPrevView=this._createButtonView(e("Previous"),gf),this.buttonNextView=this._createButtonView(e("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",(t=>t?"":"ck-hidden"))]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(t){this.hideView(),this.content.add(t)}hideView(){this.content.clear()}_createButtonView(t,e){const n=new Zh(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n}}class _f extends yh{constructor(t,e){super(t);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=e,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",(t=>t?"":"ck-hidden"))],style:{top:n.to("top",kf),left:n.to("left",kf),width:n.to("width",kf),height:n.to("height",kf)}},children:this.content}),this.on("change:numberOfPanels",((t,e,n,r)=>{n>r?this._addPanels(n-r):this._removePanels(r-n),this.updatePosition()}))}_addPanels(t){for(;t--;){const t=new yh;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(t){for(;t--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:t,left:e}=this._balloonPanelView,{width:n,height:r}=new Pr(this._balloonPanelView.element);Object.assign(this,{top:t,left:e,width:n,height:r})}}}var vf=n(5868),Af={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(vf.Z,Af);vf.Z.locals;const Cf=$r("px");class xf extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new Qu({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",(t=>t?"block":"none")),height:e.to("isSticky",(t=>t?Cf(this._panelRect.height):null))}}}).render(),this._contentPanel=new Qu({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",e.if("isSticky","ck-sticky-panel__content_sticky"),e.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",(t=>t?Cf(this._contentPanelPlaceholder.getBoundingClientRect().width):null)),top:e.to("_hasViewportTopOffset",(t=>t?Cf(this.viewportTopOffset):null)),bottom:e.to("_isStickyToTheLimiter",(t=>t?Cf(this.limiterBottomOffset):null)),marginLeft:e.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(Mr.window,"scroll",(()=>{this._checkIfShouldBeSticky()})),this.listenTo(this,"change:isActive",(()=>{this._checkIfShouldBeSticky()}))}_checkIfShouldBeSticky(){const t=this._panelRect=this._contentPanel.getBoundingClientRect();let e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Cf(-Mr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}$r("px");var Ef=n(9695),Tf={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Ef.Z,Tf);Ef.Z.locals,$r("px");$r("px");const{pilcrow:Sf}=zh;class Df extends Lh{constructor(t,e){super(t),this.view=e,this._toolbarConfig=wg(t.config.get("toolbar")),this._elementReplacer=new G}get element(){return this.view.element}init(t){const e=this.editor,n=this.view,r=e.editing.view,i=n.editable,o=r.document.getRoot();i.name=o.rootName,n.render();const s=i.element;this.setEditableElement(i.name,s),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(s),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",(({top:t})=>t||0)),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,e=t.editing.view,n=e.document.getRoot(),r=t.sourceElement,i=t.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&$i({view:e,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}var Mf=n(3143),If={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Mf.Z,If);Mf.Z.locals;class Bf extends Yg{constructor(t,e,n={}){super(t),this.stickyPanel=new xf(t),this.toolbar=new Cg(t,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new Zg(t,e)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Lf extends(Oh(Ph(Yu))){constructor(t,e={}){if(!Nf(t)&&void 0!==e.initialData)throw new b("editor-create-initial-data",null);super(e),void 0===this.config.get("initialData")&&this.config.set("initialData",function(t){return Nf(t)?(e=t,e instanceof HTMLTextAreaElement?e.value:e.innerHTML):t;var e}(t)),Nf(t)&&(this.sourceElement=t),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new Bf(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n});this.ui=new Df(this,r),function(t){if(!Rt(t.updateSourceElement))throw new b("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(function(t){return!!t&&"textarea"===t.tagName.toLowerCase()}(e)&&e.form){let n;const r=e.form,i=()=>t.updateSourceElement();Rt(r.submit)&&(n=r.submit,r.submit=()=>{i(),n.apply(r)}),r.addEventListener("submit",i),t.on("destroy",(()=>{r.removeEventListener("submit",i),n&&(r.submit=n)}))}}(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,e={}){return new Promise((n=>{const r=new this(t,e);n(r.initPlugins().then((()=>r.ui.init(Nf(t)?t:null))).then((()=>r.data.init(r.config.get("initialData")))).then((()=>r.fire("ready"))).then((()=>r)))}))}}function Nf(t){return wr(t)}const Of=["left","right","center","justify"];function Pf(t){return Of.includes(t)}function Rf(t,e){return"rtl"==e.contentLanguageDirection?"right"===t:"left"===t}function zf(t){const e=t.map((t=>{let e;return e="string"==typeof t?{name:t}:t,e})).filter((t=>{const e=!!Of.includes(t.name);return e||k("alignment-config-name-not-recognized",{option:t}),e})),n=e.filter((t=>!!t.className)).length;if(n&&n<e.length)throw new b("alignment-config-classnames-are-missing",{configuredOptions:t});return e.forEach(((e,n,r)=>{const i=r.slice(n+1);if(i.some((t=>t.name==e.name)))throw new b("alignment-config-name-already-defined",{option:e,configuredOptions:t});if(e.className){if(i.some((t=>t.className==e.className)))throw new b("alignment-config-classname-already-defined",{option:e,configuredOptions:t})}})),e}const Ff="alignment";class jf extends Ii{refresh(){const t=this.editor.locale,e=_i(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!e&&this._canBeAligned(e),this.isEnabled&&e.hasAttribute("alignment")?this.value=e.getAttribute("alignment"):this.value="rtl"===t.contentLanguageDirection?"right":"left"}execute(t={}){const e=this.editor,n=e.locale,r=e.model,i=r.document,o=t.value;r.change((t=>{const e=Array.from(i.selection.getSelectedBlocks()).filter((t=>this._canBeAligned(t))),r=e[0].getAttribute("alignment");Rf(o,n)||r===o||!o?function(t,e){for(const n of t)e.removeAttribute(Ff,n)}(e,t):function(t,e,n){for(const r of t)e.setAttribute(Ff,n,r)}(e,t,o)}))}_canBeAligned(t){return this.editor.model.schema.checkAttribute(t,Ff)}}class Vf extends Di{static get pluginName(){return"AlignmentEditing"}constructor(t){super(t),t.config.define("alignment",{options:[...Of.map((t=>({name:t})))]})}init(){const t=this.editor,e=t.locale,n=t.model.schema,r=zf(t.config.get("alignment.options")).filter((t=>Pf(t.name)&&!Rf(t.name,e))),i=r.some((t=>!!t.className));n.extend("$block",{allowAttributes:"alignment"}),t.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),i?t.conversion.attributeToAttribute(function(t){const e={model:{key:"alignment",values:t.map((t=>t.name))},view:{}};for(const n of t)e.view[n.name]={key:"class",value:n.className};return e}(r)):t.conversion.for("downcast").attributeToAttribute(function(t){const e={model:{key:"alignment",values:t.map((t=>t.name))},view:{}};for(const{name:n}of t)e.view[n]={key:"style",value:{"text-align":n}};return e}(r));const o=function(t){const e=[];for(const{name:n}of t)e.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return e}(r);for(const e of o)t.conversion.for("upcast").attributeToAttribute(e);const s=function(t){const e=[];for(const{name:n}of t)e.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return e}(r);for(const e of s)t.conversion.for("upcast").attributeToAttribute(e);t.commands.add("alignment",new jf(t))}}const $f=new Map([["left",zh.alignLeft],["right",zh.alignRight],["center",zh.alignCenter],["justify",zh.alignJustify]]);class Hf extends Di{get localizedOptionTitles(){const t=this.editor.t;return{left:t("Align left"),right:t("Align right"),center:t("Align center"),justify:t("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const t=this.editor,e=t.ui.componentFactory,n=t.t,r=zf(t.config.get("alignment.options"));r.map((t=>t.name)).filter(Pf).forEach((t=>this._addButton(t))),e.add("alignment",(i=>{const o=Rg(i),s=r.map((t=>e.create(`alignment:${t.name}`)));zg(o,s,{enableActiveItemFocusOnDropdownOpen:!0}),o.buttonView.set({label:n("Text alignment"),tooltip:!0}),o.toolbarView.isVertical=!0,o.toolbarView.ariaLabel=n("Text alignment toolbar"),o.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const a="rtl"===i.contentLanguageDirection?$f.get("right"):$f.get("left");return o.buttonView.bind("icon").toMany(s,"isOn",((...t)=>{const e=t.findIndex((t=>t));return e<0?a:s[e].icon})),o.bind("isEnabled").toMany(s,"isEnabled",((...t)=>t.some((t=>t)))),this.listenTo(o,"execute",(()=>{t.editing.view.focus()})),o}))}_addButton(t){const e=this.editor;e.ui.componentFactory.add(`alignment:${t}`,(n=>{const r=e.commands.get("alignment"),i=new Zh(n);return i.set({label:this.localizedOptionTitles[t],icon:$f.get(t),tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(r),i.bind("isOn").to(r,"value",(e=>e===t)),this.listenTo(i,"execute",(()=>{e.execute("alignment",{value:t}),e.editing.view.focus()})),i}))}}class Uf{constructor(t,e=20){this._batch=null,this.model=t,this._size=0,this.limit=e,this._isLocked=!1,this._changeCallback=(t,e)=>{e.isLocal&&e.isUndoable&&e!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(t=!1){this.isLocked&&!t||(this._batch=null,this._size=0)}}class Wf extends Ii{constructor(t,e){super(t),this._buffer=new Uf(t.model,e)}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(t={}){const e=this.editor.model,n=e.document,r=t.text||"",i=r.length;let o=n.selection;t.selection?o=t.selection:t.range&&(o=e.createSelection(t.range));const s=t.resultRange;e.enqueueChange(this._buffer.batch,(t=>{this._buffer.lock(),e.deleteContent(o),r&&e.insertContent(t.createText(r,n.selection.getAttributes()),o),s?t.setSelection(s):o.is("documentSelection")||t.setSelection(o),this._buffer.unlock(),this._buffer.input(i)}))}}const qf=["insertText","insertReplacementText"];class Yf extends ha{constructor(t){super(t),i.isAndroid&&qf.push("insertCompositionText");const e=t.document;e.on("beforeinput",((n,r)=>{if(!this.isEnabled)return;const{data:i,targetRanges:o,inputType:s,domEvent:a}=r;if(!qf.includes(s))return;const c=new h(e,"insertText");e.fire(c,new fa(t,a,{text:i,selection:t.createSelection(o)})),c.stop.called&&n.stop()})),e.on("compositionend",((n,{data:r,domEvent:o})=>{this.isEnabled&&!i.isAndroid&&r&&e.fire("insertText",new fa(t,o,{text:r,selection:e.selection}))}),{priority:"lowest"})}observe(){}}class Gf extends Di{static get pluginName(){return"Input"}init(){const t=this.editor,e=t.model,n=t.editing.view,r=e.document.selection;n.addObserver(Yf);const o=new Wf(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",o),t.commands.add("input",o),this.listenTo(n.document,"insertText",((r,o)=>{n.document.isComposing||o.preventDefault();const{text:s,selection:a,resultRange:c}=o,l=Array.from(a.getRanges()).map((e=>t.editing.mapper.toModelRange(e)));let d=s;if(i.isAndroid){const t=Array.from(l[0].getItems()).reduce(((t,e)=>t+(e.is("$textProxy")?e.data:"")),"");t&&(t.length<=d.length?d.startsWith(t)&&(d=d.substring(t.length),l[0].start=l[0].start.getShiftedBy(t.length)):t.startsWith(d)&&(l[0].start=l[0].start.getShiftedBy(d.length),d=""))}const u={text:d,selection:e.createSelection(l)};c&&(u.resultRange=t.editing.mapper.toModelRange(c)),t.execute("insertText",u)})),i.isAndroid?this.listenTo(n.document,"keydown",((t,i)=>{!r.isCollapsed&&229==i.keyCode&&n.document.isComposing&&Zf(e,o)})):this.listenTo(n.document,"compositionstart",(()=>{r.isCollapsed||Zf(e,o)}))}}function Zf(t,e){if(!e.isEnabled)return;const n=e.buffer;n.lock(),t.enqueueChange(n.batch,(()=>{t.deleteContent(t.document.selection)})),n.unlock()}class Kf extends Ii{constructor(t,e){super(t),this.direction=e,this._buffer=new Uf(t.model,t.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(t={}){const e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,(r=>{this._buffer.lock();const i=r.createSelection(t.selection||n.selection),o=t.sequence||1,s=i.isCollapsed;if(i.isCollapsed&&e.modifySelection(i,{direction:this.direction,unit:t.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(o))return void this._replaceEntireContentWithParagraph(r);if(this._shouldReplaceFirstBlockWithParagraph(i,o))return void this.editor.execute("paragraph",{selection:i});if(i.isCollapsed)return;let a=0;i.getFirstRange().getMinimalFlatRanges().forEach((t=>{a+=Z(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),e.deleteContent(i,{doNotResetEntireContent:s,direction:this.direction}),this._buffer.input(a),r.setSelection(i),this._buffer.unlock()}))}_shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;const e=this.editor.model,n=e.document.selection,r=e.schema.getLimitElement(n);if(!(n.isCollapsed&&n.containsEntireContent(r)))return!1;if(!e.schema.checkChild(r,"paragraph"))return!1;const i=r.getChild(0);return!i||!i.is("element","paragraph")}_replaceEntireContentWithParagraph(t){const e=this.editor.model,n=e.document.selection,r=e.schema.getLimitElement(n),i=t.createElement("paragraph");t.remove(t.createRangeIn(r)),t.insert(i,r),t.setSelection(i,0)}_shouldReplaceFirstBlockWithParagraph(t,e){const n=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;const r=t.getFirstPosition(),i=n.schema.getLimitElement(r),o=i.getChild(0);return r.parent==o&&(!!t.containsEntireContent(o)&&(!!n.schema.checkChild(i,"paragraph")&&"paragraph"!=o.name))}}const Qf="word",Xf="selection",Jf="backward",tp="forward",ep={deleteContent:{unit:Xf,direction:Jf},deleteContentBackward:{unit:"codePoint",direction:Jf},deleteWordBackward:{unit:Qf,direction:Jf},deleteHardLineBackward:{unit:Xf,direction:Jf},deleteSoftLineBackward:{unit:Xf,direction:Jf},deleteContentForward:{unit:"character",direction:tp},deleteWordForward:{unit:Qf,direction:tp},deleteHardLineForward:{unit:Xf,direction:tp},deleteSoftLineForward:{unit:Xf,direction:tp}};class np extends ha{constructor(t){super(t);const e=t.document;let n=0;e.on("keydown",(()=>{n++})),e.on("keyup",(()=>{n=0})),e.on("beforeinput",((r,o)=>{if(!this.isEnabled)return;const{targetRanges:s,domEvent:a,inputType:c}=o,l=ep[c];if(!l)return;const d={direction:l.direction,unit:l.unit,sequence:n};d.unit==Xf&&(d.selectionToRemove=t.createSelection(s[0])),i.isAndroid&&"deleteContentBackward"===c&&(d.sequence=1,1!=s.length||s[0].start.parent==s[0].end.parent&&s[0].start.offset+1==s[0].end.offset||(d.unit=Xf,d.selectionToRemove=t.createSelection(s)));const u=new us(e,"delete",s[0]);e.fire(u,new fa(t,a,d)),u.stop.called&&r.stop()})),i.isBlink&&function(t){const e=t.view,n=e.document;let r=null,i=!1;function o(t){return t==li.backspace||t==li.delete}function s(t){return t==li.backspace?Jf:tp}n.on("keydown",((t,{keyCode:e})=>{r=e,i=!1})),n.on("keyup",((a,{keyCode:c,domEvent:l})=>{const d=n.selection,u=t.isEnabled&&c==r&&o(c)&&!d.isCollapsed&&!i;if(r=null,u){const t=d.getFirstRange(),r=new us(n,"delete",t),i={unit:Xf,direction:s(c),selectionToRemove:d};n.fire(r,new fa(e,l,i))}})),n.on("beforeinput",((t,{inputType:e})=>{const n=ep[e];o(r)&&n&&n.direction==s(r)&&(i=!0)}),{priority:"high"}),n.on("beforeinput",((t,{inputType:e,data:n})=>{r==li.delete&&"insertText"==e&&""==n&&t.stop()}),{priority:"high"})}(this)}observe(){}}class rp extends Di{static get pluginName(){return"Delete"}init(){const t=this.editor,e=t.editing.view,n=e.document,r=t.model.document;e.addObserver(np),this._undoOnBackspace=!1;const i=new Kf(t,"forward");t.commands.add("deleteForward",i),t.commands.add("forwardDelete",i),t.commands.add("delete",new Kf(t,"backward")),this.listenTo(n,"delete",((r,i)=>{n.isComposing||i.preventDefault();const{direction:o,sequence:s,selectionToRemove:a,unit:c}=i,l="forward"===o?"deleteForward":"delete",d={sequence:s};if("selection"==c){const e=Array.from(a.getRanges()).map((e=>t.editing.mapper.toModelRange(e)));d.selection=t.model.createSelection(e)}else d.unit=c;t.execute(l,d),e.scrollToTheSelection()}),{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",((e,n)=>{this._undoOnBackspace&&"backward"==n.direction&&1==n.sequence&&"codePoint"==n.unit&&(this._undoOnBackspace=!1,t.execute("undo"),n.preventDefault(),e.stop())}),{context:"$capture"}),this.listenTo(r,"change",(()=>{this._undoOnBackspace=!1})))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class ip extends Di{static get requires(){return[Gf,rp]}static get pluginName(){return"Typing"}}function op(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce(((t,r)=>r.is("$text")||r.is("$textProxy")?t+r.data:(n=e.createPositionAfter(r),"")),""),range:e.createRange(n,t.end)}}class sp extends($()){constructor(t,e){super(),this.model=t,this.testCallback=e,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",(()=>{this.isEnabled?this._startListening():(this.stopListening(t.document.selection),this.stopListening(t.document))})),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",((e,{directChange:n})=>{n&&(t.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1))})),this.listenTo(t,"change:data",((t,e)=>{!e.isUndo&&e.isLocal&&this._evaluateTextBeforeSelection("data",{batch:e})}))}_evaluateTextBeforeSelection(t,e={}){const n=this.model,r=n.document.selection,i=n.createRange(n.createPositionAt(r.focus.parent,0),r.focus),{text:o,range:s}=op(i,n),a=this.testCallback(o);if(!a&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!a,a){const n=Object.assign(e,{text:o,range:s});"object"==typeof a&&Object.assign(n,a),this.fire(`matched:${t}`,n)}}}class ap extends Di{static get pluginName(){return"TwoStepCaretMovement"}constructor(t){super(t),this.attributes=new Set,this._overrideUid=null}init(){const t=this.editor,e=t.model,n=t.editing.view,r=t.locale,i=e.document.selection;this.listenTo(n.document,"arrowKey",((t,e)=>{if(!i.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;const n=e.keyCode==li.arrowright,o=e.keyCode==li.arrowleft;if(!n&&!o)return;const s=r.contentLanguageDirection;let a=!1;a="ltr"===s&&n||"rtl"===s&&o?this._handleForwardMovement(e):this._handleBackwardMovement(e),!0===a&&t.stop()}),{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(i,"change:range",((t,e)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!e.directChange&&up(i.getFirstPosition(),this.attributes)||this._restoreGravity())}))}registerAttribute(t){this.attributes.add(t)}_handleForwardMovement(t){const e=this.attributes,n=this.editor.model.document.selection,r=n.getFirstPosition();return!this._isGravityOverridden&&((!r.isAtStart||!cp(n,e))&&(!!up(r,e)&&(dp(t),this._overrideGravity(),!0)))}_handleBackwardMovement(t){const e=this.attributes,n=this.editor.model,r=n.document.selection,i=r.getFirstPosition();return this._isGravityOverridden?(dp(t),this._restoreGravity(),lp(n,e,i),!0):i.isAtStart?!!cp(r,e)&&(dp(t),lp(n,e,i),!0):!!function(t,e){return up(t.getShiftedBy(-1),e)}(i,e)&&(i.isAtEnd&&!cp(r,e)&&up(i,e)?(dp(t),lp(n,e,i),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1))}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change((t=>t.overrideSelectionGravity()))}_restoreGravity(){this.editor.model.change((t=>{t.restoreSelectionGravity(this._overrideUid),this._overrideUid=null}))}}function cp(t,e){for(const n of e)if(t.hasAttribute(n))return!0;return!1}function lp(t,e,n){const r=n.nodeBefore;t.change((t=>{r?t.setSelectionAttribute(r.getAttributes()):t.removeSelectionAttribute(e)}))}function dp(t){t.preventDefault()}function up(t,e){const{nodeBefore:n,nodeAfter:r}=t;for(const t of e){const e=n?n.getAttribute(t):void 0;if((r?r.getAttribute(t):void 0)!==e)return!0}return!1}var hp=/[\\^$.*+?()[\]{}|]/g,gp=RegExp(hp.source);const fp=function(t){return(t=mo(t))&&gp.test(t)?t.replace(hp,"\\$&"):t},pp={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:_p('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:_p("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:_p("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:_p('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:_p('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:_p("'"),to:[null,"‚",null,"’"]}},mp={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},bp=["symbols","mathematical","typography","quotes"];function kp(t){return"string"==typeof t?new RegExp(`(${fp(t)})$`):t}function wp(t){return"string"==typeof t?()=>[t]:t instanceof Array?()=>t:t}function yp(t){return(t.textNode?t.textNode:t.nodeAfter).getAttributes()}function _p(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}function vp(t,e,n,r){return r.createRange(Ap(t,e,n,!0,r),Ap(t,e,n,!1,r))}function Ap(t,e,n,r,i){let o=t.textNode||(r?t.nodeBefore:t.nodeAfter),s=null;for(;o&&o.getAttribute(e)==n;)s=o,o=r?o.previousSibling:o.nextSibling;return s?i.createPositionAt(s,r?"before":"after"):t}function Cp(t,e,n,r){const i=t.editing.view,o=new Set;i.document.registerPostFixer((i=>{const s=t.model.document.selection;let a=!1;if(s.hasAttribute(e)){const c=vp(s.getFirstPosition(),e,s.getAttribute(e),t.model),l=t.editing.mapper.toViewRange(c);for(const t of l.getItems())t.is("element",n)&&!t.hasClass(r)&&(i.addClass(r,t),o.add(t),a=!0)}return a})),t.conversion.for("editingDowncast").add((t=>{function e(){i.change((t=>{for(const e of o.values())t.removeClass(r,e),o.delete(e)}))}t.on("insert",e,{priority:"highest"}),t.on("remove",e,{priority:"highest"}),t.on("attribute",e,{priority:"highest"}),t.on("selection",e,{priority:"highest"})}))}function xp(t,e,n,r){let i,o=null;"function"==typeof r?i=r:(o=t.commands.get(r),i=()=>{t.execute(r)}),t.model.document.on("change:data",((s,a)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const c=_i(t.model.document.selection.getRanges());if(!c.isCollapsed)return;if(a.isUndo||!a.isLocal)return;const l=Array.from(t.model.document.differ.getChanges()),d=l[0];if(1!=l.length||"insert"!==d.type||"$text"!=d.name||1!=d.length)return;const u=d.position.parent;if(u.is("element","codeBlock"))return;if(u.is("element","listItem")&&"function"!=typeof r&&!["numberedList","bulletedList","todoList"].includes(r))return;if(o&&!0===o.value)return;const h=u.getChild(0),g=t.model.createRangeOn(h);if(!g.containsRange(c)&&!c.end.isEqual(g.end))return;const f=n.exec(h.data.substr(0,c.end.offset));f&&t.model.enqueueChange((e=>{const n=e.createPositionAt(u,0),r=e.createPositionAt(u,f[0].length),o=new Nc(n,r);if(!1!==i({match:f})){e.remove(o);const n=t.model.document.selection.getFirstRange(),r=e.createRangeIn(u);!u.isEmpty||r.isEqual(n)||r.containsRange(n,!0)||e.remove(u)}o.detach(),t.model.enqueueChange((()=>{t.plugins.get("Delete").requestUndoOnBackspace()}))}))}))}function Ep(t,e,n,r){let i,o;n instanceof RegExp?i=n:o=n,o=o||(t=>{let e;const n=[],r=[];for(;null!==(e=i.exec(t))&&!(e&&e.length<4);){let{index:t,1:i,2:o,3:s}=e;const a=i+o+s;t+=e[0].length-a.length;const c=[t,t+i.length],l=[t+i.length+o.length,t+i.length+o.length+s.length];n.push(c),n.push(l),r.push([t+i.length,t+i.length+o.length])}return{remove:n,format:r}}),t.model.document.on("change:data",((n,i)=>{if(i.isUndo||!i.isLocal||!e.isEnabled)return;const s=t.model,a=s.document.selection;if(!a.isCollapsed)return;const c=Array.from(s.document.differ.getChanges()),l=c[0];if(1!=c.length||"insert"!==l.type||"$text"!=l.name||1!=l.length)return;const d=a.focus,u=d.parent,{text:h,range:g}=function(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce(((t,r)=>!r.is("$text")&&!r.is("$textProxy")||r.getAttribute("code")?(n=e.createPositionAfter(r),""):t+r.data),""),range:e.createRange(n,t.end)}}(s.createRange(s.createPositionAt(u,0),d),s),f=o(h),p=Tp(g.start,f.format,s),m=Tp(g.start,f.remove,s);p.length&&m.length&&s.enqueueChange((e=>{if(!1!==r(e,p)){for(const t of m.reverse())e.remove(t);s.enqueueChange((()=>{t.plugins.get("Delete").requestUndoOnBackspace()}))}}))}))}function Tp(t,e,n){return e.filter((t=>void 0!==t[0]&&void 0!==t[1])).map((e=>n.createRange(t.getShiftedBy(e[0]),t.getShiftedBy(e[1]))))}function Sp(t,e){return(n,r)=>{if(!t.commands.get(e).isEnabled)return!1;const i=t.model.schema.getValidRanges(r,e);for(const t of i)n.setAttribute(e,!0,t);n.removeSelectionAttribute(e)}}class Dp extends pa{constructor(t){super(t);const e=this.document;function n(t){return(n,r)=>{r.preventDefault();const i=r.dropRange?[r.dropRange]:null,o=new h(e,t);e.fire(o,{dataTransfer:r.dataTransfer,method:n.name,targetRanges:i,target:r.target}),o.stop.called&&r.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(e,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"dragover",n("dragging"),{priority:"low"})}onDomEvent(t){const e={dataTransfer:new rc("clipboardData"in t?t.clipboardData:t.dataTransfer)};"drop"!=t.type&&"dragover"!=t.type||(e.dropRange=function(t,e){const n=e.target.ownerDocument,r=e.clientX,i=e.clientY;let o;n.caretRangeFromPoint&&n.caretRangeFromPoint(r,i)?o=n.caretRangeFromPoint(r,i):e.rangeParent&&(o=n.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0));if(o)return t.domConverter.domRangeToView(o);return null}(this.view,t)),this.fire(t.type,t,e)}}const Mp=["figcaption","li"];function Ip(t){let e="";if(t.is("$text")||t.is("$textProxy"))e=t.data;else if(t.is("element","img")&&t.hasAttribute("alt"))e=t.getAttribute("alt");else if(t.is("element","br"))e="\n";else{let n=null;for(const r of t.getChildren()){const t=Ip(r);n&&(n.is("containerElement")||r.is("containerElement"))&&(Mp.includes(n.name)||Mp.includes(r.name)?e+="\n":e+="\n\n"),e+=t,n=r}}return e}class Bp extends Di{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(Dp),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,r=n.document;this.listenTo(r,"clipboardInput",(e=>{t.isReadOnly&&e.stop()}),{priority:"highest"}),this.listenTo(r,"clipboardInput",((t,e)=>{const r=e.dataTransfer;let i;if(e.content)i=e.content;else{let t="";r.getData("text/html")?t=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,((t,e)=>1==e.length?" ":e)).replace(/<!--[\s\S]*?-->/g,"")}(r.getData("text/html")):r.getData("text/plain")&&(((o=(o=r.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||o.includes("<br>"))&&(o=`<p>${o}</p>`),t=o),i=this.editor.data.htmlProcessor.toView(t)}var o;const s=new h(this,"inputTransformation");this.fire(s,{content:i,dataTransfer:r,targetRanges:e.targetRanges,method:e.method}),s.stop.called&&t.stop(),n.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",((t,n)=>{if(n.content.isEmpty)return;const r=this.editor.data.toModel(n.content,"$clipboardHolder");0!=r.childCount&&(t.stop(),e.change((()=>{this.fire("contentInsertion",{content:r,method:n.method,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})})))}),{priority:"low"}),this.listenTo(this,"contentInsertion",((t,n)=>{n.resultRange=e.insertContent(n.content)}),{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,n=t.editing.view.document,r=(r,i)=>{const o=i.dataTransfer;i.preventDefault();const s=t.data.toView(t.model.getSelectedContent(e.selection));n.fire("clipboardOutput",{dataTransfer:o,content:s,method:r.name})};this.listenTo(n,"copy",r,{priority:"low"}),this.listenTo(n,"cut",((e,n)=>{t.isReadOnly?n.preventDefault():r(e,n)}),{priority:"low"}),this.listenTo(n,"clipboardOutput",((n,r)=>{r.content.isEmpty||(r.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(r.content)),r.dataTransfer.setData("text/plain",Ip(r.content))),"cut"==r.method&&t.model.deleteContent(e.selection)}),{priority:"low"})}}function*Lp(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class Np extends Ii{execute(){this.editor.model.change((t=>{this.enterBlock(t),this.fire("afterExecute",{writer:t})}))}enterBlock(t){const e=this.editor.model,n=e.document.selection,r=e.schema,i=n.isCollapsed,o=n.getFirstRange(),s=o.start.parent,a=o.end.parent;if(r.isLimit(s)||r.isLimit(a))return i||s!=a||e.deleteContent(n),!1;if(i){const e=Lp(t.model.schema,n.getAttributes());return Op(t,o.start),t.setSelectionAttribute(e),!0}{const r=!(o.start.isAtStart&&o.end.isAtEnd),i=s==a;if(e.deleteContent(n,{leaveUnmerged:r}),r){if(i)return Op(t,n.focus),!0;t.setSelection(a,0)}}return!1}}function Op(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}const Pp={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Rp extends ha{constructor(t){super(t);const e=this.document;e.on("beforeinput",((n,r)=>{if(!this.isEnabled)return;const i=r.domEvent,o=Pp[r.inputType];if(!o)return;const s=new us(e,"enter",r.targetRanges[0]);e.fire(s,new fa(t,i,{isSoft:o.isSoft})),s.stop.called&&n.stop()}))}observe(){}}class zp extends Di{static get pluginName(){return"Enter"}init(){const t=this.editor,e=t.editing.view,n=e.document;e.addObserver(Rp),t.commands.add("enter",new Np(t)),this.listenTo(n,"enter",((r,i)=>{n.isComposing||i.preventDefault(),i.isSoft||(t.execute("enter"),e.scrollToTheSelection())}),{priority:"low"})}}class Fp extends Ii{execute(){const t=this.editor.model,e=t.document;t.change((n=>{!function(t,e,n){const r=n.isCollapsed,i=n.getFirstRange(),o=i.start.parent,s=i.end.parent,a=o==s;if(r){const r=Lp(t.schema,n.getAttributes());jp(t,e,i.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(r)}else{const r=!(i.start.isAtStart&&i.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:r}),a?jp(t,e,n.focus):r&&e.setSelection(s,0)}}(t,n,e.selection),this.fire("afterExecute",{writer:n})}))}refresh(){const t=this.editor.model,e=t.document;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,o=r.end.parent;if((Vp(i,t)||Vp(o,t))&&i!==o)return!1;return!0}(t.schema,e.selection)}}function jp(t,e,n){const r=e.createElement("softBreak");t.insertContent(r,n),e.setSelection(r,"after")}function Vp(t,e){return!t.is("rootElement")&&(e.isLimit(t)||Vp(t.parent,e))}class $p extends Di{static get pluginName(){return"ShiftEnter"}init(){const t=this.editor,e=t.model.schema,n=t.conversion,r=t.editing.view,i=r.document;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(t,{writer:e})=>e.createEmptyElement("br")}),r.addObserver(Rp),t.commands.add("shiftEnter",new Fp(t)),this.listenTo(i,"enter",((e,n)=>{i.isComposing||n.preventDefault(),n.isSoft&&(t.execute("shiftEnter"),r.scrollToTheSelection())}),{priority:"low"})}}class Hp extends(T()){constructor(){super(),this._stack=[]}add(t,e){const n=this._stack,r=n[0];this._insertDescriptor(t);const i=n[0];r===i||Up(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}remove(t,e){const n=this._stack,r=n[0];this._removeDescriptor(t);const i=n[0];r===i||Up(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex((e=>e.id===t.id));if(Up(t,e[n]))return;n>-1&&e.splice(n,1);let r=0;for(;e[r]&&Wp(e[r],t);)r++;e.splice(r,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex((e=>e.id===t));n>-1&&e.splice(n,1)}}function Up(t,e){return t&&e&&t.priority==e.priority&&qp(t.classes)==qp(e.classes)}function Wp(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&qp(t.classes)>qp(e.classes)}function qp(t){return Array.isArray(t)?t.sort().join(","):t}const Yp='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',Gp="ck-widget_selected";function Zp(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}function Kp(t,e,n={}){if(!t.is("containerElement"))throw new b("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass("ck-widget",t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=nm,e.setCustomProperty("widgetLabel",[],t),n.label&&function(t,e){t.getCustomProperty("widgetLabel").push(e)}(t,n.label),n.hasSelectionHandle&&function(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(t){const e=this.toDomElement(t),n=new qh;return n.set("content",Yp),n.render(),e.appendChild(n.element),e}));e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}(t,e),Jp(t,e),t}function Qp(t,e,n){if(e.classes&&n.addClass(bi(e.classes),t),e.attributes)for(const r in e.attributes)n.setAttribute(r,e.attributes[r],t)}function Xp(t,e,n){if(e.classes&&n.removeClass(bi(e.classes),t),e.attributes)for(const r in e.attributes)n.removeAttribute(r,t)}function Jp(t,e,n=Qp,r=Xp){const i=new Hp;i.on("change:top",((e,i)=>{i.oldDescriptor&&r(t,i.oldDescriptor,i.writer),i.newDescriptor&&n(t,i.newDescriptor,i.writer)}));e.setCustomProperty("addHighlight",((t,e,n)=>i.add(e,n)),t),e.setCustomProperty("removeHighlight",((t,e,n)=>i.remove(e,n)),t)}function tm(t,e,n={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),e.setAttribute("role","textbox",t),n.label&&e.setAttribute("aria-label",n.label,t),e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",((n,r,i)=>{e.setAttribute("contenteditable",i?"false":"true",t)})),t.on("change:isFocused",((n,r,i)=>{i?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t)})),Jp(t,e),t}function em(t,e){const n=t.getSelectedElement();if(n){const r=om(t);if(r)return e.createRange(e.createPositionAt(n,r))}return Kd(t,e)}function nm(){return null}const rm="widget-type-around";function im(t,e,n){return!!t&&Zp(t)&&!n.isInline(e)}function om(t){return t.getAttribute(rm)}var sm=n(4921),am={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(sm.Z,am);sm.Z.locals;const cm=["before","after"],lm=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,dm="ck-widget__type-around_disabled";class um extends Di{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[zp,rp]}constructor(t){super(t),this._currentFakeCaretModelElement=null}init(){const t=this.editor,e=t.editing.view;this.on("change:isEnabled",((n,r,i)=>{e.change((t=>{for(const n of e.document.roots)i?t.removeClass(dm,n):t.addClass(dm,n)})),i||t.model.change((t=>{t.removeSelectionAttribute(rm)}))})),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(t,e){const n=this.editor,r=n.editing.view,i=n.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);n.execute("insertParagraph",{position:n.model.createPositionAt(t,e),attributes:i}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(t,e,n,r){this.listenTo(t,e,((...t)=>{this.isEnabled&&n(...t)}),r)}_insertParagraphAccordingToFakeCaretPosition(){const t=this.editor.model.document.selection,e=om(t);if(!e)return!1;const n=t.getSelectedElement();return this._insertParagraph(n,e),!0}_enableTypeAroundUIInjection(){const t=this.editor,e=t.model.schema,n=t.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};t.editing.downcastDispatcher.on("insert",((t,i,o)=>{const s=o.mapper.toViewElement(i.item);if(s&&im(s,i.item,e)){!function(t,e,n){const r=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(t){const n=this.toDomElement(t);return function(t,e){for(const n of cm){const r=new Qu({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:e[n],"aria-hidden":"true"},children:[t.ownerDocument.importNode(lm,!0)]});t.appendChild(r.render())}}(n,e),function(t){const e=new Qu({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}(n),n}));t.insert(t.createPositionAt(n,"end"),r)}(o.writer,r,s);s.getCustomProperty("widgetLabel").push((()=>this.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""))}}),{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const t=this.editor,e=t.model,n=e.document.selection,r=e.schema,i=t.editing.view;function o(t){return`ck-widget_type-around_show-fake-caret_${t}`}this._listenToIfEnabled(i.document,"arrowKey",((t,e)=>{this._handleArrowKeyPress(t,e)}),{context:[Zp,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",((e,n)=>{n.directChange&&t.model.change((t=>{t.removeSelectionAttribute(rm)}))})),this._listenToIfEnabled(e.document,"change:data",(()=>{const e=n.getSelectedElement();if(e){if(im(t.editing.mapper.toViewElement(e),e,r))return}t.model.change((t=>{t.removeSelectionAttribute(rm)}))})),this._listenToIfEnabled(t.editing.downcastDispatcher,"selection",((t,e,n)=>{const i=n.writer;if(this._currentFakeCaretModelElement){const t=n.mapper.toViewElement(this._currentFakeCaretModelElement);t&&(i.removeClass(cm.map(o),t),this._currentFakeCaretModelElement=null)}const s=e.selection.getSelectedElement();if(!s)return;const a=n.mapper.toViewElement(s);if(!im(a,s,r))return;const c=om(e.selection);c&&(i.addClass(o(c),a),this._currentFakeCaretModelElement=s)})),this._listenToIfEnabled(t.ui.focusTracker,"change:isFocused",((e,n,r)=>{r||t.model.change((t=>{t.removeSelectionAttribute(rm)}))}))}_handleArrowKeyPress(t,e){const n=this.editor,r=n.model,i=r.document.selection,o=r.schema,s=n.editing.view,a=function(t,e){const n=fi(t,e);return"down"===n||"right"===n}(e.keyCode,n.locale.contentLanguageDirection),c=s.document.selection.getSelectedElement();let l;im(c,n.editing.mapper.toModelElement(c),o)?l=this._handleArrowKeyPressOnSelectedWidget(a):i.isCollapsed?l=this._handleArrowKeyPressWhenSelectionNextToAWidget(a):e.shiftKey||(l=this._handleArrowKeyPressWhenNonCollapsedSelection(a)),l&&(e.preventDefault(),t.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor.model,n=om(e.document.selection);return e.change((e=>{if(!n)return e.setSelectionAttribute(rm,t?"after":"before"),!0;if(!(n===(t?"after":"before")))return e.removeSelectionAttribute(rm),!0;return!1}))}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,n=e.model,r=n.schema,i=e.plugins.get("Widget"),o=i._getObjectElementNextToSelection(t);return!!im(e.editing.mapper.toViewElement(o),o,r)&&(n.change((e=>{i._setSelectionOverElement(o),e.setSelectionAttribute(rm,t?"before":"after")})),!0)}_handleArrowKeyPressWhenNonCollapsedSelection(t){const e=this.editor,n=e.model,r=n.schema,i=e.editing.mapper,o=n.document.selection,s=t?o.getLastPosition().nodeBefore:o.getFirstPosition().nodeAfter;return!!im(i.toViewElement(s),s,r)&&(n.change((e=>{e.setSelection(s,"on"),e.setSelectionAttribute(rm,t?"after":"before")})),!0)}_enableInsertingParagraphsOnButtonClick(){const t=this.editor,e=t.editing.view;this._listenToIfEnabled(e.document,"mousedown",((n,r)=>{const i=r.domTarget.closest(".ck-widget__type-around__button");if(!i)return;const o=function(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(i),s=function(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}(i,e.domConverter),a=t.editing.mapper.toModelElement(s);this._insertParagraph(a,o),r.preventDefault(),n.stop()}))}_enableInsertingParagraphsOnEnterKeypress(){const t=this.editor,e=t.model.document.selection,n=t.editing.view;this._listenToIfEnabled(n.document,"enter",((n,r)=>{if("atTarget"!=n.eventPhase)return;const i=e.getSelectedElement(),o=t.editing.mapper.toViewElement(i),s=t.model.schema;let a;this._insertParagraphAccordingToFakeCaretPosition()?a=!0:im(o,i,s)&&(this._insertParagraph(i,r.isSoft?"before":"after"),a=!0),a&&(r.preventDefault(),n.stop())}),{context:Zp})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",((e,n)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(n.selection=t.selection)}),{priority:"high"}),i.isAndroid?this._listenToIfEnabled(t,"keydown",((t,e)=>{229==e.keyCode&&this._insertParagraphAccordingToFakeCaretPosition()})):this._listenToIfEnabled(t,"compositionstart",(()=>{this._insertParagraphAccordingToFakeCaretPosition()}),{priority:"high"})}_enableDeleteIntegration(){const t=this.editor,e=t.editing.view,n=t.model,r=n.schema;this._listenToIfEnabled(e.document,"delete",((e,i)=>{if("atTarget"!=e.eventPhase)return;const o=om(n.document.selection);if(!o)return;const s=i.direction,a=n.document.selection.getSelectedElement(),c="forward"==s;if("before"===o===c)t.execute("delete",{selection:n.createSelection(a,"on")});else{const e=r.getNearestSelectionRange(n.createPositionAt(a,o),s);if(e)if(e.isCollapsed){const i=n.createSelection(e.start);if(n.modifySelection(i,{direction:s}),i.focus.isEqual(e.start)){const t=function(t,e){let n=e;for(const r of e.getAncestors({parentFirst:!0})){if(r.childCount>1||t.isLimit(r))break;n=r}return n}(r,e.start.parent);n.deleteContent(n.createSelection(t,"on"),{doNotAutoparagraph:!0})}else n.change((n=>{n.setSelection(e),t.execute(c?"deleteForward":"delete")}))}else n.change((n=>{n.setSelection(e),t.execute(c?"deleteForward":"delete")}))}i.preventDefault(),e.stop()}),{context:Zp})}_enableInsertContentIntegration(){const t=this.editor,e=this.editor.model,n=e.document.selection;this._listenToIfEnabled(t.model,"insertContent",((t,[r,i])=>{if(i&&!i.is("documentSelection"))return;const o=om(n);return o?(t.stop(),e.change((t=>{const i=n.getSelectedElement(),s=e.createPositionAt(i,o),a=t.createSelection(s),c=e.insertContent(r,a);return t.setSelection(a),c}))):void 0}),{priority:"high"})}_enableInsertObjectIntegration(){const t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",((t,n)=>{const[,r,,i={}]=n;if(r&&!r.is("documentSelection"))return;const o=om(e);o&&(i.findOptimalPosition=o,n[3]=i)}),{priority:"high"})}_enableDeleteContentIntegration(){const t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",((t,[n])=>{if(n&&!n.is("documentSelection"))return;om(e)&&t.stop()}),{priority:"high"})}}function hm(t){const e=t.model;return(n,r)=>{const i=r.keyCode==li.arrowup,o=r.keyCode==li.arrowdown,s=r.shiftKey,a=e.document.selection;if(!i&&!o)return;const c=o;if(s&&function(t,e){return!t.isCollapsed&&t.isBackward==e}(a,c))return;const l=function(t,e,n){const r=t.model;if(n){const t=e.isCollapsed?e.focus:e.getLastPosition(),n=gm(r,t,"forward");if(!n)return null;const i=r.createRange(t,n),o=fm(r.schema,i,"backward");return o?r.createRange(t,o):null}{const t=e.isCollapsed?e.focus:e.getFirstPosition(),n=gm(r,t,"backward");if(!n)return null;const i=r.createRange(n,t),o=fm(r.schema,i,"forward");return o?r.createRange(o,t):null}}(t,a,c);if(l){if(l.isCollapsed){if(a.isCollapsed)return;if(s)return}(l.isCollapsed||function(t,e,n){const r=t.model,i=t.view.domConverter;if(n){const t=r.createSelection(e.start);r.modifySelection(t),t.focus.isAtEnd||e.start.isEqual(t.focus)||(e=r.createRange(t.focus,e.end))}const o=t.mapper.toViewRange(e),s=i.viewRangeToDom(o),a=Pr.getDomRangeRects(s);let c;for(const t of a)if(void 0!==c){if(Math.round(t.top)>=c)return!1;c=Math.max(c,Math.round(t.bottom))}else c=Math.round(t.bottom);return!0}(t,l,c))&&(e.change((t=>{const n=c?l.end:l.start;if(s){const r=e.createSelection(a.anchor);r.setFocus(n),t.setSelection(r)}else t.setSelection(n)})),n.stop(),r.preventDefault(),r.stopPropagation())}}}function gm(t,e,n){const r=t.schema,i=t.createRangeIn(e.root),o="forward"==n?"elementStart":"elementEnd";for(const{previousPosition:t,item:s,type:a}of i.getWalker({startPosition:e,direction:n})){if(r.isLimit(s)&&!r.isInline(s))return t;if(a==o&&r.isBlock(s))return null}return null}function fm(t,e,n){const r="backward"==n?e.end:e.start;if(t.checkChild(r,"$text"))return r;for(const{nextPosition:r}of e.getWalker({direction:n}))if(t.checkChild(r,"$text"))return r;return null}var pm=n(3488),mm={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(pm.Z,mm);pm.Z.locals;class bm extends Di{static get pluginName(){return"Widget"}static get requires(){return[um,rp]}init(){const t=this.editor,e=t.editing.view,n=e.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",((e,n,r)=>{const i=r.writer,o=n.selection;if(o.isCollapsed)return;const s=o.getSelectedElement();if(!s)return;const a=t.editing.mapper.toViewElement(s);var c;Zp(a)&&(r.consumable.consume(o,"selection")&&i.setSelection(i.createRangeOn(a),{fake:!0,label:(c=a,c.getCustomProperty("widgetLabel").reduce(((t,e)=>"function"==typeof e?t?t+". "+e():e():t?t+". "+e:e),""))}))})),this.editor.editing.downcastDispatcher.on("selection",((t,e,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const r=n.writer,i=r.document.selection;let o=null;for(const t of i.getRanges())for(const e of t){const t=e.item;Zp(t)&&!km(t,o)&&(r.addClass(Gp,t),this._previouslySelected.add(t),o=t)}}),{priority:"low"}),e.addObserver(iu),this.listenTo(n,"mousedown",((...t)=>this._onMousedown(...t))),this.listenTo(n,"arrowKey",((...t)=>{this._handleSelectionChangeOnArrowKeyPress(...t)}),{context:[Zp,"$text"]}),this.listenTo(n,"arrowKey",((...t)=>{this._preventDefaultOnArrowKeyPress(...t)}),{context:"$root"}),this.listenTo(n,"arrowKey",hm(this.editor.editing),{context:"$text"}),this.listenTo(n,"delete",((t,e)=>{this._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())}),{context:"$root"})}_onMousedown(t,e){const n=this.editor,r=n.editing.view,o=r.document;let s=e.target;if(function(t){let e=t;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Zp(e))return!1;e=e.parent}return!1}(s)){if((i.isSafari||i.isGecko)&&e.domEvent.detail>=3){const t=n.editing.mapper,r=s.is("attributeElement")?s.findAncestor((t=>!t.is("attributeElement"))):s,i=t.toModelElement(r);e.preventDefault(),this.editor.model.change((t=>{t.setSelection(i,"in")}))}return}if(!Zp(s)&&(s=s.findAncestor(Zp),!s))return;i.isAndroid&&e.preventDefault(),o.isFocused||r.focus();const a=n.editing.mapper.toModelElement(s);this._setSelectionOverElement(a)}_handleSelectionChangeOnArrowKeyPress(t,e){const n=e.keyCode,r=this.editor.model,i=r.schema,o=r.document.selection,s=o.getSelectedElement(),a=fi(n,this.editor.locale.contentLanguageDirection),c="down"==a||"right"==a,l="up"==a||"down"==a;if(s&&i.isObject(s)){const n=c?o.getLastPosition():o.getFirstPosition(),s=i.getNearestSelectionRange(n,c?"forward":"backward");return void(s&&(r.change((t=>{t.setSelection(s)})),e.preventDefault(),t.stop()))}if(!o.isCollapsed&&!e.shiftKey){const n=o.getFirstPosition(),s=o.getLastPosition(),a=n.nodeAfter,l=s.nodeBefore;return void((a&&i.isObject(a)||l&&i.isObject(l))&&(r.change((t=>{t.setSelection(c?s:n)})),e.preventDefault(),t.stop()))}if(!o.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&i.isObject(d)){if(i.isInline(d)&&l)return;this._setSelectionOverElement(d),e.preventDefault(),t.stop()}}_preventDefaultOnArrowKeyPress(t,e){const n=this.editor.model,r=n.schema,i=n.document.selection.getSelectedElement();i&&r.isObject(i)&&(e.preventDefault(),t.stop())}_handleDelete(t){if(this.editor.isReadOnly)return;const e=this.editor.model.document.selection;if(!e.isCollapsed)return;const n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change((t=>{let r=e.anchor.parent;for(;r.isEmpty;){const e=r;r=e.parent,t.remove(e)}this._setSelectionOverElement(n)})),!0):void 0}_setSelectionOverElement(t){this.editor.model.change((e=>{e.setSelection(e.createRangeOn(t))}))}_getObjectElementNextToSelection(t){const e=this.editor.model,n=e.schema,r=e.document.selection,i=e.createSelection(r);if(e.modifySelection(i,{direction:t?"forward":"backward"}),i.isEqual(r))return null;const o=t?i.focus.nodeBefore:i.focus.nodeAfter;return o&&n.isObject(o)?o:null}_clearPreviouslySelectedWidgets(t){for(const e of this._previouslySelected)t.removeClass(Gp,e);this._previouslySelected.clear()}}function km(t,e){return!!e&&Array.from(t.getAncestors()).includes(e)}class wm extends Di{static get requires(){return[wf]}static get pluginName(){return"WidgetToolbarRepository"}init(){const t=this.editor;if(t.plugins.has("BalloonToolbar")){const e=t.plugins.get("BalloonToolbar");this.listenTo(e,"show",(e=>{(function(t){const e=t.getSelectedElement();return!(!e||!Zp(e))})(t.editing.view.document.selection)&&e.stop()}),{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",(()=>{this._updateToolbarsVisibility()})),this.listenTo(t.ui,"update",(()=>{this._updateToolbarsVisibility()})),this.listenTo(t.ui.focusTracker,"change:isFocused",(()=>{this._updateToolbarsVisibility()}),{priority:"low"})}destroy(){super.destroy();for(const t of this._toolbarDefinitions.values())t.view.destroy()}register(t,{ariaLabel:e,items:n,getRelatedElement:r,balloonClassName:i="ck-toolbar-container"}){if(!n.length)return void k("widget-toolbar-no-items",{toolbarId:t});const o=this.editor,s=o.t,a=new Cg(o.locale);if(a.ariaLabel=e||s("Widget toolbar"),this._toolbarDefinitions.has(t))throw new b("widget-toolbar-duplicated",this,{toolbarId:t});a.fillFromConfig(n,o.ui.componentFactory);const c={view:a,getRelatedElement:r,balloonClassName:i};o.ui.addToolbar(a,{isContextual:!0,beforeFocus:()=>{const t=r(o.editing.view.document.selection);t&&this._showToolbar(c,t)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(t,c)}_updateToolbarsVisibility(){let t=0,e=null,n=null;for(const r of this._toolbarDefinitions.values()){const i=r.getRelatedElement(this.editor.editing.view.document.selection);if(this.isEnabled&&i)if(this.editor.ui.focusTracker.isFocused){const o=i.getAncestors().length;o>t&&(t=o,e=i,n=r)}else this._isToolbarVisible(r)&&this._hideToolbar(r);else this._isToolbarInBalloon(r)&&this._hideToolbar(r)}n&&this._showToolbar(n,e)}_hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(t,e){this._isToolbarVisible(t)?ym(this.editor,e):this._isToolbarInBalloon(t)||(this._balloon.add({view:t.view,position:_m(this.editor,e),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",(()=>{for(const t of this._toolbarDefinitions.values())if(this._isToolbarVisible(t)){const e=t.getRelatedElement(this.editor.editing.view.document.selection);ym(this.editor,e)}})))}_isToolbarVisible(t){return this._balloon.visibleView===t.view}_isToolbarInBalloon(t){return this._balloon.hasView(t.view)}}function ym(t,e){const n=t.plugins.get("ContextualBalloon"),r=_m(t,e);n.updatePosition(r)}function _m(t,e){const n=t.editing.view,r=xh.defaultPositions;return{target:n.domConverter.mapViewToDom(e),positions:[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.viewportStickyNorth]}}class vm extends($()){constructor(t){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=t,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(t,e,n){const r=new Pr(e);this.activeHandlePosition=function(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)if(t.classList.contains(Am(n)))return n}(t),this._referenceCoordinates=function(t,e){const n=new Pr(t),r=e.split("-"),i={x:"right"==r[1]?n.right:n.left,y:"bottom"==r[0]?n.bottom:n.top};return i.x+=t.ownerDocument.defaultView.scrollX,i.y+=t.ownerDocument.defaultView.scrollY,i}(e,function(t){const e=t.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[e[0]]}-${n[e[1]]}`}(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;const i=n.style.width;i&&i.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(i):this._originalWidthPercents=function(t,e){const n=t.parentElement,r=parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);return e.width/r*100}(n,r)}update(t){this.proposedWidth=t.width,this.proposedHeight=t.height,this.proposedWidthPercents=t.widthPercents,this.proposedHandleHostWidth=t.handleHostWidth,this.proposedHandleHostHeight=t.handleHostHeight}}function Am(t){return`ck-widget__resizer__handle-${t}`}class Cm extends yh{constructor(){super();const t=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",t.to("_viewPosition",(t=>t?`ck-orientation-${t}`:""))],style:{display:t.if("_isVisible","none",(t=>!t))}},children:[{text:t.to("_label")}]})}_bindToState(t,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",((t,e)=>null!==t&&null!==e)),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",((e,n,r)=>"px"===t.unit?`${e}×${n}`:`${r}%`)),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",((t,e,n)=>e<50||n<50?"above-center":t))}_dismiss(){this.unbind(),this._isVisible=!1}}class xm extends($()){constructor(t){super(),this._options=t,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",((t,e)=>t&&e)),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",(t=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),t.stop())}),{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change((t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)}))}hide(){this._options.editor.editing.view.change((t=>{t.addClass("ck-hidden",this._viewResizerWrapper)}))}attach(){const t=this,e=this._options.viewElement;this._options.editor.editing.view.change((n=>{const r=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(e){const n=this.toDomElement(e);return t._appendHandles(n),t._appendSizeUI(n),n}));n.insert(n.createPositionAt(e,"end"),r),n.addClass("ck-widget_with-resizer",e),this._viewResizerWrapper=r,this.isVisible||this.hide()})),this.on("change:isVisible",(()=>{this.isVisible?(this.show(),this.redraw()):this.hide()}))}begin(t){this._state=new vm(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(t,this._getHandleHost(),this._getResizeHost())}updateSize(t){const e=this._proposeNewSize(t);this._options.editor.editing.view.change((t=>{const n=this._options.unit||"%",r=("%"===n?e.widthPercents:e.width)+n;t.setStyle("width",r,this._options.viewElement)}));const n=this._getHandleHost(),r=new Pr(n),i=Math.round(r.width),o=Math.round(r.height),s=new Pr(n);e.width=Math.round(s.width),e.height=Math.round(s.height),this.redraw(r),this.state.update({...e,handleHostWidth:i,handleHostHeight:o})}commit(){const t=this._options.unit||"%",e=("%"===t?this.state.proposedWidthPercents:this.state.proposedWidth)+t;this._options.editor.editing.view.change((()=>{this._cleanup(),this._options.onCommit(e)}))}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(t){const e=this._domResizerWrapper;if(!((n=e)&&n.ownerDocument&&n.ownerDocument.contains(n)))return;var n;const r=e.parentElement,i=this._getHandleHost(),o=this._viewResizerWrapper,s=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(r.isSameNode(i)){const e=t||new Pr(i);a=[e.width+"px",e.height+"px",void 0,void 0]}else a=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];"same"!==K(s,a)&&this._options.editor.editing.view.change((t=>{t.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)}))}containsHandle(t){return this._domResizerWrapper.contains(t)}static isResizeHandle(t){return t.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss();this._options.editor.editing.view.change((t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)}))}_proposeNewSize(t){const e=this.state,n={x:(r=t).pageX,y:r.pageY};var r;const i=!this._options.isCentered||this._options.isCentered(this),o={x:e._referenceCoordinates.x-(n.x+e.originalWidth),y:n.y-e.originalHeight-e._referenceCoordinates.y};i&&e.activeHandlePosition.endsWith("-right")&&(o.x=n.x-(e._referenceCoordinates.x+e.originalWidth)),i&&(o.x*=2);let s=Math.abs(e.originalWidth+o.x),a=Math.abs(e.originalHeight+o.y);return"width"==(s/e.aspectRatio>a?"width":"height")?a=s/e.aspectRatio:s=a*e.aspectRatio,{width:Math.round(s),height:Math.round(a),widthPercents:Math.min(Math.round(e.originalWidthPercents/e.originalWidth*s*100)/100,100)}}_getResizeHost(){const t=this._domResizerWrapper.parentElement;return this._options.getResizeHost(t)}_getHandleHost(){const t=this._domResizerWrapper.parentElement;return this._options.getHandleHost(t)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const r of e)t.appendChild(new Qu({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(n=r,`ck-widget__resizer__handle-${n}`)}}).render());var n}_appendSizeUI(t){this._sizeView=new Cm,this._sizeView.render(),t.appendChild(this._sizeView.element)}}const Em=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return O(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Da(t,e,{leading:r,maxWait:e,trailing:i})};var Tm=n(8506),Sm={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Tm.Z,Sm);Tm.Z.locals;class Dm extends Di{static get pluginName(){return"WidgetResize"}init(){const t=this.editor.editing,e=Mr.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),this._resizers=new Map,t.view.addObserver(iu),this._observer=new(Er()),this.listenTo(t.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(e,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(e,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=Em((()=>this.redrawSelectedResizer()),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",(()=>{for(const[t,e]of this._resizers)t.isAttached()||(this._resizers.delete(t),e.destroy())}),{priority:"lowest"}),this._observer.listenTo(Mr.window,"resize",this._redrawSelectedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",(()=>{const t=n.getSelectedElement(),e=this.getResizerByViewElement(t)||null;e?this.select(e):this.deselect()}))}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const t of this._resizers.values())t.destroy();this._redrawSelectedResizerThrottled.cancel()}select(t){this.deselect(),this.selectedResizer=t,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(t){const e=new xm(t),n=this.editor.plugins;if(e.attach(),n.has("WidgetToolbarRepository")){const t=n.get("WidgetToolbarRepository");e.on("begin",(()=>{t.forceDisabled("resize")}),{priority:"lowest"}),e.on("cancel",(()=>{t.clearForceDisabled("resize")}),{priority:"highest"}),e.on("commit",(()=>{t.clearForceDisabled("resize")}),{priority:"highest"})}this._resizers.set(t.viewElement,e);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==e&&this.select(e),e}getResizerByViewElement(t){return this._resizers.get(t)}_getResizerByHandle(t){for(const e of this._resizers.values())if(e.containsHandle(t))return e}_mouseDownListener(t,e){const n=e.domTarget;xm.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n)||null,this._activeResizer&&(this._activeResizer.begin(n),t.stop(),e.preventDefault()))}_mouseMoveListener(t,e){this._activeResizer&&this._activeResizer.updateSize(e)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}var Mm=n(903),Im={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Mm.Z,Im);Mm.Z.locals;class Bm extends Di{static get pluginName(){return"DragDrop"}static get requires(){return[Bp,bm]}init(){const t=this.editor,e=t.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=Em((t=>this._updateDropMarker(t)),40),this._removeDropMarkerDelayed=Om((()=>this._removeDropMarker()),40),this._clearDraggableAttributesDelayed=Om((()=>this._clearDraggableAttributes()),40),e.addObserver(Dp),e.addObserver(iu),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(t,"change:isReadOnly",((t,e,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})),this.on("change:isEnabled",((t,e,n)=>{n||this._finalizeDragging(!1)})),i.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const t=this.editor,e=t.model,n=e.document,r=t.editing.view,o=r.document;this.listenTo(o,"dragstart",((r,i)=>{const s=n.selection;if(i.target&&i.target.is("editableElement"))return void i.preventDefault();const a=i.target?Pm(i.target):null;if(a){const n=t.editing.mapper.toModelElement(a);this._draggedRange=Nc.fromRange(e.createRangeOn(n)),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!o.selection.isCollapsed){const t=o.selection.getSelectedElement();t&&Zp(t)||(this._draggedRange=Nc.fromRange(s.getFirstRange()))}if(!this._draggedRange)return void i.preventDefault();this._draggingUid=f(),i.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",i.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const c=e.createSelection(this._draggedRange.toRange()),l=t.data.toView(e.getSelectedContent(c));o.fire("clipboardOutput",{dataTransfer:i.dataTransfer,content:l,method:"dragstart"}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")}),{priority:"low"}),this.listenTo(o,"dragend",((t,e)=>{this._finalizeDragging(!e.dataTransfer.isCanceled&&"move"==e.dataTransfer.dropEffect)}),{priority:"low"}),this.listenTo(o,"dragenter",(()=>{this.isEnabled&&r.focus()})),this.listenTo(o,"dragleave",(()=>{this._removeDropMarkerDelayed()})),this.listenTo(o,"dragging",((e,n)=>{if(!this.isEnabled)return void(n.dataTransfer.dropEffect="none");this._removeDropMarkerDelayed.cancel();const r=Lm(t,n.targetRanges,n.target);this._draggedRange||(n.dataTransfer.dropEffect="copy"),i.isGecko||("copy"==n.dataTransfer.effectAllowed?n.dataTransfer.dropEffect="copy":["all","copyMove"].includes(n.dataTransfer.effectAllowed)&&(n.dataTransfer.dropEffect="move")),r&&this._updateDropMarkerThrottled(r)}),{priority:"low"})}_setupClipboardInputIntegration(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"clipboardInput",((e,n)=>{if("drop"!=n.method)return;const r=Lm(t,n.targetRanges,n.target);if(this._removeDropMarker(),!r)return this._finalizeDragging(!1),void e.stop();this._draggedRange&&this._draggingUid!=n.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="");if("move"==Nm(n.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(r,!0))return this._finalizeDragging(!1),void e.stop();n.targetRanges=[t.editing.mapper.toViewRange(r)]}),{priority:"high"})}_setupContentInsertionIntegration(){const t=this.editor.plugins.get(Bp);t.on("contentInsertion",((t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n=e.targetRanges.map((t=>this.editor.editing.mapper.toModelRange(t)));this.editor.model.change((t=>t.setSelection(n)))}),{priority:"high"}),t.on("contentInsertion",((t,e)=>{if(!this.isEnabled||"drop"!==e.method)return;const n="move"==Nm(e.dataTransfer),r=!e.resultRange||!e.resultRange.isCollapsed;this._finalizeDragging(r&&n)}),{priority:"lowest"})}_setupDraggableAttributeHandling(){const t=this.editor,e=t.editing.view,n=e.document;this.listenTo(n,"mousedown",((r,o)=>{if(i.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=Pm(o.target);if(i.isBlink&&!t.isReadOnly&&!s&&!n.selection.isCollapsed){const t=n.selection.getSelectedElement();t&&Zp(t)||(s=n.selection.editableElement)}s&&(e.change((t=>{t.setAttribute("draggable","true",s)})),this._draggableElement=t.editing.mapper.toModelElement(s))})),this.listenTo(n,"mouseup",(()=>{i.isAndroid||this._clearDraggableAttributesDelayed()}))}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change((e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null}))}_setupDropMarker(){const t=this.editor;t.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),t.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:n})=>{if(t.model.schema.checkChild(e.markerRange.start,"$text"))return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},(function(t){const e=this.toDomElement(t);return e.append("⁠",t.createElement("span"),"⁠"),e}))}})}_updateDropMarker(t){const e=this.editor,n=e.model.markers;e.model.change((e=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})}))}_removeDropMarker(){const t=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),t.markers.has("drop-target")&&t.change((t=>{t.removeMarker("drop-target")}))}_finalizeDragging(t){const e=this.editor,n=e.model;this._removeDropMarker(),this._clearDraggableAttributes(),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(t&&this.isEnabled&&n.deleteContent(n.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function Lm(t,e,n){const r=t.model,o=t.editing.mapper;let s=null;const a=e?e[0].start:null;if(n.is("uiElement")&&(n=n.parent),s=function(t,e){const n=t.model,r=t.editing.mapper;if(Zp(e))return n.createRangeOn(r.toModelElement(e));if(!e.is("editableElement")){const t=e.findAncestor((t=>Zp(t)||t.is("editableElement")));if(Zp(t))return n.createRangeOn(r.toModelElement(t))}return null}(t,n),s)return s;const c=function(t,e){const n=t.editing.mapper,r=t.editing.view,i=n.toModelElement(e);if(i)return i;const o=r.createPositionBefore(e),s=n.findMappedViewAncestor(o);return n.toModelElement(s)}(t,n),l=a?o.toModelPosition(a):null;return l?(s=function(t,e,n){const r=t.model;if(!r.schema.checkChild(n,"$block"))return null;const i=r.createPositionAt(n,0),o=e.path.slice(0,i.path.length),s=r.createPositionFromPath(e.root,o).nodeAfter;if(s&&r.schema.isObject(s))return r.createRangeOn(s);return null}(t,l,c),s||(s=r.schema.getNearestSelectionRange(l,i.isGecko?"forward":"backward"),s||function(t,e){const n=t.model;let r=e;for(;r;){if(n.schema.isObject(r))return n.createRangeOn(r);r=r.parent}return null}(t,l.parent))):function(t,e){const n=t.model,r=n.schema,i=n.createPositionAt(e,0);return r.getNearestSelectionRange(i,"forward")}(t,c)}function Nm(t){return i.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function Om(t,e){let n;function r(...i){r.cancel(),n=setTimeout((()=>t(...i)),e)}return r.cancel=()=>{clearTimeout(n)},r}function Pm(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(Zp);if(Zp(t))return t;const e=t.findAncestor((t=>Zp(t)||t.is("editableElement")));return Zp(e)?e:null}class Rm extends Di{static get pluginName(){return"PastePlainText"}static get requires(){return[Bp]}init(){const t=this.editor,e=t.model,n=t.editing.view,r=n.document,i=e.document.selection;let o=!1;n.addObserver(Dp),this.listenTo(r,"keydown",((t,e)=>{o=e.shiftKey})),t.plugins.get(Bp).on("contentInsertion",((t,n)=>{(o||function(t,e){if(t.childCount>1)return!1;const n=t.getChild(0);if(e.isObject(n))return!1;return 0==Array.from(n.getAttributeKeys()).length}(n.content,e.schema))&&e.change((t=>{const r=Array.from(i.getAttributes()).filter((([t])=>e.schema.getAttributeProperties(t).isFormatting));i.isCollapsed||e.deleteContent(i,{doNotAutoparagraph:!0}),r.push(...i.getAttributes());const o=t.createRangeIn(n.content);for(const e of o.getItems())e.is("$textProxy")&&t.setAttributes(r,e)}))}))}}class zm extends Di{static get pluginName(){return"Clipboard"}static get requires(){return[Bp,Bm,Rm]}}class Fm extends Ii{constructor(t){super(t),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(t.data,"set",((t,e)=>{e[1]={...e[1]};const n=e[1];n.batchType||(n.batchType={isUndoable:!1})}),{priority:"high"}),this.listenTo(t.data,"set",((t,e)=>{e[1].batchType.isUndoable||this.clearStack()}))}refresh(){this.isEnabled=this._stack.length>0}addBatch(t){const e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(t,e,n){const r=this.editor.model,i=r.document,o=[],s=t.map((t=>t.getTransformedByOperations(n))),a=s.flat();for(const t of s){const e=t.filter((t=>t.root!=i.graveyard)).filter((t=>!Vm(t,a)));e.length&&(jm(e),o.push(e[0]))}o.length&&r.change((t=>{t.setSelection(o,{backward:e})}))}_undo(t,e){const n=this.editor.model,r=n.document;this._createdBatches.add(e);const i=t.operations.slice().filter((t=>t.isDocumentOperation));i.reverse();for(const t of i){const i=t.baseVersion+1,o=Array.from(r.history.getOperations(i)),s=cd([t.getReversed()],o,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const i of s)e.addOperation(i),n.applyOperation(i),r.history.setOperationAsUndone(t,i)}}}function jm(t){t.sort(((t,e)=>t.start.isBefore(e.start)?-1:1));for(let e=1;e<t.length;e++){const n=t[e-1].getJoined(t[e],!0);n&&(e--,t.splice(e,2,n))}}function Vm(t,e){return e.some((e=>e!==t&&e.containsRange(t,!0)))}class $m extends Fm{execute(t=null){const e=t?this._stack.findIndex((e=>e.batch==t)):this._stack.length-1,n=this._stack.splice(e,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,(()=>{this._undo(n.batch,r);const t=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,t),this.fire("revert",n.batch,r)})),this.refresh()}}class Hm extends Fm{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,(()=>{const n=t.batch.operations[t.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(n);this._restoreSelection(t.selection.ranges,t.selection.isBackward,r),this._undo(t.batch,e)})),this.refresh()}}class Um extends Di{static get pluginName(){return"UndoEditing"}constructor(t){super(t),this._batchRegistry=new WeakSet}init(){const t=this.editor;this._undoCommand=new $m(t),this._redoCommand=new Hm(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",((t,e)=>{const n=e[0];if(!n.isDocumentOperation)return;const r=n.batch,i=this._redoCommand._createdBatches.has(r),o=this._undoCommand._createdBatches.has(r);this._batchRegistry.has(r)||(this._batchRegistry.add(r),r.isUndoable&&(i?this._undoCommand.addBatch(r):o||(this._undoCommand.addBatch(r),this._redoCommand.clearStack())))}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",((t,e,n)=>{this._redoCommand.addBatch(n)})),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}const Wm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',qm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class Ym extends Di{static get pluginName(){return"UndoUI"}init(){const t=this.editor,e=t.locale,n=t.t,r="ltr"==e.uiLanguageDirection?Wm:qm,i="ltr"==e.uiLanguageDirection?qm:Wm;this._addButton("undo",n("Undo"),"CTRL+Z",r),this._addButton("redo",n("Redo"),"CTRL+Y",i)}_addButton(t,e,n,r){const i=this.editor;i.ui.componentFactory.add(t,(o=>{const s=i.commands.get(t),a=new Zh(o);return a.set({label:e,icon:r,keystroke:n,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",(()=>{i.execute(t),i.editing.view.focus()})),a}))}}class Gm extends Di{static get requires(){return[Um,Ym]}static get pluginName(){return"Undo"}}function Zm(t){return t.createContainerElement("figure",{class:"image"},[t.createEmptyElement("img"),t.createSlot()])}function Km(t,e){const n=t.plugins.get("ImageUtils"),r=t.plugins.has("ImageInlineEditing")&&t.plugins.has("ImageBlockEditing");return t=>{if(!n.isInlineImageView(t))return null;if(!r)return i(t);return("block"==t.getStyle("display")||t.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline")!==e?null:i(t)};function i(t){const e={name:!0};return t.hasAttribute("src")&&(e.attributes=["src"]),e}}function Qm(t,e){const n=_i(e.getSelectedBlocks());return!n||t.isObject(n)||n.isEmpty&&"listItem"!=n.name?"imageBlock":"imageInline"}class Xm extends Di{static get pluginName(){return"ImageUtils"}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},e=null,n=null){const r=this.editor,i=r.model,o=i.document.selection;n=Jm(r,e||o,n),t={...Object.fromEntries(o.getAttributes()),...t};for(const e in t)i.schema.checkAttribute(n,e)||delete t[e];return i.change((r=>{const o=r.createElement(n,t);return i.insertObject(o,e,null,{setSelection:"on",findOptimalPosition:!e&&"imageInline"!=n}),o.parent?o:null}))}getClosestSelectedImageWidget(t){const e=t.getFirstPosition();if(!e)return null;const n=t.getSelectedElement();if(n&&this.isImageWidget(n))return n;let r=e.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(t){const e=t.getSelectedElement();return this.isImage(e)?e:t.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){const t=this.editor.model.document.selection;return function(t,e){if("imageBlock"==Jm(t,e)){const n=function(t,e){const n=em(t,e).start.parent;if(n.isEmpty&&!n.is("element","$root"))return n.parent;return n}(e,t.model);if(t.model.schema.checkChild(n,"imageBlock"))return!0}else if(t.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}(this.editor,t)&&function(t){return[...t.focus.getAncestors()].every((t=>!t.is("element","imageBlock")))}(t)}toImageWidget(t,e,n){e.setCustomProperty("image",!0,t);return Kp(t,e,{label:()=>{const e=this.findViewImgElement(t).getAttribute("alt");return e?`${e} ${n}`:n}})}isImageWidget(t){return!!t.getCustomProperty("image")&&Zp(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const e=this.editor.editing.view;for(const{item:n}of e.createRangeIn(t))if(this.isInlineImageView(n))return n}}function Jm(t,e,n){const r=t.model.schema,i=t.config.get("image.insert.type");return t.plugins.has("ImageBlockEditing")?t.plugins.has("ImageInlineEditing")?n||("inline"===i?"imageInline":"block"===i?"imageBlock":e.is("selection")?Qm(r,e):r.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const tb=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));const eb=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:_o(t,e,n)};var nb=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const rb=function(t){return nb.test(t)};const ib=function(t){return t.split("")};var ob="[\\ud800-\\udfff]",sb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ab="\\ud83c[\\udffb-\\udfff]",cb="[^\\ud800-\\udfff]",lb="(?:\\ud83c[\\udde6-\\uddff]){2}",db="[\\ud800-\\udbff][\\udc00-\\udfff]",ub="(?:"+sb+"|"+ab+")"+"?",hb="[\\ufe0e\\ufe0f]?",gb=hb+ub+("(?:\\u200d(?:"+[cb,lb,db].join("|")+")"+hb+ub+")*"),fb="(?:"+[cb+sb+"?",sb,lb,db,ob].join("|")+")",pb=RegExp(ab+"(?="+ab+")|"+fb+gb,"g");const mb=function(t){return t.match(pb)||[]};const bb=function(t){return rb(t)?mb(t):ib(t)};const kb=function(t){return function(e){e=mo(e);var n=rb(e)?bb(e):void 0,r=n?n[0]:e.charAt(0),i=n?eb(n,1).join(""):e.slice(1);return r[t]()+i}}("toUpperCase"),wb=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,yb=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,_b=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,vb=/^((\w+:(\/{2,})?)|(\W))/i,Ab="Ctrl+K";function Cb(t,{writer:e}){const n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n}function xb(t){return function(t){return t.replace(wb,"").match(yb)}(t=String(t))?t:"#"}function Eb(t,e){return!!t&&e.checkAttribute(t.name,"linkHref")}function Tb(t,e){const n=(r=t,_b.test(r)?"mailto:":e);var r;const i=!!n&&!Sb(t);return t&&i?n+t:t}function Sb(t){return vb.test(t)}function Db(t){window.open(t,"_blank","noopener")}const Mb=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Ib extends Di{static get requires(){return[rp]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",(()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")})),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const t=this.editor,e=new sp(t.model,(t=>{if(!function(t){return t.length>4&&" "===t[t.length-1]&&" "!==t[t.length-2]}(t))return;const e=Bb(t.substr(0,t.length-1));return e?{url:e}:void 0}));e.on("matched:data",((e,n)=>{const{batch:r,range:i,url:o}=n;if(!r.isTyping)return;const s=i.end.getShiftedBy(-1),a=s.getShiftedBy(-o.length),c=t.model.createRange(a,s);this._applyAutoLink(o,c)})),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",(()=>{const t=e.document.selection.getFirstPosition();if(!t.parent.previousSibling)return;const n=e.createRangeIn(t.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(n)}))}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",(()=>{const t=e.document.selection.getFirstPosition(),n=e.createRange(e.createPositionAt(t.parent,0),t.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(n)}))}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:r}=op(t,e),i=Bb(n);if(i){const t=e.createRange(r.end.getShiftedBy(-i.length),r.end);this._applyAutoLink(i,t)}}_applyAutoLink(t,e){const n=this.editor.model,r=Tb(t,this.editor.config.get("link.defaultProtocol"));this.isEnabled&&function(t,e){return e.schema.checkAttributeInSelection(e.createSelection(t),"linkHref")}(e,n)&&Sb(r)&&!function(t){const e=t.start.nodeAfter;return e&&e.hasAttribute("linkHref")}(e)&&this._persistAutoLink(r,e)}_persistAutoLink(t,e){const n=this.editor.model,r=this.editor.plugins.get("Delete");n.enqueueChange((i=>{i.setAttribute("linkHref",t,e),n.enqueueChange((()=>{r.requestUndoOnBackspace()}))}))}}function Bb(t){const e=Mb.exec(t);return e?e[2]:null}class Lb extends Di{static get pluginName(){return"Autosave"}static get requires(){return[Rh]}constructor(t){super(t);const e=t.config.get("autosave")||{},n=e.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=Da(this._save.bind(this),n),this._lastDocumentVersion=t.model.document.version,this._savePromise=null,this._domEmitter=Object.create(Er),this._config=e,this._pendingActions=t.plugins.get(Rh),this._makeImmediateSave=!1}init(){const t=this.editor,e=t.model.document;this.listenTo(t,"ready",(()=>{this.listenTo(e,"change:data",((t,e)=>{this._saveCallbacks.length&&e.isLocal&&("synchronized"===this.state&&(this.state="waiting",this._setPendingAction()),"waiting"===this.state&&this._debouncedSave())}))})),this.listenTo(t,"destroy",(()=>this._flush()),{priority:"highest"}),this._domEmitter.listenTo(window,"beforeunload",((t,e)=>{this._pendingActions.hasAny&&(e.returnValue=this._pendingActions.first.message)}))}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then((()=>Promise.all(this._saveCallbacks.map((t=>t(this.editor)))))).finally((()=>{this._savePromise=null})).then((()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)})).catch((t=>{throw this.state="error",this.state="saving",this._debouncedSave(),t})),this._savePromise)}_setPendingAction(){const t=this.editor.t;this._action||(this._action=this._pendingActions.add(t("Saving changes")))}get _saveCallbacks(){const t=[];return this.adapter&&this.adapter.save&&t.push(this.adapter.save),this._config.save&&t.push(this._config.save),t}}d(Lb,$);class Nb extends Ii{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.schema,r=e.document.selection,i=Array.from(r.getSelectedBlocks()),o=void 0===t.forceValue?!this.value:t.forceValue;e.change((t=>{if(o){const e=i.filter((t=>Ob(t)||Rb(n,t)));this._applyQuote(t,e)}else this._removeQuote(t,i.filter(Ob))}))}_getValue(){const t=_i(this.editor.model.document.selection.getSelectedBlocks());return!(!t||!Ob(t))}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=_i(t.getSelectedBlocks());return!!n&&Rb(e,n)}_removeQuote(t,e){Pb(t,e).reverse().forEach((e=>{if(e.start.isAtStart&&e.end.isAtEnd)return void t.unwrap(e.start.parent);if(e.start.isAtStart){const n=t.createPositionBefore(e.start.parent);return void t.move(e,n)}e.end.isAtEnd||t.split(e.end);const n=t.createPositionAfter(e.end.parent);t.move(e,n)}))}_applyQuote(t,e){const n=[];Pb(t,e).reverse().forEach((e=>{let r=Ob(e.start);r||(r=t.createElement("blockQuote"),t.wrap(e,r)),n.push(r)})),n.reverse().reduce(((e,n)=>e.nextSibling==n?(t.merge(t.createPositionAfter(e)),e):n))}}function Ob(t){return"blockQuote"==t.parent.name?t.parent:null}function Pb(t,e){let n,r=0;const i=[];for(;r<e.length;){const o=e[r],s=e[r+1];n||(n=t.createPositionBefore(o)),s&&o.nextSibling==s||(i.push(t.createRange(n,t.createPositionAfter(o))),n=null),r++}return i}function Rb(t,e){const n=t.checkChild(e.parent,"blockQuote"),r=t.checkChild(["$root","blockQuote"],e);return n&&r}class zb extends Di{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[zp,rp]}init(){const t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new Nb(t)),e.register("blockQuote",{inheritAllFrom:"$container"}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer((n=>{const r=t.model.document.differ.getChanges();for(const t of r)if("insert"==t.type){const r=t.position.nodeAfter;if(!r)continue;if(r.is("element","blockQuote")&&r.isEmpty)return n.remove(r),!0;if(r.is("element","blockQuote")&&!e.checkChild(t.position,r))return n.unwrap(r),!0;if(r.is("element")){const t=n.createRangeIn(r);for(const r of t.getItems())if(r.is("element","blockQuote")&&!e.checkChild(n.createPositionBefore(r),r))return n.unwrap(r),!0}}else if("remove"==t.type){const e=t.position.parent;if(e.is("element","blockQuote")&&e.isEmpty)return n.remove(e),!0}return!1}));const n=this.editor.editing.view.document,r=t.model.document.selection,i=t.commands.get("blockQuote");this.listenTo(n,"enter",((e,n)=>{if(!r.isCollapsed||!i.value)return;r.getLastPosition().parent.isEmpty&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop())}),{context:"blockquote"}),this.listenTo(n,"delete",((e,n)=>{if("backward"!=n.direction||!r.isCollapsed||!i.value)return;const o=r.getLastPosition().parent;o.isEmpty&&!o.previousSibling&&(t.execute("blockQuote"),t.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop())}),{context:"blockquote"})}}var Fb=n(3062),jb={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Fb.Z,jb);Fb.Z.locals;class Vb extends Di{static get pluginName(){return"BlockQuoteUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("blockQuote",(n=>{const r=t.commands.get("blockQuote"),i=new Zh(n);return i.set({label:e("Block quote"),icon:zh.quote,tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute("blockQuote"),t.editing.view.focus()})),i}))}}class $b extends Ii{constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=void 0===t.forceValue?!this.value:t.forceValue;e.change((t=>{if(n.isCollapsed)r?t.setSelectionAttribute(this.attributeKey,!0):t.removeSelectionAttribute(this.attributeKey);else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i)r?t.setAttribute(this.attributeKey,r,e):t.removeAttribute(this.attributeKey,e)}}))}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const t of n.getRanges())for(const n of t.getItems())if(e.checkAttribute(n,this.attributeKey))return n.hasAttribute(this.attributeKey);return!1}}const Hb="bold";class Ub extends Di{static get pluginName(){return"BoldEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Hb}),t.model.schema.setAttributeProperties(Hb,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Hb,view:"strong",upcastAlso:["b",t=>{const e=t.getStyle("font-weight");return e?"bold"==e||Number(e)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),t.commands.add(Hb,new $b(t,Hb)),t.keystrokes.set("CTRL+B",Hb)}}const Wb="bold";class qb extends Di{static get pluginName(){return"BoldUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(Wb,(n=>{const r=t.commands.get(Wb),i=new Zh(n);return i.set({label:e("Bold"),icon:zh.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(Wb),t.editing.view.focus()})),i}))}}class Yb extends($()){constructor(){super();const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;return this.total=t.size,new Promise(((n,r)=>{e.onload=()=>{const t=e.result;this._data=t,n(t)},e.onerror=()=>{r("error")},e.onabort=()=>{r("aborted")},this._reader.readAsDataURL(t)}))}abort(){this._reader.abort()}}class Gb extends Di{static get pluginName(){return"FileRepository"}static get requires(){return[Rh]}init(){this.loaders=new yi,this.loaders.on("change",(()=>this._updatePendingAction())),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((t,e)=>e?t/e*100:0))}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return k("filerepository-no-upload-adapter"),null;const e=new Zb(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then((t=>{this._loadersMap.set(t,e)})).catch((()=>{})),e.on("change:uploaded",(()=>{let t=0;for(const e of this.loaders)t+=e.uploaded;this.uploaded=t})),e.on("change:uploadTotal",(()=>{let t=0;for(const e of this.loaders)e.uploadTotal&&(t+=e.uploadTotal);this.uploadTotal=t})),e}destroyLoader(t){const e=t instanceof Zb?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach(((t,n)=>{t===e&&this._loadersMap.delete(n)}))}_updatePendingAction(){const t=this.editor.plugins.get(Rh);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t,n=t=>`${e("Upload in progress")} ${parseInt(t)}%.`;this._pendingAction=t.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else t.remove(this._pendingAction),this._pendingAction=null}}class Zb extends($()){constructor(t,e){super(),this.id=f(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new Yb,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((t,e)=>e?t/e*100:0)),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then((t=>this._filePromiseWrapper?t:null)):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new b("filerepository-read-wrong-status",this);return this.status="reading",this.file.then((t=>this._reader.read(t))).then((t=>{if("reading"!==this.status)throw this.status;return this.status="idle",t})).catch((t=>{if("aborted"===t)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:t}))}upload(){if("idle"!=this.status)throw new b("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then((()=>this._adapter.upload())).then((t=>(this.uploadResponse=t,this.status="idle",t))).catch((t=>{if("aborted"===this.status)throw"aborted";throw this.status="error",t}))}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch((()=>{})),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const e={};return e.promise=new Promise(((n,r)=>{e.rejecter=r,e.isFulfilled=!1,t.then((t=>{e.isFulfilled=!0,n(t)})).catch((t=>{e.isFulfilled=!0,r(t)}))})),e}}class Kb extends yh{constructor(t){super(t),this.buttonView=new Zh(t),this._fileInputView=new Qb(t),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",(()=>{this._fileInputView.open()}))}focus(){this.buttonView.focus()}}class Qb extends yh{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to((()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""}))}})}open(){this.element.click()}}const Xb="ckCsrfToken",Jb="abcdefghijklmnopqrstuvwxyz0123456789";function tk(){let t=function(t){t=t.toLowerCase();const e=document.cookie.split(";");for(const n of e){const e=n.split("=");if(decodeURIComponent(e[0].trim().toLowerCase())===t)return decodeURIComponent(e[1])}return null}(Xb);var e,n;return t&&40==t.length||(t=function(t){let e="";const n=new Uint8Array(t);window.crypto.getRandomValues(n);for(let t=0;t<n.length;t++){const r=Jb.charAt(n[t]%Jb.length);e+=Math.random()>.5?r.toUpperCase():r}return e}(40),e=Xb,n=t,document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+";path=/"),t}class ek{constructor(t,e,n){this.loader=t,this.url=e,this.t=n}upload(){return this.loader.file.then((t=>new Promise(((e,n)=>{this._initRequest(),this._initListeners(e,n,t),this._sendRequest(t)}))))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const t=this.xhr=new XMLHttpRequest;t.open("POST",this.url,!0),t.responseType="json"}_initListeners(t,e,n){const r=this.xhr,i=this.loader,o=(0,this.t)("Cannot upload file:")+` ${n.name}.`;r.addEventListener("error",(()=>e(o))),r.addEventListener("abort",(()=>e())),r.addEventListener("load",(()=>{const n=r.response;if(!n||!n.uploaded)return e(n&&n.error&&n.error.message?n.error.message:o);t({default:n.url})})),r.upload&&r.upload.addEventListener("progress",(t=>{t.lengthComputable&&(i.uploadTotal=t.total,i.uploaded=t.loaded)}))}_sendRequest(t){const e=new FormData;e.append("upload",t),e.append("ckCsrfToken",tk()),this.xhr.send(e)}}const nk={autoRefresh:!0},rk=36e5;class ik{constructor(t,e=nk){if(!t)throw new b("token-missing-token-url",this);e.initValue&&this._validateTokenValue(e.initValue),this.set("value",e.initValue),this._refresh="function"==typeof t?t:()=>{return e=t,new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e),r.addEventListener("load",(()=>{const e=r.status,i=r.response;return e<200||e>299?n(new b("token-cannot-download-new-token",null)):t(i)})),r.addEventListener("error",(()=>n(new Error("Network Error")))),r.addEventListener("abort",(()=>n(new Error("Abort")))),r.send()}));var e},this._options=Object.assign({},nk,e)}init(){return new Promise(((t,e)=>{this.value?(this._options.autoRefresh&&this._registerRefreshTokenTimeout(),t(this)):this.refreshToken().then(t).catch(e)}))}refreshToken(){return this._refresh().then((t=>{this._validateTokenValue(t),this.set("value",t),this._options.autoRefresh&&this._registerRefreshTokenTimeout()})).then((()=>this))}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(t){const e="string"==typeof t,n=!/^".*"$/.test(t),r=e&&3===t.split(".").length;if(!n||!r)throw new b("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){const t=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout((()=>{this.refreshToken()}),t)}_getTokenRefreshTimeoutTime(){try{const[,t]=this.value.split("."),{exp:e}=JSON.parse(atob(t));if(!e)return rk;return Math.floor((1e3*e-Date.now())/2)}catch(t){return rk}}static create(t,e=nk){return new ik(t,e).init()}}d(ik,$);const ok=ik,sk=/^data:(\S*?);base64,/;class ak{constructor(t,e,n){if(!t)throw new b("fileuploader-missing-file",null);if(!e)throw new b("fileuploader-missing-token",null);if(!n)throw new b("fileuploader-missing-api-address",null);this.file=function(t){if("string"!=typeof t)return!1;const e=t.match(sk);return!(!e||!e.length)}(t)?function(t,e=512){try{const n=t.match(sk)[1],r=atob(t.replace(sk,"")),i=[];for(let t=0;t<r.length;t+=e){const n=r.slice(t,t+e),o=new Array(n.length);for(let t=0;t<n.length;t++)o[t]=n.charCodeAt(t);i.push(new Uint8Array(o))}return new Blob(i,{type:n})}catch(t){throw new b("fileuploader-decoding-image-data-error",null)}}(t):t,this._token=e,this._apiAddress=n}onProgress(t){return this.on("progress",((e,n)=>t(n))),this}onError(t){return this.once("error",((e,n)=>t(n))),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t}_attachXHRListeners(){const t=this,e=this.xhr;function n(e){return()=>t.fire("error",e)}e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort")),e.upload&&e.upload.addEventListener("progress",(t=>{t.lengthComputable&&this.fire("progress",{total:t.total,uploaded:t.loaded})})),e.addEventListener("load",(()=>{const t=e.status,n=e.response;if(t<200||t>299)return this.fire("error",n.message||n.error)}))}_sendRequest(){const t=new FormData,e=this.xhr;return t.append("file",this.file),new Promise(((n,r)=>{e.addEventListener("load",(()=>{const t=e.status,i=e.response;return t<200||t>299?i.message?r(new b("fileuploader-uploading-data-failed",this,{message:i.message})):r(i.error):n(i)})),e.addEventListener("error",(()=>r(new Error("Network Error")))),e.addEventListener("abort",(()=>r(new Error("Abort")))),e.send(t)}))}}d(ak,T);class ck{constructor(t,e){if(!t)throw new b("uploadgateway-missing-token",null);if(!e)throw new b("uploadgateway-missing-api-address",null);this._token=t,this._apiAddress=e}upload(t){return new ak(t,this._token,this._apiAddress)}}class lk extends Pi{static get pluginName(){return"CloudServicesCore"}createToken(t,e){return new ok(t,e)}createUploadGateway(t,e){return new ck(t,e)}}const dk="code";class uk extends Di{static get pluginName(){return"CodeEditing"}static get requires(){return[ap]}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:dk}),t.model.schema.setAttributeProperties(dk,{isFormatting:!0,copyOnEnter:!1}),t.conversion.attributeToElement({model:dk,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),t.commands.add(dk,new $b(t,dk)),t.plugins.get(ap).registerAttribute(dk),Cp(t,dk,"code","ck-code_selected")}}var hk=n(8603),gk={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(hk.Z,gk);hk.Z.locals;const fk="code";class pk extends Di{static get pluginName(){return"CodeUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(fk,(n=>{const r=t.commands.get(fk),i=new Zh(n);return i.set({label:e("Code"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(fk),t.editing.view.focus()})),i}))}}function mk(t){const e=t.t,n=t.config.get("codeBlock.languages");for(const t of n)"Plain text"===t.label&&(t.label=e("Plain text")),void 0===t.class&&(t.class=`language-${t.language}`);return n}function bk(t,e,n){const r={};for(const i of t)"class"===e?r[i[e].split(" ").shift()]=i[n]:r[i[e]]=i[n];return r}function kk(t){return t.data.match(/^(\s*)/)[0]}function wk(t){const e=t.document.selection,n=[];if(e.isCollapsed)n.push(e.anchor);else{const r=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:e}of r)if(e.is("$textProxy")&&e.parent.is("element","codeBlock")){const r=kk(e.textNode),{parent:i,startOffset:o}=e.textNode,s=t.createPositionAt(i,o+r.length);n.push(s)}}return n}function yk(t){const e=_i(t.getSelectedBlocks());return e&&e.is("element","codeBlock")}function _k(t,e){return!e.is("rootElement")&&!t.isLimit(e)&&t.checkChild(e.parent,"codeBlock")}class vk extends Ii{constructor(t){super(t),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor,n=e.model,r=n.document.selection,i=mk(e)[0],o=Array.from(r.getSelectedBlocks()),s=void 0===t.forceValue?!this.value:t.forceValue,a=function(t,e,n){if(t.language)return t.language;if(t.usePreviousLanguageChoice&&e)return e;return n}(t,this._lastLanguage,i.language);n.change((t=>{s?this._applyCodeBlock(t,o,a):this._removeCodeBlock(t,o)}))}_getValue(){const t=_i(this.editor.model.document.selection.getSelectedBlocks());return!!!(!t||!t.is("element","codeBlock"))&&t.getAttribute("language")}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=_i(t.getSelectedBlocks());return!!n&&_k(e,n)}_applyCodeBlock(t,e,n){this._lastLanguage=n;const r=this.editor.model.schema,i=e.filter((t=>_k(r,t)));for(const e of i)t.rename(e,"codeBlock"),t.setAttribute("language",n,e),r.removeDisallowedAttributes([e],t),Array.from(e.getChildren()).filter((t=>!r.checkChild(e,t))).forEach((e=>t.remove(e)));i.reverse().forEach(((e,n)=>{const r=i[n+1];e.previousSibling===r&&(t.appendElement("softBreak",r),t.merge(t.createPositionBefore(e)))}))}_removeCodeBlock(t,e){const n=e.filter((t=>t.is("element","codeBlock")));for(const e of n){const n=t.createRangeOn(e);for(const e of Array.from(n.getItems()).reverse())if(e.is("element","softBreak")&&e.parent.is("element","codeBlock")){const{position:n}=t.split(t.createPositionBefore(e));t.rename(n.nodeAfter,"paragraph"),t.removeAttribute("language",n.nodeAfter),t.remove(e)}t.rename(e,"paragraph"),t.removeAttribute("language",e)}}}class Ak extends Ii{constructor(t){super(t),this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change((e=>{const n=wk(t);for(const r of n){const n=e.createText(this._indentSequence);t.insertContent(n,r)}}))}_checkEnabled(){return!!this._indentSequence&&yk(this.editor.model.document.selection)}}class Ck extends Ii{constructor(t){super(t),this._indentSequence=t.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change((()=>{const e=wk(t);for(const n of e){const e=xk(t,n,this._indentSequence);e&&t.deleteContent(t.createSelection(e))}}))}_checkEnabled(){if(!this._indentSequence)return!1;const t=this.editor.model;return!!yk(t.document.selection)&&wk(t).some((e=>xk(t,e,this._indentSequence)))}}function xk(t,e,n){const r=function(t){let e=t.parent.getChild(t.index);e&&!e.is("element","softBreak")||(e=t.nodeBefore);if(!e||e.is("element","softBreak"))return null;return e}(e);if(!r)return null;const i=kk(r),o=i.lastIndexOf(n);if(o+n.length!==i.length)return null;if(-1===o)return null;const{parent:s,startOffset:a}=r;return t.createRange(t.createPositionAt(s,a+o),t.createPositionAt(s,a+o+n.length))}function Ek(t,e,n=!1){const r=bk(e,"language","class"),i=bk(e,"language","label");return(e,o,s)=>{const{writer:a,mapper:c,consumable:l}=s;if(!l.consume(o.item,"insert"))return;const d=o.item.getAttribute("language"),u=c.toViewPosition(t.createPositionBefore(o.item)),h={};n&&(h["data-language"]=i[d],h.spellcheck="false");const g=a.createContainerElement("code",{class:r[d]||null}),f=a.createContainerElement("pre",h,g);a.insert(u,f),c.bindElements(o.item,g)}}const Tk="paragraph";class Sk extends Di{static get pluginName(){return"CodeBlockEditing"}static get requires(){return[$p]}constructor(t){super(t),t.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:" "})}init(){const t=this.editor,e=t.model.schema,n=t.model,r=t.editing.view,i=t.plugins.has("DocumentListEditing"),o=mk(t);t.commands.add("codeBlock",new vk(t)),t.commands.add("indentCodeBlock",new Ak(t)),t.commands.add("outdentCodeBlock",new Ck(t)),this.listenTo(r.document,"tab",((e,n)=>{const r=n.shiftKey?"outdentCodeBlock":"indentCodeBlock";t.commands.get(r).isEnabled&&(t.execute(r),n.stopPropagation(),n.preventDefault(),e.stop())}),{context:"pre"}),e.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",isBlock:!0,allowAttributes:["language"]}),e.addAttributeCheck(((t,e)=>{const n=t.endsWith("codeBlock")&&e.startsWith("list")&&"list"!==e;return!(!i||!n)||!t.endsWith("codeBlock $text")&&void 0})),t.model.schema.addChildCheck(((t,e)=>{if(t.endsWith("codeBlock")&&e.isObject)return!1})),t.editing.downcastDispatcher.on("insert:codeBlock",Ek(n,o,!0)),t.data.downcastDispatcher.on("insert:codeBlock",Ek(n,o)),t.data.downcastDispatcher.on("insert:softBreak",function(t){return(e,n,r)=>{if("codeBlock"!==n.item.parent.name)return;const{writer:i,mapper:o,consumable:s}=r;if(!s.consume(n.item,"insert"))return;const a=o.toViewPosition(t.createPositionBefore(n.item));i.insert(a,i.createText("\n"))}}(n),{priority:"high"}),t.data.upcastDispatcher.on("element:code",function(t,e){const n=bk(e,"class","language"),r=e[0].language;return(t,e,i)=>{const o=e.viewItem,s=o.parent;if(!s||!s.is("element","pre"))return;if(e.modelCursor.findAncestor("codeBlock"))return;const{consumable:a,writer:c}=i;if(!a.test(o,{name:!0}))return;const l=c.createElement("codeBlock"),d=[...o.getClassNames()];d.length||d.push("");for(const t of d){const e=n[t];if(e){c.setAttribute("language",e,l);break}}l.hasAttribute("language")||c.setAttribute("language",r,l),i.convertChildren(o,l),i.safeInsert(l,e.modelCursor)&&(a.consume(o,{name:!0}),i.updateConversionResult(l,e))}}(0,o)),t.data.upcastDispatcher.on("text",((t,e,{consumable:n,writer:r})=>{let i=e.modelCursor;if(!n.test(e.viewItem))return;if(!i.findAncestor("codeBlock"))return;n.consume(e.viewItem);const o=e.viewItem.data.split("\n").map((t=>r.createText(t))),s=o[o.length-1];for(const t of o)if(r.insert(t,i),i=i.getShiftedBy(t.offsetSize),t!==s){const t=r.createElement("softBreak");r.insert(t,i),i=r.createPositionAfter(t)}e.modelRange=r.createRange(e.modelCursor,i),e.modelCursor=i})),t.data.upcastDispatcher.on("element:pre",((t,e,{consumable:n})=>{const r=e.viewItem;if(r.findAncestor("pre"))return;const i=Array.from(r.getChildren()),o=i.find((t=>t.is("element","code")));if(o)for(const t of i)t!==o&&t.is("$text")&&n.consume(t,{name:!0})}),{priority:"high"}),this.listenTo(t.editing.view.document,"clipboardInput",((e,r)=>{let i=n.createRange(n.document.selection.anchor);if(r.targetRanges&&(i=t.editing.mapper.toModelRange(r.targetRanges[0])),!i.start.parent.is("element","codeBlock"))return;const o=r.dataTransfer.getData("text/plain"),s=new ou(t.editing.view.document);r.content=function(t,e){const n=t.createDocumentFragment(),r=e.split("\n"),i=r.reduce(((e,n,i)=>(e.push(n),i<r.length-1&&e.push(t.createElement("br")),e)),[]);return t.appendChild(i,n),n}(s,o)})),this.listenTo(n,"getSelectedContent",((t,[r])=>{const i=r.anchor;!r.isCollapsed&&i.parent.is("element","codeBlock")&&i.hasSameParentAs(r.focus)&&n.change((n=>{const o=t.return;if(o.childCount>1||r.containsEntireContent(i.parent)){const e=n.createElement("codeBlock",i.parent.getAttributes());n.append(o,e);const r=n.createDocumentFragment();n.append(e,r),t.return=r}else{const t=o.getChild(0);e.checkAttribute(t,"code")&&n.setAttribute("code",!0,t)}}))}))}afterInit(){const t=this.editor,e=t.commands,n=e.get("indent"),r=e.get("outdent");n&&n.registerChildCommand(e.get("indentCodeBlock"),{priority:"highest"}),r&&r.registerChildCommand(e.get("outdentCodeBlock")),this.listenTo(t.editing.view.document,"enter",((e,n)=>{t.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(function(t,e){const n=t.model.document,r=t.editing.view,i=n.selection.getLastPosition(),o=i.nodeAfter;if(e||!n.selection.isCollapsed||!i.isAtStart)return!1;if(!Mk(o))return!1;return t.model.change((e=>{t.execute("enter");const r=n.selection.anchor.parent.previousSibling;e.rename(r,Tk),e.setSelection(r,"in"),t.model.schema.removeDisallowedAttributes([r],e),e.remove(o)})),r.scrollToTheSelection(),!0}(t,n.isSoft)||function(t,e){const n=t.model,r=n.document,i=t.editing.view,o=r.selection.getLastPosition(),s=o.nodeBefore;let a;if(e||!r.selection.isCollapsed||!o.isAtEnd||!s||!s.previousSibling)return!1;if(Mk(s)&&Mk(s.previousSibling))a=n.createRange(n.createPositionBefore(s.previousSibling),n.createPositionAfter(s));else if(Dk(s)&&Mk(s.previousSibling)&&Mk(s.previousSibling.previousSibling))a=n.createRange(n.createPositionBefore(s.previousSibling.previousSibling),n.createPositionAfter(s));else{if(!(Dk(s)&&Mk(s.previousSibling)&&Dk(s.previousSibling.previousSibling)&&Mk(s.previousSibling.previousSibling.previousSibling)))return!1;a=n.createRange(n.createPositionBefore(s.previousSibling.previousSibling.previousSibling),n.createPositionAfter(s))}return t.model.change((e=>{e.remove(a),t.execute("enter");const n=r.selection.anchor.parent;e.rename(n,Tk),t.model.schema.removeDisallowedAttributes([n],e)})),i.scrollToTheSelection(),!0}(t,n.isSoft)||function(t){const e=t.model.document,n=e.selection.getLastPosition(),r=n.nodeBefore||n.textNode;let i;r&&r.is("$text")&&(i=kk(r));t.model.change((n=>{t.execute("shiftEnter"),i&&n.insertText(i,e.selection.anchor)}))}(t),n.preventDefault(),e.stop())}),{context:"pre"})}}function Dk(t){return t&&t.is("$text")&&!t.data.match(/\S/)}function Mk(t){return t&&t.is("element","softBreak")}var Ik=n(8343),Bk={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Ik.Z,Bk);Ik.Z.locals;class Lk extends Di{static get pluginName(){return"CodeBlockUI"}init(){const t=this.editor,e=t.t,n=t.ui.componentFactory,r=mk(t);n.add("codeBlock",(n=>{const i=t.commands.get("codeBlock"),o=Rg(n,dg),s=o.buttonView;return s.set({label:e("Insert code block"),tooltip:!0,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',isToggleable:!0}),s.bind("isOn").to(i,"value",(t=>!!t)),s.on("execute",(()=>{t.execute("codeBlock",{usePreviousLanguageChoice:!0}),t.editing.view.focus()})),o.on("execute",(e=>{t.execute("codeBlock",{language:e.source._codeBlockLanguage,forceValue:!0}),t.editing.view.focus()})),o.class="ck-code-block-dropdown",o.bind("isEnabled").to(i),Fg(o,this._getLanguageListItemDefinitions(r)),o}))}_getLanguageListItemDefinitions(t){const e=this.editor.commands.get("codeBlock"),n=new yi;for(const r of t){const t={type:"button",model:new hf({_codeBlockLanguage:r.language,label:r.label,withText:!0})};t.model.bind("isOn").to(e,"value",(e=>e===t.model._codeBlockLanguage)),n.add(t)}return n}}const Nk=[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:"$text",allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],Ok=[{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref",attributeProperties:{copyOnEnter:!0}},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],isInline:!0}}];const Pk=Uo((function(t,e,n,r){Bo(t,e,n,r)}));class Rk extends Di{constructor(t){super(t),this._definitions=new Map}static get pluginName(){return"DataSchema"}init(){for(const t of Nk)this.registerBlockElement(t);for(const t of Ok)this.registerInlineElement(t)}registerBlockElement(t){this._definitions.set(t.model,{...t,isBlock:!0})}registerInlineElement(t){this._definitions.set(t.model,{...t,isInline:!0})}extendBlockElement(t){this._extendDefinition({...t,isBlock:!0})}extendInlineElement(t){this._extendDefinition({...t,isInline:!0})}getDefinitionsForView(t,e){const n=new Set;for(const r of this._getMatchingViewDefinitions(t)){if(e)for(const t of this._getReferences(r.model))n.add(t);n.add(r)}return n}_getMatchingViewDefinitions(t){return Array.from(this._definitions.values()).filter((e=>e.view&&function(t,e){if("string"==typeof t)return t===e;if(t instanceof RegExp)return t.test(e);return!1}(t,e.view)))}*_getReferences(t){const{modelSchema:e}=this._definitions.get(t);if(!e)return;const n=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"];for(const r of n)for(const n of bi(e[r]||[])){const e=this._definitions.get(n);n!==t&&e&&(yield*this._getReferences(e.model),yield e)}}_extendDefinition(t){const e=this._definitions.get(t.model),n=Pk({},e,t,((t,e)=>Array.isArray(t)?t.concat(e):void 0));this._definitions.set(t.model,n)}}function zk(t,e,n,r){e&&function(t,e,n){if(e.attributes)for(const[r]of Object.entries(e.attributes))t.removeAttribute(r,n);if(e.styles)for(const r of Object.keys(e.styles))t.removeStyle(r,n);e.classes&&t.removeClass(e.classes,n)}(t,e,r),n&&Fk(t,n,r)}function Fk(t,e,n){if(e.attributes)for(const[r,i]of Object.entries(e.attributes))t.setAttribute(r,i,n);e.styles&&t.setStyle(e.styles,n),e.classes&&t.addClass(e.classes,n)}function jk(t,e){const n=$c(t);for(const r in e)Array.isArray(e[r])?n[r]=Array.from(new Set([...t[r]||[],...e[r]])):n[r]={...t[r],...e[r]};return n}function Vk({model:t}){return(e,n)=>n.writer.createElement(t,{htmlContent:e.getCustomProperty("$rawContent")})}function $k(t,{view:e,isInline:n}){const r=t.t;return(t,{writer:i})=>{const o=r("HTML object"),s=Hk(e,t,i),a=t.getAttribute("htmlAttributes");i.addClass("html-object-embed__content",s),a&&Fk(i,a,s);return Kp(i.createContainerElement(n?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},s),i,{widgetLabel:o})}}function Hk(t,e,n){return n.createRawElement(t,null,((t,n)=>{n.setContentOf(t,e.getAttribute("htmlContent"))}))}function Uk({priority:t,view:e}){return(n,r)=>{if(!n)return;const{writer:i}=r,o=i.createAttributeElement(e,null,{priority:t});return Fk(i,n,o),o}}function Wk({view:t},e){return n=>{n.on(`element:${t}`,((t,n,r)=>{if(!n.modelRange||n.modelRange.isCollapsed)return;const i=e.processViewAttributes(n.viewItem,r);i&&r.writer.setAttribute("htmlAttributes",i,n.modelRange)}),{priority:"low"})}}function qk({model:t}){return e=>{e.on(`attribute:htmlAttributes:${t}`,((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:i}=e;zk(n.writer,r,i,n.mapper.toViewElement(e.item))}))}}const Yk=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};const Gk=function(t){return t!=t};const Zk=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};const Kk=function(t,e,n){return e==e?Zk(t,e,n):Yk(t,Gk,n)};const Qk=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1};var Xk=Array.prototype.splice;const Jk=function(t,e,n,r){var i=r?Qk:Kk,o=-1,s=e.length,a=t;for(t===e&&(e=bn(e)),n&&(a=ho(t,He(n)));++o<s;)for(var c=0,l=e[o],d=n?n(l):l;(c=i(a,d,c,r))>-1;)a!==t&&Xk.call(a,c,1),Xk.call(t,c,1);return t};const tw=$o((function(t,e){return t&&t.length&&e&&e.length?Jk(t,e):t}));var ew=n(5049),nw={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(ew.Z,nw);ew.Z.locals;class rw extends Di{constructor(t){super(t),this._dataSchema=t.plugins.get("DataSchema"),this._allowedAttributes=new Xi,this._disallowedAttributes=new Xi,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerModelPostFixer()}static get pluginName(){return"DataFilter"}static get requires(){return[Rk,bm]}loadAllowedConfig(t){for(const e of t){const t=e.name||/[\s\S]+/,n=cw(e);this.allowElement(t),n.forEach((t=>this.allowAttributes(t)))}}loadDisallowedConfig(t){for(const e of t){const t=e.name||/[\s\S]+/,n=cw(e);0==n.length?this.disallowElement(t):n.forEach((t=>this.disallowAttributes(t)))}}allowElement(t){for(const e of this._dataSchema.getDefinitionsForView(t,!0))this._allowedElements.has(e)||(this._allowedElements.add(e),this._dataInitialized&&this.editor.data.once("set",(()=>{this._fireRegisterEvent(e)}),{priority:p.get("highest")+1}),this._coupledAttributes=null)}disallowElement(t){for(const e of this._dataSchema.getDefinitionsForView(t,!1))this._disallowedElements.add(e.view)}allowAttributes(t){this._allowedAttributes.add(t)}disallowAttributes(t){this._disallowedAttributes.add(t)}processViewAttributes(t,e){return iw(t,e,this._disallowedAttributes),iw(t,e,this._allowedAttributes)}_registerElementsAfterInit(){this.editor.data.on("init",(()=>{this._dataInitialized=!0;for(const t of this._allowedElements)this._fireRegisterEvent(t)}),{priority:p.get("highest")+1})}_registerElementHandlers(){this.on("register",((t,e)=>{const n=this.editor.model.schema;if(e.isObject&&!n.isRegistered(e.model))this._registerObjectElement(e);else if(e.isBlock)this._registerBlockElement(e);else{if(!e.isInline)throw new b("data-filter-invalid-definition",null,e);this._registerInlineElement(e)}t.stop()}),{priority:"lowest"})}_registerModelPostFixer(){const t=this.editor.model;t.document.registerPostFixer((e=>{const n=t.document.differ.getChanges();let r=!1;const i=this._getCoupledAttributesMap();for(const t of n){if("attribute"!=t.type||null!==t.attributeNewValue)continue;const n=i.get(t.attributeKey);if(n)for(const{item:i}of t.range.getWalker({shallow:!0}))for(const t of n)i.hasAttribute(t)&&(e.removeAttribute(t,i),r=!0)}return r}))}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const t of this._allowedElements)if(t.coupledAttribute&&t.model){const e=this._coupledAttributes.get(t.coupledAttribute);e?e.push(t.model):this._coupledAttributes.set(t.coupledAttribute,[t.model])}}_fireRegisterEvent(t){t.view&&this._disallowedElements.has(t.view)||this.fire(t.view?`register:${t.view}`:"register",t)}_registerObjectElement(t){const e=this.editor,n=e.model.schema,r=e.conversion,{view:i,model:o}=t;n.register(o,t.modelSchema),i&&(n.extend(t.model,{allowAttributes:["htmlAttributes","htmlContent"]}),e.data.registerRawContentMatcher({name:i}),r.for("upcast").elementToElement({view:i,model:Vk(t),converterPriority:p.get("low")+1}),r.for("upcast").add(Wk(t,this)),r.for("editingDowncast").elementToStructure({model:{name:o,attributes:["htmlAttributes"]},view:$k(e,t)}),r.for("dataDowncast").elementToElement({model:o,view:(t,{writer:e})=>Hk(i,t,e)}),r.for("dataDowncast").add(qk(t)))}_registerBlockElement(t){const e=this.editor,n=e.model.schema,r=e.conversion,{view:i,model:o}=t;if(!n.isRegistered(t.model)){if(n.register(t.model,t.modelSchema),!i)return;r.for("upcast").elementToElement({model:o,view:i,converterPriority:p.get("low")+1}),r.for("downcast").elementToElement({model:o,view:i})}i&&(n.extend(t.model,{allowAttributes:"htmlAttributes"}),r.for("upcast").add(Wk(t,this)),r.for("downcast").add(qk(t)))}_registerInlineElement(t){const e=this.editor,n=e.model.schema,r=e.conversion,i=t.model;n.extend("$text",{allowAttributes:i}),t.attributeProperties&&n.setAttributeProperties(i,t.attributeProperties),r.for("upcast").add(function({view:t,model:e},n){return r=>{r.on(`element:${t}`,((t,r,i)=>{let o=n.processViewAttributes(r.viewItem,i);if(o||i.consumable.test(r.viewItem,{name:!0})){o=o||{},i.consumable.consume(r.viewItem,{name:!0}),r.modelRange||(r=Object.assign(r,i.convertChildren(r.viewItem,r.modelCursor)));for(const t of r.modelRange.getItems())if(i.schema.checkAttribute(t,e)){const n=jk(o,t.getAttribute(e)||{});i.writer.setAttribute(e,n,t)}}}),{priority:"low"})}}(t,this)),r.for("downcast").attributeToElement({model:i,view:Uk(t)})}}function iw(t,e,n){const r=function(t,{consumable:e},n){const r=n.matchAll(t)||[],i=[];for(const n of r)ow(e,t,n),delete n.match.name,e.consume(t,n.match),i.push(n);return i}(t,e,n),{attributes:i,styles:o,classes:s}=function(t){const e={attributes:new Set,classes:new Set,styles:new Set};for(const n of t)for(const t in e){(n.match[t]||[]).forEach((n=>e[t].add(n)))}return e}(r),a={};if(i.size)for(const t of i)lw(t)||i.delete(t);return i.size&&(a.attributes=sw(i,(e=>t.getAttribute(e)))),o.size&&(a.styles=sw(o,(e=>t.getStyle(e)))),s.size&&(a.classes=Array.from(s)),Object.keys(a).length?a:null}function ow(t,e,n){for(const r of["attributes","classes","styles"]){const i=n.match[r];if(i)for(const n of Array.from(i))t.test(e,{[r]:[n]})||tw(i,n)}}function sw(t,e){const n={};for(const r of t){void 0!==e(r)&&(n[r]=e(r))}return n}function aw(t,e){const{name:n}=t;return vt(t[e])?Object.entries(t[e]).map((([t,r])=>({name:n,[e]:{[t]:r}}))):Array.isArray(t[e])?t[e].map((t=>({name:n,[e]:[t]}))):[t]}function cw(t){const{name:e,attributes:n,classes:r,styles:i}=t,o=[];return n&&o.push(...aw({name:e,attributes:n},"attributes")),r&&o.push(...aw({name:e,classes:r},"classes")),i&&o.push(...aw({name:e,styles:i},"styles")),o}function lw(t){try{document.createAttribute(t)}catch(t){return!1}return!0}class dw extends Ii{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!uw(t.schema,n))do{if(n=n.parent,!n)return}while(!uw(t.schema,n));t.change((t=>{t.setSelection(n,"in")}))}}function uw(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}const hw=hi("Ctrl+A");class gw extends Di{static get pluginName(){return"SelectAllEditing"}init(){const t=this.editor,e=t.editing.view.document;t.commands.add("selectAll",new dw(t)),this.listenTo(e,"keydown",((e,n)=>{ui(n)===hw&&(t.execute("selectAll"),n.preventDefault())}))}}class fw extends Di{static get pluginName(){return"SelectAllUI"}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",(e=>{const n=t.commands.get("selectAll"),r=new Zh(e),i=e.t;return r.set({label:i("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),r.bind("isEnabled").to(n,"isEnabled"),this.listenTo(r,"execute",(()=>{t.execute("selectAll"),t.editing.view.focus()})),r}))}}class pw extends Di{static get requires(){return[gw,fw]}static get pluginName(){return"SelectAll"}}var mw=n(6764),bw={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(mw.Z,bw);mw.Z.locals;var kw=n(9096),ww={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(kw.Z,ww);kw.Z.locals;class yw extends yh{constructor(t){super(t);const e=t.t;this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",((t,e)=>t>0&&!e)),this._findInputView=this._createInputField(e("Find in text…")),this._replaceInputView=this._createInputField(e("Replace with…")),this._findButtonView=this._createButton({label:e("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._findPrevButtonView=this._createButton({label:e("Previous result"),class:"ck-button-prev",icon:gf,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:e("Next result"),class:"ck-button-next",icon:gf,keystroke:"F3",tooltip:!0}),this._optionsDropdown=this._createOptionsDropdown(),this._replaceButtonView=this._createButton({label:e("Replace"),class:"ck-button-replace",withText:!0}),this._replaceAllButtonView=this._createButton({label:e("Replace all"),class:"ck-button-replaceall",withText:!0}),this._findFieldsetView=this._createFindFieldset(),this._replaceFieldsetView=this._createReplaceFieldset(),this._focusTracker=new vi,this._keystrokes=new Ai,this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:[new Xg(t,{label:e("Find and replace")}),this._findFieldsetView,this._replaceFieldsetView]}),jh(this)}render(){super.render(),Vh({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createFindFieldset(){const t=this.locale,e=new yh(t);return this._findInputView.fieldView.on("input",(()=>{this.isDirty=!0})),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",(({findPrevious:t})=>t)),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",(({findNext:t})=>t)),this._injectFindResultsCounter(),e.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__find"]},children:[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView]}),e}_onFindButtonExecute(){if(this._textToFind)this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly});else{const t=this.t;this._findInputView.errorText=t("Text to find must not be empty.")}}_injectFindResultsCounter(){const t=this.locale,e=t.t,n=this.bindTemplate,r=new yh(t);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",((t,n)=>e("%0 of %1",[t,n]))),r.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",n.if("isDirty","ck-hidden")]},children:[{text:n.to("_resultsCounterText")}]});const i=()=>{const e=this._findInputView.fieldView.element;if(!e||!qr(e))return;const n=new Pr(r.element).width,i="ltr"===t.uiLanguageDirection?"paddingRight":"paddingLeft";e.style[i]=n?`calc( 2 * var(--ck-spacing-standard) + ${n}px )`:null};this.on("change:_resultsCounterText",i,{priority:"low"}),this.on("change:isDirty",i,{priority:"low"}),this._findInputView.template.children[0].children.push(r)}_createReplaceFieldset(){const t=this.locale,e=t.t,n=new yh(t);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",(({replace:t},e)=>t&&e)),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",(({replaceAll:t},e)=>t&&e)),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",(({replace:t},e)=>t&&e)),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",((t,n)=>t||!n?"":e("Tip: Find some text first in order to replace it."))),this._replaceButtonView.on("execute",(()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})})),this._replaceAllButtonView.on("execute",(()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()})),n.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__replace"]},children:[this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView]}),n}_createOptionsDropdown(){const t=this.locale,e=t.t,n=Rg(t);n.class="ck-options-dropdown",n.buttonView.set({withText:!1,label:e("Show options"),icon:zh.cog,tooltip:!0});const r=new hf({withText:!0,label:e("Match case"),_isMatchCaseSwitch:!0}),i=new hf({withText:!0,label:e("Whole words only")});return r.bind("isOn").to(this,"_matchCase"),i.bind("isOn").to(this,"_wholeWordsOnly"),n.on("execute",(t=>{t.source._isMatchCaseSwitch?this._matchCase=!this._matchCase:this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0})),Fg(n,new yi([{type:"switchbutton",model:r},{type:"switchbutton",model:i}])),n}_initFocusCycling(){[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView].forEach((t=>{this._focusables.add(t),this._focusTracker.add(t.element)}))}_initKeystrokeHandling(){const t=t=>t.stopPropagation(),e=t=>{t.stopPropagation(),t.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",(t=>{e(t),this._findNextButtonView.fire("execute")})),this._keystrokes.set("shift+f3",(t=>{e(t),this._findPrevButtonView.fire("execute")})),this._keystrokes.set("enter",(t=>{const n=t.target;n===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),e(t)):n!==this._replaceInputView.fieldView.element||this.isDirty||(this._replaceButtonView.fire("execute"),e(t))})),this._keystrokes.set("shift+enter",(t=>{t.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),e(t))})),this._keystrokes.set("arrowright",t),this._keystrokes.set("arrowleft",t),this._keystrokes.set("arrowup",t),this._keystrokes.set("arrowdown",t),this.listenTo(this._findInputView.element,"selectstart",((t,e)=>{e.stopPropagation()}),{priority:"high"}),this.listenTo(this._replaceInputView.element,"selectstart",((t,e)=>{e.stopPropagation()}),{priority:"high"})}_createButton(t){const e=new Zh(this.locale);return e.set(t),e}_createInputField(t){const e=new af(this.locale,cf);return e.label=t,e}}class _w extends Di{static get pluginName(){return"FindAndReplaceUI"}constructor(t){super(t),this.formView=null}init(){const t=this.editor;t.ui.componentFactory.add("findAndReplace",(e=>{const n=Rg(e),r=this.formView=new yw(t.locale);return n.bind("isEnabled").to(t.commands.get("find")),n.panelView.children.add(r),n.on("change:isOpen",((t,e,n)=>{n?(r.disableCssTransitions(),r.reset(),r._findInputView.fieldView.select(),r.enableCssTransitions()):this.fire("searchReseted")}),{priority:"low"}),this._setupDropdownButton(n),this._setupFormView(r),n}))}_setupDropdownButton(t){const e=this.editor,n=e.locale.t;t.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>',label:n("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),e.keystrokes.set("Ctrl+F",((e,n)=>{t.isOpen=!0,n()}))}_setupFormView(t){const e=this.editor.commands,n=this.editor.plugins.get("FindAndReplaceEditing").state,r={before:-1,same:0,after:1};t.bind("highlightOffset").to(n,"highlightedResult",(t=>t?Array.from(n.results).sort(((t,e)=>r[t.marker.getStart().compareWith(e.marker.getStart())])).indexOf(t)+1:0)),t.listenTo(n.results,"change",(()=>{t.matchCount=n.results.length})),t.bind("_areCommandsEnabled").to(e.get("findNext"),"isEnabled",e.get("findPrevious"),"isEnabled",e.get("replace"),"isEnabled",e.get("replaceAll"),"isEnabled",((t,e,n,r)=>({findNext:t,findPrevious:e,replace:n,replaceAll:r}))),t.delegate("findNext","findPrevious","replace","replaceAll").to(this),t.on("change:isDirty",((t,e,n)=>{n&&this.fire("searchReseted")}))}}function vw(t,e,n,r){const i=r||new yi;return e.change((r=>{[...t].forEach((({type:t,item:o})=>{if("elementStart"===t&&e.schema.checkChild(o,"$text")){const t=n({item:o,text:Aw(e.createRangeIn(o))});if(!t)return;t.forEach((t=>{const e=`findResult:${f()}`,n=r.addMarker(e,{usingOperation:!1,affectsData:!1,range:r.createRange(r.createPositionAt(o,t.start),r.createPositionAt(o,t.end))}),s=function(t,e){const n=t.find((({marker:t})=>e.getStart().isBefore(t.getStart())));return n?t.getIndex(n):t.length}(i,n);i.add({id:e,label:t.label,marker:n},s)}))}}))})),i}function Aw(t){return Array.from(t.getItems()).reduce(((t,e)=>e.is("text")||e.is("textProxy")?t+e.data:`${t}\n`),"")}function Cw(t){const e=t.length-1;let n=t.index;return 3===t.length&&(n+=t[1].length),{label:t[e],start:n,end:n+t[e].length}}function xw(t,e){let n="gu";e.matchCase||(n+="i");let r=`(${fp(t)})`;if(e.wholeWords){const e="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+e).test(t)||(r=`(^|${e}|_)${r}`),new RegExp(e+"$").test(t)||(r=`${r}(?=_|${e}|$)`)}const i=new RegExp(r,n);return function({text:t}){return[...t.matchAll(i)].map(Cw)}}class Ew extends Ii{constructor(t,e){super(t),this.isEnabled=!0,this.affectsData=!1,this._state=e}execute(t,{matchCase:e,wholeWords:n}={}){const{editor:r}=this,{model:i}=r;let o;"string"==typeof t?(o=xw(t,{matchCase:e,wholeWords:n}),this._state.searchText=t):o=t;const s=i.document.getRootNames().reduce(((t,e)=>vw(i.createRangeIn(i.document.getRoot(e)),i,o,t)),null);return this._state.clear(i),this._state.results.addMany(Array.from(s)),this._state.highlightedResult=s.get(0),"string"==typeof t&&(this._state.searchText=t),this._state.matchCase=!!e,this._state.matchWholeWords=!!n,{results:s,findCallback:o}}}class Tw extends Ii{constructor(t,e){super(t),this.isEnabled=!0,this._state=e}execute(t,e){const{model:n}=this.editor;n.change((r=>{const i=e.marker.getRange();if("$graveyard"===i.root.rootName)return void this._state.results.remove(e);let o={};for(const t of i.getItems())if(t.is("$text")||t.is("$textProxy")){o=t.getAttributes();break}n.insertContent(r.createText(t,o),i),this._state.results.has(e)&&this._state.results.remove(e)}))}}class Sw extends Tw{execute(t,e){const{editor:n}=this,{model:r}=n,i=e instanceof yi?e:r.document.getRootNames().reduce(((t,n)=>vw(r.createRangeIn(r.document.getRoot(n)),r,xw(e,this._state),t)),null);i.length&&r.change((()=>{[...i].forEach((e=>{super.execute(t,e)}))}))}}class Dw extends Ii{constructor(t,e){super(t),this.affectsData=!1,this._state=e,this.isEnabled=!1,this.listenTo(this._state.results,"change",(()=>{this.isEnabled=this._state.results.length>1}))}refresh(){this.isEnabled=this._state.results.length>1}execute(){const t=this._state.results,e=t.getIndex(this._state.highlightedResult),n=e+1>=t.length?0:e+1;this._state.highlightedResult=this._state.results.get(n)}}class Mw extends Dw{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),e=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(e)}}class Iw{constructor(t){this.set("results",new yi),this.set("highlightedResult",null),this.set("searchText",""),this.set("replaceText",""),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",((e,{removed:n,index:r})=>{if((n=Array.from(n)).length){let e=!1;if(t.change((r=>{for(const i of n)this.highlightedResult===i&&(e=!0),t.markers.has(i.marker.name)&&r.removeMarker(i.marker)})),e){const t=r>=this.results.length?0:r;this.highlightedResult=this.results.get(t)}}}))}clear(t){this.searchText="",t.change((e=>{if(this.highlightedResult){const n=this.highlightedResult.marker.name.split(":")[1],r=t.markers.get(`findResultHighlighted:${n}`);r&&e.removeMarker(r)}[...this.results].forEach((({marker:t})=>{e.removeMarker(t)}))})),this.results.clear()}}d(Iw,$);var Bw=n(8470),Lw={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Bw.Z,Lw);Bw.Z.locals;class Nw extends Di{static get pluginName(){return"FindAndReplaceEditing"}init(){this._activeResults=null,this.state=new Iw(this.editor.model),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",((t,e,n,r)=>{const{model:i}=this.editor;i.change((t=>{if(r){const e=r.marker.name.split(":")[1],n=i.markers.get(`findResultHighlighted:${e}`);n&&t.removeMarker(n)}if(n){const e=n.marker.name.split(":")[1];t.addMarker(`findResultHighlighted:${e}`,{usingOperation:!1,affectsData:!1,range:n.marker.getRange()})}}))}));const t=Da(function(t,e,n){if(n){const t=this.editor.editing.view.domConverter,e=this.editor.editing.mapper.toViewRange(n.marker.getRange());Qr({target:t.viewRangeToDom(e),viewportOffset:40})}}.bind(this),32);this.listenTo(this.state,"change:highlightedResult",t,{priority:"low"}),this.listenTo(this.editor,"destroy",t.cancel)}find(t){const{editor:e}=this,{model:n}=e,{findCallback:r,results:i}=e.execute("find",t);return this._activeResults=i,this.listenTo(n.document,"change:data",(()=>function(t,e,n){const r=new Set,i=new Set;e.document.differ.getChanges().forEach((t=>{"$text"===t.name||e.schema.isInline(t.position.nodeAfter)?(r.add(t.position.parent),[...e.markers.getMarkersAtPosition(t.position)].forEach((t=>{i.add(t.name)}))):"insert"===t.type&&r.add(t.position.nodeAfter)})),e.document.differ.getChangedMarkers().forEach((({name:t,data:{newRange:e}})=>{e&&"$graveyard"===e.start.root.rootName&&i.add(t)})),r.forEach((t=>{[...e.markers.getMarkersIntersectingRange(e.createRangeIn(t))].forEach((t=>i.add(t.name)))})),e.change((e=>{i.forEach((n=>{t.has(n)&&t.remove(n),e.removeMarker(n)}))})),r.forEach((r=>{vw(e.createRangeOn(r),e,n,t)}))}(this._activeResults,n,r))),this._activeResults}stop(){this._activeResults&&(this.stopListening(this.editor.model.document),this.state.clear(this.editor.model),this._activeResults=null)}_defineCommands(){this.editor.commands.add("find",new Ew(this.editor,this.state)),this.editor.commands.add("findNext",new Dw(this.editor,this.state)),this.editor.commands.add("findPrevious",new Mw(this.editor,this.state)),this.editor.commands.add("replace",new Tw(this.editor,this.state)),this.editor.commands.add("replaceAll",new Sw(this.editor,this.state))}_defineConverters(){const{editor:t}=this;t.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:t})=>{const[,e]=t.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":e}}}}),t.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:t})=>{const[,e]=t.split(":");return{name:"span",classes:["ck-find-result_selected"],attributes:{"data-find-result":e}}}})}}class Ow extends Ii{constructor(t,e){super(t),this.attributeKey=e}refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute(this.attributeKey),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}execute(t={}){const e=this.editor.model,n=e.document.selection,r=t.value;e.change((t=>{if(n.isCollapsed)r?t.setSelectionAttribute(this.attributeKey,r):t.removeSelectionAttribute(this.attributeKey);else{const i=e.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const e of i)r?t.setAttribute(this.attributeKey,r,e):t.removeAttribute(this.attributeKey,e)}}))}}class Pw extends yi{constructor(t){super(t),this.set("isEmpty",!0),this.on("change",(()=>{this.set("isEmpty",0===this.length)}))}add(t,e){this.find((e=>e.color===t.color))||super.add(t,e)}hasColor(t){return!!this.find((e=>e.color===t))}}d(Pw,$);var Rw=n(1896),zw={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Rw.Z,zw);Rw.Z.locals;class Fw extends yh{constructor(t,{colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){super(t),this.items=this.createCollection(),this.colorDefinitions=e,this.focusTracker=new vi,this.keystrokes=new Ai,this.set("selectedColor"),this.removeButtonLabel=r,this.columns=n,this.documentColors=new Pw,this.documentColorsCount=o,this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._documentColorsLabel=i,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._createRemoveColorButton())}updateDocumentColors(t,e){const n=t.document,r=this.documentColorsCount;this.documentColors.clear();for(const i of n.getRootNames()){const o=n.getRoot(i),s=t.createRangeIn(o);for(const t of s.getItems())if(t.is("$textProxy")&&t.hasAttribute(e)&&(this._addColorToDocumentColors(t.getAttribute(e)),this.documentColors.length>=r))return}}updateSelectedColors(){const t=this.documentColorsGrid,e=this.staticColorsGrid,n=this.selectedColor;e.selectedColor=n,t&&(t.selectedColor=n)}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid),this.documentColorsCount)){const t=Qu.bind(this.documentColors,this.documentColors),e=new qg(this.locale);e.text=this._documentColorsLabel,e.extendTemplate({attributes:{class:["ck","ck-color-grid__label",t.if("isEmpty","ck-hidden")]}}),this.items.add(e),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid),this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_createRemoveColorButton(){const t=new Zh;return t.set({withText:!0,icon:zh.eraser,label:this.removeButtonLabel}),t.class="ck-color-table__remove-color",t.on("execute",(()=>{this.fire("execute",{value:null})})),t.render(),this.focusTracker.add(t.element),this._focusables.add(t),t}_createStaticColorsGrid(){const t=new og(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return t.delegate("execute").to(this),t}_createDocumentColorsGrid(){const t=Qu.bind(this.documentColors,this.documentColors),e=new og(this.locale,{columns:this.columns});return e.delegate("execute").to(this),e.extendTemplate({attributes:{class:t.if("isEmpty","ck-hidden")}}),e.items.bindTo(this.documentColors).using((t=>{const e=new ng;return e.set({color:t.color,hasBorder:t.options&&t.options.hasBorder}),t.label&&e.set({label:t.label,tooltip:!0}),e.on("execute",(()=>{this.fire("execute",{value:t.color})})),e})),this.documentColors.on("change:isEmpty",((t,n,r)=>{r&&(e.selectedColor=null)})),e}_addColorToDocumentColors(t){const e=this.colorDefinitions.find((e=>e.color===t));e?this.documentColors.add(Object.assign({},e)):this.documentColors.add({color:t,label:t,options:{hasBorder:!1}})}}const jw="fontSize",Vw="fontFamily",$w="fontColor",Hw="fontBackgroundColor";function Uw(t,e){const n={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const t of e)n.model.values.push(t.model),n.view[t.model]=t.view,t.upcastAlso&&(n.upcastAlso[t.model]=t.upcastAlso);return n}function Ww(t){return e=>e.getStyle(t).replace(/\s/g,"")}function qw(t){return(e,{writer:n})=>n.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}class Yw extends Ow{constructor(t){super(t,Hw)}}class Gw extends Di{static get pluginName(){return"FontBackgroundColorEditing"}constructor(t){super(t),t.config.define(Hw,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(Bu),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Hw,value:Ww("background-color")}}),t.conversion.for("downcast").attributeToElement({model:Hw,view:qw("background-color")}),t.commands.add(Hw,new Yw(t)),t.model.schema.extend("$text",{allowAttributes:Hw}),t.model.schema.setAttributeProperties(Hw,{isFormatting:!0,copyOnEnter:!0})}}class Zw extends Di{constructor(t,{commandName:e,icon:n,componentName:r,dropdownLabel:i}){super(t),this.commandName=e,this.componentName=r,this.icon=n,this.dropdownLabel=i,this.columns=t.config.get(`${this.componentName}.columns`),this.colorTableView=void 0}init(){const t=this.editor,e=t.locale,n=e.t,r=t.commands.get(this.commandName),i=Jh(e,tg(t.config.get(this.componentName).colors)),o=t.config.get(`${this.componentName}.documentColors`);t.ui.componentFactory.add(this.componentName,(e=>{const s=Rg(e);return this.colorTableView=function({dropdownView:t,colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){const s=t.locale,a=new Fw(s,{colors:e,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o});return t.colorTableView=a,t.panelView.children.add(a),a.delegate("execute").to(t,"execute"),a}({dropdownView:s,colors:i.map((t=>({label:t.label,color:t.model,options:{hasBorder:t.hasBorder}}))),columns:this.columns,removeButtonLabel:n("Remove color"),documentColorsLabel:0!==o?n("Document colors"):void 0,documentColorsCount:void 0===o?this.columns:o}),this.colorTableView.bind("selectedColor").to(r,"value"),s.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),s.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),s.bind("isEnabled").to(r),s.on("execute",((e,n)=>{t.execute(this.commandName,n),t.editing.view.focus()})),s.on("change:isOpen",((e,n,r)=>{s.colorTableView.appendGrids(),r&&(0!==o&&this.colorTableView.updateDocumentColors(t.model,this.componentName),this.colorTableView.updateSelectedColors())})),jg(s,(()=>s.colorTableView.staticColorsGrid.items.find((t=>t.isOn)))),s}))}}class Kw extends Zw{constructor(t){const e=t.locale.t;super(t,{commandName:Hw,componentName:Hw,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Qw extends Ow{constructor(t){super(t,$w)}}class Xw extends Di{static get pluginName(){return"FontColorEditing"}constructor(t){super(t),t.config.define($w,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:$w,value:Ww("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:$w,value:t=>t.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:$w,view:qw("color")}),t.commands.add($w,new Qw(t)),t.model.schema.extend("$text",{allowAttributes:$w}),t.model.schema.setAttributeProperties($w,{isFormatting:!0,copyOnEnter:!0})}}class Jw extends Zw{constructor(t){const e=t.locale.t;super(t,{commandName:$w,componentName:$w,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class ty extends Ow{constructor(t){super(t,Vw)}}function ey(t){return t.map(ny).filter((t=>!!t))}function ny(t){return"object"==typeof t?t:"default"===t?{title:"Default",model:void 0}:"string"==typeof t?function(t){const e=t.replace(/"|'/g,"").split(","),n=e[0],r=e.map(ry).join(", ");return{title:n,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}(t):void 0}function ry(t){return(t=t.trim()).indexOf(" ")>0&&(t=`'${t}'`),t}class iy extends Di{static get pluginName(){return"FontFamilyEditing"}constructor(t){super(t),t.config.define(Vw,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Vw}),t.model.schema.setAttributeProperties(Vw,{isFormatting:!0,copyOnEnter:!0});const e=ey(t.config.get("fontFamily.options")).filter((t=>t.model)),n=Uw(Vw,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(Vw,new ty(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:Vw,view:(t,{writer:e})=>e.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:Vw,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Vw,value:t=>t.getAttribute("face")}})}}class oy extends Di{static get pluginName(){return"FontFamilyUI"}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),r=t.commands.get(Vw);t.ui.componentFactory.add(Vw,(i=>{const o=Rg(i);return Fg(o,function(t,e){const n=new yi;for(const r of t){const t={type:"button",model:new hf({commandName:Vw,commandParam:r.model,label:r.title,withText:!0})};t.model.bind("isOn").to(e,"value",(t=>t===r.model||!(!t||!r.model)&&t.split(",")[0].replace(/'/g,"").toLowerCase()===r.model.toLowerCase())),r.view&&r.view.styles&&t.model.set("labelStyle",`font-family: ${r.view.styles["font-family"]}`),n.add(t)}return n}(n,r)),o.buttonView.set({label:e("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),o.bind("isEnabled").to(r),this.listenTo(o,"execute",(e=>{t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),o}))}_getLocalizedOptions(){const t=this.editor,e=t.t;return ey(t.config.get(Vw).options).map((t=>("Default"===t.title&&(t.title=e("Default")),t)))}}class sy extends Ow{constructor(t){super(t,jw)}}function ay(t){return t.map((t=>function(t){if(e=t,"object"==typeof e&&e.title&&e.model&&e.view)return ly(t);var e;const n=function(t){return cy[t]||cy[t.model]}(t);if(n)return ly(n);if("default"===t)return{model:void 0,title:"Default"};if(function(t){let e;if("object"==typeof t){if(!t.model)throw new b("font-size-invalid-definition",null,t);e=parseFloat(t.model)}else e=parseFloat(t);return isNaN(e)}(t))return;return function(t){"number"!=typeof t&&"string"!=typeof t||(t={title:String(t),model:`${parseFloat(t)}px`});return t.view={name:"span",styles:{"font-size":t.model}},ly(t)}(t)}(t))).filter((t=>!!t))}const cy={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function ly(t){return t.view.priority||(t.view.priority=7),t}const dy=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class uy extends Di{static get pluginName(){return"FontSizeEditing"}constructor(t){super(t),t.config.define(jw,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:jw}),t.model.schema.setAttributeProperties(jw,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=ay(this.editor.config.get("fontSize.options")).filter((t=>t.model)),r=Uw(jw,n);e?(this._prepareAnyValueConverters(r),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(r),t.commands.add(jw,new sy(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter((t=>!mu(String(t))&&!ku(String(t))));if(n.length)throw new b("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:jw,view:(t,{writer:e})=>{if(t)return e.createAttributeElement("span",{style:"font-size:"+t},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:jw,value:t=>t.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:jw,value:t=>{const e=t.getAttribute("size"),n="-"===e[0]||"+"===e[0];let r=parseInt(e,10);n&&(r=3+r);const i=dy.length-1,o=Math.min(Math.max(r,0),i);return dy[o]}}})}}var hy=n(6007),gy={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(hy.Z,gy);hy.Z.locals;class fy extends Di{static get pluginName(){return"FontSizeUI"}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),r=t.commands.get(jw);t.ui.componentFactory.add(jw,(i=>{const o=Rg(i);return Fg(o,function(t,e){const n=new yi;for(const r of t){const t={type:"button",model:new hf({commandName:jw,commandParam:r.model,label:r.title,class:"ck-fontsize-option",withText:!0})};r.view&&r.view.styles&&t.model.set("labelStyle",`font-size:${r.view.styles["font-size"]}`),r.view&&r.view.classes&&t.model.set("class",`${t.model.class} ${r.view.classes}`),t.model.bind("isOn").to(e,"value",(t=>t===r.model)),n.add(t)}return n}(n,r)),o.buttonView.set({label:e("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),o.bind("isEnabled").to(r),this.listenTo(o,"execute",(e=>{t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),o}))}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return ay(t.config.get(jw).options).map((t=>{const e=n[t.title];return e&&e!=t.title&&(t=Object.assign({},t,{title:e})),t}))}}class py extends Di{static get requires(){return[rw]}static get pluginName(){return"CodeBlockElementSupport"}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const t=this.editor.plugins.get(rw);t.on("register:pre",((e,n)=>{if("codeBlock"!==n.model)return;const r=this.editor,i=r.model.schema,o=r.conversion;i.extend("codeBlock",{allowAttributes:["htmlAttributes","htmlContentAttributes"]}),o.for("upcast").add(function(t){return e=>{e.on("element:code",((e,n,r)=>{const i=n.viewItem,o=i.parent;function s(e,i){const o=t.processViewAttributes(e,r);o&&r.writer.setAttribute(i,o,n.modelRange)}o&&o.is("element","pre")&&(s(o,"htmlAttributes"),s(i,"htmlContentAttributes"))}),{priority:"low"})}}(t)),o.for("downcast").add((t=>{t.on("attribute:htmlAttributes:codeBlock",((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:i}=e,o=n.mapper.toViewElement(e.item).parent;zk(n.writer,r,i,o)})),t.on("attribute:htmlContentAttributes:codeBlock",((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:i}=e,o=n.mapper.toViewElement(e.item);zk(n.writer,r,i,o)}))})),e.stop()}))}}class my extends Di{static get requires(){return[rw]}static get pluginName(){return"DualContentModelElementSupport"}init(){this.editor.plugins.get(rw).on("register",((t,e)=>{const n=this.editor,r=n.model.schema,i=n.conversion;if(!e.paragraphLikeModel)return;if(r.isRegistered(e.model)||r.isRegistered(e.paragraphLikeModel))return;const o={model:e.paragraphLikeModel,view:e.view};r.register(e.model,e.modelSchema),r.register(o.model,{inheritAllFrom:"$block"}),i.for("upcast").elementToElement({view:e.view,model:(t,{writer:n})=>this._hasBlockContent(t)?n.createElement(e.model):n.createElement(o.model),converterPriority:p.get("low")+1}),i.for("downcast").elementToElement({view:e.view,model:e.model}),this._addAttributeConversion(e),i.for("downcast").elementToElement({view:o.view,model:o.model}),this._addAttributeConversion(o),t.stop()}))}_hasBlockContent(t){const e=this.editor.editing.view,n=e.domConverter.blockElements;for(const r of e.createRangeIn(t).getItems())if(r.is("element")&&n.includes(r.name))return!0;return!1}_addAttributeConversion(t){const e=this.editor,n=e.conversion,r=e.plugins.get(rw);e.model.schema.extend(t.model,{allowAttributes:"htmlAttributes"}),n.for("upcast").add(Wk(t,r)),n.for("downcast").add(qk(t))}}class by extends Di{static get requires(){return[Rk]}static get pluginName(){return"HeadingElementSupport"}init(){const t=this.editor;if(!t.plugins.has("HeadingEditing"))return;const e=t.plugins.get(Rk),n=t.config.get("heading.options"),r=[];for(const t of n)"model"in t&&"view"in t&&(e.registerBlockElement({view:t.view,model:t.model}),r.push(t.model));e.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}})}}class ky extends Di{static get requires(){return[rw]}static get pluginName(){return"ImageElementSupport"}init(){const t=this.editor;if(!t.plugins.has("ImageInlineEditing")&&!t.plugins.has("ImageBlockEditing"))return;const e=t.model.schema,n=t.conversion,r=t.plugins.get(rw);r.on("register:figure",(()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",((e,n,r)=>{const i=n.viewItem;if(!n.modelRange||!i.hasClass("image"))return;const o=t.processViewAttributes(i,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)}),{priority:"low"})}}(r))})),r.on("register:img",((t,i)=>{"imageBlock"!==i.model&&"imageInline"!==i.model||(e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["htmlAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["htmlA","htmlAttributes"]}),n.for("upcast").add(function(t){return e=>{e.on("element:img",((e,n,r)=>{if(!n.modelRange)return;const i=n.viewItem,o=i.parent;function s(e,i){const o=t.processViewAttributes(e,r);o&&r.writer.setAttribute(i,o,n.modelRange)}function a(t){n.modelRange&&n.modelRange.getContainedElement().is("element","imageBlock")&&s(t,"htmlLinkAttributes")}s(i,"htmlAttributes"),o.is("element","a")&&a(o)}),{priority:"low"})}}(r)),n.for("downcast").add((t=>{function e(e){t.on(`attribute:${e}:imageInline`,((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const{attributeOldValue:r,attributeNewValue:i}=e,o=n.mapper.toViewElement(e.item);zk(n.writer,r,i,o)}),{priority:"low"})}function n(e,n){t.on(`attribute:${n}:imageBlock`,((t,n,r)=>{if(!r.consumable.test(n.item,t.name))return;const{attributeOldValue:i,attributeNewValue:o}=n,s=r.mapper.toViewElement(n.item),a=wy(r.writer,s,e);a&&(zk(r.writer,i,o,a),r.consumable.consume(n.item,t.name))}),{priority:"low"}),"a"===e&&t.on("attribute:linkHref:imageBlock",((t,e,n)=>{if(!n.consumable.consume(e.item,"attribute:htmlLinkAttributes:imageBlock"))return;const r=n.mapper.toViewElement(e.item),i=wy(n.writer,r,"a");Fk(n.writer,e.item.getAttribute("htmlLinkAttributes"),i)}),{priority:"low"})}e("htmlAttributes"),n("img","htmlAttributes"),n("figure","htmlFigureAttributes"),n("a","htmlLinkAttributes")})),t.stop())}))}}function wy(t,e,n){const r=t.createRangeOn(e);for(const{item:t}of r.getWalker())if(t.is("element",n))return t}class yy extends Di{static get requires(){return[rw]}static get pluginName(){return"MediaEmbedElementSupport"}init(){const t=this.editor;if(!t.plugins.has("MediaEmbed")||t.config.get("mediaEmbed.previewsInData"))return;const e=t.model.schema,n=t.conversion,r=this.editor.plugins.get(rw),i=this.editor.plugins.get(Rk),o=t.config.get("mediaEmbed.elementName");i.registerBlockElement({model:"media",view:o}),r.on("register:figure",(()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",((e,n,r)=>{const i=n.viewItem;if(!n.modelRange||!i.hasClass("media"))return;const o=t.processViewAttributes(i,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)}),{priority:"low"})}}(r))})),r.on(`register:${o}`,((t,i)=>{"media"===i.model&&(e.extend("media",{allowAttributes:["htmlAttributes","htmlFigureAttributes"]}),n.for("upcast").add(function(t,e){return t=>{t.on(`element:${e}`,n)};function n(e,n,r){function i(e,i){const o=t.processViewAttributes(e,r);o&&r.writer.setAttribute(i,o,n.modelRange)}i(n.viewItem,"htmlAttributes")}}(r,o)),n.for("dataDowncast").add(function(t){return e=>{function n(t,n){e.on(`attribute:${n}:media`,((e,n,r)=>{if(!r.consumable.consume(n.item,e.name))return;const{attributeOldValue:i,attributeNewValue:o}=n,s=r.mapper.toViewElement(n.item),a=function(t,e,n){const r=t.createRangeOn(e);for(const{item:t}of r.getWalker())if(t.is("element",n))return t}(r.writer,s,t);zk(r.writer,i,o,a)}))}n(t,"htmlAttributes"),n("figure","htmlFigureAttributes")}}(o)),t.stop())}))}}class _y extends Di{static get requires(){return[rw]}static get pluginName(){return"ScriptElementSupport"}init(){const t=this.editor.plugins.get(rw);t.on("register:script",((e,n)=>{const r=this.editor,i=r.model.schema,o=r.conversion;i.register("htmlScript",n.modelSchema),i.extend("htmlScript",{allowAttributes:["htmlAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:Vk(n)}),o.for("upcast").add(Wk(n,t)),o.for("downcast").elementToElement({model:"htmlScript",view:(t,{writer:e})=>Hk("script",t,e)}),o.for("downcast").add(qk(n)),e.stop()}))}}class vy extends Di{static get requires(){return[rw]}static get pluginName(){return"TableElementSupport"}init(){const t=this.editor;if(!t.plugins.has("TableEditing"))return;const e=t.model.schema,n=t.conversion,r=t.plugins.get(rw);r.on("register:figure",(()=>{n.for("upcast").add(function(t){return e=>{e.on("element:figure",((e,n,r)=>{const i=n.viewItem;if(!n.modelRange||!i.hasClass("table"))return;const o=t.processViewAttributes(i,r);o&&r.writer.setAttribute("htmlFigureAttributes",o,n.modelRange)}),{priority:"low"})}}(r))})),r.on("register:table",((t,i)=>{"table"===i.model&&(e.extend("table",{allowAttributes:["htmlAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),n.for("upcast").add(function(t){return e=>{e.on("element:table",((e,n,r)=>{const i=n.viewItem;o(i,"htmlAttributes");for(const t of i.getChildren())t.is("element","thead")&&o(t,"htmlTheadAttributes"),t.is("element","tbody")&&o(t,"htmlTbodyAttributes");function o(e,i){const o=t.processViewAttributes(e,r);o&&r.writer.setAttribute(i,o,n.modelRange)}}))}}(r)),n.for("downcast").add((t=>{function e(e,n){t.on(`attribute:${n}:table`,((t,n,r)=>{if(!r.consumable.consume(n.item,t.name))return;const i=r.mapper.toViewElement(n.item),o=function(t,e,n){const r=t.createRangeOn(e);for(const{item:t}of r.getWalker())if(t.is("element",n))return t}(r.writer,i,e);Fk(r.writer,n.attributeNewValue,o)}))}e("table","htmlAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes")})),t.stop())}))}}class Ay extends Di{static get requires(){return[rw]}static get pluginName(){return"StyleElementSupport"}init(){const t=this.editor.plugins.get(rw);t.on("register:style",((e,n)=>{const r=this.editor,i=r.model.schema,o=r.conversion;i.register("htmlStyle",n.modelSchema),i.extend("htmlStyle",{allowAttributes:["htmlAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:Vk(n)}),o.for("upcast").add(Wk(n,t)),o.for("downcast").elementToElement({model:"htmlStyle",view:(t,{writer:e})=>Hk("style",t,e)}),o.for("downcast").add(qk(n)),e.stop()}))}}class Cy extends Di{static get requires(){return[rw]}static get pluginName(){return"DocumentListElementSupport"}init(){const t=this.editor;if(!t.plugins.has("DocumentListEditing"))return;const e=t.model.schema,n=t.conversion,r=t.plugins.get(rw),i=t.plugins.get("DocumentListEditing");i.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast(t,e,n){Fk(t,e,n)}}),i.registerDowncastStrategy({scope:"list",attributeName:"htmlListAttributes",setAttributeOnDowncast(t,e,n){Fk(t,e,n)}}),r.on("register",((t,i)=>{["ul","ol","li"].includes(i.view)&&(t.stop(),e.checkAttribute("$block","htmlListAttributes")||(e.extend("$block",{allowAttributes:["htmlListAttributes","htmlLiAttributes"]}),e.extend("$blockObject",{allowAttributes:["htmlListAttributes","htmlLiAttributes"]}),e.extend("$container",{allowAttributes:["htmlListAttributes","htmlLiAttributes"]}),n.for("upcast").add((t=>{t.on("element:ul",xy("htmlListAttributes",r),{priority:"low"}),t.on("element:ol",xy("htmlListAttributes",r),{priority:"low"}),t.on("element:li",xy("htmlLiAttributes",r),{priority:"low"})}))))})),i.on("postFixer",((t,{listNodes:e,writer:n})=>{const r=[];for(const{node:i,previous:o}of e){if(!o)continue;const e=i.getAttribute("listIndent"),s=o.getAttribute("listIndent");let a=null;if(e>s?r[s]=o:e<s?(a=r[e],r.length=e):a=o,a){if(a.getAttribute("listType")==i.getAttribute("listType")){const e=a.getAttribute("htmlListAttributes");Zl(i.getAttribute("htmlListAttributes"),e)||(n.setAttribute("htmlListAttributes",e,i),t.return=!0)}if(a.getAttribute("listItemId")==i.getAttribute("listItemId")){const e=a.getAttribute("htmlLiAttributes");Zl(i.getAttribute("htmlLiAttributes"),e)||(n.setAttribute("htmlLiAttributes",e,i),t.return=!0)}}}}))}afterInit(){const t=this.editor;t.commands.get("indentList")&&this.listenTo(t.commands.get("indentList"),"afterExecute",((e,n)=>{t.model.change((t=>{for(const e of n)t.setAttribute("htmlListAttributes",{},e)}))}))}}function xy(t,e){return(n,r,i)=>{const o=r.viewItem;r.modelRange||Object.assign(r,i.convertChildren(r.viewItem,r.modelCursor));const s=e.processViewAttributes(o,i);for(const e of r.modelRange.getItems({shallow:!0}))e.hasAttribute("listItemId")&&(e.hasAttribute(t)||i.writer.setAttribute(t,s||{},e))}}class Ey extends Di{static get requires(){return[rw,Rk]}static get pluginName(){return"CustomElementSupport"}init(){const t=this.editor.plugins.get(rw),e=this.editor.plugins.get(Rk);t.on("register:$customElement",((n,r)=>{n.stop();const i=this.editor,o=i.model.schema,s=i.conversion,a=i.editing.view.domConverter.unsafeElements,c=i.data.htmlProcessor.domConverter.preElements;o.register(r.model,r.modelSchema),o.extend(r.model,{allowAttributes:["htmlElementName","htmlAttributes","htmlContent"],isContent:!0}),s.for("upcast").elementToElement({view:/.*/,model:(n,o)=>{if("$comment"==n.name)return;if(!function(t){try{document.createElement(t)}catch(t){return!1}return!0}(n.name))return;if(e.getDefinitionsForView(n.name).size)return;a.includes(n.name)||a.push(n.name),c.includes(n.name)||c.push(n.name);const s=o.writer.createElement(r.model,{htmlElementName:n.name}),l=t.processViewAttributes(n,o);l&&o.writer.setAttribute("htmlAttributes",l,s);const d=new ou(n.document).createDocumentFragment(n),u=i.data.processor.toData(d);o.writer.setAttribute("htmlContent",u,s);for(const{item:t}of i.editing.view.createRangeIn(n))o.consumable.consume(t,{name:!0});return s},converterPriority:"low"}),s.for("editingDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlAttributes","htmlContent"]},view:(t,{writer:e})=>{const n=t.getAttribute("htmlElementName"),r=e.createRawElement(n);return t.hasAttribute("htmlAttributes")&&Fk(e,t.getAttribute("htmlAttributes"),r),r}}),s.for("dataDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlAttributes","htmlContent"]},view:(t,{writer:e})=>{const n=t.getAttribute("htmlElementName"),r=t.getAttribute("htmlContent"),i=e.createRawElement(n,null,((t,e)=>{e.setContentOf(t,r);const n=t.firstChild;for(n.remove();n.firstChild;)t.appendChild(n.firstChild)}));return t.hasAttribute("htmlAttributes")&&Fk(e,t.getAttribute("htmlAttributes"),i),i}})}))}}function*Ty(t,e,n){if(e.is("documentSelection")&&e.isCollapsed)t.schema.checkAttributeInSelection(e,n)&&(yield e);else for(const r of function(t,e,n){return e.is("node")||e.is("$text")||e.is("$textProxy")?t.schema.checkAttribute(e,n)?[t.createRangeOn(e)]:[]:t.schema.getValidRanges(t.createSelection(e).getRanges(),n)}(t,e,n))yield*r.getItems({shallow:!0})}function Sy(t,e,n,r,i){const o=e.getAttribute(n),s={};for(const t of["attributes","styles","classes"])if(t!=r)o&&o[t]&&(s[t]=o[t]);else{const e="classes"==t?new Set(o&&o[t]||[]):new Map(Object.entries(o&&o[t]||{}));i(e),e.size&&(s[t]="classes"==t?Array.from(e):Object.fromEntries(e))}Object.keys(s).length?e.is("documentSelection")?t.setSelectionAttribute(n,s):t.setAttribute(n,s,e):o&&(e.is("documentSelection")?t.removeSelectionAttribute(n):t.removeAttribute(n,e))}class Dy extends Ii{refresh(){const t=this.editor.model,e=_i(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&My(e,t.schema)}execute(t={}){const e=this.editor.model,n=e.document;e.change((r=>{const i=(t.selection||n.selection).getSelectedBlocks();for(const t of i)!t.is("element","paragraph")&&My(t,e.schema)&&r.rename(t,"paragraph")}))}}function My(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class Iy extends Ii{execute(t){const e=this.editor.model,n=t.attributes;let r=t.position;e.change((t=>{const i=t.createElement("paragraph");if(n&&e.schema.setAllowedAttributes(i,n,t),!e.schema.checkChild(r.parent,i)){const n=e.schema.findAllowedParent(r,i);if(!n)return;r=t.split(r,n).position}e.insertContent(i,r),t.setSelection(i,"in")}))}}class By extends Di{static get pluginName(){return"Paragraph"}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Dy(t)),t.commands.add("insertParagraph",new Iy(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,{writer:e})=>By.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}}By.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);class Ly extends Ii{constructor(t,e){super(t),this.modelElements=e}refresh(){const t=_i(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some((e=>Ny(t,e,this.editor.model.schema)))}execute(t){const e=this.editor.model,n=e.document,r=t.value;e.change((t=>{const i=Array.from(n.selection.getSelectedBlocks()).filter((t=>Ny(t,r,e.schema)));for(const e of i)e.is("element",r)||t.rename(e,r)}))}}function Ny(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t)}const Oy="paragraph";class Py extends Di{static get pluginName(){return"HeadingEditing"}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[By]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const r of e)r.model!==Oy&&(t.model.schema.register(r.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new Ly(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",((e,r)=>{const i=t.model.document.selection.getFirstPosition().parent;n.some((t=>i.is("element",t.model)))&&!i.is("element",Oy)&&0===i.childCount&&r.writer.rename(i,Oy)}))}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:p.get("low")+1})}}var Ry=n(8733),zy={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Ry.Z,zy);Ry.Z.locals;class Fy extends Di{static get pluginName(){return"HeadingUI"}init(){const t=this.editor,e=t.t,n=function(t){const e=t.t,n={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return t.config.get("heading.options").map((t=>{const e=n[t.title];return e&&e!=t.title&&(t.title=e),t}))}(t),r=e("Choose heading"),i=e("Heading");t.ui.componentFactory.add("heading",(e=>{const o={},s=new yi,a=t.commands.get("heading"),c=t.commands.get("paragraph"),l=[a];for(const t of n){const e={type:"button",model:new hf({label:t.title,class:t.class,withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(c,"value"),e.model.set("commandName","paragraph"),l.push(c)):(e.model.bind("isOn").to(a,"value",(e=>e===t.model)),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),o[t.model]=t.title}const d=Rg(e);return Fg(d,s),d.buttonView.set({isOn:!1,withText:!0,tooltip:i}),d.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(l,"isEnabled",((...t)=>t.some((t=>t)))),d.buttonView.bind("label").to(a,"value",c,"value",((t,e)=>{const n=t||e&&"paragraph";return o[n]?o[n]:r})),this.listenTo(d,"execute",(e=>{t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus()})),d}))}}class jy extends Ii{refresh(){const t=this.editor.model,e=t.document;this.value=e.selection.getAttribute("highlight"),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"highlight")}execute(t={}){const e=this.editor.model,n=e.document.selection,r=t.value;e.change((t=>{if(n.isCollapsed){const e=n.getFirstPosition();if(n.hasAttribute("highlight")){const n=t=>t.item.hasAttribute("highlight")&&t.item.getAttribute("highlight")===this.value,i=e.getLastMatchingPosition(n,{direction:"backward"}),o=e.getLastMatchingPosition(n),s=t.createRange(i,o);r&&this.value!==r?(e.isEqual(o)||t.setAttribute("highlight",r,s),t.setSelectionAttribute("highlight",r)):(e.isEqual(o)||t.removeAttribute("highlight",s),t.removeSelectionAttribute("highlight"))}else r&&t.setSelectionAttribute("highlight",r)}else{const i=e.schema.getValidRanges(n.getRanges(),"highlight");for(const e of i)r?t.setAttribute("highlight",r,e):t.removeAttribute("highlight",e)}}))}}class Vy extends Di{static get pluginName(){return"HighlightEditing"}constructor(t){super(t),t.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:"highlight"});const e=t.config.get("highlight.options");t.conversion.attributeToElement(function(t){const e={model:{key:"highlight",values:[]},view:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]={name:"mark",classes:n.class};return e}(e)),t.commands.add("highlight",new jy(t))}}var $y=n(8234),Hy={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()($y.Z,Hy);$y.Z.locals;class Uy extends Di{get localizedOptionTitles(){const t=this.editor.t;return{"Yellow marker":t("Yellow marker"),"Green marker":t("Green marker"),"Pink marker":t("Pink marker"),"Blue marker":t("Blue marker"),"Red pen":t("Red pen"),"Green pen":t("Green pen")}}static get pluginName(){return"HighlightUI"}init(){const t=this.editor.config.get("highlight.options");for(const e of t)this._addHighlighterButton(e);this._addRemoveHighlightButton(),this._addDropdown(t)}_addRemoveHighlightButton(){const t=this.editor.t,e=this.editor.commands.get("highlight");this._addButton("removeHighlight",t("Remove highlight"),zh.eraser,null,(t=>{t.bind("isEnabled").to(e,"isEnabled")}))}_addHighlighterButton(t){const e=this.editor.commands.get("highlight");this._addButton("highlight:"+t.model,t.title,Wy(t.type),t.model,(function(n){n.bind("isEnabled").to(e,"isEnabled"),n.bind("isOn").to(e,"value",(e=>e===t.model)),n.iconView.fillColor=t.color,n.isToggleable=!0}))}_addButton(t,e,n,r,i){const o=this.editor;o.ui.componentFactory.add(t,(t=>{const s=new Zh(t),a=this.localizedOptionTitles[e]?this.localizedOptionTitles[e]:e;return s.set({label:a,icon:n,tooltip:!0}),s.on("execute",(()=>{o.execute("highlight",{value:r}),o.editing.view.focus()})),i(s),s}))}_addDropdown(t){const e=this.editor,n=e.t,r=e.ui.componentFactory,i=t[0],o=t.reduce(((t,e)=>(t[e.model]=e,t)),{});r.add("highlight",(s=>{const a=e.commands.get("highlight"),c=Rg(s,dg),l=c.buttonView;l.set({label:n("Highlight"),tooltip:!0,lastExecuted:i.model,commandValue:i.model,isToggleable:!0}),l.bind("icon").to(a,"value",(t=>Wy(u(t,"type")))),l.bind("color").to(a,"value",(t=>u(t,"color"))),l.bind("commandValue").to(a,"value",(t=>u(t,"model"))),l.bind("isOn").to(a,"value",(t=>!!t)),l.delegate("execute").to(c);const d=t.map((t=>{const e=r.create("highlight:"+t.model);return this.listenTo(e,"execute",(()=>{c.buttonView.set({lastExecuted:t.model})})),e}));function u(t,e){const n=t&&t!==l.lastExecuted?t:l.lastExecuted;return o[n][e]}return c.bind("isEnabled").toMany(d,"isEnabled",((...t)=>t.some((t=>t)))),d.push(new bg),d.push(r.create("removeHighlight")),zg(c,d,{enableActiveItemFocusOnDropdownOpen:!0}),function(t){t.buttonView.actionView.iconView.bind("fillColor").to(t.buttonView,"color")}(c),c.toolbarView.ariaLabel=n("Text highlight toolbar"),l.on("execute",(()=>{e.execute("highlight",{value:l.commandValue})})),this.listenTo(c,"execute",(()=>{e.editing.view.focus()})),c}))}}function Wy(t){return"marker"===t?'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>':'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>'}class qy extends Ii{refresh(){const t=this.editor.model,e=t.schema,n=t.document.selection;this.isEnabled=function(t,e,n){const r=function(t,e){const n=em(t,e).start.parent;if(n.isEmpty&&!n.is("element","$root"))return n.parent;return n}(t,n);return e.checkChild(r,"horizontalLine")}(n,e,t)}execute(){const t=this.editor.model;t.change((e=>{const n=e.createElement("horizontalLine");t.insertObject(n,null,null,{setSelection:"after"})}))}}var Yy=n(2974),Gy={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Yy.Z,Gy);Yy.Z.locals;class Zy extends Di{static get pluginName(){return"HorizontalLineEditing"}init(){const t=this.editor,e=t.model.schema,n=t.t,r=t.conversion;e.register("horizontalLine",{inheritAllFrom:"$blockObject"}),r.for("dataDowncast").elementToElement({model:"horizontalLine",view:(t,{writer:e})=>e.createEmptyElement("hr")}),r.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(t,{writer:e})=>{const r=n("Horizontal line"),i=e.createContainerElement("div",null,e.createEmptyElement("hr"));return e.addClass("ck-horizontal-line",i),e.setCustomProperty("hr",!0,i),function(t,e,n){return e.setCustomProperty("horizontalLine",!0,t),Kp(t,e,{label:n})}(i,e,r)}}),r.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),t.commands.add("horizontalLine",new qy(t))}}class Ky extends Di{static get pluginName(){return"HorizontalLineUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("horizontalLine",(n=>{const r=t.commands.get("horizontalLine"),i=new Zh(n);return i.set({label:e("Horizontal line"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',tooltip:!0}),i.bind("isEnabled").to(r,"isEnabled"),this.listenTo(i,"execute",(()=>{t.execute("horizontalLine"),t.editing.view.focus()})),i}))}}class Qy extends Ii{refresh(){const t=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),r=e.model,i=n.getClosestSelectedImageElement(r.document.selection);r.change((e=>{e.setAttribute("alt",t.newValue,i)}))}}class Xy extends Di{static get requires(){return[Xm]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Qy(this.editor))}}var Jy=n(1905),t_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Jy.Z,t_);Jy.Z.locals;class e_ extends yh{constructor(t){super(t);const e=this.locale.t;this.focusTracker=new vi,this.keystrokes=new Ai,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(e("Save"),zh.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(e("Cancel"),zh.cancel,"ck-button-cancel","cancel"),this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),jh(this)}render(){super.render(),this.keystrokes.listenTo(this.element),Vh({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)}))}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(t,e,n,r){const i=new Zh(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createLabeledInputView(){const t=this.locale.t,e=new af(this.locale,cf);return e.label=t("Text alternative"),e}}function n_(t){const e=t.editing.view,n=xh.defaultPositions,r=t.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(r.getClosestSelectedImageWidget(e.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}class r_ extends Di{static get requires(){return[wf]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",(n=>{const r=t.commands.get("imageTextAlternative"),i=new Zh(n);return i.set({label:e("Change image text alternative"),icon:zh.lowVision,tooltip:!0}),i.bind("isEnabled").to(r,"isEnabled"),i.bind("isOn").to(r,"value",(t=>!!t)),this.listenTo(i,"execute",(()=>{this._showForm()})),i}))}_createForm(){const t=this.editor,e=t.editing.view.document,n=t.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new e_(t.locale),this._form.render(),this.listenTo(this._form,"submit",(()=>{t.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)})),this.listenTo(this._form,"cancel",(()=>{this._hideForm(!0)})),this._form.keystrokes.set("Esc",((t,e)=>{this._hideForm(!0),e()})),this.listenTo(t.ui,"update",(()=>{n.getClosestSelectedImageWidget(e.selection)?this._isVisible&&function(t){const e=t.plugins.get("ContextualBalloon");if(t.plugins.get("ImageUtils").getClosestSelectedImageWidget(t.editing.view.document.selection)){const n=n_(t);e.updatePosition(n)}}(t):this._hideForm(!0)})),Fh({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const t=this.editor,e=t.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:n_(t)}),n.fieldView.value=n.fieldView.element.value=e.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(t){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class i_ extends Di{static get requires(){return[Xy,r_]}static get pluginName(){return"ImageTextAlternative"}}function o_(t,e){return t=>{t.on(`attribute:srcset:${e}`,n)};function n(e,n,r){if(!r.consumable.consume(n.item,e.name))return;const i=r.writer,o=r.mapper.toViewElement(n.item),s=t.findViewImgElement(o);if(null===n.attributeNewValue){const t=n.attributeOldValue;t.data&&(i.removeAttribute("srcset",s),i.removeAttribute("sizes",s),t.width&&i.removeAttribute("width",s))}else{const t=n.attributeNewValue;t.data&&(i.setAttribute("srcset",t.data,s),i.setAttribute("sizes","100vw",s),t.width&&i.setAttribute("width",t.width,s))}}}function s_(t,e,n){return t=>{t.on(`attribute:${n}:${e}`,r)};function r(e,n,r){if(!r.consumable.consume(n.item,e.name))return;const i=r.writer,o=r.mapper.toViewElement(n.item),s=t.findViewImgElement(o);i.setAttribute(n.attributeKey,n.attributeNewValue||"",s)}}class a_ extends ha{observe(t){this.listenTo(t,"load",((t,e)=>{const n=e.target;this.checkShouldIgnoreEventFromTarget(n)||"IMG"==n.tagName&&this._fireEvents(e)}),{useCapture:!0})}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class c_ extends Ii{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||"block"===e&&k("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||"inline"===e&&k("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(t){const e=bi(t.source),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),i=Object.fromEntries(n.getAttributes());e.forEach(((t,e)=>{const o=n.getSelectedElement();if("string"==typeof t&&(t={src:t}),e&&o&&r.isImage(o)){const e=this.editor.model.createPositionAfter(o);r.insertImage({...t,...i},e)}else r.insertImage({...t,...i})}))}}class l_ extends Di{static get requires(){return[Xm]}static get pluginName(){return"ImageEditing"}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(a_),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:t=>{const e={data:t.getAttribute("srcset")};return t.hasAttribute("width")&&(e.width=t.getAttribute("width")),e}}});const n=new c_(t);t.commands.add("insertImage",n),t.commands.add("imageInsert",n)}}class d_ extends Ii{constructor(t,e){super(t),this._modelElementName=e}refresh(){const t=this.editor.plugins.get("ImageUtils"),e=t.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=t.isInlineImage(e):this.isEnabled=t.isBlockImage(e)}execute(){const t=this.editor,e=this.editor.model,n=t.plugins.get("ImageUtils"),r=n.getClosestSelectedImageElement(e.document.selection),i=Object.fromEntries(r.getAttributes());return i.src||i.uploadId?e.change((t=>{const o=Array.from(e.markers).filter((t=>t.getRange().containsItem(r))),s=n.insertImage(i,e.createSelection(r,"on"),this._modelElementName);if(!s)return null;const a=t.createRangeOn(s);for(const e of o){const n=e.getRange(),r="$graveyard"!=n.root.rootName?n.getJoined(a,!0):a;t.updateMarker(e,{range:r})}return{oldElement:r,newElement:s}})):null}}class u_ extends Di{static get requires(){return[l_,Xm,Bp]}static get pluginName(){return"ImageBlockEditing"}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new d_(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,r=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:e})=>Zm(e)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(t,{writer:n})=>r.toImageWidget(Zm(n),n,e("image widget"))}),n.for("downcast").add(s_(r,"imageBlock","src")).add(s_(r,"imageBlock","alt")).add(o_(r,"imageBlock")),n.for("upcast").elementToElement({view:Km(t,"imageBlock"),model:(t,{writer:e})=>e.createElement("imageBlock",t.hasAttribute("src")?{src:t.getAttribute("src")}:null)}).add(function(t){return t=>{t.on("element:figure",e)};function e(e,n,r){if(!r.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const i=t.findViewImgElement(n.viewItem);if(!i||!r.consumable.test(i,{name:!0}))return;r.consumable.consume(n.viewItem,{name:!0,classes:"image"});const o=_i(r.convertItem(i,n.modelCursor).modelRange.getItems());o?(r.convertChildren(n.viewItem,o),r.updateConversionResult(o,n)):r.consumable.revert(n.viewItem,{name:!0,classes:"image"})}}(r))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,r=t.plugins.get("ImageUtils");this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",((i,o)=>{const s=Array.from(o.content.getChildren());let a;if(!s.every(r.isInlineImageView))return;a=o.targetRanges?t.editing.mapper.toModelRange(o.targetRanges[0]):e.document.selection.getFirstRange();const c=e.createSelection(a);if("imageBlock"===Qm(e.schema,c)){const t=new ou(n.document),e=s.map((e=>t.createElement("figure",{class:"image"},e)));o.content=t.createDocumentFragment(e)}}))}}var h_=n(3508),g_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(h_.Z,g_);h_.Z.locals;class f_ extends Di{static get requires(){return[u_,bm,i_]}static get pluginName(){return"ImageBlock"}}class p_ extends Di{static get requires(){return[l_,Xm,Bp]}static get pluginName(){return"ImageInlineEditing"}init(){const t=this.editor,e=t.model.schema;e.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),e.addChildCheck(((t,e)=>{if(t.endsWith("caption")&&"imageInline"===e.name)return!1})),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new d_(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,r=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(t,{writer:e})=>e.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(t,{writer:n})=>r.toImageWidget(function(t){return t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img"))}(n),n,e("image widget"))}),n.for("downcast").add(s_(r,"imageInline","src")).add(s_(r,"imageInline","alt")).add(o_(r,"imageInline")),n.for("upcast").elementToElement({view:Km(t,"imageInline"),model:(t,{writer:e})=>e.createElement("imageInline",t.hasAttribute("src")?{src:t.getAttribute("src")}:null)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,r=t.plugins.get("ImageUtils");this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",((i,o)=>{const s=Array.from(o.content.getChildren());let a;if(!s.every(r.isBlockImageView))return;a=o.targetRanges?t.editing.mapper.toModelRange(o.targetRanges[0]):e.document.selection.getFirstRange();const c=e.createSelection(a);if("imageInline"===Qm(e.schema,c)){const t=new ou(n.document),e=s.map((e=>1===e.childCount?(Array.from(e.getAttributes()).forEach((n=>t.setAttribute(...n,r.findViewImgElement(e)))),e.getChild(0)):e));o.content=t.createDocumentFragment(e)}}))}}class m_ extends Di{static get requires(){return[p_,bm,i_]}static get pluginName(){return"ImageInline"}}class b_ extends Ii{refresh(){const t=this.editor,e=t.plugins.get("ImageCaptionUtils");if(!t.plugins.has(u_))return this.isEnabled=!1,void(this.value=!1);const n=t.model.document.selection,r=n.getSelectedElement();if(!r){const t=e.getCaptionFromModelSelection(n);return this.isEnabled=!!t,void(this.value=!!t)}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(r),this.isEnabled?this.value=!!e.getCaptionFromImageModelElement(r):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change((t=>{this.value?this._hideImageCaption(t):this._showImageCaption(t,e)}))}_showImageCaption(t,e){const n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing");let i=n.getSelectedElement();const o=r._getSavedCaption(i);this.editor.plugins.get("ImageUtils").isInlineImage(i)&&(this.editor.execute("imageTypeBlock"),i=n.getSelectedElement());const s=o||t.createElement("caption");t.append(s,i),e&&t.setSelection(s,"in")}_hideImageCaption(t){const e=this.editor,n=e.model.document.selection,r=e.plugins.get("ImageCaptionEditing"),i=e.plugins.get("ImageCaptionUtils");let o,s=n.getSelectedElement();s?o=i.getCaptionFromImageModelElement(s):(o=i.getCaptionFromModelSelection(n),s=o.parent),r._saveCaption(s,o),t.setSelection(s,"on"),t.remove(o)}}class k_ extends Di{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[Xm]}getCaptionFromImageModelElement(t){for(const e of t.getChildren())if(e&&e.is("element","caption"))return e;return null}getCaptionFromModelSelection(t){const e=this.editor.plugins.get("ImageUtils"),n=t.getFirstPosition().findAncestor("caption");return n&&e.isBlockImage(n.parent)?n:null}matchImageCaptionViewElement(t){const e=this.editor.plugins.get("ImageUtils");return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}}class w_ extends Di{static get requires(){return[Xm,k_]}static get pluginName(){return"ImageCaptionEditing"}constructor(t){super(t),this._savedCaptionsMap=new WeakMap}init(){const t=this.editor,e=t.model.schema;e.isRegistered("caption")?e.extend("caption",{allowIn:"imageBlock"}):e.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleImageCaption",new b_(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageUtils"),r=t.plugins.get("ImageCaptionUtils"),i=t.t;t.conversion.for("upcast").elementToElement({view:t=>r.matchImageCaptionViewElement(t),model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>n.isBlockImage(t.parent)?e.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:r})=>{if(!n.isBlockImage(t.parent))return null;const o=r.createEditableElement("figcaption");r.setCustomProperty("imageCaption",!0,o),$i({view:e,element:o,text:i("Enter image caption"),keepOnFocus:!0});const s=t.parent.getAttribute("alt");return tm(o,r,{label:s?i("Caption for image: %0",[s]):i("Caption for the image")})}})}_setupImageTypeCommandsIntegration(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.plugins.get("ImageCaptionUtils"),r=t.commands.get("imageTypeInline"),i=t.commands.get("imageTypeBlock"),o=t=>{if(!t.return)return;const{oldElement:r,newElement:i}=t.return;if(!r)return;if(e.isBlockImage(r)){const t=n.getCaptionFromImageModelElement(r);if(t)return void this._saveCaption(i,t)}const o=this._getSavedCaption(r);o&&this._saveCaption(i,o)};r&&this.listenTo(r,"execute",o,{priority:"low"}),i&&this.listenTo(i,"execute",o,{priority:"low"})}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?gc.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}_registerCaptionReconversion(){const t=this.editor,e=t.model,n=t.plugins.get("ImageUtils"),r=t.plugins.get("ImageCaptionUtils");e.document.on("change:data",(()=>{const i=e.document.differ.getChanges();for(const e of i){if("alt"!==e.attributeKey)continue;const i=e.range.start.nodeAfter;if(n.isBlockImage(i)){const e=r.getCaptionFromImageModelElement(i);if(!e)return;t.editing.reconvertItem(e)}}}))}}class y_ extends Di{static get requires(){return[k_]}static get pluginName(){return"ImageCaptionUI"}init(){const t=this.editor,e=t.editing.view,n=t.plugins.get("ImageCaptionUtils"),r=t.t;t.ui.componentFactory.add("toggleImageCaption",(i=>{const o=t.commands.get("toggleImageCaption"),s=new Zh(i);return s.set({icon:zh.caption,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.bind("label").to(o,"value",(t=>r(t?"Toggle caption off":"Toggle caption on"))),this.listenTo(s,"execute",(()=>{t.execute("toggleImageCaption",{focusCaptionOnShow:!0});const r=n.getCaptionFromModelSelection(t.model.document.selection);if(r){const n=t.editing.mapper.toViewElement(r);e.scrollToTheSelection(),e.change((t=>{t.addClass("image__caption_highlighted",n)}))}t.editing.view.focus()})),s}))}}var __=n(2640),v_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(__.Z,v_);__.Z.locals;function A_(t){const e=t.map((t=>t.replace("+","\\+")));return new RegExp(`^image\\/(${e.join("|")})$`)}function C_(t){return new Promise(((e,n)=>{const r=t.getAttribute("src");fetch(r).then((t=>t.blob())).then((t=>{const n=x_(t,r),i=n.replace("image/",""),o=new File([t],`image.${i}`,{type:n});e(o)})).catch((t=>t&&"TypeError"===t.name?function(t){return function(t){return new Promise(((e,n)=>{const r=Mr.document.createElement("img");r.addEventListener("load",(()=>{const t=Mr.document.createElement("canvas");t.width=r.width,t.height=r.height;t.getContext("2d").drawImage(r,0,0),t.toBlob((t=>t?e(t):n()))})),r.addEventListener("error",(()=>n())),r.src=t}))}(t).then((e=>{const n=x_(e,t),r=n.replace("image/","");return new File([e],`image.${r}`,{type:n})}))}(r).then(e).catch(n):n(t)))}))}function x_(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class E_ extends Di{static get pluginName(){return"ImageUploadUI"}init(){const t=this.editor,e=t.t,n=n=>{const r=new Kb(n),i=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),s=A_(o);return r.set({acceptedType:o.map((t=>`image/${t}`)).join(","),allowMultipleFiles:!0}),r.buttonView.set({label:e("Insert image"),icon:zh.image,tooltip:!0}),r.buttonView.bind("isEnabled").to(i),r.on("done",((e,n)=>{const r=Array.from(n).filter((t=>s.test(t.type)));r.length&&(t.execute("uploadImage",{file:r}),t.editing.view.focus())})),r};t.ui.componentFactory.add("uploadImage",n),t.ui.componentFactory.add("imageUpload",n)}}var T_=n(3689),S_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(T_.Z,S_);T_.Z.locals;var D_=n(4036),M_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(D_.Z,M_);D_.Z.locals;var I_=n(3773),B_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(I_.Z,B_);I_.Z.locals;class L_ extends Di{static get pluginName(){return"ImageUploadProgress"}constructor(t){super(t),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",((...t)=>this.uploadStatusChange(...t))),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",((...t)=>this.uploadStatusChange(...t)))}uploadStatusChange(t,e,n){const r=this.editor,i=e.item,o=i.getAttribute("uploadId");if(!n.consumable.consume(e.item,t.name))return;const s=r.plugins.get("ImageUtils"),a=r.plugins.get(Gb),c=o?e.attributeNewValue:null,l=this.placeholder,d=r.editing.mapper.toViewElement(i),u=n.writer;if("reading"==c)return N_(d,u),void O_(s,l,d,u);if("uploading"==c){const t=a.loaders.get(o);return N_(d,u),void(t?(P_(d,u),function(t,e,n,r){const i=function(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e}(e);e.insert(e.createPositionAt(t,"end"),i),n.on("change:uploadedPercent",((t,e,n)=>{r.change((t=>{t.setStyle("width",n+"%",i)}))}))}(d,u,t,r.editing.view),function(t,e,n,r){if(r.data){const i=t.findViewImgElement(e);n.setAttribute("src",r.data,i)}}(s,d,u,t)):O_(s,l,d,u))}"complete"==c&&a.loaders.get(o)&&function(t,e,n){const r=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),r),setTimeout((()=>{n.change((t=>t.remove(t.createRangeOn(r))))}),3e3)}(d,u,r.editing.view),function(t,e){z_(t,e,"progressBar")}(d,u),P_(d,u),function(t,e){e.removeClass("ck-appear",t)}(d,u)}}function N_(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t)}function O_(t,e,n,r){n.hasClass("ck-image-upload-placeholder")||r.addClass("ck-image-upload-placeholder",n);const i=t.findViewImgElement(n);i.getAttribute("src")!==e&&r.setAttribute("src",e,i),R_(n,"placeholder")||r.insert(r.createPositionAfter(i),function(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e}(r))}function P_(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),z_(t,e,"placeholder")}function R_(t,e){for(const n of t.getChildren())if(n.getCustomProperty(e))return n}function z_(t,e,n){const r=R_(t,n);r&&e.remove(e.createRangeOn(r))}class F_ extends Ii{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=bi(t.file),n=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),i=Object.fromEntries(n.getAttributes());e.forEach(((t,e)=>{const o=n.getSelectedElement();if(e&&o&&r.isImage(o)){const e=this.editor.model.createPositionAfter(o);this._uploadImage(t,i,e)}else this._uploadImage(t,i)}))}_uploadImage(t,e,n){const r=this.editor,i=r.plugins.get(Gb).createLoader(t),o=r.plugins.get("ImageUtils");i&&o.insertImage({...e,uploadId:i.id},n)}}class j_ extends Di{static get requires(){return[Gb,uf,Bp,Xm]}static get pluginName(){return"ImageUploadEditing"}constructor(t){super(t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const t=this.editor,e=t.model.document,n=t.conversion,r=t.plugins.get(Gb),i=t.plugins.get("ImageUtils"),o=A_(t.config.get("image.upload.types")),s=new F_(t);t.commands.add("uploadImage",s),t.commands.add("imageUpload",s),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",((e,n)=>{if(r=n.dataTransfer,Array.from(r.types).includes("text/html")&&""!==r.getData("text/html"))return;var r;const i=Array.from(n.dataTransfer.files).filter((t=>!!t&&o.test(t.type)));i.length&&(e.stop(),t.model.change((e=>{n.targetRanges&&e.setSelection(n.targetRanges.map((e=>t.editing.mapper.toModelRange(e)))),t.model.enqueueChange((()=>{t.execute("uploadImage",{file:i})}))})))})),this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",((e,n)=>{const o=Array.from(t.editing.view.createRangeIn(n.content)).filter((t=>function(t,e){return!(!t.isInlineImageView(e)||!e.getAttribute("src"))&&(e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g))}(i,t.item)&&!t.item.getAttribute("uploadProcessed"))).map((t=>({promise:C_(t.item),imageElement:t.item})));if(!o.length)return;const s=new ou(t.editing.view.document);for(const t of o){s.setAttribute("uploadProcessed",!0,t.imageElement);const e=r.createLoader(t.promise);e&&(s.setAttribute("src","",t.imageElement),s.setAttribute("uploadId",e.id,t.imageElement))}})),t.editing.view.document.on("dragover",((t,e)=>{e.preventDefault()})),e.on("change",(()=>{const n=e.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),i=new Set;for(const e of n)if("insert"==e.type&&"$text"!=e.name){const n=e.position.nodeAfter,o="$graveyard"==e.position.root.rootName;for(const e of V_(t,n)){const t=e.getAttribute("uploadId");if(!t)continue;const n=r.loaders.get(t);n&&(o?i.has(t)||n.abort():(i.add(t),this._uploadImageElements.set(t,e),"idle"==n.status&&this._readAndUpload(n)))}}})),this.on("uploadComplete",((t,{imageElement:e,data:n})=>{const r=n.urls?n.urls:n;this.editor.model.change((t=>{t.setAttribute("src",r.default,e),this._parseAndSetSrcsetAttributeOnImage(r,e,t)}))}),{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(t){const e=this.editor,n=e.model,r=e.locale.t,o=e.plugins.get(Gb),s=e.plugins.get(uf),a=e.plugins.get("ImageUtils"),c=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},(e=>{e.setAttribute("uploadStatus","reading",c.get(t.id))})),t.read().then((()=>{const r=t.upload(),o=c.get(t.id);if(i.isSafari){const t=e.editing.mapper.toViewElement(o),n=a.findViewImgElement(t);e.editing.view.once("render",(()=>{if(!n.parent)return;const t=e.editing.view.domConverter.mapViewToDom(n.parent);if(!t)return;const r=t.style.display;t.style.display="none",t._ckHack=t.offsetHeight,t.style.display=r}))}return n.enqueueChange({isUndoable:!1},(t=>{t.setAttribute("uploadStatus","uploading",o)})),r})).then((e=>{n.enqueueChange({isUndoable:!1},(n=>{const r=c.get(t.id);n.setAttribute("uploadStatus","complete",r),this.fire("uploadComplete",{data:e,imageElement:r})})),l()})).catch((e=>{if("error"!==t.status&&"aborted"!==t.status)throw e;"error"==t.status&&e&&s.showWarning(e,{title:r("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},(e=>{e.remove(c.get(t.id))})),l()}));function l(){n.enqueueChange({isUndoable:!1},(e=>{const n=c.get(t.id);e.removeAttribute("uploadId",n),e.removeAttribute("uploadStatus",n),c.delete(t.id)})),o.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,n){let r=0;const i=Object.keys(t).filter((t=>{const e=parseInt(t,10);if(!isNaN(e))return r=Math.max(r,e),!0})).map((e=>`${t[e]} ${e}w`)).join(", ");""!=i&&n.setAttribute("srcset",{data:i,width:r},e)}}function V_(t,e){const n=t.plugins.get("ImageUtils");return Array.from(t.model.createRangeOn(e)).filter((t=>n.isImage(t.item))).map((t=>t.item))}class $_ extends Di{static get pluginName(){return"ImageUpload"}static get requires(){return[j_,E_,L_]}}var H_=n(1568),U_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(H_.Z,U_);H_.Z.locals;class W_ extends yh{constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("class",e.class||null),this.children=this.createCollection(),e.children&&e.children.forEach((t=>this.children.add(t))),this.set("_role",null),this.set("_ariaLabelledBy",null),e.labelView&&this.set({_role:"group",_ariaLabelledBy:e.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",n.to("class")],role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}var q_=n(3535),Y_={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(q_.Z,Y_);q_.Z.locals;class G_ extends yh{constructor(t,e){super(t);const{insertButtonView:n,cancelButtonView:r}=this._createActionButtons(t);if(this.insertButtonView=n,this.cancelButtonView=r,this.set("imageURLInputValue",""),this.focusTracker=new vi,this.keystrokes=new Ai,this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.set("_integrations",new yi),e)for(const[t,n]of Object.entries(e))"insertImageViaUrl"===t&&(n.fieldView.bind("value").to(this,"imageURLInputValue",(t=>t||"")),n.fieldView.on("input",(()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}))),n.name=t,this._integrations.add(n);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:"-1"},children:[...this._integrations,new W_(t,{children:[this.insertButtonView,this.cancelButtonView],class:"ck-image-insert-form__action-row"})]})}render(){super.render(),Vh({view:this});const t=[...this._integrations,this.insertButtonView,this.cancelButtonView];t.forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(t[0].element,"selectstart",((t,e)=>{e.stopPropagation()}),{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}getIntegration(t){return this._integrations.find((e=>e.name===t))}_createActionButtons(t){const e=t.t,n=new Zh(t),r=new Zh(t);return n.set({label:e("Insert"),icon:zh.check,class:"ck-button-save",type:"submit",withText:!0,isEnabled:this.imageURLInputValue}),r.set({label:e("Cancel"),icon:zh.cancel,class:"ck-button-cancel",withText:!0}),n.bind("isEnabled").to(this,"imageURLInputValue",(t=>!!t)),n.delegate("execute").to(this,"submit"),r.delegate("execute").to(this,"cancel"),{insertButtonView:n,cancelButtonView:r}}focus(){this._focusCycler.focusFirst()}}function Z_(t){const e=t.t,n=new af(t,cf);return n.set({label:e("Insert image via URL")}),n.fieldView.placeholder="https://example.com/image.png",n}class K_ extends Di{static get pluginName(){return"ImageInsertUI"}init(){const t=this.editor,e=t=>this._createDropdownView(t);t.ui.componentFactory.add("insertImage",e),t.ui.componentFactory.add("imageInsert",e)}_createDropdownView(t){const e=this.editor,n=t.t,r=e.commands.get("uploadImage"),i=e.commands.get("insertImage");this.dropdownView=Rg(t,r?dg:void 0);const o=this.dropdownView.buttonView,s=this.dropdownView.panelView;if(o.set({label:n("Insert image"),icon:zh.image,tooltip:!0}),s.extendTemplate({attributes:{class:"ck-image-insert__panel"}}),r){const t=this.dropdownView.buttonView;t.actionView=e.ui.componentFactory.create("uploadImage"),t.actionView.extendTemplate({attributes:{class:"ck ck-button ck-splitbutton__action"}})}return this._setUpDropdown(r||i)}_setUpDropdown(t){const e=this.editor,n=e.t,r=new G_(e.locale,function(t){const e=t.config.get("image.insert.integrations"),n=t.plugins.get("ImageInsertUI"),r={insertImageViaUrl:Z_(t.locale)};if(!e)return r;if(e.find((t=>"openCKFinder"===t))&&t.ui.componentFactory.has("ckfinder")){const e=t.ui.componentFactory.create("ckfinder");e.set({withText:!0,class:"ck-image-insert__ck-finder-button"}),e.delegate("execute").to(n,"cancel"),r.openCKFinder=e}return e.reduce(((e,n)=>(r[n]?e[n]=r[n]:t.ui.componentFactory.has(n)&&(e[n]=t.ui.componentFactory.create(n)),e)),{})}(e)),i=r.insertButtonView,o=r.getIntegration("insertImageViaUrl"),s=this.dropdownView,a=s.panelView,c=this.editor.plugins.get("ImageUtils");function l(){e.editing.view.focus(),s.isOpen=!1}return s.bind("isEnabled").to(t),s.once("change:isOpen",(()=>{a.children.add(r)})),s.on("change:isOpen",(()=>{const t=e.model.document.selection.getSelectedElement();s.isOpen&&(c.isImage(t)?(r.imageURLInputValue=t.getAttribute("src"),i.label=n("Update"),o.label=n("Update image URL")):(r.imageURLInputValue="",i.label=n("Insert"),o.label=n("Insert image via URL")))}),{priority:"low"}),r.delegate("submit","cancel").to(s),this.delegate("cancel").to(s),s.on("submit",(()=>{l(),function(){const t=e.model.document.selection.getSelectedElement();c.isImage(t)?e.model.change((e=>{e.setAttribute("src",r.imageURLInputValue,t),e.removeAttribute("srcset",t),e.removeAttribute("sizes",t)})):e.execute("insertImage",{source:r.imageURLInputValue})}()})),s.on("cancel",(()=>{l()})),s}}class Q_ extends Di{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[K_]}}class X_ extends Ii{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils").getClosestSelectedImageElement(t.model.document.selection);this.isEnabled=!!e,e&&e.hasAttribute("width")?this.value={width:e.getAttribute("width"),height:null}:this.value=null}execute(t){const e=this.editor,n=e.model,r=e.plugins.get("ImageUtils").getClosestSelectedImageElement(n.document.selection);this.value={width:t.width,height:null},r&&n.change((e=>{e.setAttribute("width",t.width,r)}))}}class J_ extends Di{static get requires(){return[Xm]}static get pluginName(){return"ImageResizeEditing"}constructor(t){super(t),t.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const t=this.editor,e=new X_(t);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),t.commands.add("resizeImage",e),t.commands.add("imageResize",e)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(t){const e=this.editor;e.conversion.for("downcast").add((e=>e.on(`attribute:width:${t}`,((t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewElement(e.item);null!==e.attributeNewValue?(r.setStyle("width",e.attributeNewValue,i),r.addClass("image_resized",i)):(r.removeStyle("width",i),r.removeClass("image_resized",i))})))),e.conversion.for("upcast").attributeToAttribute({view:{name:"imageBlock"===t?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:t=>t.getStyle("width")}})}}const tv={small:zh.objectSizeSmall,medium:zh.objectSizeMedium,large:zh.objectSizeLarge,original:zh.objectSizeFull};class ev extends Di{static get requires(){return[J_]}static get pluginName(){return"ImageResizeButtons"}constructor(t){super(t),this._resizeUnit=t.config.get("image.resizeUnit")}init(){const t=this.editor,e=t.config.get("image.resizeOptions"),n=t.commands.get("resizeImage");this.bind("isEnabled").to(n);for(const t of e)this._registerImageResizeButton(t);this._registerImageResizeDropdown(e)}_registerImageResizeButton(t){const e=this.editor,{name:n,value:r,icon:i}=t,o=r?r+this._resizeUnit:null;e.ui.componentFactory.add(n,(n=>{const r=new Zh(n),s=e.commands.get("resizeImage"),a=this._getOptionLabelValue(t,!0);if(!tv[i])throw new b("imageresizebuttons-missing-icon",e,t);return r.set({label:a,icon:tv[i],tooltip:a,isToggleable:!0}),r.bind("isEnabled").to(this),r.bind("isOn").to(s,"value",nv(o)),this.listenTo(r,"execute",(()=>{e.execute("resizeImage",{width:o})})),r}))}_registerImageResizeDropdown(t){const e=this.editor,n=e.t,r=t.find((t=>!t.value)),i=i=>{const o=e.commands.get("resizeImage"),s=Rg(i,ag),a=s.buttonView;return a.set({tooltip:n("Resize image"),commandValue:r.value,icon:tv.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button"}),a.bind("label").to(o,"value",(t=>t&&t.width?t.width:this._getOptionLabelValue(r))),s.bind("isOn").to(o),s.bind("isEnabled").to(this),Fg(s,this._getResizeDropdownListItemDefinitions(t,o)),s.listView.ariaLabel=n("Image resize list"),this.listenTo(s,"execute",(t=>{e.execute(t.source.commandName,{width:t.source.commandValue}),e.editing.view.focus()})),s};e.ui.componentFactory.add("resizeImage",i),e.ui.componentFactory.add("imageResize",i)}_getOptionLabelValue(t,e){const n=this.editor.t;return t.label?t.label:e?t.value?n("Resize image to %0",t.value+this._resizeUnit):n("Resize image to the original size"):t.value?t.value+this._resizeUnit:n("Original")}_getResizeDropdownListItemDefinitions(t,e){const n=new yi;return t.map((t=>{const r=t.value?t.value+this._resizeUnit:null,i={type:"button",model:new hf({commandName:"resizeImage",commandValue:r,label:this._getOptionLabelValue(t),withText:!0,icon:null})};i.model.bind("isOn").to(e,"value",nv(r)),n.add(i)})),n}}function nv(t){return e=>null===t&&e===t||e&&e.width===t}const rv=/(image|image-inline)/,iv="image_resized";class ov extends Di{static get requires(){return[Dm]}static get pluginName(){return"ImageResizeHandles"}init(){const t=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(t),this._setupResizerCreator()}_setupResizerCreator(){const t=this.editor,e=t.editing.view;e.addObserver(a_),this.listenTo(e.document,"imageLoaded",((n,r)=>{if(!r.target.matches("figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img"))return;const i=t.editing.view.domConverter,o=i.domToView(r.target).findAncestor({classes:rv});let s=this.editor.plugins.get(Dm).getResizerByViewElement(o);if(s)return void s.redraw();const a=t.editing.mapper,c=a.toModelElement(o);s=t.plugins.get(Dm).attachTo({unit:t.config.get("image.resizeUnit"),modelElement:c,viewElement:o,editor:t,getHandleHost:t=>t.querySelector("img"),getResizeHost:()=>i.mapViewToDom(a.toViewElement(c.parent)),isCentered(){const t=c.getAttribute("imageStyle");return!t||"block"==t||"alignCenter"==t},onCommit(n){e.change((t=>{t.removeClass(iv,o)})),t.execute("resizeImage",{width:n})}}),s.on("updateSize",(()=>{o.hasClass(iv)||e.change((t=>{t.addClass(iv,o)}))})),s.bind("isEnabled").to(this)}))}}var sv=n(6270),av={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(sv.Z,av);sv.Z.locals;class cv extends Ii{constructor(t,e){super(t),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(e.map((t=>{if(t.isDefault)for(const e of t.modelElements)this._defaultStyles[e]=t.name;return[t.name,t]})))}refresh(){const t=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled?t.hasAttribute("imageStyle")?this.value=t.getAttribute("imageStyle"):this.value=this._defaultStyles[t.name]:this.value=!1}execute(t={}){const e=this.editor,n=e.model,r=e.plugins.get("ImageUtils");n.change((e=>{const i=t.value;let o=r.getClosestSelectedImageElement(n.document.selection);i&&this.shouldConvertImageType(i,o)&&(this.editor.execute(r.isBlockImage(o)?"imageTypeInline":"imageTypeBlock"),o=r.getClosestSelectedImageElement(n.document.selection)),!i||this._styles.get(i).isDefault?e.removeAttribute("imageStyle",o):e.setAttribute("imageStyle",i,o)}))}shouldConvertImageType(t,e){return!this._styles.get(t).modelElements.includes(e.name)}}const{objectFullWidth:lv,objectInline:dv,objectLeft:uv,objectRight:hv,objectCenter:gv,objectBlockLeft:fv,objectBlockRight:pv}=zh,mv={get inline(){return{name:"inline",title:"In line",icon:dv,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:uv,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:fv,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:gv,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:hv,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:pv,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:gv,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:hv,modelElements:["imageBlock"],className:"image-style-side"}}},bv={full:lv,left:fv,right:pv,center:gv,inlineLeft:uv,inlineRight:hv,inline:dv},kv=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function wv(t){k("image-style-configuration-definition-invalid",t)}const yv={normalizeStyles:function(t){const e=(t.configuredStyles.options||[]).map((t=>function(t){t="string"==typeof t?mv[t]?{...mv[t]}:{name:t}:function(t,e){const n={...e};for(const r in t)Object.prototype.hasOwnProperty.call(e,r)||(n[r]=t[r]);return n}(mv[t.name],t);"string"==typeof t.icon&&(t.icon=bv[t.icon]||t.icon);return t}(t))).filter((e=>function(t,{isBlockPluginLoaded:e,isInlinePluginLoaded:n}){const{modelElements:r,name:i}=t;if(!(r&&r.length&&i))return wv({style:t}),!1;{const i=[e?"imageBlock":null,n?"imageInline":null];if(!r.some((t=>i.includes(t))))return k("image-style-missing-dependency",{style:t,missingPlugins:r.map((t=>"imageBlock"===t?"ImageBlockEditing":"ImageInlineEditing"))}),!1}return!0}(e,t)));return e},getDefaultStylesConfiguration:function(t,e){return t&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:t?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(t){return t.has("ImageBlockEditing")&&t.has("ImageInlineEditing")?[...kv]:[]},warnInvalidStyle:wv,DEFAULT_OPTIONS:mv,DEFAULT_ICONS:bv,DEFAULT_DROPDOWN_DEFINITIONS:kv};function _v(t,e){for(const n of e)if(n.name===t)return n}class vv extends Di{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[Xm]}init(){const{normalizeStyles:t,getDefaultStylesConfiguration:e}=yv,n=this.editor,r=n.plugins.has("ImageBlockEditing"),i=n.plugins.has("ImageInlineEditing");n.config.define("image.styles",e(r,i)),this.normalizedStyles=t({configuredStyles:n.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:i}),this._setupConversion(r,i),this._setupPostFixer(),n.commands.add("imageStyle",new cv(n,this.normalizedStyles))}_setupConversion(t,e){const n=this.editor,r=n.model.schema,i=(o=this.normalizedStyles,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=_v(e.attributeNewValue,o),i=_v(e.attributeOldValue,o),s=n.mapper.toViewElement(e.item),a=n.writer;i&&a.removeClass(i.className,s),r&&a.addClass(r.className,s)});var o;const s=function(t){const e={imageInline:t.filter((t=>!t.isDefault&&t.modelElements.includes("imageInline"))),imageBlock:t.filter((t=>!t.isDefault&&t.modelElements.includes("imageBlock")))};return(t,n,r)=>{if(!n.modelRange)return;const i=n.viewItem,o=_i(n.modelRange.getItems());if(o&&r.schema.checkAttribute(o,"imageStyle"))for(const t of e[o.name])r.consumable.consume(i,{classes:t.className})&&r.writer.setAttribute("imageStyle",t.name,o)}}(this.normalizedStyles);n.editing.downcastDispatcher.on("attribute:imageStyle",i),n.data.downcastDispatcher.on("attribute:imageStyle",i),t&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),e&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),n.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){const t=this.editor,e=t.model.document,n=t.plugins.get(Xm),r=new Map(this.normalizedStyles.map((t=>[t.name,t])));e.registerPostFixer((t=>{let i=!1;for(const o of e.differ.getChanges())if("insert"==o.type||"attribute"==o.type&&"imageStyle"==o.attributeKey){let e="insert"==o.type?o.position.nodeAfter:o.range.start.nodeAfter;if(e&&e.is("element","paragraph")&&e.childCount>0&&(e=e.getChild(0)),!n.isImage(e))continue;const s=e.getAttribute("imageStyle");if(!s)continue;const a=r.get(s);a&&a.modelElements.includes(e.name)||(t.removeAttribute("imageStyle",e),i=!0)}return i}))}}var Av=n(5083),Cv={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Av.Z,Cv);Av.Z.locals;class xv extends Di{static get requires(){return[vv]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const t=this.editor.t;return{"Wrap text":t("Wrap text"),"Break text":t("Break text"),"In line":t("In line"),"Full size image":t("Full size image"),"Side image":t("Side image"),"Left aligned image":t("Left aligned image"),"Centered image":t("Centered image"),"Right aligned image":t("Right aligned image")}}init(){const t=this.editor.plugins,e=this.editor.config.get("image.toolbar")||[],n=Ev(t.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const t of n)this._createButton(t);const r=Ev([...e.filter(O),...yv.getDefaultDropdownDefinitions(t)],this.localizedDefaultStylesTitles);for(const t of r)this._createDropdown(t,n)}_createDropdown(t,e){const n=this.editor.ui.componentFactory;n.add(t.name,(r=>{let i;const{defaultItem:o,items:s,title:a}=t,c=s.filter((t=>e.find((({name:e})=>Tv(e)===t)))).map((t=>{const e=n.create(t);return t===o&&(i=e),e}));s.length!==c.length&&yv.warnInvalidStyle({dropdown:t});const l=Rg(r,dg),d=l.buttonView,u=d.arrowView;return zg(l,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:Sv(a,i.label),class:null,tooltip:!0}),u.unbind("label"),u.set({label:a}),d.bind("icon").toMany(c,"isOn",((...t)=>{const e=t.findIndex(Lo);return e<0?i.icon:c[e].icon})),d.bind("label").toMany(c,"isOn",((...t)=>{const e=t.findIndex(Lo);return Sv(a,e<0?i.label:c[e].label)})),d.bind("isOn").toMany(c,"isOn",((...t)=>t.some(Lo))),d.bind("class").toMany(c,"isOn",((...t)=>t.some(Lo)?"ck-splitbutton_flatten":null)),d.on("execute",(()=>{c.some((({isOn:t})=>t))?l.isOpen=!l.isOpen:i.fire("execute")})),l.bind("isEnabled").toMany(c,"isEnabled",((...t)=>t.some(Lo))),this.listenTo(l,"execute",(()=>{this.editor.editing.view.focus()})),l}))}_createButton(t){const e=t.name;this.editor.ui.componentFactory.add(Tv(e),(n=>{const r=this.editor.commands.get("imageStyle"),i=new Zh(n);return i.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(r,"isEnabled"),i.bind("isOn").to(r,"value",(t=>t===e)),i.on("execute",this._executeCommand.bind(this,e)),i}))}_executeCommand(t){this.editor.execute("imageStyle",{value:t}),this.editor.editing.view.focus()}}function Ev(t,e){for(const n of t)e[n.title]&&(n.title=e[n.title]);return t}function Tv(t){return`imageStyle:${t}`}function Sv(t,e){return(t?t+": ":"")+e}class Dv extends Di{static get pluginName(){return"IndentEditing"}init(){const t=this.editor;t.commands.add("indent",new Li(t)),t.commands.add("outdent",new Li(t))}}const Mv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Iv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';class Bv extends Di{static get pluginName(){return"IndentUI"}init(){const t=this.editor,e=t.locale,n=t.t,r="ltr"==e.uiLanguageDirection?Mv:Iv,i="ltr"==e.uiLanguageDirection?Iv:Mv;this._defineButton("indent",n("Increase indent"),r),this._defineButton("outdent",n("Decrease indent"),i)}_defineButton(t,e,n){const r=this.editor;r.ui.componentFactory.add(t,(i=>{const o=r.commands.get(t),s=new Zh(i);return s.set({label:e,icon:n,tooltip:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),this.listenTo(s,"execute",(()=>{r.execute(t),r.editing.view.focus()})),s}))}}class Lv extends Ii{constructor(t,e){super(t),this._indentBehavior=e}refresh(){const t=this.editor.model,e=_i(t.document.selection.getSelectedBlocks());e&&t.schema.checkAttribute(e,"blockIndent")?this.isEnabled=this._indentBehavior.checkEnabled(e.getAttribute("blockIndent")):this.isEnabled=!1}execute(){const t=this.editor.model,e=function(t){const e=t.document.selection,n=t.schema;return Array.from(e.getSelectedBlocks()).filter((t=>n.checkAttribute(t,"blockIndent")))}(t);t.change((t=>{for(const n of e){const e=n.getAttribute("blockIndent"),r=this._indentBehavior.getNextIndent(e);r?t.setAttribute("blockIndent",r,n):t.removeAttribute("blockIndent",n)}}))}}class Nv{constructor(t){this.isForward="forward"===t.direction,this.offset=t.offset,this.unit=t.unit}checkEnabled(t){const e=parseFloat(t||0);return this.isForward||e>0}getNextIndent(t){const e=parseFloat(t||0);if(!(!t||t.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const n=e+(this.isForward?this.offset:-this.offset);return n>0?n+this.unit:void 0}}class Ov{constructor(t){this.isForward="forward"===t.direction,this.classes=t.classes}checkEnabled(t){const e=this.classes.indexOf(t);return this.isForward?e<this.classes.length-1:e>=0}getNextIndent(t){const e=this.classes.indexOf(t),n=this.isForward?1:-1;return this.classes[e+n]}}const Pv=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];const Rv="italic";class zv extends Di{static get pluginName(){return"ItalicEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:Rv}),t.model.schema.setAttributeProperties(Rv,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Rv,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Rv,new $b(t,Rv)),t.keystrokes.set("CTRL+I",Rv)}}const Fv="italic";class jv extends Di{static get pluginName(){return"ItalicUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(Fv,(n=>{const r=t.commands.get(Fv),i=new Zh(n);return i.set({label:e("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(Fv),t.editing.view.focus()})),i}))}}class Vv{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach((t=>this._definitions.add(t))):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",((t,e,n)=>{if(!n.consumable.test(e.item,"attribute:linkHref"))return;if(!e.item.is("selection")&&!n.schema.isInline(e.item))return;const r=n.writer,i=r.document.selection;for(const t of this._definitions){const o=r.createAttributeElement("a",t.attributes,{priority:5});t.classes&&r.addClass(t.classes,o);for(const e in t.styles)r.setStyle(e,t.styles[e],o);r.setCustomProperty("link",!0,o),t.callback(e.attributeNewValue)?e.item.is("selection")?r.wrap(i.getFirstRange(),o):r.wrap(n.mapper.toViewRange(e.range),o):r.unwrap(n.mapper.toViewRange(e.range),o)}}),{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",((t,e,{writer:n,mapper:r})=>{const i=r.toViewElement(e.item),o=Array.from(i.getChildren()).find((t=>"a"===t.name));for(const t of this._definitions){const r=Ci(t.attributes);if(t.callback(e.attributeNewValue)){for(const[t,e]of r)"class"===t?n.addClass(e,o):n.setAttribute(t,e,o);t.classes&&n.addClass(t.classes,o);for(const e in t.styles)n.setStyle(e,t.styles[e],o)}else{for(const[t,e]of r)"class"===t?n.removeClass(e,o):n.removeAttribute(t,o);t.classes&&n.removeClass(t.classes,o);for(const e in t.styles)n.removeStyle(e,o)}}}))}}}class $v extends Ii{constructor(t){super(t),this.manualDecorators=new yi,this.automaticDecorators=new Vv}restoreManualDecoratorStates(){for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement()||_i(e.getSelectedBlocks());Eb(n,t.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttribute(n,"linkHref")):(this.value=e.getAttribute("linkHref"),this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref"));for(const t of this.manualDecorators)t.value=this._getDecoratorStateFromModel(t.id)}execute(t,e={}){const n=this.editor.model,r=n.document.selection,i=[],o=[];for(const t in e)e[t]?i.push(t):o.push(t);n.change((e=>{if(r.isCollapsed){const s=r.getFirstPosition();if(r.hasAttribute("linkHref")){const a=vp(s,"linkHref",r.getAttribute("linkHref"),n);e.setAttribute("linkHref",t,a),i.forEach((t=>{e.setAttribute(t,!0,a)})),o.forEach((t=>{e.removeAttribute(t,a)})),e.setSelection(e.createPositionAfter(a.end.nodeBefore))}else if(""!==t){const o=Ci(r.getAttributes());o.set("linkHref",t),i.forEach((t=>{o.set(t,!0)}));const{end:a}=n.insertContent(e.createText(t,o),s);e.setSelection(a)}["linkHref",...i,...o].forEach((t=>{e.removeSelectionAttribute(t)}))}else{const s=n.schema.getValidRanges(r.getRanges(),"linkHref"),a=[];for(const t of r.getSelectedBlocks())n.schema.checkAttribute(t,"linkHref")&&a.push(e.createRangeOn(t));const c=a.slice();for(const t of s)this._isRangeToUpdate(t,a)&&c.push(t);for(const n of c)e.setAttribute("linkHref",t,n),i.forEach((t=>{e.setAttribute(t,!0,n)})),o.forEach((t=>{e.removeAttribute(t,n)}))}}))}_getDecoratorStateFromModel(t){const e=this.editor.model,n=e.document.selection,r=n.getSelectedElement();return Eb(r,e.schema)?r.getAttribute(t):n.getAttribute(t)}_isRangeToUpdate(t,e){for(const n of e)if(n.containsRange(t))return!1;return!0}}class Hv extends Ii{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();Eb(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,r=t.commands.get("link");e.change((t=>{const i=n.isCollapsed?[vp(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const e of i)if(t.removeAttribute("linkHref",e),r)for(const n of r.manualDecorators)t.removeAttribute(n.id,e)}))}}class Uv{constructor({id:t,label:e,attributes:n,classes:r,styles:i,defaultValue:o}){this.id=t,this.set("value"),this.defaultValue=o,this.label=e,this.attributes=n,this.classes=r,this.styles=i}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}d(Uv,$);var Wv=n(9773),qv={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Wv.Z,qv);Wv.Z.locals;const Yv="automatic",Gv=/^(https?:)?\/\//;class Zv extends Di{static get pluginName(){return"LinkEditing"}static get requires(){return[ap,Gf,Bp]}constructor(t){super(t),t.config.define("link",{addTargetToExternalLinks:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Cb}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(t,e)=>Cb(xb(t),e)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:t=>t.getAttribute("href")}}),t.commands.add("link",new $v(t)),t.commands.add("unlink",new Hv(t));const e=function(t,e){const n={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return e.forEach((t=>(t.label&&n[t.label]&&(t.label=n[t.label]),t))),e}(t.t,function(t){const e=[];if(t)for(const[n,r]of Object.entries(t)){const t=Object.assign({},r,{id:`link${kb(n)}`});e.push(t)}return e}(t.config.get("link.decorators")));this._enableAutomaticDecorators(e.filter((t=>t.mode===Yv))),this._enableManualDecorators(e.filter((t=>"manual"===t.mode)));t.plugins.get(ap).registerAttribute("linkHref"),Cp(t,"linkHref","a","ck-link_selected"),this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}_enableAutomaticDecorators(t){const e=this.editor,n=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:Yv,callback:t=>Gv.test(t),attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(t),n.length&&e.conversion.for("downcast").add(n.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,n=e.commands.get("link").manualDecorators;t.forEach((t=>{e.model.schema.extend("$text",{allowAttributes:t.id}),t=new Uv(t),n.add(t),e.conversion.for("downcast").attributeToElement({model:t.id,view:(e,{writer:n,schema:r},{item:i})=>{if((i.is("selection")||r.isInline(i))&&e){const e=n.createAttributeElement("a",t.attributes,{priority:5});t.classes&&n.addClass(t.classes,e);for(const r in t.styles)n.setStyle(r,t.styles[r],e);return n.setCustomProperty("link",!0,e),e}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...t._createPattern()},model:{key:t.id}})}))}_enableLinkOpen(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",((t,e)=>{if(!(i.isMac?e.domEvent.metaKey:e.domEvent.ctrlKey))return;let n=e.domTarget;if("a"!=n.tagName.toLowerCase()&&(n=n.closest("a")),!n)return;const r=n.getAttribute("href");r&&(t.stop(),e.preventDefault(),Db(r))}),{context:"$capture"}),this.listenTo(e,"keydown",((e,n)=>{const r=t.commands.get("link").value;r&&n.keyCode===li.enter&&n.altKey&&(e.stop(),Db(r))}))}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,e=t.document.selection;this.listenTo(t,"insertContent",(()=>{const n=e.anchor.nodeBefore,r=e.anchor.nodeAfter;e.hasAttribute("linkHref")&&n&&n.hasAttribute("linkHref")&&(r&&r.hasAttribute("linkHref")||t.change((e=>{Kv(e,Xv(t.schema))})))}),{priority:"low"})}_enableClickingAfterLink(){const t=this.editor,e=t.model;t.editing.view.addObserver(iu);let n=!1;this.listenTo(t.editing.view.document,"mousedown",(()=>{n=!0})),this.listenTo(t.editing.view.document,"selectionChange",(()=>{if(!n)return;n=!1;const t=e.document.selection;if(!t.isCollapsed)return;if(!t.hasAttribute("linkHref"))return;const r=t.getFirstPosition(),i=vp(r,"linkHref",t.getAttribute("linkHref"),e);(r.isTouching(i.start)||r.isTouching(i.end))&&e.change((t=>{Kv(t,Xv(e.schema))}))}))}_enableTypingOverLink(){const t=this.editor,e=t.editing.view;let n,r;this.listenTo(e.document,"delete",(()=>{r=!0}),{priority:"high"}),this.listenTo(t.model,"deleteContent",(()=>{const e=t.model.document.selection;e.isCollapsed||(r?r=!1:Qv(t)&&function(t){const e=t.document.selection,n=e.getFirstPosition(),r=e.getLastPosition(),i=n.nodeAfter;if(!i)return!1;if(!i.is("$text"))return!1;if(!i.hasAttribute("linkHref"))return!1;const o=r.textNode||r.nodeBefore;if(i===o)return!0;return vp(n,"linkHref",i.getAttribute("linkHref"),t).containsRange(t.createRange(n,r),!0)}(t.model)&&(n=e.getAttributes()))}),{priority:"high"}),this.listenTo(t.model,"insertContent",((e,[i])=>{r=!1,Qv(t)&&n&&(t.model.change((t=>{for(const[e,r]of n)t.setAttribute(e,r,i)})),n=null)}),{priority:"high"})}_handleDeleteContentAfterLink(){const t=this.editor,e=t.model,n=e.document.selection,r=t.editing.view;let i=!1,o=!1;this.listenTo(r.document,"delete",((t,e)=>{o="backward"===e.direction}),{priority:"high"}),this.listenTo(e,"deleteContent",(()=>{i=!1;const t=n.getFirstPosition(),r=n.getAttribute("linkHref");if(!r)return;const o=vp(t,"linkHref",r,e);i=o.containsPosition(t)||o.end.isEqual(t)}),{priority:"high"}),this.listenTo(e,"deleteContent",(()=>{o&&(o=!1,i||t.model.enqueueChange((t=>{Kv(t,Xv(e.schema))})))}),{priority:"low"})}}function Kv(t,e){t.removeSelectionAttribute("linkHref");for(const n of e)t.removeSelectionAttribute(n)}function Qv(t){return t.model.change((t=>t.batch)).isTyping}function Xv(t){return t.getDefinition("$text").allowAttributes.filter((t=>t.startsWith("link")))}var Jv=n(7754),tA={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Jv.Z,tA);Jv.Z.locals;class eA extends yh{constructor(t,e){super(t);const n=t.t;this.focusTracker=new vi,this.keystrokes=new Ai,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),zh.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),zh.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(e),this.children=this._createFormChildren(e.manualDecorators),this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const r=["ck","ck-link-form","ck-responsive-form"];e.manualDecorators.length&&r.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:r,tabindex:"-1"},children:this.children}),jh(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(((t,e)=>(t[e.name]=e.isOn,t)),{})}render(){super.render(),Vh({view:this});[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const t=this.locale.t,e=new af(this.locale,cf);return e.label=t("Link URL"),e}_createButton(t,e,n,r){const i=new Zh(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createManualDecoratorSwitches(t){const e=this.createCollection();for(const n of t.manualDecorators){const r=new Xh(this.locale);r.set({name:n.id,label:n.label,withText:!0}),r.bind("isOn").toMany([n,t],"value",((t,e)=>void 0===e&&void 0===t?n.defaultValue:t)),r.on("execute",(()=>{n.set("value",!r.isOn)})),e.add(r)}return e}_createFormChildren(t){const e=this.createCollection();if(e.add(this.urlInputView),t.length){const t=new yh;t.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map((t=>({tag:"li",children:[t],attributes:{class:["ck","ck-list__item"]}}))),attributes:{class:["ck","ck-reset","ck-list"]}}),e.add(t)}return e.add(this.saveButtonView),e.add(this.cancelButtonView),e}}var nA=n(2347),rA={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(nA.Z,rA);nA.Z.locals;class iA extends yh{constructor(t){super(t);const e=t.t;this.focusTracker=new vi,this.keystrokes=new Ai,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(e("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(e("Edit link"),zh.pencil,"edit"),this.set("href"),this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render();[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(t,e,n){const r=new Zh(this.locale);return r.set({label:t,icon:e,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){const t=new Zh(this.locale),e=this.bindTemplate,n=this.t;return t.set({withText:!0,tooltip:n("Open link in new tab")}),t.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:e.to("href",(t=>t&&xb(t))),target:"_blank",rel:"noopener noreferrer"}}),t.bind("label").to(this,"href",(t=>t||n("This link has no URL"))),t.bind("isEnabled").to(this,"href",(t=>!!t)),t.template.tag="a",t.template.eventListeners={},t}}const oA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',sA="link-ui";class aA extends Di{static get requires(){return[wf]}static get pluginName(){return"LinkUI"}init(){const t=this.editor;t.editing.view.addObserver(ru),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=t.plugins.get(wf),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),t.conversion.for("editingDowncast").markerToHighlight({model:sA,view:{classes:["ck-fake-link-selection"]}}),t.conversion.for("editingDowncast").markerToElement({model:sA,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const t=this.editor,e=new iA(t.locale),n=t.commands.get("link"),r=t.commands.get("unlink");return e.bind("href").to(n,"value"),e.editButtonView.bind("isEnabled").to(n),e.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(e,"edit",(()=>{this._addFormView()})),this.listenTo(e,"unlink",(()=>{t.execute("unlink"),this._hideUI()})),e.keystrokes.set("Esc",((t,e)=>{this._hideUI(),e()})),e.keystrokes.set(Ab,((t,e)=>{this._addFormView(),e()})),e}_createFormView(){const t=this.editor,e=t.commands.get("link"),n=t.config.get("link.defaultProtocol"),r=new eA(t.locale,e);return r.urlInputView.fieldView.bind("value").to(e,"value"),r.urlInputView.bind("isReadOnly").to(e,"isEnabled",(t=>!t)),r.saveButtonView.bind("isEnabled").to(e),this.listenTo(r,"submit",(()=>{const{value:e}=r.urlInputView.fieldView.element,i=Tb(e,n);t.execute("link",i,r.getDecoratorSwitchesState()),this._closeFormView()})),this.listenTo(r,"cancel",(()=>{this._closeFormView()})),r.keystrokes.set("Esc",((t,e)=>{this._closeFormView(),e()})),r}_createToolbarLinkButton(){const t=this.editor,e=t.commands.get("link"),n=t.t;t.keystrokes.set(Ab,((t,n)=>{n(),e.isEnabled&&this._showUI(!0)})),t.ui.componentFactory.add("link",(t=>{const r=new Zh(t);return r.isEnabled=!0,r.label=n("Link"),r.icon=oA,r.keystroke=Ab,r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(e,"isEnabled"),r.bind("isOn").to(e,"value",(t=>!!t)),this.listenTo(r,"execute",(()=>this._showUI(!0))),r}))}_enableUserBalloonInteractions(){const t=this.editor.editing.view.document;this.listenTo(t,"click",(()=>{this._getSelectedLinkElement()&&this._showUI()})),this.editor.keystrokes.set("Tab",((t,e)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),e())}),{priority:"high"}),this.editor.keystrokes.set("Esc",((t,e)=>{this._isUIVisible&&(this._hideUI(),e())})),Fh({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=t.value||""}_closeFormView(){const t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),void 0!==t.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(t=!1){this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const t=this.editor,e=t.editing.view.document;let n=this._getSelectedLinkElement(),r=o();const i=()=>{const t=this._getSelectedLinkElement(),e=o();n&&!t||!n&&e!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=t,r=e};function o(){return e.selection.focus.getAncestors().reverse().find((t=>t.is("element")))}this.listenTo(t.ui,"update",i),this.listenTo(this._balloon,"change:visibleView",i)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=this.editor.model,n=t.document;let r=null;if(e.markers.has(sA)){const e=Array.from(this.editor.editing.mapper.markerNameToElements(sA)),n=t.createRange(t.createPositionBefore(e[0]),t.createPositionAfter(e[e.length-1]));r=t.domConverter.viewRangeToDom(n)}else r=()=>{const e=this._getSelectedLinkElement();return e?t.domConverter.mapViewToDom(e):t.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){const t=this.editor.editing.view,e=t.document.selection,n=e.getSelectedElement();if(e.isCollapsed||n&&Zp(n))return cA(e.getFirstPosition());{const n=e.getFirstRange().getTrimmed(),r=cA(n.start),i=cA(n.end);return r&&r==i&&t.createRangeIn(r).getTrimmed().isEqual(n)?r:null}}_showFakeVisualSelection(){const t=this.editor.model;t.change((e=>{const n=t.document.selection.getFirstRange();if(t.markers.has(sA))e.updateMarker(sA,{range:n});else if(n.start.isAtEnd){const r=n.start.getLastMatchingPosition((({item:e})=>!t.schema.isContent(e)),{boundaries:n});e.addMarker(sA,{usingOperation:!1,affectsData:!1,range:e.createRange(r,n.end)})}else e.addMarker(sA,{usingOperation:!1,affectsData:!1,range:n})}))}_hideFakeVisualSelection(){const t=this.editor.model;t.markers.has(sA)&&t.change((t=>{t.removeMarker(sA)}))}}function cA(t){return t.getAncestors().find((t=>{return(e=t).is("attributeElement")&&!!e.getCustomProperty("link");var e}))}class lA extends Di{static get requires(){return["ImageEditing","ImageUtils",Zv]}static get pluginName(){return"LinkImageEditing"}init(){const t=this.editor,e=t.model.schema;t.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["linkHref"]}),t.conversion.for("upcast").add(function(t){const e=t.plugins.has("ImageInlineEditing"),n=t.plugins.get("ImageUtils");return t=>{t.on("element:a",((t,r,i)=>{const o=r.viewItem,s=n.findViewImgElement(o);if(!s)return;const a=s.findAncestor((t=>n.isBlockImageView(t)));if(e&&!a)return;const c={attributes:["href"]};if(!i.consumable.consume(o,c))return;const l=o.getAttribute("href");if(!l)return;let d=r.modelCursor.parent;if(!d.is("element","imageBlock")){const t=i.convertItem(s,r.modelCursor);r.modelRange=t.modelRange,r.modelCursor=t.modelCursor,d=r.modelCursor.nodeBefore}d&&d.is("element","imageBlock")&&i.writer.setAttribute("linkHref",l,d)}),{priority:"high"})}}(t)),t.conversion.for("downcast").add(function(t){const e=t.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",((t,n,r)=>{if(!r.consumable.consume(n.item,t.name))return;const i=r.mapper.toViewElement(n.item),o=r.writer,s=Array.from(i.getChildren()).find((t=>"a"===t.name)),a=e.findViewImgElement(i),c=a.parent.is("element","picture")?a.parent:a;if(s)n.attributeNewValue?o.setAttribute("href",n.attributeNewValue,s):(o.move(o.createRangeOn(c),o.createPositionAt(i,0)),o.remove(s));else{const t=o.createContainerElement("a",{href:n.attributeNewValue});o.insert(o.createPositionAt(i,0),t),o.move(o.createRangeOn(c),o.createPositionAt(t,0))}}),{priority:"high"})}}(t)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const t=this.editor,e=t.commands.get("link").automaticDecorators;e.length&&t.conversion.for("downcast").add(e.getDispatcherForLinkedImage())}_enableManualDecorators(){const t=this.editor,e=t.commands.get("link");for(const n of e.manualDecorators)t.plugins.has("ImageBlockEditing")&&t.model.schema.extend("imageBlock",{allowAttributes:n.id}),t.plugins.has("ImageInlineEditing")&&t.model.schema.extend("imageInline",{allowAttributes:n.id}),t.conversion.for("downcast").add(dA(n)),t.conversion.for("upcast").add(uA(t,n))}}function dA(t){return e=>{e.on(`attribute:${t.id}:imageBlock`,((e,n,r)=>{const i=r.mapper.toViewElement(n.item),o=Array.from(i.getChildren()).find((t=>"a"===t.name));if(o){for(const[e,n]of Ci(t.attributes))r.writer.setAttribute(e,n,o);t.classes&&r.writer.addClass(t.classes,o);for(const e in t.styles)r.writer.setStyle(e,t.styles[e],o)}}))}}function uA(t,e){const n=t.plugins.has("ImageInlineEditing"),r=t.plugins.get("ImageUtils");return t=>{t.on("element:a",((t,i,o)=>{const s=i.viewItem,a=r.findViewImgElement(s);if(!a)return;const c=a.findAncestor((t=>r.isBlockImageView(t)));if(n&&!c)return;const l=new Xi(e._createPattern()).match(s);if(!l)return;if(!o.consumable.consume(s,l.match))return;const d=i.modelCursor.nodeBefore||i.modelCursor.parent;o.writer.setAttribute(e.id,!0,d)}),{priority:"high"})}}class hA extends Di{static get requires(){return[Zv,aA,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"click",((e,n)=>{this._isSelectedLinkedImage(t.model.document.selection)&&(n.preventDefault(),e.stop())}),{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("linkImage",(n=>{const r=new Zh(n),i=t.plugins.get("LinkUI"),o=t.commands.get("link");return r.set({isEnabled:!0,label:e("Link image"),icon:oA,keystroke:Ab,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",(t=>!!t)),this.listenTo(r,"execute",(()=>{this._isSelectedLinkedImage(t.model.document.selection)?i._addActionsView():i._showUI(!0)})),r}))}_isSelectedLinkedImage(t){const e=t.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(e)&&e.hasAttribute("linkHref")}}var gA=n(111),fA={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(gA.Z,fA);gA.Z.locals;class pA extends Ii{constructor(t,e){super(t),this.type=e}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){const e=this.editor.model,n=e.document,r=Array.from(n.selection.getSelectedBlocks()).filter((t=>bA(t,e.schema))),i=void 0!==t.forceValue?!t.forceValue:this.value;e.change((t=>{if(i){let e=r[r.length-1].nextSibling,n=Number.POSITIVE_INFINITY,i=[];for(;e&&"listItem"==e.name&&0!==e.getAttribute("listIndent");){const t=e.getAttribute("listIndent");t<n&&(n=t);const r=t-n;i.push({element:e,listIndent:r}),e=e.nextSibling}i=i.reverse();for(const e of i)t.setAttribute("listIndent",e.listIndent,e.element)}if(!i){let t=Number.POSITIVE_INFINITY;for(const e of r)e.is("element","listItem")&&e.getAttribute("listIndent")<t&&(t=e.getAttribute("listIndent"));t=0===t?1:t,mA(r,!0,t),mA(r,!1,t)}for(const e of r.reverse())i&&"listItem"==e.name?t.rename(e,"paragraph"):i||"listItem"==e.name?i||"listItem"!=e.name||e.getAttribute("listType")==this.type||t.setAttribute("listType",this.type,e):(t.setAttributes({listType:this.type,listIndent:0},e),t.rename(e,"listItem"));this.fire("_executeCleanup",r)}))}_getValue(){const t=_i(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("element","listItem")&&t.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const t=this.editor.model.document.selection,e=this.editor.model.schema,n=_i(t.getSelectedBlocks());return!!n&&bA(n,e)}}function mA(t,e,n){const r=e?t[0]:t[t.length-1];if(r.is("element","listItem")){let i=r[e?"previousSibling":"nextSibling"],o=r.getAttribute("listIndent");for(;i&&i.is("element","listItem")&&i.getAttribute("listIndent")>=n;)o>i.getAttribute("listIndent")&&(o=i.getAttribute("listIndent")),i.getAttribute("listIndent")==o&&t[e?"unshift":"push"](i),i=i[e?"previousSibling":"nextSibling"]}}function bA(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t)}class kA extends Ii{constructor(t,e){super(t),this._indentBy="forward"==e?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model,e=t.document;let n=Array.from(e.selection.getSelectedBlocks());t.change((t=>{const e=n[n.length-1];let r=e.nextSibling;for(;r&&"listItem"==r.name&&r.getAttribute("listIndent")>e.getAttribute("listIndent");)n.push(r),r=r.nextSibling;this._indentBy<0&&(n=n.reverse());for(const e of n){const n=e.getAttribute("listIndent")+this._indentBy;n<0?t.rename(e,"paragraph"):t.setAttribute("listIndent",n,e)}this.fire("_executeCleanup",n)}))}_checkEnabled(){const t=_i(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("element","listItem"))return!1;if(this._indentBy>0){const e=t.getAttribute("listIndent"),n=t.getAttribute("listType");let r=t.previousSibling;for(;r&&r.is("element","listItem")&&r.getAttribute("listIndent")>=e;){if(r.getAttribute("listIndent")==e)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}function wA(t,e){const n=e.mapper,r=e.writer,i="numbered"==t.getAttribute("listType")?"ol":"ul",o=function(t){const e=t.createContainerElement("li");return e.getFillerOffset=MA,e}(r),s=r.createContainerElement(i,null);return r.insert(r.createPositionAt(s,0),o),n.bindElements(t,o),o}function yA(t,e,n,r){const i=e.parent,o=n.mapper,s=n.writer;let a=o.toViewPosition(r.createPositionBefore(t));const c=AA(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),l=t.previousSibling;if(c&&c.getAttribute("listIndent")==t.getAttribute("listIndent")){const t=o.toViewElement(c);a=s.breakContainer(s.createPositionAfter(t))}else if(l&&"listItem"==l.name){a=o.toViewPosition(r.createPositionAt(l,"end"));const t=o.findMappedViewAncestor(a),e=xA(t);a=e?s.createPositionBefore(e):s.createPositionAt(t,"end")}else a=o.toViewPosition(r.createPositionBefore(t));if(a=vA(a),s.insert(a,i),l&&"listItem"==l.name){const t=o.toViewElement(l),n=s.createRange(s.createPositionAt(t,0),a).getWalker({ignoreElementEnd:!0});for(const t of n)if(t.item.is("element","li")){const r=s.breakContainer(s.createPositionBefore(t.item)),i=t.item.parent,o=s.createPositionAt(e,"end");_A(s,o.nodeBefore,o.nodeAfter),s.move(s.createRangeOn(i),o),n.position=r}}else{const n=i.nextSibling;if(n&&(n.is("element","ul")||n.is("element","ol"))){let r=null;for(const e of n.getChildren()){const n=o.toModelElement(e);if(!(n&&n.getAttribute("listIndent")>t.getAttribute("listIndent")))break;r=e}r&&(s.breakContainer(s.createPositionAfter(r)),s.move(s.createRangeOn(r.parent),s.createPositionAt(e,"end")))}}_A(s,i,i.nextSibling),_A(s,i.previousSibling,i)}function _A(t,e,n){return!e||!n||"ul"!=e.name&&"ol"!=e.name||e.name!=n.name||e.getAttribute("class")!==n.getAttribute("class")?null:t.mergeContainers(t.createPositionAfter(e))}function vA(t){return t.getLastMatchingPosition((t=>t.item.is("uiElement")))}function AA(t,e){const n=!!e.sameIndent,r=!!e.smallerIndent,i=e.listIndent;let o=t;for(;o&&"listItem"==o.name;){const t=o.getAttribute("listIndent");if(n&&i==t||r&&i>t)return o;o="forward"===e.direction?o.nextSibling:o.previousSibling}return null}function CA(t,e,n,r){t.ui.componentFactory.add(e,(i=>{const o=t.commands.get(e),s=new Zh(i);return s.set({label:n,icon:r,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",(()=>{t.execute(e),t.editing.view.focus()})),s}))}function xA(t){for(const e of t.getChildren())if("ul"==e.name||"ol"==e.name)return e;return null}function EA(t,e){const n=[],r=t.parent,i={ignoreElementEnd:!1,startPosition:t,shallow:!0,direction:e},o=r.getAttribute("listIndent"),s=[...new fc(i)].filter((t=>t.item.is("element"))).map((t=>t.item));for(const t of s){if(!t.is("element","listItem"))break;if(t.getAttribute("listIndent")<o)break;if(!(t.getAttribute("listIndent")>o)){if(t.getAttribute("listType")!==r.getAttribute("listType"))break;if(t.getAttribute("listStyle")!==r.getAttribute("listStyle"))break;if(t.getAttribute("listReversed")!==r.getAttribute("listReversed"))break;if(t.getAttribute("listStart")!==r.getAttribute("listStart"))break;"backward"===e?n.unshift(t):n.push(t)}}return n}function TA(t){let e=[...t.document.selection.getSelectedBlocks()].filter((t=>t.is("element","listItem"))).map((e=>{const n=t.change((t=>t.createPositionAt(e,0)));return[...EA(n,"backward"),...EA(n,"forward")]})).flat();return e=[...new Set(e)],e}const SA=["disc","circle","square"],DA=["decimal","decimal-leading-zero","lower-roman","upper-roman","lower-latin","upper-latin"];function MA(){const t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:es.call(this)}function IA(t){return(e,n,r)=>{const i=r.consumable;if(!i.test(n.item,"insert")||!i.test(n.item,"attribute:listType")||!i.test(n.item,"attribute:listIndent"))return;i.consume(n.item,"insert"),i.consume(n.item,"attribute:listType"),i.consume(n.item,"attribute:listIndent");const o=n.item;yA(o,wA(o,r),r,t)}}function BA(t,e,n){if(!n.consumable.test(e.item,t.name))return;const r=n.mapper.toViewElement(e.item),i=n.writer;i.breakContainer(i.createPositionBefore(r)),i.breakContainer(i.createPositionAfter(r));const o=r.parent,s="numbered"==e.attributeNewValue?"ol":"ul";i.rename(s,o)}function LA(t,e,n){n.consumable.consume(e.item,t.name);const r=n.mapper.toViewElement(e.item).parent,i=n.writer;_A(i,r,r.nextSibling),_A(i,r.previousSibling,r)}function NA(t,e,n){if(n.consumable.test(e.item,t.name)&&"listItem"!=e.item.name){let t=n.mapper.toViewPosition(e.range.start);const r=n.writer,i=[];for(;("ul"==t.parent.name||"ol"==t.parent.name)&&(t=r.breakContainer(t),"li"==t.parent.name);){const e=t,n=r.createPositionAt(t.parent,"end");if(!e.isEqual(n)){const t=r.remove(r.createRange(e,n));i.push(t)}t=r.createPositionAfter(t.parent)}if(i.length>0){for(let e=0;e<i.length;e++){const n=t.nodeBefore;if(t=r.insert(t,i[e]).end,e>0){const e=_A(r,n,n.nextSibling);e&&e.parent==n&&t.offset--}}_A(r,t.nodeBefore,t.nodeAfter)}}}function OA(t,e,n){const r=n.mapper.toViewPosition(e.position),i=r.nodeBefore,o=r.nodeAfter;_A(n.writer,i,o)}function PA(t,e,n){if(n.consumable.consume(e.viewItem,{name:!0})){const t=n.writer,r=t.createElement("listItem"),i=function(t){let e=0,n=t.parent;for(;n;){if(n.is("element","li"))e++;else{const t=n.previousSibling;t&&t.is("element","li")&&e++}n=n.parent}return e}(e.viewItem);t.setAttribute("listIndent",i,r);const o=e.viewItem.parent&&"ol"==e.viewItem.parent.name?"numbered":"bulleted";if(t.setAttribute("listType",o,r),!n.safeInsert(r,e.modelCursor))return;const s=function(t,e,n){const{writer:r,schema:i}=n;let o=r.createPositionAfter(t);for(const s of e)if("ul"==s.name||"ol"==s.name)o=n.convertItem(s,o).modelCursor;else{const e=n.convertItem(s,r.createPositionAt(t,"end")),a=e.modelRange.start.nodeAfter;a&&a.is("element")&&!i.checkChild(t,a.name)&&(t=e.modelCursor.parent.is("element","listItem")?e.modelCursor.parent:VA(e.modelCursor),o=r.createPositionAfter(t))}return o}(r,e.viewItem.getChildren(),n);e.modelRange=t.createRange(e.modelCursor,s),n.updateConversionResult(r,e)}}function RA(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){const t=Array.from(e.viewItem.getChildren());for(const e of t){!(e.is("element","li")||HA(e))&&e._remove()}}}function zA(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){if(0===e.viewItem.childCount)return;const t=[...e.viewItem.getChildren()];let n=!1;for(const e of t)n&&!HA(e)&&e._remove(),HA(e)&&(n=!0)}}function FA(t){return(e,n)=>{if(n.isPhantom)return;const r=n.modelPosition.nodeBefore;if(r&&r.is("element","listItem")){const e=n.mapper.toViewElement(r),i=e.getAncestors().find(HA),o=t.createPositionAt(e,0).getWalker();for(const t of o){if("elementStart"==t.type&&t.item.is("element","li")){n.viewPosition=t.previousPosition;break}if("elementEnd"==t.type&&t.item==i){n.viewPosition=t.nextPosition;break}}}}}function jA(t,[e,n,r]){let i,o=e.is("documentFragment")?e.getChild(0):e;if(i=n?this.createSelection(n,r):this.document.selection,o&&o.is("element","listItem")){const t=i.getFirstPosition();let e=null;if(t.parent.is("element","listItem")?e=t.parent:t.nodeBefore&&t.nodeBefore.is("element","listItem")&&(e=t.nodeBefore),e){const t=e.getAttribute("listIndent");if(t>0)for(;o&&o.is("element","listItem");)o._setAttribute("listIndent",o.getAttribute("listIndent")+t),o=o.nextSibling}}}function VA(t){const e=new fc({startPosition:t});let n;do{n=e.next()}while(!n.value.item.is("element","listItem"));return n.value.item}function $A(t,e,n,r,i,o){const s=AA(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:t,foo:"b"}),a=i.mapper,c=i.writer,l=s?s.getAttribute("listIndent"):null;let d;if(s)if(l==t){const t=a.toViewElement(s).parent;d=c.createPositionAfter(t)}else{const t=o.createPositionAt(s,"end");d=a.toViewPosition(t)}else d=n;d=vA(d);for(const t of[...r.getChildren()])HA(t)&&(d=c.move(c.createRangeOn(t),d).end,_A(c,t,t.nextSibling),_A(c,t.previousSibling,t))}function HA(t){return t.is("element","ol")||t.is("element","ul")}class UA extends Di{static get pluginName(){return"ListEditing"}static get requires(){return[zp,rp]}init(){const t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const e=t.data,n=t.editing;var r;t.model.document.registerPostFixer((e=>function(t,e){const n=t.document.differ.getChanges(),r=new Map;let i=!1;for(const r of n)if("insert"==r.type&&"listItem"==r.name)o(r.position);else if("insert"==r.type&&"listItem"!=r.name){if("$text"!=r.name){const n=r.position.nodeAfter;n.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",n),i=!0),n.hasAttribute("listType")&&(e.removeAttribute("listType",n),i=!0),n.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",n),i=!0),n.hasAttribute("listReversed")&&(e.removeAttribute("listReversed",n),i=!0),n.hasAttribute("listStart")&&(e.removeAttribute("listStart",n),i=!0);for(const e of Array.from(t.createRangeIn(n)).filter((t=>t.item.is("element","listItem"))))o(e.previousPosition)}o(r.position.getShiftedBy(r.length))}else"remove"==r.type&&"listItem"==r.name?o(r.position):("attribute"==r.type&&"listIndent"==r.attributeKey||"attribute"==r.type&&"listType"==r.attributeKey)&&o(r.range.start);for(const t of r.values())s(t),a(t);return i;function o(t){const e=t.nodeBefore;if(e&&e.is("element","listItem")){let t=e;if(r.has(t))return;for(let e=t.previousSibling;e&&e.is("element","listItem");e=t.previousSibling)if(t=e,r.has(t))return;r.set(e,t)}else{const e=t.nodeAfter;e&&e.is("element","listItem")&&r.set(e,e)}}function s(t){let n=0,r=null;for(;t&&t.is("element","listItem");){const o=t.getAttribute("listIndent");if(o>n){let s;null===r?(r=o-n,s=n):(r>o&&(r=o),s=o-r),e.setAttribute("listIndent",s,t),i=!0}else r=null,n=t.getAttribute("listIndent")+1;t=t.nextSibling}}function a(t){let n=[],r=null;for(;t&&t.is("element","listItem");){const o=t.getAttribute("listIndent");if(r&&r.getAttribute("listIndent")>o&&(n=n.slice(0,o+1)),0!=o)if(n[o]){const r=n[o];t.getAttribute("listType")!=r&&(e.setAttribute("listType",r,t),i=!0)}else n[o]=t.getAttribute("listType");r=t,t=t.nextSibling}}}(t.model,e))),n.mapper.registerViewToModelLength("li",WA),e.mapper.registerViewToModelLength("li",WA),n.mapper.on("modelToViewPosition",FA(n.view)),n.mapper.on("viewToModelPosition",(r=t.model,(t,e)=>{const n=e.viewPosition,i=n.parent,o=e.mapper;if("ul"==i.name||"ol"==i.name){if(n.isAtEnd){const t=o.toModelElement(n.nodeBefore),i=o.getModelLength(n.nodeBefore);e.modelPosition=r.createPositionBefore(t).getShiftedBy(i)}else{const t=o.toModelElement(n.nodeAfter);e.modelPosition=r.createPositionBefore(t)}t.stop()}else if("li"==i.name&&n.nodeBefore&&("ul"==n.nodeBefore.name||"ol"==n.nodeBefore.name)){const s=o.toModelElement(i);let a=1,c=n.nodeBefore;for(;c&&HA(c);)a+=o.getModelLength(c),c=c.previousSibling;e.modelPosition=r.createPositionBefore(s).getShiftedBy(a),t.stop()}})),e.mapper.on("modelToViewPosition",FA(n.view)),t.conversion.for("editingDowncast").add((e=>{e.on("insert",NA,{priority:"high"}),e.on("insert:listItem",IA(t.model)),e.on("attribute:listType:listItem",BA,{priority:"high"}),e.on("attribute:listType:listItem",LA,{priority:"low"}),e.on("attribute:listIndent:listItem",function(t){return(e,n,r)=>{if(!r.consumable.consume(n.item,"attribute:listIndent"))return;const i=r.mapper.toViewElement(n.item),o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,c=o.createRangeOn(s);o.remove(c),a&&a.nextSibling&&_A(o,a,a.nextSibling),$A(n.attributeOldValue+1,n.range.start,c.start,i,r,t),yA(n.item,i,r,t);for(const t of n.item.getChildren())r.consumable.consume(t,"insert")}}(t.model)),e.on("remove:listItem",function(t){return(e,n,r)=>{const i=r.mapper.toViewPosition(n.position).getLastMatchingPosition((t=>!t.item.is("element","li"))).nodeAfter,o=r.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));const s=i.parent,a=s.previousSibling,c=o.createRangeOn(s),l=o.remove(c);a&&a.nextSibling&&_A(o,a,a.nextSibling),$A(r.mapper.toModelElement(i).getAttribute("listIndent")+1,n.position,c.start,i,r,t);for(const t of o.createRangeIn(l).getItems())r.mapper.unbindViewElement(t);e.stop()}}(t.model)),e.on("remove",OA,{priority:"low"})})),t.conversion.for("dataDowncast").add((e=>{e.on("insert",NA,{priority:"high"}),e.on("insert:listItem",IA(t.model))})),t.conversion.for("upcast").add((t=>{t.on("element:ul",RA,{priority:"high"}),t.on("element:ol",RA,{priority:"high"}),t.on("element:li",zA,{priority:"high"}),t.on("element:li",PA)})),t.model.on("insertContent",jA,{priority:"high"}),t.commands.add("numberedList",new pA(t,"numbered")),t.commands.add("bulletedList",new pA(t,"bulleted")),t.commands.add("indentList",new kA(t,"forward")),t.commands.add("outdentList",new kA(t,"backward"));const i=n.view.document;this.listenTo(i,"enter",((t,e)=>{const n=this.editor.model.document,r=n.selection.getLastPosition().parent;n.selection.isCollapsed&&"listItem"==r.name&&r.isEmpty&&(this.editor.execute("outdentList"),e.preventDefault(),t.stop())}),{context:"li"}),this.listenTo(i,"delete",((t,e)=>{if("backward"!==e.direction)return;const n=this.editor.model.document.selection;if(!n.isCollapsed)return;const r=n.getFirstPosition();if(!r.isAtStart)return;const i=r.parent;if("listItem"!==i.name)return;i.previousSibling&&"listItem"===i.previousSibling.name||(this.editor.execute("outdentList"),e.preventDefault(),t.stop())}),{context:"li"}),this.listenTo(t.editing.view.document,"tab",((e,n)=>{const r=n.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(t.execute(r),n.stopPropagation(),n.preventDefault(),e.stop())}),{context:"li"})}afterInit(){const t=this.editor.commands,e=t.get("indent"),n=t.get("outdent");e&&e.registerChildCommand(t.get("indentList")),n&&n.registerChildCommand(t.get("outdentList"))}}function WA(t){let e=1;for(const n of t.getChildren())if("ul"==n.name||"ol"==n.name)for(const t of n.getChildren())e+=WA(t);return e}const qA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',YA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';class GA extends Di{static get pluginName(){return"ListUI"}init(){const t=this.editor.t;CA(this.editor,"numberedList",t("Numbered List"),qA),CA(this.editor,"bulletedList",t("Bulleted List"),YA)}}class ZA extends Ii{constructor(t,e){super(t),this._defaultType=e}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(t={}){this._tryToConvertItemsToList(t);const e=this.editor.model,n=TA(e);n.length&&e.change((e=>{for(const r of n)e.setAttribute("listStyle",t.type||this._defaultType,r)}))}_getValue(){const t=this.editor.model.document.selection.getFirstPosition().parent;return t&&t.is("element","listItem")?t.getAttribute("listStyle"):null}_checkEnabled(){const t=this.editor,e=t.commands.get("numberedList"),n=t.commands.get("bulletedList");return e.isEnabled||n.isEnabled}_tryToConvertItemsToList(t){if(!t.type)return;const e=(n=t.type,SA.includes(n)?"bulleted":DA.includes(n)?"numbered":null);var n;if(!e)return;const r=this.editor,i=e+"List";r.commands.get(i).value||r.execute(i)}}class KA extends Ii{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute(t={}){const e=this.editor.model,n=TA(e).filter((t=>"numbered"==t.getAttribute("listType")));e.change((e=>{for(const r of n)e.setAttribute("listReversed",!!t.reversed,r)}))}_getValue(){const t=this.editor.model.document.selection.getFirstPosition().parent;return t&&t.is("element","listItem")&&"numbered"==t.getAttribute("listType")?t.getAttribute("listReversed"):null}}class QA extends Ii{refresh(){const t=this._getValue();this.value=t,this.isEnabled=null!=t}execute(t={}){const e=this.editor.model,n=TA(e).filter((t=>"numbered"==t.getAttribute("listType")));e.change((e=>{for(const r of n)e.setAttribute("listStart",t.startIndex>=0?t.startIndex:1,r)}))}_getValue(){const t=this.editor.model.document.selection.getFirstPosition().parent;return t&&t.is("element","listItem")&&"numbered"==t.getAttribute("listType")?t.getAttribute("listStart"):null}}const XA="default";class JA extends Di{static get requires(){return[UA]}static get pluginName(){return"ListPropertiesEditing"}constructor(t){super(t),t.config.define("list",{properties:{styles:!0,startIndex:!1,reversed:!1}})}init(){const t=this.editor,e=t.model,n=function(t){const e=[];t.styles&&e.push({attributeName:"listStyle",defaultValue:XA,addCommand(t){t.commands.add("listStyle",new ZA(t,XA))},appliesToListItem:()=>!0,setAttributeOnDowncast(t,e,n){e&&e!==XA?t.setStyle("list-style-type",e,n):t.removeStyle("list-style-type",n)},getAttributeOnUpcast:t=>t.getStyle("list-style-type")||XA});t.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,addCommand(t){t.commands.add("listReversed",new KA(t))},appliesToListItem:t=>"numbered"==t.getAttribute("listType"),setAttributeOnDowncast(t,e,n){e?t.setAttribute("reversed","reversed",n):t.removeAttribute("reversed",n)},getAttributeOnUpcast:t=>t.hasAttribute("reversed")});t.startIndex&&e.push({attributeName:"listStart",defaultValue:1,addCommand(t){t.commands.add("listStart",new QA(t))},appliesToListItem:t=>"numbered"==t.getAttribute("listType"),setAttributeOnDowncast(t,e,n){0==e||e>1?t.setAttribute("start",e,n):t.removeAttribute("start",n)},getAttributeOnUpcast(t){const e=t.getAttribute("start");return e>=0?e:1}});return e}(t.config.get("list.properties"));e.schema.extend("listItem",{allowAttributes:n.map((t=>t.attributeName))});for(const e of n)e.addCommand(t);var r;this.listenTo(t.commands.get("indentList"),"_executeCleanup",function(t,e){return(n,r)=>{const i=r[0],o=i.getAttribute("listIndent"),s=r.filter((t=>t.getAttribute("listIndent")===o));let a=null;i.previousSibling.getAttribute("listIndent")+1!==o&&(a=AA(i.previousSibling,{sameIndent:!0,direction:"backward",listIndent:o})),t.model.change((t=>{for(const n of s)for(const r of e)if(r.appliesToListItem(n)){const e=null==a?r.defaultValue:a.getAttribute(r.attributeName);t.setAttribute(r.attributeName,e,n)}}))}}(t,n)),this.listenTo(t.commands.get("outdentList"),"_executeCleanup",function(t,e){return(n,r)=>{if(!(r=r.reverse().filter((t=>t.is("element","listItem")))).length)return;const i=r[0].getAttribute("listIndent"),o=r[0].getAttribute("listType");let s=r[0].previousSibling;if(s.is("element","listItem"))for(;s.getAttribute("listIndent")!==i;)s=s.previousSibling;else s=null;s||(s=r[r.length-1].nextSibling),s&&s.is("element","listItem")&&s.getAttribute("listType")===o&&t.model.change((t=>{const n=r.filter((t=>t.getAttribute("listIndent")===i));for(const r of n)for(const n of e)if(n.appliesToListItem(r)){const e=n.attributeName,i=s.getAttribute(e);t.setAttribute(e,i,r)}}))}}(t,n)),this.listenTo(t.commands.get("bulletedList"),"_executeCleanup",nC(t)),this.listenTo(t.commands.get("numberedList"),"_executeCleanup",nC(t)),e.document.registerPostFixer(function(t,e){return n=>{let r=!1;const i=rC(t.model.document.differ.getChanges()).filter((t=>"todo"!==t.getAttribute("listType")));if(!i.length)return r;let o=i[i.length-1].nextSibling;if((!o||!o.is("element","listItem"))&&(o=i[0].previousSibling,o)){const t=i[0].getAttribute("listIndent");for(;o.is("element","listItem")&&o.getAttribute("listIndent")!==t&&(o=o.previousSibling,o););}for(const t of e){const e=t.attributeName;for(const s of i)if(t.appliesToListItem(s))if(s.hasAttribute(e)){const i=s.previousSibling;eC(i,s,t.attributeName)&&(n.setAttribute(e,i.getAttribute(e),s),r=!0)}else tC(o,s,t)?n.setAttribute(e,o.getAttribute(e),s):n.setAttribute(e,t.defaultValue,s),r=!0;else n.removeAttribute(e,s)}return r}}(t,n)),t.conversion.for("upcast").add((r=n,t=>{t.on("element:li",((t,e,n)=>{const i=e.viewItem.parent,o=e.modelRange.start.nodeAfter||e.modelRange.end.nodeBefore;for(const t of r)if(t.appliesToListItem(o)){const e=t.getAttributeOnUpcast(i);n.writer.setAttribute(t.attributeName,e,o)}}),{priority:"low"})})),t.conversion.for("downcast").add(function(t){return n=>{for(const r of t)n.on(`attribute:${r.attributeName}:listItem`,((t,n,i)=>{const o=i.writer,s=n.item,a=AA(s.previousSibling,{sameIndent:!0,listIndent:s.getAttribute("listIndent"),direction:"backward"}),c=i.mapper.toViewElement(s);e(s,a)||o.breakContainer(o.createPositionBefore(c)),r.setAttributeOnDowncast(o,n.attributeNewValue,c.parent)}),{priority:"low"})};function e(t,e){return e&&t.getAttribute("listType")===e.getAttribute("listType")&&t.getAttribute("listIndent")===e.getAttribute("listIndent")&&t.getAttribute("listStyle")===e.getAttribute("listStyle")&&t.getAttribute("listReversed")===e.getAttribute("listReversed")&&t.getAttribute("listStart")===e.getAttribute("listStart")}}(n)),this._mergeListAttributesWhileMergingLists(n)}afterInit(){const t=this.editor;t.commands.get("todoList")&&t.model.document.registerPostFixer(function(t){return e=>{const n=rC(t.model.document.differ.getChanges()).filter((t=>"todo"===t.getAttribute("listType")&&(t.hasAttribute("listStyle")||t.hasAttribute("listReversed")||t.hasAttribute("listStart"))));if(!n.length)return!1;for(const t of n)e.removeAttribute("listStyle",t),e.removeAttribute("listReversed",t),e.removeAttribute("listStart",t);return!0}}(t))}_mergeListAttributesWhileMergingLists(t){const e=this.editor.model;let n;this.listenTo(e,"deleteContent",((t,[e])=>{const r=e.getFirstPosition(),i=e.getLastPosition();if(r.parent===i.parent)return;if(!r.parent.is("element","listItem"))return;const o=i.parent.nextSibling;if(!o||!o.is("element","listItem"))return;const s=AA(r.parent,{sameIndent:!0,listIndent:o.getAttribute("listIndent")});s&&s.getAttribute("listType")===o.getAttribute("listType")&&(n=s)}),{priority:"high"}),this.listenTo(e,"deleteContent",(()=>{n&&(e.change((e=>{const r=AA(n.nextSibling,{sameIndent:!0,listIndent:n.getAttribute("listIndent"),direction:"forward"});if(!r)return void(n=null);const i=[r,...EA(e.createPositionAt(r,0),"forward")];for(const r of i)for(const i of t)if(i.appliesToListItem(r)){const t=i.attributeName,o=n.getAttribute(t);e.setAttribute(t,o,r)}})),n=null)}),{priority:"low"})}}function tC(t,e,n){if(!t)return!1;const r=t.getAttribute(n.attributeName);return!!r&&(r!=n.defaultValue&&t.getAttribute("listType")===e.getAttribute("listType"))}function eC(t,e,n){if(!t||!t.is("element","listItem"))return!1;if(e.getAttribute("listType")!==t.getAttribute("listType"))return!1;const r=t.getAttribute("listIndent");if(r<1||r!==e.getAttribute("listIndent"))return!1;const i=t.getAttribute(n);return!(!i||i===e.getAttribute(n))}function nC(t){return(e,n)=>{n=n.filter((t=>t.is("element","listItem"))),t.model.change((t=>{for(const e of n)t.removeAttribute("listStyle",e)}))}}function rC(t){const e=[];for(const n of t){const t=iC(n);t&&t.is("element","listItem")&&e.push(t)}return e}function iC(t){return"attribute"===t.type?t.range.start.nodeAfter:"insert"===t.type?t.position.nodeAfter:null}var oC=n(4721),sC={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(oC.Z,sC);oC.Z.locals;class aC extends yh{constructor(t,e){super(t);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid"),e&&this.children.addMany(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}_createButtonView(){const t=new Zh(this.locale),e=t.bindTemplate;return t.set({withText:!0,icon:sg}),t.extendTemplate({attributes:{"aria-expanded":e.to("isOn",(t=>String(t)))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",(t=>!t)),t.on("execute",(()=>{this.isCollapsed=!this.isCollapsed})),t}}var cC=n(6082),lC={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(cC.Z,lC);cC.Z.locals;class dC extends yh{constructor(t,{enabledProperties:e,styleButtonViews:n,styleGridAriaLabel:r}){super(t);const i=["ck","ck-list-properties"];this.children=this.createCollection(),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new vi,this.keystrokes=new Ai,this.focusables=new Ku,this.focusCycler=new pg({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),e.styles?(this.stylesView=this._createStylesView(n,r),this.children.add(this.stylesView)):i.push("ck-list-properties_without-styles"),(e.startIndex||e.reversed)&&(this._addNumberedListPropertyViews(e,n),i.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:i},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const t of this.stylesView.children)this.stylesView.focusTracker.add(t.element);$h({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Mr.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element),this.listenTo(this.startIndexFieldView.element,"selectstart",((t,e)=>{e.stopPropagation()}),{priority:"high"});const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(t,e){const n=new yh(this.locale);return n.children=n.createCollection(this.locale),n.children.addMany(t),n.setTemplate({tag:"div",attributes:{"aria-label":e,class:["ck","ck-list-styles-list"]},children:n.children}),n.children.delegate("execute").to(this),n.focus=function(){this.children.first.focus()},n.focusTracker=new vi,n.keystrokes=new Ai,n.render(),n.keystrokes.listenTo(n.element),n}_addNumberedListPropertyViews(t){const e=this.locale.t,n=[];t.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),n.push(this.startIndexFieldView)),t.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),n.push(this.reversedSwitchButtonView)),t.styles?(this.additionalPropertiesCollapsibleView=new aC(this.locale,n),this.additionalPropertiesCollapsibleView.set({label:e("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(n,"isEnabled",((...t)=>t.some((t=>t)))),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",((t,e,n)=>{n||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)})),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(n)}_createStartIndexField(){const t=this.locale.t,e=new af(this.locale,lf);return e.set({label:t("Start at"),class:"ck-numbered-list-properties__start-index"}),e.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),e.fieldView.on("input",(()=>{const n=e.fieldView.element,r=n.valueAsNumber;Number.isNaN(r)||(n.checkValidity()?this.fire("listStart",{startIndex:r}):e.errorText=t("Start index must be greater than 0."))})),e}_createReversedSwitchButton(){const t=this.locale.t,e=new Xh(this.locale);return e.set({withText:!0,label:t("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),e.delegate("execute").to(this,"listReversed"),e}}var uC=n(2417),hC={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(uC.Z,hC);uC.Z.locals;class gC extends Di{static get pluginName(){return"ListPropertiesUI"}init(){const t=this.editor,e=t.locale.t,n=t.config.get("list.properties");n.styles&&t.ui.componentFactory.add("bulletedList",fC({editor:t,parentCommandName:"bulletedList",buttonLabel:e("Bulleted List"),buttonIcon:YA,styleGridAriaLabel:e("Bulleted list styles toolbar"),styleDefinitions:[{label:e("Toggle the disc list style"),tooltip:e("Disc"),type:"disc",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>'},{label:e("Toggle the circle list style"),tooltip:e("Circle"),type:"circle",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>'},{label:e("Toggle the square list style"),tooltip:e("Square"),type:"square",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>'}]})),(n.styles||n.startIndex||n.reversed)&&t.ui.componentFactory.add("numberedList",fC({editor:t,parentCommandName:"numberedList",buttonLabel:e("Numbered List"),buttonIcon:qA,styleGridAriaLabel:e("Numbered list styles toolbar"),styleDefinitions:[{label:e("Toggle the decimal list style"),tooltip:e("Decimal"),type:"decimal",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>'},{label:e("Toggle the decimal with leading zero list style"),tooltip:e("Decimal with leading zero"),type:"decimal-leading-zero",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the lower–roman list style"),tooltip:e("Lower–roman"),type:"lower-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the upper–roman list style"),tooltip:e("Upper-roman"),type:"upper-roman",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the lower–latin list style"),tooltip:e("Lower-latin"),type:"lower-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>'},{label:e("Toggle the upper–latin list style"),tooltip:e("Upper-latin"),type:"upper-latin",icon:'<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>'}]}))}}function fC({editor:t,parentCommandName:e,buttonLabel:n,buttonIcon:r,styleGridAriaLabel:i,styleDefinitions:o}){const s=t.commands.get(e);return a=>{const c=Rg(a,dg),l=c.buttonView;c.bind("isEnabled").to(s),c.class="ck-list-styles-dropdown",l.on("execute",(()=>{t.execute(e),t.editing.view.focus()})),l.set({label:n,icon:r,tooltip:!0,isToggleable:!0}),l.bind("isOn").to(s,"value",(t=>!!t));const d=function({editor:t,dropdownView:e,parentCommandName:n,styleDefinitions:r,styleGridAriaLabel:i}){const o=t.locale,s=t.config.get("list.properties");let a;"numberedList"!=n&&(s.startIndex=!1,s.reversed=!1);if(s.styles){const e=t.commands.get("listStyle"),i=function({editor:t,listStyleCommand:e,parentCommandName:n}){const r=t.locale,i=t.commands.get(n);return({label:n,type:o,icon:s,tooltip:a})=>{const c=new Zh(r);return c.set({label:n,icon:s,tooltip:a}),e.on("change:value",(()=>{c.isOn=e.value===o})),c.on("execute",(()=>{i.value?e.value!==o?t.execute("listStyle",{type:o}):t.execute("listStyle",{type:e._defaultType}):t.model.change((()=>{t.execute("listStyle",{type:o})}))})),c}}({editor:t,parentCommandName:n,listStyleCommand:e}),o="function"==typeof e.isStyleTypeSupported?t=>e.isStyleTypeSupported(t.type):()=>!0;a=r.filter(o).map(i)}const c=new dC(o,{styleGridAriaLabel:i,enabledProperties:s,styleButtonViews:a});s.styles&&jg(e,(()=>c.stylesView.children.find((t=>t.isOn))));if(s.startIndex){const e=t.commands.get("listStart");c.startIndexFieldView.bind("isEnabled").to(e),c.startIndexFieldView.fieldView.bind("value").to(e),c.on("listStart",((e,n)=>t.execute("listStart",n)))}if(s.reversed){const e=t.commands.get("listReversed");c.reversedSwitchButtonView.bind("isEnabled").to(e),c.reversedSwitchButtonView.bind("isOn").to(e,"value"),c.on("listReversed",(()=>{const n=e.value;t.execute("listReversed",{reversed:!n})}))}return c.delegate("execute").to(e),c}({editor:t,dropdownView:c,parentCommandName:e,styleGridAriaLabel:i,styleDefinitions:o});return c.panelView.children.add(d),c.on("execute",(()=>{t.editing.view.focus()})),c}}function pC(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let mC={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const bC=/[&<>"']/,kC=/[&<>"']/g,wC=/[<>"']|&(?!#?\w+;)/,yC=/[<>"']|&(?!#?\w+;)/g,_C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vC=t=>_C[t];function AC(t,e){if(e){if(bC.test(t))return t.replace(kC,vC)}else if(wC.test(t))return t.replace(yC,vC);return t}const CC=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function xC(t){return t.replace(CC,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const EC=/(^|[^\[])\^/g;function TC(t,e){t=t.source||t,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(EC,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n}const SC=/[^\w:]/g,DC=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function MC(t,e,n){if(t){let t;try{t=decodeURIComponent(xC(n)).replace(SC,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!DC.test(n)&&(n=function(t,e){IC[" "+t]||(BC.test(t)?IC[" "+t]=t+"/":IC[" "+t]=zC(t,"/",!0));const n=-1===(t=IC[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(LC,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(NC,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}const IC={},BC=/^[^:]+:\/*[^/]*$/,LC=/^([^:]+:)[\s\S]*$/,NC=/^([^:]+:\/*[^/]*)[\s\S]*$/;const OC={exec:function(){}};function PC(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function RC(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,i=e;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function zC(t,e,n){const r=t.length;if(0===r)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o!==e||n){if(o===e||!n)break;i++}else i++}return t.substr(0,r-i)}function FC(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function jC(t,e){if(e<1)return"";let n="";for(;e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t}function VC(t,e,n,r){const i=e.href,o=e.title?AC(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){r.state.inLink=!0;const t={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,t}return{type:"image",raw:n,href:i,title:o,text:AC(s)}}class $C{constructor(t){this.options=t||mC}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:zC(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],n=function(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const r=n[1];return e.split("\n").map((t=>{const e=t.match(/^\s+/);if(null===e)return t;const[n]=e;return n.length>=r.length?t.slice(r.length):t})).join("\n")}(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim():e[2],text:n}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(/#$/.test(t)){const e=zC(t,"#");this.options.pedantic?t=e.trim():e&&!/ $/.test(e)||(t=e.trim())}const n={type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const t=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(t,[]),text:t}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n,r,i,o,s,a,c,l,d,u,h,g,f=e[1].trim();const p=f.length>1,m={type:"list",raw:"",ordered:p,start:p?+f.slice(0,-1):"",loose:!1,items:[]};f=p?`\\d{1,9}\\${f.slice(-1)}`:`\\${f}`,this.options.pedantic&&(f=p?f:"[*+-]");const b=new RegExp(`^( {0,3}${f})((?: [^\\n]*)?(?:\\n|$))`);for(;t&&(g=!1,e=b.exec(t))&&!this.rules.block.hr.test(t);){if(n=e[0],t=t.substring(n.length),l=e[2].split("\n",1)[0],d=t.split("\n",1)[0],this.options.pedantic?(o=2,h=l.trimLeft()):(o=e[2].search(/[^ ]/),o=o>4?1:o,h=l.slice(o),o+=e[1].length),a=!1,!l&&/^ *$/.test(d)&&(n+=d+"\n",t=t.substring(d.length+1),g=!0),!g){const e=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;t&&(u=t.split("\n",1)[0],l=u,this.options.pedantic&&(l=l.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!e.test(l));){if(l.search(/[^ ]/)>=o||!l.trim())h+="\n"+l.slice(o);else{if(a)break;h+="\n"+l}a||l.trim()||(a=!0),n+=u+"\n",t=t.substring(u.length+1)}}m.loose||(c?m.loose=!0:/\n *\n *$/.test(n)&&(c=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(i="[ ] "!==r[0],h=h.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:h}),m.raw+=n}m.items[m.items.length-1].raw=n.trimRight(),m.items[m.items.length-1].text=h.trimRight(),m.raw=m.raw.trimRight();const k=m.items.length;for(s=0;s<k;s++){this.lexer.state.top=!1,m.items[s].tokens=this.lexer.blockTokens(m.items[s].text,[]);const t=m.items[s].tokens.filter((t=>"space"===t.type)),e=t.every((t=>{const e=t.raw.split("");let n=0;for(const t of e)if("\n"===t&&(n+=1),n>1)return!0;return!1}));!m.loose&&t.length&&e&&(m.loose=!0,m.items[s].loose=!0)}return m}}html(t){const e=this.rules.block.html.exec(t);if(e){const t={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};return this.options.sanitize&&(t.type="paragraph",t.text=this.options.sanitizer?this.options.sanitizer(e[0]):AC(e[0]),t.tokens=[],this.lexer.inline(t.text,t.tokens)),t}}def(t){const e=this.rules.block.def.exec(t);if(e){e[3]&&(e[3]=e[3].substring(1,e[3].length-1));return{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}}table(t){const e=this.rules.block.table.exec(t);if(e){const t={type:"table",header:RC(e[1]).map((t=>({text:t}))),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(t.header.length===t.align.length){t.raw=e[0];let n,r,i,o,s=t.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(t.align[n])?t.align[n]="right":/^ *:-+: *$/.test(t.align[n])?t.align[n]="center":/^ *:-+ *$/.test(t.align[n])?t.align[n]="left":t.align[n]=null;for(s=t.rows.length,n=0;n<s;n++)t.rows[n]=RC(t.rows[n],t.header.length).map((t=>({text:t})));for(s=t.header.length,r=0;r<s;r++)t.header[r].tokens=[],this.lexer.inlineTokens(t.header[r].text,t.header[r].tokens);for(s=t.rows.length,r=0;r<s;r++)for(o=t.rows[r],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inlineTokens(o[i].text,o[i].tokens);return t}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e){const t={type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:[]};return this.lexer.inline(t.text,t.tokens),t}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t={type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(t.text,t.tokens),t}}text(t){const e=this.rules.block.text.exec(t);if(e){const t={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(t.text,t.tokens),t}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:AC(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):AC(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const e=zC(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,i=0;for(;i<n;i++)if("\\"===t[i])i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(t>-1){const n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){const t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);t&&(n=t[1],r=t[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(t)?n.slice(1):n.slice(1,-1)),VC(e,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let t=(n[2]||n[1]).replace(/\s+/g," ");if(t=e[t.toLowerCase()],!t||!t.href){const t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return VC(n,t,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrong.lDelim.exec(t);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,o,s=n,a=0;const c="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+n);null!=(r=c.exec(e));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(n,o)%2){const e=t.slice(1,n+r.index+o);return{type:"em",raw:t.slice(0,n+r.index+o+1),text:e,tokens:this.lexer.inlineTokens(e,[])}}const e=t.slice(2,n+r.index+o-1);return{type:"strong",raw:t.slice(0,n+r.index+o+1),text:e,tokens:this.lexer.inlineTokens(e,[])}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(/\n/g," ");const n=/[^ ]/.test(t),r=/^ /.test(t)&&/ $/.test(t);return n&&r&&(t=t.substring(1,t.length-1)),t=AC(t,!0),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(t,e){const n=this.rules.inline.autolink.exec(t);if(n){let t,r;return"@"===n[2]?(t=AC(this.options.mangle?e(n[1]):n[1]),r="mailto:"+t):(t=AC(n[1]),r=t),{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(t,e){let n;if(n=this.rules.inline.url.exec(t)){let t,r;if("@"===n[2])t=AC(this.options.mangle?e(n[0]):n[0]),r="mailto:"+t;else{let e;do{e=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(e!==n[0]);t=AC(n[0]),r="www."===n[1]?"http://"+t:t}return{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t,e){const n=this.rules.inline.text.exec(t);if(n){let t;return t=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):AC(n[0]):n[0]:AC(this.options.smartypants?e(n[0]):n[0]),{type:"text",raw:n[0],text:t}}}}const HC={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:OC,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};HC.def=TC(HC.def).replace("label",HC._label).replace("title",HC._title).getRegex(),HC.bullet=/(?:[*+-]|\d{1,9}[.)])/,HC.listItemStart=TC(/^( *)(bull) */).replace("bull",HC.bullet).getRegex(),HC.list=TC(HC.list).replace(/bull/g,HC.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+HC.def.source+")").getRegex(),HC._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",HC._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,HC.html=TC(HC.html,"i").replace("comment",HC._comment).replace("tag",HC._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),HC.paragraph=TC(HC._paragraph).replace("hr",HC.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HC._tag).getRegex(),HC.blockquote=TC(HC.blockquote).replace("paragraph",HC.paragraph).getRegex(),HC.normal=PC({},HC),HC.gfm=PC({},HC.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),HC.gfm.table=TC(HC.gfm.table).replace("hr",HC.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HC._tag).getRegex(),HC.gfm.paragraph=TC(HC._paragraph).replace("hr",HC.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",HC.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HC._tag).getRegex(),HC.pedantic=PC({},HC.normal,{html:TC("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",HC._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:OC,paragraph:TC(HC.normal._paragraph).replace("hr",HC.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",HC.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const UC={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:OC,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:OC,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function WC(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function qC(t){let e,n,r="";const i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}UC._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",UC.punctuation=TC(UC.punctuation).replace(/punctuation/g,UC._punctuation).getRegex(),UC.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,UC.escapedEmSt=/\\\*|\\_/g,UC._comment=TC(HC._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),UC.emStrong.lDelim=TC(UC.emStrong.lDelim).replace(/punct/g,UC._punctuation).getRegex(),UC.emStrong.rDelimAst=TC(UC.emStrong.rDelimAst,"g").replace(/punct/g,UC._punctuation).getRegex(),UC.emStrong.rDelimUnd=TC(UC.emStrong.rDelimUnd,"g").replace(/punct/g,UC._punctuation).getRegex(),UC._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,UC._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,UC._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,UC.autolink=TC(UC.autolink).replace("scheme",UC._scheme).replace("email",UC._email).getRegex(),UC._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,UC.tag=TC(UC.tag).replace("comment",UC._comment).replace("attribute",UC._attribute).getRegex(),UC._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,UC._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,UC._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,UC.link=TC(UC.link).replace("label",UC._label).replace("href",UC._href).replace("title",UC._title).getRegex(),UC.reflink=TC(UC.reflink).replace("label",UC._label).replace("ref",HC._label).getRegex(),UC.nolink=TC(UC.nolink).replace("ref",HC._label).getRegex(),UC.reflinkSearch=TC(UC.reflinkSearch,"g").replace("reflink",UC.reflink).replace("nolink",UC.nolink).getRegex(),UC.normal=PC({},UC),UC.pedantic=PC({},UC.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:TC(/^!?\[(label)\]\((.*?)\)/).replace("label",UC._label).getRegex(),reflink:TC(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",UC._label).getRegex()}),UC.gfm=PC({},UC.normal,{escape:TC(UC.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),UC.gfm.url=TC(UC.gfm.url,"i").replace("email",UC.gfm._extended_email).getRegex(),UC.breaks=PC({},UC.gfm,{br:TC(UC.br).replace("{2,}","*").getRegex(),text:TC(UC.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class YC{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||mC,this.options.tokenizer=this.options.tokenizer||new $C,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:HC.normal,inline:UC.normal};this.options.pedantic?(e.block=HC.pedantic,e.inline=UC.pedantic):this.options.gfm&&(e.block=HC.gfm,this.options.breaks?e.inline=UC.breaks:e.inline=UC.gfm),this.tokenizer.rules=e}static get rules(){return{block:HC,inline:UC}}static lex(t,e){return new YC(e).lex(t)}static lexInline(t,e){return new YC(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let n,r,i,o;for(this.options.pedantic&&(t=t.replace(/^ +$/gm,""));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0)))))if(n=this.tokenizer.space(t))t=t.substring(n.raw.length),1===n.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(n);else if(n=this.tokenizer.code(t))t=t.substring(n.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?e.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.heading(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.hr(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.blockquote(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.list(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.html(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.def(t))t=t.substring(n.raw.length),r=e[e.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.lheading(t))t=t.substring(n.raw.length),e.push(n);else{if(i=t,this.options.extensions&&this.options.extensions.startBlock){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startBlock.forEach((function(t){r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=e[e.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),o=i.length!==t.length,t=t.substring(n.raw.length);else if(n=this.tokenizer.text(t))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e){this.inlineQueue.push({src:t,tokens:e})}inlineTokens(t,e=[]){let n,r,i,o,s,a,c=t;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(c));)t.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+jC("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,o.index)+"["+jC("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0)))))if(n=this.tokenizer.escape(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.tag(t))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.link(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.emStrong(t,c,a))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.codespan(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.br(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.del(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.autolink(t,qC))t=t.substring(n.raw.length),e.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(t,qC))){if(i=t,this.options.extensions&&this.options.extensions.startInline){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startInline.forEach((function(t){r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))})),e<1/0&&e>=0&&(i=t.substring(0,e+1))}if(n=this.tokenizer.inlineText(i,WC))t=t.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=e[e.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}else t=t.substring(n.raw.length),e.push(n);return e}}class GC{constructor(t){this.options=t||mC}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+AC(r,!0)+'">'+(n?t:AC(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:AC(t,!0))+"</code></pre>\n"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(null===(t=MC(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+AC(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=MC(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}}class ZC{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class KC{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let n=t,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[t];do{r++,n=t+"-"+r}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=r,this.seen[n]=0),n}slug(t,e={}){const n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)}}class QC{constructor(t){this.options=t||mC,this.options.renderer=this.options.renderer||new GC,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ZC,this.slugger=new KC}static parse(t,e){return new QC(e).parse(t)}static parseInline(t,e){return new QC(e).parseInline(t)}parse(t,e=!0){let n,r,i,o,s,a,c,l,d,u,h,g,f,p,m,b,k,w,y,_="";const v=t.length;for(n=0;n<v;n++)if(u=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(y=this.options.extensions.renderers[u.type].call({parser:this},u),!1!==y||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)))_+=y||"";else switch(u.type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(u.tokens),u.depth,xC(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(l="",c="",o=u.header.length,r=0;r<o;r++)c+=this.renderer.tablecell(this.parseInline(u.header[r].tokens),{header:!0,align:u.align[r]});for(l+=this.renderer.tablerow(c),d="",o=u.rows.length,r=0;r<o;r++){for(a=u.rows[r],c="",s=a.length,i=0;i<s;i++)c+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:u.align[i]});d+=this.renderer.tablerow(c)}_+=this.renderer.table(l,d);continue;case"blockquote":d=this.parse(u.tokens),_+=this.renderer.blockquote(d);continue;case"list":for(h=u.ordered,g=u.start,f=u.loose,o=u.items.length,d="",r=0;r<o;r++)m=u.items[r],b=m.checked,k=m.task,p="",m.task&&(w=this.renderer.checkbox(b),f?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=w+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=w+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:w}):p+=w),p+=this.parse(m.tokens,f),d+=this.renderer.listitem(p,k,b);_+=this.renderer.list(d,h,g);continue;case"html":_+=this.renderer.html(u.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(d=u.tokens?this.parseInline(u.tokens):u.text;n+1<v&&"text"===t[n+1].type;)u=t[++n],d+="\n"+(u.tokens?this.parseInline(u.tokens):u.text);_+=e?this.renderer.paragraph(d):d;continue;default:{const t='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(t);throw new Error(t)}}return _}parseInline(t,e){e=e||this.renderer;let n,r,i,o="";const s=t.length;for(n=0;n<s;n++)if(r=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=e.text(r.text);break;case"html":o+=e.html(r.text);break;case"link":o+=e.link(r.href,r.title,this.parseInline(r.tokens,e));break;case"image":o+=e.image(r.href,r.title,r.text);break;case"strong":o+=e.strong(this.parseInline(r.tokens,e));break;case"em":o+=e.em(this.parseInline(r.tokens,e));break;case"codespan":o+=e.codespan(r.text);break;case"br":o+=e.br();break;case"del":o+=e.del(this.parseInline(r.tokens,e));break;default:{const t='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(t);throw new Error(t)}}return o}}function XC(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),FC(e=PC({},XC.defaults,e||{})),n){const r=e.highlight;let i;try{i=YC.lex(t,e)}catch(t){return n(t)}const o=function(t){let o;if(!t)try{e.walkTokens&&XC.walkTokens(i,e.walkTokens),o=QC.parse(i,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return o();if(delete e.highlight,!i.length)return o();let s=0;return XC.walkTokens(i,(function(t){"code"===t.type&&(s++,setTimeout((()=>{r(t.text,t.lang,(function(e,n){if(e)return o(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),s--,0===s&&o()}))}),0))})),void(0===s&&o())}try{const n=YC.lex(t,e);return e.walkTokens&&XC.walkTokens(n,e.walkTokens),QC.parse(n,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+AC(t.message+"",!0)+"</pre>";throw t}}XC.options=XC.setOptions=function(t){var e;return PC(XC.defaults,t),e=XC.defaults,mC=e,XC},XC.getDefaults=pC,XC.defaults=mC,XC.use=function(...t){const e=PC({},...t),n=XC.defaults.extensions||{renderers:{},childTokens:{}};let r;t.forEach((t=>{if(t.extensions&&(r=!0,t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if(t.renderer){const e=n.renderers?n.renderers[t.name]:null;n.renderers[t.name]=e?function(...n){let r=t.renderer.apply(this,n);return!1===r&&(r=e.apply(this,n)),r}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");n[t.level]?n[t.level].unshift(t.tokenizer):n[t.level]=[t.tokenizer],t.start&&("block"===t.level?n.startBlock?n.startBlock.push(t.start):n.startBlock=[t.start]:"inline"===t.level&&(n.startInline?n.startInline.push(t.start):n.startInline=[t.start]))}t.childTokens&&(n.childTokens[t.name]=t.childTokens)}))),t.renderer){const n=XC.defaults.renderer||new GC;for(const e in t.renderer){const r=n[e];n[e]=(...i)=>{let o=t.renderer[e].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}e.renderer=n}if(t.tokenizer){const n=XC.defaults.tokenizer||new $C;for(const e in t.tokenizer){const r=n[e];n[e]=(...i)=>{let o=t.tokenizer[e].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}e.tokenizer=n}if(t.walkTokens){const n=XC.defaults.walkTokens;e.walkTokens=function(e){t.walkTokens.call(this,e),n&&n.call(this,e)}}r&&(e.extensions=n),XC.setOptions(e)}))},XC.walkTokens=function(t,e){for(const n of t)switch(e.call(XC,n),n.type){case"table":for(const t of n.header)XC.walkTokens(t.tokens,e);for(const t of n.rows)for(const n of t)XC.walkTokens(n.tokens,e);break;case"list":XC.walkTokens(n.items,e);break;default:XC.defaults.extensions&&XC.defaults.extensions.childTokens&&XC.defaults.extensions.childTokens[n.type]?XC.defaults.extensions.childTokens[n.type].forEach((function(t){XC.walkTokens(n[t],e)})):n.tokens&&XC.walkTokens(n.tokens,e)}},XC.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");FC(e=PC({},XC.defaults,e||{}));try{const n=YC.lexInline(t,e);return e.walkTokens&&XC.walkTokens(n,e.walkTokens),QC.parseInline(n,e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+AC(t.message+"",!0)+"</pre>";throw t}},XC.Parser=QC,XC.parser=QC.parse,XC.Renderer=GC,XC.TextRenderer=ZC,XC.Lexer=YC,XC.lexer=YC.lex,XC.Tokenizer=$C,XC.Slugger=KC,XC.parse=XC;XC.options,XC.setOptions,XC.use,XC.walkTokens,XC.parseInline,QC.parse,YC.lex;function JC(t,e){return Array(e+1).join(t)}XC.use({tokenizer:{autolink:()=>null,url:()=>null,hr:()=>null},renderer:{checkbox(...t){return Object.getPrototypeOf(this).checkbox.call(this,...t).trimRight()},code(...t){return Object.getPrototypeOf(this).code.call(this,...t).replace("\n</code>","</code>")}}});var tx=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"];function ex(t){return-1!==tx.indexOf(t.nodeName.toLowerCase())}var nx=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function rx(t){return-1!==nx.indexOf(t.nodeName.toLowerCase())}var ix=nx.join();var ox={};function sx(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function ax(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(cx(i,e,n))return i}}function cx(t,e,n){var r=t.filter;if("string"==typeof r){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(t,e,n))return!0}}function lx(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function dx(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}ox.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},ox.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}},ox.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var r=Number(e.nodeName.charAt(1));return"setext"===n.headingStyle&&r<3?"\n\n"+t+"\n"+JC(1===r?"=":"-",t.length)+"\n\n":"\n\n"+JC("#",r)+" "+t+"\n\n"}},ox.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=t.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},ox.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return"LI"===n.nodeName&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},ox.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=e.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,e);r=(o?Number(o)+s:s+1)+".  "}return r+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},ox.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},ox.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){for(var r,i=((e.firstChild.className||"").match(/language-(\S+)/)||[null,""])[1],o=e.firstChild.textContent,s=n.fence.charAt(0),a=3,c=new RegExp("^"+s+"{3,}","gm");r=c.exec(o);)r[0].length>=a&&(a=r[0].length+1);var l=JC(s,a);return"\n\n"+l+i+"\n"+o.replace(/\n$/,"")+"\n"+l+"\n\n"}},ox.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}},ox.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){return"["+t+"]("+e.getAttribute("href")+(e.title?' "'+e.title+'"':"")+")"}},ox.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,n){var r,i,o=e.getAttribute("href"),s=e.title?' "'+e.title+'"':"";switch(n.linkReferenceStyle){case"collapsed":r="["+t+"][]",i="["+t+"]: "+o+s;break;case"shortcut":r="["+t+"]",i="["+t+"]: "+o+s;break;default:var a=this.references.length+1;r="["+t+"]["+a+"]",i="["+a+"]: "+o+s}return this.references.push(i),r},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},ox.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}},ox.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}},ox.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!n},replacement:function(t){if(!t.trim())return"";var e="`",n="",r="",i=t.match(/`+/gm);if(i)for(/^`/.test(t)&&(n=" "),/`$/.test(t)&&(r=" ");-1!==i.indexOf(e);)e+="`";return e+n+t+r+e}},ox.image={filter:"img",replacement:function(t,e){var n=e.alt||"",r=e.getAttribute("src")||"",i=e.title||"";return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},sx.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=ax(this.array,t,this.options))||(e=ax(this._keep,t,this.options))||(e=ax(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var ux="undefined"!=typeof window?window:{};var hx,gx=function(){var t=ux.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?ux.DOMParser:function(){var t=function(){},e=n(5915).JSDOM;return t.prototype.parseFromString=function(t){return new e(t).window.document},t}();function fx(t){var e;"string"==typeof t?e=(hx=hx||new gx).parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html").getElementById("turndown-root"):e=t.cloneNode(!0);return function(t){var e=t.element,n=t.isBlock,r=t.isVoid,i=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!i(e)){for(var o=null,s=!1,a=null,c=dx(a,e,i);c!==e;){if(3===c.nodeType||4===c.nodeType){var l=c.data.replace(/[ \r\n\t]+/g," ");if(o&&!/ $/.test(o.data)||s||" "!==l[0]||(l=l.substr(1)),!l){c=lx(c);continue}c.data=l,o=c}else{if(1!==c.nodeType){c=lx(c);continue}n(c)||"BR"===c.nodeName?(o&&(o.data=o.data.replace(/ $/,"")),o=null,s=!1):r(c)&&(o=null,s=!0)}var d=dx(a,c,i);a=c,c=d}o&&(o.data=o.data.replace(/ $/,""),o.data||lx(o))}}({element:e,isBlock:ex,isVoid:rx}),e}function px(t){return t.isBlock=ex(t),t.isCode="code"===t.nodeName.toLowerCase()||t.parentNode.isCode,t.isBlank=function(t){return-1===["A","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"].indexOf(t.nodeName)&&/^\s*$/i.test(t.textContent)&&!rx(t)&&!function(t){return t.querySelector&&t.querySelector(ix)}(t)}(t),t.flankingWhitespace=function(t){var e="",n="";if(!t.isBlock){var r=/^\s/.test(t.textContent),i=/\s$/.test(t.textContent),o=t.isBlank&&r&&i;r&&!mx("left",t)&&(e=" "),o||!i||mx("right",t)||(n=" ")}return{leading:e,trailing:n}}(t),t}function mx(t,e){var n,r,i;return"left"===t?(n=e.previousSibling,r=/ $/):(n=e.nextSibling,r=/^ /),n&&(3===n.nodeType?i=r.test(n.nodeValue):1!==n.nodeType||ex(n)||(i=r.test(n.textContent))),i}var bx=Array.prototype.reduce,kx=/^\n*/,wx=/\n*$/,yx=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function _x(t){if(!(this instanceof _x))return new _x(t);var e={rules:ox,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}({},e,t),this.rules=new sx(this.options)}function vx(t){var e=this;return bx.call(t.childNodes,(function(t,n){var r="";return 3===(n=new px(n)).nodeType?r=n.isCode?n.nodeValue:e.escape(n.nodeValue):1===n.nodeType&&(r=Cx.call(e,n)),xx(t,r)}),"")}function Ax(t){var e=this;return this.rules.forEach((function(n){"function"==typeof n.append&&(t=xx(t,n.append(e.options)))})),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Cx(t){var e=this.rules.forNode(t),n=vx.call(this,t),r=t.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+e.replacement(n,t,this.options)+r.trailing}function xx(t,e){var n,r,i,o=(n=e,r=[t.match(wx)[0],n.match(kx)[0]].sort(),(i=r[r.length-1]).length<2?i:"\n\n");return(t=t.replace(wx,""))+o+(e=e.replace(kx,""))}_x.prototype={turndown:function(t){if(!function(t){return null!=t&&("string"==typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=vx.call(this,new fx(t));return Ax.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!=typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return yx.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}};const Ex=_x;var Tx=/highlight-(?:text|source)-([a-z0-9]+)/;function Sx(t){t.addRule("highlightedCodeBlock",{filter:function(t){var e=t.firstChild;return"DIV"===t.nodeName&&Tx.test(t.className)&&e&&"PRE"===e.nodeName},replacement:function(t,e,n){var r=((e.className||"").match(Tx)||[null,""])[1];return"\n\n"+n.fence+r+"\n"+e.firstChild.textContent+"\n"+n.fence+"\n\n"}})}function Dx(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var Mx=Array.prototype.indexOf,Ix=Array.prototype.every,Bx={};function Lx(t){var e,n,r=t.parentNode;return"THEAD"===r.nodeName||r.firstChild===t&&("TABLE"===r.nodeName||(n=(e=r).previousSibling,"TBODY"===e.nodeName&&(!n||"THEAD"===n.nodeName&&/^\s*$/i.test(n.textContent))))&&Ix.call(t.childNodes,(function(t){return"TH"===t.nodeName}))}function Nx(t,e){var n=" ";return 0===Mx.call(e.parentNode.childNodes,e)&&(n="| "),n+t+" |"}function Ox(t){for(var e in t.keep((function(t){return"TABLE"===t.nodeName&&!Lx(t.rows[0])})),Bx)t.addRule(e,Bx[e])}function Px(t){t.addRule("taskListItems",{filter:function(t){return"checkbox"===t.type&&"LI"===t.parentNode.nodeName},replacement:function(t,e){return(e.checked?"[x]":"[ ]")+" "}})}Bx.tableCell={filter:["th","td"],replacement:function(t,e){return Nx(t,e)}},Bx.tableRow={filter:"tr",replacement:function(t,e){var n="",r={left:":--",right:"--:",center:":-:"};if(Lx(e))for(var i=0;i<e.childNodes.length;i++){var o="---",s=(e.childNodes[i].getAttribute("align")||"").toLowerCase();s&&(o=r[s]||o),n+=Nx(o,e.childNodes[i])}return"\n"+t+(n?"\n"+n:"")}},Bx.table={filter:function(t){return"TABLE"===t.nodeName&&Lx(t.rows[0])},replacement:function(t){return"\n\n"+(t=t.replace("\n\n","\n"))+"\n\n"}},Bx.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};const Rx=Ex.prototype.escape;function zx(t){return t=(t=Rx(t)).replace(/</g,"\\<")}Ex.prototype.escape=function(t){let e="",n=0;for(const r of function*(t){for(const e of t.matchAll(jx)){const t=e[0],n=Vx(t);yield Object.assign([t.substring(0,n)],{index:e.index})}}(t)){const i=r.index;i>n&&(e+=zx(t.substring(n,i)));const o=r[0];e+=o,n=i+o.length}return n<t.length&&(e+=zx(t.substring(n,t.length))),e};const Fx=new Ex({codeBlockStyle:"fenced",hr:"---",headingStyle:"atx"});Fx.use([function(t){t.use([Sx,Dx,Ox,Px])},function(t){t.addRule("taskListItems",{filter:t=>"checkbox"===t.type&&("LI"===t.parentNode.nodeName||"LI"===t.parentNode.parentNode.nodeName),replacement:(t,e)=>(e.checked?"[x]":"[ ]")+" "})}]);const jx=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");function Vx(t){let e=t.length;for(;e>0;){const n=t[e-1];if("?!.,:*_~'\"".includes(n))e--;else{if(")"!=n)break;{let n=0;for(let r=0;r<e;r++)"("==t[r]?n++:")"==t[r]&&n--;if(!(n<0))break;e--}}}return e}class $x{constructor(t){this._htmlDP=new Ll(t)}keepHtml(t){Fx.keep([t])}toView(t){const e=(n=t,XC.parse(n,{gfm:!0,breaks:!0,tables:!0,xhtml:!0,headerIds:!1}));var n;return this._htmlDP.toView(e)}toData(t){return function(t){return Fx.turndown(t)}(this._htmlDP.toData(t))}registerRawContentMatcher(t){this._htmlDP.registerRawContentMatcher(t)}useFillerType(){}}function Hx(t,e){return t=>{t.on("attribute:url:media",n)};function n(n,r,i){if(!i.consumable.consume(r.item,n.name))return;const o=r.attributeNewValue,s=i.writer,a=i.mapper.toViewElement(r.item),c=[...a.getChildren()].find((t=>t.getCustomProperty("media-content")));s.remove(c);const l=t.getMediaViewElement(s,o,e);s.insert(s.createPositionAt(a,0),l)}}function Ux(t){const e=t.getSelectedElement();return e&&function(t){return!!t.getCustomProperty("media")&&Zp(t)}(e)?e:null}function Wx(t,e,n,r){return t.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(t,n,r),t.createSlot()])}function qx(t){const e=t.getSelectedElement();return e&&e.is("element","media")?e:null}function Yx(t,e,n,r){t.change((i=>{const o=i.createElement("media",{url:e});t.insertObject(o,n,null,{setSelection:"on",findOptimalPosition:r})}))}class Gx extends Ii{refresh(){const t=this.editor.model,e=t.document.selection,n=qx(e);this.value=n?n.getAttribute("url"):null,this.isEnabled=function(t){const e=t.getSelectedElement();return!!e&&"media"===e.name}(e)||function(t,e){let n=em(t,e).start.parent;n.isEmpty&&!e.schema.isLimit(n)&&(n=n.parent);return e.schema.checkChild(n,"media")}(e,t)}execute(t){const e=this.editor.model,n=e.document.selection,r=qx(n);r?e.change((e=>{e.setAttribute("url",t,r)})):Yx(e,t,n,!0)}}class Zx{constructor(t,e){const n=e.providers,r=e.extraProviders||[],i=new Set(e.removeProviders),o=n.concat(r).filter((t=>{const e=t.name;return e?!i.has(e):(k("media-embed-no-provider-name",{provider:t}),!1)}));this.locale=t,this.providerDefinitions=o}hasMedia(t){return!!this._getMedia(t)}getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n)}_getMedia(t){if(!t)return new Kx(this.locale);t=t.trim();for(const e of this.providerDefinitions){const n=e.html,r=bi(e.url);for(const e of r){const r=this._getUrlMatches(t,e);if(r)return new Kx(this.locale,t,r,n)}}return null}_getUrlMatches(t,e){let n=t.match(e);if(n)return n;let r=t.replace(/^https?:\/\//,"");return n=r.match(e),n||(r=r.replace(/^www\./,""),n=r.match(e),n||null)}}class Kx{constructor(t,e,n,r){this.url=this._getValidUrl(e),this._locale=t,this._match=n,this._previewRenderer=r}getViewElement(t,e){const n={};let r;if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");const i=this._getPreviewHtml(e);r=t.createRawElement("div",n,((t,e)=>{e.setContentOf(t,i)}))}else this.url&&(n.url=this.url),r=t.createEmptyElement(e.elementName,n);return t.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const t=new qh,e=this._locale.t;t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42";return new Qu({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":e("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null}}var Qx=n(7442),Xx={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(Qx.Z,Xx);Qx.Z.locals;class Jx extends Di{static get pluginName(){return"MediaEmbedEditing"}constructor(t){super(t),t.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const e=t[1],n=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${e}${n?`?start=${n}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Zx(t.locale,t.config.get("mediaEmbed"))}init(){const t=this.editor,e=t.model.schema,n=t.t,r=t.conversion,i=t.config.get("mediaEmbed.previewsInData"),o=t.config.get("mediaEmbed.elementName"),s=this.registry;t.commands.add("mediaEmbed",new Gx(t)),e.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(t,{writer:e})=>{const n=t.getAttribute("url");return Wx(e,s,n,{elementName:o,renderMediaPreview:n&&i})}}),r.for("dataDowncast").add(Hx(s,{elementName:o,renderMediaPreview:i})),r.for("editingDowncast").elementToStructure({model:"media",view:(t,{writer:e})=>{const r=t.getAttribute("url");return function(t,e,n){return e.setCustomProperty("media",!0,t),Kp(t,e,{label:n})}(Wx(e,s,r,{elementName:o,renderForEditingView:!0}),e,n("media widget"))}}),r.for("editingDowncast").add(Hx(s,{elementName:o,renderForEditingView:!0})),r.for("upcast").elementToElement({view:t=>["oembed",o].includes(t.name)&&t.getAttribute("url")?{name:!0}:null,model:(t,{writer:e})=>{const n=t.getAttribute("url");if(s.hasMedia(n))return e.createElement("media",{url:n})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(t,{writer:e})=>{const n=t.getAttribute("data-oembed-url");if(s.hasMedia(n))return e.createElement("media",{url:n})}}).add((t=>{t.on("element:figure",(function(t,e,n){if(!n.consumable.consume(e.viewItem,{name:!0,classes:"media"}))return;const{modelRange:r,modelCursor:i}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=r,e.modelCursor=i;_i(r.getItems())||n.consumable.revert(e.viewItem,{name:!0,classes:"media"})}))}))}}const tE=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class eE extends Di{static get requires(){return[zm,rp,Gm]}static get pluginName(){return"AutoMediaEmbed"}constructor(t){super(t),this._timeoutId=null,this._positionToInsert=null}init(){const t=this.editor,e=t.model.document;this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(()=>{const t=e.selection.getFirstRange(),n=pd.fromPosition(t.start);n.stickiness="toPrevious";const r=pd.fromPosition(t.end);r.stickiness="toNext",e.once("change:data",(()=>{this._embedMediaBetweenPositions(n,r),n.detach(),r.detach()}),{priority:"high"})})),t.commands.get("undo").on("execute",(()=>{this._timeoutId&&(Mr.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)}),{priority:"high"})}_embedMediaBetweenPositions(t,e){const n=this.editor,r=n.plugins.get(Jx).registry,i=new Nc(t,e),o=i.getWalker({ignoreElementEnd:!0});let s="";for(const t of o)t.item.is("$textProxy")&&(s+=t.item.data);if(s=s.trim(),!s.match(tE))return void i.detach();if(!r.hasMedia(s))return void i.detach();n.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=pd.fromPosition(t),this._timeoutId=Mr.window.setTimeout((()=>{n.model.change((t=>{let e;this._timeoutId=null,t.remove(i),i.detach(),"$graveyard"!==this._positionToInsert.root.rootName&&(e=this._positionToInsert),Yx(n.model,s,e,!1),this._positionToInsert.detach(),this._positionToInsert=null})),n.plugins.get("Delete").requestUndoOnBackspace()}),100)):i.detach()}}var nE=n(9292),rE={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(nE.Z,rE);nE.Z.locals;class iE extends yh{constructor(t,e){super(e);const n=e.t;this.focusTracker=new vi,this.keystrokes=new Ai,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),zh.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",(t=>!!t)),this.cancelButtonView=this._createButton(n("Cancel"),zh.cancel,"ck-button-cancel","cancel"),this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=t,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),jh(this)}render(){super.render(),Vh({view:this});[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element);const t=t=>t.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",((t,e)=>{e.stopPropagation()}),{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(t){this.urlInputView.fieldView.element.value=t.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const t=this.locale.t,e=new af(this.locale,cf),n=e.fieldView;return this._urlInputViewInfoDefault=t("Paste the media URL in the input."),this._urlInputViewInfoTip=t("Tip: Paste the URL into the content to embed faster."),e.label=t("Media URL"),e.infoText=this._urlInputViewInfoDefault,n.on("input",(()=>{e.infoText=n.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=n.element.value.trim()})),e}_createButton(t,e,n,r){const i=new Zh(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}}class oE extends Di{static get requires(){return[Jx]}static get pluginName(){return"MediaEmbedUI"}init(){const t=this.editor,e=t.commands.get("mediaEmbed"),n=t.plugins.get(Jx).registry;t.ui.componentFactory.add("mediaEmbed",(r=>{const i=Rg(r),o=new iE(function(t,e){return[e=>{if(!e.url.length)return t("The URL must not be empty.")},n=>{if(!e.hasMedia(n.url))return t("This media URL is not supported.")}]}(t.t,n),t.locale);return this._setUpDropdown(i,o,e,t),this._setUpForm(i,o,e),i}))}_setUpDropdown(t,e,n){const r=this.editor,i=r.t,o=t.buttonView;t.bind("isEnabled").to(n),t.panelView.children.add(e),o.set({label:i("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),o.on("open",(()=>{e.disableCssTransitions(),e.url=n.value||"",e.urlInputView.fieldView.select(),e.enableCssTransitions()}),{priority:"low"}),t.on("submit",(()=>{e.isValid()&&(r.execute("mediaEmbed",e.url),r.editing.view.focus())})),t.on("change:isOpen",(()=>e.resetFormStatus())),t.on("cancel",(()=>{r.editing.view.focus()}))}_setUpForm(t,e,n){e.delegate("submit","cancel").to(t),e.urlInputView.bind("value").to(n,"value"),e.urlInputView.bind("isReadOnly").to(n,"isEnabled",(t=>!t))}}var sE=n(4652),aE={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(sE.Z,aE);sE.Z.locals;class cE extends Ii{refresh(){const t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}execute(t){const e=this.editor.model,n=e.document.selection,r="string"==typeof t.mention?{id:t.mention}:t.mention,i=r.id,o=t.range||n.getFirstRange(),s=t.text||i,a=dE({_text:s,id:i},r);if(1!=t.marker.length)throw new b("mentioncommand-incorrect-marker",this);if(i.charAt(0)!=t.marker)throw new b("mentioncommand-incorrect-id",this);e.change((t=>{const r=Ci(n.getAttributes()),i=new Map(r.entries());i.set("mention",a),e.insertContent(t.createText(s,i),o),e.insertContent(t.createText(" ",r),o.start.getShiftedBy(s.length))}))}}class lE extends Di{static get pluginName(){return"MentionEditing"}init(){const t=this.editor,e=t.model,n=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:t=>uE(t)}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:gE}),t.conversion.for("downcast").add(hE),n.registerPostFixer((t=>function(t,e,n){const r=e.differ.getChanges();let i=!1;for(const e of r){const r=e.position;if("$text"==e.name){const e=r.textNode&&r.textNode.nextSibling;i=pE(r.textNode,t)||i,i=pE(e,t)||i,i=pE(r.nodeBefore,t)||i,i=pE(r.nodeAfter,t)||i}if("$text"!=e.name&&"insert"==e.type){const e=r.nodeAfter;for(const n of t.createRangeIn(e).getItems())i=pE(n,t)||i}if("insert"==e.type&&n.isInline(e.name)){const e=r.nodeAfter&&r.nodeAfter.nextSibling;i=pE(r.nodeBefore,t)||i,i=pE(e,t)||i}}return i}(t,n,e.schema))),n.registerPostFixer((t=>function(t,e){const n=e.differ.getChanges();let r=!1;for(const e of n)if("attribute"===e.type&&"mention"!=e.attributeKey){const n=e.range.start.nodeBefore,i=e.range.end.nodeAfter;for(const o of[n,i])fE(o)&&o.getAttribute(e.attributeKey)!=e.attributeNewValue&&(t.setAttribute(e.attributeKey,e.attributeNewValue,o),r=!0)}return r}(t,n))),n.registerPostFixer((t=>function(t,e){const n=e.selection,r=n.focus;if(n.isCollapsed&&n.hasAttribute("mention")&&function(t){const e=t.isAtStart;return t.nodeBefore&&t.nodeBefore.is("$text")||e}(r))return t.removeSelectionAttribute("mention"),!0}(t,n))),t.commands.add("mention",new cE(t))}}function dE(t,e){return Object.assign({uid:f()},t,e||{})}function uE(t,e){const n=t.getAttribute("data-mention"),r=t.getChild(0);if(!r)return;return dE({id:n,_text:r.data},e)}function hE(t){t.on("attribute:mention",((t,e,n)=>{const r=e.attributeNewValue;if(!e.item.is("$textProxy")||!r)return;const i=e.range.start;(i.textNode||i.nodeAfter).data!=r._text&&n.consumable.consume(e.item,t.name)}),{priority:"highest"})}function gE(t,{writer:e}){if(!t)return;const n={class:"mention","data-mention":t.id},r={id:t.uid,priority:20};return e.createAttributeElement("span",n,r)}function fE(t){if(!t||!t.is("$text")&&!t.is("$textProxy")||!t.hasAttribute("mention"))return!1;return t.data!=t.getAttribute("mention")._text}function pE(t,e){return!!fE(t)&&(e.removeAttribute("mention",t),!0)}var mE=n(4303),bE={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(mE.Z,bE);mE.Z.locals;class kE extends Mg{constructor(t){super(t),this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const t=this.selected,e=this.items.getIndex(t);this.select(e+1)}selectPrevious(){const t=this.selected,e=this.items.getIndex(t);this.select(e-1)}select(t){let e=0;t>0&&t<this.items.length?e=t:t<0&&(e=this.items.length-1);const n=this.items.get(e);this.selected!==n&&(this.selected&&this.selected.removeHighlight(),n.highlight(),this.selected=n,this._isItemVisibleInScrolledArea(n)||(this.element.scrollTop=n.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(t){return new Pr(this.element).contains(new Pr(t.element))}}class wE extends yh{constructor(t,e){super(t),this.template=!1,this.domElement=e,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",((t,e,n)=>{n?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))})),this.listenTo(this.domElement,"click",(()=>{this.fire("execute")}))}render(){super.render(),this.element=this.domElement}}class yE extends Ig{highlight(){this.children.first.isOn=!0}removeHighlight(){this.children.first.isOn=!1}}const _E=[li.arrowup,li.arrowdown,li.esc],vE=[li.enter,li.tab];class AE extends Di{static get pluginName(){return"MentionUI"}static get requires(){return[wf]}constructor(t){super(t),this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=Da(this._requestFeed,100),t.config.define("mention",{feeds:[]})}init(){const t=this.editor,e=t.config.get("mention.commitKeys")||vE,n=_E.concat(e);this._balloon=t.plugins.get(wf),t.editing.view.document.on("keydown",((t,r)=>{var i;i=r.keyCode,n.includes(i)&&this._isUIVisible&&(r.preventDefault(),t.stop(),r.keyCode==li.arrowdown&&this._mentionsView.selectNext(),r.keyCode==li.arrowup&&this._mentionsView.selectPrevious(),e.includes(r.keyCode)&&this._mentionsView.executeSelected(),r.keyCode==li.esc&&this._hideUIAndRemoveMarker())}),{priority:"highest"}),Fh({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const r=t.config.get("mention.feeds");for(const t of r){const e=t.feed,n=t.marker;if(!SE(n))throw new b("mentionconfig-incorrect-marker",null,{marker:n});const r={marker:n,feedCallback:"function"==typeof e?e.bind(this.editor):TE(e),itemRenderer:t.itemRenderer};this._mentionsConfigurations.set(n,r)}this._setupTextWatcher(r),this.listenTo(t,"change:isReadOnly",(()=>{this._hideUIAndRemoveMarker()})),this.on("requestFeed:response",((t,e)=>this._handleFeedResponse(e))),this.on("requestFeed:error",(()=>this._hideUIAndRemoveMarker()))}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const t=this.editor.locale,e=new kE(t);return this._items=new yi,e.items.bindTo(this._items).using((n=>{const{item:r,marker:i}=n,o=this.editor.config.get("mention.dropdownLimit")||10;if(e.items.length>=o)return;const s=new yE(t),a=this._renderItem(r,i);return a.delegate("execute").to(s),s.children.add(a),s.item=r,s.marker=i,s.on("execute",(()=>{e.fire("execute",{item:r,marker:i})})),s})),e.on("execute",((t,e)=>{const n=this.editor,r=n.model,i=e.item,o=e.marker,s=n.model.markers.get("mention"),a=r.createPositionAt(r.document.selection.focus),c=r.createPositionAt(s.getStart()),l=r.createRange(c,a);this._hideUIAndRemoveMarker(),n.execute("mention",{mention:i,text:i.text,marker:o,range:l}),n.editing.view.focus()})),e}_getItemRenderer(t){const{itemRenderer:e}=this._mentionsConfigurations.get(t);return e}_requestFeed(t,e){this._lastRequested=e;const{feedCallback:n}=this._mentionsConfigurations.get(t),r=n(e);r instanceof Promise?r.then((n=>{this._lastRequested==e?this.fire("requestFeed:response",{feed:n,marker:t,feedText:e}):this.fire("requestFeed:discarded",{feed:n,marker:t,feedText:e})})).catch((e=>{this.fire("requestFeed:error",{error:e}),k("mention-feed-callback-error",{marker:t})})):this.fire("requestFeed:response",{feed:r,marker:t,feedText:e})}_setupTextWatcher(t){const e=this.editor,n=t.map((t=>({...t,pattern:EE(t.marker,t.minimumCharacters||0)}))),r=new sp(e.model,function(t){return e=>{const n=xE(t,e);if(!n)return!1;let r=0;0!==n.position&&(r=n.position-1);const i=e.substring(r);return n.pattern.test(i)}}(n));r.on("matched",((t,r)=>{const i=xE(n,r.text),o=e.model.document.selection.focus,s=e.model.createPositionAt(o.parent,i.position);if(function(t){const e=t.textNode&&t.textNode.hasAttribute("mention"),n=t.nodeBefore;return e||n&&n.is("$text")&&n.hasAttribute("mention")}(o)||function(t){const e=t.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}(s))return void this._hideUIAndRemoveMarker();const a=function(t,e){let n=0;0!==t.position&&(n=t.position-1);const r=EE(t.marker,0),i=e.substring(n);return i.match(r)[2]}(i,r.text),c=i.marker.length+a.length,l=o.getShiftedBy(-c),d=o.getShiftedBy(-a.length),u=e.model.createRange(l,d);if(DE(e)){const t=e.model.markers.get("mention");e.model.change((e=>{e.updateMarker(t,{range:u})}))}else e.model.change((t=>{t.addMarker("mention",{range:u,usingOperation:!1,affectsData:!1})}));this._requestFeedDebounced(i.marker,a)})),r.on("unmatched",(()=>{this._hideUIAndRemoveMarker()}));const i=e.commands.get("mention");return r.bind("isEnabled").to(i),r}_handleFeedResponse(t){const{feed:e,marker:n}=t;if(!DE(this.editor))return;this._items.clear();for(const t of e){const e="object"!=typeof t?{id:t,text:t}:t;this._items.add({item:e,marker:n})}const r=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(r):this._hideUIAndRemoveMarker()}_showOrUpdateUI(t){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(t,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(t,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),DE(this.editor)&&this.editor.model.change((t=>t.removeMarker("mention"))),this._mentionsView.position=void 0}_renderItem(t,e){const n=this.editor;let r,i=t.id;const o=this._getItemRenderer(e);if(o){const e=o(t);"string"!=typeof e?r=new wE(n.locale,e):i=e}if(!r){const t=new Zh(n.locale);t.label=i,t.withText=!0,r=t}return r}_getBalloonPanelPositionData(t,e){const n=this.editor,r=n.editing,i=r.view.domConverter,o=r.mapper;return{target:()=>{let e=t.getRange();"$graveyard"==e.start.root.rootName&&(e=n.model.document.selection.getFirstRange());const r=o.toViewRange(e);return Pr.getDomRangeRects(i.viewRangeToDom(r)).pop()},limiter:()=>{const t=this.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},positions:CE(e)}}}function CE(t){const e={caret_se:t=>({top:t.bottom+3,left:t.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(t,e)=>({top:t.top-e.height-3,left:t.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(t,e)=>({top:t.bottom+3,left:t.right-e.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(t,e)=>({top:t.top-e.height-3,left:t.right-e.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,t)?[e[t]]:[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]}function xE(t,e){let n;for(const r of t){const t=e.lastIndexOf(r.marker);t>0&&!e.substring(t-1).match(r.pattern)||(!n||t>=n.position)&&(n={marker:r.marker,position:t,minimumCharacters:r.minimumCharacters,pattern:r.pattern})}return n}function EE(t,e){const n=0==e?"*":`{${e},}`,r=i.features.isRegExpUnicodePropertySupported?"\\p{Ps}\\p{Pi}\"'":"\\(\\[{\"'";return new RegExp(`(?:^|[ ${r}])([${t}])(.${n})$`,"u")}function TE(t){return e=>t.filter((t=>("string"==typeof t?t:String(t.id)).toLowerCase().includes(e.toLowerCase())))}function SE(t){return t&&1==t.length}function DE(t){return t.model.markers.has("mention")}var ME=n(1706),IE={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(ME.Z,IE);ME.Z.locals;class BE extends Ii{refresh(){const t=this.editor.model,e=t.schema,n=t.document.selection;this.isEnabled=function(t,e,n){const r=function(t,e){const n=em(t,e).start.parent;if(n.isEmpty&&!n.is("element","$root"))return n.parent;return n}(t,n);return e.checkChild(r,"pageBreak")}(n,e,t)}execute(){const t=this.editor.model;t.change((e=>{const n=e.createElement("pageBreak");t.insertObject(n,null,null,{setSelection:"after"})}))}}var LE=n(2403),NE={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(LE.Z,NE);LE.Z.locals;class OE extends Di{static get pluginName(){return"PageBreakEditing"}init(){const t=this.editor,e=t.model.schema,n=t.t,r=t.conversion;e.register("pageBreak",{inheritAllFrom:"$blockObject"}),r.for("dataDowncast").elementToStructure({model:"pageBreak",view:(t,{writer:e})=>e.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},e.createContainerElement("span",{style:"display: none"}))}),r.for("editingDowncast").elementToStructure({model:"pageBreak",view:(t,{writer:e})=>{const r=n("Page break"),i=e.createContainerElement("div"),o=e.createRawElement("span",{class:"page-break__label"},(function(t){t.innerText=n("Page break")}));return e.addClass("page-break",i),e.insert(e.createPositionAt(i,0),o),function(t,e,n){return e.setCustomProperty("pageBreak",!0,t),Kp(t,e,{label:n})}(i,e,r)}}),r.for("upcast").elementToElement({view:t=>{const e="always"==t.getStyle("page-break-before"),n="always"==t.getStyle("page-break-after");if(e||n){if(1==t.childCount){const e=t.getChild(0);if(!e.is("element","span")||"none"!=e.getStyle("display"))return}else if(t.childCount>1)return;return{name:!0}}},model:"pageBreak",converterPriority:"high"}),t.commands.add("pageBreak",new BE(t))}}class PE extends Di{static get pluginName(){return"PageBreakUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("pageBreak",(n=>{const r=t.commands.get("pageBreak"),i=new Zh(n);return i.set({label:e("Page break"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>',tooltip:!0}),i.bind("isEnabled").to(r,"isEnabled"),this.listenTo(i,"execute",(()=>{t.execute("pageBreak"),t.editing.view.focus()})),i}))}}function RE(t,e,n,{blockElements:r,inlineObjectElements:i}){let o=n.createPositionAt(t,"forward"==e?"after":"before");return o=o.getLastMatchingPosition((({item:t})=>t.is("element")&&!r.includes(t.name)&&!i.includes(t.name)),{direction:e}),"forward"==e?o.nodeAfter:o.nodeBefore}function zE(t,e){return!!t&&t.is("element")&&e.includes(t.name)}function FE(t,e){if(!t.childCount)return;const n=new ou(t.document),r=function(t,e){const n=e.createRangeIn(t),r=new Xi({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),i=[];for(const t of n)if("elementStart"===t.type&&r.match(t.item)){const e=$E(t.item);i.push({element:t.item,id:e.id,order:e.order,indent:e.indent})}return i}(t,n);if(!r.length)return;let i=null,o=1;r.forEach(((t,s)=>{const a=function(t,e){if(!t)return!0;if(t.id!==e.id)return e.indent-t.indent!=1;const n=e.element.previousSibling;if(!n)return!0;return r=n,!(r.is("element","ol")||r.is("element","ul"));var r}(r[s-1],t),c=a?null:r[s-1],l=(u=t,(d=c)?u.indent-d.indent:u.indent-1);var d,u;if(a&&(i=null,o=1),!i||0!==l){const r=function(t,e){const n=new RegExp(`@list l${t.id}:level${t.indent}\\s*({[^}]*)`,"gi"),r=/mso-level-number-format:([^;]{0,100});/gi,i=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=n.exec(e);let s="decimal",a="ol",c=null;if(o&&o[1]){const e=r.exec(o[1]);if(e&&e[1]&&(s=e[1].trim(),a="bullet"!==s&&"image"!==s?"ol":"ul"),"bullet"===s){const e=function(t){const e=function(t){if(t.getChild(0).is("$text"))return null;for(const e of t.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);return t.is("$text")?t:t.getChild(0)}}(t);if(!e)return null;const n=e._data;if("o"===n)return"circle";if("·"===n)return"disc";if("§"===n)return"square";return null}(t.element);e&&(s=e)}else{const t=i.exec(o[1]);t&&t[1]&&(c=parseInt(t[1]))}}return{type:a,startIndex:c,style:jE(s)}}(t,e);if(i){if(t.indent>o){const t=i.getChild(i.childCount-1),e=t.getChild(t.childCount-1);i=VE(r,e,n),o+=1}else if(t.indent<o){const e=o-t.indent;i=function(t,e){const n=t.getAncestors({parentFirst:!0});let r=null,i=0;for(const t of n)if("ul"!==t.name&&"ol"!==t.name||i++,i===e){r=t;break}return r}(i,e),o=parseInt(t.indent)}}else i=VE(r,t.element,n);t.indent<=o&&(i.is("element",r.type)||(i=n.rename(r.type,i)))}const h=function(t,e){return function(t,e){const n=new Xi({name:"span",styles:{"mso-list":"Ignore"}}),r=e.createRangeIn(t);for(const t of r)"elementStart"===t.type&&n.match(t.item)&&e.remove(t.item)}(t,e),e.rename("li",t)}(t.element,n);n.appendChild(h,i)}))}function jE(t){if(t.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(t){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return t;default:return null}}function VE(t,e,n){const r=e.parent,i=n.createElement(t.type),o=r.getChildIndex(e)+1;return n.insertChild(o,i,r),t.style&&n.setStyle("list-style-type",t.style,i),t.startIndex&&t.startIndex>1&&n.setAttribute("start",t.startIndex,i),i}function $E(t){const e={},n=t.getStyle("mso-list");if(n){const t=n.match(/(^|\s{1,100})l(\d+)/i),r=n.match(/\s{0,100}lfo(\d+)/i),i=n.match(/\s{0,100}level(\d+)/i);t&&r&&i&&(e.id=t[2],e.order=r[1],e.indent=i[1])}return e}const HE=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class UE{constructor(t){this.document=t}isActive(t){return HE.test(t)}execute(t){const e=new ou(this.document),{body:n}=t._parsedData;!function(t,e){for(const n of t.getChildren())if(n.is("element","b")&&"normal"===n.getStyle("font-weight")){const r=t.getChildIndex(n);e.remove(n),e.insertChild(r,n.getChildren(),t)}}(n,e),function(t,e){for(const n of e.createRangeIn(t)){const t=n.item;if(t.is("element","li")){const n=t.getChild(0);n&&n.is("element","p")&&e.unwrapElement(n)}}}(n,e),function(t,e){const n=new ks(e.document.stylesProcessor),r=new ca(n,{renderingMode:"data"}),i=r.blockElements,o=r.inlineObjectElements,s=[];for(const n of e.createRangeIn(t)){const t=n.item;if(t.is("element","br")){const n=RE(t,"forward",e,{blockElements:i,inlineObjectElements:o}),r=RE(t,"backward",e,{blockElements:i,inlineObjectElements:o}),a=zE(n,i);(zE(r,i)||a)&&s.push(t)}}for(const t of s)t.hasClass("Apple-interchange-newline")?e.remove(t):e.replace(t,e.createElement("p"))}(n,e),t.content=n}}function WE(t,e){if(!t.childCount)return;const n=new ou,r=function(t,e){const n=e.createRangeIn(t),r=new Xi({name:/v:(.+)/}),i=[];for(const t of n){if("elementStart"!=t.type)continue;const e=t.item,n=e.previousSibling&&e.previousSibling.name||null;r.match(e)&&e.getAttribute("o:gfxdata")&&"v:shapetype"!==n&&i.push(t.item.getAttribute("id"))}return i}(t,n);!function(t,e,n){const r=n.createRangeIn(e),i=new Xi({name:"img"}),o=[];for(const e of r)if(i.match(e.item)){const n=e.item,r=n.getAttribute("v:shapes")?n.getAttribute("v:shapes").split(" "):[];r.length&&r.every((e=>t.indexOf(e)>-1))?o.push(n):n.getAttribute("src")||o.push(n)}for(const t of o)n.remove(t)}(r,t,n),function(t,e){const n=e.createRangeIn(t),r=new Xi({name:/v:(.+)/}),i=[];for(const t of n)"elementStart"==t.type&&r.match(t.item)&&i.push(t.item);for(const t of i)e.remove(t)}(t,n);const i=function(t,e){const n=e.createRangeIn(t),r=new Xi({name:"img"}),i=[];for(const t of n)r.match(t.item)&&t.item.getAttribute("src").startsWith("file://")&&i.push(t.item);return i}(t,n);i.length&&function(t,e,n){if(t.length===e.length)for(let r=0;r<t.length;r++){const i=`data:${e[r].type};base64,${qE(e[r].hex)}`;n.setAttribute("src",i,t[r])}}(i,function(t){if(!t)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),r=t.match(n),i=[];if(r)for(const t of r){let n=!1;t.includes("\\pngblip")?n="image/png":t.includes("\\jpegblip")&&(n="image/jpeg"),n&&i.push({hex:t.replace(e,"").replace(/[^\da-fA-F]/g,""),type:n})}return i}(e),n)}function qE(t){return btoa(t.match(/\w{2}/g).map((t=>String.fromCharCode(parseInt(t,16)))).join(""))}const YE=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,GE=/xmlns:o="urn:schemas-microsoft-com/i;class ZE{constructor(t){this.document=t}isActive(t){return YE.test(t)||GE.test(t)}execute(t){const{body:e,stylesString:n}=t._parsedData;FE(e,n),WE(e,t.dataTransfer.getData("text/rtf")),t.content=e}}function KE(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,((t,e)=>1===e.length?" ":Array(e.length+1).join("  ").substr(0,e.length)))}function QE(t,e){const n=new DOMParser,r=function(t){return KE(KE(t)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}(function(t){const e="</body>",n="</html>",r=t.indexOf(e);if(r<0)return t;const i=t.indexOf(n,r+e.length);return t.substring(0,r+e.length)+(i>=0?t.substring(i):"")}(t=t.replace(/<!--\[if gte vml 1]>/g,""))),i=n.parseFromString(r,"text/html");!function(t){t.querySelectorAll("span[style*=spacerun]").forEach((t=>{const e=t.innerText.length||0;t.innerText=Array(e+1).join("  ").substr(0,e)}))}(i);const o=i.body.innerHTML,s=function(t,e){const n=new ks(e),r=new ca(n,{renderingMode:"data"}),i=t.createDocumentFragment(),o=t.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);return r.domToView(i,{skipComments:!0})}(i,e),a=function(t){const e=[],n=[],r=Array.from(t.getElementsByTagName("style"));for(const t of r)t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length&&(e.push(t.sheet),n.push(t.innerHTML));return{styles:e,stylesString:n.join(" ")}}(i);return{body:s,bodyString:o,styles:a.styles,stylesString:a.stylesString}}const XE="removeFormat";class JE extends Di{static get pluginName(){return"RemoveFormatUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(XE,(n=>{const r=t.commands.get(XE),i=new Zh(n);return i.set({label:e("Remove Format"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>',tooltip:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(XE),t.editing.view.focus()})),i}))}}class tT extends Ii{refresh(){const t=this.editor.model;this.isEnabled=!!_i(this._getFormattingItems(t.document.selection,t.schema))}execute(){const t=this.editor.model,e=t.schema;t.change((n=>{for(const r of this._getFormattingItems(t.document.selection,e))if(r.is("selection"))for(const t of this._getFormattingAttributes(r,e))n.removeSelectionAttribute(t);else{const t=n.createRangeOn(r);for(const i of this._getFormattingAttributes(r,e))n.removeAttribute(i,t)}}))}*_getFormattingItems(t,e){const n=t=>!!_i(this._getFormattingAttributes(t,e));for(const r of t.getRanges())for(const t of r.getItems())!e.isBlock(t)&&n(t)&&(yield t);for(const e of t.getSelectedBlocks())n(e)&&(yield e);n(t)&&(yield t)}*_getFormattingAttributes(t,e){for(const[n]of t.getAttributes()){const t=e.getAttributeProperties(n);t&&t.isFormatting&&(yield n)}}}class eT extends Di{static get pluginName(){return"RemoveFormatEditing"}init(){const t=this.editor;t.commands.add("removeFormat",new tT(t))}}function nT(t){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"br",isVoid:!0},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"input",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"textarea",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],n=e.map((t=>t.name)).join("|"),r=t.replace(new RegExp(`</?(${n})( .*?)?>`,"g"),"\n$&\n").split("\n");let i=0;return r.filter((t=>t.length)).map((t=>function(t,e){return e.some((e=>!e.isVoid&&!!new RegExp(`<${e.name}( .*?)?>`).test(t)))}(t,e)?rT(t,i++):function(t,e){return e.some((e=>new RegExp(`</${e.name}>`).test(t)))}(t,e)?rT(t,--i):rT(t,i))).join("\n")}function rT(t,e,n="    "){return`${n.repeat(Math.max(0,e))}${t}`}var iT=n(2896),oT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(iT.Z,oT);iT.Z.locals;const sT="SourceEditingMode";function aT(t){return function(t){return t.startsWith("<")}(t)?nT(t):t}class cT extends Xg{constructor(t,e){super(t);const n=t.t;this.set("class","ck-special-characters-navigation"),this.groupDropdownView=this._createGroupDropdown(e),this.groupDropdownView.panelPosition="rtl"===t.uiLanguageDirection?"se":"sw",this.label=n("Special characters"),this.children.add(this.groupDropdownView)}get currentGroupName(){return this.groupDropdownView.value}focus(){this.groupDropdownView.focus()}_createGroupDropdown(t){const e=this.locale,n=e.t,r=Rg(e),i=this._getCharacterGroupListItemDefinitions(r,t);return r.set("value",i.first.model.label),r.buttonView.bind("label").to(r,"value"),r.buttonView.set({isOn:!1,withText:!0,tooltip:n("Character categories"),class:["ck-dropdown__button_label-width_auto"]}),r.on("execute",(t=>{r.value=t.source.label})),r.delegate("execute").to(this),Fg(r,i),r}_getCharacterGroupListItemDefinitions(t,e){const n=new yi;for(const r of e){const e={type:"button",model:new hf({label:r,withText:!0})};e.model.bind("isOn").to(t,"value",(t=>t===e.model.label)),n.add(e)}return n}}var lT=n(5600),dT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(lT.Z,dT);lT.Z.locals;class uT extends yh{constructor(t){super(t),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new vi,this.keystrokes=new Ai,$h({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>Mr.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length})}createTile(t,e){const n=new Zh(this.locale);return n.set({label:t,withText:!0,class:"ck-character-grid__tile"}),n.extendTemplate({attributes:{title:e},on:{mouseover:n.bindTemplate.to("mouseover"),focus:n.bindTemplate.to("focus")}}),n.on("mouseover",(()=>{this.fire("tileHover",{name:e,character:t})})),n.on("focus",(()=>{this.fire("tileFocus",{name:e,character:t})})),n.on("execute",(()=>{this.fire("execute",{name:e,character:t})})),n}render(){super.render();for(const t of this.tiles)this.focusTracker.add(t.element);this.tiles.on("change",((t,{added:e,removed:n})=>{if(e.length>0)for(const t of e)this.focusTracker.add(t.element);if(n.length>0)for(const t of n)this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.get(0).focus()}}var hT=n(9062),gT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(hT.Z,gT);hT.Z.locals;class fT extends yh{constructor(t){super(t);const e=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",pT),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:e.to("name",(t=>t||"​"))}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:e.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function pT(t){if(null===t)return"";return"U+"+("0000"+t.codePointAt(0).toString(16)).slice(-4)}class mT extends yh{constructor(t,e,n,r){super(t),this.items=this.createCollection(),this.focusTracker=new vi,this.keystrokes=new Ai,this._focusCycler=new pg({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.navigationView=e,this.gridView=n,this.infoView=r,this.setTemplate({tag:"div",children:[this.navigationView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.navigationView.groupDropdownView.buttonView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.navigationView.groupDropdownView.buttonView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.navigationView.focus()}}var bT=n(2117),kT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(bT.Z,kT);bT.Z.locals;const wT="All";class yT extends Di{static get pluginName(){return"SpecialCharactersArrows"}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Arrows",[{title:e("leftwards simple arrow"),character:"←"},{title:e("rightwards simple arrow"),character:"→"},{title:e("upwards simple arrow"),character:"↑"},{title:e("downwards simple arrow"),character:"↓"},{title:e("leftwards double arrow"),character:"⇐"},{title:e("rightwards double arrow"),character:"⇒"},{title:e("upwards double arrow"),character:"⇑"},{title:e("downwards double arrow"),character:"⇓"},{title:e("leftwards dashed arrow"),character:"⇠"},{title:e("rightwards dashed arrow"),character:"⇢"},{title:e("upwards dashed arrow"),character:"⇡"},{title:e("downwards dashed arrow"),character:"⇣"},{title:e("leftwards arrow to bar"),character:"⇤"},{title:e("rightwards arrow to bar"),character:"⇥"},{title:e("upwards arrow to bar"),character:"⤒"},{title:e("downwards arrow to bar"),character:"⤓"},{title:e("up down arrow with base"),character:"↨"},{title:e("back with leftwards arrow above"),character:"🔙"},{title:e("end with leftwards arrow above"),character:"🔚"},{title:e("on with exclamation mark with left right arrow above"),character:"🔛"},{title:e("soon with rightwards arrow above"),character:"🔜"},{title:e("top with upwards arrow above"),character:"🔝"}])}}class _T extends Di{static get pluginName(){return"SpecialCharactersCurrency"}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:e("Dollar sign")},{character:"€",title:e("Euro sign")},{character:"¥",title:e("Yen sign")},{character:"£",title:e("Pound sign")},{character:"¢",title:e("Cent sign")},{character:"₠",title:e("Euro-currency sign")},{character:"₡",title:e("Colon sign")},{character:"₢",title:e("Cruzeiro sign")},{character:"₣",title:e("French franc sign")},{character:"₤",title:e("Lira sign")},{character:"¤",title:e("Currency sign")},{character:"₿",title:e("Bitcoin sign")},{character:"₥",title:e("Mill sign")},{character:"₦",title:e("Naira sign")},{character:"₧",title:e("Peseta sign")},{character:"₨",title:e("Rupee sign")},{character:"₩",title:e("Won sign")},{character:"₪",title:e("New sheqel sign")},{character:"₫",title:e("Dong sign")},{character:"₭",title:e("Kip sign")},{character:"₮",title:e("Tugrik sign")},{character:"₯",title:e("Drachma sign")},{character:"₰",title:e("German penny sign")},{character:"₱",title:e("Peso sign")},{character:"₲",title:e("Guarani sign")},{character:"₳",title:e("Austral sign")},{character:"₴",title:e("Hryvnia sign")},{character:"₵",title:e("Cedi sign")},{character:"₶",title:e("Livre tournois sign")},{character:"₷",title:e("Spesmilo sign")},{character:"₸",title:e("Tenge sign")},{character:"₹",title:e("Indian rupee sign")},{character:"₺",title:e("Turkish lira sign")},{character:"₻",title:e("Nordic mark sign")},{character:"₼",title:e("Manat sign")},{character:"₽",title:e("Ruble sign")}])}}class vT extends Di{static get pluginName(){return"SpecialCharactersMathematical"}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:e("Less-than sign")},{character:">",title:e("Greater-than sign")},{character:"≤",title:e("Less-than or equal to")},{character:"≥",title:e("Greater-than or equal to")},{character:"–",title:e("En dash")},{character:"—",title:e("Em dash")},{character:"¯",title:e("Macron")},{character:"‾",title:e("Overline")},{character:"°",title:e("Degree sign")},{character:"−",title:e("Minus sign")},{character:"±",title:e("Plus-minus sign")},{character:"÷",title:e("Division sign")},{character:"⁄",title:e("Fraction slash")},{character:"×",title:e("Multiplication sign")},{character:"ƒ",title:e("Latin small letter f with hook")},{character:"∫",title:e("Integral")},{character:"∑",title:e("N-ary summation")},{character:"∞",title:e("Infinity")},{character:"√",title:e("Square root")},{character:"∼",title:e("Tilde operator")},{character:"≅",title:e("Approximately equal to")},{character:"≈",title:e("Almost equal to")},{character:"≠",title:e("Not equal to")},{character:"≡",title:e("Identical to")},{character:"∈",title:e("Element of")},{character:"∉",title:e("Not an element of")},{character:"∋",title:e("Contains as member")},{character:"∏",title:e("N-ary product")},{character:"∧",title:e("Logical and")},{character:"∨",title:e("Logical or")},{character:"¬",title:e("Not sign")},{character:"∩",title:e("Intersection")},{character:"∪",title:e("Union")},{character:"∂",title:e("Partial differential")},{character:"∀",title:e("For all")},{character:"∃",title:e("There exists")},{character:"∅",title:e("Empty set")},{character:"∇",title:e("Nabla")},{character:"∗",title:e("Asterisk operator")},{character:"∝",title:e("Proportional to")},{character:"∠",title:e("Angle")},{character:"¼",title:e("Vulgar fraction one quarter")},{character:"½",title:e("Vulgar fraction one half")},{character:"¾",title:e("Vulgar fraction three quarters")}])}}class AT extends Di{static get pluginName(){return"SpecialCharactersLatin"}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:e("Latin capital letter a with macron")},{character:"ā",title:e("Latin small letter a with macron")},{character:"Ă",title:e("Latin capital letter a with breve")},{character:"ă",title:e("Latin small letter a with breve")},{character:"Ą",title:e("Latin capital letter a with ogonek")},{character:"ą",title:e("Latin small letter a with ogonek")},{character:"Ć",title:e("Latin capital letter c with acute")},{character:"ć",title:e("Latin small letter c with acute")},{character:"Ĉ",title:e("Latin capital letter c with circumflex")},{character:"ĉ",title:e("Latin small letter c with circumflex")},{character:"Ċ",title:e("Latin capital letter c with dot above")},{character:"ċ",title:e("Latin small letter c with dot above")},{character:"Č",title:e("Latin capital letter c with caron")},{character:"č",title:e("Latin small letter c with caron")},{character:"Ď",title:e("Latin capital letter d with caron")},{character:"ď",title:e("Latin small letter d with caron")},{character:"Đ",title:e("Latin capital letter d with stroke")},{character:"đ",title:e("Latin small letter d with stroke")},{character:"Ē",title:e("Latin capital letter e with macron")},{character:"ē",title:e("Latin small letter e with macron")},{character:"Ĕ",title:e("Latin capital letter e with breve")},{character:"ĕ",title:e("Latin small letter e with breve")},{character:"Ė",title:e("Latin capital letter e with dot above")},{character:"ė",title:e("Latin small letter e with dot above")},{character:"Ę",title:e("Latin capital letter e with ogonek")},{character:"ę",title:e("Latin small letter e with ogonek")},{character:"Ě",title:e("Latin capital letter e with caron")},{character:"ě",title:e("Latin small letter e with caron")},{character:"Ĝ",title:e("Latin capital letter g with circumflex")},{character:"ĝ",title:e("Latin small letter g with circumflex")},{character:"Ğ",title:e("Latin capital letter g with breve")},{character:"ğ",title:e("Latin small letter g with breve")},{character:"Ġ",title:e("Latin capital letter g with dot above")},{character:"ġ",title:e("Latin small letter g with dot above")},{character:"Ģ",title:e("Latin capital letter g with cedilla")},{character:"ģ",title:e("Latin small letter g with cedilla")},{character:"Ĥ",title:e("Latin capital letter h with circumflex")},{character:"ĥ",title:e("Latin small letter h with circumflex")},{character:"Ħ",title:e("Latin capital letter h with stroke")},{character:"ħ",title:e("Latin small letter h with stroke")},{character:"Ĩ",title:e("Latin capital letter i with tilde")},{character:"ĩ",title:e("Latin small letter i with tilde")},{character:"Ī",title:e("Latin capital letter i with macron")},{character:"ī",title:e("Latin small letter i with macron")},{character:"Ĭ",title:e("Latin capital letter i with breve")},{character:"ĭ",title:e("Latin small letter i with breve")},{character:"Į",title:e("Latin capital letter i with ogonek")},{character:"į",title:e("Latin small letter i with ogonek")},{character:"İ",title:e("Latin capital letter i with dot above")},{character:"ı",title:e("Latin small letter dotless i")},{character:"Ĳ",title:e("Latin capital ligature ij")},{character:"ĳ",title:e("Latin small ligature ij")},{character:"Ĵ",title:e("Latin capital letter j with circumflex")},{character:"ĵ",title:e("Latin small letter j with circumflex")},{character:"Ķ",title:e("Latin capital letter k with cedilla")},{character:"ķ",title:e("Latin small letter k with cedilla")},{character:"ĸ",title:e("Latin small letter kra")},{character:"Ĺ",title:e("Latin capital letter l with acute")},{character:"ĺ",title:e("Latin small letter l with acute")},{character:"Ļ",title:e("Latin capital letter l with cedilla")},{character:"ļ",title:e("Latin small letter l with cedilla")},{character:"Ľ",title:e("Latin capital letter l with caron")},{character:"ľ",title:e("Latin small letter l with caron")},{character:"Ŀ",title:e("Latin capital letter l with middle dot")},{character:"ŀ",title:e("Latin small letter l with middle dot")},{character:"Ł",title:e("Latin capital letter l with stroke")},{character:"ł",title:e("Latin small letter l with stroke")},{character:"Ń",title:e("Latin capital letter n with acute")},{character:"ń",title:e("Latin small letter n with acute")},{character:"Ņ",title:e("Latin capital letter n with cedilla")},{character:"ņ",title:e("Latin small letter n with cedilla")},{character:"Ň",title:e("Latin capital letter n with caron")},{character:"ň",title:e("Latin small letter n with caron")},{character:"ŉ",title:e("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:e("Latin capital letter eng")},{character:"ŋ",title:e("Latin small letter eng")},{character:"Ō",title:e("Latin capital letter o with macron")},{character:"ō",title:e("Latin small letter o with macron")},{character:"Ŏ",title:e("Latin capital letter o with breve")},{character:"ŏ",title:e("Latin small letter o with breve")},{character:"Ő",title:e("Latin capital letter o with double acute")},{character:"ő",title:e("Latin small letter o with double acute")},{character:"Œ",title:e("Latin capital ligature oe")},{character:"œ",title:e("Latin small ligature oe")},{character:"Ŕ",title:e("Latin capital letter r with acute")},{character:"ŕ",title:e("Latin small letter r with acute")},{character:"Ŗ",title:e("Latin capital letter r with cedilla")},{character:"ŗ",title:e("Latin small letter r with cedilla")},{character:"Ř",title:e("Latin capital letter r with caron")},{character:"ř",title:e("Latin small letter r with caron")},{character:"Ś",title:e("Latin capital letter s with acute")},{character:"ś",title:e("Latin small letter s with acute")},{character:"Ŝ",title:e("Latin capital letter s with circumflex")},{character:"ŝ",title:e("Latin small letter s with circumflex")},{character:"Ş",title:e("Latin capital letter s with cedilla")},{character:"ş",title:e("Latin small letter s with cedilla")},{character:"Š",title:e("Latin capital letter s with caron")},{character:"š",title:e("Latin small letter s with caron")},{character:"Ţ",title:e("Latin capital letter t with cedilla")},{character:"ţ",title:e("Latin small letter t with cedilla")},{character:"Ť",title:e("Latin capital letter t with caron")},{character:"ť",title:e("Latin small letter t with caron")},{character:"Ŧ",title:e("Latin capital letter t with stroke")},{character:"ŧ",title:e("Latin small letter t with stroke")},{character:"Ũ",title:e("Latin capital letter u with tilde")},{character:"ũ",title:e("Latin small letter u with tilde")},{character:"Ū",title:e("Latin capital letter u with macron")},{character:"ū",title:e("Latin small letter u with macron")},{character:"Ŭ",title:e("Latin capital letter u with breve")},{character:"ŭ",title:e("Latin small letter u with breve")},{character:"Ů",title:e("Latin capital letter u with ring above")},{character:"ů",title:e("Latin small letter u with ring above")},{character:"Ű",title:e("Latin capital letter u with double acute")},{character:"ű",title:e("Latin small letter u with double acute")},{character:"Ų",title:e("Latin capital letter u with ogonek")},{character:"ų",title:e("Latin small letter u with ogonek")},{character:"Ŵ",title:e("Latin capital letter w with circumflex")},{character:"ŵ",title:e("Latin small letter w with circumflex")},{character:"Ŷ",title:e("Latin capital letter y with circumflex")},{character:"ŷ",title:e("Latin small letter y with circumflex")},{character:"Ÿ",title:e("Latin capital letter y with diaeresis")},{character:"Ź",title:e("Latin capital letter z with acute")},{character:"ź",title:e("Latin small letter z with acute")},{character:"Ż",title:e("Latin capital letter z with dot above")},{character:"ż",title:e("Latin small letter z with dot above")},{character:"Ž",title:e("Latin capital letter z with caron")},{character:"ž",title:e("Latin small letter z with caron")},{character:"ſ",title:e("Latin small letter long s")}])}}class CT extends Di{static get pluginName(){return"SpecialCharactersText"}init(){const t=this.editor,e=t.t;t.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:e("Single left-pointing angle quotation mark")},{character:"›",title:e("Single right-pointing angle quotation mark")},{character:"«",title:e("Left-pointing double angle quotation mark")},{character:"»",title:e("Right-pointing double angle quotation mark")},{character:"‘",title:e("Left single quotation mark")},{character:"’",title:e("Right single quotation mark")},{character:"“",title:e("Left double quotation mark")},{character:"”",title:e("Right double quotation mark")},{character:"‚",title:e("Single low-9 quotation mark")},{character:"„",title:e("Double low-9 quotation mark")},{character:"¡",title:e("Inverted exclamation mark")},{character:"¿",title:e("Inverted question mark")},{character:"‥",title:e("Two dot leader")},{character:"…",title:e("Horizontal ellipsis")},{character:"‡",title:e("Double dagger")},{character:"‰",title:e("Per mille sign")},{character:"‱",title:e("Per ten thousand sign")},{character:"‼",title:e("Double exclamation mark")},{character:"⁈",title:e("Question exclamation mark")},{character:"⁉",title:e("Exclamation question mark")},{character:"⁇",title:e("Double question mark")},{character:"©",title:e("Copyright sign")},{character:"®",title:e("Registered sign")},{character:"™",title:e("Trade mark sign")},{character:"§",title:e("Section sign")},{character:"¶",title:e("Paragraph sign")},{character:"⁋",title:e("Reversed paragraph sign")}])}}class xT extends Ii{refresh(){const t=this.editor.model,e=t.document;this.value=!!e.selection.getAttribute("restrictedEditingException"),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"restrictedEditingException")}execute(t={}){const e=this.editor.model,n=e.document.selection,r=void 0===t.forceValue?!this.value:t.forceValue;e.change((t=>{const i=e.schema.getValidRanges(n.getRanges(),"restrictedEditingException");if(n.isCollapsed)if(r)t.setSelectionAttribute("restrictedEditingException",r);else{const e=t=>t.item.getAttribute("restrictedEditingException")===this.value,r=n.focus.getLastMatchingPosition(e,{direction:"backward"}),i=n.focus.getLastMatchingPosition(e),o=n.focus;t.removeSelectionAttribute("restrictedEditingException"),o.isEqual(r)||o.isEqual(i)||t.removeAttribute("restrictedEditingException",t.createRange(r,i))}else for(const e of i)r?t.setAttribute("restrictedEditingException",r,e):t.removeAttribute("restrictedEditingException",e)}))}}class ET extends Di{static get pluginName(){return"StandardEditingModeEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:["restrictedEditingException"]}),t.conversion.for("upcast").elementToAttribute({model:"restrictedEditingException",view:{name:"span",classes:"restricted-editing-exception"}}),t.conversion.for("downcast").attributeToElement({model:"restrictedEditingException",view:(t,{writer:e})=>{if(t)return e.createAttributeElement("span",{class:"restricted-editing-exception"},{priority:-10})}}),t.commands.add("restrictedEditingException",new xT(t)),t.editing.view.change((e=>{for(const n of t.editing.view.document.roots)e.addClass("ck-restricted-editing_mode_standard",n)}))}}class TT extends Di{init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("restrictedEditingException",(n=>{const r=t.commands.get("restrictedEditingException"),i=new Zh(n);return i.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.25 16a.75.75 0 1 1 0 1.5H.75a.75.75 0 1 1 0-1.5h5.5zm0-5a.75.75 0 1 1 0 1.5H.75a.75.75 0 1 1 0-1.5h5.5zm3-5a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1 0-1.5h8.5zm6-5a.75.75 0 1 1 0 1.5H.75a.75.75 0 0 1 0-1.5h14.5zm.25 5.5a3.5 3.5 0 0 1 3.143 1.959.75.75 0 0 1-1.36.636A2 2 0 0 0 13.5 10v2H19a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1v-2l.005-.192A3.5 3.5 0 0 1 15.5 6.5zm0 7.5a.5.5 0 0 0-.492.41L15 14.5v2a.5.5 0 0 0 .992.09L16 16.5v-2a.5.5 0 0 0-.5-.5z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),i.bind("label").to(r,"value",(t=>e(t?"Disable editing":"Enable editing"))),this.listenTo(i,"execute",(()=>{t.execute("restrictedEditingException"),t.editing.view.focus()})),i}))}}var ST=n(4044),DT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(ST.Z,DT);ST.Z.locals;const MT="strikethrough";class IT extends Di{static get pluginName(){return"StrikethroughEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:MT}),t.model.schema.setAttributeProperties(MT,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:MT,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),t.commands.add(MT,new $b(t,MT)),t.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const BT="strikethrough";class LT extends Di{static get pluginName(){return"StrikethroughUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(BT,(n=>{const r=t.commands.get(BT),i=new Zh(n);return i.set({label:e("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(BT),t.editing.view.focus()})),i}))}}const NT=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class OT extends Zh{constructor(t,e){super(t),this.styleDefinition=e,this.previewView=this._createPreview(),this.set({label:e.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const{element:t,classes:e}=this.styleDefinition,n=new yh(this.locale);return n.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[{tag:this._isPreviewable(t)?t:"div",attributes:{class:e},children:[{text:"AaBbCcDdEeFfGgHhIiJj"}]}]}),n}_isPreviewable(t){return!NT.includes(t)}}var PT=n(9758),RT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(PT.Z,RT);PT.Z.locals;class zT extends yh{constructor(t,e){super(t),this.focusTracker=new vi,this.keystrokes=new Ai,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const n of e){const e=new OT(t,n);this.children.add(e)}this.on("change:activeStyles",(()=>{for(const t of this.children)t.isOn=this.activeStyles.includes(t.styleDefinition.name)})),this.on("change:enabledStyles",(()=>{for(const t of this.children)t.isEnabled=this.enabledStyles.includes(t.styleDefinition.name)})),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const t of this.children)this.focusTracker.add(t.element);$h({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var FT=n(306),jT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(FT.Z,jT);FT.Z.locals;class VT extends yh{constructor(t,e,n){super(t),this.labelView=new qg(t),this.labelView.text=e,this.gridView=new zT(t,n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}var $T=n(9458),HT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()($T.Z,HT);$T.Z.locals;class UT extends yh{constructor(t,e){super(t);const n=t.t;this.focusTracker=new vi,this.keystrokes=new Ai,this.children=this.createCollection(),this.blockStylesGroupView=new VT(t,n("Block styles"),e.block),this.inlineStylesGroupView=new VT(t,n("Text styles"),e.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),e.block.length&&this.children.add(this.blockStylesGroupView),e.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}function WT(t,e=[]){const n={block:[],inline:[]};for(const r of e){const e=[],i=[];for(const n of t.getDefinitionsForView(r.element))n.isBlock?e.push(n.model):i.push(n.model);e.length?n.block.push({...r,modelElements:e,isBlock:!0}):n.inline.push({...r,ghsAttributes:i})}return n}var qT=n(8920),YT={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(qT.Z,YT);qT.Z.locals;class GT extends Di{static get pluginName(){return"StyleUI"}init(){const t=this.editor,e=WT(t.plugins.get("DataSchema"),t.config.get("style.definitions"));t.ui.componentFactory.add("style",(n=>{const r=n.t,i=Rg(n),o=new UT(n,e),s=t.commands.get("style");return i.bind("isEnabled").to(s),i.panelView.children.add(o),i.buttonView.withText=!0,i.buttonView.bind("label").to(s,"value",(t=>t.length>1?r("Multiple styles"):1===t.length?t[0]:r("Styles"))),i.bind("class").to(s,"value",(t=>{const e=["ck-style-dropdown"];return t.length>1&&e.push("ck-style-dropdown_multiple-active"),e.join(" ")})),o.delegate("execute").to(i),i.on("execute",(e=>{t.execute("style",{styleName:e.source.styleDefinition.name}),t.editing.view.focus()})),o.bind("activeStyles").to(s,"value"),o.bind("enabledStyles").to(s,"enabledStyles"),i}))}}class ZT extends Ii{constructor(t,e){super(t),this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=e}refresh(){const t=this.editor.model,e=t.document.selection,n=new Set,r=new Set;for(const i of this._styleDefinitions.inline)for(const o of i.ghsAttributes){t.schema.checkAttributeInSelection(e,o)&&r.add(i.name);KT(this._getValueFromFirstAllowedNode(o),i.classes)&&n.add(i.name)}const i=_i(e.getSelectedBlocks());if(i){const e=i.getAncestors({includeSelf:!0,parentFirst:!0});for(const i of e){if(t.schema.isLimit(i))break;if(t.schema.checkAttribute(i,"htmlAttributes"))for(const t of this._styleDefinitions.block){if(!t.modelElements.includes(i.name))continue;r.add(t.name);KT(i.getAttribute("htmlAttributes"),t.classes)&&n.add(t.name)}}}this.enabledStyles=Array.from(r).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(n).sort():[]}execute({styleName:t,forceValue:e}){if(!this.enabledStyles.includes(t))return void k("style-command-executed-with-incorrect-style-name");const n=this.editor.model,r=n.document.selection,i=this.editor.plugins.get("GeneralHtmlSupport"),o=[...this._styleDefinitions.inline,...this._styleDefinitions.block].find((({name:e})=>e==t)),s=void 0===e?!this.value.includes(o.name):e;n.change((()=>{let t;t=o.isBlock?function(t,e,n){const r=new Set;for(const i of t){const t=i.getAncestors({includeSelf:!0,parentFirst:!0});for(const i of t){if(n.isLimit(i))break;if(e.includes(i.name)){r.add(i);break}}}return r}(r.getSelectedBlocks(),o.modelElements,n.schema):[r];for(const e of t)s?i.addModelHtmlClass(o.element,o.classes,e):i.removeModelHtmlClass(o.element,o.classes,e)}))}_getValueFromFirstAllowedNode(t){const e=this.editor.model,n=e.schema,r=e.document.selection;if(r.isCollapsed)return r.getAttribute(t);for(const e of r.getRanges())for(const r of e.getItems())if(n.checkAttribute(r,t))return r.getAttribute(t);return null}}function KT(t,e){return!(!t||!t.classes)&&e.every((e=>t.classes.includes(e)))}class QT extends Di{static get pluginName(){return"StyleEditing"}static get requires(){return["GeneralHtmlSupport"]}init(){const t=this.editor,e=WT(t.plugins.get("DataSchema"),t.config.get("style.definitions"));t.commands.add("style",new ZT(t,e)),this._configureGHSDataFilter(e)}_configureGHSDataFilter({block:t,inline:e}){const n=this.editor.plugins.get("DataFilter");n.loadAllowedConfig(t.map(XT)),n.loadAllowedConfig(e.map(XT))}}function XT({element:t,classes:e}){return{name:t,classes:e}}const JT="subscript";class tS extends Di{static get pluginName(){return"SubscriptEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:JT}),t.model.schema.setAttributeProperties(JT,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:JT,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),t.commands.add(JT,new $b(t,JT))}}const eS="subscript";class nS extends Di{static get pluginName(){return"SubscriptUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(eS,(n=>{const r=t.commands.get(eS),i=new Zh(n);return i.set({label:e("Subscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(eS),t.editing.view.focus()})),i}))}}const rS="superscript";class iS extends Di{static get pluginName(){return"SuperscriptEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:rS}),t.model.schema.setAttributeProperties(rS,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:rS,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),t.commands.add(rS,new $b(t,rS))}}const oS="superscript";class sS extends Di{static get pluginName(){return"SuperscriptUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(oS,(n=>{const r=t.commands.get(oS),i=new Zh(n);return i.set({label:e("Superscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(oS),t.editing.view.focus()})),i}))}}function aS(t,e){const{viewElement:n,defaultValue:r,modelAttribute:i,styleName:o,reduceBoxSides:s=!1}=e;t.for("upcast").attributeToAttribute({view:{name:n,styles:{[o]:/[\s\S]+/}},model:{key:i,value:t=>{const e=t.getNormalizedStyle(o),n=s?uS(e):e;if(r!==n)return n}}})}function cS(t,e,n,r){t.for("upcast").add((t=>t.on("element:"+e,((t,e,i)=>{if(!e.modelRange)return;const o=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter((t=>e.viewItem.hasStyle(t)));if(!o.length)return;const s={styles:o};if(!i.consumable.test(e.viewItem,s))return;const a=[...e.modelRange.getItems({shallow:!0})].pop();i.consumable.consume(e.viewItem,s);const c={style:e.viewItem.getNormalizedStyle("border-style"),color:e.viewItem.getNormalizedStyle("border-color"),width:e.viewItem.getNormalizedStyle("border-width")},l={style:uS(c.style),color:uS(c.color),width:uS(c.width)};l.style!==r.style&&i.writer.setAttribute(n.style,l.style,a),l.color!==r.color&&i.writer.setAttribute(n.color,l.color,a),l.width!==r.width&&i.writer.setAttribute(n.width,l.width,a)}))))}function lS(t,{modelElement:e,modelAttribute:n,styleName:r}){t.for("downcast").attributeToAttribute({model:{name:e,key:n},view:t=>({key:"style",value:{[r]:t}})})}function dS(t,{modelAttribute:e,styleName:n}){t.for("downcast").add((t=>t.on(`attribute:${e}:table`,((t,e,r)=>{const{item:i,attributeNewValue:o}=e,{mapper:s,writer:a}=r;if(!r.consumable.consume(e.item,t.name))return;const c=[...s.toViewElement(i).getChildren()].find((t=>t.is("element","table")));o?a.setStyle(n,o,c):a.removeStyle(n,c)}))))}function uS(t){if(!t)return;return["top","right","bottom","left"].map((e=>t[e])).reduce(((t,e)=>t==e?t:null))||t}function hS(t,e,n,r,i=1){e>i?r.setAttribute(t,e,n):r.removeAttribute(t,n)}function gS(t,e,n={}){const r=t.createElement("tableCell",n);return t.insertElement("paragraph",r),t.insert(r,e),r}function fS(t,e){const n=e.parent.parent,r=parseInt(n.getAttribute("headingColumns")||0),{column:i}=t.getCellLocation(e);return!!r&&i<r}function pS(t,e,n){const{modelAttribute:r}=n;t.extend("tableCell",{allowAttributes:[r]}),aS(e,{viewElement:/^(td|th)$/,...n}),lS(e,{modelElement:"tableCell",...n})}function mS(){return t=>{t.on("element:table",((t,e,n)=>{const r=e.viewItem;if(!n.consumable.test(r,{name:!0}))return;const{rows:i,headingRows:o,headingColumns:s}=function(t){const e={headingRows:0,headingColumns:0},n=[],r=[];let i;for(const o of Array.from(t.getChildren()))if("tbody"===o.name||"thead"===o.name||"tfoot"===o.name){"thead"!==o.name||i||(i=o);const t=Array.from(o.getChildren()).filter((t=>t.is("element","tr")));for(const o of t)if("thead"===o.parent.name&&o.parent===i)e.headingRows++,n.push(o);else{r.push(o);const t=kS(o);t>e.headingColumns&&(e.headingColumns=t)}}return e.rows=[...n,...r],e}(r),a={};s&&(a.headingColumns=s),o&&(a.headingRows=o);const c=n.writer.createElement("table",a);if(n.safeInsert(c,e.modelCursor)){if(n.consumable.consume(r,{name:!0}),i.forEach((t=>n.convertItem(t,n.writer.createPositionAt(c,"end")))),n.convertChildren(r,n.writer.createPositionAt(c,"end")),c.isEmpty){const t=n.writer.createElement("tableRow");n.writer.insert(t,n.writer.createPositionAt(c,"end")),gS(n.writer,n.writer.createPositionAt(t,"end"))}n.updateConversionResult(c,e)}}))}}function bS(t){return e=>{e.on(`element:${t}`,((t,e,n)=>{if(e.modelRange&&e.viewItem.isEmpty){const t=e.modelRange.start.nodeAfter,r=n.writer.createPositionAt(t,0);n.writer.insertElement("paragraph",r)}}),{priority:"low"})}}function kS(t){let e=0,n=0;const r=Array.from(t.getChildren()).filter((t=>"th"===t.name||"td"===t.name));for(;n<r.length&&"th"===r[n].name;){const t=r[n];e+=parseInt(t.getAttribute("colspan")||1),n++}return e}class wS{constructor(t,e={}){this._table=t,this._startRow=void 0!==e.row?e.row:e.startRow||0,this._endRow=void 0!==e.row?e.row:e.endRow,this._startColumn=void 0!==e.column?e.column:e.startColumn||0,this._endColumn=void 0!==e.column?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const n=t.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const r=parseInt(n.getAttribute("colspan")||1),i=parseInt(n.getAttribute("rowspan")||1);(r>1||i>1)&&this._recordSpans(n,i,r),this._shouldSkipSlot()||(e=this._formatOutValue(n)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new yS(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,r=void 0!==this._endColumn&&this._column>this._endColumn;return t||e||n||r}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const r={cell:t,row:this._row,column:this._column};for(let t=this._row;t<this._row+e;t++)for(let e=this._column;e<this._column+n;e++)t==this._row&&e==this._column||this._markSpannedCell(t,e,r)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map);this._spannedCells.get(t).set(e,n)}}class yS{constructor(t,e,n,r){this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=r,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function _S(t,e={}){return(n,{writer:r})=>{const i=n.getAttribute("headingRows")||0,o=[];i>0&&o.push(r.createContainerElement("thead",null,r.createSlot((t=>t.is("element","tableRow")&&t.index<i)))),i<t.getRows(n)&&o.push(r.createContainerElement("tbody",null,r.createSlot((t=>t.is("element","tableRow")&&t.index>=i))));const s=r.createContainerElement("figure",{class:"table"},[r.createContainerElement("table",null,o),r.createSlot((t=>!t.is("element","tableRow")))]);return e.asWidget?function(t,e){return e.setCustomProperty("table",!0,t),Kp(t,e,{hasSelectionHandle:!0})}(s,r):s}}function vS(t={}){return(e,{writer:n})=>{const r=e.parent,i=r.parent,o=i.getChildIndex(r),s=new wS(i,{row:o}),a=i.getAttribute("headingRows")||0,c=i.getAttribute("headingColumns")||0;for(const r of s)if(r.cell==e){const e=r.row<a||r.column<c?"th":"td";return t.asWidget?tm(n.createEditableElement(e),n):n.createContainerElement(e)}}}function AS(t={}){return(e,{writer:n,consumable:r,mapper:i})=>{if(e.parent.is("element","tableCell")&&CS(e))return t.asWidget?n.createContainerElement("span",{class:"ck-table-bogus-paragraph"}):(r.consume(e,"insert"),void i.bindElements(e,i.toViewElement(e.parent)))}}function CS(t){return 1==t.parent.childCount&&![...t.getAttributeKeys()].length}class xS extends Ii{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=function(t,e){const n=t.getFirstPosition().parent,r=n===n.root?n:n.parent;return e.checkChild(r,"table")}(e,n)}execute(t={}){const e=this.editor.model,n=this.editor.plugins.get("TableUtils"),r=this.editor.config.get("table"),i=r.defaultHeadings.rows,o=r.defaultHeadings.columns;void 0===t.headingRows&&i&&(t.headingRows=i),void 0===t.headingColumns&&o&&(t.headingColumns=o),e.change((r=>{const i=n.createTable(r,t);e.insertObject(i,null,null,{findOptimalPosition:"auto"}),r.setSelection(r.createPositionAt(i.getNodeByPath([0,0,0]),0))}))}}class ES extends Ii{constructor(t,e={}){super(t),this.order=e.order||"below"}refresh(){const t=this.editor.model.document.selection,e=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=e}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),r="above"===this.order,i=n.getSelectionAffectedTableCells(e),o=n.getRowIndexes(i),s=r?o.first:o.last,a=i[0].findAncestor("table");n.insertRows(a,{at:r?s:s+1,copyStructureFromAbove:!r})}}class TS extends Ii{constructor(t,e={}){super(t),this.order=e.order||"right"}refresh(){const t=this.editor.model.document.selection,e=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t).length;this.isEnabled=e}execute(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),r="left"===this.order,i=n.getSelectionAffectedTableCells(e),o=n.getColumnIndexes(i),s=r?o.first:o.last,a=i[0].findAncestor("table");n.insertColumns(a,{columns:1,at:r?s:s+1})}}class SS extends Ii{constructor(t,e={}){super(t),this.direction=e.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=1===t.length}execute(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];"horizontally"===this.direction?t.splitCellHorizontally(e,2):t.splitCellVertically(e,2)}}function DS(t,e,n){const{startRow:r,startColumn:i,endRow:o,endColumn:s}=e,a=n.createElement("table"),c=o-r+1;for(let t=0;t<c;t++)n.insertElement("tableRow",a,"end");const l=[...new wS(t,{startRow:r,endRow:o,startColumn:i,endColumn:s,includeAllSlots:!0})];for(const{row:t,column:e,cell:c,isAnchor:d,cellAnchorRow:u,cellAnchorColumn:h}of l){const l=t-r,g=a.getChild(l);if(d){const r=n.cloneElement(c);n.append(r,g),NS(r,t,e,o,s,n)}else(u<r||h<i)&&gS(n,n.createPositionAt(g,"end"))}return function(t,e,n,r,i){const o=parseInt(e.getAttribute("headingRows")||0);if(o>0){hS("headingRows",o-n,t,i,0)}const s=parseInt(e.getAttribute("headingColumns")||0);if(s>0){hS("headingColumns",s-r,t,i,0)}}(a,t,r,i,n),a}function MS(t,e,n=0){const r=[],i=new wS(t,{startRow:n,endRow:e-1});for(const t of i){const{row:n,cellHeight:i}=t,o=n+i-1;n<e&&e<=o&&r.push(t)}return r}function IS(t,e,n){const r=t.parent,i=r.parent,o=r.index,s=e-o,a={},c=parseInt(t.getAttribute("rowspan"))-s;c>1&&(a.rowspan=c);const l=parseInt(t.getAttribute("colspan")||1);l>1&&(a.colspan=l);const d=o+s,u=[...new wS(i,{startRow:o,endRow:d,includeAllSlots:!0})];let h,g=null;for(const e of u){const{row:r,column:i,cell:o}=e;o===t&&void 0===h&&(h=i),void 0!==h&&h===i&&r===d&&(g=gS(n,e.getPositionBefore(),a))}return hS("rowspan",s,t,n),g}function BS(t,e){const n=[],r=new wS(t);for(const t of r){const{column:r,cellWidth:i}=t,o=r+i-1;r<e&&e<=o&&n.push(t)}return n}function LS(t,e,n,r){const i=n-e,o={},s=parseInt(t.getAttribute("colspan"))-i;s>1&&(o.colspan=s);const a=parseInt(t.getAttribute("rowspan")||1);a>1&&(o.rowspan=a);const c=gS(r,r.createPositionAfter(t),o);return hS("colspan",i,t,r),c}function NS(t,e,n,r,i,o){const s=parseInt(t.getAttribute("colspan")||1),a=parseInt(t.getAttribute("rowspan")||1);if(n+s-1>i){hS("colspan",i-n+1,t,o,1)}if(e+a-1>r){hS("rowspan",r-e+1,t,o,1)}}function OS(t,e){const n=e.getColumns(t),r=new Array(n).fill(0);for(const{column:e}of new wS(t))r[e]++;const i=r.reduce(((t,e,n)=>e?t:[...t,n]),[]);if(i.length>0){const n=i[i.length-1];return e.removeColumns(t,{at:n}),!0}return!1}function PS(t,e){const n=[],r=e.getRows(t);for(let e=0;e<r;e++){t.getChild(e).isEmpty&&n.push(e)}if(n.length>0){const r=n[n.length-1];return e.removeRows(t,{at:r}),!0}return!1}function RS(t,e){OS(t,e)||PS(t,e)}function zS(t,e){const n=Array.from(new wS(t,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(n.every((({cellHeight:t})=>1===t)))return e.lastRow;const r=n[0].cellHeight-1;return e.lastRow+r}function FS(t,e){const n=Array.from(new wS(t,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(n.every((({cellWidth:t})=>1===t)))return e.lastColumn;const r=n[0].cellWidth-1;return e.lastColumn+r}class jS extends Ii{constructor(t,e){super(t),this.direction=e.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){const t=this._getMergeableCell();this.value=t,this.isEnabled=!!t}execute(){const t=this.editor.model,e=t.document,n=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(e.selection)[0],r=this.value,i=this.direction;t.change((t=>{const e="right"==i||"down"==i,o=e?n:r,s=e?r:n,a=s.parent;!function(t,e,n){VS(t)||(VS(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end")));n.remove(t)}(s,o,t);const c=this.isHorizontal?"colspan":"rowspan",l=parseInt(n.getAttribute(c)||1),d=parseInt(r.getAttribute(c)||1);t.setAttribute(c,l+d,o),t.setSelection(t.createRangeIn(o));const u=this.editor.plugins.get("TableUtils");RS(a.findAncestor("table"),u)}))}_getMergeableCell(){const t=this.editor.model.document,e=this.editor.plugins.get("TableUtils"),n=e.getTableCellsContainingSelection(t.selection)[0];if(!n)return;const r=this.isHorizontal?function(t,e,n){const r=t.parent.parent,i="right"==e?t.nextSibling:t.previousSibling,o=(r.getAttribute("headingColumns")||0)>0;if(!i)return;const s="right"==e?t:i,a="right"==e?i:t,{column:c}=n.getCellLocation(s),{column:l}=n.getCellLocation(a),d=parseInt(s.getAttribute("colspan")||1),u=fS(n,s),h=fS(n,a);if(o&&u!=h)return;return c+d===l?i:void 0}(n,this.direction,e):function(t,e,n){const r=t.parent,i=r.parent,o=i.getChildIndex(r);if("down"==e&&o===n.getRows(i)-1||"up"==e&&0===o)return;const s=parseInt(t.getAttribute("rowspan")||1),a=i.getAttribute("headingRows")||0,c="down"==e&&o+s===a,l="up"==e&&o===a;if(a&&(c||l))return;const d=parseInt(t.getAttribute("rowspan")||1),u="down"==e?o+d:o,h=[...new wS(i,{endRow:u})],g=h.find((e=>e.cell===t)).column,f=h.find((({row:t,cellHeight:n,column:r})=>r===g&&("down"==e?t===u:u===t+n)));return f&&f.cell}(n,this.direction,e);if(!r)return;const i=this.isHorizontal?"rowspan":"colspan",o=parseInt(n.getAttribute(i)||1);return parseInt(r.getAttribute(i)||1)===o?r:void 0}}function VS(t){return 1==t.childCount&&t.getChild(0).is("element","paragraph")&&t.getChild(0).isEmpty}class $S extends Ii{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const r=n.findAncestor("table"),i=this.editor.plugins.get("TableUtils").getRows(r)-1,o=t.getRowIndexes(e),s=0===o.first&&o.last===i;this.isEnabled=!s}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),r=e.getRowIndexes(n),i=n[0],o=i.findAncestor("table"),s=e.getCellLocation(i).column;t.change((t=>{const n=r.last-r.first+1;e.removeRows(o,{at:r.first,rows:n});const i=function(t,e,n,r){const i=t.getChild(Math.min(e,r-1));let o=i.getChild(0),s=0;for(const t of i.getChildren()){if(s>n)return o;o=t,s+=parseInt(t.getAttribute("colspan")||1)}return o}(o,r.first,s,e.getRows(o));t.setSelection(t.createPositionAt(i,0))}))}}class HS extends Ii{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const r=n.findAncestor("table"),i=t.getColumns(r),{first:o,last:s}=t.getColumnIndexes(e);this.isEnabled=s-o<i-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=function(t,e){const n=e.getSelectionAffectedTableCells(t),r=n[0],i=n.pop(),o=[r,i];return r.isBefore(i)?o:o.reverse()}(this.editor.model.document.selection,t),r=e.parent.parent,i=[...new wS(r)],o={first:i.find((t=>t.cell===e)).column,last:i.find((t=>t.cell===n)).column},s=function(t,e,n,r){return parseInt(n.getAttribute("colspan")||1)>1?n:e.previousSibling||n.nextSibling?n.nextSibling||e.previousSibling:r.first?t.reverse().find((({column:t})=>t<r.first)).cell:t.reverse().find((({column:t})=>t>r.last)).cell}(i,e,n,o);this.editor.model.change((t=>{const e=o.last-o.first+1;this.editor.plugins.get("TableUtils").removeColumns(r,{at:o.first,columns:e}),t.setSelection(t.createPositionAt(s,0))}))}}class US extends Ii{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),r=n.length>0;this.isEnabled=r,this.value=r&&n.every((t=>this._isInHeading(t,t.parent.parent)))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,r=e.getSelectionAffectedTableCells(n.document.selection),i=r[0].findAncestor("table"),{first:o,last:s}=e.getRowIndexes(r),a=this.value?o:s+1,c=i.getAttribute("headingRows")||0;n.change((t=>{if(a){const e=MS(i,a,a>c?c:0);for(const{cell:n}of e)IS(n,a,t)}hS("headingRows",a,i,t,0)}))}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||0);return!!n&&t.parent.index<n}}class WS extends Ii{refresh(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),r=n.length>0;this.isEnabled=r,this.value=r&&n.every((t=>fS(e,t)))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,r=e.getSelectionAffectedTableCells(n.document.selection),i=r[0].findAncestor("table"),{first:o,last:s}=e.getColumnIndexes(r),a=this.value?o:s+1;n.change((t=>{if(a){const e=BS(i,a);for(const{cell:n,column:r}of e)LS(n,r,a,t)}hS("headingColumns",a,i,t,0)}))}}class qS extends Di{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,r=n.getChildIndex(e),i=new wS(n,{row:r});for(const{cell:e,row:n,column:r}of i)if(e===t)return{row:n,column:r}}createTable(t,e){const n=t.createElement("table"),r=parseInt(e.rows)||2,i=parseInt(e.columns)||2;return YS(t,n,0,r,i),e.headingRows&&hS("headingRows",Math.min(e.headingRows,r),n,t,0),e.headingColumns&&hS("headingColumns",Math.min(e.headingColumns,i),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,r=e.at||0,i=e.rows||1,o=void 0!==e.copyStructureFromAbove,s=e.copyStructureFromAbove?r-1:r,a=this.getRows(t),c=this.getColumns(t);if(r>a)throw new b("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change((e=>{const n=t.getAttribute("headingRows")||0;if(n>r&&hS("headingRows",n+i,t,e,0),!o&&(0===r||r===a))return void YS(e,t,r,i,c);const l=o?Math.max(r,s):r,d=new wS(t,{endRow:l}),u=new Array(c).fill(1);for(const{row:t,column:n,cellHeight:a,cellWidth:c,cell:l}of d){const d=t+a-1,h=t<=s&&s<=d;t<r&&r<=d?(e.setAttribute("rowspan",a+i,l),u[n]=-c):o&&h&&(u[n]=c)}for(let n=0;n<i;n++){const n=e.createElement("tableRow");e.insert(n,t,r);for(let t=0;t<u.length;t++){const r=u[t],i=e.createPositionAt(n,"end");r>0&&gS(e,i,r>1?{colspan:r}:null),t+=Math.abs(r)-1}}}))}insertColumns(t,e={}){const n=this.editor.model,r=e.at||0,i=e.columns||1;n.change((e=>{const n=t.getAttribute("headingColumns");r<n&&e.setAttribute("headingColumns",n+i,t);const o=this.getColumns(t);if(0===r||o===r){for(const n of t.getChildren())n.is("element","tableRow")&&GS(i,e,e.createPositionAt(n,r?"end":0));return}const s=new wS(t,{column:r,includeAllSlots:!0});for(const t of s){const{row:n,cell:o,cellAnchorColumn:a,cellAnchorRow:c,cellWidth:l,cellHeight:d}=t;if(a<r){e.setAttribute("colspan",l+i,o);const t=c+d-1;for(let e=n;e<=t;e++)s.skipRow(e)}else GS(i,e,t.getPositionBefore())}}))}removeRows(t,e){const n=this.editor.model,r=e.rows||1,i=this.getRows(t),o=e.at,s=o+r-1;if(s>i-1)throw new b("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change((e=>{const{cellsToMove:n,cellsToTrim:r}=function(t,e,n){const r=new Map,i=[];for(const{row:o,column:s,cellHeight:a,cell:c}of new wS(t,{endRow:n})){const t=o+a-1;if(o>=e&&o<=n&&t>n){const t=a-(n-o+1);r.set(s,{cell:c,rowspan:t})}if(o<e&&t>=e){let r;r=t>=n?n-e+1:t-e+1,i.push({cell:c,rowspan:a-r})}}return{cellsToMove:r,cellsToTrim:i}}(t,o,s);if(n.size){!function(t,e,n,r){const i=[...new wS(t,{includeAllSlots:!0,row:e})],o=t.getChild(e);let s;for(const{column:t,cell:e,isAnchor:a}of i)if(n.has(t)){const{cell:e,rowspan:i}=n.get(t),a=s?r.createPositionAfter(s):r.createPositionAt(o,0);r.move(r.createRangeOn(e),a),hS("rowspan",i,e,r),s=e}else a&&(s=e)}(t,s+1,n,e)}for(let n=s;n>=o;n--)e.remove(t.getChild(n));for(const{rowspan:t,cell:n}of r)hS("rowspan",t,n,e);!function(t,e,n,r){const i=t.getAttribute("headingRows")||0;if(e<i){hS("headingRows",n<i?i-(n-e+1):e,t,r,0)}}(t,o,s,e),OS(t,this)||PS(t,this)}))}removeColumns(t,e){const n=this.editor.model,r=e.at,i=e.columns||1,o=e.at+i-1;n.change((e=>{!function(t,e,n){const r=t.getAttribute("headingColumns")||0;if(r&&e.first<r){const i=Math.min(r-1,e.last)-e.first+1;n.setAttribute("headingColumns",r-i,t)}}(t,{first:r,last:o},e);for(let n=o;n>=r;n--)for(const{cell:r,column:i,cellWidth:o}of[...new wS(t)])i<=n&&o>1&&i+o>n?hS("colspan",o-1,r,e):i===n&&e.remove(r);PS(t,this)||OS(t,this)}))}splitCellVertically(t,e=2){const n=this.editor.model,r=t.parent.parent,i=parseInt(t.getAttribute("rowspan")||1),o=parseInt(t.getAttribute("colspan")||1);n.change((n=>{if(o>1){const{newCellsSpan:r,updatedSpan:s}=ZS(o,e);hS("colspan",s,t,n);const a={};r>1&&(a.colspan=r),i>1&&(a.rowspan=i);GS(o>e?e-1:o-1,n,n.createPositionAfter(t),a)}if(o<e){const s=e-o,a=[...new wS(r)],{column:c}=a.find((({cell:e})=>e===t)),l=a.filter((({cell:e,cellWidth:n,column:r})=>e!==t&&r===c||r<c&&r+n>c));for(const{cell:t,cellWidth:e}of l)n.setAttribute("colspan",e+s,t);const d={};i>1&&(d.rowspan=i),GS(s,n,n.createPositionAfter(t),d);const u=r.getAttribute("headingColumns")||0;u>c&&hS("headingColumns",u+s,r,n)}}))}splitCellHorizontally(t,e=2){const n=this.editor.model,r=t.parent,i=r.parent,o=i.getChildIndex(r),s=parseInt(t.getAttribute("rowspan")||1),a=parseInt(t.getAttribute("colspan")||1);n.change((n=>{if(s>1){const r=[...new wS(i,{startRow:o,endRow:o+s-1,includeAllSlots:!0})],{newCellsSpan:c,updatedSpan:l}=ZS(s,e);hS("rowspan",l,t,n);const{column:d}=r.find((({cell:e})=>e===t)),u={};c>1&&(u.rowspan=c),a>1&&(u.colspan=a);for(const t of r){const{column:e,row:r}=t,i=e===d,s=(r+o+l)%c==0;r>=o+l&&i&&s&&GS(1,n,t.getPositionBefore(),u)}}if(s<e){const r=e-s,c=[...new wS(i,{startRow:0,endRow:o})];for(const{cell:e,cellHeight:i,row:s}of c)if(e!==t&&s+i>o){const t=i+r;n.setAttribute("rowspan",t,e)}const l={};a>1&&(l.colspan=a),YS(n,i,o+1,r,1,l);const d=i.getAttribute("headingRows")||0;d>o&&hS("headingRows",d+r,i,n)}}))}getColumns(t){return[...t.getChild(0).getChildren()].reduce(((t,e)=>t+parseInt(e.getAttribute("colspan")||1)),0)}getRows(t){return Array.from(t.getChildren()).reduce(((t,e)=>e.is("element","tableRow")?t+1:t),0)}createTableWalker(t,e={}){return new wS(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const t=n.getContainedElement();t&&t.is("element","tableCell")&&e.push(t)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const t=n.start.findAncestor("tableCell");t&&e.push(t)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map((t=>t.parent.index));return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),n=[...new wS(e)].filter((e=>t.includes(e.cell))).map((t=>t.column));return this._getFirstLastIndexesObject(n)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let r=0;for(const i of t){const{row:t,column:o}=this.getCellLocation(i),s=parseInt(i.getAttribute("rowspan")||1),a=parseInt(i.getAttribute("colspan")||1);e.add(t),n.add(o),s>1&&e.add(t+s-1),a>1&&n.add(o+a-1),r+=s*a}const i=function(t,e){const n=Array.from(t.values()),r=Array.from(e.values()),i=Math.max(...n),o=Math.min(...n),s=Math.max(...r),a=Math.min(...r);return(i-o+1)*(s-a+1)}(e,n);return i==r}sortRanges(t){return Array.from(t).sort(KS)}_getFirstLastIndexesObject(t){const e=t.sort(((t,e)=>t-e));return{first:e[0],last:e[e.length-1]}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),r=parseInt(e.getAttribute("headingRows")||0);if(!this._areIndexesInSameSection(n,r))return!1;const i=parseInt(e.getAttribute("headingColumns")||0),o=this.getColumnIndexes(t);return this._areIndexesInSameSection(o,i)}_areIndexesInSameSection({first:t,last:e},n){return t<n===e<n}}function YS(t,e,n,r,i,o={}){for(let s=0;s<r;s++){const r=t.createElement("tableRow");t.insert(r,e,n),GS(i,t,t.createPositionAt(r,"end"),o)}}function GS(t,e,n,r={}){for(let i=0;i<t;i++)gS(e,n,r)}function ZS(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(t/e);return{newCellsSpan:n,updatedSpan:t-n*e+n}}function KS(t,e){const n=t.start,r=e.start;return n.isBefore(r)?-1:1}class QS extends Ii{refresh(){const t=this.editor.plugins.get(qS),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e,this.editor.plugins.get(qS))}execute(){const t=this.editor.model,e=this.editor.plugins.get(qS);t.change((n=>{const r=e.getSelectedTableCells(t.document.selection),i=r.shift(),{mergeWidth:o,mergeHeight:s}=function(t,e,n){let r=0,i=0;for(const t of e){const{row:e,column:o}=n.getCellLocation(t);r=tD(t,o,r,"colspan"),i=tD(t,e,i,"rowspan")}const{row:o,column:s}=n.getCellLocation(t);return{mergeWidth:r-s,mergeHeight:i-o}}(i,r,e);hS("colspan",o,i,n),hS("rowspan",s,i,n);for(const t of r)XS(t,i,n);RS(i.findAncestor("table"),e),n.setSelection(i,"in")}))}}function XS(t,e,n){JS(t)||(JS(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end"))),n.remove(t)}function JS(t){return 1==t.childCount&&t.getChild(0).is("element","paragraph")&&t.getChild(0).isEmpty}function tD(t,e,n,r){const i=parseInt(t.getAttribute(r)||1);return Math.max(n,e+i)}class eD extends Ii{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),r=e.getRowIndexes(n),i=n[0].findAncestor("table"),o=[];for(let e=r.first;e<=r.last;e++)for(const n of i.getChild(e).getChildren())o.push(t.createRangeOn(n));t.change((t=>{t.setSelection(o)}))}}class nD extends Ii{constructor(t){super(t),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),r=n[0],i=n.pop(),o=r.findAncestor("table"),s=t.getCellLocation(r),a=t.getCellLocation(i),c=Math.min(s.column,a.column),l=Math.max(s.column,a.column),d=[];for(const t of new wS(o,{startColumn:c,endColumn:l}))d.push(e.createRangeOn(t.cell));e.change((t=>{t.setSelection(d)}))}}function rD(t){t.document.registerPostFixer((e=>function(t,e){const n=e.document.differ.getChanges();let r=!1;const i=new Set;for(const e of n){let n;"table"==e.name&&"insert"==e.type&&(n=e.position.nodeAfter),"tableRow"!=e.name&&"tableCell"!=e.name||(n=e.position.findAncestor("table")),sD(e)&&(n=e.range.start.findAncestor("table")),n&&!i.has(n)&&(r=iD(n,t)||r,r=oD(n,t)||r,i.add(n))}return r}(e,t)))}function iD(t,e){let n=!1;const r=function(t){const e=parseInt(t.getAttribute("headingRows")||0),n=Array.from(t.getChildren()).reduce(((t,e)=>e.is("element","tableRow")?t+1:t),0),r=[];for(const{row:i,cell:o,cellHeight:s}of new wS(t)){if(s<2)continue;const t=i<e?e:n;if(i+s>t){const e=t-i;r.push({cell:o,rowspan:e})}}return r}(t);if(r.length){n=!0;for(const t of r)hS("rowspan",t.rowspan,t.cell,e,1)}return n}function oD(t,e){let n=!1;const r=function(t){const e=new Array(t.childCount).fill(0);for(const{rowIndex:n}of new wS(t,{includeAllSlots:!0}))e[n]++;return e}(t),i=[];for(const[e,n]of r.entries())!n&&t.getChild(e).is("element","tableRow")&&i.push(e);if(i.length){n=!0;for(const n of i.reverse())e.remove(t.getChild(n)),r.splice(n,1)}const o=r.filter(((e,n)=>t.getChild(n).is("element","tableRow"))),s=o[0];if(!o.every((t=>t===s))){const r=o.reduce(((t,e)=>e>t?e:t),0);for(const[i,s]of o.entries()){const o=r-s;if(o){for(let n=0;n<o;n++)gS(e,e.createPositionAt(t.getChild(i),"end"));n=!0}}}return n}function sD(t){const e="attribute"===t.type,n=t.attributeKey;return e&&("headingRows"===n||"colspan"===n||"rowspan"===n)}function aD(t){t.document.registerPostFixer((e=>function(t,e){const n=e.document.differ.getChanges();let r=!1;for(const e of n)"insert"==e.type&&"table"==e.name&&(r=cD(e.position.nodeAfter,t)||r),"insert"==e.type&&"tableRow"==e.name&&(r=lD(e.position.nodeAfter,t)||r),"insert"==e.type&&"tableCell"==e.name&&(r=dD(e.position.nodeAfter,t)||r),uD(e)&&(r=dD(e.position.parent,t)||r);return r}(e,t)))}function cD(t,e){let n=!1;for(const r of t.getChildren())r.is("element","tableRow")&&(n=lD(r,e)||n);return n}function lD(t,e){let n=!1;for(const r of t.getChildren())n=dD(r,e)||n;return n}function dD(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;const n=Array.from(t.getChildren()).filter((t=>t.is("$text")));for(const t of n)e.wrap(e.createRangeOn(t),"paragraph");return!!n.length}function uD(t){return!(!t.position||!t.position.parent.is("element","tableCell"))&&("insert"==t.type&&"$text"==t.name||"remove"==t.type)}function hD(t,e){if(!t.is("element","paragraph"))return!1;const n=e.toViewElement(t);return!!n&&CS(t)!==n.is("element","span")}var gD=n(3881),fD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(gD.Z,fD);gD.Z.locals;class pD extends Di{static get pluginName(){return"TableEditing"}static get requires(){return[qS]}init(){const t=this.editor,e=t.model,n=e.schema,r=t.conversion,i=t.plugins.get(qS);n.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),r.for("upcast").add((t=>{t.on("element:figure",((t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const r=function(t){for(const e of t.getChildren())if(e.is("element","table"))return e}(e.viewItem);if(!r||!n.consumable.test(r,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const i=_i(n.convertItem(r,e.modelCursor).modelRange.getItems());i?(n.convertChildren(e.viewItem,n.writer.createPositionAt(i,"end")),n.updateConversionResult(i,e)):n.consumable.revert(e.viewItem,{name:!0,classes:"table"})}))})),r.for("upcast").add(mS()),r.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:_S(i,{asWidget:!0})}),r.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:_S(i)}),r.for("upcast").elementToElement({model:"tableRow",view:"tr"}),r.for("upcast").add((t=>{t.on("element:tr",((t,e)=>{e.viewItem.isEmpty&&0==e.modelCursor.index&&t.stop()}),{priority:"high"})})),r.for("downcast").elementToElement({model:"tableRow",view:(t,{writer:e})=>t.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}),r.for("upcast").elementToElement({model:"tableCell",view:"td"}),r.for("upcast").elementToElement({model:"tableCell",view:"th"}),r.for("upcast").add(bS("td")),r.for("upcast").add(bS("th")),r.for("editingDowncast").elementToElement({model:"tableCell",view:vS({asWidget:!0})}),r.for("dataDowncast").elementToElement({model:"tableCell",view:vS()}),r.for("editingDowncast").elementToElement({model:"paragraph",view:AS({asWidget:!0}),converterPriority:"high"}),r.for("dataDowncast").elementToElement({model:"paragraph",view:AS(),converterPriority:"high"}),r.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),r.for("upcast").attributeToAttribute({model:{key:"colspan",value:mD("colspan")},view:"colspan"}),r.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),r.for("upcast").attributeToAttribute({model:{key:"rowspan",value:mD("rowspan")},view:"rowspan"}),t.data.mapper.on("modelToViewPosition",((t,e)=>{const n=e.modelPosition.parent,r=e.modelPosition.nodeBefore;if(!n.is("element","tableCell"))return;if(!r||!r.is("element","paragraph"))return;const i=e.mapper.toViewElement(r),o=e.mapper.toViewElement(n);i===o&&(e.viewPosition=e.mapper.findPositionIn(o,r.maxOffset))})),t.config.define("table.defaultHeadings.rows",0),t.config.define("table.defaultHeadings.columns",0),t.commands.add("insertTable",new xS(t)),t.commands.add("insertTableRowAbove",new ES(t,{order:"above"})),t.commands.add("insertTableRowBelow",new ES(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new TS(t,{order:"left"})),t.commands.add("insertTableColumnRight",new TS(t,{order:"right"})),t.commands.add("removeTableRow",new $S(t)),t.commands.add("removeTableColumn",new HS(t)),t.commands.add("splitTableCellVertically",new SS(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new SS(t,{direction:"horizontally"})),t.commands.add("mergeTableCells",new QS(t)),t.commands.add("mergeTableCellRight",new jS(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new jS(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new jS(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new jS(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new WS(t)),t.commands.add("setTableRowHeader",new US(t)),t.commands.add("selectTableRow",new eD(t)),t.commands.add("selectTableColumn",new nD(t)),rD(e),aD(e),this.listenTo(e.document,"change:data",(()=>{!function(t,e){const n=t.document.differ;for(const t of n.getChanges()){let n,r=!1;if("attribute"==t.type){const e=t.range.start.nodeAfter;if(!e||!e.is("element","table"))continue;if("headingRows"!=t.attributeKey&&"headingColumns"!=t.attributeKey)continue;n=e,r="headingRows"==t.attributeKey}else"tableRow"!=t.name&&"tableCell"!=t.name||(n=t.position.findAncestor("table"),r="tableRow"==t.name);if(!n)continue;const i=n.getAttribute("headingRows")||0,o=n.getAttribute("headingColumns")||0,s=new wS(n);for(const t of s){const n=t.row<i||t.column<o?"th":"td",s=e.mapper.toViewElement(t.cell);s&&s.is("element")&&s.name!=n&&e.reconvertItem(r?t.cell.parent:t.cell)}}}(e,t.editing),function(t,e){const n=t.document.differ,r=new Set;for(const t of n.getChanges()){const e="attribute"==t.type?t.range.start.parent:t.position.parent;e.is("element","tableCell")&&r.add(e)}for(const t of r.values()){const n=Array.from(t.getChildren()).filter((t=>hD(t,e.mapper)));for(const t of n)e.reconvertItem(t)}}(e,t.editing)}))}}function mD(t){return e=>{const n=parseInt(e.getAttribute(t));return Number.isNaN(n)||n<=0?null:n}}var bD=n(1613),kD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(bD.Z,kD);bD.Z.locals;class wD extends yh{constructor(t){super(t);const e=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ai,this.focusTracker=new vi,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",((t,e)=>`${e} × ${t}`)),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":e.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:e.to("label")}]}],on:{mousedown:e.to((t=>{t.preventDefault()})),click:e.to((()=>{this.fire("execute")}))}}),this.on("boxover",((t,e)=>{const{row:n,column:r}=e.target.dataset;this.items.get(10*(parseInt(n,10)-1)+(parseInt(r,10)-1)).focus()})),this.focusTracker.on("change:focusedElement",((t,e,n)=>{if(!n)return;const{row:r,column:i}=n.dataset;this.set({rows:parseInt(r),columns:parseInt(i)})})),this.on("change:columns",(()=>this._highlightGridBoxes())),this.on("change:rows",(()=>this._highlightGridBoxes()))}render(){super.render(),$h({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10});for(const t of this.items)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const t=this.rows,e=this.columns;this.items.map(((n,r)=>{const i=Math.floor(r/10)<t&&r%10<e;n.set("isOn",i)}))}_createGridButton(t,e,n,r){const i=new Zh(t);return i.set({label:r,class:"ck-insert-table-dropdown-grid-box"}),i.extendTemplate({attributes:{"data-row":e,"data-column":n}}),i}_createGridCollection(){const t=[];for(let e=0;e<100;e++){const n=Math.floor(e/10),r=e%10,i=`${n+1} × ${r+1}`;t.push(this._createGridButton(this.locale,n+1,r+1,i))}return this.createCollection(t)}}class yD extends Di{static get pluginName(){return"TableUI"}init(){const t=this.editor,e=this.editor.t,n="ltr"===t.locale.contentLanguageDirection;t.ui.componentFactory.add("insertTable",(n=>{const r=t.commands.get("insertTable"),i=Rg(n);let o;return i.bind("isEnabled").to(r),i.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:e("Insert table"),tooltip:!0}),i.on("change:isOpen",(()=>{o||(o=new wD(n),i.panelView.children.add(o),o.delegate("execute").to(i),i.on("execute",(()=>{t.execute("insertTable",{rows:o.rows,columns:o.columns}),t.editing.view.focus()})))})),i})),t.ui.componentFactory.add("tableColumn",(t=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',r,t)})),t.ui.componentFactory.add("tableRow",(t=>{const n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',n,t)})),t.ui.componentFactory.add("mergeTableCells",(t=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',r,t)}))}_prepareDropdown(t,e,n,r){const i=this.editor,o=Rg(r),s=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0}),o.bind("isEnabled").toMany(s,"isEnabled",((...t)=>t.some((t=>t)))),this.listenTo(o,"execute",(t=>{i.execute(t.source.commandName),t.source instanceof Xh||i.editing.view.focus()})),o}_prepareMergeSplitButtonDropdown(t,e,n,r){const i=this.editor,o=Rg(r,dg),s="mergeTableCells",a=i.commands.get(s),c=this._fillDropdownWithListOptions(o,n);return o.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([a,...c],"isEnabled",((...t)=>t.some((t=>t)))),this.listenTo(o.buttonView,"execute",(()=>{i.execute(s),i.editing.view.focus()})),this.listenTo(o,"execute",(t=>{i.execute(t.source.commandName),i.editing.view.focus()})),o}_fillDropdownWithListOptions(t,e){const n=this.editor,r=[],i=new yi;for(const t of e)_D(t,n,r,i);return Fg(t,i,n.ui.componentFactory),r}}function _D(t,e,n,r){const i=t.model=new hf(t.model),{commandName:o,bindIsOn:s}=t.model;if("button"===t.type||"switchbutton"===t.type){const t=e.commands.get(o);n.push(t),i.set({commandName:o}),i.bind("isEnabled").to(t),s&&i.bind("isOn").to(t,"value")}i.set({withText:!0}),r.add(t)}var vD=n(6945),AD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(vD.Z,AD);vD.Z.locals;class CD extends Di{static get pluginName(){return"TableSelection"}static get requires(){return[qS,qS]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",((t,e)=>this._handleDeleteContent(t,e)),{priority:"high"}),this.listenTo(n.document,"insertText",((t,e)=>this._handleInsertTextEvent(t,e)),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(qS),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return 0==n.length?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(qS),e=this.getSelectedTableCells();return e?this.editor.model.change((n=>{const r=n.createDocumentFragment(),{first:i,last:o}=t.getColumnIndexes(e),{first:s,last:a}=t.getRowIndexes(e),c=e[0].findAncestor("table");let l=a,d=o;if(t.isSelectionRectangular(e)){const t={firstColumn:i,lastColumn:o,firstRow:s,lastRow:a};l=zS(c,t),d=FS(c,t)}const u=DS(c,{startRow:s,startColumn:i,endRow:l,endColumn:d},n);return n.insert(u,r,0),r})):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change((t=>{t.setSelection(n.cells.map((e=>t.createRangeOn(e))),{backward:n.backward})}))}getFocusCell(){const t=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return t&&t.is("element","tableCell")?t:null}getAnchorCell(){const t=_i(this.editor.model.document.selection.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add((t=>t.on("selection",((t,n,r)=>{const i=r.writer;!function(t){for(const n of e)t.removeClass("ck-editor__editable_selected",n);e.clear()}(i);const o=this.getSelectedTableCells();if(!o)return;for(const t of o){const n=r.mapper.toViewElement(t);i.addClass("ck-editor__editable_selected",n),e.add(n)}const s=r.mapper.toViewElement(o[o.length-1]);i.setSelection(s,0)}),{priority:"lowest"})))}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",(()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change((n=>{const r=n.createPositionAt(e[0],0),i=t.model.schema.getNearestSelectionRange(r);n.setSelection(i)}))}}))}_handleDeleteContent(t,e){const n=this.editor.plugins.get(qS),[r,i]=e,o=this.editor.model,s=!i||"backward"==i.direction,a=n.getSelectedTableCells(r);a.length&&(t.stop(),o.change((t=>{const e=a[s?a.length-1:0];o.change((t=>{for(const e of a)o.deleteContent(t.createSelection(e,"in"))}));const n=o.schema.getNearestSelectionRange(t.createPositionAt(e,0));r.is("documentSelection")?t.setSelection(n):r.setTo(n)})))}_handleInsertTextEvent(t,e){const n=this.editor,r=n.model.document.selection,i=this.getSelectedTableCells(r);if(!i)return;const o=n.editing.view,s=n.editing.mapper,a=i.map((t=>o.createRangeOn(s.toViewElement(t))));e.selection=o.createSelection(a)}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),r=n.getCellLocation(t),i=n.getCellLocation(e),o=Math.min(r.row,i.row),s=Math.max(r.row,i.row),a=Math.min(r.column,i.column),c=Math.max(r.column,i.column),l=new Array(s-o+1).fill(null).map((()=>[])),d={startRow:o,endRow:s,startColumn:a,endColumn:c};for(const{row:e,cell:n}of new wS(t.findAncestor("table"),d))l[e-o].push(n);const u=i.row<r.row,h=i.column<r.column;return u&&l.reverse(),h&&l.forEach((t=>t.reverse())),{cells:l.flat(),backward:u||h}}}class xD extends Di{static get pluginName(){return"TableClipboard"}static get requires(){return[CD,qS]}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",((t,e)=>this._onCopyCut(t,e))),this.listenTo(e,"cut",((t,e)=>this._onCopyCut(t,e))),this.listenTo(t.model,"insertContent",((t,e)=>this._onInsertContent(t,...e)),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(t,e){const n=this.editor.plugins.get(CD);if(!n.getSelectedTableCells())return;if("cut"==t.name&&this.editor.isReadOnly)return;e.preventDefault(),t.stop();const r=this.editor.data,i=this.editor.editing.view.document,o=r.toView(n.getSelectionAsFragment());i.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:o,method:t.name})}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const r=this.editor.model,i=this.editor.plugins.get(qS);let o=ED(e,r);if(!o)return;const s=i.getSelectionAffectedTableCells(r.document.selection);s.length?(t.stop(),r.change((t=>{const e={width:i.getColumns(o),height:i.getRows(o)},n=function(t,e,n,r){const i=t[0].findAncestor("table"),o=r.getColumnIndexes(t),s=r.getRowIndexes(t),a={firstColumn:o.first,lastColumn:o.last,firstRow:s.first,lastRow:s.last},c=1===t.length;c&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,function(t,e,n,r){const i=r.getColumns(t),o=r.getRows(t);n>i&&r.insertColumns(t,{at:i,columns:n-i});e>o&&r.insertRows(t,{at:o,rows:e-o})}(i,a.lastRow+1,a.lastColumn+1,r));c||!r.isSelectionRectangular(t)?function(t,e,n){const{firstRow:r,lastRow:i,firstColumn:o,lastColumn:s}=e,a={first:r,last:i},c={first:o,last:s};SD(t,o,a,n),SD(t,s+1,a,n),TD(t,r,c,n),TD(t,i+1,c,n,r)}(i,a,n):(a.lastRow=zS(i,a),a.lastColumn=FS(i,a));return a}(s,e,t,i),r=n.lastRow-n.firstRow+1,a=n.lastColumn-n.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(r,e.height)-1,endColumn:Math.min(a,e.width)-1};o=DS(o,c,t);const l=s[0].findAncestor("table"),d=this._replaceSelectedCellsWithPasted(o,e,l,n,t);if(this.editor.plugins.get("TableSelection").isEnabled){const e=i.sortRanges(d.map((e=>t.createRangeOn(e))));t.setSelection(e)}else t.setSelection(d[0],0)}))):RS(o,i)}_replaceSelectedCellsWithPasted(t,e,n,r,i){const{width:o,height:s}=e,a=function(t,e,n){const r=new Array(n).fill(null).map((()=>new Array(e).fill(null)));for(const{column:e,row:n,cell:i}of new wS(t))r[n][e]=i;return r}(t,o,s),c=[...new wS(n,{startRow:r.firstRow,endRow:r.lastRow,startColumn:r.firstColumn,endColumn:r.lastColumn,includeAllSlots:!0})],l=[];let d;for(const t of c){const{row:e,column:n}=t;n===r.firstColumn&&(d=t.getPositionBefore());const c=e-r.firstRow,u=n-r.firstColumn,h=a[c%s][u%o],g=h?i.cloneElement(h):null,f=this._replaceTableSlotCell(t,g,d,i);f&&(NS(f,e,n,r.lastRow,r.lastColumn,i),l.push(f),d=i.createPositionAfter(f))}const u=parseInt(n.getAttribute("headingRows")||0),h=parseInt(n.getAttribute("headingColumns")||0),g=r.firstRow<u&&u<=r.lastRow,f=r.firstColumn<h&&h<=r.lastColumn;if(g){const t=TD(n,u,{first:r.firstColumn,last:r.lastColumn},i,r.firstRow);l.push(...t)}if(f){const t=SD(n,h,{first:r.firstRow,last:r.lastRow},i);l.push(...t)}return l}_replaceTableSlotCell(t,e,n,r){const{cell:i,isAnchor:o}=t;return o&&r.remove(i),e?(r.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){return ED(t,e)}}function ED(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(1==t.childCount&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const t of n.getItems())if(t.is("element","table")){const r=e.createRange(n.start,e.createPositionBefore(t));if(e.hasContent(r,{ignoreWhitespaces:!0}))return null;const i=e.createRange(e.createPositionAfter(t),n.end);return e.hasContent(i,{ignoreWhitespaces:!0})?null:t}return null}function TD(t,e,n,r,i=0){if(e<1)return;return MS(t,e,i).filter((({column:t,cellWidth:e})=>DD(t,e,n))).map((({cell:t})=>IS(t,e,r)))}function SD(t,e,n,r){if(e<1)return;return BS(t,e).filter((({row:t,cellHeight:e})=>DD(t,e,n))).map((({cell:t,column:n})=>LS(t,n,e,r)))}function DD(t,e,n){const r=t+e-1,{first:i,last:o}=n;return t>=i&&t<=o||t<i&&r>=i}class MD extends Di{static get pluginName(){return"TableKeyboard"}static get requires(){return[CD,qS]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"arrowKey",((...t)=>this._onArrowKey(...t)),{context:"table"}),this.listenTo(t,"tab",((...t)=>this._handleTabOnSelectedTable(...t)),{context:"figure"}),this.listenTo(t,"tab",((...t)=>this._handleTab(...t)),{context:["th","td"]})}_handleTabOnSelectedTable(t,e){const n=this.editor,r=n.model.document.selection.getSelectedElement();r&&r.is("element","table")&&(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change((t=>{t.setSelection(t.createRangeIn(r.getChild(0).getChild(0)))})))}_handleTab(t,e){const n=this.editor,r=this.editor.plugins.get(qS),i=n.model.document.selection,o=!e.shiftKey;let s=r.getTableCellsContainingSelection(i)[0];if(s||(s=this.editor.plugins.get("TableSelection").getFocusCell()),!s)return;e.preventDefault(),e.stopPropagation(),t.stop();const a=s.parent,c=a.parent,l=c.getChildIndex(a),d=a.getChildIndex(s),u=0===d;if(!o&&u&&0===l)return void n.model.change((t=>{t.setSelection(t.createRangeOn(c))}));const h=d===a.childCount-1,g=l===r.getRows(c)-1;if(o&&g&&h&&(n.execute("insertTableRowBelow"),l===r.getRows(c)-1))return void n.model.change((t=>{t.setSelection(t.createRangeOn(c))}));let f;if(o&&h){const t=c.getChild(l+1);f=t.getChild(0)}else if(!o&&u){const t=c.getChild(l-1);f=t.getChild(t.childCount-1)}else f=a.getChild(d+(o?1:-1));n.model.change((t=>{t.setSelection(t.createRangeIn(f))}))}_onArrowKey(t,e){const n=this.editor,r=fi(e.keyCode,n.locale.contentLanguageDirection);this._handleArrowKeys(r,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(qS),r=this.editor.model,i=r.document.selection,o=["right","down"].includes(t),s=n.getSelectedTableCells(i);if(s.length){let n;return n=e?this.editor.plugins.get("TableSelection").getFocusCell():o?s[s.length-1]:s[0],this._navigateFromCellInDirection(n,t,e),!0}const a=i.focus.findAncestor("tableCell");if(!a)return!1;if(!i.isCollapsed)if(e){if(i.isBackward==o&&!i.containsEntireContent(a))return!1}else{const t=i.getSelectedElement();if(!t||!r.schema.isObject(t))return!1}return!!this._isSelectionAtCellEdge(i,a,o)&&(this._navigateFromCellInDirection(a,t,e),!0)}_isSelectionAtCellEdge(t,e,n){const r=this.editor.model,i=this.editor.model.schema,o=n?t.getLastPosition():t.getFirstPosition();if(!i.getLimitElement(o).is("element","tableCell")){return r.createPositionAt(e,n?"end":0).isTouching(o)}const s=r.createSelection(o);return r.modifySelection(s,{direction:n?"forward":"backward"}),o.isEqual(s.focus)}_navigateFromCellInDirection(t,e,n=!1){const r=this.editor.model,i=t.findAncestor("table"),o=[...new wS(i,{includeAllSlots:!0})],{row:s,column:a}=o[o.length-1],c=o.find((({cell:e})=>e==t));let{row:l,column:d}=c;switch(e){case"left":d--;break;case"up":l--;break;case"right":d+=c.cellWidth;break;case"down":l+=c.cellHeight}if(l<0||l>s||d<0&&l<=0||d>a&&l>=s)return void r.change((t=>{t.setSelection(t.createRangeOn(i))}));d<0?(d=n?0:a,l--):d>a&&(d=n?a:0,l++);const u=o.find((t=>t.row==l&&t.column==d)).cell,h=["right","down"].includes(e),g=this.editor.plugins.get("TableSelection");if(n&&g.isEnabled){const e=g.getAnchorCell()||t;g.setCellSelection(e,u)}else{const t=r.createPositionAt(u,h?0:"end");r.change((e=>{e.setSelection(t)}))}}}class ID extends pa{constructor(t){super(t),this.domEventType=["mousemove","mouseleave"]}onDomEvent(t){this.fire(t.type,t)}}class BD extends Di{static get pluginName(){return"TableMouse"}static get requires(){return[CD,qS]}init(){this.editor.editing.view.addObserver(ID),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(qS);let n=!1;const r=t.plugins.get(CD);this.listenTo(t.editing.view.document,"mousedown",((i,o)=>{const s=t.model.document.selection;if(!this.isEnabled||!r.isEnabled)return;if(!o.domEvent.shiftKey)return;const a=r.getAnchorCell()||e.getTableCellsContainingSelection(s)[0];if(!a)return;const c=this._getModelTableCellFromDomEvent(o);c&&LD(a,c)&&(n=!0,r.setCellSelection(a,c),o.preventDefault())})),this.listenTo(t.editing.view.document,"mouseup",(()=>{n=!1})),this.listenTo(t.editing.view.document,"selectionChange",(t=>{n&&t.stop()}),{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,r=!1,i=!1;const o=t.plugins.get(CD);this.listenTo(t.editing.view.document,"mousedown",((t,n)=>{this.isEnabled&&o.isEnabled&&(n.domEvent.shiftKey||n.domEvent.ctrlKey||n.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(n)))})),this.listenTo(t.editing.view.document,"mousemove",((t,s)=>{if(!s.domEvent.buttons)return;if(!e)return;const a=this._getModelTableCellFromDomEvent(s);a&&LD(e,a)&&(n=a,r||n==e||(r=!0)),r&&(i=!0,o.setCellSelection(e,n),s.preventDefault())})),this.listenTo(t.editing.view.document,"mouseup",(()=>{r=!1,i=!1,e=null,n=null})),this.listenTo(t.editing.view.document,"selectionChange",(t=>{i&&t.stop()}),{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function LD(t,e){return t.parent.parent==e.parent.parent}var ND=n(6306),OD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(ND.Z,OD);ND.Z.locals;function PD(t){t.document.registerPostFixer((e=>function(t,e){const n=e.document.differ.getChanges();let r=!1;for(const e of n){if("insert"!=e.type)continue;if(e.position.parent.is("element","table")||"table"==e.name){const n="table"==e.name?e.position.nodeAfter:e.position.parent,i=Array.from(n.getChildren()).filter((t=>t.is("element","caption"))),o=i.shift();if(!o)continue;for(const e of i)t.move(t.createRangeIn(e),o,"end"),t.remove(e);o.nextSibling&&(t.move(t.createRangeOn(o),n,"end"),r=!0),r=!!i.length||r}}return r}(e,t)))}function RD(t){return!!t&&t.is("element","table")}function zD(t){for(const e of t.getChildren())if(e.is("element","caption"))return e;return null}function FD(t){const e=t.parent;return"figcaption"==t.name&&e&&"figure"==e.name&&e.hasClass("table")||"caption"==t.name&&e&&"table"==e.name?{name:!0}:null}function jD(t){const e=t.getSelectedElement();return e&&e.is("element","table")?e:t.getFirstPosition().findAncestor("table")}class VD extends Ii{refresh(){const t=jD(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled?this.value=!!zD(t):this.value=!1}execute(t={}){const{focusCaptionOnShow:e}=t;this.editor.model.change((t=>{this.value?this._hideTableCaption(t):this._showTableCaption(t,e)}))}_showTableCaption(t,e){const n=this.editor.model,r=jD(n.document.selection),i=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(r)||t.createElement("caption");n.insertContent(i,r,"end"),e&&t.setSelection(i,"in")}_hideTableCaption(t){const e=this.editor.model,n=jD(e.document.selection),r=this.editor.plugins.get("TableCaptionEditing"),i=zD(n);r._saveCaption(n,i),e.deleteContent(t.createSelection(i,"on"))}}class $D extends Di{static get pluginName(){return"TableCaptionEditing"}constructor(t){super(t),this._savedCaptionsMap=new WeakMap}init(){const t=this.editor,e=t.model.schema,n=t.editing.view,r=t.t;e.isRegistered("caption")?e.extend("caption",{allowIn:"table"}):e.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),t.commands.add("toggleTableCaption",new VD(this.editor)),t.conversion.for("upcast").elementToElement({view:FD,model:"caption"}),t.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>RD(t.parent)?e.createContainerElement("figcaption"):null}),t.conversion.for("editingDowncast").elementToElement({model:"caption",view:(t,{writer:e})=>{if(!RD(t.parent))return null;const i=e.createEditableElement("figcaption");return e.setCustomProperty("tableCaption",!0,i),$i({view:n,element:i,text:r("Enter table caption"),keepOnFocus:!0}),tm(i,e)}}),PD(t.model)}_getSavedCaption(t){const e=this._savedCaptionsMap.get(t);return e?gc.fromJSON(e):null}_saveCaption(t,e){this._savedCaptionsMap.set(t,e.toJSON())}}class HD extends Di{static get pluginName(){return"TableCaptionUI"}init(){const t=this.editor,e=t.editing.view,n=t.t;t.ui.componentFactory.add("toggleTableCaption",(r=>{const i=t.commands.get("toggleTableCaption"),o=new Zh(r);return o.set({icon:zh.caption,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),o.bind("label").to(i,"value",(t=>n(t?"Toggle caption off":"Toggle caption on"))),this.listenTo(o,"execute",(()=>{if(t.execute("toggleTableCaption",{focusCaptionOnShow:!0}),i.value){const n=function(t){const e=jD(t);return e?zD(e):null}(t.model.document.selection),r=t.editing.mapper.toViewElement(n);if(!r)return;e.scrollToTheSelection(),e.change((t=>{t.addClass("table__caption_highlighted",r)}))}t.editing.view.focus()})),o}))}}var UD=n(2128),WD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(UD.Z,WD);UD.Z.locals;var qD=n(7368),YD={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(qD.Z,YD);qD.Z.locals;class GD extends yh{constructor(t,e){super(t),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=e,this.focusTracker=new vi,this._focusables=new Ku,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Ai,this._stillTyping=!1,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",((t,e,n)=>this._setInputValue(n)))}render(){super.render(),this.keystrokes.listenTo(this.dropdownView.panelView.element)}focus(){this.inputView.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const t=this.locale,e=t.t,n=this.bindTemplate,r=this._createColorGrid(t),i=Rg(t),o=new yh,s=this._createRemoveColorButton();return o.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:n.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",n.if("value","ck-hidden",(t=>""!=t))]}}]}),i.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),i.buttonView.children.add(o),i.buttonView.label=e("Color picker"),i.buttonView.tooltip=!0,i.panelPosition="rtl"===t.uiLanguageDirection?"se":"sw",i.panelView.children.add(s),i.panelView.children.add(r),i.bind("isEnabled").to(this,"isReadOnly",(t=>!t)),this._focusables.add(s),this._focusables.add(r),this.focusTracker.add(s.element),this.focusTracker.add(r.element),i}_createInputTextView(){const t=this.locale,e=new nf(t);return e.extendTemplate({on:{blur:e.bindTemplate.to("blur")}}),e.value=this.value,e.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(e),e.on("input",(()=>{const t=e.element.value,n=this.options.colorDefinitions.find((e=>t===e.label));this._stillTyping=!0,this.value=n&&n.color||t})),e.on("blur",(()=>{this._stillTyping=!1,this._setInputValue(e.element.value)})),e.delegate("input").to(this),e}_createRemoveColorButton(){const t=this.locale,e=t.t,n=new Zh(t),r=this.options.defaultColorValue||"",i=e(r?"Restore default":"Remove color");return n.class="ck-input-color__remove-color",n.withText=!0,n.icon=zh.eraser,n.label=i,n.on("execute",(()=>{this.value=r,this.dropdownView.isOpen=!1,this.fire("input")})),n}_createColorGrid(t){const e=new og(t,{colorDefinitions:this.options.colorDefinitions,columns:this.options.columns});return e.on("execute",((t,e)=>{this.value=e.value,this.dropdownView.isOpen=!1,this.fire("input")})),e.bind("selectedColor").to(this,"value"),e}_setInputValue(t){if(!this._stillTyping){const e=ZD(t),n=this.options.colorDefinitions.find((t=>e===ZD(t.color)));this.inputView.value=n?n.label:t||""}}}function ZD(t){return t.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const KD=t=>""===t;function QD(t){return{none:t("None"),solid:t("Solid"),dotted:t("Dotted"),dashed:t("Dashed"),double:t("Double"),groove:t("Groove"),ridge:t("Ridge"),inset:t("Inset"),outset:t("Outset")}}function XD(t){return t('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function JD(t){return t('The value is invalid. Try "10px" or "2em" or simply "2".')}function tM(t){return t=t.trim(),KD(t)||hu(t)}function eM(t){return t=t.trim(),KD(t)||aM(t)||mu(t)||ku(t)}function nM(t){return t=t.trim(),KD(t)||aM(t)||mu(t)}function rM(t,e){const n=new yi,r=QD(t.t);for(const i in r){const o={type:"button",model:new hf({_borderStyleValue:i,label:r[i],withText:!0})};"none"===i?o.model.bind("isOn").to(t,"borderStyle",(t=>"none"===e?!t:t===i)):o.model.bind("isOn").to(t,"borderStyle",(t=>t===i)),n.add(o)}return n}function iM(t){const{view:e,icons:n,toolbar:r,labels:i,propertyName:o,nameToValue:s,defaultValue:a}=t;for(const t in i){const c=new Zh(e.locale);c.set({label:i[t],icon:n[t],tooltip:i[t]});const l=s?s(t):t;c.bind("isOn").to(e,o,(t=>{let e=t;return""===t&&a&&(e=a),l===e})),c.on("execute",(()=>{e[o]=l})),r.items.add(c)}}const oM=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function sM(t){return(e,n,r)=>{const i=new GD(e.locale,{colorDefinitions:(o=t.colorConfig,o.map((t=>({color:t.model,label:t.label,options:{hasBorder:t.hasBorder}})))),columns:t.columns,defaultColorValue:t.defaultColorValue});var o;return i.inputView.set({id:n,ariaDescribedById:r}),i.bind("isReadOnly").to(e,"isEnabled",(t=>!t)),i.bind("hasError").to(e,"errorText",(t=>!!t)),i.on("input",(()=>{e.errorText=null})),e.bind("isEmpty","isFocused").to(i),i}}function aM(t){const e=parseFloat(t);return!Number.isNaN(e)&&t===String(e)}var cM=n(9247),lM={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(cM.Z,lM);cM.Z.locals;class dM extends yh{constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("class",e.class||null),this.children=this.createCollection(),e.children&&e.children.forEach((t=>this.children.add(t))),this.set("_role",null),this.set("_ariaLabelledBy",null),e.labelView&&this.set({_role:"group",_ariaLabelledBy:e.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",n.to("class")],role:n.to("_role"),"aria-labelledby":n.to("_ariaLabelledBy")},children:this.children})}}var uM=n(4070),hM={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(uM.Z,hM);uM.Z.locals;var gM=n(6237),fM={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(gM.Z,fM);gM.Z.locals;var pM=n(5087),mM={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(pM.Z,mM);pM.Z.locals;const bM={left:zh.alignLeft,center:zh.alignCenter,right:zh.alignRight,justify:zh.alignJustify,top:zh.alignTop,middle:zh.alignMiddle,bottom:zh.alignBottom};class kM extends yh{constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:i,borderRowLabel:o}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:c,operatorLabel:l,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{horizontalAlignmentToolbar:h,verticalAlignmentToolbar:g,alignmentLabel:f}=this._createAlignmentFields();this.focusTracker=new vi,this.keystrokes=new Ai,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=i,this.backgroundInput=a,this.paddingInput=this._createPaddingField(),this.widthInput=c,this.heightInput=d,this.horizontalAlignmentToolbar=h,this.verticalAlignmentToolbar=g;const{saveButtonView:p,cancelButtonView:m}=this._createActionButtons();this.saveButtonView=p,this.cancelButtonView=m,this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Xg(t,{label:this.t("Cell properties")})),this.children.add(new dM(t,{labelView:o,children:[o,n,i,r],class:"ck-table-form__border-row"})),this.children.add(new dM(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new dM(t,{children:[new dM(t,{labelView:u,children:[u,c,l,d],class:"ck-table-form__dimensions-row"}),new dM(t,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new dM(t,{labelView:f,children:[f,h,g],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new dM(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Vh({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableCellProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=sM({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color}),r=this.locale,i=this.t,o=new qg(r);o.text=i("Border");const s=QD(i),a=new af(r,df);a.set({label:i("Style"),class:"ck-table-form__border-style"}),a.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:i("Style")}),a.fieldView.buttonView.bind("label").to(this,"borderStyle",(t=>s[t||"none"])),a.fieldView.on("execute",(t=>{this.borderStyle=t.source._borderStyleValue})),a.bind("isEmpty").to(this,"borderStyle",(t=>!t)),Fg(a.fieldView,rM(this,e.style));const c=new af(r,cf);c.set({label:i("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",wM),c.fieldView.on("input",(()=>{this.borderWidth=c.fieldView.element.value}));const l=new af(r,n);return l.set({label:i("Color"),class:"ck-table-form__border-color"}),l.fieldView.bind("value").to(this,"borderColor"),l.bind("isEnabled").to(this,"borderStyle",wM),l.fieldView.on("input",(()=>{this.borderColor=l.fieldView.value})),this.on("change:borderStyle",((t,n,r,i)=>{wM(r)||(this.borderColor="",this.borderWidth=""),wM(i)||(this.borderColor=e.color,this.borderWidth=e.width)})),{borderRowLabel:o,borderStyleDropdown:a,borderColorInput:l,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Background");const r=sM({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor}),i=new af(t,r);return i.set({label:e("Color"),class:"ck-table-cell-properties-form__background"}),i.fieldView.bind("value").to(this,"backgroundColor"),i.fieldView.on("input",(()=>{this.backgroundColor=i.fieldView.value})),{backgroundRowLabel:n,backgroundInput:i}}_createDimensionFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Dimensions");const r=new af(t,cf);r.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",(()=>{this.width=r.fieldView.element.value}));const i=new yh(t);i.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const o=new af(t,cf);return o.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),o.fieldView.bind("value").to(this,"height"),o.fieldView.on("input",(()=>{this.height=o.fieldView.element.value})),{dimensionsLabel:n,widthInput:r,operatorLabel:i,heightInput:o}}_createPaddingField(){const t=this.locale,e=this.t,n=new af(t,cf);return n.set({label:e("Padding"),class:"ck-table-cell-properties-form__padding"}),n.fieldView.bind("value").to(this,"padding"),n.fieldView.on("input",(()=>{this.padding=n.fieldView.element.value})),n}_createAlignmentFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Table cell text alignment");const r=new Cg(t),i="rtl"===this.locale.contentLanguageDirection;r.set({isCompact:!0,ariaLabel:e("Horizontal text alignment toolbar")}),iM({view:this,icons:bM,toolbar:r,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:t=>{if(i){if("left"===t)return"right";if("right"===t)return"left"}return t},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const o=new Cg(t);return o.set({isCompact:!0,ariaLabel:e("Vertical text alignment toolbar")}),iM({view:this,icons:bM,toolbar:o,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:r,verticalAlignmentToolbar:o,alignmentLabel:n}}_createActionButtons(){const t=this.locale,e=this.t,n=new Zh(t),r=new Zh(t),i=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return n.set({label:e("Save"),icon:zh.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(i,"errorText",((...t)=>t.every((t=>!t)))),r.set({label:e("Cancel"),icon:zh.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _horizontalAlignmentLabels(){const t=this.locale,e=this.t,n=e("Align cell text to the left"),r=e("Align cell text to the center"),i=e("Align cell text to the right"),o=e("Justify cell text");return"rtl"===t.uiLanguageDirection?{right:i,center:r,left:n,justify:o}:{left:n,center:r,right:i,justify:o}}get _verticalAlignmentLabels(){const t=this.t;return{top:t("Align cell text to the top"),middle:t("Align cell text to the middle"),bottom:t("Align cell text to the bottom")}}}function wM(t){return"none"!==t}function yM(t){const e=t.getSelectedElement();return e&&vM(e)?e:null}function _M(t){const e=t.getFirstPosition();if(!e)return null;let n=e.parent;for(;n;){if(n.is("element")&&vM(n))return n;n=n.parent}return null}function vM(t){return!!t.getCustomProperty("table")&&Zp(t)}const AM=xh.defaultPositions,CM=[AM.northArrowSouth,AM.northArrowSouthWest,AM.northArrowSouthEast,AM.southArrowNorth,AM.southArrowNorthWest,AM.southArrowNorthEast,AM.viewportStickyNorth];function xM(t,e){const n=t.plugins.get("ContextualBalloon");if(_M(t.editing.view.document.selection)){let r;r="cell"===e?TM(t):EM(t),n.updatePosition(r)}}function EM(t){const e=t.model.document.selection.getFirstPosition().findAncestor("table"),n=t.editing.mapper.toViewElement(e);return{target:t.editing.view.domConverter.mapViewToDom(n),positions:CM}}function TM(t){const e=t.editing.mapper,n=t.editing.view.domConverter,r=t.model.document.selection;if(r.rangeCount>1)return{target:()=>function(t,e){const n=e.editing.mapper,r=e.editing.view.domConverter,i=Array.from(t).map((t=>{const e=SM(t.start),i=n.toViewElement(e);return new Pr(r.mapViewToDom(i))}));return Pr.getBoundingRect(i)}(r.getRanges(),t),positions:CM};const i=SM(r.getFirstPosition()),o=e.toViewElement(i);return{target:n.mapViewToDom(o),positions:CM}}function SM(t){return t.nodeAfter&&t.nodeAfter.is("element","tableCell")?t.nodeAfter:t.findAncestor("tableCell")}function DM(t){if(!t||!O(t))return t;const{top:e,right:n,bottom:r,left:i}=t;return e==n&&n==r&&r==i?e:void 0}function MM(t,e){const n=parseFloat(t);return Number.isNaN(n)||String(n)!==String(t)?t:`${n}${e}`}function IM(t,e={}){const n=Object.assign({borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:""},t);return e.includeAlignmentProperty&&!n.alignment&&(n.alignment="center"),e.includePaddingProperty&&!n.padding&&(n.padding=""),e.includeVerticalAlignmentProperty&&!n.verticalAlignment&&(n.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!n.horizontalAlignment&&(n.horizontalAlignment=e.isRightToLeftContent?"right":"left"),n}const BM={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class LM extends Di{static get requires(){return[wf]}static get pluginName(){return"TableCellPropertiesUI"}constructor(t){super(t),t.config.define("table.tableCellProperties",{borderColors:oM,backgroundColors:oM})}init(){const t=this.editor,e=t.t;this._defaultTableCellProperties=IM(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection}),this._balloon=t.plugins.get(wf),this.view=this._createPropertiesView(),this._undoStepBatch=null,t.ui.componentFactory.add("tableCellProperties",(n=>{const r=new Zh(n);r.set({label:e("Cell properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>',tooltip:!0}),this.listenTo(r,"execute",(()=>this._showView()));const i=Object.values(BM).map((e=>t.commands.get(e)));return r.bind("isEnabled").toMany(i,"isEnabled",((...t)=>t.some((t=>t)))),r}))}destroy(){super.destroy(),this.view.destroy()}_createPropertiesView(){const t=this.editor,e=t.editing.view.document,n=t.config.get("table.tableCellProperties"),r=tg(n.borderColors),i=Jh(t.locale,r),o=tg(n.backgroundColors),s=Jh(t.locale,o),a=new kM(t.locale,{borderColors:i,backgroundColors:s,defaultTableCellProperties:this._defaultTableCellProperties}),c=t.t;a.render(),this.listenTo(a,"submit",(()=>{this._hideView()})),this.listenTo(a,"cancel",(()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()})),a.keystrokes.set("Esc",((t,e)=>{this._hideView(),e()})),this.listenTo(t.ui,"update",(()=>{_M(e.selection)?this._isViewVisible&&xM(t,"cell"):this._hideView()})),Fh({emitter:a,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const l=XD(c),d=JD(c);return a.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle",this._defaultTableCellProperties.borderStyle)),a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableCellBorderColor",errorText:l,validator:tM,defaultValue:this._defaultTableCellProperties.borderColor})),a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:nM,defaultValue:this._defaultTableCellProperties.borderWidth})),a.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:a.paddingInput,commandName:"tableCellPadding",errorText:d,validator:eM,defaultValue:this._defaultTableCellProperties.padding})),a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableCellWidth",errorText:d,validator:eM,defaultValue:this._defaultTableCellProperties.width})),a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableCellHeight",errorText:d,validator:eM,defaultValue:this._defaultTableCellProperties.height})),a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableCellBackgroundColor",errorText:l,validator:tM,defaultValue:this._defaultTableCellProperties.backgroundColor})),a.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment",this._defaultTableCellProperties.horizontalAlignment)),a.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment",this._defaultTableCellProperties.verticalAlignment)),a}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableCellBorderStyle");Object.entries(BM).map((([e,n])=>{const r=this._defaultTableCellProperties[e]||"";return[e,t.get(n).value||r]})).forEach((([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}))}_showView(){const t=this.editor;this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:TM(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){if(!this._isViewInBalloon)return;const t=this.editor;this.stopListening(t.ui,"update"),this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}get _isViewVisible(){return this._balloon.visibleView===this.view}get _isViewInBalloon(){return this._balloon.hasView(this.view)}_getPropertyChangeCallback(t,e){return(n,r,i,o)=>{(o||e!==i)&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:r,errorText:i,defaultValue:o}=t,s=Da((()=>{n.errorText=i}),500);return(t,i,a,c)=>{s.cancel(),(c||o!==a)&&(r(a)?(this.editor.execute(e,{value:a,batch:this._undoStepBatch}),n.errorText=null):s())}}}class NM extends Ii{constructor(t,e,n){super(t),this.attributeName=e,this._defaultValue=n}refresh(){const t=this.editor,e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t.model.document.selection);this.isEnabled=!!e.length,this.value=this._getSingleValue(e)}execute(t={}){const{value:e,batch:n}=t,r=this.editor.model,i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(r.document.selection),o=this._getValueToSet(e);r.enqueueChange(n,(t=>{o?i.forEach((e=>t.setAttribute(this.attributeName,o,e))):i.forEach((e=>t.removeAttribute(this.attributeName,e)))}))}_getAttribute(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}_getSingleValue(t){const e=this._getAttribute(t[0]);return t.every((t=>this._getAttribute(t)===e))?e:void 0}}class OM extends NM{constructor(t,e){super(t,"tableCellWidth",e)}_getValueToSet(t){if((t=MM(t,"px"))!==this._defaultValue)return t}}class PM extends Di{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[pD]}init(){const t=this.editor,e=IM(t.config.get("table.tableCellProperties.defaultProperties"));pS(t.model.schema,t.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:e.width}),t.commands.add("tableCellWidth",new OM(t,e.width))}}class RM extends NM{constructor(t,e){super(t,"tableCellPadding",e)}_getAttribute(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){if((t=MM(t,"px"))!==this._defaultValue)return t}}class zM extends NM{constructor(t,e){super(t,"tableCellHeight",e)}_getValueToSet(t){return(t=MM(t,"px"))===this._defaultValue?null:t}}class FM extends NM{constructor(t,e){super(t,"tableCellBackgroundColor",e)}}class jM extends NM{constructor(t,e){super(t,"tableCellVerticalAlignment",e)}}class VM extends NM{constructor(t,e){super(t,"tableCellHorizontalAlignment",e)}}class $M extends NM{constructor(t,e){super(t,"tableCellBorderStyle",e)}_getAttribute(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class HM extends NM{constructor(t,e){super(t,"tableCellBorderColor",e)}_getAttribute(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class UM extends NM{constructor(t,e){super(t,"tableCellBorderWidth",e)}_getAttribute(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){if((t=MM(t,"px"))!==this._defaultValue)return t}}const WM=/^(top|middle|bottom)$/,qM=/^(left|center|right|justify)$/;class YM extends Di{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[pD,PM]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableCellProperties.defaultProperties",{});const r=IM(t.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:"rtl"===t.locale.contentLanguageDirection});t.data.addStyleProcessorRules(Lu),function(t,e,n){const r={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};t.extend("tableCell",{allowAttributes:Object.values(r)}),cS(e,"td",r,n),cS(e,"th",r,n),lS(e,{modelElement:"tableCell",modelAttribute:r.style,styleName:"border-style"}),lS(e,{modelElement:"tableCell",modelAttribute:r.color,styleName:"border-color"}),lS(e,{modelElement:"tableCell",modelAttribute:r.width,styleName:"border-width"})}(e,n,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),t.commands.add("tableCellBorderStyle",new $M(t,r.borderStyle)),t.commands.add("tableCellBorderColor",new HM(t,r.borderColor)),t.commands.add("tableCellBorderWidth",new UM(t,r.borderWidth)),pS(e,n,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:r.height}),t.commands.add("tableCellHeight",new zM(t,r.height)),t.data.addStyleProcessorRules(Uu),pS(e,n,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:r.padding}),t.commands.add("tableCellPadding",new RM(t,r.padding)),t.data.addStyleProcessorRules(Bu),pS(e,n,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),t.commands.add("tableCellBackgroundColor",new FM(t,r.backgroundColor)),function(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:t=>({key:"style",value:{"text-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":qM}},model:{key:"tableCellHorizontalAlignment",value:t=>{const e=t.getStyle("text-align");return e===n?null:e}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:qM}},model:{key:"tableCellHorizontalAlignment",value:t=>{const e=t.getAttribute("align");return e===n?null:e}}})}(e,n,r.horizontalAlignment),t.commands.add("tableCellHorizontalAlignment",new VM(t,r.horizontalAlignment)),function(t,e,n){t.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:t=>({key:"style",value:{"vertical-align":t}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":WM}},model:{key:"tableCellVerticalAlignment",value:t=>{const e=t.getStyle("vertical-align");return e===n?null:e}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:WM}},model:{key:"tableCellVerticalAlignment",value:t=>{const e=t.getAttribute("valign");return e===n?null:e}}})}(e,n,r.verticalAlignment),t.commands.add("tableCellVerticalAlignment",new jM(t,r.verticalAlignment))}}class GM extends Ii{constructor(t,e,n){super(t),this.attributeName=e,this._defaultValue=n}refresh(){const t=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!t,this.value=this._getValue(t)}execute(t={}){const e=this.editor.model,n=e.document.selection,{value:r,batch:i}=t,o=n.getFirstPosition().findAncestor("table"),s=this._getValueToSet(r);e.enqueueChange(i,(t=>{s?t.setAttribute(this.attributeName,s,o):t.removeAttribute(this.attributeName,o)}))}_getValue(t){if(!t)return;const e=t.getAttribute(this.attributeName);return e!==this._defaultValue?e:void 0}_getValueToSet(t){if(t!==this._defaultValue)return t}}class ZM extends GM{constructor(t,e){super(t,"tableWidth",e)}refresh(){this.isEnabled=!0}execute(t={}){const e=this.editor.model,n=t.table||e.document.selection.getSelectedElement(),{tableWidth:r,columnWidths:i}=t;e.change((t=>{r?(t.setAttribute(this.attributeName,r,n),t.setAttribute("columnWidths",i,n)):t.removeAttribute(this.attributeName,n)}))}}class KM extends GM{constructor(t,e){super(t,"columnWidths",e)}refresh(){this.isEnabled=!0}execute(t={}){const e=this.editor.model,n=t.table||e.document.selection.getSelectedElement(),{columnWidths:r}=t;e.change((t=>{r?t.setAttribute(this.attributeName,r,n):t.removeAttribute(this.attributeName,n)}))}}function QM(t,e){return 4e3/XM(t,e)}function XM(t,e){const n=JM(t,"tbody",e)||JM(t,"thead",e);return tI(e.editing.view.domConverter.mapViewToDom(n))}function JM(t,e,n){return[...[...n.editing.mapper.toViewElement(t).getChildren()].find((t=>t.is("element","table"))).getChildren()].find((t=>t.is("element",e)))}function tI(t){const e=Mr.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function eI(t){const e=Math.pow(10,2),n=parseFloat(t);return Math.round(n*e)/e}function nI(t){return t.map((t=>parseFloat(t))).filter((t=>!Number.isNaN(t))).reduce(((t,e)=>t+e),0)}function rI(t){t=function(t){const e=t.filter((t=>"auto"===t)).length;if(0===e)return t.map((t=>eI(t)));const n=nI(t),r=Math.max((100-n)/e,5);return t.map((t=>"auto"===t?r:t)).map((t=>eI(t)))}(t);const e=nI(t);return 100===e?t:t.map((t=>eI(100*t/e))).map(((t,e,n)=>{if(!(e===n.length-1))return t;return eI(t+100-nI(n))}))}function iI(t,e){let n=[...e.getChildren()].find((t=>t.hasClass("ck-table-column-resizer")));n||(n=t.createUIElement("div",{class:"ck-table-column-resizer"}),t.insert(t.createPositionAt(e,"end"),n))}function oI(t){const e=Mr.window.getComputedStyle(t);return"border-box"===e.boxSizing?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function sI(){return t=>t.on("attribute:columnWidths:table",((t,e,n)=>{const r=n.writer,i=e.item,o=[...n.mapper.toViewElement(i).getChildren()].find((t=>t.is("element","table")));e.attributeNewValue?(!function(t,e,n){const r=n.split(",");let i=[...e.getChildren()].find((t=>t.is("element","colgroup")));if(i)for(const e of[...i.getChildren()])t.remove(e);else i=t.createContainerElement("colgroup");for(const e of Array(r.length).keys()){const n=t.createEmptyElement("col");t.setStyle("width",r[e],n),t.insert(t.createPositionAt(i,"end"),n)}t.insert(t.createPositionAt(e,"start"),i)}(r,o,e.attributeNewValue),r.addClass("ck-table-resized",o)):(!function(t,e){const n=[...e.getChildren()].find((t=>t.is("element","colgroup")));t.remove(n)}(r,o),r.removeClass("ck-table-resized",o))}))}class aI extends Di{static get requires(){return[pD,qS]}static get pluginName(){return"TableColumnResizeEditing"}constructor(t){super(t),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=Object.create(Er),this._tableUtilsPlugin=t.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",((e,n,r)=>{t.editing.view.change((e=>{e[r?"removeClass":"addClass"]("ck-column-resize_disabled",t.editing.view.document.getRoot())}))}))}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerColgroupFixer(),this._registerResizerInserter();const t=this.editor,e=t.plugins.get("TableColumnResize");t.commands.add("resizeTableWidth",new ZM(t)),t.commands.add("resizeColumnWidths",new KM(t));const n=t.commands.get("resizeTableWidth"),r=t.commands.get("resizeColumnWidths");this.bind("_isResizingAllowed").to(t,"isReadOnly",e,"isEnabled",n,"isEnabled",r,"isEnabled",((t,e,n,r)=>!t&&e&&n&&r))}destroy(){this._domEmitter.stopListening(),super.destroy()}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth","columnWidths"]})}_registerPostFixer(){const t=this.editor.model;function e(t,e,n){const r=n._tableUtilsPlugin.getColumns(e);if(0===r-t.length)return;const i=function(t,e){const n=new Set;for(const r of t.getChanges())if("insert"==r.type&&r.position.nodeAfter&&"tableCell"==r.position.nodeAfter.name&&r.position.nodeAfter.getAncestors().includes(e))n.add(r.position.nodeAfter);else if("remove"==r.type){const t=r.position.nodeBefore||r.position.nodeAfter;"tableCell"==t.name&&t.getAncestors().includes(e)&&n.add(t)}return n}(n.editor.model.document.differ,e);for(const s of i){const i=r-t.length;if(0===i)continue;const a=i>0,c=n._tableUtilsPlugin.getCellLocation(s).column;if(a){const r=QM(e,n.editor),s=(o=r,Array(i).fill(o));t.splice(c,0,...s)}else{const e=t.splice(c,Math.abs(i));t[c]+=nI(e)}}var o}t.document.registerPostFixer((n=>{let r=!1;for(const i of function(t){const e=new Set;for(const n of t.document.differ.getChanges()){let r=null;switch(n.type){case"insert":r=["table","tableRow","tableCell"].includes(n.name)?n.position:null;break;case"remove":r=["tableRow","tableCell"].includes(n.name)?n.position:null;break;case"attribute":n.range.start.nodeAfter&&(r=["table","tableRow","tableCell"].includes(n.range.start.nodeAfter.name)?n.range.start:null)}if(!r)continue;const i=r.nodeAfter&&"table"===r.nodeAfter.name?r.nodeAfter:r.findAncestor("table");for(const n of t.createRangeOn(i).getItems())n.is("element")&&"table"===n.name&&n.hasAttribute("columnWidths")&&e.add(n)}return e}(t)){const t=rI(i.getAttribute("columnWidths").split(","));e(t,i,this);const o=t.map((t=>`${t}%`)).join(",");i.getAttribute("columnWidths")!==o&&(n.setAttribute("columnWidths",o,i),r=!0)}return r}))}_registerConverters(){const t=this.editor.conversion;var e;t.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:t=>t.getStyle("width")}}),t.for("upcast").add((e=this._tableUtilsPlugin,t=>t.on("element:colgroup",((t,n,r)=>{const i=n.viewItem;if(!r.consumable.test(i,{name:!0}))return;r.consumable.consume(i,{name:!0});const o=n.modelCursor.findAncestor("table"),s=e.getColumns(o);let a=[...Array(s).keys()].map((t=>{const e=i.getChild(t);if(!e||!e.is("element","col"))return"auto";const n=e.getStyle("width");return n&&n.endsWith("%")?n:"auto"}));a.includes("auto")&&(a=rI(a).map((t=>t+"%"))),r.writer.setAttribute("columnWidths",a.join(","),o)})))),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:t=>({name:"figure",key:"style",value:{width:t}})}),t.for("downcast").add(sI())}_registerResizingListeners(){const t=this.editor.editing.view;t.addObserver(ID),t.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(Mr.window.document,"mousemove",Em(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(Mr.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(t,e){const n=e.target;if(!n.hasClass("ck-table-column-resizer"))return;if(!this._isResizingAllowed)return;e.preventDefault(),t.stop();const r=this.editor,i=function(t,e,n){const r=Array(e.getColumns(t)),i=new wS(t);for(const t of i){const e=n.editing.mapper.toViewElement(t.cell),i=oI(n.editing.view.domConverter.mapViewToDom(e));(!r[t.column]||i<r[t.column])&&(r[t.column]=eI(i))}return r}(r.editing.mapper.toModelElement(n.findAncestor("figure")),this._tableUtilsPlugin,r),o=n.findAncestor("table"),s=r.editing.view;[...o.getChildren()].find((t=>t.is("element","colgroup")))||s.change((t=>{!function(t,e,n){const r=t.createContainerElement("colgroup");for(let n=0;n<e.length;n++){const i=t.createEmptyElement("col"),o=`${eI(e[n]/nI(e)*100)}%`;t.setStyle("width",o,i),t.insert(t.createPositionAt(r,"end"),i)}t.insert(t.createPositionAt(n,"start"),r)}(t,i,o)})),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,i),s.change((t=>function(t,e,n){const r=n.widths.viewFigureWidth/n.widths.viewFigureParentWidth;t.addClass("ck-table-resized",e),t.addClass("ck-table-column-resizer__active",n.elements.viewResizer),t.setStyle("width",`${eI(100*r)}%`,e.findAncestor("figure"))}(t,o,this._resizingData)))}_onMouseMoveHandler(t,e){if(!this._isResizingActive)return;if(!this._isResizingAllowed)return void this._onMouseUpHandler();const{columnPosition:n,flags:{isRightEdge:r,isTableCentered:i,isLtrContent:o},elements:{viewFigure:s,viewLeftColumn:a,viewRightColumn:c},widths:{viewFigureParentWidth:l,tableWidth:d,leftColumnWidth:u,rightColumnWidth:h}}=this._resizingData,g=40-u,f=r?l-d:h-40,p=(o?1:-1)*(r&&i?2:1),m=(b=(e.clientX-n)*p,k=Math.min(g,0),w=Math.max(f,0),eI(b<=k?k:b>=w?w:b));var b,k,w;0!==m&&this.editor.editing.view.change((t=>{const e=eI(100*(u+m)/d);if(t.setStyle("width",`${e}%`,a),r){const e=eI(100*(d+m)/l);t.setStyle("width",`${e}%`,s)}else{const e=eI(100*(h-m)/d);t.setStyle("width",`${e}%`,c)}}))}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:t,modelTable:e,viewFigure:n,viewColgroup:r}=this._resizingData.elements,i=this.editor,o=i.editing.view,s=e.getAttribute("columnWidths"),a=[...r.getChildren()].map((t=>t.getStyle("width"))).join(","),c=s!==a,l=e.getAttribute("tableWidth"),d=n.getStyle("width"),u=l!==d;(c||u)&&(this._isResizingAllowed?u?i.execute("resizeTableWidth",{table:e,tableWidth:`${eI(d)}%`,columnWidths:a}):i.execute("resizeColumnWidths",{columnWidths:a,table:e}):o.change((t=>{if(s){const e=s.split(",");for(const n of r.getChildren())t.setStyle("width",e.shift(),n)}else t.remove(r);u&&(l?t.setStyle("width",l,n):t.removeStyle("width",n)),s||l||t.removeClass("ck-table-resized",[...n.getChildren()].find((t=>"table"===t.name)))}))),o.change((e=>{e.removeClass("ck-table-column-resizer__active",t)})),this._isResizingActive=!1,this._resizingData=null}_getResizingData(t,e){const n=this.editor,r=t.domEvent.clientX,i=t.target,o=i.findAncestor("td")||i.findAncestor("th"),s=n.editing.mapper.toModelElement(o),a=s.findAncestor("table"),c=function(t,e){const n=e.getCellLocation(t).column;return{leftEdge:n,rightEdge:n+(t.getAttribute("colspan")||1)-1}}(s,this._tableUtilsPlugin).rightEdge,l=c===this._tableUtilsPlugin.getColumns(a)-1,d=!a.hasAttribute("tableAlignment"),u="rtl"!==n.locale.contentLanguageDirection,h=o.findAncestor("table"),g=h.findAncestor("figure"),f=[...h.getChildren()].find((t=>t.is("element","colgroup"))),p=f.getChild(c),m=l?void 0:f.getChild(c+1);return{columnPosition:r,flags:{isRightEdge:l,isTableCentered:d,isLtrContent:u},elements:{viewResizer:i,modelTable:a,viewFigure:g,viewColgroup:f,viewLeftColumn:p,viewRightColumn:m},widths:{viewFigureParentWidth:tI(n.editing.view.domConverter.mapViewToDom(g.parent)),viewFigureWidth:tI(n.editing.view.domConverter.mapViewToDom(g)),tableWidth:XM(a,n),leftColumnWidth:e[c],rightColumnWidth:l?void 0:e[c+1]}}}_registerColgroupFixer(){const t=this.editor;this.listenTo(t.editing.view.document,"layoutChanged",(()=>{const e=t.editing.view.document.selection.getFirstPosition().getAncestors().reverse().find((t=>"table"===t.name)),n=e&&[...e.getChildren()].find((t=>t.is("element","colgroup"))),r=t.model.document.selection.getFirstPosition().findAncestor("table");r&&r.hasAttribute("columnWidths")&&e&&!n&&t.editing.reconvertItem(r)}),{priority:"low"})}_registerResizerInserter(){const t=this.editor.editing.view;t.on("render",(()=>{for(const e of t.createRangeIn(t.document.getRoot()))["td","th"].includes(e.item.name)&&t.change((t=>{iI(t,e.item)}))}),{priority:"lowest"})}}var cI=n(4101),lI={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(cI.Z,lI);cI.Z.locals;class dI extends GM{constructor(t,e){super(t,"tableBackgroundColor",e)}}class uI extends GM{constructor(t,e){super(t,"tableBorderColor",e)}_getValue(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class hI extends GM{constructor(t,e){super(t,"tableBorderStyle",e)}_getValue(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}}class gI extends GM{constructor(t,e){super(t,"tableBorderWidth",e)}_getValue(t){if(!t)return;const e=DM(t.getAttribute(this.attributeName));return e!==this._defaultValue?e:void 0}_getValueToSet(t){if((t=MM(t,"px"))!==this._defaultValue)return t}}class fI extends GM{constructor(t,e){super(t,"tableWidth",e)}_getValueToSet(t){if((t=MM(t,"px"))!==this._defaultValue)return t}}class pI extends GM{constructor(t,e){super(t,"tableHeight",e)}_getValueToSet(t){return(t=MM(t,"px"))===this._defaultValue?null:t}}class mI extends GM{constructor(t,e){super(t,"tableAlignment",e)}}const bI=/^(left|center|right)$/,kI=/^(left|none|right)$/;class wI extends Di{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[pD]}init(){const t=this.editor,e=t.model.schema,n=t.conversion;t.config.define("table.tableProperties.defaultProperties",{});const r=IM(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});t.data.addStyleProcessorRules(Lu),function(t,e,n){const r={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};t.extend("table",{allowAttributes:Object.values(r)}),cS(e,"table",r,n),dS(e,{modelAttribute:r.color,styleName:"border-color"}),dS(e,{modelAttribute:r.style,styleName:"border-style"}),dS(e,{modelAttribute:r.width,styleName:"border-width"})}(e,n,{color:r.borderColor,style:r.borderStyle,width:r.borderWidth}),t.commands.add("tableBorderColor",new uI(t,r.borderColor)),t.commands.add("tableBorderStyle",new hI(t,r.borderStyle)),t.commands.add("tableBorderWidth",new gI(t,r.borderWidth)),function(t,e,n){t.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:t=>({key:"style",value:{float:"center"===t?"none":t}}),converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:kI}},model:{key:"tableAlignment",value:t=>{let e=t.getStyle("float");return"none"===e&&(e="center"),e===n?null:e}}}).attributeToAttribute({view:{attributes:{align:bI}},model:{name:"table",key:"tableAlignment",value:t=>{const e=t.getAttribute("align");return e===n?null:e}}})}(e,n,r.alignment),t.commands.add("tableAlignment",new mI(t,r.alignment)),yI(e,n,{modelAttribute:"tableWidth",styleName:"width",defaultValue:r.width}),t.commands.add("tableWidth",new fI(t,r.width)),yI(e,n,{modelAttribute:"tableHeight",styleName:"height",defaultValue:r.height}),t.commands.add("tableHeight",new pI(t,r.height)),t.data.addStyleProcessorRules(Bu),function(t,e,n){const{modelAttribute:r}=n;t.extend("table",{allowAttributes:[r]}),aS(e,{viewElement:"table",...n}),dS(e,n)}(e,n,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:r.backgroundColor}),t.commands.add("tableBackgroundColor",new dI(t,r.backgroundColor))}}function yI(t,e,n){const{modelAttribute:r}=n;t.extend("table",{allowAttributes:[r]}),aS(e,{viewElement:/^(table|figure)$/,...n}),lS(e,{modelElement:"table",...n})}var _I=n(7341),vI={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(_I.Z,vI);_I.Z.locals;const AI={left:zh.objectLeft,center:zh.objectCenter,right:zh.objectRight};class CI extends yh{constructor(t,e){super(t),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=e;const{borderStyleDropdown:n,borderWidthInput:r,borderColorInput:i,borderRowLabel:o}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:c,operatorLabel:l,heightInput:d,dimensionsLabel:u}=this._createDimensionFields(),{alignmentToolbar:h,alignmentLabel:g}=this._createAlignmentFields();this.focusTracker=new vi,this.keystrokes=new Ai,this.children=this.createCollection(),this.borderStyleDropdown=n,this.borderWidthInput=r,this.borderColorInput=i,this.backgroundInput=a,this.widthInput=c,this.heightInput=d,this.alignmentToolbar=h;const{saveButtonView:f,cancelButtonView:p}=this._createActionButtons();this.saveButtonView=f,this.cancelButtonView=p,this._focusables=new Ku,this._focusCycler=new pg({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Xg(t,{label:this.t("Table properties")})),this.children.add(new dM(t,{labelView:o,children:[o,n,i,r],class:"ck-table-form__border-row"})),this.children.add(new dM(t,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new dM(t,{children:[new dM(t,{labelView:u,children:[u,c,l,d],class:"ck-table-form__dimensions-row"}),new dM(t,{labelView:g,children:[g,h],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new dM(t,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Vh({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach((t=>{this._focusables.add(t),this.focusTracker.add(t.element)})),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const t=this.options.defaultTableProperties,e={style:t.borderStyle,width:t.borderWidth,color:t.borderColor},n=sM({colorConfig:this.options.borderColors,columns:5,defaultColorValue:e.color}),r=this.locale,i=this.t,o=new qg(r);o.text=i("Border");const s=QD(this.t),a=new af(r,df);a.set({label:i("Style"),class:"ck-table-form__border-style"}),a.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:i("Style")}),a.fieldView.buttonView.bind("label").to(this,"borderStyle",(t=>s[t||"none"])),a.fieldView.on("execute",(t=>{this.borderStyle=t.source._borderStyleValue})),a.bind("isEmpty").to(this,"borderStyle",(t=>!t)),Fg(a.fieldView,rM(this,e.style));const c=new af(r,cf);c.set({label:i("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",xI),c.fieldView.on("input",(()=>{this.borderWidth=c.fieldView.element.value}));const l=new af(r,n);return l.set({label:i("Color"),class:"ck-table-form__border-color"}),l.fieldView.bind("value").to(this,"borderColor"),l.bind("isEnabled").to(this,"borderStyle",xI),l.fieldView.on("input",(()=>{this.borderColor=l.fieldView.value})),this.on("change:borderStyle",((t,n,r,i)=>{xI(r)||(this.borderColor="",this.borderWidth=""),xI(i)||(this.borderColor=e.color,this.borderWidth=e.width)})),{borderRowLabel:o,borderStyleDropdown:a,borderColorInput:l,borderWidthInput:c}}_createBackgroundFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Background");const r=sM({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor}),i=new af(t,r);return i.set({label:e("Color"),class:"ck-table-properties-form__background"}),i.fieldView.bind("value").to(this,"backgroundColor"),i.fieldView.on("input",(()=>{this.backgroundColor=i.fieldView.value})),{backgroundRowLabel:n,backgroundInput:i}}_createDimensionFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Dimensions");const r=new af(t,cf);r.set({label:e("Width"),class:"ck-table-form__dimensions-row__width"}),r.fieldView.bind("value").to(this,"width"),r.fieldView.on("input",(()=>{this.width=r.fieldView.element.value}));const i=new yh(t);i.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const o=new af(t,cf);return o.set({label:e("Height"),class:"ck-table-form__dimensions-row__height"}),o.fieldView.bind("value").to(this,"height"),o.fieldView.on("input",(()=>{this.height=o.fieldView.element.value})),{dimensionsLabel:n,widthInput:r,operatorLabel:i,heightInput:o}}_createAlignmentFields(){const t=this.locale,e=this.t,n=new qg(t);n.text=e("Alignment");const r=new Cg(t);return r.set({isCompact:!0,ariaLabel:e("Table alignment toolbar")}),iM({view:this,icons:AI,toolbar:r,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:n,alignmentToolbar:r}}_createActionButtons(){const t=this.locale,e=this.t,n=new Zh(t),r=new Zh(t),i=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return n.set({label:e("Save"),icon:zh.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("isEnabled").toMany(i,"errorText",((...t)=>t.every((t=>!t)))),r.set({label:e("Cancel"),icon:zh.cancel,class:"ck-button-cancel",withText:!0}),r.delegate("execute").to(this,"cancel"),{saveButtonView:n,cancelButtonView:r}}get _alignmentLabels(){const t=this.locale,e=this.t,n=e("Align table to the left"),r=e("Center table"),i=e("Align table to the right");return"rtl"===t.uiLanguageDirection?{right:i,center:r,left:n}:{left:n,center:r,right:i}}}function xI(t){return"none"!==t}const EI={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class TI extends Di{static get requires(){return[wf]}static get pluginName(){return"TablePropertiesUI"}constructor(t){super(t),t.config.define("table.tableProperties",{borderColors:oM,backgroundColors:oM})}init(){const t=this.editor,e=t.t;this._defaultTableProperties=IM(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=t.plugins.get(wf),this.view=this._createPropertiesView(),this._undoStepBatch=null,t.ui.componentFactory.add("tableProperties",(n=>{const r=new Zh(n);r.set({label:e("Table properties"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>',tooltip:!0}),this.listenTo(r,"execute",(()=>this._showView()));const i=Object.values(EI).map((e=>t.commands.get(e)));return r.bind("isEnabled").toMany(i,"isEnabled",((...t)=>t.some((t=>t)))),r}))}destroy(){super.destroy(),this.view.destroy()}_createPropertiesView(){const t=this.editor,e=t.config.get("table.tableProperties"),n=tg(e.borderColors),r=Jh(t.locale,n),i=tg(e.backgroundColors),o=Jh(t.locale,i),s=new CI(t.locale,{borderColors:r,backgroundColors:o,defaultTableProperties:this._defaultTableProperties}),a=t.t;s.render(),this.listenTo(s,"submit",(()=>{this._hideView()})),this.listenTo(s,"cancel",(()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()})),s.keystrokes.set("Esc",((t,e)=>{this._hideView(),e()})),Fh({emitter:s,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const c=XD(a),l=JD(a);return s.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle",this._defaultTableProperties.borderStyle)),s.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:s.borderColorInput,commandName:"tableBorderColor",errorText:c,validator:tM,defaultValue:this._defaultTableProperties.borderColor})),s.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:s.borderWidthInput,commandName:"tableBorderWidth",errorText:l,validator:nM,defaultValue:this._defaultTableProperties.borderWidth})),s.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:s.backgroundInput,commandName:"tableBackgroundColor",errorText:c,validator:tM,defaultValue:this._defaultTableProperties.backgroundColor})),s.on("change:width",this._getValidatedPropertyChangeCallback({viewField:s.widthInput,commandName:"tableWidth",errorText:l,validator:eM,defaultValue:this._defaultTableProperties.width})),s.on("change:height",this._getValidatedPropertyChangeCallback({viewField:s.heightInput,commandName:"tableHeight",errorText:l,validator:eM,defaultValue:this._defaultTableProperties.height})),s.on("change:alignment",this._getPropertyChangeCallback("tableAlignment",this._defaultTableProperties.alignment)),s}_fillViewFormFromCommandValues(){const t=this.editor.commands,e=t.get("tableBorderStyle");Object.entries(EI).map((([e,n])=>{const r=this._defaultTableProperties[e]||"";return[e,t.get(n).value||r]})).forEach((([t,n])=>{("borderColor"!==t&&"borderWidth"!==t||"none"!==e.value)&&this.view.set(t,n)}))}_showView(){const t=this.editor;this.listenTo(t.ui,"update",(()=>{this._updateView()})),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:EM(t)}),this._undoStepBatch=t.model.createBatch(),this.view.focus()}_hideView(){const t=this.editor;this.stopListening(t.ui,"update"),this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const t=this.editor;_M(t.editing.view.document.selection)?this._isViewVisible&&xM(t,"table"):this._hideView()}get _isViewVisible(){return this._balloon.visibleView===this.view}get _isViewInBalloon(){return this._balloon.hasView(this.view)}_getPropertyChangeCallback(t,e){return(n,r,i,o)=>{(o||e!==i)&&this.editor.execute(t,{value:i,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(t){const{commandName:e,viewField:n,validator:r,errorText:i,defaultValue:o}=t,s=Da((()=>{n.errorText=i}),500);return(t,i,a,c)=>{s.cancel(),(c||o!==a)&&(r(a)?(this.editor.execute(e,{value:a,batch:this._undoStepBatch}),n.errorText=null):s())}}}function SI(t,e){return`${t}:${e=e||mi(t)}`}class DI extends Ii{refresh(){const t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"language")}execute({languageCode:t,textDirection:e}={}){const n=this.editor.model,r=n.document.selection,i=!!t&&SI(t,e);n.change((t=>{if(r.isCollapsed)i?t.setSelectionAttribute("language",i):t.removeSelectionAttribute("language");else{const e=n.schema.getValidRanges(r.getRanges(),"language");for(const n of e)i?t.setAttribute("language",i,n):t.removeAttribute("language",n)}}))}_getValueFromFirstAllowedNode(){const t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.getAttribute("language")||!1;for(const t of n.getRanges())for(const n of t.getItems())if(e.checkAttribute(n,"language"))return n.getAttribute("language")||!1;return!1}}class MI extends Di{static get pluginName(){return"TextPartLanguageEditing"}constructor(t){super(t),t.config.define("language",{textPartLanguage:[{title:"Arabic",languageCode:"ar"},{title:"French",languageCode:"fr"},{title:"Spanish",languageCode:"es"}]})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:"language"}),t.model.schema.setAttributeProperties("language",{copyOnEnter:!0}),this._defineConverters(),t.commands.add("textPartLanguage",new DI(t))}_defineConverters(){const t=this.editor.conversion;t.for("upcast").elementToAttribute({model:{key:"language",value:t=>SI(t.getAttribute("lang"),t.getAttribute("dir"))},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),t.for("downcast").attributeToElement({model:"language",view:(t,{writer:e},n)=>{if(!t)return;if(!n.item.is("$textProxy")&&!n.item.is("documentSelection"))return;const{languageCode:r,textDirection:i}=function(t){const[e,n]=t.split(":");return{languageCode:e,textDirection:n}}(t);return e.createAttributeElement("span",{lang:r,dir:i})}})}}var II=n(4471),BI={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(II.Z,BI);II.Z.locals;class LI extends Di{static get pluginName(){return"TextPartLanguageUI"}init(){const t=this.editor,e=t.t,n=t.config.get("language.textPartLanguage"),r=e("Choose language"),i=e("Remove language"),o=e("Language");t.ui.componentFactory.add("textPartLanguage",(e=>{const s=new yi,a={},c=t.commands.get("textPartLanguage");s.add({type:"button",model:new hf({label:i,languageCode:!1,withText:!0})}),s.add({type:"separator"});for(const t of n){const e={type:"button",model:new hf({label:t.title,languageCode:t.languageCode,textDirection:t.textDirection,withText:!0})},n=SI(t.languageCode,t.textDirection);e.model.bind("isOn").to(c,"value",(t=>t===n)),s.add(e),a[n]=t.title}const l=Rg(e);return Fg(l,s),l.buttonView.set({isOn:!1,withText:!0,tooltip:o}),l.extendTemplate({attributes:{class:["ck-text-fragment-language-dropdown"]}}),l.bind("isEnabled").to(c,"isEnabled"),l.buttonView.bind("label").to(c,"value",(t=>a[t]||r)),this.listenTo(l,"execute",(e=>{c.execute({languageCode:e.source.languageCode,textDirection:e.source.textDirection}),t.editing.view.focus()})),l}))}}const NI="todoListChecked";class OI extends Ii{constructor(t){super(t),this._selectedElements=[],this.on("execute",(()=>{this.refresh()}),{priority:"highest"})}refresh(){this._selectedElements=this._getSelectedItems(),this.value=this._selectedElements.every((t=>!!t.getAttribute("todoListChecked"))),this.isEnabled=!!this._selectedElements.length}_getSelectedItems(){const t=this.editor.model,e=t.schema,n=t.document.selection.getFirstRange(),r=n.start.parent,i=[];e.checkAttribute(r,NI)&&i.push(r);for(const t of n.getItems())e.checkAttribute(t,NI)&&!i.includes(t)&&i.push(t);return i}execute(t={}){this.editor.model.change((e=>{for(const n of this._selectedElements){(void 0===t.forceValue?!this.value:t.forceValue)?e.setAttribute(NI,!0,n):e.removeAttribute(NI,n)}}))}}function PI(t,e,n){const r=e.modelCursor,i=r.parent,o=e.viewItem;if("checkbox"!=o.getAttribute("type")||"listItem"!=i.name||!r.isAtStart)return;if(!n.consumable.consume(o,{name:!0}))return;const s=n.writer;s.setAttribute("listType","todo",i),e.viewItem.hasAttribute("checked")&&s.setAttribute("todoListChecked",!0,i),e.modelRange=s.createRange(r)}function RI(t){return(e,n)=>{const r=n.modelPosition,i=r.parent;if(!i.is("element","listItem")||"todo"!=i.getAttribute("listType"))return;const o=FI(n.mapper.toViewElement(i),t);o&&(n.viewPosition=n.mapper.findPositionIn(o,r.offset))}}function zI(t,e,n,r){return e.createUIElement("label",{class:"todo-list__label",contenteditable:!1},(function(e){const i=ft(document,"input",{type:"checkbox",tabindex:-1});n&&i.setAttribute("checked","checked"),i.addEventListener("change",(()=>r(t)));const o=this.toDomElement(e);return o.appendChild(i),o}))}function FI(t,e){const n=e.createRangeIn(t);for(const t of n)if(t.item.is("containerElement","span")&&t.item.hasClass("todo-list__label__description"))return t.item}const jI=hi("Ctrl+Enter");class VI extends Di{static get pluginName(){return"TodoListEditing"}static get requires(){return[UA]}init(){const t=this.editor,{editing:e,data:n,model:r}=t;r.schema.extend("listItem",{allowAttributes:["todoListChecked"]}),r.schema.addAttributeCheck(((t,e)=>{const n=t.last;if("todoListChecked"==e&&"listItem"==n.name&&"todo"!=n.getAttribute("listType"))return!1})),t.commands.add("todoList",new pA(t,"todo"));const i=new OI(t);var o,s;t.commands.add("checkTodoList",i),t.commands.add("todoListCheck",i),n.downcastDispatcher.on("insert:listItem",function(t){return(e,n,r)=>{const i=r.consumable;if(!i.test(n.item,"insert")||!i.test(n.item,"attribute:listType")||!i.test(n.item,"attribute:listIndent"))return;if("todo"!=n.item.getAttribute("listType"))return;const o=n.item;i.consume(o,"insert"),i.consume(o,"attribute:listType"),i.consume(o,"attribute:listIndent"),i.consume(o,"attribute:todoListChecked");const s=r.writer,a=wA(o,r);s.addClass("todo-list",a.parent);const c=s.createContainerElement("label",{class:"todo-list__label"}),l=s.createEmptyElement("input",{type:"checkbox",disabled:"disabled"}),d=s.createContainerElement("span",{class:"todo-list__label__description"});o.getAttribute("todoListChecked")&&s.setAttribute("checked","checked",l),s.insert(s.createPositionAt(a,0),c),s.insert(s.createPositionAt(c,0),l),s.insert(s.createPositionAfter(l),d),yA(o,a,r,t)}}(r),{priority:"high"}),n.upcastDispatcher.on("element:input",PI,{priority:"high"}),e.downcastDispatcher.on("insert:listItem",function(t,e){return(n,r,i)=>{const o=i.consumable;if(!o.test(r.item,"insert")||!o.test(r.item,"attribute:listType")||!o.test(r.item,"attribute:listIndent"))return;if("todo"!=r.item.getAttribute("listType"))return;const s=r.item;o.consume(s,"insert"),o.consume(s,"attribute:listType"),o.consume(s,"attribute:listIndent"),o.consume(s,"attribute:todoListChecked");const a=i.writer,c=wA(s,i),l=!!s.getAttribute("todoListChecked"),d=zI(s,a,l,e),u=a.createContainerElement("span",{class:"todo-list__label__description"});a.addClass("todo-list",c.parent),a.insert(a.createPositionAt(c,0),d),a.insert(a.createPositionAfter(d),u),yA(s,c,i,t)}}(r,(t=>this._handleCheckmarkChange(t))),{priority:"high"}),e.downcastDispatcher.on("attribute:listType:listItem",(o=t=>this._handleCheckmarkChange(t),s=e.view,(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=n.mapper.toViewElement(e.item),i=n.writer,a=function(t,e){const n=e.createRangeIn(t);for(const t of n)if(t.item.is("uiElement","label"))return t.item}(r,s);if("todo"==e.attributeNewValue){const t=!!e.item.getAttribute("todoListChecked"),n=zI(e.item,i,t,o),s=i.createContainerElement("span",{class:"todo-list__label__description"}),a=i.createRangeIn(r),c=xA(r),l=vA(a.start),d=c?i.createPositionBefore(c):a.end,u=i.createRange(l,d);i.addClass("todo-list",r.parent),i.move(u,i.createPositionAt(s,0)),i.insert(i.createPositionAt(r,0),n),i.insert(i.createPositionAfter(n),s)}else if("todo"==e.attributeOldValue){const t=FI(r,s);i.removeClass("todo-list",r.parent),i.remove(a),i.move(i.createRangeIn(t),i.createPositionBefore(t)),i.remove(t)}})),e.downcastDispatcher.on("attribute:todoListChecked:listItem",function(t){return(e,n,r)=>{if("todo"!=n.item.getAttribute("listType"))return;if(!r.consumable.consume(n.item,"attribute:todoListChecked"))return;const{mapper:i,writer:o}=r,s=!!n.item.getAttribute("todoListChecked"),a=i.toViewElement(n.item).getChild(0),c=zI(n.item,o,s,t);o.insert(o.createPositionAfter(a),c),o.remove(a)}}((t=>this._handleCheckmarkChange(t)))),e.mapper.on("modelToViewPosition",RI(e.view)),n.mapper.on("modelToViewPosition",RI(e.view)),this.listenTo(e.view.document,"arrowKey",function(t,e){return(n,r)=>{if("left"!=fi(r.keyCode,e.contentLanguageDirection))return;const i=t.schema,o=t.document.selection;if(!o.isCollapsed)return;const s=o.getFirstPosition(),a=s.parent;if("listItem"===a.name&&"todo"==a.getAttribute("listType")&&s.isAtStart){const e=i.getNearestSelectionRange(t.createPositionBefore(a),"backward");e&&t.change((t=>t.setSelection(e))),r.preventDefault(),r.stopPropagation(),n.stop()}}}(r,t.locale),{context:"li"}),this.listenTo(e.view.document,"keydown",((e,n)=>{ui(n)===jI&&(t.execute("checkTodoList"),e.stop())}),{priority:"high"});const a=new Set;this.listenTo(r,"applyOperation",((t,e)=>{const n=e[0];if("rename"==n.type&&"listItem"==n.oldName){const t=n.position.nodeAfter;t.hasAttribute("todoListChecked")&&a.add(t)}else if("changeAttribute"==n.type&&"listType"==n.key&&"todo"===n.oldValue)for(const t of n.range.getItems())t.hasAttribute("todoListChecked")&&"todo"!==t.getAttribute("listType")&&a.add(t)})),r.document.registerPostFixer((t=>{let e=!1;for(const n of a)t.removeAttribute("todoListChecked",n),e=!0;return a.clear(),e}))}_handleCheckmarkChange(t){const e=this.editor,n=e.model,r=Array.from(n.document.selection.getRanges());n.change((n=>{n.setSelection(t,"end"),e.execute("checkTodoList"),n.setSelection(r)}))}}class $I extends Di{static get pluginName(){return"TodoListUI"}init(){const t=this.editor.t;CA(this.editor,"todoList",t("To-do List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>')}}var HI=n(1199),UI={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(HI.Z,UI);HI.Z.locals;const WI="underline";class qI extends Di{static get pluginName(){return"UnderlineEditing"}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:WI}),t.model.schema.setAttributeProperties(WI,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:WI,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),t.commands.add(WI,new $b(t,WI)),t.keystrokes.set("CTRL+U","underline")}}const YI="underline";class GI extends Di{static get pluginName(){return"UnderlineUI"}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add(YI,(n=>{const r=t.commands.get(YI),i=new Zh(n);return i.set({label:e("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{t.execute(YI),t.editing.view.focus()})),i}))}}function ZI(t){if(t.is("$text")||t.is("$textProxy"))return t.data;let e="",n=null;for(const r of t.getChildren()){const t=ZI(r);n&&n.is("element")&&(e+="\n"),e+=t,n=r}return e}function KI(t,e=new Set){const n=[t],r=new Set;let i=0;for(;n.length>i;){const t=n[i++];if(!(r.has(t)||QI(t)||e.has(t)))if(r.add(t),t[Symbol.iterator])try{for(const e of t)n.push(e)}catch(t){}else for(const e in t)"defaultValue"!==e&&n.push(t[e])}return r}function QI(t){const e=Object.prototype.toString.call(t),n=typeof t;return"number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||!0===t._watchdogExcluded||t instanceof EventTarget||t instanceof Event}class XI{constructor(t){if(this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e=t.error||t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter((t=>t!==e))}_fire(t,...e){const n=this._listeners[t]||[];for(const t of n)t.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;return(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}var JI=n(312),tB=n.n(JI);function eB(t,e){const n=t.model.document.selection,r=n.getSelectedElement()||n.getLastPosition().parent;return!(!r||!r.is("element","mermaid")||r.getAttribute("displayMode")!==e)}class nB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"mermaid"===n.name||e.getLastPosition().findAncestor("mermaid")?this.isEnabled=!!n:this.isEnabled=!1,this.value=eB(t,"preview")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"preview"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","preview",n)}))}}class rB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"mermaid"===n.name||e.getLastPosition().findAncestor("mermaid")?this.isEnabled=!!n:this.isEnabled=!1,this.value=eB(t,"source")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"source"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","source",n)}))}}class iB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"mermaid"===n.name||e.getLastPosition().findAncestor("mermaid")?this.isEnabled=!!n:this.isEnabled=!1,this.value=eB(t,"split")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"split"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","split",n)}))}}class oB extends Ii{refresh(){const t=this.editor.model.document.selection.getSelectedElement();t&&"mermaid"===t.name?this.isEnabled=!1:this.isEnabled=!0}execute(){const t=this.editor.model;let e;return t.change((n=>{e=n.createElement("mermaid",{displayMode:"split",source:"flowchart TB\nA --\x3e B\nB --\x3e C"}),t.insertContent(e)})),e}}class sB extends Di{static get pluginName(){return"MermaidEditing"}init(){this._registerCommands(),this._defineConverters()}afterInit(){this.editor.model.schema.register("mermaid",{allowAttributes:["displayMode","source"],allowWhere:"$block",isObject:!0})}_registerCommands(){const t=this.editor;t.commands.add("mermaidPreviewCommand",new nB(t)),t.commands.add("mermaidSplitViewCommand",new iB(t)),t.commands.add("mermaidSourceViewCommand",new rB(t)),t.commands.add("insertMermaidCommand",new oB(t))}_defineConverters(){const t=this.editor;t.data.downcastDispatcher.on("insert:mermaid",this._mermaidDataDowncast.bind(this)),t.editing.downcastDispatcher.on("insert:mermaid",this._mermaidDowncast.bind(this)),t.editing.downcastDispatcher.on("attribute:source:mermaid",this._sourceAttributeDowncast.bind(this)),t.data.upcastDispatcher.on("element:code",this._mermaidUpcast.bind(this),{priority:"high"}),t.conversion.for("editingDowncast").attributeToAttribute({model:{name:"mermaid",key:"displayMode"},view:t=>({key:"class",value:"ck-mermaid__"+t+"-mode"})})}_mermaidDataDowncast(t,e,n){const r=this.editor.model,{writer:i,mapper:o}=n;if(!n.consumable.consume(e.item,"insert"))return;const s=o.toViewPosition(r.createPositionBefore(e.item)),a=i.createContainerElement("code",{class:"language-mermaid"}),c=i.createContainerElement("pre",{spellcheck:"false"}),l=i.createText(e.item.getAttribute("source"));i.insert(r.createPositionAt(a,"end"),l),i.insert(r.createPositionAt(c,"end"),a),i.insert(s,c),o.bindElements(e.item,a)}_mermaidDowncast(t,e,n){const{writer:r,mapper:i,consumable:o}=n,{editor:s}=this,{model:a,t:c}=s,l=this;if(!o.consume(e.item,"insert"))return;const d=i.toViewPosition(a.createPositionBefore(e.item)),u={class:["ck-mermaid__editing-view"],placeholder:c("Insert mermaid source code"),"data-cke-ignore-events":!0},h=r.createContainerElement("div",{class:["ck-mermaid__wrapper"]}),g=r.createUIElement("textarea",u,(function(t){const n=this.toDomElement(t);n.value=e.item.getAttribute("source");const r=Da((t=>{s.model.change((n=>{n.setAttribute("source",t.target.value,e.item)}))}),300);return n.addEventListener("input",r),n.addEventListener("focus",(()=>{const t=s.model;t.document.selection.getSelectedElement()!==e.item&&t.change((t=>t.setSelection(e.item,"on")))}),!0),n})),f=r.createUIElement("div",{class:["ck-mermaid__preview"]},(function(t){const n=e.item.getAttribute("source"),r=this.toDomElement(t);return r.innerHTML=n,window.setTimeout((()=>{l._renderMermaid(r)}),100),r}));return r.insert(r.createPositionAt(h,"start"),f),r.insert(r.createPositionAt(h,"start"),g),r.insert(d,h),i.bindElements(e.item,h),Kp(h,r,{widgetLabel:c("Mermaid widget"),hasSelectionHandle:!0})}_sourceAttributeDowncast(t,e,n){const r=e.attributeNewValue,i=this.editor.editing.view.domConverter;if(r){const t=n.mapper.toViewElement(e.item);for(const e of t.getChildren())if("textarea"===e.name&&e.hasClass("ck-mermaid__editing-view")){const t=i.viewToDom(e,window.document);t.value!=r&&(t.value=r)}else if("div"===e.name&&e.hasClass("ck-mermaid__preview")){const t=i.viewToDom(e,window.document);t&&(t.innerHTML=r,t.removeAttribute("data-processed"),this._renderMermaid(t))}}}_mermaidUpcast(t,e,n){const r=e.viewItem,i=!r.parent||!r.parent.is("element","pre"),o=e.modelCursor.findAncestor("code"),{consumable:s,writer:a}=n;if(!r.hasClass("language-mermaid")||i||o)return;if(!s.test(r,{name:!0}))return;const c=Array.from(r.getChildren()).filter((t=>t.is("$text"))).map((t=>t.data)).join(""),l=a.createElement("mermaid",{source:c,displayMode:"split"});n.safeInsert(l,e.modelCursor)&&(s.consume(r,{name:!0}),n.updateConversionResult(l,e))}_renderMermaid(t){tB().init(void 0,t)}}class aB extends Di{static get requires(){return[wm]}static get pluginName(){return"MermaidToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(wm),r=["mermaidSourceView","mermaidSplitView","mermaidPreview","|","mermaidInfo"];r&&n.register("mermaidToolbar",{ariaLabel:e("Mermaid toolbar"),items:r,getRelatedElement:t=>function(t){const e=t.getSelectedElement();if(e&&e.hasClass("ck-mermaid__wrapper"))return e;return null}(t)})}}class cB extends Di{static get pluginName(){return"MermaidUI"}init(){this._addButtons()}_addButtons(){const t=this.editor;this._addInsertMermaidButton(),this._addMermaidInfoButton(),this._createToolbarButton(t,"mermaidPreview","Preview",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 11.609V13.4a.4.4 0 0 1-.4.4H2.6a.4.4 0 0 1-.4-.4v-1.791H1V13.4A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6v-1.791h-1.2ZM13.8 4.997H15V2.6A1.6 1.6 0 0 0 13.4 1H2.6A1.6 1.6 0 0 0 1 2.6v2.397h1.2V2.6c0-.22.18-.4.4-.4h10.8c.22 0 .4.18.4.4v2.397Z"/><path d="M8 11.095c-1.92 0-3.837-.919-5.749-2.757L2 8.095l.251-.242c3.815-3.677 7.683-3.677 11.498 0l.251.242-.251.243C11.84 10.176 9.925 11.095 8 11.096Zm-5.02-3c3.375 3.1 6.665 3.1 10.04 0-3.375-3.1-6.665-3.095-10.04 0Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.514 8.095c-3.676 3.543-7.352 3.543-11.028 0 3.676-3.542 7.352-3.542 11.028 0Zm-3.586 0A1.926 1.926 0 0 1 8 10.02a1.926 1.926 0 0 1-1.928-1.924c0-1.062.863-1.924 1.928-1.924s1.928.862 1.928 1.924Z"/><path d="M8 8.861a.767.767 0 1 0 .002-1.533A.767.767 0 0 0 8 8.86Z"/></svg>\r\n'),this._createToolbarButton(t,"mermaidSourceView","Source view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.609 2.2H13.4c.22 0 .4.18.4.4v10.8a.4.4 0 0 1-.4.4h-1.791V15H13.4a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1h-1.791v1.2ZM4.997 2.2V1H2.6A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h2.397v-1.2H2.6a.4.4 0 0 1-.4-.4V2.6c0-.22.18-.4.4-.4h2.397Z"/><path d="M3.511 4.778a.75.75 0 0 1 .75-.75h3.697a.75.75 0 1 1 0 1.5H4.26a.75.75 0 0 1-.75-.75ZM6.595 7.629a.75.75 0 0 1 .75-.75h3.588a.75.75 0 0 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM6.595 10.48a.75.75 0 0 1 .75-.75h1.143a.75.75 0 1 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM3.511 7.629a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75ZM3.511 10.48a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75Z"/></svg>\r\n'),this._createToolbarButton(t,"mermaidSplitView","Split view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.8 3.076H8.588V13.8H13.4a.4.4 0 0 0 .4-.4V3.076Zm-6.412 0H2.2V13.4c0 .22.18.4.4.4h4.788V3.076ZM2.6 1A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1H2.6Z"/></svg>\r\n')}_addInsertMermaidButton(){const t=this.editor,e=t.t,n=t.editing.view;t.ui.componentFactory.add("mermaid",(r=>{const i=new Zh(r),o=t.commands.get("insertMermaidCommand");return i.set({label:e("Insert Mermaid diagram"),icon:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m8 11.5 3.004-3.004 3.003 3.004-3.003 3.004L8 11.5Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.504 2.863v3h3v-3h-3Zm-1 4h5v-5h-5v5Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.004 14.504 8 11.5l2.504-2.504V6.07h1v2.926l2.503 2.504-3.003 3.004ZM9.414 11.5l1.59-1.59 1.59 1.59-1.59 1.59-1.59-1.59ZM6.837 4.999h2.625v-1h-2.57a2.5 2.5 0 1 0-2.974 2.814V9h-2v5h5V9h-2V6.813c.934-.19 1.68-.9 1.919-1.814Zm-3.919-.636a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 5.637v3h3v-3h-3Z"/></svg>\r\n',tooltip:!0}),i.bind("isOn","isEnabled").to(o,"value","isEnabled"),o.listenTo(i,"execute",(()=>{const e=t.execute("insertMermaidCommand"),r=t.editing.mapper.toViewElement(e);if(n.scrollToTheSelection(),n.focus(),r){const t=n.domConverter.viewToDom(r,document);t&&t.querySelector(".ck-mermaid__editing-view").focus()}})),i}))}_addMermaidInfoButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("mermaidInfo",(t=>{const n=new Zh(t);return n.set({label:e("Read more about Mermaid diagram syntax"),icon:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 1.219C4.254 1.219 1.219 4.28 1.219 8A6.78 6.78 0 0 0 8 14.781c3.719 0 6.781-3.035 6.781-6.781 0-3.719-3.062-6.781-6.781-6.781Zm0 12.25A5.45 5.45 0 0 1 2.531 8 5.467 5.467 0 0 1 8 2.531c3.008 0 5.469 2.461 5.469 5.469A5.467 5.467 0 0 1 8 13.469Zm0-9.242c-.656 0-1.148.52-1.148 1.148 0 .656.492 1.148 1.148 1.148.629 0 1.148-.492 1.148-1.148 0-.629-.52-1.148-1.148-1.148Zm1.531 6.945v-.656a.353.353 0 0 0-.328-.329h-.328V7.454a.353.353 0 0 0-.328-.328h-1.75a.332.332 0 0 0-.328.328v.656c0 .192.136.329.328.329h.328v1.75h-.328a.333.333 0 0 0-.328.328v.656c0 .191.136.328.328.328h2.406a.332.332 0 0 0 .328-.328Z"/></svg>\r\n',tooltip:!0}),n.on("execute",(()=>{window.open("https://ckeditor.com/blog/basic-overview-of-creating-flowcharts-using-mermaid/","_blank","noopener")})),n}))}_createToolbarButton(t,e,n,r){const i=t.t;t.ui.componentFactory.add(e,(o=>{const s=new Zh(o),a=t.commands.get(`${e}Command`);return s.set({label:i(n),icon:r,tooltip:!0}),s.bind("isOn","isEnabled").to(a,"value","isEnabled"),a.listenTo(s,"execute",(()=>{t.execute(`${e}Command`),t.editing.view.scrollToTheSelection(),t.editing.view.focus()})),s}))}}var lB=n(9537),dB={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(lB.Z,dB);lB.Z.locals;function uB(t,e){const n=t.model.document.selection,r=n.getSelectedElement()||n.getLastPosition().parent;return!(!r||!r.is("element","codewidget")||r.getAttribute("displayMode")!==e)}class hB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"codewidget"===n.name||e.getLastPosition().findAncestor("codewidget")?this.isEnabled=!!n:this.isEnabled=!1,this.value=uB(t,"preview")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"preview"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","preview",n)}))}}class gB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"codewidget"===n.name||e.getLastPosition().findAncestor("codewidget")?this.isEnabled=!!n:this.isEnabled=!1,this.value=uB(t,"source")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"source"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","source",n)}))}}class fB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&"codewidget"===n.name||e.getLastPosition().findAncestor("codewidget")?this.isEnabled=!!n:this.isEnabled=!1,this.value=uB(t,"split")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"split"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","split",n)}))}}class pB extends Ii{refresh(){const t=this.editor.model.document.selection.getSelectedElement();t&&"codewidget"===t.name?this.isEnabled=!1:this.isEnabled=!0}execute(){const t=this.editor.model;let e;return t.change((n=>{e=n.createElement("codewidget",{displayMode:"split",source:'print(paste("Hello","World!"))'}),t.insertContent(e)})),e}}class mB extends Di{static get pluginName(){return"CodeWidgetEditing"}init(){this._registerCommands(),this._defineConverters()}afterInit(){this.editor.model.schema.register("codewidget",{allowAttributes:["displayMode","source"],allowWhere:"$block",isObject:!0})}_registerCommands(){const t=this.editor;t.commands.add("codewidgetPreviewCommand",new hB(t)),t.commands.add("codewidgetSplitViewCommand",new fB(t)),t.commands.add("codewidgetSourceViewCommand",new gB(t)),t.commands.add("insertCodeWidgetCommand",new pB(t))}_defineConverters(){const t=this.editor;t.data.downcastDispatcher.on("insert:codewidget",this._codewidgetDataDowncast.bind(this)),t.editing.downcastDispatcher.on("insert:codewidget",this._codewidgetDowncast.bind(this)),t.editing.downcastDispatcher.on("attribute:source:codewidget",this._sourceAttributeDowncast.bind(this)),t.data.upcastDispatcher.on("element:code",this._codewidgetUpcast.bind(this),{priority:"high"}),t.conversion.for("editingDowncast").attributeToAttribute({model:{name:"codewidget",key:"displayMode"},view:t=>({key:"class",value:"ck-codewidget__"+t+"-mode"})})}_codewidgetDataDowncast(t,e,n){const r=this.editor.model,{writer:i,mapper:o}=n;if(!n.consumable.consume(e.item,"insert"))return;const s=o.toViewPosition(r.createPositionBefore(e.item)),a=i.createContainerElement("code",{class:"language-codewidget"}),c=i.createContainerElement("pre",{spellcheck:"false"}),l=i.createText(e.item.getAttribute("source"));i.insert(r.createPositionAt(a,"end"),l),i.insert(r.createPositionAt(c,"end"),a),i.insert(s,c),o.bindElements(e.item,a)}_codewidgetDowncast(t,e,n){const{writer:r,mapper:i,consumable:o}=n,{editor:s}=this,{model:a,t:c}=s,l=this;if(!o.consume(e.item,"insert"))return;const d=i.toViewPosition(a.createPositionBefore(e.item)),u={class:["ck-codewidget__editing-view"],placeholder:c("Insert codewidget source code"),"data-cke-ignore-events":!0},h=r.createContainerElement("div",{class:["ck-codewidget__wrapper"]}),g=r.createUIElement("textarea",u,(function(t){const n=this.toDomElement(t);n.value=e.item.getAttribute("source");const r=Da((t=>{s.model.change((n=>{n.setAttribute("source",t.target.value,e.item)}))}),300);return n.addEventListener("input",r),n.addEventListener("focus",(()=>{const t=s.model;t.document.selection.getSelectedElement()!==e.item&&t.change((t=>t.setSelection(e.item,"on")))}),!0),n})),f=r.createUIElement("div",{class:["ck-codewidget__preview"]},(function(t){const n=e.item.getAttribute("source"),r=this.toDomElement(t);return r.innerHTML=n,window.setTimeout((()=>{l._renderCodeWidget(r)}),100),r}));return r.insert(r.createPositionAt(h,"start"),f),r.insert(r.createPositionAt(h,"start"),g),r.insert(d,h),i.bindElements(e.item,h),Kp(h,r,{widgetLabel:c("CodeWidget widget"),hasSelectionHandle:!0})}_sourceAttributeDowncast(t,e,n){const r=e.attributeNewValue,i=this.editor.editing.view.domConverter;if(r){const t=n.mapper.toViewElement(e.item);for(const e of t.getChildren())if("textarea"===e.name&&e.hasClass("ck-codewidget__editing-view")){const t=i.viewToDom(e,window.document);t.value!=r&&(t.value=r)}else if("div"===e.name&&e.hasClass("ck-codewidget__preview")){const t=i.viewToDom(e,window.document);t&&(t.innerHTML=r,t.removeAttribute("data-processed"),this._renderCodeWidget(t))}}}_codewidgetUpcast(t,e,n){const r=e.viewItem,i=!r.parent||!r.parent.is("element","pre"),o=e.modelCursor.findAncestor("code"),{consumable:s,writer:a}=n;if(!r.hasClass("language-codewidget")||i||o)return;if(!s.test(r,{name:!0}))return;const c=Array.from(r.getChildren()).filter((t=>t.is("$text"))).map((t=>t.data)).join(""),l=a.createElement("codewidget",{source:c,displayMode:"split"});n.safeInsert(l,e.modelCursor)&&(s.consume(r,{name:!0}),n.updateConversionResult(l,e))}_renderCodeWidget(t){}}class bB extends Di{static get requires(){return[wm]}static get pluginName(){return"CodeWidgetToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(wm),r=["codewidgetSourceView","codewidgetSplitView","codewidgetPreview","|","codewidgetInfo"];r&&n.register("codewidgetToolbar",{ariaLabel:e("CodeWidget toolbar"),items:r,getRelatedElement:t=>function(t){const e=t.getSelectedElement();if(e&&e.hasClass("ck-codewidget__wrapper"))return e;return null}(t)})}}class kB extends Di{static get pluginName(){return"CodeWidgetUI"}init(){this._addButtons()}_addButtons(){const t=this.editor;this._addInsertCodeWidgetButton(),this._addCodeWidgetInfoButton(),this._createToolbarButton(t,"codewidgetPreview","Preview",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 11.609V13.4a.4.4 0 0 1-.4.4H2.6a.4.4 0 0 1-.4-.4v-1.791H1V13.4A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6v-1.791h-1.2ZM13.8 4.997H15V2.6A1.6 1.6 0 0 0 13.4 1H2.6A1.6 1.6 0 0 0 1 2.6v2.397h1.2V2.6c0-.22.18-.4.4-.4h10.8c.22 0 .4.18.4.4v2.397Z"/><path d="M8 11.095c-1.92 0-3.837-.919-5.749-2.757L2 8.095l.251-.242c3.815-3.677 7.683-3.677 11.498 0l.251.242-.251.243C11.84 10.176 9.925 11.095 8 11.096Zm-5.02-3c3.375 3.1 6.665 3.1 10.04 0-3.375-3.1-6.665-3.095-10.04 0Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.514 8.095c-3.676 3.543-7.352 3.543-11.028 0 3.676-3.542 7.352-3.542 11.028 0Zm-3.586 0A1.926 1.926 0 0 1 8 10.02a1.926 1.926 0 0 1-1.928-1.924c0-1.062.863-1.924 1.928-1.924s1.928.862 1.928 1.924Z"/><path d="M8 8.861a.767.767 0 1 0 .002-1.533A.767.767 0 0 0 8 8.86Z"/></svg>\r\n'),this._createToolbarButton(t,"codewidgetSourceView","Source view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.609 2.2H13.4c.22 0 .4.18.4.4v10.8a.4.4 0 0 1-.4.4h-1.791V15H13.4a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1h-1.791v1.2ZM4.997 2.2V1H2.6A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h2.397v-1.2H2.6a.4.4 0 0 1-.4-.4V2.6c0-.22.18-.4.4-.4h2.397Z"/><path d="M3.511 4.778a.75.75 0 0 1 .75-.75h3.697a.75.75 0 1 1 0 1.5H4.26a.75.75 0 0 1-.75-.75ZM6.595 7.629a.75.75 0 0 1 .75-.75h3.588a.75.75 0 0 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM6.595 10.48a.75.75 0 0 1 .75-.75h1.143a.75.75 0 1 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM3.511 7.629a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75ZM3.511 10.48a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75Z"/></svg>\r\n'),this._createToolbarButton(t,"codewidgetSplitView","Split view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.8 3.076H8.588V13.8H13.4a.4.4 0 0 0 .4-.4V3.076Zm-6.412 0H2.2V13.4c0 .22.18.4.4.4h4.788V3.076ZM2.6 1A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1H2.6Z"/></svg>\r\n')}_addInsertCodeWidgetButton(){const t=this.editor,e=t.t,n=t.editing.view;t.ui.componentFactory.add("codewidget",(r=>{const i=new Zh(r),o=t.commands.get("insertCodeWidgetCommand");return i.set({label:e("CodeWidget"),icon:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m8 11.5 3.004-3.004 3.003 3.004-3.003 3.004L8 11.5Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.504 2.863v3h3v-3h-3Zm-1 4h5v-5h-5v5Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.004 14.504 8 11.5l2.504-2.504V6.07h1v2.926l2.503 2.504-3.003 3.004ZM9.414 11.5l1.59-1.59 1.59 1.59-1.59 1.59-1.59-1.59ZM6.837 4.999h2.625v-1h-2.57a2.5 2.5 0 1 0-2.974 2.814V9h-2v5h5V9h-2V6.813c.934-.19 1.68-.9 1.919-1.814Zm-3.919-.636a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 5.637v3h3v-3h-3Z"/></svg>\r\n',tooltip:!0}),i.bind("isOn","isEnabled").to(o,"value","isEnabled"),o.listenTo(i,"execute",(()=>{const e=t.execute("insertCodeWidgetCommand"),r=t.editing.mapper.toViewElement(e);if(n.scrollToTheSelection(),n.focus(),r){const t=n.domConverter.viewToDom(r,document);t&&t.querySelector(".ck-codewidget__editing-view").focus()}})),i}))}_addCodeWidgetInfoButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("codewidgetInfo",(t=>{const n=new Zh(t);return n.set({label:e("Read more about CodeWidget diagram syntax"),icon:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 1.219C4.254 1.219 1.219 4.28 1.219 8A6.78 6.78 0 0 0 8 14.781c3.719 0 6.781-3.035 6.781-6.781 0-3.719-3.062-6.781-6.781-6.781Zm0 12.25A5.45 5.45 0 0 1 2.531 8 5.467 5.467 0 0 1 8 2.531c3.008 0 5.469 2.461 5.469 5.469A5.467 5.467 0 0 1 8 13.469Zm0-9.242c-.656 0-1.148.52-1.148 1.148 0 .656.492 1.148 1.148 1.148.629 0 1.148-.492 1.148-1.148 0-.629-.52-1.148-1.148-1.148Zm1.531 6.945v-.656a.353.353 0 0 0-.328-.329h-.328V7.454a.353.353 0 0 0-.328-.328h-1.75a.332.332 0 0 0-.328.328v.656c0 .192.136.329.328.329h.328v1.75h-.328a.333.333 0 0 0-.328.328v.656c0 .191.136.328.328.328h2.406a.332.332 0 0 0 .328-.328Z"/></svg>\r\n',tooltip:!0}),n.on("execute",(()=>{window.open("https://ckeditor.com/blog/basic-overview-of-creating-flowcharts-using-codewidget/","_blank","noopener")})),n}))}_createToolbarButton(t,e,n,r){const i=t.t;t.ui.componentFactory.add(e,(o=>{const s=new Zh(o),a=t.commands.get(`${e}Command`);return s.set({label:i(n),icon:r,tooltip:!0}),s.bind("isOn","isEnabled").to(a,"value","isEnabled"),a.listenTo(s,"execute",(()=>{t.execute(`${e}Command`),t.editing.view.scrollToTheSelection(),t.editing.view.focus()})),s}))}}var wB=n(6370),yB={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(wB.Z,yB);wB.Z.locals;const _B="mathwidget",vB="MathWidget";function AB(t,e){const n=t.model.document.selection,r=n.getSelectedElement()||n.getLastPosition().parent;return!(!r||!r.is("element",_B)||r.getAttribute("displayMode")!==e)}async function CB(t,e,n){let r=e.engine,i=e.lazyLoad,o=e.katexRenderOptions;if("mathjax"===r&&"undefined"!=typeof MathJax)!function(t){return t&&"string"==typeof t&&3===t.split(".").length&&"3"===t.split(".")[0]}(MathJax.version)?Mr.window.setTimeout((()=>{!function(t,e){e.innerHTML="$$\n"+t+"\n$$",MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}(t,n)})):function(t,e,n){let r;void 0!==MathJax.tex2chtmlPromise?r=MathJax.tex2chtmlPromise:void 0!==MathJax.tex2svgPromise&&(r=MathJax.tex2svgPromise);void 0!==r&&r(t).then((t=>{e.firstChild&&e.removeChild(e.firstChild),e.appendChild(t),n()}))}(t,n,(()=>{}));else if("katex"===r&&"undefined"!=typeof katex)katex.render(t,n,{throwOnError:!1,displayMode:false,...o});else if("function"==typeof r)r(t,n,false);else if(void 0!==i)try{Mr.window.CKEDITOR_MATH_LAZY_LOAD||(Mr.window.CKEDITOR_MATH_LAZY_LOAD=i()),n.innerHTML=t,await Mr.window.CKEDITOR_MATH_LAZY_LOAD,CB(t,e,n)}catch(e){n.innerHTML=t,console.error(`math-tex-typesetting-lazy-load-failed: Lazy load failed: ${e}`)}else n.innerHTML=t,console.warn(`math-tex-typesetting-missing: Missing the mathematical typesetting engine (${r}) for tex.`)}class xB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&n.name===_B||e.getLastPosition().findAncestor(_B)?this.isEnabled=!!n:this.isEnabled=!1,this.value=AB(t,"preview")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"preview"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","preview",n)}))}}class EB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&n.name===_B||e.getLastPosition().findAncestor(_B)?this.isEnabled=!!n:this.isEnabled=!1,this.value=AB(t,"source")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"source"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","source",n)}))}}class TB extends Ii{refresh(){const t=this.editor,e=t.model.document.selection,n=e.getSelectedElement();n&&n.name===_B||e.getLastPosition().findAncestor(_B)?this.isEnabled=!!n:this.isEnabled=!1,this.value=AB(t,"split")}execute(){const t=this.editor.model,e=this.editor.model.document.selection,n=e.getSelectedElement()||e.getLastPosition().parent;t.change((t=>{"split"!==n.getAttribute("displayMode")&&t.setAttribute("displayMode","split",n)}))}}class SB extends Ii{refresh(){const t=this.editor.model.document.selection.getSelectedElement();t&&t.name===_B?this.isEnabled=!1:this.isEnabled=!0}execute(){const t=this.editor.model;let e;return t.change((n=>{e=n.createElement(_B,{displayMode:"split",source:"x=\\frac{-b \\pm \\sqrt{b^2 -4ac}}{2a} \\\\\n E = mc^2 "}),t.insertContent(e)})),e}}class DB extends Di{static get pluginName(){return"MathWidgetEditing"}init(){this._registerCommands(),this._defineConverters(),this.editor.config.define(_B,{engine:"mathjax",outputType:"script",katexRenderOptions:{}})}afterInit(){this.editor.model.schema.register(_B,{allowAttributes:["displayMode","source"],allowWhere:"$block",isObject:!0})}_registerCommands(){const t=this.editor;t.commands.add("PreviewMathWidgetCommand",new xB(t)),t.commands.add("SplitViewMathWidgetCommand",new TB(t)),t.commands.add("SourceViewMathWidgetCommand",new EB(t)),t.commands.add("InsertMathWidgetCommand",new SB(t))}_defineConverters(){const t=this.editor;t.data.downcastDispatcher.on("insert:mathwidget",this._mathDataDowncast.bind(this)),t.editing.downcastDispatcher.on("insert:mathwidget",this._mathDowncast.bind(this)),t.editing.downcastDispatcher.on("attribute:source:mathwidget",this._sourceAttributeDowncast.bind(this)),t.data.upcastDispatcher.on("element:code",this._mathUpcast.bind(this),{priority:"high"}),t.conversion.for("editingDowncast").attributeToAttribute({model:{name:"mathwidget",key:"displayMode"},view:t=>({key:"class",value:"ck-mathwidget__"+t+"-mode"})})}_mathDataDowncast(t,e,n){const r=this.editor.model,{writer:i,mapper:o}=n;if(!n.consumable.consume(e.item,"insert"))return;const s=o.toViewPosition(r.createPositionBefore(e.item)),a=i.createContainerElement("code",{class:"language-mathwidget"}),c=i.createContainerElement("pre",{spellcheck:"false"}),l=i.createText(e.item.getAttribute("source"));i.insert(r.createPositionAt(a,"end"),l),i.insert(r.createPositionAt(c,"end"),a),i.insert(s,c),o.bindElements(e.item,a)}_mathDowncast(t,e,n){const{writer:r,mapper:i,consumable:o}=n,{editor:s}=this,{model:a,t:c}=s,l=this;if(!o.consume(e.item,"insert"))return;const d=i.toViewPosition(a.createPositionBefore(e.item)),u={class:["ck-mathwidget__wrapper"]},h={class:["ck-mathwidget__editing-view"],placeholder:c("Insert Code"),"data-cke-ignore-events":!0},g=r.createContainerElement("div",u),f=r.createUIElement("textarea",h,(function(t){const n=this.toDomElement(t);n.value=e.item.getAttribute("source");const r=Da((t=>{s.model.change((n=>{n.setAttribute("source",t.target.value,e.item)}))}),300);return n.addEventListener("input",r),n.addEventListener("focus",(()=>{const t=s.model;t.document.selection.getSelectedElement()!==e.item&&t.change((t=>t.setSelection(e.item,"on")))}),!0),n})),p=r.createUIElement("div",{class:["ck-mathwidget__preview"]},(function(t){const n=e.item.getAttribute("source"),r=this.toDomElement(t),i=s.config.get("mathwidget");return r.innerHTML=n,window.setTimeout((()=>{l._renderMath(n,i,r)}),100),r}));return r.insert(r.createPositionAt(g,"start"),p),r.insert(r.createPositionAt(g,"start"),f),r.insert(d,g),i.bindElements(e.item,g),Kp(g,r,{widgetLabel:c("MathWidget"),hasSelectionHandle:!0})}_sourceAttributeDowncast(t,e,n){const r=e.attributeNewValue,i=this.editor.editing.view.domConverter;if(r){const t=n.mapper.toViewElement(e.item),o=this.editor.config.get("mathwidget");for(const e of t.getChildren())if("textarea"===e.name&&e.hasClass("ck-mathwidget__editing-view")){const t=i.viewToDom(e,window.document);t.value!=r&&(t.value=r)}else if("div"===e.name&&e.hasClass("ck-mathwidget__preview")){const t=i.viewToDom(e,window.document);t&&(t.innerHTML=r,t.removeAttribute("data-processed"),this._renderMath(r,o,t))}}}_mathUpcast(t,e,n){const r=e.viewItem,i=!r.parent||!r.parent.is("element","pre"),o=e.modelCursor.findAncestor("code"),{consumable:s,writer:a}=n;if(!r.hasClass("language-mathwidget")||i||o)return;if(!s.test(r,{name:!0}))return;const c=Array.from(r.getChildren()).filter((t=>t.is("$text"))).map((t=>t.data)).join(""),l=a.createElement(_B,{source:c,displayMode:"split"});n.safeInsert(l,e.modelCursor)&&(s.consume(r,{name:!0}),n.updateConversionResult(l,e))}_renderMath(t,e,n){CB(t,e,n)}}class MB extends Di{static get requires(){return[wm]}static get pluginName(){return"MathWidgetToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(wm),r=["SourceViewMathWidget","SplitViewMathWidget","PreviewMathWidget","|","InfoMathWidget"];r&&n.register("MathWidgetToolbar",{ariaLabel:e("MathWidget Toolbar"),items:r,getRelatedElement:t=>function(t){const e=t.getSelectedElement();if(e&&e.hasClass("ck-mathwidget__wrapper"))return e;return null}(t)})}}class IB extends Di{static get pluginName(){return"MathWidgetUI"}init(){this._addButtons()}_addButtons(){const t=this.editor;this._addInsertButton(),this._addInfoButton(),this._createToolbarButton(t,"PreviewMathWidget","Preview",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 11.609V13.4a.4.4 0 0 1-.4.4H2.6a.4.4 0 0 1-.4-.4v-1.791H1V13.4A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6v-1.791h-1.2ZM13.8 4.997H15V2.6A1.6 1.6 0 0 0 13.4 1H2.6A1.6 1.6 0 0 0 1 2.6v2.397h1.2V2.6c0-.22.18-.4.4-.4h10.8c.22 0 .4.18.4.4v2.397Z"/><path d="M8 11.095c-1.92 0-3.837-.919-5.749-2.757L2 8.095l.251-.242c3.815-3.677 7.683-3.677 11.498 0l.251.242-.251.243C11.84 10.176 9.925 11.095 8 11.096Zm-5.02-3c3.375 3.1 6.665 3.1 10.04 0-3.375-3.1-6.665-3.095-10.04 0Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M13.514 8.095c-3.676 3.543-7.352 3.543-11.028 0 3.676-3.542 7.352-3.542 11.028 0Zm-3.586 0A1.926 1.926 0 0 1 8 10.02a1.926 1.926 0 0 1-1.928-1.924c0-1.062.863-1.924 1.928-1.924s1.928.862 1.928 1.924Z"/><path d="M8 8.861a.767.767 0 1 0 .002-1.533A.767.767 0 0 0 8 8.86Z"/></svg>\r\n'),this._createToolbarButton(t,"SourceViewMathWidget","Source view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M11.609 2.2H13.4c.22 0 .4.18.4.4v10.8a.4.4 0 0 1-.4.4h-1.791V15H13.4a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1h-1.791v1.2ZM4.997 2.2V1H2.6A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h2.397v-1.2H2.6a.4.4 0 0 1-.4-.4V2.6c0-.22.18-.4.4-.4h2.397Z"/><path d="M3.511 4.778a.75.75 0 0 1 .75-.75h3.697a.75.75 0 1 1 0 1.5H4.26a.75.75 0 0 1-.75-.75ZM6.595 7.629a.75.75 0 0 1 .75-.75h3.588a.75.75 0 0 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM6.595 10.48a.75.75 0 0 1 .75-.75h1.143a.75.75 0 1 1 0 1.5H7.345a.75.75 0 0 1-.75-.75ZM3.511 7.629a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75ZM3.511 10.48a.75.75 0 0 1 .75-.75h.983a.75.75 0 1 1 0 1.5h-.983a.75.75 0 0 1-.75-.75Z"/></svg>\r\n'),this._createToolbarButton(t,"SplitViewMathWidget","Split view",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.8 3.076H8.588V13.8H13.4a.4.4 0 0 0 .4-.4V3.076Zm-6.412 0H2.2V13.4c0 .22.18.4.4.4h4.788V3.076ZM2.6 1A1.6 1.6 0 0 0 1 2.6v10.8A1.6 1.6 0 0 0 2.6 15h10.8a1.6 1.6 0 0 0 1.6-1.6V2.6A1.6 1.6 0 0 0 13.4 1H2.6Z"/></svg>\r\n')}_addInsertButton(){const t=this.editor,e=t.t,n=t.editing.view,r="InsertMathWidgetCommand";t.ui.componentFactory.add("mathwidget",(i=>{const o=new Zh(i),s=t.commands.get(r);return o.set({label:e(vB),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.44 10.78" height="40.74" width="58.35"><path d="M8.15 0c-.06 0-.1.02-.11.03a.12.12 0 0 0-.02.01 6.81 6.81 0 0 0-2.32 4.9v.9a6.82 6.82 0 0 0 2.32 4.9.12.12 0 0 0 .02 0c.02.02.06.04.11.04.07 0 .12-.03.16-.07a.22.22 0 0 0 0-.32.12.12 0 0 0-.02-.02A4.4 4.4 0 0 1 7 8.44a7.62 7.62 0 0 1-.5-2.6v-.9c0-.82.19-1.76.5-2.6A4.4 4.4 0 0 1 8.3.42.12.12 0 0 0 8.3.39a.22.22 0 0 0 .08-.16.22.22 0 0 0-.07-.16.22.22 0 0 0-.16-.07zm4.83 0a.22.22 0 0 0-.16.07.22.22 0 0 0-.07.16c0 .08.05.13.08.16a.12.12 0 0 0 .01.02c.52.39.98 1.1 1.3 1.94.3.83.49 1.77.49 2.6v.88c0 .83-.18 1.78-.5 2.6a4.4 4.4 0 0 1-1.29 1.95.22.22 0 0 0-.01.33c.03.04.08.07.15.07.05 0 .09-.02.12-.03a.12.12 0 0 0 .02-.01 6.82 6.82 0 0 0 2.32-4.9v-.9a6.81 6.81 0 0 0-2.32-4.9.12.12 0 0 0-.02 0c-.03-.02-.06-.04-.12-.04zm-8.5.46c-.4 0-1.13.23-1.46 1.32-.06.2-.11.45-.33 1.58h-.64c-.1 0-.19-.01-.28.03a.25.25 0 0 0-.12.12.38.38 0 0 0-.03.17c0 .04 0 .1.04.14.03.04.07.07.11.08.09.03.16.02.26.02h.56l-.77 4.04c-.1.51-.19 1-.32 1.36-.06.18-.14.32-.22.4-.08.1-.16.13-.26.13-.03 0-.1 0-.2-.03.11-.05.2-.13.26-.2a.7.7 0 0 0 .13-.4.48.48 0 0 0-.16-.38.53.53 0 0 0-.35-.12c-.34 0-.7.3-.7.76 0 .27.14.5.34.64s.44.2.68.2c.33 0 .61-.17.83-.4.21-.21.37-.48.47-.69.18-.35.32-.84.43-1.25a14.17 14.17 0 0 0 .18-.8l.61-3.26h.81c.1 0 .2.01.3-.03.04-.03.09-.07.11-.13.02-.05.03-.1.03-.17 0-.05-.01-.1-.05-.14a.23.23 0 0 0-.11-.07c-.08-.03-.16-.02-.25-.02h-.73l.2-1.07a26.3 26.3 0 0 1 .24-1.07c.08-.17.22-.3.39-.3l.21.05a.7.7 0 0 0-.25.2.7.7 0 0 0-.13.4c0 .15.06.28.16.37.1.08.22.12.35.12.34 0 .7-.3.7-.76 0-.28-.15-.5-.35-.64-.2-.14-.45-.2-.7-.2zm5.4 2.78c-.6 0-1.06.37-1.36.76-.16.2-.27.4-.35.57-.07.18-.12.3-.12.42 0 .1.08.18.14.2.06.03.1.02.1.02.06 0 .12 0 .18-.04.05-.05.07-.1.08-.17v.02c.35-1.09 1-1.3 1.3-1.3.09 0 .2.01.29.09.09.07.17.2.17.5 0 .27-.18 1-.57 2.48a1.8 1.8 0 0 1-.37.75.7.7 0 0 1-.52.26c-.04 0-.13 0-.22-.03a.68.68 0 0 0 .3-.56.47.47 0 0 0-.18-.39.55.55 0 0 0-.32-.1c-.4 0-.7.33-.7.74 0 .28.16.5.38.63.21.13.48.18.73.18.39 0 .69-.2.89-.41.09-.1.15-.19.2-.27.2.36.59.68 1.16.68.6 0 1.05-.37 1.35-.76.15-.2.27-.4.34-.57.08-.18.12-.3.12-.42a.24.24 0 0 0-.11-.2c-.06-.03-.12-.02-.13-.02a.26.26 0 0 0-.18.06c-.05.05-.06.1-.07.14-.34 1.1-1.02 1.3-1.3 1.3-.17 0-.27-.06-.35-.17a.72.72 0 0 1-.11-.4c0-.22.06-.45.18-.91l.36-1.45c.03-.14.1-.44.25-.7.15-.25.36-.46.68-.46.03 0 .12 0 .22.03a.7.7 0 0 0-.32.56c0 .11.04.23.13.33.08.1.22.16.4.16.14 0 .3-.06.44-.18a.73.73 0 0 0 .24-.55c0-.32-.2-.54-.42-.66a1.52 1.52 0 0 0-.68-.16c-.34 0-.62.16-.82.34a1.8 1.8 0 0 0-.3.35 1.32 1.32 0 0 0-.5-.54 1.37 1.37 0 0 0-.63-.15z" style="line-height:1.25;-inkscape-font-specification:\'Latin Modern Math\'" font-weight="400" font-size="10.58" font-family="Latin Modern Math" letter-spacing="-1.06" word-spacing="0"/></svg>\n',tooltip:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),s.listenTo(o,"execute",(()=>{const e=t.execute(r),i=t.editing.mapper.toViewElement(e);if(n.scrollToTheSelection(),n.focus(),i){const t=n.domConverter.viewToDom(i,document);t&&t.querySelector(".ck-mathwidget__editing-view").focus()}})),o}))}_addInfoButton(){const t=this.editor,e=t.t;t.ui.componentFactory.add("InfoMathWidget",(t=>{const n=new Zh(t);return n.set({label:e("Read more about Math diagram syntax"),icon:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 1.219C4.254 1.219 1.219 4.28 1.219 8A6.78 6.78 0 0 0 8 14.781c3.719 0 6.781-3.035 6.781-6.781 0-3.719-3.062-6.781-6.781-6.781Zm0 12.25A5.45 5.45 0 0 1 2.531 8 5.467 5.467 0 0 1 8 2.531c3.008 0 5.469 2.461 5.469 5.469A5.467 5.467 0 0 1 8 13.469Zm0-9.242c-.656 0-1.148.52-1.148 1.148 0 .656.492 1.148 1.148 1.148.629 0 1.148-.492 1.148-1.148 0-.629-.52-1.148-1.148-1.148Zm1.531 6.945v-.656a.353.353 0 0 0-.328-.329h-.328V7.454a.353.353 0 0 0-.328-.328h-1.75a.332.332 0 0 0-.328.328v.656c0 .192.136.329.328.329h.328v1.75h-.328a.333.333 0 0 0-.328.328v.656c0 .191.136.328.328.328h2.406a.332.332 0 0 0 .328-.328Z"/></svg>\r\n',tooltip:!0}),n.on("execute",(()=>{window.open("https://ckeditor.com/blog/basic-overview-of-creating-flowcharts-using-math/","_blank","noopener")})),n}))}_createToolbarButton(t,e,n,r){const i=t.t;t.ui.componentFactory.add(e,(o=>{const s=new Zh(o),a=t.commands.get(`${e}Command`);return s.set({label:i(n),icon:r,tooltip:!0}),s.bind("isOn","isEnabled").to(a,"value","isEnabled"),a.listenTo(s,"execute",(()=>{t.execute(`${e}Command`),t.editing.view.scrollToTheSelection(),t.editing.view.focus()})),s}))}}var BB=n(8989),LB={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};zi()(BB.Z,LB);BB.Z.locals;class NB extends Lf{}NB.builtinPlugins=[class extends Di{static get requires(){return[Vf,Hf]}static get pluginName(){return"Alignment"}},class extends Di{static get requires(){return[rp]}static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const t=this.editor.commands;t.get("bulletedList")&&xp(this.editor,this,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&xp(this.editor,this,/^1[.|)]\s$/,"numberedList"),t.get("todoList")&&xp(this.editor,this,/^\[\s?\]\s$/,"todoList"),t.get("checkTodoList")&&xp(this.editor,this,/^\[\s?x\s?\]\s$/,(()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")}))}_addBasicStylesAutoformats(){const t=this.editor.commands;if(t.get("bold")){const t=Sp(this.editor,"bold");Ep(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Ep(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(t.get("italic")){const t=Sp(this.editor,"italic");Ep(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Ep(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(t.get("code")){const t=Sp(this.editor,"code");Ep(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(t.get("strikethrough")){const t=Sp(this.editor,"strikethrough");Ep(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const t=this.editor.commands.get("heading");t&&t.modelElements.filter((t=>t.match(/^heading[1-6]$/))).forEach((e=>{const n=e[7],r=new RegExp(`^(#{${n}})\\s$`);xp(this.editor,this,r,(()=>{if(!t.isEnabled||t.value===e)return!1;this.editor.execute("heading",{value:e})}))}))}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&xp(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const t=this.editor,e=t.model.document.selection;t.commands.get("codeBlock")&&xp(t,this,/^```$/,(()=>{if(e.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})}))}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&xp(this.editor,this,/^---$/,"horizontalLine")}},class extends Di{static get requires(){return[zm,Xm,Gm,rp]}static get pluginName(){return"AutoImage"}constructor(t){super(t),this._timeoutId=null,this._positionToInsert=null}init(){const t=this.editor,e=t.model.document;this.listenTo(t.plugins.get("ClipboardPipeline"),"inputTransformation",(()=>{const t=e.selection.getFirstRange(),n=pd.fromPosition(t.start);n.stickiness="toPrevious";const r=pd.fromPosition(t.end);r.stickiness="toNext",e.once("change:data",(()=>{this._embedImageBetweenPositions(n,r),n.detach(),r.detach()}),{priority:"high"})})),t.commands.get("undo").on("execute",(()=>{this._timeoutId&&(Mr.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)}),{priority:"high"})}_embedImageBetweenPositions(t,e){const n=this.editor,r=new Nc(t,e),i=r.getWalker({ignoreElementEnd:!0}),o=Object.fromEntries(n.model.document.selection.getAttributes()),s=this.editor.plugins.get("ImageUtils");let a="";for(const t of i)t.item.is("$textProxy")&&(a+=t.item.data);a=a.trim(),a.match(tb)?(this._positionToInsert=pd.fromPosition(t),this._timeoutId=Mr.window.setTimeout((()=>{n.commands.get("insertImage").isEnabled?(n.model.change((t=>{let e;this._timeoutId=null,t.remove(r),r.detach(),"$graveyard"!==this._positionToInsert.root.rootName&&(e=this._positionToInsert.toPosition()),s.insertImage({...o,src:a},e),this._positionToInsert.detach(),this._positionToInsert=null})),n.plugins.get("Delete").requestUndoOnBackspace()):r.detach()}),100)):r.detach()}},Ib,Lb,class extends Di{static get requires(){return[zb,Vb]}static get pluginName(){return"BlockQuote"}},class extends Di{static get requires(){return[Ub,qb]}static get pluginName(){return"Bold"}},class extends Di{static get requires(){return[Gb]}static get pluginName(){return"CKFinderUploadAdapter"}init(){const t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(Gb).createUploadAdapter=e=>new ek(e,t,this.editor.t))}},class extends Pi{static get pluginName(){return"CloudServices"}static get requires(){return[lk]}init(){const t=this.context.config.get("cloudServices")||{};for(const e in t)this[e]=t[e];if(this._tokens=new Map,this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null}registerTokenUrl(t){if(this._tokens.has(t))return Promise.resolve(this.getTokenFor(t));const e=this.context.plugins.get("CloudServicesCore").createToken(t);return this._tokens.set(t,e),e.init()}getTokenFor(t){const e=this._tokens.get(t);if(!e)throw new b("cloudservices-token-not-registered",this);return e}destroy(){super.destroy();for(const t of this._tokens.values())t.destroy()}},class extends Di{static get requires(){return[uk,pk]}static get pluginName(){return"Code"}},class extends Di{static get requires(){return[Sk,Lk]}static get pluginName(){return"CodeBlock"}},rw,Rk,class extends Di{static get requires(){return[zm,zp,pw,$p,ip,Gm]}static get pluginName(){return"Essentials"}},class extends Di{static get requires(){return[Nw,_w]}static get pluginName(){return"FindAndReplace"}init(){const t=this.editor.plugins.get("FindAndReplaceUI"),e=this.editor.plugins.get("FindAndReplaceEditing"),n=e.state;t.on("findNext",((t,e)=>{e?(n.searchText=e.searchText,this.editor.execute("find",e.searchText,e)):this.editor.execute("findNext")})),t.on("findPrevious",((t,e)=>{e&&n.searchText!==e.searchText?this.editor.execute("find",e.searchText):this.editor.execute("findPrevious")})),t.on("replace",((t,e)=>{n.searchText!==e.searchText&&this.editor.execute("find",e.searchText);const r=n.highlightedResult;r&&this.editor.execute("replace",e.replaceText,r)})),t.on("replaceAll",((t,e)=>{n.searchText!==e.searchText&&this.editor.execute("find",e.searchText),this.editor.execute("replaceAll",e.replaceText,n.results)})),t.on("searchReseted",(()=>{n.clear(this.editor.model),e.stop()}))}},class extends Di{static get requires(){return[Gw,Kw]}static get pluginName(){return"FontBackgroundColor"}},class extends Di{static get requires(){return[Xw,Jw]}static get pluginName(){return"FontColor"}},class extends Di{static get requires(){return[iy,oy]}static get pluginName(){return"FontFamily"}},class extends Di{static get requires(){return[uy,fy]}static get pluginName(){return"FontSize"}normalizeSizeOptions(t){return ay(t)}},class extends Di{static get pluginName(){return"GeneralHtmlSupport"}static get requires(){return[rw,py,my,by,ky,yy,_y,vy,Ay,Cy,Ey]}init(){const t=this.editor,e=t.plugins.get(rw);e.loadAllowedConfig(t.config.get("htmlSupport.allow")||[]),e.loadDisallowedConfig(t.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(t){const e=this.editor.plugins.get("DataSchema"),n=Array.from(e.getDefinitionsForView(t,!1));return n&&n.length&&n[0].isInline&&!n[0].isObject?n[0].model:"htmlAttributes"}addModelHtmlClass(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"classes",(t=>{for(const n of bi(e))t.add(n)}))}))}removeModelHtmlClass(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"classes",(t=>{for(const n of bi(e))t.delete(n)}))}))}setModelHtmlAttributes(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"attributes",(t=>{for(const[n,r]of Object.entries(e))t.set(n,r)}))}))}removeModelHtmlAttributes(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"attributes",(t=>{for(const n of bi(e))t.delete(n)}))}))}setModelHtmlStyles(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"styles",(t=>{for(const[n,r]of Object.entries(e))t.set(n,r)}))}))}removeModelHtmlStyles(t,e,n){const r=this.editor.model,i=this.getGhsAttributeNameForElement(t);r.change((t=>{for(const o of Ty(r,n,i))Sy(t,o,i,"styles",(t=>{for(const n of bi(e))t.delete(n)}))}))}},class extends Di{static get requires(){return[Py,Fy]}static get pluginName(){return"Heading"}},class extends Di{static get requires(){return[Vy,Uy]}static get pluginName(){return"Highlight"}},class extends Di{static get requires(){return[Zy,Ky,bm]}static get pluginName(){return"HorizontalLine"}},class extends Di{static get pluginName(){return"HtmlComment"}init(){const t=this.editor;t.data.processor.skipComments=!1,t.model.schema.addAttributeCheck(((t,e)=>{if(t.endsWith("$root")&&e.startsWith("$comment"))return!0})),t.conversion.for("upcast").elementToMarker({view:"$comment",model:(t,{writer:e})=>{const n=this.editor.model.document.getRoot(),r=t.getCustomProperty("$rawContent"),i=`$comment:${f()}`;return e.setAttribute(i,r,n),i}}),t.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(t,{writer:e})=>{const n=this.editor.model.document.getRoot(),r=t.markerName,i=n.getAttribute(r),o=e.createUIElement("$comment");return e.setCustomProperty("$rawContent",i,o),o}}),t.model.document.registerPostFixer((e=>{const n=t.model.document.getRoot(),r=t.model.document.differ.getChangedMarkers().filter((t=>t.name.startsWith("$comment"))),i=r.filter((t=>{const e=t.data.newRange;return e&&"$graveyard"===e.root.rootName}));if(0===i.length)return!1;for(const t of i)e.removeMarker(t.name),e.removeAttribute(t.name,n);return!0})),t.data.on("set",(()=>{for(const e of t.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(e.name)}),{priority:"high"}),t.model.on("deleteContent",((e,[n])=>{for(const e of n.getRanges()){const n=t.model.schema.getLimitElement(e),r=t.model.createPositionAt(n,0),i=t.model.createPositionAt(n,"end");let o;o=r.isTouching(e.start)&&i.isTouching(e.end)?this.getHtmlCommentsInRange(t.model.createRange(r,i)):this.getHtmlCommentsInRange(e,{skipBoundaries:!0});for(const t of o)this.removeHtmlComment(t)}}),{priority:"high"})}createHtmlComment(t,e){const n=f(),r=this.editor.model,i=r.document.getRoot(),o=`$comment:${n}`;return r.change((n=>{const r=n.createRange(t);return n.addMarker(o,{usingOperation:!0,affectsData:!0,range:r}),n.setAttribute(o,e,i),o}))}removeHtmlComment(t){const e=this.editor,n=e.model.document.getRoot(),r=e.model.markers.get(t);return!!r&&(e.model.change((e=>{e.removeMarker(r),e.removeAttribute(t,n)})),!0)}getHtmlCommentData(t){const e=this.editor,n=e.model.markers.get(t),r=e.model.document.getRoot();return n?{content:r.getAttribute(t),position:n.getStart()}:null}getHtmlCommentsInRange(t,{skipBoundaries:e=!1}={}){const n=!e;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter((e=>function(t,e){const r=t.getRange().start;return(r.isAfter(e.start)||n&&r.isEqual(e.start))&&(r.isBefore(e.end)||n&&r.isEqual(e.end))}(e,t))).map((t=>t.name))}},class extends Di{static get requires(){return[f_,m_]}static get pluginName(){return"Image"}},class extends Di{static get requires(){return[w_,y_]}static get pluginName(){return"ImageCaption"}},class extends Di{static get pluginName(){return"ImageInsert"}static get requires(){return[$_,Q_,K_]}},class extends Di{static get requires(){return[J_,ov,ev]}static get pluginName(){return"ImageResize"}},class extends Di{static get requires(){return[vv,xv]}static get pluginName(){return"ImageStyle"}},class extends Di{static get requires(){return[wm,Xm]}static get pluginName(){return"ImageToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(wm),r=t.plugins.get("ImageUtils");var i;n.register("image",{ariaLabel:e("Image toolbar"),items:(i=t.config.get("image.toolbar")||[],i.map((t=>O(t)?t.name:t))),getRelatedElement:t=>r.getClosestSelectedImageWidget(t)})}},$_,class extends Di{static get pluginName(){return"Indent"}static get requires(){return[Dv,Bv]}},class extends Di{constructor(t){super(t),t.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const t=this.editor,e=t.config.get("indentBlock"),n=!e.classes||!e.classes.length,r=Object.assign({direction:"forward"},e),i=Object.assign({direction:"backward"},e);n?(t.data.addStyleProcessorRules(Hu),this._setupConversionUsingOffset(t.conversion),t.commands.add("indentBlock",new Lv(t,new Nv(r))),t.commands.add("outdentBlock",new Lv(t,new Nv(i)))):(this._setupConversionUsingClasses(e.classes),t.commands.add("indentBlock",new Lv(t,new Ov(r))),t.commands.add("outdentBlock",new Lv(t,new Ov(i))))}afterInit(){const t=this.editor,e=t.model.schema,n=t.commands.get("indent"),r=t.commands.get("outdent"),i=t.config.get("heading.options");(i&&i.map((t=>t.model))||Pv).forEach((t=>{e.isRegistered(t)&&e.extend(t,{allowAttributes:"blockIndent"})})),e.setAttributeProperties("blockIndent",{isFormatting:!0}),n.registerChildCommand(t.commands.get("indentBlock")),r.registerChildCommand(t.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const t=this.editor.conversion,e="rtl"===this.editor.locale.contentLanguageDirection?"margin-right":"margin-left";t.for("upcast").attributeToAttribute({view:{styles:{[e]:/[\s\S]+/}},model:{key:"blockIndent",value:t=>t.getStyle(e)}}),t.for("downcast").attributeToAttribute({model:"blockIndent",view:t=>({key:"style",value:{[e]:t}})})}_setupConversionUsingClasses(t){const e={model:{key:"blockIndent",values:[]},view:{}};for(const n of t)e.model.values.push(n),e.view[n]={key:"class",value:[n]};this.editor.conversion.attributeToAttribute(e)}},class extends Di{static get requires(){return[zv,jv]}static get pluginName(){return"Italic"}},class extends Di{static get requires(){return[Zv,aA,Ib]}static get pluginName(){return"Link"}},class extends Di{static get requires(){return[lA,hA]}static get pluginName(){return"LinkImage"}},class extends Di{static get requires(){return[UA,GA]}static get pluginName(){return"List"}},class extends Di{static get requires(){return[JA,gC]}static get pluginName(){return"ListProperties"}},class extends Di{constructor(t){super(t),t.data.processor=new $x(t.data.viewDocument)}static get pluginName(){return"Markdown"}},class extends Di{static get requires(){return[Jx,oE,eE,bm]}static get pluginName(){return"MediaEmbed"}},class extends Di{static get requires(){return[wm]}static get pluginName(){return"MediaEmbedToolbar"}afterInit(){const t=this.editor,e=t.t;t.plugins.get(wm).register("mediaEmbed",{ariaLabel:e("Media toolbar"),items:t.config.get("mediaEmbed.toolbar")||[],getRelatedElement:Ux})}},class extends Di{toMentionAttribute(t,e){return uE(t,e)}static get pluginName(){return"Mention"}static get requires(){return[lE,AE]}},class extends Di{static get requires(){return[OE,PE,bm]}static get pluginName(){return"PageBreak"}},By,class extends Di{static get pluginName(){return"PasteFromOffice"}static get requires(){return[Bp]}init(){const t=this.editor,e=t.editing.view.document,n=[];n.push(new ZE(e)),n.push(new UE(e)),t.plugins.get("ClipboardPipeline").on("inputTransformation",((r,i)=>{if(i._isTransformedWithPasteFromOffice)return;if(t.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const o=i.dataTransfer.getData("text/html"),s=n.find((t=>t.isActive(o)));s&&(i._parsedData=QE(o,e.stylesProcessor),s.execute(i),i._isTransformedWithPasteFromOffice=!0)}),{priority:"high"})}},class extends Di{static get requires(){return[eT,JE]}static get pluginName(){return"RemoveFormat"}},class extends Di{static get pluginName(){return"SourceEditing"}static get requires(){return[Rh]}constructor(t){super(t),this.set("isSourceEditingMode",!1),this._elementReplacer=new G,this._replacedRoots=new Map,this._dataFromRoots=new Map}init(){const t=this.editor,e=t.t;t.ui.componentFactory.add("sourceEditing",(n=>{const r=new Zh(n);return r.set({label:e("Source"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',tooltip:!0,withText:!0,class:"ck-source-editing-button"}),r.bind("isOn").to(this,"isSourceEditingMode"),r.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(Rh),"hasAny",((t,e,n)=>!!t&&(!e&&!n))),this.listenTo(r,"execute",(()=>{this.isSourceEditingMode=!this.isSourceEditingMode})),r})),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",((t,e,n)=>{n?(this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())})),this.on("change:isEnabled",((t,e,n)=>this._handleReadOnlyMode(!n))),this.listenTo(t,"change:isReadOnly",((t,e,n)=>this._handleReadOnlyMode(n)))),t.data.on("get",(()=>{this.isSourceEditingMode&&this._updateEditorData()}),{priority:"high"})}afterInit(){const t=this.editor;["RealTimeCollaborativeEditing","CommentsEditing","TrackChangesEditing","RevisionHistory"].some((e=>t.plugins.has(e)))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),t.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const t=this.editor,e=t.editing.view,n=t.model;n.change((t=>{t.setSelection(null),t.removeSelectionAttribute(n.document.selection.getAttributeKeys())}));for(const[n,r]of e.domRoots){const i=aT(t.data.get({rootName:n})),o=ft(r.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),s=ft(r.ownerDocument,"div",{class:"ck-source-editing-area","data-value":i},[o]);o.value=i,o.setSelectionRange(0,0),o.addEventListener("input",(()=>{s.dataset.value=o.value})),e.change((t=>{const r=e.document.getRoot(n);t.addClass("ck-hidden",r)})),t.ui.setEditableElement("sourceEditing:"+n,o),this._replacedRoots.set(n,s),this._elementReplacer.replace(r,s),this._dataFromRoots.set(n,i)}this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this._updateEditorData(),t.change((e=>{for(const[n]of this._replacedRoots)e.removeClass("ck-hidden",t.document.getRoot(n))})),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_updateEditorData(){const t=this.editor,e={};for(const[t,n]of this._replacedRoots){const r=this._dataFromRoots.get(t),i=n.dataset.value;r!==i&&(e[t]=i)}Object.keys(e).length&&t.data.set(e,{batchType:{isUndoable:!0}})}_focusSourceEditing(){const t=this.editor,[e]=this._replacedRoots.values(),n=e.querySelector("textarea");t.editing.view.document.isFocused=!1,n.focus()}_disableCommands(){const t=this.editor;for(const e of t.commands.commands())e.forceDisabled(sT)}_enableCommands(){const t=this.editor;for(const e of t.commands.commands())e.clearForceDisabled(sT)}_handleReadOnlyMode(t){if(this.isSourceEditingMode)for(const[,e]of this._replacedRoots)e.querySelector("textarea").readOnly=t}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t._hasExternalElement}},class extends Di{static get requires(){return[ip]}static get pluginName(){return"SpecialCharacters"}constructor(t){super(t),this._characters=new Map,this._groups=new Map}init(){const t=this.editor,e=t.t,n=t.commands.get("input");t.ui.componentFactory.add("specialCharacters",(r=>{const i=Rg(r);let o;return i.buttonView.set({label:e("Special characters"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>',tooltip:!0}),i.bind("isEnabled").to(n),i.on("execute",((e,n)=>{t.execute("insertText",{text:n.character}),t.editing.view.focus()})),i.on("change:isOpen",(()=>{if(!o){o=this._createDropdownPanelContent(r,i);const t=new mT(r,o.navigationView,o.gridView,o.infoView);i.panelView.children.add(t)}o.infoView.set({character:null,name:null})})),i}))}addItems(t,e){if(t===wT)throw new b('special-character-invalid-group-name: The name "All" is reserved and cannot be used.');const n=this._getGroup(t);for(const t of e)n.add(t.title),this._characters.set(t.title,t.character)}getGroups(){return this._groups.keys()}getCharactersForGroup(t){return t===wT?new Set(this._characters.keys()):this._groups.get(t)}getCharacter(t){return this._characters.get(t)}_getGroup(t){return this._groups.has(t)||this._groups.set(t,new Set),this._groups.get(t)}_updateGrid(t,e){e.tiles.clear();const n=this.getCharactersForGroup(t);for(const t of n){const n=this.getCharacter(t);e.tiles.add(e.createTile(n,t))}}_createDropdownPanelContent(t,e){const n=[...this.getGroups()];n.unshift(wT);const r=new cT(t,n),i=new uT(t),o=new fT(t);return i.delegate("execute").to(e),i.on("tileHover",((t,e)=>{o.set(e)})),i.on("tileFocus",((t,e)=>{o.set(e)})),r.on("execute",(()=>{this._updateGrid(r.currentGroupName,i)})),this._updateGrid(r.currentGroupName,i),{navigationView:r,gridView:i,infoView:o}}},yT,_T,class extends Di{static get requires(){return[_T,CT,vT,yT,AT]}},AT,vT,CT,class extends Di{static get pluginName(){return"StandardEditingMode"}static get requires(){return[ET,TT]}},class extends Di{static get requires(){return[IT,LT]}static get pluginName(){return"Strikethrough"}},class extends Di{static get pluginName(){return"Style"}static get requires(){return[QT,GT]}},class extends Di{static get requires(){return[tS,nS]}static get pluginName(){return"Subscript"}},class extends Di{static get requires(){return[iS,sS]}static get pluginName(){return"Superscript"}},class extends Di{static get requires(){return[pD,yD,CD,BD,MD,xD,bm]}static get pluginName(){return"Table"}},class extends Di{static get pluginName(){return"TableCaption"}static get requires(){return[$D,HD]}},class extends Di{static get pluginName(){return"TableCellProperties"}static get requires(){return[YM,LM]}},class extends Di{static get requires(){return[aI,PM]}static get pluginName(){return"TableColumnResize"}},class extends Di{static get pluginName(){return"TableProperties"}static get requires(){return[wI,TI]}},class extends Di{static get requires(){return[wm]}static get pluginName(){return"TableToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(wm),r=t.config.get("table.contentToolbar"),i=t.config.get("table.tableToolbar");r&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:r,getRelatedElement:_M}),i&&n.register("table",{ariaLabel:e("Table toolbar"),items:i,getRelatedElement:yM})}},class extends Di{static get requires(){return[MI,LI]}static get pluginName(){return"TextPartLanguage"}},class extends Di{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(t){super(t),t.config.define("typing",{transformations:{include:bp}})}init(){const t=this.editor.model.document.selection;t.on("change:range",(()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")})),this._enableTransformationWatchers()}_enableTransformationWatchers(){const t=this.editor,e=t.model,n=t.plugins.get("Delete"),r=function(t){const e=t.extra||[],n=t.remove||[],r=t=>!n.includes(t);return function(t){const e=new Set;for(const n of t)if("string"==typeof n&&mp[n])for(const t of mp[n])e.add(t);else e.add(n);return Array.from(e)}(t.include.concat(e).filter(r)).filter(r).map((t=>"string"==typeof t&&pp[t]?pp[t]:t)).filter((t=>"object"==typeof t)).map((t=>({from:kp(t.from),to:wp(t.to)})))}(t.config.get("typing.transformations")),i=new sp(t.model,(t=>{for(const e of r){if(e.from.test(t))return{normalizedTransformation:e}}}));i.on("matched:data",((t,r)=>{if(!r.batch.isTyping)return;const{from:i,to:o}=r.normalizedTransformation,s=i.exec(r.text),a=o(s.slice(1)),c=r.range;let l=s.index;e.enqueueChange((t=>{for(let n=1;n<s.length;n++){const r=s[n],i=a[n-1];if(null==i){l+=r.length;continue}const o=c.start.getShiftedBy(l),d=e.createRange(o,o.getShiftedBy(r.length)),u=yp(o);e.insertContent(t.createText(i,u),d),l+=i.length}e.enqueueChange((()=>{n.requestUndoOnBackspace()}))}))})),i.bind("isEnabled").to(this)}},class extends Di{static get requires(){return[VI,$I]}static get pluginName(){return"TodoList"}},class extends Di{static get requires(){return[qI,GI]}static get pluginName(){return"Underline"}},class extends Di{constructor(t){super(t),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters()}},words:{get(){return this.words=this._getWords()}}}),this.set("_wordsLabel"),this.set("_charactersLabel"),this._config=t.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=i.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}init(){this.editor.model.document.on("change:data",Em(this._refreshStats.bind(this),250)),"function"==typeof this._config.onUpdate&&this.on("update",((t,e)=>{this._config.onUpdate(e)})),wr(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const t=this.editor,e=t.t,n=t.config.get("wordCount.displayWords"),r=t.config.get("wordCount.displayCharacters"),i=Qu.bind(this,this),o=[];return this._outputView||(this._outputView=new yh,(n||void 0===n)&&(this.bind("_wordsLabel").to(this,"words",(t=>e("Words: %0",t))),o.push({tag:"div",children:[{text:[i.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(r||void 0===r)&&(this.bind("_charactersLabel").to(this,"characters",(t=>e("Characters: %0",t))),o.push({tag:"div",children:[{text:[i.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:o}),this._outputView.render()),this._outputView.element}_getCharacters(){return ZI(this.editor.model.document.getRoot()).replace(/\n/g,"").length}_getWords(){return(ZI(this.editor.model.document.getRoot()).match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const t=this.words=this._getWords(),e=this.characters=this._getCharacters();this.fire("update",{words:t,characters:e})}},class extends Di{static get requires(){return[sB,aB,cB]}static get pluginName(){return"Mermaid"}},class extends Di{static get requires(){return[DB,MB,IB]}static get pluginName(){return"MathWidget"}},class extends Di{static get requires(){return[mB,bB,kB]}static get pluginName(){return"CodeWidget"}}],NB.defaultConfig={toolbar:{items:["heading","|","style","fontFamily","fontSize","bold","italic","link","bulletedList","numberedList","|","highlight","imageUpload","imageInsert","blockQuote","insertTable","findAndReplace","undo","redo","-","outdent","indent","code","codewidget","mathwidget","mermaid","codeBlock","sourceEditing"],shouldNotGroupWhenFull:!0},language:"ko",image:{toolbar:["imageTextAlternative","toggleImageCaption","imageStyle:inline","imageStyle:block","imageStyle:side","linkImage"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},mathwidget:{engine:"mathjax",lazyLoad:void 0,outputType:"script",katexRenderOptions:{}}};const OB={Editor:NB,EditorWatchdog:class extends XI{constructor(t,e={}){super(e),this._editor=null,this._throttledSave=Em(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),this._creator=(e,n)=>t.create(e,n),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then((()=>(this.state="initializing",this._fire("stateChange"),this._destroy()))).catch((t=>{console.error("An error happened during the editor destroying.",t)})).then((()=>{if("string"==typeof this._elementOrData)return this.create(this._data,this._config,this._config.context);{const t=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,t,t.context)}})).then((()=>{this._fire("restart")}))}create(t=this._elementOrData,e=this._config,n){return Promise.resolve().then((()=>(super._startErrorHandling(),this._elementOrData=t,this._config=this._cloneEditorConfiguration(e)||{},this._config.context=n,this._creator(t,this._config)))).then((t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")}))}destroy(){return Promise.resolve().then((()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())))}_destroy(){return Promise.resolve().then((()=>{this._stopErrorHandling(),this._throttledSave.flush();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)}))}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t={};for(const e of this._editor.model.document.getRootNames())t[e]=this._editor.data.get({rootName:e});return t}_isErrorComingFromThisItem(t){return function(t,e,n=new Set){if(t===e&&"object"==typeof(r=t)&&null!==r)return!0;var r;const i=KI(t,n),o=KI(e,n);for(const t of i)if(o.has(t))return!0;return!1}(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return kr(t,((t,e)=>wr(t)||"context"===e?t:void 0))}}}})(),r=r.default})()));
//# sourceMappingURL=ckeditor.js.map